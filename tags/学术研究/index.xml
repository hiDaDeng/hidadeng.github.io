<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>学术研究 on 大邓和他的PYTHON</title>
    <link>/tags/%E5%AD%A6%E6%9C%AF%E7%A0%94%E7%A9%B6/</link>
    <description>Recent content in 学术研究 on 大邓和他的PYTHON</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Mon, 19 Sep 2022 00:00:00 +0000</lastBuildDate><atom:link href="/tags/%E5%AD%A6%E6%9C%AF%E7%A0%94%E7%A9%B6/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>转载 | 历史GIS的研究现状和发展趋势</title>
      <link>https://hidadeng.github.io/blog/2022-09-19-history-gis/</link>
      <pubDate>Mon, 19 Sep 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-09-19-history-gis/</guid>
      <description>d历史地理信息系统（历史GIS）属于地理信息系统（GIS）与历史学相结合的交叉研究领域，它有机地集成了GIS的技术方法、地理学家的空间视角和历史学家的时间视角，量化历史时期的地理过程并构建相应的时空模型，为面向未来的科学预测提供研究基础。</description>
      <content:encoded><![CDATA[<br>
<p>赵耀龙,巢子豪.历史GIS的研究现状和发展趋势[J].地球信息科学学报,2020,22(05):929-944.</p>
<ul>
<li>赵耀龙，华南师范大学地理科学学院教授、博士生导师、副院长。研究方向为地理信息科学与技术、空间综合人文学与社会科学。</li>
<li>巢子豪，华南师范大学地理科学学院GIS专业博士研究生，研究方向为空间藏学。</li>
</ul>
<h2 id="摘要">摘要</h2>
<p>历史地理信息系统（历史GIS）属于地理信息系统（GIS）与历史学相结合的交叉研究领域，它有机地集成了GIS的技术方法、地理学家的空间视角和历史学家的时间视角，量化历史时期的地理过程并构建相应的时空模型，为面向未来的科学预测提供研究基础。历史GIS兴起于20世纪90年代中期，给GIS学科、历史地理学和历史学都带来了新的研究机遇与活力，并表现出强劲的发展势头，但也存在一些尚待解决的问题。近年来，历史GIS向社会提供了日益丰富的历史地理信息服务，并逐渐跨越系统的技术层面，向着科学层面纵深发展。本文通过对国内外相关文献的梳理与分析，回顾了历史GIS产生的背景，从数字化、数据模型、数据库建设与系统开发、空间分析和可视化5个方面综述了国内外历史GIS的研究现状。最后，从历史资料的空间化与数字化、历史地理时空大数据、历史地理空间框架构建及历史地理信息服务、历史地理时空过程及模型构建、历史地理信息科学和技术学科体系的形成等角度展望了历史GIS的发展趋势，以期为历史GIS未来的发展提供新的研究思路。</p>
<p>关键词: 历史GIS 研究现状 发展趋势 空间化 历史地理时空大数据 历史地理空间框架 历史地理信息服务 历史地理信息科学与技术</p>
<br>
<h2 id="1-引言">1. 引言</h2>
<p>地理学与历史学分属于对空间差异、时间分化进行研究的学科，而对历史的研究不可能完全脱离地理空间，通过侧重于对人类生活中有形环境的研究，地理学日益进入到历史学的研究领域，并产生了相应的交叉研究学科。历史地理学即是这样一门研究人类历史时期地理环境变化及其规律的学科。传统历史地理学的研究方法主要集中于历史文献资料的归纳和演绎，缺乏现代科学技术手段的应用，较难对统计计量科学意义上的规律进行探讨。随着信息化、智慧化技术的迅猛发展和地球信息科学的兴起，历史地理学在迎来发展机遇的同时，也面临着诸多挑战。如何推动传统历史地理学中研究方法与科学思维在新时代的发展与创新，便是亟待解决的问题之一。地理信息系统（GIS）应用现代数字化技术手段解决时间和空间问题，在信息化和智慧化浪潮中得到了快速发展，并广泛应用于诸多学科领域，包括历史学和地理学，历史GIS应运而生。历史GIS集合了GIS的技术特点、地理学家的空间视角和历史学家的时间视角，通过GIS的技术方法将空间和时间视角相结合，研究时空尺度上的变化模式。</p>
<p>历史GIS常被应用于历史地理数据的管理、处理、空间分析、可视化表达等方面，为历史学研究提供了更加广泛的地理空间视角，并发挥出越来越重要的研究价值。①为历史学特别是历史地理文献中的描述性信息提供了空间化和定量化处理方法。②用于不同来源、不同类型、不同结构历史地理数据资源的有效整合，如书面文档、古地图、历史地图、现场调查结果、考古文物等。通过建立历史GIS专题数据库，实现不同历史地理数据在同一个时空框架内的综合管理，有助于历史研究的条理性与系统性。③将空间分析的概念引入历史研究，让历史学家们重新审视历史学中空间信息的价值和社会关系中空间要素的重要性，从历史事件的地理空间位置和时间角度出发，了解其时空演化过程和机制。④为传统历史研究提供了空间可视化的表达方法，通过动态地图、三维GIS(3D GIS)等手段生动直观地展现历史数据的空间变化过程。此外，历史GIS还促进了跨学科研究的发展，为来自历史学、地理学、测绘学、计算机科学与技术等领域的学者们提供了合作的空间；GIS与历史学的结合还可以发现传统方法难以发现的历史问题，促进历史学领域潜在信息的挖掘，并帮助检测传统数据的合理性与正确性。</p>
<p>历史GIS的出现无疑为传统的历史地理研究注入了新的活力，也为GIS研究本身提供了广阔的拓展空间。然而，目前历史GIS研究中也存在一些尚待解决的问题。例如，特定历史地理数据的缺失或难以量化，导致GIS功能难以充分发挥；部分GIS的研究方法并不完全适用于历史问题的研究，需要根据具体问题进行修正；历史GIS中大量空间和属性数据的高精度、规范化处理，以及数据库建设的高难度和高成本也是必须面对的实际问题；研究人员的知识结构难以满足历史GIS的多学科知识背景需求，历史学者往往将GIS理解为绘制地图的软件，难以在研究中挖掘出深层的时空信息等。这些问题在一定程度上制约了历史学研究中GIS作用的发挥。另外，随着GIS逐步从信息系统的技术层面走向信息服务的科学层面，历史GIS于历史地理学而言也不再仅仅是技术的实现，有必要构建历史地理信息科学与技术的学科体系，并为社会提供日益丰富的历史地理信息服务。</p>
<p>有学者从不同学科视角讨论了我国历史GIS在不同时期的发展态势。如潘威等于2012年回顾了GIS引入我国历史地理学界的10年发展历程；2018年，潘威提出了“数字人文”背景和大数据理念下我国历史地理信息化的应对策略；张萍回顾了GIS对中国历史研究的贡献和存在的问题。这些成果为历史GIS研究提供了重要参考。为全面借鉴国内外历史GIS的研究经验，本文在回顾历史GIS产生背景的基础上，从数字化、数据模型、数据库与系统开发、空间分析和可视化5个方面梳理了国内外历史GIS的发展历程和研究进展，提出历史GIS未来值得重点关注的发展趋势，以期推动历史GIS 的健康发展。</p>
<br>
<h2 id="2-历史gis产生的背景">2. 历史GIS产生的背景</h2>
<h3 id="21-国际上历史gis-产生的背景">2.1 国际上历史GIS 产生的背景</h3>
<p>历史地理学界提出将研究对象的时间和空间属性相结合始于20世纪初期。英国历史地理学家Darby于1936年提出的“横剖面法”，以时间序列中多个地理空间剖面展示了空间随着时间发生的变化。20世纪50年代，历史地理学界兴起了“定量革命”，不再局限于定性描述的研究方法，而是强调对研究对象的定量分析。20世纪80年代，数据库技术开始与历史学研究相结合。同一时期，GIS技术得到飞速发展，并被引入历史研究领域，开始用以研究历史事件发展进程、区域经济开发、聚落成长变迁、人群地域特征、灾害或疫病的空间演进等。但该类研究更多关注的是地表状况的变迁，忽略了历史地理学关心的历史现象更迭背后所隐藏的原因等问题，并且历史文献在此类研究中并未被使用，因此，该类研究不能算作GIS应用于历史地理学领域的真正开端。</p>
<p>学者们普遍认为历史GIS兴起于20世纪90年代中期，认为该领域的开山之作是1994年Goerke的《Coordinate for Historical Maps》一书，该书整理了1994 年于欧洲大学研究所举办的研讨会展示的文章。当时历史学正处于对GIS的初步了解阶段，历史GIS发展较为缓慢。这一观点在Ogborn的文章中得到了体现，该文综述了1997年历史地理领域的研究进展，但并未提及历史GIS。之后，由于GIS在历史研究领域的潜力，历史GIS经历了一个相对快速发展时期。1998年和1999年社会科学历史协会组织的历史GIS专题会议中提到了学者们热情地参与到GIS等新方法的使用中，参与者们认为新工具的使用同样意味着创新。Holdsworth在其2002年的文章中提及历史GIS，认为其是历史地理学领域一种新兴的发展趋势。Baker将历史GIS描述为历史地理学领域一项“有趣而又富有挑战的发展”。</p>
<p>对历史GIS更多、更全面的研究主要体现在2000年以后，这一时期出现了许多以历史GIS 为研究重点的出版物。Knowles在2000—2008年出版了历史GIS相关专著2部和期刊论文2篇，包括于2002年的《Past Place: GIS for History》和2008年与Hillier一同出版的《Placing history: how maps，spatial data， and GIS are changing historical scho larship》。Gregory在2003年发表了有关历史数据服务的《Guide to Practice in GIS》，并于2007 年和Ell一同出版了《Historical GIS: technolo gies， methodologies and scholarship》一书，进一步普及了历史GIS的理念、技术及相关应用。von Lünen和Travis于2013年出版了著作《GIS and History:Epistemologies，Reflections，and Conside rations》该书汇集了对多个学术领域专家的采访，分享了他们多年的经验和历史学者们为何应该接受GIS的思考。期刊方面，《Social Science History》在2000年的第24卷第3期中首先推出了历史GIS的专刊。《History and Computing》和《Historical Geography》也分别在2003年第13卷第1期和2005年第33卷中推出了历史GIS专刊。诸多刊物与文章的问世标志着历史GIS进入了快速发展时期。历史地理学者Knowles承认历史GIS的巨大进步，但也指出历史GIS距最初的期望值还相距甚远。并且GIS为历史研究带来了哪些东西，其局限又有哪些，这些都没有形成普遍可接受的观点。</p>
<br>
<h3 id="22-国内历史gis-产生的背景">2.2 国内历史GIS 产生的背景</h3>
<p>拥有悠久的历史文明使我国在古代地理学领域长期处于东亚领先地位，但在历史地理学领域日本起步更早，且领先于我国。“历史地理”这一名词于20世纪初由日本传入我国。1935 年“，历史地理”被顾颉刚、谭其骧创办的《禹贡》杂志用作英文刊名，由此扎根于国内学术界。2000年，冯仁国指出了国内历史地理学发展所遇到的问题，即历史地理学领域的技术手段滞后，与地理学主流发展相距甚远，仍停留在利用传统地图学法和事件枚举法来进行研究分析的阶段。同年，针对这一问题，中国历史地理国际研讨会在云南大学召开，会上着重讨论了领域内新兴的GIS技术。葛剑雄于会议中指出，需凭借现代化的高科技手段来提高历史地理学研究的精度。编绘数字历史地图，创建中国历史GIS的工作开始提上日程。相较于其他国家，我国发展历史GIS具有得天独厚的优势，所拥有的不同历史时期的气候、人口、经济、耕地、赋税等连续历史文字记录为发展历史GIS奠定了坚实的数据基础。</p>
<p>有学者认为，我国历史GIS的开拓者为复旦大学历史地理研究中心的满志敏，其在历史自然地理领域尝试将GIS与历史文献相结合。满志敏于2000 年发表的文章《光绪三年北方大旱的气候背景》被视为是国内GIS与历史地理研究相结合的开山之作。该文基于历史文献资料构建专题空间模型，用于模拟历史时期的地理现象，有着较高的研究起点。2001年，复旦大学历史地理研究所与美国哈佛大学等机构合作，在谭其骧主编的《中国历史地图集》基础上，开发了“中国历史地理信息系统”（China Historical Geographic Information System，CHGIS），建立了一套中国历史时期连续变化、开放的基础地理信息数据库。这一项目的启动标志着我国历史地理学信息化时代的到来。2007年，葛全胜等在总结我国现代历史地理学不同的发展阶段时提到了信息技术的引入时期，表达了当时历史地理学界对提高研究成果定量化程度和精确性的迫切需求，并介绍了历史GIS在国内取得的突破性进展。自此，历史GIS的研究在国内逐步展开。然而，仍有学者并没有真正理解历史GIS研究及技术背后的思考与判断，而是将其认为是由计算机操作的绘图工具，可见学界对历史GIS的认知仍不深刻。</p>
<p>与国外期刊相继推出历史GIS专刊相比，国内期刊对历史GIS的重视程度相对较低。截至目前，未有期刊出版过历史GIS专刊，相关文章也相对较少。</p>
<p>近年来，历史GIS的发展日益受到国内学术界的普遍重视。中国地理学会历史地理专业委员会和复旦大学历史地理研究中心于2015年举办了第一届“历史地理信息系统HGIS沙龙”，之后每年举办一次。中国地理信息科学理论与方法学术年会也曾多次组织了历史GIS分会场。</p>
<br>
<p>##3. 历史GIS研究的现状</p>
<h3 id="31-历史地理信息的数字化">3.1 历史地理信息的数字化</h3>
<p>地图是历史地理学的重要组成部分，其载体形式经历了从传统的石质、帛质、纸质等到数字化的转变。GIS具有空间表现力强、信息存储量大的特点，能够实现把历史上传统的地理空间信息描述方法和内容，转移到以地理空间坐标为基础的现代地图上，以数字化的形式再现。历史地理信息的数字化即是对历史地理信息由纸质或其它载体转化为数字形式的技术过程，有助于推动历史地理信息的深度挖掘和利用。</p>
<p>在国外，Spence于2000年在其专著中论述了历史地理信息数字化的潜力。他将伦敦17世纪90年代的行政地理学数据与税收数据相结合进行数字化，使用专题地图来探索这一时期伦敦地理的不同领域，包括营业租金、家庭密度与租金、按性别的家庭分布等，发现了数据中隐藏的空间模式。Baily等致力于将英国20世纪30至40年代开展的首次土地利用测绘图进行数字化，并评价了该半自动化程序的数字化精度。Scholzel 等开发了新的算法和数字化软件，给历史地理信息的数字化技术带来了革新，实现了对投影信息模糊的历史地图进行数字化的功能。被引入历史地理信息的数字化领域后，GIS也被广泛用于数字化历史地图集的制作。GIS技术与传统制图法的结合，既保证了制图质量又节省了时间和人工成本。并且，通过建立以行政边界为典型代表的不同类型数据层，将其与不同主题的属性数据相结合来制作数字化历史地图集已成为历史地理信息数字化的一种新模式。多个国家或地区已对既有的国家历史地图集进行了部分数字化工作。其中，美国的“世界电子图书馆”（WorldDigital Library Map Section）不仅存储有世界各地的历史地图千余件，还以电子地图插件的形式标识出历史地图所在的地理位置，以表格的形式记录了历史地图的属性信息。“欧洲历史地图资料库”(History and Maps of Europe，Euralas)以21幅历史地图表示欧洲和地中海盆地公元1世纪至20世纪的政治景观。“非洲历史动态地图集”(Animated Atlas of African History) 以动态地图的形式展现了非洲大陆1879—2002年的领土变更、政治体系变化、暴力冲突和经济人口等历史信息。“加拿大历史地图集”(Historical Atlas of Canada)在制作第二卷时引入GIS 技术，以地图、文字、图表的形式展现了加拿大19世纪和20世纪不同的历史主题与事件。“南亚电子图书馆”网站将“印度王国地名地图集”中的历史地理信息进行数字化。另外，展示专题信息的历史地图集数字化工作也相继展开。如展示19世纪40年代爱尔兰饥荒对当地劣质住宅影响等信息的“爱尔兰饥荒数据地图集”(The Atlas of Irish Famine Data)、含有德国及其部分周边地区地名信息的“德意志帝国地图集”、描绘有法国与印第安战争战场详情的“法国－印第安人战争地图”(Maps of the French and Indian War)等。</p>
<p>我国历史地理信息的数字化工作起步于复旦大学历史地理研究中心和哈佛大学等机构联合开展的“中国历史地理信息系统”项目，其数字化的阶段性成果已共享于CHGIS数据库网站。北京大历史地理研究中心与北京市测绘设计研究院合作的“北京历史数字地图”是我国第一项城市区域历史地图的数字化成果，应用GIS技术对《北京历史地图集》进行了数字化。自此，历史地图数字化工作在我国多个城市展开《天津城市历史地图集》《广西历史地图集》《沈阳市历史地图》《杭州市历史地图》《上海市历史地图》等的数字化工作相继提上日程，并已顺利完成。近年来，国内诸多学者在大比例尺历史地图数字化领域也进行了探索。上海交通大学对日本科学书院1998 年出版的《中国大陆五万分之一地图集成》一书中共计4088 幅民国历史地图进行了扫描、地理校准等数字化工作，存储于“中国历史地图地理信息系统”。韩昭庆对利用西方测绘方法绘制的康熙《皇舆全览图》进行了数字化，形成一套以1710年代为时间界面的国家基础历史地理数据库和地名数据库。史磊则尝试利用GIS技术，对民国初年河南省1:10万地形图进行数字化保护。在技术领域，谭瑛等探讨了基于数字化技术的历史地图空间解译方法，从历史地图中提取隐含的空间要素和内涵信息，进行了分类提取、类型分层、数字化转译。</p>
<p>我国历史悠久，历史地图或古地图遗存众多，在数字化、信息化的时代潮流中，越来越多的历地理信息数字化工作被提上日程。历史GIS的数字化功能为历史学及相关学科的研究提供了便利。历史地理信息数字化需求的增加也促进了历史GIS数字化技术的革新与进步。</p>
<br>
<h3 id="32-历史地理信息的数据模型">3.2 历史地理信息的数据模型</h3>
<p>GIS的数据模型是根据程式化、概念化的策略将现实世界发生的现象抽象化，可通过地理层面的点线面或离散连续场进行构建。数据模型中应定义数据类型、存取方式、关系、操作和规则，以维持数据库和信息系统的完整。如何设计一个坚固、连续的数据模型是历史GIS数据库及平台建设的关键问题之一，数据模型设计的好坏直接关系到历史GIS数据库及平台建设的成败。目前，国内外历史GIS在构建数据模型时多以时空数据模型为基础。时空数据模型也是实现不同尺度、不同时序空间数据互动与融合的基础，通过依赖于时间的表达方式来组织管理时态地理数据、属性、空间和时间语义更完整的地理数据模型，可重现历史状态，追踪历史变化以及预测未来趋势。基础、通用的历史GIS数据模型是历史GIS的基石，就像矢量数据模型之于GIS一样重要，决定了历史GIS 时空分析和表达能力的强弱。</p>
<p>国外，Langran较早做出了将时间与GIS相结合的研究尝试，他总结了时空立方体、时空复合、基态修正和时空快照模型这4种时空数据模型，并在应用实例中强调了时间分量的重要性。随后，Peuquet和Duan归纳并比较分析了基于事件的时空数据模型为代表的9种主要时空数据模型。Griffiths等针对当时的对象数据模型普遍无法整合时间与空间属性的弊端，提出了名为Tripod的空间—历史数据模型，该模型基于组件的设计使其内部的空间、时间和历史信息三者得到有机整合。在与复旦大学合作的CHGIS项目中，Berman在原有三维空间数据的基础上增加了时间维度，形成四维空间。CHGIS的数据模型满足了在特定时间点搜寻所有地理单元，通过对象特征类型筛选结果，展示某一地点随时间变化等的要求。Euratlas历史地图集网站的数据模型是不同时间点政治景观及其互相关系的集合，按等级划分为不同的政治领域，高等级领域由低等级领域构成，从低到高四级行政实体分别为：省级、一级行政单元、国家、超国家行政实体。</p>
<p>国内学者在历史地理信息数据模型领域的研究颇丰。徐志红等提出了基于事件语义的时态地理信息系统模型，并应用该模型进行了历史数据的查询及历史数据的回溯和再现。顾国民等针对历史GIS平台中时空数据的存储和显示问题进行研究，在已有时空模型的研究基础上，选用并改进了面向对象的数据模型，提出了更加适合历史GIS平台的时空数据模型。Chen等根据代表性数据的属性设计了针对历史地理名称的时空数据模型，建设了研究中国历史与文化的时空框架。于靖提出了基于地名生命周期的城市历史地名时空数据模型，解决了以可视化方式展示并查询时间截面地名等相关问题。史先瑞分析了基础历史地理信息的时空变化特征，改进基态修正数据模型，提出了一种基于对象的基础历史地理信息的数据组织方法。胡迪等认为现有的历史地理信息数据模型主要面向某一专题的历史地理数据库或信息系统，通用性差。他从地理与历史双重视角出发，以时间、地点、人物、事件历史4个要素为基础将历史信息抽象为历史人物、历史事件、历史地物和历史场景，以及关系和经历等要素，提出了一种通用的历史地理信息数据模型。历史地理信息数据模型的研究正随着各式历史地理信息数据库及系统需求的增加而日益深入。</p>
<br>
<h3 id="33-历史地理信息的数据库建设与系统开发">3.3 历史地理信息的数据库建设与系统开发</h3>
<p>历史地理空间数据的采集耗时较长，过程繁琐冗长，且往往是整个历史GIS建设过程中耗资最大的一个环节。历史地理信息数据库的建立不仅要考虑到建设成本，还要顾及到日后的管理与维护。历史地理信息数据库一旦建成，其实际需求常常超越其最初的构想，因此，设计者需考虑到诸如数据记录、元数据和数据的长期保存等问题，以便历史地理信息数据库价值得到充分展现。</p>
<p>世界上多个国家和地区已构建或正在建设本国的国家历史地理信息系统。美国地理家协会(The Association of American Geographers，AAG) 网站提供了世界各国主要的历史GIS目录。其中，由朴次茅斯大学主持的“大英历史地理信息系统”(Great Britain Historical Geographic Information System) 始建于1994年，主要提供了英国历史时期不同尺度的行政区划及区划内的人口统计信息。明尼苏达大学的明尼苏达人口研究中心的“国家历史地理信息系统”(National Historical Geographic Information System)在美国国家科学基金会资助下开发，其创建的最初意图为构建一个基础架构以支持国家范围内不同信息的专题制图。该系统汇集了1790年至今美国全国范围内的人口、住房、农业、经济统计数据和相应的历史边界矢量数据。“比利时历史地理信息系统”(Belgian Historical Geographic Information System，BHGIS)由根特大学于20世纪90年代开始建设，储存了1800—1963 年比利时国内的人口、工业、农业及贸易数据。悉尼大学开展的“时间地图计划”(TimeMap)开始于1996年，可通过网络索引的方式获取分布式资源、交互式地图、时间序列数据以及地图动画，是国际上首个基于时间序列的交互式与分布式相结合的制图系统。国际上著名的国家历史地理信息系统还包括了加拿大渥太华大学开展的“加拿大世纪研究项目”(Canadian Century Research Infrastructure)，韩国高丽大学开发的“南韩历史信息系统”(South Korea Historical GIS)，欧洲史研究所与德国梅茵兹应用技术大学联合开发的“德意志历史地理信息系统”(Historical Geographic Information System Germany)，荷兰拉德堡德大学开发的“荷兰地理信息系统”(Netherlands Geographic  Information System) 等。</p>
<p>相较于国家层面的历史地理信息平台，根据不同专题建设的历史地理信息平台数据来源更广，针对性更强。目前，世界范围内的专题历史地理信息平台较多，如哈佛大学地理分析中心开发的展现非洲历史地图与重要事件的“非洲地图(AfricaMap)”，越南佛教大学开发的可展示越南佛教场所等佛教文化的“越南佛教文化地图集网站”(Cultural Atlas of Vietnam-ese Buddhism)，悉尼大学研发的可视化“柬埔寨吴哥窟文化遗产历史地理信息平台”(Living with Heritage)，爱尔兰梅努斯大学开发的“爱尔兰人口变化地图集平台”(Irish Population Change Atlas)和“爱尔兰饥荒地图集平台”(The Atlas of Irish Famine Data) ，Migliaccio 等组织开发的意大利历史地震数据管理原型系统等。</p>
<p>我国的历史地理信息平台建设起步较晚，但发展迅速。国家层面的历史地理信息平台以“中国历史地理信息系统”和“中华文明之时空基础框架”最为著名。由复旦大学历史地理研究中心与美国哈佛大学等合作的“中国历史地理信息系统”(CHGIS)项目起始于2001年，致力于建设成为一个连续变化的中国历史时期基础地理信息数据库平台，为研究人员提供根据特定时间和地点的GIS数据查询、统计、下载、空间分析、专题制图与建模服务。CHGIS的历史空间数据来源于复旦大学历史地理研究中心的原始资料，目前已有空间数据的时间跨度为公元前221年至公元1911年。“中华文明之时空基础框架”(Chinese Civilization in Time and Space，CCTS)由中国台湾地区的中央研究院于2002 年研发完成。该系统存储了我国大量历史地图及主题化的属性信息。其中，历史地图以谭其骧先生主编的《中华历史地图集》为基础，提供有上古至清代逾两千年的中国历代疆域图等基本历史地图，并辅之持续整理的各类其它历史地图、遥感影像等。</p>
<p>除了国家历史地理信息平台，国内不同专题的历史地理信息平台也层出不穷。台湾中央研究院的“台湾历史文化地图系统”以历史文献、地名资料与古今地图为基础资料，搭建起了数字化的台湾时空基础架构平台。香港中文大学地球信息科学研究所研发的“民国时期北京都市文化历史地理信息数据库”，考察了由民国成立至抗战时期的北京市在多元文化激荡之下所呈现的文化变迁空间模式。首都师范大学历史地理研究中心与陕西师范大学出版社联合开发的“丝绸之路历史地理信息开放平台”，建立了一套自汉代张骞打通西域以来至1949年以前丝绸之路沿线逐年连续变化的基础历史地理数据库。华中科技大学建立了展现汉语方言分布与演化的“中国历史方言地理信息系统”。中国地图出版社与中国科学院遥感与数字地球研究所在中国31个主要城市古地图数字化成果的基础上，建成了可共享的“中国城市历史地理信息平台”。天津大学建筑学院建立了多角度还原明长城军事聚落历史地理原貌的“明长城军事聚落历史地理信息库”。同时，陕西理工大学的“蜀道历史地理信息系统”、华南师范大学与西藏大学联合开发的“藏语方言时空数据共享服务平台”等多个历史地理信息系统平台也处于研发之中。此外，国内诸多城市也有展现地方历史文化的地理信息系统。如，北京市测绘设计研究院开发的“北京历史文化地理信息系统”、上海师范大学主持的“国际化大都市（上海）历史人文地理信息系统”、南京大学开发的“六朝建康地名信息系统”、西安市城市规划设计研究院设计的“大西安区域历史地理信息共享服务平台”等。</p>
<p>目前，历史地理信息平台的建设正日益向着专题化、区域化的方向发展。同时，方兴未艾的历史地理信息平台建设也促进了数据库技术和基于历史地理信息平台的专题研究进步</p>
<br>
<h3 id="34-历史地理信息的空间分析">3.4 历史地理信息的空间分析</h3>
<p><strong>Gatrell将空间分析定义为内部相关的3大主题的研究：空间布局、时空过程和空间预测</strong>。空间位置信息及其随时间的变化是历史地理研究的核心，而空间分析可以定量的方式研究历史地理领域的时空现象和过程。空间分析的方法虽然不仅限于GIS，但GIS中属性数据与地理坐标相关联的数据模型使其非常适合于定量研究。历史研究有其特殊性，并不是所有的GIS空间分析方法都能直接应用于该领域，需要对其做相应调整。</p>
<p><strong>GIS在历史地理学领域的空间分析方法可以分为3大类，即：点模式分析、附有属性数据的点线面数据分析和栅格数据分析</strong>。其中，最基本的点模式分析从研究对象空间特征的角度出发，探寻点群的空间布局，不涉及其属性信息。如Longley等基于点模式使用平均中心与标准距离法研究了1850—1960年加拿大安大略省伦敦市住宅用地、公共用地、商业用地和工业用地4种土地利用类型的变化模式。其它适用于历史GIS点模式研究方法还包括了密度平滑法、距离衰退模型、地理分析机等。探索点线面数据中属性数据的空间模式，有单变量和多变量2类分析方法。局部空间自相关法是单变量分析的典型方法之一。地理加权回归是一种通过空间权重矩阵进行回归分析的多变量分析方法。Gregory 和Ell同时使用了局部空间自相关和地理加权回归分析了19世纪40年代末期爱尔兰大饥荒后的爱尔兰各地的人口减少情况。相较于矢量数据，栅格数据更适合表示连续的表面，处理没有清晰边界的不确定数据。Bartley 和Campbel收集了英格兰14 世纪上半叶的6000 多名土地私有人去世后的财产清单，根据位置信息生成点数据，并插值生成连续的栅格表面，制作了英格兰黑死病前的土地利用专题地图，进行了私有草地分布密度等分析。</p>
<p>近年来，国外学者使用GIS的空间分析功能在宗教、语言、军事、城市、疾病、遗迹、自然景观等历史地理相关研究中做了诸多尝试。Ayhan 等基于GIS 和空间统计学的方法研究了不同年份土耳其伊兹密尔清真寺的空间分布与城市发展的关系，结果表明该市清真寺的时空分布模式与城市发展模式相似。Blaxter基于核密度估计等方法追溯了挪威语言文化的时空扩散过程。Skaloš等基于数字化后的历史军事测量图和正射影像图，改良了已有的方法，研究捷克部分地区土地覆盖的长期变化情况，其方法更适用于时间尺度超过250年的长期景观变化研究。Keti从18世纪现代罗马城历史地图集中获取信息，根据不同的主题信息对不同的城市现象进行分析与解译。Bezymennyi等收集了1913—2012年乌克兰家畜炭疽病爆发位置数据，分析其时空分布模式和爆发的热点区域，并进一步研究一个世纪以来该疾病爆发地的变化趋势。Blanco等从1870—1960年的古地图中提取出5800多个马德里的水利遗产点数据，将其位置信息、时间信息和属性信息存入数据库，使用GIS 分析其多年的分布特征，得出了水利遗产日益受到城市化影响而破坏的结论。Madricardo和Donnici根据城市历史档案中的环境记录重建了意大利威尼斯舄湖从初建到现在的景观变化，并与描绘有舄湖详细信息的历史地图进行对比，揭示出舄湖景观变化对城市的影响。</p>
<p>从现有研究成果来看，历史GIS最早在国内萌芽时，空间分析功能即被应用于历史水文、历史气候、历史土地覆被、历史海岸线等多个自然地理研究领域。如潘威、满志敏等基于GIS技术构建格网体系，对近百年来上海市三角洲河网的复杂形态进行了研究。葛全胜等专注于历史气候变化及其带来的影响，先后研究了历史气候变化对农作物影响的时空分异，以及对红火蚁潜在分布区的影响。何凡能、方修琦等多次提到用GIS中空间格局网络化的方法重建历史耕地、森林等土地覆被，并分析其空间特征。张晓祥、康育龙等利用数字海岸线分析系统分别分析了历史时期江苏和杭州湾海岸线的演化方式及变化速率。GIS空间分析在历史人文地理领域也有着更加广泛的应用。其中，城市和村落空间形态与格局特征的历史演变是近年来最常被关注的领域。诸多学者基于历史文献、古地图等资料中提供的文字、图像信息，以国家级或地方历史文化名城名镇名村、历史时期城池、历史时期城市工农业用地，民国时期北京城内学校等为研究对象，利用GIS的缓冲区分析、叠加分析、统计分类分析、格网方法等GIS空间分析方法定量化研究其时空布局与形态变化过程，并结合史实分析其内在机理。历史文化与GIS的结合同样是研究的热门领域，包含有民族分布、宗教演变、方言发展、文化名人足迹等研究。杨宇亮等以GIS的技术方法对藏彝走廊与汉族走廊的民族格局开展研究，不仅描述了二者与地理空间的关联性，还反映出了民族的迁徙过程。韩冰利用地理编码技术和谷歌卫星影像获取浙江省1269座佛寺的矢量多边形、中心点数据、面积规模以及布局特征，并基于GIS对其进行了全局自相关分析、系统聚类分析等研究。张义将汉语置于一个广阔的时空背景中，直观地考察方言特征历时的演变与分布、相互影响的程度以及各方言间的亲疏度问题，并在此基础上综合考察中国历史时空坐标中的汉语方言演变轨迹。曾莹利用GIS空间化和数字化方法收集整理资料，设计空间数据库，并基于GIS分析方法探索了江西古代书院及文化名人的时空特征。与此同时，得益于GIS强大的空间分析能力和数据建模能力，诸多学者已经将GIS成功地运用于考古学领域。张海在其专著《GIS与考古学空间分析》一书中指出，考古学景观强调地表空间构成的连续性、区域性和综合性，这3大特征使得GIS技术十分适宜于考古学的景观分析。目前，作为考古学研究的一项新兴支撑技术，GIS中的数字地形分析、空间叠置分析、缓冲区分析和空间形态分析等空间分析方法常被用于研究考古遗址的空间分布规律，并用以探究遗址分布的倾向性及其与地理环境的关系。另外，国内学者还尝试将GIS应用于历史文化景观重现、文物保护、历史人口分布研究、古建筑价值评价与保护等历史人文地理领域，如首都师范大学的“丝绸之路历史地理信息系统建设”等。</p>
<p><strong>GIS中的诸多空间分析方法在历史地理领域已得到了较为广泛的应用，挖掘了传统历史地理研究中未曾发现的潜在信息。然而，历史GIS的空间分析不应该仅仅是GIS方法在历史地理领域的常规应用，随着历史GIS在历史学界的日益普及，越来越多的学者改进了GIS方法以适应不同历史研究的需求，不断丰富着历史GIS空间分析方法的理论</strong>。</p>
<br>
<h3 id="35-历史地理信息的可视化">3.5 历史地理信息的可视化</h3>
<p><strong>历史地理信息的可视化将空间、历史与属性等要素结合，在空间可视化的基础上表达时空变化与发展过程，直观反映时空对象在不同历史时间的各个状态与动态演化</strong>。GIS与历史地理空间数据结合可以反映变化的实体与现象，能够描述时空对象的产生、发展、演化与消亡的全过程。历史地理信息的可视化展现不仅仅只有纸质形式的地图，随着计算机技术的发展，越来越多的新技术与GIS相结合，传统的历史地理信息表现形式得到了颠覆性的革新。目前，GIS可视化方法中的3D GIS、动画、多媒体影像等多种技术已在历史地理研究中得到了应用。</p>
<p>3D情景的构造是目前历史地理信息可视化领域的一大热点。国外在3D GIS方面的发展已较为成熟，并与全球导航卫星系统GNSS、遥感、激光雷达等其他相关技术结合，运用于城市历史风貌、历史地形、历史古迹的还原等方面。日本的Sadahiro等使用DragonFly快速三维制图引擎，在其中叠加东京市的数字高程模型(DEM)、高分辨卫星影像和东京市的历史影像数据，实现了从不同角度和位置浏览东京城市历史风貌的功能。Harris基于数字地形模型(DTM)探索西弗吉尼亚芒兹维尔附近的格雷夫克里克土墩的史前地形。在历史考古学领域，越来越多的学者倾向于借助激光雷达和3D GIS技术进行研究，还原历史遗迹的原始面貌。尽管动画的方式生动且高效，但在历史研究领域中有效利用动画技术的实例较少。历史研究中较长的时间尺度决定了要想实现历史地理信息的动态呈现必须减少可视化对象本身的多样性和复杂性。动画、多媒体技术与GIS的结合在历史自然地理和历史人文地理两方面均有涉及。Cunfer与Rastner等分别运用GIS的动画功能探索美国大平原干旱尘暴区和Findelengletscher冰川随时间的变化。Siekierska 和Armenakis则借助多媒体方法展现加拿大历史上领土的演变。虚拟现实地理信息系统(VR-GIS)等其他可视化技术的综合应用同样对历史地理研究做出了重要贡献，其真实感和互动方式使历史地理信息的显示和观察更加生动和方便，但仍处于发展的早期阶段。Howey 和Brouwer认为考古GIS研究必将受到“数字人文”领域数据、方法与技术的影响，并提及了应用无人机影像进行“数字化故事叙述”、数字化重建和VR等技术在该领域的前景。Pérez-Martín等整合了手绘稿、照片、数字正射影像、计算机图形等多媒体图件影像，在数字摄影测量工作站、全球导航卫星系统、计算机辅助设计、和电脑动画等前沿技术的支持下，以一种新的形式展现了西班牙历史时期的风车情况。</p>
<p>在国内，基于历史文献的可视化研究也是学们较多涉及的研究领域。李海萍等以清代历史地图为例，参照国内现有的地图符号标准，研究并设计了基于GIS的清代历史地图符号库。朱锁玲和王明峰应用GIS技术实现了对《方志物产》中物产分布、物产传播等相关数据的管理和可视化制图。王哲梳理了史料中历史空间数据的可视化方法，探讨了未来经济史研究领域利用可视化手段的可能性。多名学者也在历史事件可视化角度展开过研究。王占刚等利用事件时态树结构实现历史事件时空过程可视化，并以Adobe Flex为工具开发实现了历史事件时空过程可视化算法。陈敏颉等探讨了战争历史事件可视化策略，开展了基于历史事件运动轨迹的可视化表达方法的分类研究。王加胜等利用统计图表、社会网络和GIS技术对南沙群岛历史事件演化的时空特征进行了可视化表达。GIS 与VR、多媒体等技术结合对历史古迹的三维重建也是国内历史地理信息可视化研究的热点之一。GIS三维重建的重点主要集中在古代城市、历史名迹、考古遗址等的空间格局与构造的复原上。另外，历史地理信息可视化的研究多与信息系统共生，并成为系统研究和展示的重要部分。如实现家族成员迁徙路线可视化的“族谱地理信息系统”和采用地图动画、序列地图、时间轴地图、三维场景模拟等表达人物、事件、时间、地点等多要素时空信息的“三国历史地理信息系统”。目前，关于历史变化的可视化表达技术仍需进一步深入研究。</p>
<br>
<h2 id="4-历史gis的发展趋势">4. 历史GIS的发展趋势</h2>
<p>GIS被引入历史学和历史地理学以来，解决了一些传统历史和历史地理研究中无法解决的技术和空间分析问题，得出的研究成果不仅可以为部分历史问题作出基于空间视角的解释，也在一定程度上推动着信息化时代历史学和历史地理学研究范式的创新。GIS与历史相关研究的结合日趋紧密，随着数字人文和信息化、智慧化时代的推进，其未来的发展又会呈现出新的趋势。</p>
<p>（1）构建历史资料的空间化和数字化体系，推动历史地理时空大数据的建设。</p>
<p>随着历史GIS的发展，诸多不同历史时期和不同形式的历史文献会越来越多地进入历史GIS学者的视野。历史文献资料与GIS结合程度的加深，必将推动GIS研究中地理空间的时间范围扩展并不断向前延伸。历史GIS研究需要对大量不同领域、不同尺度、不同类型的历史资料进行空间化和数字化，诸如古地图、历史地图、遥感影像、地名志、考古遗址、图版照片、历代史书资料、郡县府志、家谱、游记、诗赋等，构建历史地理时空大数据。但历史地理信息和现代地理信息有着不同的特征，比如在时态、比例尺、精度等方面，历史资料具有不同于现代地理信息的表现手法。历史资料的特殊性和差异性决定了历史资料空间化和数字化工作的困难，诸如投影、误差、接边等突出和常见问题，始终困扰着历史GIS研究者。需要梳理历史学研究对历史资料空间化和数字化的需求特点，总结历史资料的空间化和数字化技术要求，形成一套历史资料空间化和数字化的技术体系，以推动历史地理时空大数据的建设。</p>
<p>（2）建设历史地理空间框架，推动历史地理信息服务的普及。</p>
<p>历史GIS发展过程中产生了大量的历史地理信息数字化产品，不同学者和研究机构也建设了不同专题的历史GIS数据库及系统平台。然而，随着历史GIS的进一步发展，不同来源、不同尺度、不同类型的历史地理信息数字化产品往往缺乏统一基准、无法实现共享等问题逐渐突显出来。建设历史地理空间框架，是解决这一问题的重要途径。历史地理空间框架可为所有与地理位置相关的历史地理信息数据及产品提供一个统一的时空定位基准，为定位、嵌入或配准各类图形、图像、文本、视频、音频信息提供一个时空多维载体，可实现多元数据的无缝连接和整合，保证历史地理空间数据的一致性、兼容性和可转换性，使用户能够按照地理坐标或空间位置集成、检索、展示所关心的历史时期的自然、社会、经济、环境等信息。历史地理空间框架建设的宗旨是向社会公众尤其是科研人员提供易获得且通用的历史地理信息服务。历史地理信息服务的普及不仅便于科研人员研究工作的开展，也有利于社会公众了解历史地理和历史文化信息，有利于增强文化自信，从而进一步实现历史GIS 的社会价值。</p>
<p>（3）加强历史地理过程及模型研究，推动历史地理信息科学与技术学科体系的形成。</p>
<p>目前，国内外历史GIS的研究主要集中于历史地理信息的时空格局，揭示历史地理时空过程及模型构建的研究相对较少。历史地理学是研究历史时期地理环境发展、变化及其规律的科学，主要任务是探明历史时期的地理过程并构建相应的地理过程模型，从而为面向未来的科学预测提供研究基础。历史地理过程模型是抽象地表示不同历史时期地理环境状态或其组成要素特征的实物模型或数学统计模型，是理解和预测不同尺度历史地理系统格局和过程的重要研究方法。但目前的历史GIS研究成果和历史地理学的专业需求之间还存在着较大的差距。因此，充分利用历史地理时空大数据，通过数据挖掘和多源数据融合，进行历史地理过程的模型构建、模拟及重现，是未来历史GIS研究的重要发展方向之一。历史地理过程及其模型构建的研究，将推动历史GIS由信息系统向信息科学的转换，推动历史地理信息科学和技术学科体系的形成。</p>
<br>
<h2 id="5-结语">5. 结语</h2>
<p>和GIS学科本身相比，历史GIS的起步较晚，发展也较为缓慢，但已在历史地理信息的数字化、数据模型、数据库建设和系统开发、空间分析及可视化等方面取得了显著的研究进展。GIS作为一种研究手段和思维方式，越来越多地参与到历史学和历史地理研究中，在继承传统定性描述方法的基础上，以多样化的研究方法将历史学和历史地理学带入了定量化、信息化和智慧化时代。</p>
<p>得益于我国悠久历史长河中留存的大量历史文献古籍，国家层面的重视，以及历史学和历史地理学等学科领域发展的迫切需要，近年来我国的历史GIS研究取得了一定的成就，但也存在着较为明显的差距。怎样解决好历史地理数据不确定性问题？怎样充分发挥我国现存典籍多的优势？怎样促进历史地理学与GIS等新兴学科的融合发展？怎样通过构建历史地理空间框架做好历史地理信息服务的普及？如何通过历史地理过程模型的构建推动历史地理信息科学与技术学科体系的形成？这些问题的解决将成为促进我国历史GIS事业进一步发展的推动力。</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>国庆直播 | Python实证指标与文本分析</title>
      <link>https://hidadeng.github.io/blog/2022-09-19-text-mining-in-ms-workshop/</link>
      <pubDate>Sun, 18 Sep 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-09-19-text-mining-in-ms-workshop/</guid>
      <description>文本分析在经管研究中的应用</description>
      <content:encoded><![CDATA[<h2 id="报名信息">报名信息</h2>
<ul>
<li>
<p>时间：<strong>2022.10.03 ~ 2022.10.04</strong></p>
</li>
<li>
<p>地点: 小鹅通平台（线上直播）</p>
</li>
<li>
<p>报名咨询:  17816181460（同微信）（汪老师）</p>
</li>
<li>
<p>报名费：<strong>2500元</strong></p>
<ul>
<li>单位：杭州国商智库信息技术服务有限公司</li>
<li>开户银行： 中国银行杭州大学城支行</li>
<li>银行账户：6232636200100260588</li>
</ul>
</li>
</ul>
<br>
<h2 id="简介">简介</h2>
<p>在科学研究中，数据的获取及分析是最重要的也是最棘手的两个环节！</p>
<p>在<strong>前大数据时代</strong>，一般使用实验法、调查问卷、访谈或者二手数据等方式，将数据整理为结构化的表格数据，之后再使用各种计量分析方法，对这些表格数据进行分析。<strong>大数据时代</strong>，大量商业信息、社会信息以文本等非结构化、异构型数据格式存储于海量的网页中。那么对于经管为代表的人文社科类专业科研工作者而言，通过Python可以帮助学者解决使用Web数据进行科研面临的两个问题：</p>
<ol>
<li><strong>网络爬虫</strong> 解决 如何从网络世界中高效地 <strong>采集数据</strong>？</li>
<li><strong>文本分析</strong> 解决 如何从杂乱的文本数据中 <strong>构建指标</strong>？</li>
</ol>
<p>为方便大家感受到文本数据的魅力，按照是否采用某项技术(爬虫、词频、词袋、w2v建词典、w2v认知变迁)，从五个维度标记代表性的7篇论文。</p>
<table>
<thead>
<tr>
<th>文献</th>
<th>爬虫</th>
<th>定性</th>
<th>词频</th>
<th>词袋</th>
<th>W2V建词典</th>
<th>W2V认知变迁</th>
</tr>
</thead>
<tbody>
<tr>
<td>王伟 , 陈伟, 祝效国 and 王洪伟, 2016. 众筹融资成功率与语言风格的说服性&ndash;基于 Kickstarter 的实证研究. <em>管理世界</em>, (5), pp.81-98.</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>语言具体性如何影响顾客满意度</strong><br>Packard, Grant, and Jonah Berger. “How concrete language shapes customer satisfaction.” <em>Journal of Consumer Research</em> 47, no. 5 (2021): 787-806.</td>
<td></td>
<td></td>
<td>Y</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Wang, Quan, Beibei Li, and Param Vir Singh. &ldquo;<strong>Copycats vs. original mobile apps</strong>: A machine learning copycat-detection method and empirical analysis.&rdquo; Information Systems Research 29, no. 2 (2018): 273-291.</td>
<td>Y</td>
<td></td>
<td></td>
<td>Y</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>文本相似度</strong><br>Cohen, L., Malloy, C. and Nguyen, Q., 2020. Lazy prices. <em>The Journal of Finance</em>, <em>75</em>(3), pp.1371-1415.</td>
<td></td>
<td></td>
<td></td>
<td>Y</td>
<td></td>
<td></td>
</tr>
<tr>
<td>胡楠, 薛付婧 and 王昊楠, 2021. <strong>管理者短视主义影响企业长期投资吗</strong>———基于文本分析和机器学习. <em>管理世界</em>, <em>37</em>(5), pp.139-156.</td>
<td></td>
<td></td>
<td>Y</td>
<td></td>
<td>Y</td>
<td></td>
</tr>
<tr>
<td>Kai Li, Feng Mai, Rui Shen, Xinyan Yan, <strong>Measuring Corporate Culture Using Machine Learning</strong>, The Review of Financial Studies, 2020</td>
<td></td>
<td></td>
<td></td>
<td>Y</td>
<td>Y</td>
<td></td>
</tr>
<tr>
<td><strong>女性就职高管改变组织内性别偏见</strong><br>Lawson, M. Asher, Ashley E. Martin, Imrul Huda, and Sandra C. Matz. &ldquo;Hiring women into senior leadership positions is associated with a reduction in gender stereotypes in organizational language.&rdquo; <em>Proceedings of the National Academy of Sciences</em> 119, no. 9 (2022): e2026443119.</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>Y</td>
</tr>
</tbody>
</table>
<br>
<h2 id="主讲老师">主讲老师</h2>
<p>大邓，哈尔滨工业大学(HIT)管理学院信息管理系统方向在读博士。在多所大学分享数据采集和文本分析。运营公众号：大邓和他的Python，主要分享Python、爬虫、文本分析、机器学习等内容。</p>
<br>
<h2 id="一入门语法">一、入门语法</h2>
<ul>
<li>Python跟英语一样是一门语言</li>
<li>数据类型之字符串</li>
<li>数据类型之列表元组集合</li>
<li>数据类型之字典</li>
<li>数据类型之布尔值、None</li>
<li>逻辑语句(if&amp;for&amp;tryexcept)</li>
<li>列表推导式</li>
<li>理解函数</li>
<li>常用的内置函数</li>
<li>os路径库</li>
<li>内置库csv文件库</li>
<li>常见错误汇总</li>
</ul>
<h2 id="二数据采集">二、数据采集</h2>
<ul>
<li>网络爬虫原理</li>
<li>寻找网址规律</li>
<li>获取网页-requests库</li>
<li>pyquery库解析html网页</li>
<li><strong>案例:</strong> 豆瓣小说</li>
<li>json库解析json网页</li>
<li><strong>案例:</strong> 豆瓣电影</li>
<li><strong>案例:</strong> 微博</li>
<li><strong>案例:</strong> 文件下载</li>
<li><strong>案例:</strong> 上市公司定期报告pdf批量下载</li>
<li>区分动态网站与静态网站</li>
</ul>
<h2 id="三文本初识">三、文本初识</h2>
<ul>
<li>从信息传播视角重新认识文本</li>
<li>读取各类文件中的数据</li>
<li><strong>案例:</strong>  识别图片中的文本</li>
<li>数据清洗re库</li>
<li><strong>案例:</strong> 将多个数据文件汇总至一个csv文件</li>
<li><strong>案例:</strong> 中文jieba分词、词频统计、制作词云图</li>
<li><strong>案例:</strong> 使用共现(word2vec)法扩展情感词典</li>
<li><strong>案例:</strong> 使用词典做情感分析(无权重)</li>
<li><strong>案例:</strong> 数据分析pandas库快速入门</li>
<li><strong>案例:</strong> 使用pandas对excel中的文本进行情感分析</li>
</ul>
<h2 id="四文本进阶">四、文本进阶</h2>
<ul>
<li>文本分析与机器学习</li>
<li>特征工程-认识词袋法、one-hot、Tf-Idf、word2vec</li>
<li>将文档转为机器可处理的向量</li>
<li><strong>案例:</strong> 使用情感词典和tf-idf做情感分析（有权重）</li>
<li><strong>案例:</strong> 在线评论文本分类</li>
<li><strong>案例:</strong> 使用文本相似性识别变化(政策连续性)</li>
<li><strong>案例:</strong> Kmeans聚类算法、LDA话题模型</li>
<li>文本中的人类记忆(认知)</li>
<li>如何测量人类认知偏见(刻板印象)</li>
<li><strong>案例:</strong> 词向量模型的使用方法-豆瓣影评</li>
<li>文本分析在经管社科领域中的应用概述</li>
</ul>
<br>
<h2 id="参考文献">参考文献</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[1]沈艳, 陈赟 and 黄卓, 2019. 文本大数据分析在经济学和金融学中的应用: 一个文献综述. *经济学 (季刊)*, *18*(4), pp.1153-1186.
[2]冉雅璇,李志强,刘佳妮,张逸石.大数据时代下社会科学研究方法的拓展——基于词嵌入技术的文本分析的应用[J/OL].南开管理评论:1-27[2022-04-08].http://kns.cnki.net/kcms/detail/12.1288.F.20210905.1337.002.html
[3]王伟,陈伟,祝效国,王洪伟. 众筹融资成功率与语言风格的说服性-基于Kickstarter的实证研究.*管理世界*.2016;5:81-98.
[4]胡楠,薛付婧,王昊楠.管理者短视主义影响企业长期投资吗？——基于文本分析和机器学习[J].管理世界,2021,37(05):139-156+11+19-21.
[5]Kai Li, Feng Mai, Rui Shen, Xinyan Yan, Measuring Corporate Culture Using Machine Learning, *The Review of Financial Studies*,2020
[6]Loughran T, McDonald B. Textual analysis in accounting and finance: A survey[J]. *Journal of Accounting Research*, 2016, 54(4): 1187-1230. Author links open overlay panelComputational socioeconomics
[7]Berger, Jonah, Ashlee Humphreys, Stephan Ludwig, Wendy W. Moe, Oded Netzer, and David A. Schweidel. &#34;Uniting the tribes: Using text for marketing insight.&#34; *Journal of Marketing* 84, no. 1 (2020): 1-25.
[8]Banks, George C., Haley M. Woznyj, Ryan S. Wesslen, and Roxanne L. Ross. &#34;A review of best practice recommendations for text analysis in R (and a user-friendly app).&#34; *Journal of Business and Psychology* 33, no. 4 (2018): 445-459.
[9]Cohen, Lauren, Christopher Malloy, and Quoc Nguyen. &#34;Lazy prices.&#34; *The Journal of Finance* 75, no. 3 (2020): 1371-1415.
[10]孟庆斌, 杨俊华, 鲁冰. 管理层讨论与分析披露的信息含量与股价崩盘风险——基于文本向量化方法的研究[J]. *中国工业经济*, 2017 (12): 132-150.
[11]Wang, Quan, Beibei Li, and Param Vir Singh. &#34;Copycats vs. Original Mobile Apps: A Machine Learning Copycat-Detection Method and Empirical Analysis.&#34; *Information Systems Research* 29.2 (2018): 273-291.
[12]Hoberg, Gerard, and Gordon Phillips. 2016, Text-based network industries and endogenous product differentiation,?*Journal of Political Economy* 124, 1423-1465
[13]Loughran, Tim, and Bill McDonald. &#34;When is a liability not a liability? Textual analysis, dictionaries, and 10‐Ks.&#34; *The Journal of Finance* 66, no. 1 (2011): 35-65.
[14]Fairclough, Norman. 2003. Analysing discourse: Textual analysis for social research (Psychology Press)
[15]Grimmer, Justin, and Brandon M Stewart. 2013, Text as data: The promise and pitfalls of automatic content analysis methods for political texts, *Political analysis*21, 267-297.
[16]Markowitz, D. M., &amp; Shulman, H. C. (2021). The predictive utility of word familiarity for online engagements and funding. Proceedings of the National Academy of Sciences, 118(18).
[17]Packard, Grant, and Jonah Berger. “How concrete language shapes customer satisfaction.” Journal of Consumer Research 47, no. 5 (2021): 787-806.
[18]Chen, H., Yang, C., Zhang, X., Liu, Z., Sun, M. and Jin, J., 2021. From Symbols to Embeddings: A Tale of Two Representations in Computational Social Science. Journal of Social Computing, 2(2), pp.103-156.
[19]Lawson, M. Asher, Ashley E. Martin, Imrul Huda, and Sandra C. Matz. &#34;Hiring women into senior leadership positions is associated with a reduction in gender stereotypes in organizational language.&#34; *Proceedings of the National Academy of Sciences* 119, no. 9 (2022): e2026443119.
</code></pre></div>]]></content:encoded>
    </item>
    
    <item>
      <title>视频分享 | 文本分析在经管研究中的应用</title>
      <link>https://hidadeng.github.io/blog/2022-09-08-dufe-text-mining-in-ms/</link>
      <pubDate>Thu, 08 Sep 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-09-08-dufe-text-mining-in-ms/</guid>
      <description>文本分析在经管研究中的应用</description>
      <content:encoded><![CDATA[<h2 id="slideshttpshidadenggithubioblog2022-09-08-dufe-text-mining-in-msslideshtml"><a href="https://hidadeng.github.io/blog/2022-09-08-dufe-text-mining-in-ms/slides.html">Slides</a></h2>
<iframe
    src="//player.bilibili.com/player.html?bvid=BV1se4y1C7MV&page=1"
    scrolling="no"
    height="500px"
    width="800px"
    frameborder="no"
    framespacing="0"
    allowfullscreen="true"
>
</iframe>

<p><br><br></p>
<h2 id="背景">背景</h2>
<p><img loading="lazy" src="img/multitudes-of-content-illustration.jpeg" alt=""  />
</p>
<p>在经管研究中，往往会涉及很多文本数据的编码。但是做研究面临两个问题:</p>
<h3 id="难题1--数据量大">难题1- 数据量大</h3>
<p>量太大，以至于废人力所能及。</p>
<p>时代发展，体现在数据上的特点就是数据大爆炸，过去做经管研究，使用访谈等研究方法，收录的文本内容，规模大多停留在M级。但是现在大数据时代，研究对象相关的文本数据，G级的数据量也是很常见的。</p>
<h3 id="难题2--格式乱">难题2- 格式乱</h3>
<p>信息存储技术发展，有应用不同场景的不同数据存储格式。数据可能是pdf、txt、docx，也可能是音频、视频等转录的文件。如果快捷整理，这也是个难点。</p>
<h3 id="难题3-难编码">难题3-难编码</h3>
<p>数据量少，可以人工阅读对数据进行理解和编码。但是当数据量大到无法处理的级别后，选择何种算法、各种算法技术的优缺点如何把握，对经管学者也是一个需要攻克的的技术难题。</p>
<p><img loading="lazy" src="img/consumer_org_society.png" alt=""  />
</p>
<p>难度大，但因为文本涉及的主体错综复杂，千丝万缕，所以可以研究很多对象。如个人、组织、社会之间的交互。</p>
<p><br><br></p>
<h2 id="编码解码理论">编码解码理论</h2>
<p>斯图亚特·霍尔在《电视话语的编码和解码》提出 『编码-解码理论』。该理论形成于70年代冷战时期，冷战中不两大阵营为了维护各自的社会稳定，为了在意识形态宣传中取胜，都在宣传工作中投入了重金。</p>
<p>当时的宣传工具是单向的广播模式，媒体作为统治阶级的喉舌，要将统治阶级的偏好、价值观等进行加工，生产相应意识形态内容。</p>
<p>而普罗大众，作为内容的接受者， 一成长于该特定意识形态的社会，同时又有一定的自我意识，所以对于一个宣传内容可能会有三种反应，表里都认同、表认同里不认同、表里都不认同。</p>
<p><img loading="lazy" src="img/SenderReceiver.png" alt=""  />
</p>
<h3 id="使用文本想清楚两个问题">使用文本想清楚两个问题</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">- How text reflects its Sender？
- How text impacts its Receiver？
</code></pre></div><h3 id="使用文本明晰三个角度">使用文本明晰三个角度</h3>
<p>我做的研究使用的文本数据，涉及哪些角色、作用力方向、感兴趣的内容。</p>
<ul>
<li>角色: Sender or Receiver</li>
<li>方向: Reflect or Impact</li>
<li>内容: Sender的意识(认知、偏好、&hellip;)   vs  Receiver的意识(认知、偏好、&hellip;)</li>
</ul>
<p>下面是经管领域研究部分汇总，每个学者根据自己学科研究对象，应该能在4*4的矩阵中找到自己对应的位置</p>
<p><img loading="lazy" src="img/%e7%94%9f%e4%ba%a7%e4%b8%8e%e6%b6%88%e8%b4%b9.png" alt=""  />
</p>
<blockquote>
<p>Berger, Jonah, Ashlee Humphreys, Stephan Ludwig, Wendy W. Moe, Oded Netzer, and David A. Schweidel. &ldquo;Uniting the tribes: Using text for marketing insight.&rdquo; Journal of Marketing 84, no. 1 (2020): 1-25.</p>
</blockquote>
<p><br><br></p>
<h2 id="人工编码与机器编码">人工编码与机器编码</h2>
<p><img loading="lazy" src="img/unstructrueddata.png" alt=""  />
</p>
<p>做研究需要有干净的数据做实证分析，最为理想的是表数据，例如excel文件，每一行代表一条记录，每一列代表一个字段。编码的作用就是将非机构化的、脏乱的数据整理为干净整洁的表数据。</p>
<p>要明确编码方法的优点和缺点，在合理的适用范围使用。对于文本数据的编码，需要理解人工和机器两种编码方式的优缺点</p>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th>分析方法</th>
<th>优点</th>
<th>缺点</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">人工编码</td>
<td>质性（扎根）</td>
<td>少量数据，深刻洞见。</td>
<td>难以应对大数据；<br>编码标准不统一；</td>
</tr>
<tr>
<td style="text-align:left">机器编码</td>
<td>词频、向量相似度、向量距离</td>
<td>标准如一;<br>适合大规模文本挖掘；</td>
<td>需要破坏文本的结构，<br>丧失了部分信息量</td>
</tr>
</tbody>
</table>
<p><br><br></p>
<h2 id="机器编码-将文本转为数字或向量">机器编码-将文本转为数字或向量</h2>
<ul>
<li>
<p>符号法(每个词对应一个数字)</p>
<ul>
<li>词典(词频)法</li>
<li>词袋法、TF-IDF</li>
</ul>
</li>
<li>
<p>词嵌入(每个词对应一个向量)</p>
</li>
</ul>
<p>符号法算法假设词语彼此是语义不相关的，目的是把 <strong>文本</strong> 转为某个数字或<strong>向量</strong>。</p>
<p>而词嵌入算法假设不同的词语是由n维个语义组成的线性组合，目的是把 <strong>词语</strong> 转为<strong>向量</strong>。</p>
<br>
<h3 id="符号法">符号法</h3>
<p>符号法就是数某个词或某类词的出现次数(或占比)。符合法是计算机NLP领域的专业叫法，在经管社科领域，最常见的文本分析软件<a href="https://hidadeng.github.io/blog/liwc_python_text_mining/">LIWC</a>其实也是符号法。而LIWC全(Linguistic Inquiry and Word Count，即语义查询与词频统计。</p>
<p><img loading="lazy" src="img/symbol-representation-1.png" alt=""  />
</p>
<h3 id="符号法的应用">符号法的应用</h3>
<table>
<thead>
<tr>
<th>概念</th>
<th>测量方法</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>认真(努力)</strong></td>
<td>测量文本中词语的个数</td>
</tr>
<tr>
<td><strong>情感</strong></td>
<td>使用情感词典，统计文本中正面词占比</td>
</tr>
<tr>
<td><strong>可读性</strong></td>
<td>文本中高难度(或专业性)词占比</td>
</tr>
<tr>
<td><strong>客观性</strong></td>
<td>文本中某个值的方差，如情感<br>- A<code>产品不错， 包装破损， 态度很好， 综合还是推荐大家购买!</code> [5, 1, 5, 4]<br>- B<code>产品垃圾，使用垃圾， 包装破损， 差评!!</code> [1,  1,  1,  1]<br>A的方差更大，更客观</td>
</tr>
<tr>
<td><strong>相似性(政策稳定性)</strong></td>
<td>cosine(text_vector1, text_vector2)</td>
</tr>
<tr>
<td>&hellip;</td>
<td>&hellip;</td>
</tr>
</tbody>
</table>
<br>
<h3 id="词嵌入">词嵌入</h3>
<p>词嵌入技术有 Word2Vec、Glove，这类技术是挖掘出每个词的上下文语境，通俗的说法就是让计算机，对同样的文章数据，做千万次、上亿次完形填空。这样每个词语都有独特的上下文语义，并以n维向量形式表示，所以词嵌入也可以称之为词向量。</p>
<p><strong>向量模型有近义词相近、概念类似的平行两个特点</strong>。分别举几个例子，方便大家理解。</p>
<p>语义空间是n维，为了便于理解，将其压缩至二维空间。中学的向量大家都比较熟悉，在二维坐标中空间中，两个点的连线可以组成新的向量，相同的向量是平行的。</p>
<p>而在下图的2维语义空间中，good、best语义更接近，所以空间距离更近。同理bad、worst更近。</p>
<p>而vector(good, best)、vector(bad, worst)这两个向量均表示<code>原形-&gt;最高级</code>, 语义向量会近似平行。</p>
<p>同理， vector(good, bad)、 vector(best, worst)两个向量表示 <code>好-&gt;差</code>，语义向量也会近似平行。</p>
<p><img loading="lazy" src="img/embeddings-based.png" alt=""  />
</p>
<br>
<h3 id="词嵌入与认知">词嵌入与认知</h3>
<p>刚刚词嵌入的语义空间中的几个例子，其实就体现了语言的记忆。语义记录了使用该语言的人的记忆。不同的组织，对于同一种概念，会有不同的偏好。例如， Nature2022使用大规模语料数据训练出的词向量，发现语言中残存着人类的某些认知记忆。</p>
<p>通过构建概念词组对儿，在空间中投影，就可以挖掘出词语的在该概念中的分值。例如，使用</p>
<ul>
<li>SMALL = [small, tiny, little&hellip;]</li>
<li>BIG = [big, mega, large&hellip;]</li>
</ul>
<p>每个词都是一个n维的向量，SMALL或BIG都能计算出一个均值向量。大家记得中学的向量投影不，Nature2022就使用这个朴素的方法测量每个动物名称所蕴含的人类尺寸认知。</p>
<p><img loading="lazy" src="img/Concept_Words_Project.png" alt=""  />
</p>
<blockquote>
<p>Grand, G., Blank, I.A., Pereira, F. and Fedorenko, E., 2022. Semantic projection recovers rich human knowledge of multiple object features from word embeddings. Nature Human Behaviour, pp.1-13.</p>
</blockquote>
<br>
<h3 id="技术对比">技术对比</h3>
<p>这里做个表格对比，大家自己感受下三种技术的异同。</p>
<table>
<thead>
<tr>
<th>技术</th>
<th>技术</th>
<th>维度类比</th>
<th>任务</th>
<th>例子</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>符号法-字典</strong>（词频）</td>
<td>数个数</td>
<td>原子</td>
<td>统计每句话里的名词个数</td>
<td>sent_num1 = 2<br>sent_num2 = 1</td>
</tr>
<tr>
<td><strong>符号法-词袋</strong></td>
<td>bag of words<br>one-hot<br>Tf-idf</td>
<td>分子</td>
<td>转化为词向量, 计算两个句子相似度。</td>
<td>vec1 = [1, 1, 1, 1, 1, 0]<br>vec2 = [0, 1, 0, 1, 0, 1]<br>similarity = cosine(vec1, vec2)</td>
</tr>
<tr>
<td><strong>词嵌入</strong></td>
<td>word2vec、<br>glove等</td>
<td>中子、质子、电子</td>
<td>词语相似度。(语义上大小相近，方向相反; 态度、偏见)</td>
<td>mom = [0.2, 0.7, 0.1]<br/>dad   = [0.3, 0.5, -0.2]</td>
</tr>
</tbody>
</table>
<p><br><br></p>
<h2 id="经管-文本分析-文献">经管-文本分析-文献</h2>
<p>在这里我把技术细分为词频、词袋、w2v建词典、w2v认知变迁四个维度，整理了经管7篇论文。大家可以阅读这7篇论文，掌握文本分析的应用场景。</p>
<table>
<thead>
<tr>
<th>文献</th>
<th>定性</th>
<th>词频</th>
<th>词袋</th>
<th>W2V建词典</th>
<th>W2V认知变迁</th>
</tr>
</thead>
<tbody>
<tr>
<td>王伟, 陈伟, 祝效国 and 王洪伟, 2016. 众筹融资成功率与语言风格的说服性&ndash;基于 Kickstarter 的实证研究. <em>管理世界</em>, (5), pp.81-98.</td>
<td>Y</td>
<td>Y</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://hidadeng.github.io/blog/jcr_concreteness_computation/">语言具体性如何影响顾客满意度</a><br>Packard, Grant, and Jonah Berger. “How concrete language shapes customer satisfaction.” <em>Journal of Consumer Research</em> 47, no. 5 (2021): 787-806.</td>
<td></td>
<td>Y</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Wang, Quan, Beibei Li, and Param Vir Singh. &ldquo;Copycats vs. original mobile apps: A machine learning copycat-detection method and empirical analysis.&rdquo; Information Systems Research 29, no. 2 (2018): 273-291.</td>
<td></td>
<td></td>
<td>Y</td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://hidadeng.github.io/blog/2019-12-08-lazy-prices/">文本相似度</a><br>Cohen, L., Malloy, C. and Nguyen, Q., 2020. Lazy prices. <em>The Journal of Finance</em>, <em>75</em>(3), pp.1371-1415.</td>
<td></td>
<td></td>
<td>Y</td>
<td></td>
<td></td>
</tr>
<tr>
<td>胡楠, 薛付婧 and 王昊楠, 2021. <a href="https://hidadeng.github.io/blog/text_mining_in_2021_management_world/">管理者短视主义</a>影响企业长期投资吗———基于文本分析和机器学习. <em>管理世界</em>, <em>37</em>(5), pp.139-156.</td>
<td></td>
<td>Y</td>
<td></td>
<td>Y</td>
<td></td>
</tr>
<tr>
<td>Kai Li, Feng Mai, Rui Shen, Xinyan Yan, <a href="https://github.com/MS20190155/Measuring-Corporate-Culture-Using-Machine-Learning">Measuring Corporate Culture Using Machine Learning</a>, The Review of Financial Studies, 2020</td>
<td></td>
<td></td>
<td>Y</td>
<td>Y</td>
<td></td>
</tr>
<tr>
<td>女性就职高管改变组织内性别偏见<br>Lawson, M. Asher, Ashley E. Martin, Imrul Huda, and Sandra C. Matz. &ldquo;Hiring women into senior leadership positions is associated with a reduction in gender stereotypes in organizational language.&rdquo; <em>Proceedings of the National Academy of Sciences</em> 119, no. 9 (2022): e2026443119.</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>Y</td>
</tr>
<tr>
<td>使用词嵌入技术，量化近百年以来性别和族群的刻板印象<br>Garg, Nikhil, Londa Schiebinger, Dan Jurafsky, and James Zou. &ldquo;Word embeddings quantify 100 years of gender and ethnic stereotypes.&rdquo; Proceedings of the National Academy of Sciences 115, no. 16 (2018): E3635-E3644.</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>Y</td>
</tr>
</tbody>
</table>
<p><br><br></p>
<h2 id="案例">案例</h2>
<h3 id="案例1-众筹语言风格">案例1-众筹语言风格</h3>
<p>王伟, 陈伟, 祝效国 and 王洪伟, 2016. 众筹融资成功率与语言风格的说服性&ndash;基于 Kickstarter 的实证研究. <em>管理世界</em>, (5), pp.81-98.</p>
<blockquote>
<p>众筹融资效果决定着众筹平台的兴衰。 众筹行为很大程度上是由投资者的主观因素决定的，而影响主观判断的一个重要因素就是语言的说服性。 而这又是一种典型的用 户产生内容（UGC），项目发起者可以采用任意类型的语言风格对项目进行描述。 不同的语 言风格会改变投资者对项目前景的感知，进而影响他们的投资意愿。 首先，依据 Aristotle 修 辞三元组以及 Hovland 说服模型，采用扎根理论，将众筹项目的语言说服风格分为 5 类：诉诸可信、诉诸情感、诉诸逻辑、诉诸回报和诉诸夸张。</p>
<p>然后，<strong>借助文本挖掘方法，构建说服风格语料库，并对项目摘要进行分类。</strong></p>
<p>最后，建立语言说服风格对项目筹资影响的计量模型，并对 <strong>Kickstarter 平台上的 128345 个项目进行实证分析</strong>。 总体来说，由于项目性质的差异，不同 的项目类别对应于不同的最佳说服风格。</p>
</blockquote>
<p><img loading="lazy" src="img/%e4%bc%97%e7%ad%b9-%e7%a7%8d%e5%ad%90%e8%af%8d.png" alt=""  />

<img loading="lazy" src="img/%e4%bc%97%e7%ad%b9-%e6%b5%81%e7%a8%8b%e5%9b%be.png" alt=""  />
</p>
<br>
<h3 id="案例2-山寨-vs-原创">案例2 山寨 vs 原创</h3>
<p>Wang, Quan, Beibei Li, and Param Vir Singh. &ldquo;Copycats vs. original mobile apps: A machine learning copycat-detection method and empirical analysis.&rdquo; Information Systems Research 29, no. 2 (2018): 273-291.</p>
<blockquote>
<p><strong>进行此类研究的主要威慑因素是缺乏一种客观的方法来识别应用程序是模仿者还是原创者。通过结合自然语言处理，潜在语义分析，基于网络的聚类和图像分析等机器学习技术，我们提出了一种将应用识别为原创app或模仿app，可检测两种模仿者的方法：欺骗性和非欺骗性。</strong></p>
<p>根据检测结果，我们进行了经济计量分析，以确定五年间在iOS App Store中发布的<strong>5,141个开发人员的10,100个动作游戏应用程序</strong>样本中，模仿app对原创app需求的影响。我们的结果表明，特定模仿者对原始应用需求的影响取决于模仿者的质量和欺骗程度。高质量的非欺骗性复制品会对原件产生负面影响。相比之下，低质量，欺骗性的模仿者正面影响了对原创app的需求。</p>
<p>结果表明，从总体上讲，模仿app对原创app需求的影响在统计上是微不足道的。<strong>我们的研究通过提供一种识别模仿app的方法</strong>，并提供模仿app对原创app需求影响的证据，为越来越多的移动应用消费文献做出了贡献。</p>
</blockquote>
<p><img loading="lazy" src="img/copycat.png" alt=""  />
</p>
<br>
<h3 id="案例3-lazy-prices文本相似性">案例3 Lazy prices文本相似性</h3>
<p>Cohen, L., Malloy, C. and Nguyen, Q., 2020. <a href="https://hidadeng.github.io/blog/2019-12-08-lazy-prices/">Lazy prices</a>. <em>The Journal of Finance</em>, <em>75</em>(3), pp.1371-1415.</p>
<blockquote>
<p>之前的研究认为，尽管投资者一次对包含重大变化的财务报表的发布作出了迅时反应，但随着时间的流逝，这种公告作用是会减弱的(Brown and Tucker, 2011 and Feldman et al., 2010)。这表示10-K报告会随着时间推移，信息价值大打折扣。尽管我们复现了这个事实，即与常规文件的变更没有重大的公告效应，但我们认为，前人的研究忽略了更重要部分(如MD&amp;A)对对资产价格的影响。</p>
</blockquote>
<blockquote>
<p>确切的说，<strong>并不是报告的披露效应的信息价值变低了，而是投资者越来越难以发现报告中微妙的信息变化， 比如因为报告变得越来越冗杂。投资者只有看到某些新闻后，才会逐渐意识到之前公司报告内容变化的的真正价值</strong>。</p>
<p>使用1995年-2014年所有美国公司季度和年度申报的完整历史记录，研究发现当公司对<strong>报告进行积极更改</strong>时，这种行为<strong>蕴含着</strong>公司未来运营的<strong>重要信号</strong>。</p>
<p><strong>财务报告的语言和结构的变化也对公司的未来收益产生重大影响</strong>：做空&quot;变化&quot;的公司（持有的公司，如果其报告发生变化的，做空该公司股票），买入“不变化”的公司，使用这样的投资组合策略，在2006年的每月alpha值高达1.88%的收益（每年超过22％）。报告中涉及执行官（CEO和CFO）团队的话语风格的变化，或者有关诉讼(风险部分)的话语的变化，都对投资的未来收益有重要作用。</p>
</blockquote>
<p><img loading="lazy" src="img/lazy-prices-1.png" alt=""  />

<img loading="lazy" src="img/lazy-prices-2.png" alt=""  />
</p>
<br>
<h3 id="案例3-女性就职高管改变组织内性别刻板印象-pnas2022">案例3-女性就职高管改变组织内性别刻板印象 PNAS2022</h3>
<p>Lawson, M. Asher, Ashley E. Martin, Imrul Huda, and Sandra C. Matz. &ldquo;Hiring women into senior leadership positions is associated with a reduction in gender stereotypes in organizational language.&rdquo; <em>Proceedings of the National Academy of Sciences</em> 119, no. 9 (2022): e2026443119.</p>
<blockquote>
<p>女性在领导职位上的代表性仍然不足。这种代表性不足至少部分是由将男性与成就导向的代理特征（例如，自信和果断）联系起来的性别刻板印象驱动的。这些刻板印象在语言中得到表达和延续，女性被描述的方式比男性少。目前的研究表明，任命女性担任高层管理人员可以减轻这些以语言表达的根深蒂固的刻板印象。我们使用自然语言处理技术分析了超过 <strong>43,000 份包含 12.3 亿字的文档，发现聘用女性首席执行官和董事会成员与组织使用语言的变化有关，因此女性的语义变得更类似于代理的语义</strong>。换句话说，雇用女性担任领导职务有助于将女性与对领导成功至关重要的特征联系起来。重要的是，我们的研究结果表明，通过增加女性代表来改变组织语言可能会为女性提供摆脱双重束缚的途径：当女性领导人被任命担任权力职位时，女性与代理的积极方面（例如，独立和自信）在语言上，不以减少与社区的联系（例如，善良和关怀）为代价。总而言之，我们的研究结果表明，女性代表不仅是目的，而且是系统地改变阴险的性别刻板印象并克服女性被认为是有能力或可爱的权衡的一种手段。</p>
<p>本文使用的词向量， 刻画研究对象的文化认知，是依对象依时间而变化的。</p>
</blockquote>
<p><img loading="lazy" src="img/hiring_women.png" alt=""  />
</p>
<br>
<h3 id="案例4--使用词嵌入技术量化近百年以来性别和族群的刻板印象-pnas2018">案例4- 使用词嵌入技术，量化近百年以来性别和族群的刻板印象 PNAS2018</h3>
<p>{{ &lt; youtube boxV8Od4jqQ &gt;}}</p>
<br>
<h2 id="关于合作与交流">关于合作与交流</h2>
<p>如果正在推进的项目，需要用到文本分析，欢迎交流与合作 ~</p>
<p>可加微信372335839， 备注【姓名-学校-专业】, 说明来意。如果想系统获取技术细节，课程 <a href="https://hidadeng.github.io/blog/management_python_course/">付费视频课 | Python实证指标构建与文本分析</a> 内都有的技术代码和讲解，欢迎了解。</p>
<p><br><br></p>
<h2 id="广而告之">广而告之</h2>
<ul>
<li><a href="https://hidadeng.github.io/blog/call_for_paper/">长期征稿</a></li>
<li><a href="https://hidadeng.github.io/blog/we_need_you/">长期招募小伙伴</a></li>
<li><a href="https://hidadeng.github.io/blog/management_python_course/">付费视频课 | Python实证指标构建与文本分析</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>ManagementScience | 使用网络算法识别创新的颠覆性与否</title>
      <link>https://hidadeng.github.io/blog/2022-09-07-management-science-disrupt-science-and-technology/</link>
      <pubDate>Wed, 07 Sep 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-09-07-management-science-disrupt-science-and-technology/</guid>
      <description>The CD index is a new approach to finding important points in evolving networks. When applied to large-scale data sets like U.S. patent citations, the index is useful for identifying influential innovations and other features of technological change.</description>
      <content:encoded><![CDATA[


<p>颠覆式创新是一个很火的概念，在创新创业、科学学等研究中，每个专利、论文的正文中都会引用关系，而引用关系会构成一个引用网络。</p>
<p>那么创新如何从网络形态进行区分，如何计算网络节点的创新程度，本文列举两篇与此相关的论文，分别是 Management science 和 Science 。</p>
<p><br><br></p>
<div id="文献摘要" class="section level2">
<h2>文献摘要</h2>
<p><strong>Funk, Russell J., and Jason Owen-Smith. “A dynamic network measure of technological change.” <em>Management science</em> 63, no. 3 (2017): 791-817.</strong></p>
<p>该文使用网络分析方法研究技术变革，论文认为 <strong>颠覆性的新发明，通过将发明者的注意力转移到或远离这些发明所依赖的知识，来重塑相互关联的技术网络。即更广的视野或更久远的视角，往往有利于颠覆性创新的产生</strong>。<strong>基于该思路，本文开发了新发明的颠覆性与否的计算指标cdindex</strong>。我们将这些指标应用于大学研究商业化的分析，并发现 <strong>联邦研究资金推动校园产生颠覆性创新，而商业联系会有利于巩固现状的创新</strong>。通过量化新技术，我们提出的指数允许基于专利的创新研究捕捉概念上重要的现象， 这些现象无法通过既定措施检测到。该测量方法提供了支持创新、创业、技术战略、科学政策和社会网络理论研究的理论发展的经验见解。</p>
<blockquote>
<p>Abstract: This article outlines a network approach to the study of technological change. We propose that new inventions reshape networks of interlinked technologies by shifting inventors’ attention to or away from the knowledge on which those inventions build. Using this approach, we develop novel indexes of the extent to which a new invention consolidates or destabilizes existing technology streams. We apply these indexes in analyses of university research commercialization and ﬁnd that, although federal research funding pushes campuses to create inventions that are more destabilizing, deeper commercial ties lead them to produce technologies that consolidate the status quo. By quantifying the eﬀects that new technologies have on their predecessors, the indexes we propose allow patent-based studies of innovation to capture conceptually important phenomena that are not detectable with established measures. The measurement approach presented here oﬀers empirical insights that support theoretical development in studies of innovation, entrepreneurship, technology strategy, science policy, and social network theory.</p>
</blockquote>
<p><br></p>
<p><strong>Wu, Lingfei, Dashun Wang, and James A. Evans. “Large teams develop and small teams disrupt science and technology.” Nature 566, no. 7744 (2019): 378-382.</strong></p>
<p>当今科学和技术最普遍的趋势之一是各个领域的大型团队的增长，因为孤独的研究人员和小型团队的流行程度正在减少 。团队规模的增加归因于科学活动的专业化、通信技术的改进 或需要跨学科解决方案的现代问题的复杂性。团队规模的这种转变引发了一个问题，即大团队所产生的科技特征是否以及如何不同于小团队。分析了 1954-2014 年期间超过 6500 万篇论文、专利和软件产品，证明在此期间，<strong>较小的团队倾向于将拉长到更大的时间尺度，借鉴过去，用新的想法和机会来颠覆科学和技术；而较大的团队倾向于聚焦于当前流行的，完善当前现有的</strong>。不论团队大小，均对于蓬勃发展的科学技术生态至关重要，并表明，为实现这一目标，科学政策应旨在支持团队规模的多样性。</p>
<blockquote>
<p>Abstract: One of the most universal trends in science and technology today is the growth of large teams in all areas, as solitary researchers and small teams diminish in prevalence. Increases in team size have been attributed to the specialization of scientific activities,
improvements in communication technology, or the complexity
of modern problems that require interdisciplinary solutions.This shift in team size raises the question of whether and how the character of the science and technology produced by large teams differs from that of small teams. Here we analyse more than 65 million papers, patents and software products that span the period 1954–2014, and demonstrate that across this period smaller teams have tended to disrupt science and technology with new ideas and opportunities, whereas larger teams have tended to develop existing ones. Work from larger teams builds on morerecent and popular developments, and attention to their work comes
immediately. By contrast, contributions by smaller teams search more deeply into the past, are viewed as disruptive to science and technology and succeed further into the future—if at all. Observed differences between small and large teams are magnified for higherimpact work, with small teams known for disruptive work and large teams for developing work. Differences in topic and research design
account for a small part of the relationship between team size and disruption; most of the effect occurs at the level of the individual, as people move between smaller and larger teams. These results demonstrate that both small and large teams are essential to a flourishing ecology of science and technology, and suggest that, to achieve this, science policies should aim to support a diversity of team sizes.</p>
</blockquote>
<p><br><br></p>
</div>
<div id="算法对比" class="section level2">
<h2>算法对比</h2>
<p>我没阅读两篇论文，仅就颠覆性与否的计算方法和图例，感觉算法实现差不多。</p>
<div class="figure">
<img src="img/cdindex-managent_science_2017.png" alt="" />
<p class="caption">上图为2017年Management Science的插图</p>
</div>
<p><br></p>
<div class="figure">
<img src="img/disruption_nature_2019.png" alt="" />
<p class="caption">上图为2019年Nature的插图</p>
</div>
<p><br><br></p>
</div>
<div id="代码数据" class="section level2">
<h2>代码数据</h2>
<p>下面分别为Management2017和Nature2019的主页，均含数据和代码。</p>
<p><a href="http://russellfunk.org/cdindex/"><img src="img/cdindex-homepage.png" /></a></p>
<p><br></p>
<p><a href="https://lingfeiwu.github.io/smallTeams/"><img src="img/nature2019-disrupt-homepage.png" /></a></p>
<p><br><br></p>
</div>
<div id="算法实现" class="section level2">
<h2>算法实现</h2>
<p>按照时间优先原则，本文就只分享Management2017论文作者Funk, Russell开源了cdindex库 (开发语言C和Python) ，安装</p>
<p><br></p>
<pre><code>pip3 install cdindex</code></pre>
<p>将Management2017 cdindex算法图 标注为如下图， 下图中左右两个网络节点是相同的，只需构造一套节点，两套边数据即可完成实验。</p>
<p><img src="img/cdindex-managent_science_2017_demo.png" /></p>
<p><br></p>
<p>我们就直接上代码</p>
<pre class="python"><code>import cdindex
import datetime

#节点，理解为专利号或者论文doi号；同时节点有先后时间属性
vertices = [{&quot;name&quot;: &quot;x1&quot;, &quot;time&quot;: datetime.datetime(1990, 1, 1)},
           {&quot;name&quot;: &quot;x2&quot;, &quot;time&quot;: datetime.datetime(1990, 1, 1)},
           {&quot;name&quot;: &quot;x3&quot;, &quot;time&quot;: datetime.datetime(1990, 1, 1)},
           {&quot;name&quot;: &quot;x4&quot;, &quot;time&quot;: datetime.datetime(1990, 1, 1)},
        
           {&quot;name&quot;: &quot;y&quot;, &quot;time&quot;: datetime.datetime(1991, 1, 1)},
          
           {&quot;name&quot;: &quot;z1&quot;, &quot;time&quot;: datetime.datetime(1995, 1, 1)},
           {&quot;name&quot;: &quot;z2&quot;, &quot;time&quot;: datetime.datetime(1995, 1, 1)},
           {&quot;name&quot;: &quot;z3&quot;, &quot;time&quot;: datetime.datetime(1995, 1, 1)},
           {&quot;name&quot;: &quot;z4&quot;, &quot;time&quot;: datetime.datetime(1995, 1, 1)},
           {&quot;name&quot;: &quot;z5&quot;, &quot;time&quot;: datetime.datetime(1995, 1, 1)},
           {&quot;name&quot;: &quot;z6&quot;, &quot;time&quot;: datetime.datetime(1995, 1, 1)}]
           
    
#edges_1边关系
#edges_1中的y为颠覆型
edges_1 = [{&quot;source&quot;: &quot;z1&quot;, &quot;target&quot;: &quot;y&quot;},
           {&quot;source&quot;: &quot;z2&quot;, &quot;target&quot;: &quot;y&quot;},
           {&quot;source&quot;: &quot;z3&quot;, &quot;target&quot;: &quot;y&quot;},
           {&quot;source&quot;: &quot;z4&quot;, &quot;target&quot;: &quot;y&quot;},
           {&quot;source&quot;: &quot;z5&quot;, &quot;target&quot;: &quot;y&quot;},
           {&quot;source&quot;: &quot;z6&quot;, &quot;target&quot;: &quot;y&quot;},
           
           {&quot;source&quot;: &quot;y&quot;, &quot;target&quot;: &quot;x1&quot;},
           {&quot;source&quot;: &quot;y&quot;, &quot;target&quot;: &quot;x2&quot;},
           {&quot;source&quot;: &quot;y&quot;, &quot;target&quot;: &quot;x3&quot;},
           {&quot;source&quot;: &quot;y&quot;, &quot;target&quot;: &quot;x4&quot;}]


#edges_2边关系 
#edges_2中的y为巩固型
edges_2 = [{&quot;source&quot;: &quot;z1&quot;, &quot;target&quot;: &quot;y&quot;},
           {&quot;source&quot;: &quot;z2&quot;, &quot;target&quot;: &quot;y&quot;},
           {&quot;source&quot;: &quot;z3&quot;, &quot;target&quot;: &quot;y&quot;},
           {&quot;source&quot;: &quot;z4&quot;, &quot;target&quot;: &quot;y&quot;},
           {&quot;source&quot;: &quot;z5&quot;, &quot;target&quot;: &quot;y&quot;},
           {&quot;source&quot;: &quot;z6&quot;, &quot;target&quot;: &quot;y&quot;},
           
           {&quot;source&quot;: &quot;y&quot;, &quot;target&quot;: &quot;x1&quot;},
           {&quot;source&quot;: &quot;y&quot;, &quot;target&quot;: &quot;x2&quot;},
           {&quot;source&quot;: &quot;y&quot;, &quot;target&quot;: &quot;x3&quot;},
           {&quot;source&quot;: &quot;y&quot;, &quot;target&quot;: &quot;x4&quot;},
          
          {&quot;source&quot;: &quot;z1&quot;, &quot;target&quot;: &quot;x1&quot;},
          {&quot;source&quot;: &quot;z2&quot;, &quot;target&quot;: &quot;x1&quot;},
          {&quot;source&quot;: &quot;z3&quot;, &quot;target&quot;: &quot;x2&quot;},
           
          {&quot;source&quot;: &quot;z4&quot;, &quot;target&quot;: &quot;x3&quot;},
          {&quot;source&quot;: &quot;z5&quot;, &quot;target&quot;: &quot;x3&quot;},
          {&quot;source&quot;: &quot;z5&quot;, &quot;target&quot;: &quot;x4&quot;},
          {&quot;source&quot;: &quot;z6&quot;, &quot;target&quot;: &quot;x4&quot;}]



# 构建两个网络
graph1 = cdindex.Graph() #颠覆型
graph2 = cdindex.Graph() #发展型

# 添加节点
for vertex in vertices:
    graph1.add_vertex(vertex[&quot;name&quot;], cdindex.timestamp_from_datetime(vertex[&quot;time&quot;]))
    graph2.add_vertex(vertex[&quot;name&quot;], cdindex.timestamp_from_datetime(vertex[&quot;time&quot;]))

# 添加引用关系
for edge in edges_1:
    graph1.add_edge(edge[&quot;source&quot;], edge[&quot;target&quot;])
for edge in edges_2:
    graph2.add_edge(edge[&quot;source&quot;], edge[&quot;target&quot;])
    
    
#y研究发布后1825天内，引用y的论文(专利)列入网络。
t_delta = int(datetime.timedelta(days=1825).total_seconds())

#计算cdindex得分
score1 = graph1.cdindex(&quot;y&quot;, t_delta)
score2 = graph2.cdindex(&quot;y&quot;, t_delta)

print(&#39;左侧-网络中的y节点的cdinex得分: {}, 节点y 为颠覆性创新&#39;.format(score1))</code></pre>
<pre><code>## 左侧-网络中的y节点的cdinex得分: 1.0, 节点y 为颠覆性创新</code></pre>
<p><br></p>
<pre class="python"><code>print(&#39;右侧-网络中的y节点的cdinex得分: {}, 节点y 为发展性创新&#39;.format(score2))</code></pre>
<pre><code>## 右侧-网络中的y节点的cdinex得分: -1.0, 节点y 为发展性创新</code></pre>
<p><br><br></p>
</div>
<div id="cdindex" class="section level2">
<h2>cdindex</h2>
<p>对比Python的结果，与论文计算过程，完全一致。cdindex内部实现我不太熟悉，如果想了解cdindex内部实现，可前往 <a href="https://github.com/russellfunk/cdindex" class="uri">https://github.com/russellfunk/cdindex</a> 阅读cdindex库的源码。
<img src="img/cdindex-managent_science_2017.png" /></p>
</div>
]]></content:encoded>
    </item>
    
    <item>
      <title>17G数据 | 企业社会责任报告数据集</title>
      <link>https://hidadeng.github.io/blog/coporate_social_responsibility_datasets/</link>
      <pubDate>Thu, 04 Aug 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/coporate_social_responsibility_datasets/</guid>
      <description>近年来，企业社会责任（csr)已成为全球学术界研究的热点。国内外各大顶刊都先后刊登了多篇关于csr的文章，比如《企业绿色创新实践如何破解“和谐共生”难题？》（发表于管理世界）、《负责任的国际投资：ESG与中国OFDI》（发表于经济研究）、《Is my company really doing good? Factors influencing employees&amp;#39; evaluation of the authenticity of their company&amp;#39;s corporate social responsibility engagement》（发表于JBR）等。这些文章核心变量的构建大都基于对企业社会责任报告的内容分析和挖掘。比如《企业绿色创新实践如何破解“和谐共生”难题？》的被解释变量（绿色创新）以及部分解释变量（二元合法性和伦理型领导）。可见，社会责任报告对于我们研究esg至关重要。因此，接下来小编就带大家爬取深交所上市公司历年的社会责任报告，希望能够给大家带来一些帮助。</description>
      <content:encoded><![CDATA[<blockquote>
<p>作者:张延丰 哈工程在读博士</p>
</blockquote>
<p>近年来，企业社会责任（csr)已成为全球学术界研究的热点。国内外各大顶刊都先后刊登了多篇关于csr的文章，比如《企业绿色创新实践如何破解“和谐共生”难题？》（发表于管理世界）、《负责任的国际投资：ESG与中国OFDI》（发表于经济研究）、《Is my company really doing good? Factors influencing employees' evaluation of the authenticity of their company&rsquo;s corporate social responsibility engagement》（发表于JBR）等。这些文章核心变量的构建大都基于对企业社会责任报告的内容分析和挖掘。比如《企业绿色创新实践如何破解“和谐共生”难题？》的被解释变量（绿色创新）以及部分解释变量（二元合法性和伦理型领导）。可见，社会责任报告对于我们研究esg至关重要。因此，接下来小编就带大家爬取深交所上市公司历年的社会责任报告，希望能够给大家带来一些帮助。</p>
<br>
<h2 id="获取数据集">获取数据集</h2>
<p>采集4000多个pdf文件。经过数据清洗，将20G的pdf数据，汇总整理到170M的csv文件内。</p>
<p><img loading="lazy" src="img/datasets.png" alt=""  />
</p>
<p>数据整理不易，如需获取本数据集，<strong>请转发本文至朋友圈集赞满30+</strong>， 加微信【372335839】，备注【深圳ESG数据集】</p>
<img src="img/wechat.jpg" style="zoom:50%;" />
<p><br><br></p>
<h2 id="一构建网络爬虫">一、构建网络爬虫</h2>
<p>数据采集分为多个步骤</p>
<ol>
<li>找网址规律(GET or POST), 构造url参数</li>
<li>伪装请求，防止被封</li>
<li>构造csv，存储信心</li>
<li>执行整个爬虫</li>
</ol>
<h3 id="11-url">1.1 url</h3>
<p>打开X交所的 <a href="http://www.szse.cn/disclosure/listed/notice/">http://www.szse.cn/disclosure/listed/notice/</a> ，同时打开浏览器开发者工具network面板，在截图左侧输入框输入关键词 『社会责任报告』，按下回车。</p>
<p>此时开发者工具network面板出现很多网络交换信息， 点击检查发现下图</p>
<p><img loading="lazy" src="img/01-%e7%bd%91%e5%9d%80%e8%a7%84%e5%be%8b.png" alt=""  />
</p>
<p>发现该页面数据是<strong>POST</strong>请求，网址为</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">http://www.szse.cn/api/disc/announcement/annList?random=random参数
</code></pre></div><h3 id="12-headers">1.2 headers</h3>
<p>同时也能发现伪装头参数，现将两个重要信息整理为</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://www.szse.cn/api/disc/announcement/annList?random=</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span>

<span class="c1">#伪装头</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json, text/javascript, */*; q=0.01&#39;</span><span class="p">,</span>
           <span class="s1">&#39;Accept-Encoding&#39;</span><span class="p">:</span> <span class="s1">&#39;gzip, deflate&#39;</span><span class="p">,</span>
           <span class="s1">&#39;Accept-Language&#39;</span><span class="p">:</span> <span class="s1">&#39;zh-CN,zh;q=0.9,en;q=0.8&#39;</span><span class="p">,</span>
           <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
           <span class="s1">&#39;Host&#39;</span><span class="p">:</span> <span class="s1">&#39;www.szse.cn&#39;</span><span class="p">,</span>
           <span class="s1">&#39;Origin&#39;</span><span class="p">:</span> <span class="s1">&#39;http://www.szse.cn&#39;</span><span class="p">,</span>
           <span class="s1">&#39;Proxy-Connection&#39;</span><span class="p">:</span> <span class="s1">&#39;close&#39;</span><span class="p">,</span>
           <span class="s1">&#39;Referer&#39;</span><span class="p">:</span> <span class="s1">&#39;http://www.szse.cn/disclosure/listed/fixed/index.html&#39;</span><span class="p">,</span>
           <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.132 Safari/537.36&#39;</span><span class="p">,</span>
           <span class="s1">&#39;X-Request-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;ajax&#39;</span><span class="p">,</span>
           <span class="s1">&#39;X-Requested-With&#39;</span><span class="p">:</span> <span class="s1">&#39;XMLHttpRequest&#39;</span><span class="p">}</span>
</code></pre></div><h3 id="13-data参数">1.3 data参数</h3>
<p>POST请求需要构造data参数，在开发者对应于payload, 整理为Python格式</p>
<p><img loading="lazy" src="img/02-payload.png" alt=""  />
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">
</code></pre></div><p><br><br></p>
<h3 id="14-preview">1.4 preview</h3>
<p>看到左侧渲染后的数据，同时也能在开发者工具network面板看到肉眼背后的源数据。我们使用preview预览截图再次确认网址规律没有问题。</p>
<p><img loading="lazy" src="img/03-data-preview.jpg" alt=""  />
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">keyword</span> <span class="o">=</span> <span class="s1">&#39;社会责任报告&#39;</span>
<span class="n">page</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1">#post方法参数</span>
<span class="n">payload</span> <span class="o">=</span><span class="p">{</span><span class="s2">&#34;seDate&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;&#34;</span><span class="p">,</span><span class="s2">&#34;&#34;</span><span class="p">],</span>
           <span class="s2">&#34;searchKey&#34;</span><span class="p">:</span> <span class="p">[</span><span class="n">keyword</span><span class="p">],</span>
           <span class="s2">&#34;channelCode&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;listedNotice_disc&#34;</span><span class="p">],</span>
           <span class="s2">&#34;pageSize&#34;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
           <span class="s2">&#34;pageNum&#34;</span><span class="p">:</span> <span class="n">page</span><span class="p">}</span>
</code></pre></div><h3 id="15-csv">1.5 csv</h3>
<p>现在已经把爬虫最重要的工作做完了，剩下的就是想办法构造出csv，并将数据存入csv。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#定义csv字段，存储PDF链接信息至data/esg_links.csv</span>
<span class="n">csvf</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;data/esg_links.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;a+&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="n">fieldnames</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;pdf_link&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span><span class="p">]</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">csvf</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">fieldnames</span><span class="p">)</span>
<span class="n">writer</span><span class="o">.</span><span class="n">writeheader</span><span class="p">()</span>

<span class="n">test_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;pdf_link&#39;</span><span class="p">:</span> <span class="s1">&#39;测试pdf文件链接&#39;</span><span class="p">,</span>
             <span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;测试股票代码&#39;</span><span class="p">,</span>
             <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;股票名称&#39;</span><span class="p">,</span>
             <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;报告名称&#39;</span><span class="p">,</span>
             <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;发布日期&#39;</span><span class="p">,</span>
             <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="s1">&#39;pdf文件字节大小&#39;</span><span class="p">,</span>
             <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;数据id&#39;</span><span class="p">}</span>
             
<span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">test_data</span><span class="p">)</span>

<span class="c1">#关闭csv</span>
<span class="n">csvf</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div><p><br><br></p>
<h2 id="二爬虫代码完整">二、爬虫代码(完整)</h2>
<p>当你看到本文时，该完整代码很有可能会随着网站变化而失效。不要悲伤难过， 按照爬虫思路自己diy即可。如果没有爬虫基础，学习 <a href="https://www.bilibili.com/video/BV1AE411r7ph">大邓的B站爬虫视频</a> ，</p>
<p><img loading="lazy" src="img/%e5%a4%a7%e9%82%93%e7%88%ac%e8%99%ab.jpg" alt=""  />
</p>
<p>自己懂爬虫原理diy代码，比改别人的代码来的更容易。将前面的准备工作组织起来, 就形成了下面的完整代码</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">csv</span>

<span class="n">keyword</span> <span class="o">=</span> <span class="s2">&#34;社会责任报告&#34;</span>

<span class="c1">#定义csv字段，存储PDF链接信息至data/esg_links.csv</span>
<span class="n">csvf</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;data/esg_links.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;a+&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="n">fieldnames</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;pdf_link&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span><span class="p">]</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">csvf</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">fieldnames</span><span class="p">)</span>
<span class="n">writer</span><span class="o">.</span><span class="n">writeheader</span><span class="p">()</span>

<span class="c1">#伪装头</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json, text/javascript, */*; q=0.01&#39;</span><span class="p">,</span>
           <span class="s1">&#39;Accept-Encoding&#39;</span><span class="p">:</span> <span class="s1">&#39;gzip, deflate&#39;</span><span class="p">,</span>
           <span class="s1">&#39;Accept-Language&#39;</span><span class="p">:</span> <span class="s1">&#39;zh-CN,zh;q=0.9,en;q=0.8&#39;</span><span class="p">,</span>
           <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
           <span class="s1">&#39;Host&#39;</span><span class="p">:</span> <span class="s1">&#39;www.szse.cn&#39;</span><span class="p">,</span>
           <span class="s1">&#39;Origin&#39;</span><span class="p">:</span> <span class="s1">&#39;http://www.szse.cn&#39;</span><span class="p">,</span>
           <span class="s1">&#39;Proxy-Connection&#39;</span><span class="p">:</span> <span class="s1">&#39;close&#39;</span><span class="p">,</span>
           <span class="s1">&#39;Referer&#39;</span><span class="p">:</span> <span class="s1">&#39;http://www.szse.cn/disclosure/listed/fixed/index.html&#39;</span><span class="p">,</span>
           <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.132 Safari/537.36&#39;</span><span class="p">,</span>
           <span class="s1">&#39;X-Request-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;ajax&#39;</span><span class="p">,</span>
           <span class="s1">&#39;X-Requested-With&#39;</span><span class="p">:</span> <span class="s1">&#39;XMLHttpRequest&#39;</span><span class="p">}</span>

<span class="n">page</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1">#post方法参数</span>
<span class="n">payload</span> <span class="o">=</span><span class="p">{</span><span class="s2">&#34;seDate&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;&#34;</span><span class="p">,</span><span class="s2">&#34;&#34;</span><span class="p">],</span>
           <span class="s2">&#34;searchKey&#34;</span><span class="p">:</span> <span class="p">[</span><span class="n">keyword</span><span class="p">],</span>
           <span class="s2">&#34;channelCode&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;listedNotice_disc&#34;</span><span class="p">],</span>
           <span class="s2">&#34;pageSize&#34;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
           <span class="s2">&#34;pageNum&#34;</span><span class="p">:</span> <span class="n">page</span><span class="p">}</span>

<span class="c1">#发起请求</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://www.szse.cn/api/disc/announcement/annList?random=</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                     <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                     <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">payload</span><span class="p">))</span>

<span class="c1">#当data关键词有对应的非空列表，循环一直进行。</span>
<span class="k">while</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;data&#39;</span><span class="p">]:</span>
    <span class="n">payload</span><span class="p">[</span><span class="s1">&#39;pageNum&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">page</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                     <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                     <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">payload</span><span class="p">))</span>
    
    <span class="n">esgs</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">esg</span> <span class="ow">in</span> <span class="n">esgs</span><span class="p">:</span>
        <span class="c1">#以字典样式写入csv</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;pdf_link&#39;</span><span class="p">:</span> <span class="s1">&#39;http://disc.static.szse.cn/download&#39;</span><span class="o">+</span> <span class="n">esg</span><span class="p">[</span><span class="s1">&#39;attachPath&#39;</span><span class="p">],</span>
                <span class="c1">#为防止股票代码被exel等软件识别为数字，特转为字符串，并加sz标识。</span>
                <span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;sz&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;secCode&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span> 
                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">esg</span><span class="p">[</span><span class="s1">&#39;secName&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">esg</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">],</span>
                <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="n">esg</span><span class="p">[</span><span class="s1">&#39;publishTime&#39;</span><span class="p">],</span>
                <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="n">esg</span><span class="p">[</span><span class="s1">&#39;attachSize&#39;</span><span class="p">],</span>
                <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">esg</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]}</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="n">page</span> <span class="o">=</span> <span class="n">page</span> <span class="o">+</span> <span class="mi">1</span>
    
<span class="c1">#关闭csv</span>
<span class="n">csvf</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div><p><br><br></p>
<h2 id="三查看csv">三、查看csv</h2>
<p>使用pandas读取 <code>data/esg_links.csv</code>,</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;esg_links.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p><img loading="lazy" src="img/04-df.png" alt=""  />
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">4392
</code></pre></div><p>一共有4392条 「企业社会责任」 的报告数据。</p>
<p><br><br></p>
<h2 id="四批量下载">四、批量下载</h2>
<p>下载就简单多了， 直接使用定义好的爬虫代码。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="k">def</span> <span class="nf">download</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    下载多媒体及文件
</span><span class="s2">    url： 多媒体文件链接（结尾有文件格式名）
</span><span class="s2">    file: 存储文件的路径（结尾有文件格式名）
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="c1">#获取到二进制数据</span>
    <span class="n">binarydata</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">content</span>
    <span class="c1">#以二进制形式将数据流存入fname中</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">binarydata</span><span class="p">)</span> 
        

<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">for</span> <span class="n">link</span><span class="p">,</span> <span class="n">title</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;pdf_link&#39;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
    <span class="n">download</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">link</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="s1">&#39;data/</span><span class="si">{}</span><span class="s1">.pdf&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">title</span><span class="p">))</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">0 山河药辅：山河药辅2021年度社会责任报告
1 新 希 望：2021年企业社会责任报告（英文版）
2 天原股份：宜宾天原集团股份有限公司社会责任报告
3 五 粮 液：2021年度社会责任报告（英文版）
4 中兵红箭：2021年度社会责任报告	
......
......
148 苏宁环球：2021年社会责任报告
149 蓝色光标：2021年度企业社会责任报告
150 开尔新材：2021年度社会责任报告
151 中顺洁柔：2021年社会责任报告
......
......

4391 闽东电力：2006年度社会责任报告
4392  阳光发展：2006年度社会责任报告书
</code></pre></div><p>采集过程中，被封锁在所难免，所以记得每次停止采集的位置，在csv中删除该位置之前的数据。然后重新运行代码即可。</p>
<h3 id="注意">注意</h3>
<p>即时解决以上问题，可能遇到奇怪的问题。比如</p>
<p><img loading="lazy" src="img/07-error.png" alt=""  />
</p>
<p>检查发现相比其他几百kb的pdf，问题文件大小只有几kb。问题可能是被网站封锁或网络不稳定导致，标记好问题pdf的链接，重新批量下载一遍。</p>
<p><img loading="lazy" src="img/06-error.png" alt=""  />
</p>
<p><br><br></p>
<h2 id="汇总至csv">汇总至csv</h2>
<p>很多企业社会责任报告是图片合成的，所以这里的pdf体积很大。将data文件夹中的4000多个pdf汇总至esg_data.csv中，能节约出电脑内存空间，也方便后续数据分析。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pdfdocx</span> <span class="kn">import</span> <span class="n">read_pdf</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">csv</span>

<span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1">#新建esg_data.csv，用于存储企业社会责任报告数据</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;esg_data.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;a+&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvf</span><span class="p">:</span>
    <span class="n">fieldnames</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;pdf_link&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span><span class="p">,</span> <span class="s1">&#39;report_content&#39;</span><span class="p">]</span>
    <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">csvf</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">fieldnames</span><span class="p">)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">writeheader</span><span class="p">()</span>

    <span class="n">files</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="n">record_of_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">file</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.pdf&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">record_of_df</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;report_content&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">read_pdf</span><span class="p">(</span><span class="s1">&#39;data/</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
</code></pre></div><p>最后，数据从20G的data文件夹(4000多个PDF)压缩为一个170M的esg_data.csv文件。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">esg_reports_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;esg_data.csv&#39;</span><span class="p">)</span>
<span class="n">esg_reports_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p><img loading="lazy" src="img/08-esg_reports_df.png" alt=""  />
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="nb">len</span><span class="p">(</span><span class="n">esg_reports_df</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">4346
</code></pre></div><p><br><br></p>
<h2 id="五相关文献">五、相关文献</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[1]解学梅, &amp; 朱琪玮. (2021). 企业绿色创新实践如何破解 “和谐共生” 难题?. 管理世界, 37(1), 128-149.
[2]谢红军 &amp; 吕雪.(2022).负责任的国际投资：ESG与中国OFDI. 经济研究(03),83-99.
[3]Schaefer, S. D., Terlutter, R., &amp; Diehl, S. (2019). Is my company really doing good? Factors influencing employees&#39; evaluation of the authenticity of their company&#39;s corporate social responsibility engagement. Journal of business research, 101, 128-143.
</code></pre></div><p><br><br></p>
<h2 id="六其他广告">六、其他(广告)</h2>
<ul>
<li><a href="https://hidadeng.github.io/blog/call_for_paper/">长期征稿</a></li>
<li><a href="https://hidadeng.github.io/blog/we_need_you/">长期招募小伙伴</a></li>
<li><a href="https://hidadeng.github.io/blog/management_python_course/">付费视频课 | Python实证指标构建与文本分析</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>文本相似 | Lazy Prices公司年报内容变动预示重大风险</title>
      <link>https://hidadeng.github.io/blog/2019-12-08-lazy-prices/</link>
      <pubDate>Tue, 31 Dec 2019 00:00:00 +0000</pubDate>
      
      <guid>/blog/2019-12-08-lazy-prices/</guid>
      <description>description用于SEO优化</description>
      <content:encoded><![CDATA[<h2 id="文献">文献</h2>
<p>Cohen, L., Malloy, C. and Nguyen, Q., 2020. Lazy prices. <em>The Journal of Finance</em>, <em>75</em>(3), pp.1371-1415.</p>
<br>
<h2 id="摘要">摘要</h2>
<p>使用1995年-2014年所有美国公司季度和年度申报的完整历史记录，研究发现当公司对<strong>报告进行积极更改</strong>时，这种行为<strong>蕴含着</strong>公司未来运营的<strong>重要信号</strong>。</p>
<p><strong>财务报告的语言和结构的变化也对公司的未来收益产生重大影响</strong>：做空&quot;变化&quot;的公司（持有的公司，如果其报告发生变化的，做空该公司股票），买入“不变化”的公司，使用这样的投资组合策略，在2006年的每月alpha值高达1.88%的收益（每年超过22％）。报告中涉及执行官（CEO和CFO）团队的话语风格的变化，或者有关诉讼(风险部分)的话语的变化，都对投资的未来收益有重要作用。</p>
<p>研究发现，对10-K的变化可以预测未来的收益、获利能力、未来的新闻公告，甚至未来的公司破产。同时，不做任何变化的公司将获得显著的异常收益。与资产价格典型的反应不足研究不同，我们发现没有任何与这些变化相关的公告效应–仅在后来通过新闻，事件或收益披露信息时才产生回报–暗示投资者并未注意到整个公众领域的这些变化。</p>
<br>
<h2 id="研究背景">研究背景</h2>
<p>之前的研究认为，尽管投资者一次对包含重大变化的财务报表的发布作出了迅时反应，但随着时间的流逝，这种公告作用是会减弱的(Brown and Tucker, 2011 and Feldman et al., 2010)。这表示10-K报告会随着时间推移，信息价值大打折扣。尽管我们复现了这个事实，即与常规文件的变更没有重大的公告效应，但我们认为，前人的研究忽略了更重要部分(如MD&amp;A)对对资产价格的影响。</p>
<p>确切的说，<strong>并不是报告的披露效应的信息价值变低了，而是投资者越来越难以发现报告中微妙的信息变化， 比如因为报告变得越来越冗杂。投资者只有看到某些新闻后，才会逐渐意识到之前公司报告内容变化的的真正价值</strong>。</p>
<p>例如Baxter公司</p>
<ul>
<li>纽约时报在 <strong>2010年4月23日</strong> 发了一条FDA将有对输液泵(infusion pumps)更严格对审批管理规定的新闻，<strong>新闻中提到了Baxter公司</strong>。新闻公布当天，<strong>Baxter股价大跌</strong>。</li>
<li><strong>10天</strong>后的（2010年5月4日），Baxter宣布<strong>召回问题的输液泵产品</strong>，股价当天再次大跌。</li>
</ul>
<p><img loading="lazy" src="img/lazy-prices-1.png" alt=""  />
</p>
<p>两次负面新闻导致Baxter股价大跌超过20%，最有意思的是Baxter公司一个多月前（<strong>2010年2月23日</strong>）10-k报告中 <strong>提到</strong> 了与这两条新闻类似的 <strong>线索</strong>。</p>
<p><img loading="lazy" src="img/clues_from_report.png" alt=""  />
</p>
<p>截图中写着 <strong>Baxter的产品COLLEGUE未来可能面脸额外的处罚，而且相关销售面临着FDA、OIG、DOI和FTC越来越严格的审批，面临的执法强度也越来越大</strong>。</p>
<p>因纽约时报发布的消息，股价大跌。但是大跌之前Baxter的10-k报告中似乎提示未来公司可能面临的风险，但是投资者怎么没有注意到这个重要线索呢？</p>
<br>
<h2 id="数据获取与分析方法">数据获取与分析方法</h2>
<p>这篇文章用到了很多 文本数据挖掘 方法，如</p>
<ul>
<li>数据采集(报告下载和信息监测)</li>
<li>正则表达式（数据分割与抽取）</li>
<li>文本相似度(计算报告变化程度)</li>
</ul>
<p>我大致说下这几部分技术在这篇论文中的应用。</p>
<h3 id="1-数据采集">1. 数据采集</h3>
<p>这篇论文研究者认为，只有投资者意识到本期报告和上一期报告做对比，才能发现报告变化，进而对股价有影响。所以当有新公告公布后，投资者是否下载本期报告的同时顺带着下载上一期报告，下载量又是多少。</p>
<p>下载量可以从Freedom of Information Act下载，</p>
<p><img loading="lazy" src="img/download_data.png" alt=""  />
</p>
<p>可以拿到的信息包括:</p>
<ul>
<li>报告文件</li>
<li>报告下载时间</li>
<li>报告下载的IP地址(可以通过这个ip来当作投资者的id)</li>
</ul>
<br>
<h3 id="2-正则表达式">2. 正则表达式</h3>
<p>一个公司报告文件会有不同部分，我们需要将不同的部分分别识别出来。这里用到正则表达式，可以进行快速的数据清洗和数据抽取。</p>
<p><img loading="lazy" src="img/regular_expression.png" alt=""  />
</p>
<br>
<h3 id="3-文本相似度">3. 文本相似度</h3>
<p>文本转为向量后就可以进行相似度计算,</p>
<p><img loading="lazy" src="img/similar-1.png" alt=""  />

<img loading="lazy" src="img/similar-2.png" alt=""  />

<img loading="lazy" src="img/similar-3.png" alt=""  />
</p>
<p>这里使用我开发的cntext包，可以实现cosine和jaccard相似度的计算。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="n">A</span> <span class="o">=</span> <span class="s1">&#39;We expect demand to increase.&#39;</span>
<span class="n">B</span> <span class="o">=</span> <span class="s1">&#39;We expect worldwide demand to increase.&#39;</span>
<span class="n">C</span> <span class="o">=</span> <span class="s1">&#39;We expect weakness in sales&#39;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">cosine_sim</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">C</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">jaccard_sim</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">))</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">0.40
0.83
</code></pre></div><p>如果对Baxter公司多个年度对报告进行相似度计算，绘制成图就会发现2010年与前后变化很大。相似度越低，说明公司报告前后变化很大，应该引起投资者注意，如果能注意到就会避免纽约时报导致到股价暴跌。如下图</p>
<p><img loading="lazy" src="img/lazy-prices-2.png" alt=""  />
</p>
<p><br><br></p>
<h2 id="案例实现">案例实现</h2>
<p>由于没有完全一样的数据，这里使用政府工作报告数据类比，使用cosine相似度画出趋势线条。</p>
<p>使用相似性识别变化的时间点</p>
<h3 id="准备数据">准备数据</h3>
<p>政府工作报告 <a href="http://www.gov.cn/guowuyuan/zfgzbg.htm">http://www.gov.cn/guowuyuan/zfgzbg.htm</a></p>
<p>prc_reports.xlsx 链接:https://pan.baidu.com/s/1sVU3mkEcP7Z3_hbG5AVNUA 密码:zjrq</p>
<p>将下载好后的 prc_reports.xlsx 文件放置于 .ipynb文件 所在的文件夹内。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;prc_reports.xlsx&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<p><img loading="lazy" src="img/df.png" alt=""  />
</p>
<h3 id="计算相似度">计算相似度</h3>
<p>运行时间大概30s， 运算结果是列表数据 cosines</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="n">cosines</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c1">#row  Series</span>
<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">text1</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s1">&#39;report&#39;</span><span class="p">]</span>
    <span class="n">text2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s1">&#39;report2&#39;</span><span class="p">]</span>
    <span class="n">simi</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">cosine_sim</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">)</span>
    <span class="n">cosines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">simi</span><span class="p">)</span>
    
<span class="n">cosines</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[0.44&#39;, &#39;0.39&#39;, &#39;0.35&#39;, ... &#39;0.62&#39;, &#39;0.61&#39;, &#39;0.60&#39;]
</code></pre></div><h3 id="绘制柱状图">绘制柱状图</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pyecharts.charts</span> <span class="kn">import</span> <span class="n">Bar</span>
<span class="kn">from</span> <span class="nn">pyecharts</span> <span class="kn">import</span> <span class="n">options</span> <span class="k">as</span> <span class="n">opts</span>
<span class="kn">from</span> <span class="nn">pyecharts.globals</span> <span class="kn">import</span> <span class="n">CurrentConfig</span><span class="p">,</span> <span class="n">NotebookType</span>
<span class="n">CurrentConfig</span><span class="o">.</span><span class="n">NOTEBOOK_TYPE</span> <span class="o">=</span> <span class="n">NotebookType</span><span class="o">.</span><span class="n">JUPYTER_NOTEBOOK</span>

<span class="n">bar</span> <span class="o">=</span> <span class="n">Bar</span><span class="p">()</span>

<span class="n">bar</span><span class="o">.</span><span class="n">add_xaxis</span><span class="p">(</span><span class="n">xaxis_data</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">])</span>
<span class="n">bar</span><span class="o">.</span><span class="n">add_yaxis</span><span class="p">(</span><span class="s2">&#34;相似度&#34;</span><span class="p">,</span> 
               <span class="n">cosines</span><span class="p">,</span> 
               <span class="n">label_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">LabelOpts</span><span class="p">(</span><span class="n">is_show</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

<span class="n">bar</span><span class="o">.</span><span class="n">set_global_opts</span><span class="p">(</span><span class="n">title_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">TitleOpts</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&#34;政府工作报告相似度可视化&#34;</span><span class="p">))</span>
<span class="n">bar</span><span class="o">.</span><span class="n">load_javascript</span><span class="p">()</span>

<span class="n">bar</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s1">&#39;政府工作报告相似度可视化1.html&#39;</span><span class="p">)</span>
<span class="n">bar</span><span class="o">.</span><span class="n">render_notebook</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<p><img loading="lazy" src="img/vis_res.png" alt=""  />
</p>
<h3 id="解读">解读</h3>
<p>从图中可以看到除1959年异常外，其他方面能挖掘出很多信息。从相似度整体趋势，</p>
<p>1959-1992 第一阶段，
1992-至今 第二阶段</p>
<p>1992年附近，第一次确立社会主义市场经济制度。之后的岁月里一直围绕着经济建设高速发展。</p>
<p>同时也可以看出在第一阶段前期相似度异常的低，可以理解为新中国初建，百废待兴，对于建设者而言，组着和管理这个国家的政府也在学习如何建设新中国。而90年代后，相似度越来越高，体现了政府越来越熟悉如何治理国家，如何搞经济建设。</p>
<p><br><br></p>
<h2 id="广而告之">广而告之</h2>
<ul>
<li><a href="https://hidadeng.github.io/blog/call_for_paper/">长期征稿</a></li>
<li><a href="https://hidadeng.github.io/blog/we_need_you/">长期招募小伙伴</a></li>
<li><a href="https://hidadeng.github.io/blog/management_python_course/">付费视频课 | Python实证指标构建与文本分析</a></li>
</ul>
]]></content:encoded>
    </item>
    
  </channel>
</rss>
