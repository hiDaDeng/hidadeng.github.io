<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Rè¯­è¨€ on å¤§é‚“å’Œä»–çš„PYTHON</title>
    <link>/tags/r%E8%AF%AD%E8%A8%80/</link>
    <description>Recent content in Rè¯­è¨€ on å¤§é‚“å’Œä»–çš„PYTHON</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Fri, 02 Jun 2023 00:00:00 +0000</lastBuildDate><atom:link href="/tags/r%E8%AF%AD%E8%A8%80/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>å¯è§†åŒ– | ä½¿ç”¨ggdagåŒ…ç»˜åˆ¶æœ‰å‘å›¾</title>
      <link>https://textdata.cn/blog/2023-06-02-r-ggdag/</link>
      <pubDate>Fri, 02 Jun 2023 00:00:00 +0000</pubDate>
      
      <guid>/blog/2023-06-02-r-ggdag/</guid>
      <description>åœ¨tidyverseç¯å¢ƒä¸­ä½¿ç”¨ggdagå¯ä»¥è½»æ¾åœ°ä½¿ç”¨dagittyã€‚æ‚¨å¯ä»¥ç›´æ¥æ•´ç†dagittyå¯¹è±¡ï¼Œæˆ–ä½¿ç”¨æ–¹ä¾¿çš„å‡½æ•°ä½¿ç”¨æ›´æ¥è¿‘Rè¯­è¨€é£æ ¼çš„è¯­æ³•åˆ›å»ºDAGsã€‚</description>
      <content:encoded><![CDATA[<p>åœ¨tidyverseç¯å¢ƒä¸­ä½¿ç”¨ggdagå¯ä»¥è½»æ¾åœ°ä½¿ç”¨dagittyã€‚æ‚¨å¯ä»¥ç›´æ¥æ•´ç†dagittyå¯¹è±¡ï¼Œæˆ–ä½¿ç”¨æ–¹ä¾¿çš„å‡½æ•°ä½¿ç”¨æ›´æ¥è¿‘Rè¯­è¨€é£æ ¼çš„è¯­æ³•åˆ›å»ºDAGsã€‚</p>
<p><br><br></p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">install.packages(&#34;ggdag&#34;)
</code></pre></div><p><br><br></p>
<h2 id="ä»£ç ">ä»£ç </h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-R" data-lang="R"><span class="nf">library</span><span class="p">(</span><span class="n">dagitty</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">ggdag</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span>

<span class="n">dag</span> <span class="o">&lt;-</span> <span class="nf">dagitty</span><span class="p">(</span><span class="s">&#34;dag{y &lt;- z -&gt; x}&#34;</span><span class="p">)</span>
<span class="nf">tidy_dagitty</span><span class="p">(</span><span class="n">dag</span><span class="p">)</span>
</code></pre></div><p><img loading="lazy" src="img/df.png" alt=""  />
</p>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">ggdag</span><span class="p">(</span><span class="n">dag</span><span class="p">,</span> <span class="n">layout</span> <span class="o">=</span> <span class="s">&#34;circle&#34;</span><span class="p">)</span>
</code></pre></div><p><img loading="lazy" src="img/1.png" alt=""  />
</p>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">ggdag</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span>

<span class="c1">#  example from the dagitty package</span>
<span class="n">dag</span> <span class="o">&lt;-</span> <span class="n">dagitty</span><span class="o">::</span><span class="nf">dagitty</span><span class="p">(</span><span class="s">&#34;dag {
</span><span class="s">    y &lt;- x &lt;- z1 &lt;- v -&gt; z2 -&gt; y
</span><span class="s">    z1 &lt;- w1 &lt;-&gt; w2 -&gt; z2
</span><span class="s">    x &lt;- w1 -&gt; y
</span><span class="s">    x &lt;- w2 -&gt; y
</span><span class="s">    x [exposure]
</span><span class="s">    y [outcome]
</span><span class="s">  }&#34;</span><span class="p">)</span>

<span class="n">tidy_dag</span> <span class="o">&lt;-</span> <span class="nf">tidy_dagitty</span><span class="p">(</span><span class="n">dag</span><span class="p">)</span>
<span class="nf">ggdag</span><span class="p">(</span><span class="n">tidy_dag</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">theme_dag</span><span class="p">()</span>
</code></pre></div><p><img loading="lazy" src="img/2.png" alt=""  />
</p>
<p><br><br></p>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Rè¯­è¨€ | ä½¿ç”¨word2vecè¯å‘é‡æ¨¡å‹</title>
      <link>https://textdata.cn/blog/2022-10-12-r-word2vec/</link>
      <pubDate>Wed, 12 Oct 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-10-12-r-word2vec/</guid>
      <description>Rè¯­è¨€è®­ç»ƒå’Œä½¿ç”¨è¯å‘é‡word2vecæ¨¡å‹</description>
      <content:encoded><![CDATA[


<p>Pythonçš„gensimåº“å¯ä»¥è®­ç»ƒå’Œä½¿ç”¨word2vecæ¨¡å‹ï¼ŒRè¯­è¨€ä¸­ä¹Ÿæœ‰ä¸ä¹‹å¯¹åº”çš„<code>word2vecåŒ…</code>ã€‚word2vecæ˜¯è¯åµŒå…¥æŠ€æœ¯ä¸­æœ€å¸¸ç”¨çš„ä¸€ç§æŠ€æœ¯ï¼Œå¦‚æœå¯¹è¯åµŒå…¥ä¸å¤ªäº†è§£ï¼Œå¯ä»¥é˜…è¯»å‰æ–‡</p>
<ul>
<li><a href="https://textdata.cn/blog/wordembeddingsinsocialscience/">è½¬è½½ | å¤§æ•°æ®æ—¶ä»£ä¸‹ç¤¾ä¼šç§‘å­¦ç ”ç©¶æ–¹æ³•çš„æ‹“å±•â€”â€”åŸºäºè¯åµŒå…¥æŠ€æœ¯çš„æ–‡æœ¬åˆ†æçš„åº”ç”¨</a></li>
<li><a href="https://textdata.cn/blog/from_sysbol_to_embeddings_in_computational_social_science/">è½¬è½½ | ä»ç¬¦å·åˆ°åµŒå…¥ï¼šè®¡ç®—ç¤¾ä¼šç§‘å­¦çš„ä¸¤ç§æ–‡æœ¬è¡¨ç¤º</a></li>
</ul>
<p>æœ¬æ–‡éœ€è¦çš„RåŒ…</p>
<pre><code>install.packages(c(&quot;word2vec&quot;, &quot;jiebaR&quot;, &quot;tidyverse&quot;, &quot;readtext&quot;))</code></pre>
<p><br></p>
<div id="word2vecåŒ…å¸¸ç”¨å‡½æ•°" class="section level2">
<h2>word2vecåŒ…å¸¸ç”¨å‡½æ•°</h2>
<ul>
<li>word2vec ä½¿ç”¨æ–‡æœ¬æ•°æ®è®­ç»ƒword2vecæ¨¡å‹</li>
<li>as.matrix è·å–è¯å‘é‡</li>
<li>doc2vec è·å–æ–‡æ¡£å‘é‡</li>
<li>predict è·å–</li>
<li>write.word2vec ä¿å­˜word2vecæ¨¡å‹è‡³æ–‡ä»¶</li>
<li>read.word2vec è¯»å–word2vecæ¨¡å‹æ–‡ä»¶</li>
</ul>
<p><br></p>
</div>
<div id="å‡†å¤‡æ•°æ®" class="section level2">
<h2>å‡†å¤‡æ•°æ®</h2>
<p>åŸå§‹æ•°æ®æ˜¯ä»ç½‘ç«™ä¸‹è½½çš„ <code>ä¸‰ä½“.txt</code>, æœªåˆ†è¯å¤„ç†ï¼Œç°åœ¨éœ€è¦</p>
<ol style="list-style-type: decimal">
<li>è¯»ä¸­æ–‡å–txtæ•°æ®</li>
<li>ä¿ç•™æ ‡ç‚¹ç¬¦å·ï¼Œè¿›è¡Œåˆ†è¯å¤„ç†</li>
<li>åˆ†è¯ç»“æœé‡æ–°æ•´ç†ä¸ºç±»ä¼¼è‹±æ–‡(ç©ºæ ¼é—´éš”è¯è¯­çš„å½¢å¼)å­—ç¬¦ä¸²</li>
<li>ç»“æœå­˜å…¥æ–°çš„txt</li>
</ol>
<pre class="r"><code>library(jiebaR)
library(tidyverse)
library(word2vec)


#å¯¼å…¥æ•°æ®
tri_body &lt;- readtext::readtext(&#39;data/ä¸‰ä½“.txt&#39;)$text 

#åˆ†è¯ï¼ˆä¿ç•™æ ‡ç‚¹ç¬¦å·ï¼‰
tokenizer &lt;- worker(symbol=T)
tri_words &lt;- segment(tri_body, tokenizer)

# æ•´ç†ä¸ºè‹±æ–‡æ ¼å¼ï¼ˆè¯è¯­ä¹‹é—´åŠ ç©ºæ ¼ï¼‰
segmented_text &lt;- stringr::str_c(tri_words, collapse = &quot; &quot;) %&gt;% c()

#å†™å…¥txt
readr::write_file(segmented_text, file=&#39;data/santi.txt&#39;)</code></pre>
<p><br></p>
</div>
<div id="è®­ç»ƒword2vecæ¨¡å‹" class="section level2">
<h2>è®­ç»ƒword2vecæ¨¡å‹</h2>
<pre><code>word2vec(
  x,
  type = c(&quot;cbow&quot;, &quot;skip-gram&quot;),
  dim = 50,
  window = ifelse(type == &quot;cbow&quot;, 5L, 10L),
  iter = 5L,
  lr = 0.05,
  min_count = 5L,
  split = c(&quot; \n,.-!?:;/\&quot;#$%&amp;&#39;()*+&lt;=&gt;@[]\\^_`{|}~\t\v\f\r&quot;, &quot;.\n?!&quot;),
  stopwords = character(),
  threads = 1L,
  ...
)</code></pre>
<ul>
<li>x è‹±æ–‡æ–‡æœ¬æ•°æ®txtæ–‡ä»¶(ä¸­æ–‡æ•°æ®txtæ–‡ä»¶æ˜¯åˆ†è¯åçš„txtæ–‡ä»¶ï¼Œç©ºæ ¼é—´éš”è¯è¯­)</li>
<li>type è®­ç»ƒæ–¹å¼ï¼Œé»˜è®¤CBOW</li>
<li>dim è¯å‘é‡ç»´åº¦ï¼Œé»˜è®¤50ç»´</li>
<li>window è¯å‘é‡çª—å£ï¼Œé»˜è®¤5</li>
<li>iter è®­ç»ƒè¿­ä»£æ¬¡æ•°ï¼Œé»˜è®¤5</li>
<li>split åˆ†è¯ã€åˆ†å¥å¯¹åº”çš„åˆ†éš”ç¬¦ã€‚</li>
<li>lr å­¦ä¹ ç‡ï¼Œé»˜è®¤0.05</li>
<li>min_count è¯è¯­åœ¨è¯­æ–™ä¸­è‡³å°‘è¦å‡ºç°5æ¬¡(ä½äº5æ¬¡çš„è¯è¯­ï¼Œè®­ç»ƒå¥½çš„ç»“æœä¸­æ²¡æœ‰è¯¥è¯è¯­ï¼‰</li>
<li>stopwords åœç”¨è¯è¡¨ï¼Œé»˜è®¤ç©ºå­—ç¬¦é›†</li>
<li>threads å¹¶è¡ŒåŠ é€Ÿï¼Œcpuæ ¸æ•°ï¼Œé»˜è®¤1ã€‚ä¸ºäº†åŠ é€Ÿè®­ç»ƒè¿‡ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨ <code>parallel::detectCores()</code> è·å¾—æœ¬ç”µè„‘çš„æ ¸æ•°</li>
</ul>
<pre class="r"><code>#è®­ç»ƒ10ç»´çš„è¯å‘é‡æ¨¡å‹
model &lt;- word2vec(x = &#39;data/santi.txt&#39;, 
                  dim = 10,  
                  iter = 20, 
                  split = c(&quot; &quot;,  &quot;ã€‚ï¼Ÿï¼ï¼›&quot;),
                  threads = parallel::detectCores()) #å¹¶è¡Œï¼Œä½¿ç”¨cpuå¤šæ ¸åŠ é€Ÿ

emb &lt;- as.matrix(model)

#æ˜¾ç¤º6ä¸ªè¯
head(emb)</code></pre>
<pre><code>##             [,1]       [,2]        [,3]        [,4]      [,5]        [,6]
## ç…®   -1.02566934 -0.9271542 -0.42417252 -0.54280633 1.8847700  0.41640753
## æŠ¥   -0.83992052  1.9440031  0.09093992  0.83522910 1.7909089  0.72149992
## æ‚¬ç©º -0.06369513 -1.3519955 -2.13137460 -0.06198586 0.6096401  1.32933748
## ç•¥    1.74687469 -0.4278547 -0.33822438  1.08505321 2.0168977 -0.07693915
## ä¼   -0.68947995 -1.4147453 -1.95522511 -0.39963767 0.5269030  0.30352208
## çŸ³æŸ± -0.40561640 -1.3643234  0.30329546 -0.94012892 2.1579018  0.79654717
##            [,7]       [,8]       [,9]      [,10]
## ç…®   -1.1708908 -0.7624418 -0.6275516  1.2417521
## æŠ¥    0.5235919  0.8448864 -0.2960095 -0.0773837
## æ‚¬ç©º  0.1527163 -0.1337370 -0.1646384  1.1892601
## ç•¥   -0.3246748 -0.9813624  0.5045205  0.2771466
## ä¼    0.3166684 -1.4238008 -1.0167172 -0.0976937
## çŸ³æŸ±  0.2237919  0.6933151  0.7412233 -0.7918702</code></pre>
<p><br></p>
</div>
<div id="æŸ¥çœ‹æŸè¯çš„vector" class="section level2">
<h2>æŸ¥çœ‹æŸè¯çš„vector</h2>
<p>æŸ¥çœ‹è¯è¯­ <code>æ±ªæ·¼</code> çš„vector</p>
<pre class="r"><code>emb[&quot;æ±ªæ·¼&quot;,]</code></pre>
<pre><code>##  [1] -0.77559733 -0.90021265  0.66555792 -0.10277803  1.89924443 -0.88817298
##  [7] -1.32665634 -0.75938725 -0.09628224  1.18008399</code></pre>
<p>æŸ¥çœ‹è¯è¯­ <code>åœ°çƒ</code> çš„vector</p>
<pre class="r"><code>emb[&quot;åœ°çƒ&quot;,]</code></pre>
<pre><code>##  [1]  0.29645494 -0.61688840  0.91209215 -0.64530188  0.62816381 -0.72807491
##  [7]  0.50655973  2.38137436  1.19238114 -0.09610342</code></pre>
<p><br></p>
</div>
<div id="predict" class="section level2">
<h2>predict()</h2>
<p>æ‰¾åˆ°è¯­æ–™ä¸­ï¼Œè¯è¯­ <code>ç½—è¾‘</code> æœ€ç›¸ä¼¼çš„ 20ä¸ªè¯</p>
<pre class="r"><code>predict(model, &#39;ç½—è¾‘&#39;, type=&#39;nearest&#39;, top_n = 20)</code></pre>
<pre><code>## $ç½—è¾‘
##    term1    term2 similarity rank
## 1   ç½—è¾‘     èƒ¡æ–‡  0.9744400    1
## 2   ç½—è¾‘   ç”³ç‰è²  0.9678891    2
## 3   ç½—è¾‘   ç“¦å­£å§†  0.9550550    3
## 4   ç½—è¾‘ ç‹„å¥¥ä¼¦å¨œ  0.9518393    4
## 5   ç½—è¾‘     è“è¥¿  0.9472395    5
## 6   ç½—è¾‘     æŠ¤å£«  0.9471439    6
## 7   ç½—è¾‘   æ³•æ‰å…°  0.9458703    7
## 8   ç½—è¾‘   ç™½è‰¾æ€  0.9451101    8
## 9   ç½—è¾‘     åç‰¹  0.9396626    9
## 10  ç½—è¾‘     ç™½è“‰  0.9387447   10
## 11  ç½—è¾‘   å‚è°‹é•¿  0.9377206   11
## 12  ç½—è¾‘   å¼—é›·æ–¯  0.9369408   12
## 13  ç½—è¾‘   ç¬¬ä¸€çœ¼  0.9357565   13
## 14  ç½—è¾‘     çˆ¶äº²  0.9350463   14
## 15  ç½—è¾‘   å¤šå°‘æ¬¡  0.9314436   15
## 16  ç½—è¾‘     é—¨å»  0.9291503   16
## 17  ç½—è¾‘     ç»´å¾·  0.9267251   17
## 18  ç½—è¾‘     è¤èš  0.9203902   18
## 19  ç½—è¾‘       åˆš  0.9200501   19
## 20  ç½—è¾‘     å´å²³  0.9191605   20</code></pre>
<p>æŸ¥çœ‹å‡å€¼å‘é‡ï¼ˆå¤šä¸ªè¯å‘é‡ä¸­å¿ƒçš„ï¼‰çš„10ä¸ªè¿‘ä¹‰è¯</p>
<pre class="r"><code>vectors &lt;- emb[c(&quot;æ±ªæ·¼&quot;, &quot;ç½—è¾‘&quot;, &quot;å¶æ–‡æ´&quot;), ]
centroid_vector &lt;- colMeans(vectors)

predict(model, centroid_vector, type = &quot;nearest&quot;, top_n = 10)</code></pre>
<pre><code>##        term similarity rank
## 1      ç½—è¾‘  0.9185568    1
## 2  ç‹„å¥¥ä¼¦å¨œ  0.9104245    2
## 3      æ–‡æ´  0.9088279    3
## 4      æ±ªæ·¼  0.9054156    4
## 5    ç™½è‰¾æ€  0.9046930    5
## 6      å¼ ç¿”  0.9026827    6
## 7      å°´å°¬  0.8952187    7
## 8      åº„é¢œ  0.8952166    8
## 9      çš‡å¸  0.8949283    9
## 10     çˆ¶äº²  0.8915347   10</code></pre>
<p><br></p>
</div>
<div id="doc2vec" class="section level2">
<h2>doc2vec()</h2>
<ul>
<li>doc2vec(object, newdata, split = â€ â€œ)
<ul>
<li>object word2vecæ¨¡å‹å¯¹è±¡</li>
<li>newdata æ–‡æ¡£åˆ—è¡¨(ç”¨ç©ºæ ¼é—´éš”çš„å­—ç¬¦ä¸²åˆ—è¡¨)</li>
<li>split é»˜è®¤åˆ†éš”ç¬¦æ˜¯ç©ºæ ¼</li>
</ul></li>
</ul>
<p>å°†æ–‡æ¡£è½¬ä¸ºå‘é‡</p>
<pre class="r"><code>docs &lt;- c(&quot;å“¦ ï¼Œ å¯¹ä¸èµ· ï¼Œ æ±ª æ•™æˆ ã€‚ è¿™æ˜¯ æˆ‘ä»¬ å²å¼º é˜Ÿé•¿ ã€‚&quot;, 
          &quot; ä¸ä»ª åšå£« ï¼Œ æ‚¨ èƒ½å¦ æŠŠ æ¨å†¬ çš„ é—ä¹¦ ç»™ æ±ª æ•™æˆ çœ‹ ä¸€ä¸‹ ï¼Ÿ &quot;)

doc2vec(object=model, newdata = docs, split=&#39; &#39;)</code></pre>
<pre><code>##            [,1]       [,2]       [,3]     [,4]      [,5]       [,6]       [,7]
## [1,] -1.1769752 -0.1065619  0.1983950 1.734068 0.5478012 -0.8320528 -0.2387014
## [2,] -0.4827189  0.0664595 -0.2119484 1.895074 0.6729840 -0.3008853 -0.6857539
##            [,8]      [,9]      [,10]
## [1,] -0.5519856 -2.007002  0.4182127
## [2,] -0.5976922 -2.130454 -0.4653725</code></pre>
<p><br></p>
</div>
<div id="ä¿å­˜word2vecæ¨¡å‹" class="section level2">
<h2>ä¿å­˜word2vecæ¨¡å‹</h2>
<p>ä¿å­˜æ¨¡å‹ï¼Œä¸€èˆ¬æœ‰ä¸¤ä¸ªç›®çš„</p>
<ul>
<li>ä¸ºäº†åˆ†äº«word2vecæ¨¡å‹</li>
<li>é¿å…åå¤è®­ç»ƒæ¨¡å‹ï¼ŒèŠ‚çº¦æ•°æ®åˆ†ææ—¶é—´</li>
</ul>
<pre class="r"><code>word2vec::write.word2vec(x = model, 
                         #æ–°å»ºoutputæ–‡ä»¶å¤¹ï¼Œå°†æ¨¡å‹å­˜å…¥outputæ–‡ä»¶å¤¹å†…
                         file = &quot;output/santi_word2vec.bin&quot;)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p><br></p>
</div>
<div id="å¯¼å…¥é¢„è®­ç»ƒæ¨¡å‹" class="section level2">
<h2>å¯¼å…¥é¢„è®­ç»ƒæ¨¡å‹</h2>
<p>å¯¼å…¥ <code>output/santi_word2vec.bin</code> çš„é¢„è®­ç»ƒword2vecæ¨¡å‹</p>
<pre class="r"><code>pre_trained_model &lt;- word2vec::read.word2vec(file = &quot;output/santi_word2vec.bin&quot;)
pre_trained_emb &lt;- as.matrix(pre_trained_model)
head(pre_trained_emb)</code></pre>
<pre><code>##              [,1]       [,2]       [,3]       [,4]       [,5]        [,6]
## å›è¡   -1.9563367 -0.3099073 -1.2969902 -0.5719763  1.1507142 -0.05515177
## å¬è¯ä¼š  0.2756990  1.3702289 -1.3303705 -0.1827691  0.6622804 -1.92008448
## çº²é¢†    0.4495552  1.9311246 -0.5812275 -0.1470096 -0.2678985 -0.01694358
## å¾ˆäº®    0.3621844 -1.0048453  0.7036168 -2.0917876  0.6459805  1.18436253
## ç§’      1.9033701  1.6510324 -0.2616904  0.3671210  1.0618066  0.06588747
## æ°æ£®   -1.2904713 -1.2501229  0.3380587  0.8590797  1.6798494 -0.58775252
##              [,7]       [,8]       [,9]      [,10]
## å›è¡    1.1082711 -0.2064489 -0.9264346 -0.7816723
## å¬è¯ä¼š -1.0952694  0.6120903 -0.1326561  0.7252344
## çº²é¢†   -0.6097277  2.1051276 -0.2405726 -0.8808851
## å¾ˆäº®    0.1964065 -1.3926132 -0.4042619 -0.1645472
## ç§’     -0.8347995  0.2591044  0.3594093  1.1929117
## æ°æ£®    0.4941484 -1.1393189 -0.4687541  0.9951217</code></pre>
</div>
]]></content:encoded>
    </item>
    
    <item>
      <title>Rè¯­è¨€ | ä½¿ç”¨shinyçš„reactiveè¡¨è¾¾å¼å†™åº”ç”¨ç¨‹åº</title>
      <link>https://textdata.cn/blog/2022-10-07-r-shiny-reactive/</link>
      <pubDate>Fri, 07 Oct 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-10-07-r-shiny-reactive/</guid>
      <description>ä½¿ç”¨shinyçš„reactiveè¡¨è¾¾å¼å†™åº”ç”¨ç¨‹åº</description>
      <content:encoded><![CDATA[<blockquote>
<p>ä½œè€…: çŒ«å“¥</p>
<p>æ³¢æ©å¤§å­¦ç»æµå­¦ä¸“ä¸šï¼Œ è®¡é‡ç»æµå­¦æ–¹å‘</p>
</blockquote>
<p>åœ¨ä¹‹å‰çš„æ¨æ–‡ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•åœ¨Rè¯­è¨€ä¸­ï¼Œç”¨ShinyåŒ…ç¼–å†™åº”ç”¨ç¨‹åºAppã€‚åœ¨è¿™ç¯‡æ¨æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†è¦ä»‹ç»ShinyåŒ…ä¸­ä¸€ç±»ç‹¬ç‰¹ä¸”é‡è¦çš„è¡¨è¾¾å¼ï¼šreactive expressionsã€‚</p>
<p>åœ¨è®¾è®¡Appæ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›Appèƒ½å¤Ÿæœ‰è¾ƒå¿«çš„å“åº”é€Ÿåº¦ã€‚ä½†æ˜¯ï¼Œå¦‚æœAppçš„serverå‡½æ•°ä¸­åŒ…å«å¾ˆå¤šè€—æ—¶è¾ƒé•¿çš„è¿ç®—ï¼Œé‚£ä¹ˆåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæ­¤æ—¶ï¼Œå°±éœ€è¦ç”¨åˆ°Reactiveè¡¨è¾¾å¼ã€‚å®ƒèƒ½å¤Ÿæ§åˆ¶ç¨‹åºä¸­å“ªäº›éƒ¨åˆ†éœ€è¦æ›´æ–°è¿ç®—ï¼Œè€Œå“ªäº›éƒ¨åˆ†ä¸éœ€è¦æ›´æ–°ï¼Œä»è€ŒèŠ‚çœè¿ç®—æ—¶é—´ã€‚</p>
<br>
<h2 id="æ¡ˆä¾‹stockvis">æ¡ˆä¾‹ï¼šstockVis</h2>
<p>æ­¤å¤„ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¥è®²è§£reactiveè¡¨è¾¾å¼ã€‚ä¸‹å›¾æ˜¯stockVisçš„Appç•Œé¢ï¼Œè¿™ä¸ªAppèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·æç»˜ç›¸åº”è‚¡ç¥¨çš„ä»·æ ¼å˜åŠ¨ã€‚æ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥æ ¹æ®<a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson6/">æ­¤å¤„</a>çš„æç¤ºä¸‹è½½è¯¥Appã€‚</p>
<p><img loading="lazy" src="img/%e5%9b%be1.png" alt=""  />
</p>
<p>æ ¹æ®ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œç”¨æˆ·éœ€è¦é¦–å…ˆé€‰æ‹©è‚¡ç¥¨ï¼ˆSymbolï¼‰ï¼Œç„¶åé€‰æ‹©è§‚å¯Ÿæ—¶æœŸ(Data range)ï¼Œå†é€‰æ‹©ç»˜åˆ¶åŸè‚¡ç¥¨ä»·æ ¼è¿˜æ˜¯å¯¹æ•°åŒ–åçš„è‚¡ç¥¨ä»·æ ¼ï¼Œæœ€åå†é€‰æ‹©æ˜¯å¦è‚¡ä»·ä¸­çš„é€šèƒ€è¿›è¡ŒçŸ«æ­£ã€‚</p>
<p>åœ¨å¯¹è¿™äº›é€‰é¡¹è¿›è¡Œäº†é€‰æ‹©ä¹‹åï¼ŒstockVisé¦–å…ˆç”¨<code>getSymbols</code>å‡½æ•°ä»è¯¸å¦‚<a href="https://consent.yahoo.com/v2/collectConsent?sessionId=3_cc-session_b4231433-d1e7-4b31-8341-a7d413ea7922">Yahoo finance</a>å’Œ<a href="https://fred.stlouisfed.org">Federal Reserve Bank of St. Louis</a>è¿™æ ·çš„ç½‘ç«™ä¸­ä¸‹è½½é‡‘èæ•°æ®åˆ°Rï¼Œç„¶åå†ç”¨<code>chartSeries</code>å°†è‚¡ä»·æç»˜å‡ºæ¥ã€‚</p>
<p>serverå‡½æ•°ä¸­ï¼Œç”¨æ¥ç”Ÿæˆå›¾å½¢çš„ç¨‹åºå¦‚ä¸‹ã€‚åœ¨åˆ†æäº†è¯¥ç¨‹åºä¹‹åï¼Œæˆ‘ä»¬ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ã€‚æ¯”å¦‚ï¼Œå½“æˆ‘ä»¬é‡æ–°é€‰ä¸­â€œPlot y axis on the log scaleâ€ï¼Œé‚£ä¹ˆ<code>input$log</code>çš„å€¼å°±ä¼šå˜åŒ–ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´æ•´ä¸ª<code>renderPlot</code>é‡æ–°è¿›è¡Œè¿ç®—ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="n">output</span><span class="o">$</span><span class="n">plot</span> <span class="o">&lt;-</span> <span class="nf">renderPlot</span><span class="p">({</span>
  <span class="n">data</span> <span class="o">&lt;-</span> <span class="nf">getSymbols</span><span class="p">(</span><span class="n">input</span><span class="o">$</span><span class="n">symb</span><span class="p">,</span> <span class="n">src</span> <span class="o">=</span> <span class="s">&#34;yahoo&#34;</span><span class="p">,</span>
                     <span class="n">from</span> <span class="o">=</span> <span class="n">input</span><span class="o">$</span><span class="n">dates[1]</span><span class="p">,</span>
                     <span class="n">to</span> <span class="o">=</span> <span class="n">input</span><span class="o">$</span><span class="n">dates[2]</span><span class="p">,</span>
                     <span class="n">auto.assign</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>

  <span class="nf">chartSeries</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">theme</span> <span class="o">=</span> <span class="nf">chartTheme</span><span class="p">(</span><span class="s">&#34;white&#34;</span><span class="p">),</span>
              <span class="n">type</span> <span class="o">=</span> <span class="s">&#34;line&#34;</span><span class="p">,</span> <span class="n">log.scale</span> <span class="o">=</span> <span class="n">input</span><span class="o">$</span><span class="n">log</span><span class="p">,</span> <span class="n">TA</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div><p>è€Œ<code>renderPlot</code>æ¯æ¬¡é‡æ–°è¿ç®—æ—¶ï¼Œé¦–å…ˆä¼šé‡æ–°ç”¨<code>getSymbols</code>æŠ“å»æ•°æ®ï¼Œç„¶åç”¨<code>chartSeries</code>é‡æ–°ç”»å›¾ã€‚ç„¶è€Œï¼Œç”¨<code>getSymbols</code>ä»Yahooç­‰ç½‘ç«™æŠ“å–æ•°æ®æ‰€èŠ±è´¹çš„æ—¶é—´å¹¶ä¸æ˜¯å¯ä»¥å¿½ç•¥ä¸è®¡çš„ã€‚å¦å¤–ï¼Œå¦‚æœæŠ“å–çš„è¿‡äºé¢‘ç¹ï¼Œæˆ‘ä»¬çš„IPåœ°å€ä¼šè¢«å±è”½ï¼Œè¿™æ˜¯ç½‘ç«™å°†æˆ‘ä»¬é”™åˆ¤ä¸ºæœºå™¨äººï¼Œä¹Ÿæ˜¯ç½‘ç«™åº”å¯¹çˆ¬è™«çš„å¸¸ç”¨åšæ³•ã€‚æœ€å…³é”®çš„æ˜¯ï¼Œå½“æˆ‘ä»¬åªæ˜¯é‡æ–°é€‰æ‹©â€œPlot y axis on the log scaleâ€ï¼Œæˆ‘ä»¬å¹¶ä¸å¸Œæœ›é‡æ–°æŠ“å–æ•°æ®ï¼Œè€Œæ˜¯å¸Œæœ›åœ¨åŸæœ‰æ•°æ®çš„åŸºç¡€ä¸Šå¯¹æ•°åŒ–å³å¯ã€‚</p>
<br>
<h2 id="reactiveè¡¨è¾¾å¼">Reactiveè¡¨è¾¾å¼</h2>
<p>åœ¨é‡åˆ°ä¸Šè¿°é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°reactiveè¡¨è¾¾å¼ã€‚reactiveè¡¨è¾¾å¼ä»¥uiå‡½æ•°é‡Œå„ç§inputå˜é‡ä½œä¸ºè¾“å…¥ã€‚å¦‚ä¸‹ï¼Œreactiveè¡¨è¾¾å¼çš„è¾“å…¥åˆ™æ˜¯<code>input$symb</code>å’Œ<code>input$dates</code>ã€‚å½“<code>input$symb</code>å’Œ<code>input$dates</code>çš„å€¼å˜åŒ–æ—¶ï¼Œæ­¤å¤„reactiveè¡¨è¾¾å¼çš„è¾“å‡ºç»“æœæ‰ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè€Œä¸å—<code>input$log</code>çš„å½±å“ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="n">dataInput</span> <span class="o">&lt;-</span> <span class="nf">reactive</span><span class="p">({</span>
  <span class="nf">getSymbols</span><span class="p">(</span><span class="n">input</span><span class="o">$</span><span class="n">symb</span><span class="p">,</span> <span class="n">src</span> <span class="o">=</span> <span class="s">&#34;yahoo&#34;</span><span class="p">,</span>
    <span class="n">from</span> <span class="o">=</span> <span class="n">input</span><span class="o">$</span><span class="n">dates[1]</span><span class="p">,</span>
    <span class="n">to</span> <span class="o">=</span> <span class="n">input</span><span class="o">$</span><span class="n">dates[2]</span><span class="p">,</span>
    <span class="n">auto.assign</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬ç°åœ¨ç”¨ä¸Šé¢çš„reactiveè¡¨è¾¾å¼æ›´æ–°åŸå…ˆçš„ç¨‹åºï¼Œå¾—åˆ°å¦‚ä¸‹ç¨‹åºã€‚<code>dataInput()</code>å‘½ä»¤åˆ™æ˜¯è¿è¡Œå¦‚ä¸Šçš„reactiveè¡¨è¾¾å¼ã€‚æ­¤æ—¶ï¼Œå¦‚æœæˆ‘ä»¬åªé‡æ–°é€‰æ‹©&quot;Plot y axis on the log scale&quot;ï¼Œé‚£ä¹ˆreactiveè¡¨è¾¾å¼é‡Œçš„æ•°æ®æŠ“å–è¿‡ç¨‹å¹¶ä¸ä¼šæ›´æ–°ï¼Œè€Œåªæœ‰<code>renderPlot</code>é‡Œçš„<code>log.scale</code>å‚æ•°ä¼šæ›´æ–°ï¼Œè¿™å°†èŠ‚çœç¨‹åºè¿è¡Œæ—¶é—´ï¼Œè€Œä¸”å‡å°‘æ•°æ®æŠ“å–æ¬¡æ•°ï¼Œé˜²æ­¢IPåœ°å€è¢«å°ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="n">output</span><span class="o">$</span><span class="n">plot</span> <span class="o">&lt;-</span> <span class="nf">renderPlot</span><span class="p">({</span>    
  <span class="nf">chartSeries</span><span class="p">(</span><span class="nf">dataInput</span><span class="p">(),</span> <span class="n">theme</span> <span class="o">=</span> <span class="nf">chartTheme</span><span class="p">(</span><span class="s">&#34;white&#34;</span><span class="p">),</span>
    <span class="n">type</span> <span class="o">=</span> <span class="s">&#34;line&#34;</span><span class="p">,</span> <span class="n">log.scale</span> <span class="o">=</span> <span class="n">input</span><span class="o">$</span><span class="n">log</span><span class="p">,</span> <span class="n">TA</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div><p>reactiveè¡¨è¾¾å¼ä¸æ­¢<code>reactive()</code>ï¼Œè¿˜åŒ…æ‹¬<code>observe()</code>, <code>observeEvent()</code>å’Œ<code>eventReactive()</code>ç­‰ç­‰ï¼Œè¯¦è§<a href="https://shiny.rstudio.com/reference/shiny/1.6.0/">æ­¤å¤„</a>ã€‚å¦å¤–ï¼Œreactiveè¡¨è¾¾å¼åªèƒ½åŒ…è£…åœ¨ç‰¹å®šçš„ã€å…è®¸reactiveè¡¨è¾¾å¼çš„å‡½æ•°ä¸­ï¼Œå¦‚æ­¤å¤„çš„<code>renderPlot</code>ï¼Œè€Œä¸èƒ½è¢«åŒ…è£…åœ¨<code>plot</code>å‡½æ•°ä¸­ã€‚<code>render*</code>ç±»å‡½æ•°éƒ½å…è®¸reactiveè¡¨è¾¾å¼ã€‚</p>
<br>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>Reactiveè¡¨è¾¾å¼çš„åŠŸèƒ½å¯è¢«ç®€å•åœ°æ€»ç»“ä¸ºä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ul>
<li>å½“ä½ ç¬¬ä¸€æ¬¡è¿è¡Œç¨‹åºæ—¶ï¼Œreactiveè¡¨è¾¾å¼ä¼šç¼“å­˜è¿è¡Œç»“æœã€‚</li>
<li>å½“ä½ ä¸‹ä¸€æ¬¡è¿è¡Œç¨‹åºæ—¶ï¼Œreactiveè¡¨è¾¾å¼ä¼šè‡ªåŠ¨æ£€æµ‹è¾“å…¥å€¼æ˜¯å¦æ˜¯æœ€æ–°çš„ã€‚åœ¨ä¸Šä¾‹ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´è¾“å…¥çš„<code>input$symb</code>å’Œ<code>input$dates</code>æ˜¯å¦æœ‰å˜åŒ–ã€‚</li>
<li>å¦‚æœæœ‰å˜åŒ–ï¼Œåˆ™reactiveä¼šæ ¹æ®æ–°è¾“å…¥å€¼æ›´æ–°ç»“æœã€‚</li>
<li>å¦‚æœæ²¡å˜åŒ–ï¼Œåˆ™reactiveä¼šç›´æ¥ä½¿ç”¨ç¼“å­˜ä¸­çš„å€¼ã€‚</li>
</ul>
<br>
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<p><a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson6/">https://shiny.rstudio.com/tutorial/written-tutorial/lesson6/</a></p>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Rè¯­è¨€ | ä½¿ç”¨stargazeråŒ…è¾“å‡ºæ ¼å¼åŒ–å›å½’ç»“æœ</title>
      <link>https://textdata.cn/blog/2022-10-07-r-stargazer/</link>
      <pubDate>Fri, 07 Oct 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-10-07-r-stargazer/</guid>
      <description>ä½¿ç”¨stargazeråŒ…è¾“å‡ºæ ¼å¼åŒ–å›å½’ç»“æœ</description>
      <content:encoded><![CDATA[<blockquote>
<p>ä½œè€…: çŒ«å“¥</p>
<p>æ³¢æ©å¤§å­¦ç»æµå­¦ä¸“ä¸šï¼Œ è®¡é‡ç»æµå­¦æ–¹å‘</p>
</blockquote>
<p>åœ¨å®è¯åˆ†æè¿‡ç¨‹ä¸­ï¼Œå„ç§å›å½’æ¨¡å‹ååˆ†å¸¸ç”¨ï¼Œç‰¹åˆ«æ˜¯å‚æ•°æ¨¡å‹ã€‚è€Œä¸”æˆ‘ä»¬å¸¸å¸¸éœ€è¦è¿è¡Œå¤šç§å‚æ•°å›å½’æ¨¡å‹ï¼Œå¹¶å¯¹å‚æ•°ä¼°è®¡å€¼ã€æ˜¾è‘—æ€§ç­‰ç»Ÿè®¡æ€§è´¨è¿›è¡Œæ¯”è¾ƒã€‚æ­¤æ—¶ï¼Œå¦‚æœç”¨copy pasteæˆ–è€…æ‰‹åŠ¨è¾“å…¥ï¼Œé‚£ä¹ˆåˆ™è€—æ—¶è€—åŠ›ï¼Œä¸”æœ‰ä¸€å®šé”™è¯¯ç‡ã€‚å¦‚æœä½ ä¹Ÿæœ‰ç›¸åŒçƒ¦æ¼ï¼Œé‚£ä¹ˆstargazeråŒ…å¯ä»¥å®Œç¾åœ°è§£å†³ä½ çš„çƒ¦æ¼ã€‚ä»–å¯ä»¥å¿«é€Ÿã€å‡†ç¡®ã€æ¸…æ™°åœ°è¾“å‡ºå›å½’ç»“æœã€‚</p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<p>ä¸å…¶å®ƒRåŒ…çš„å®‰è£…æ–¹å¼æ— å¼‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>install.packages()</code>å’Œ<code>library()</code>å‡½æ•°æ¥ä¸‹è½½å’Œå¯¼å…¥stargazeråŒ…ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">install.packages</span><span class="p">(</span><span class="s">&#34;stargazer&#34;</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">stargazer</span><span class="p">)</span>
</code></pre></div><br>
<h2 id="æè¿°æ€§ç»Ÿè®¡å€¼">æè¿°æ€§ç»Ÿè®¡å€¼</h2>
<p>åœ¨ä¼°è®¡å›å½’æ¨¡å‹ä¹‹å‰ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¹Ÿéœ€è¦å¯¹æ•°æ®çš„æè¿°æ€§ç»Ÿè®¡æ€§è´¨è¿›è¡Œåˆ†æï¼Œä»¥ä¾¿äº†è§£å˜é‡çš„åˆ†å¸ƒå’Œå˜é‡é—´çš„è”åˆåˆ†å¸ƒï¼Œè¿™å¯¹åç»­çš„å›å½’æ¨¡å‹è®¾å®šå…·æœ‰é‡è¦æ„ä¹‰ã€‚stargazeråŒ…èƒ½ä½¿æˆ‘ä»¬æ–¹ä¾¿åœ°åˆ†ææè¿°æ€§ç»Ÿè®¡å€¼ã€‚æˆ‘ä»¬æ­¤å¤„ä»¥Rå†…è‡ªå¸¦æ•°æ®é›†attitudeä¸ºä¾‹ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">stargazer</span><span class="p">(</span><span class="n">attitude</span><span class="p">,</span> <span class="n">type</span> <span class="o">=</span> <span class="s">&#34;text&#34;</span><span class="p">)</span>
</code></pre></div><p>è¿è¡Œä¸Šè¿°ç¨‹åºåï¼Œæˆ‘ä»¬å°±ä¼šå¾—åˆ°ä¸‹è¡¨ã€‚</p>
<p><img loading="lazy" src="img/%e5%9b%be1.png" alt=""  />
</p>
<p>å¦‚æœéœ€è¦è¾“å‡ºlatexæˆ–è€…htmlæ ¼å¼ï¼Œé‚£ä¹ˆæŒ‡å®š<code>type=&quot;latex&quot;</code>æˆ–è€…<code>type=&quot;html&quot;</code>å³å¯ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜æœ‰å…¶ä»–ä¸€äº›é‡è¦çš„å‚æ•°ã€‚</p>
<ul>
<li><code>title</code>: å®šä¹‰è¡¨æ ¼çš„æ ‡é¢˜</li>
<li><code>out</code>: 	å®šä¹‰å¯¼å‡ºæ–‡ä»¶çš„è·¯å¾„ï¼Œæ–‡ä»¶ç±»å‹å¯ä»¥æ˜¯<code>.tex</code>, <code>.txt</code>, <code>.htm</code>æˆ–è€…<code>.html</code>ã€‚</li>
<li><code>flip</code>: é»˜è®¤ä¸ºFALSEã€‚å½“å®šä¹‰ä¸ºTRUEæ—¶ï¼Œåˆ™è¡¨ç¤ºè½¬ç½®ï¼Œå³å„å˜é‡æŒ‰åˆ—æ’åˆ—ã€‚</li>
<li><code>digits</code>: å®šä¹‰è¾“å‡ºæ•°å€¼çš„å°æ•°ä½æ•°ã€‚</li>
</ul>
<br>
<h2 id="å‚æ•°å›å½’æ¨¡å‹ç»“æœ">å‚æ•°å›å½’æ¨¡å‹ç»“æœ</h2>
<p>æ­¤å¤„ï¼Œæˆ‘ä»¬ä¾ç„¶ä½¿ç”¨attitudeæ•°æ®åŒ…ï¼Œä»¥<code>rating</code>ä½œä¸ºå› å˜é‡ï¼Œå…¶ä»–å„å˜é‡ä½œä¸ºåå˜é‡ï¼Œç”¨ä¸¤ä¸ªçº¿æ€§æ¨¡å‹å’Œä¸€ä¸ªProbitæ¨¡å‹è¿›è¡Œå‚æ•°ä¼°è®¡ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="c1">##  2 OLS models</span>
<span class="n">linear.1</span> <span class="o">&lt;-</span> <span class="nf">lm</span><span class="p">(</span><span class="n">rating</span> <span class="o">~</span> <span class="n">complaints</span> <span class="o">+</span> <span class="n">privileges</span> <span class="o">+</span> <span class="n">learning</span> 
                        <span class="o">+</span> <span class="n">raises</span> <span class="o">+</span> <span class="n">critical</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">attitude</span><span class="p">)</span>

<span class="n">linear.2</span> <span class="o">&lt;-</span> <span class="nf">lm</span><span class="p">(</span><span class="n">rating</span> <span class="o">~</span> <span class="n">complaints</span> <span class="o">+</span> <span class="n">privileges</span> <span class="o">+</span> <span class="n">learning</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">attitude</span><span class="p">)</span>

<span class="c1">## create an indicator dependent variable, and run a probit model</span>
 
<span class="n">attitude</span><span class="o">$</span><span class="n">high.rating</span> <span class="o">&lt;-</span> <span class="p">(</span><span class="n">attitude</span><span class="o">$</span><span class="n">rating</span> <span class="o">&gt;</span> <span class="m">70</span><span class="p">)</span>
<span class="n">probit.model</span> <span class="o">&lt;-</span> <span class="nf">glm</span><span class="p">(</span><span class="n">high.rating</span> <span class="o">~</span> <span class="n">learning</span> <span class="o">+</span> <span class="n">critical</span> <span class="o">+</span> <span class="n">advance</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">attitude</span><span class="p">,</span>
                    <span class="n">family</span> <span class="o">=</span> <span class="nf">binomial</span><span class="p">(</span><span class="n">link</span> <span class="o">=</span> <span class="s">&#34;probit&#34;</span><span class="p">))</span>
</code></pre></div><p>åœ¨å¾—åˆ°å„æ¨¡å‹åï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œä»¥ä¸‹ç¨‹åºæ±‡æ€»å’Œè¾“å‡ºä¸‰ä¸ªæ¨¡å‹çš„ç»“æœã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">stargazer</span><span class="p">(</span><span class="n">linear.1</span><span class="p">,</span> <span class="n">linear.2</span><span class="p">,</span> <span class="n">probit.model</span><span class="p">,</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">&#34;Regression Results&#34;</span><span class="p">)</span>
</code></pre></div><p>æ±‡æ€»å’Œè¾“å‡ºç»“æœå¦‚ä¸‹è¡¨ã€‚</p>
<p><img loading="lazy" src="img/%e5%9b%be2.png" alt=""  />
</p>
<p>åœ¨è¾“å‡ºå›å½’ç»“æœæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰ä¸€äº›é‡è¦çš„å‚æ•°ã€‚</p>
<ul>
<li><code>single.row</code>: é»˜è®¤å€¼ä¸ºFALSEã€‚å½“å–å€¼ä¸ºTRUEï¼Œè¡¨ç¤ºå°†å‚æ•°å’Œtç»Ÿè®¡å€¼æˆ–å…¶å®ƒå‚æ•°ç»Ÿè®¡å€¼æ”¾åœ¨ä¸€è¡Œï¼Œè€Œä¸æ˜¯åˆ†ä¸Šä¸‹æ”¾ç½®ã€‚</li>
<li><code>ci</code>: é»˜è®¤ä¸ºFALSEã€‚å½“å–å€¼ä¸ºTRUEæ—¶ï¼Œè¡¨ç¤ºå°†åœ¨å‚æ•°ä¼°è®¡å€¼åæŠ¥å‘Šç½®ä¿¡åŒºé—´ï¼Œè€Œä¸æ˜¯tç»Ÿè®¡å€¼ã€‚</li>
<li><code>ci.level</code>: å®šä¹‰ç½®ä¿¡åº¦æ°´å¹³ã€‚</li>
<li><code>omit.stat</code>: å®šä¹‰ä¸éœ€è¦æŠ¥å‘Šçš„ç»Ÿè®¡å€¼ã€‚ä¾‹å¦‚ï¼Œ<code>omit.stat=c(&quot;f&quot;.&quot;ser&quot;)</code>ï¼Œè¡¨ç¤ºä¸éœ€è¦æŠ¥å‘Šæ¨¡å‹çš„Fç»Ÿè®¡å€¼å’ŒResidual Std. Errorï¼Œå³æ®‹å·®çš„æ ‡å‡†è¯¯ã€‚</li>
<li><code>keep.stat</code>: å®šä¹‰éœ€è¦æŠ¥å‘Šçš„ç»Ÿè®¡å€¼ã€‚é»˜è®¤æ˜¯æŠ¥å‘Šæ‰€æœ‰çš„åå˜é‡ã€‚ä¾‹å¦‚ï¼Œ<code>keep.stat=&quot;n&quot;</code>ï¼Œè¡¨ç¤ºåªéœ€è¦æŠ¥å‘Šæ ·æœ¬é‡ã€‚</li>
<li><code>keep</code>: å®šä¹‰éœ€è¦åŒ…å«åœ¨è¾“å‡ºç»“æœä¸­çš„å˜é‡ã€‚å½“æ¨¡å‹åå˜é‡æ•°ç›®å¾ˆå¤šï¼Œè€Œæˆ‘ä»¬åˆåªå…³æ³¨ä¸ªåˆ«å˜é‡çš„ç³»æ•°æ—¶ï¼Œè¿™ä¸ªå‚æ•°åˆ™èƒ½å¤Ÿèµ·åˆ°ä½œç”¨ã€‚ä¾‹å¦‚ï¼Œ<code>keep=c(&quot;complaints&quot;,&quot;learning&quot;,&quot;raises&quot;,&quot;critical&quot;)</code>ã€‚</li>
<li><code>order</code>: å®šä¹‰è¾“å‡ºç»“æœä¸­å˜é‡çš„é¡ºåºã€‚ä¾‹å¦‚ï¼Œ<code>order=c(&quot;learning&quot;, &quot;raises&quot;)</code>ã€‚</li>
</ul>
<br>
<h2 id="ç›¸å…³ç³»æ•°è¡¨">ç›¸å…³ç³»æ•°è¡¨</h2>
<p>stargazeråŒ…è¿˜èƒ½æ±‡æ€»æ•´ç†ç›¸å…³ç³»æ•°è¡¨ã€‚ä»¥attitudeæ•°æ®é›†ä¸ºä¾‹ï¼Œè¿è¡Œä»¥ä¸‹ç¨‹åºå³å¯è·å¾—ç›¸å…³ç³»æ•°è¡¨ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="n">correlation.matrix</span> <span class="o">&lt;-</span> <span class="nf">cor</span><span class="p">(</span><span class="n">attitude</span><span class="p">)</span>
<span class="nf">stargazer</span><span class="p">(</span><span class="n">correlation.matrix</span><span class="p">,</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="p">)</span>
</code></pre></div><p><img loading="lazy" src="img/%e5%9b%be3.png" alt=""  />
</p>
<br>
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<p>Hlavac, Marek (2018). stargazer: Well-Formatted Regression and Summary Statistics Tables. R package version 5.2.2. <a href="https://CRAN.R-project.org/package=stargazer">https://CRAN.R-project.org/package=stargazer</a></p>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Rè¯­è¨€ | renderthisåŒ…åˆ¶ä½œè®²è§£åŠ¨ç”»ã€è§†é¢‘</title>
      <link>https://textdata.cn/blog/2022-09-27-r-renderthis/</link>
      <pubDate>Tue, 27 Sep 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-09-27-r-renderthis/</guid>
      <description>descriptionç”¨äºSEOä¼˜åŒ–</description>
      <content:encoded><![CDATA[


]]></content:encoded>
    </item>
    
    <item>
      <title>Rè¯­è¨€ | è®©ç»Ÿè®¡æ›´easyçš„easystatsé›†åˆåŒ…</title>
      <link>https://textdata.cn/blog/2022-09-21-r-easystats/</link>
      <pubDate>Wed, 21 Sep 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-09-21-r-easystats/</guid>
      <description>æ¨¡æ¿ç»Ÿè®¡æŠ¥å‘Šç”¨</description>
      <content:encoded><![CDATA[<p><a href="https://easystats.github.io/easystats/index.html">easystats</a> æ˜¯ R åŒ…é›†åˆï¼Œå¯æä¾›ç»Ÿä¸€ä¸”easyçš„ä»£ç è¿›è¡Œ ç»Ÿè®¡åˆ†æã€‚</p>
<br>
<h2 id="ä¸-tidyverse-æœ‰ä½•ä¸åŒ">ä¸ tidyverse æœ‰ä½•ä¸åŒï¼Ÿ</h2>
<p>tidyverseåŒ…é›†åˆï¼Œæ˜¯ Rè¯­è¨€ ä¸­éå¸¸æµè¡Œçš„è½¯ä»¶åŒ…é›†åˆï¼ˆggplotã€dplyrã€tidyr&hellip;&hellip;ï¼‰ï¼Œå®ƒä¹Ÿä½¿ R çš„ä½¿ç”¨æ›´åŠ å®¹æ˜“ã€‚é‚£ä¹ˆï¼Œæ‚¨åº”è¯¥é€‰æ‹© tidyverse è¿˜æ˜¯ easystatsï¼Ÿ</p>
<p><strong>ä¸¤ä¸ªéƒ½é€‰ï¼</strong></p>
<p>äº‹å®ä¸Šï¼Œè¿™ä¸¤ä¸ªç”Ÿæ€ç³»ç»Ÿçš„è®¾è®¡è€ƒè™‘äº†éå¸¸ä¸åŒçš„ç›®æ ‡ã€‚ tidyverse åŒ…ä¸»è¦ç”¨äº <code>æ•°æ®æ“ä½œå’Œæ¢ç´¢</code>ã€‚è€Œ easystats æ›´å…³æ³¨åˆ†æçš„æœ€åé˜¶æ®µï¼š<code>ç†è§£å’Œè§£é‡Šæ‚¨çš„ç»“æœï¼Œå¹¶åœ¨æ‰‹ç¨¿æˆ–æŠ¥å‘Šä¸­æŠ¥å‘Šå®ƒä»¬</code>ã€‚æ‚¨ç»å¯¹å¯ä»¥åœ¨ tidyverse å·¥ä½œæµç¨‹ä¸­ä½¿ç”¨ easystats åŠŸèƒ½ï¼</p>
<p>easystats + tidyverse = â¤ï¸</p>
<br>
<h2 id="easystatsç”Ÿæ€åœˆ">easystatsç”Ÿæ€åœˆ</h2>
<p>æ¯ä¸ª easystats åŒ…éƒ½æœ‰ä¸åŒçš„èŒƒå›´å’Œç”¨é€”ã€‚è¿™æ„å‘³ç€æ‚¨æœ€å¥½çš„å¼€å§‹æ–¹å¼æ˜¯æ¢ç´¢å¹¶é€‰æ‹©æ‚¨è®¤ä¸ºå¯èƒ½å¯¹æ‚¨æœ‰ç”¨çš„é‚£äº›ã€‚ä½†æ˜¯ï¼Œç”±äºå®ƒä»¬çš„æ„å»ºè€ƒè™‘äº†&quot;æ›´å¤§çš„å›¾æ™¯&quot;ï¼Œæ‚¨ä¼šæ„è¯†åˆ°ä½¿ç”¨æ›´å¤šå®ƒä»¬ä¼šåˆ›å»ºä¸€ä¸ªæµç•…çš„å·¥ä½œæµç¨‹ï¼Œå› ä¸ºè¿™äº›åŒ…æ—¨åœ¨ååŒå·¥ä½œã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œè¿™äº›è½¯ä»¶åŒ…å¯ä»¥ååŒå·¥ä½œï¼Œæ¶µç›–ç»Ÿè®¡åˆ†æå’Œæ•°æ®å¯è§†åŒ–çš„æ‰€æœ‰æ–¹é¢ã€‚</p>
<ul>
<li><a href="https://easystats.github.io/report/">report</a>ï¼šğŸ“œ ğŸ‰ ç”Ÿæˆè‡ªåŠ¨ç»Ÿè®¡æŠ¥å‘Š</li>
<li><a href="https://easystats.github.io/correlation/">correlation</a>ï¼šğŸ”— ç›¸å…³æ€§çš„å¤šåˆä¸€åŒ…</li>
<li><a href="https://easystats.github.io/modelbased/">modelbased</a>ï¼šğŸ“ˆ åŸºäºç»Ÿè®¡æ¨¡å‹ä¼°è®¡æ•ˆæœã€ç»„å¹³å‡å€¼å’Œç»„é—´å¯¹æ¯”</li>
<li><a href="https://easystats.github.io/bayestestR/">bayestestR</a>ï¼šğŸ‘» éå¸¸é€‚åˆè´å¶æ–¯ç»Ÿè®¡çš„åˆå­¦è€…æˆ–ä¸“å®¶</li>
<li><a href="https://easystats.github.io/effectsize/">effectize</a>: ğŸ‰ è®¡ç®—ã€è½¬æ¢ã€è§£é‡Šå’Œä½¿ç”¨æ•ˆæœå¤§å°å’Œæ ‡å‡†åŒ–å‚æ•°çš„ç´¢å¼•</li>
<li><a href="https://easystats.github.io/see/">see</a> ï¼šğŸ¨ åˆ›å»ºæ¼‚äº®ç»“æœå¯è§†åŒ–çš„ç»˜å›¾</li>
<li><a href="https://easystats.github.io/parameters/">parameters</a>ï¼šğŸ“Š è·å–æœ‰å…³æ¨¡å‹åŒ…å«å‚æ•°æ‰€æœ‰ä¿¡æ¯çš„è¡¨æ ¼</li>
<li><a href="https://easystats.github.io/performance/">performance</a>ï¼šğŸ’ªæ¨¡å‹çš„è´¨é‡å’Œæ€§èƒ½æŒ‡æ ‡ï¼ˆR2ã€ICCã€LOOã€AICã€BFã€&hellip;ï¼‰</li>
<li><a href="https://easystats.github.io/insight/">insight</a>ï¼šğŸ”® å¯¹äºå¼€å‘äººå‘˜æ¥è¯´ï¼Œä¸€ä¸ªåŒ…å¯ä»¥å¸®åŠ©æ‚¨ä½¿ç”¨ä¸åŒçš„æ¨¡å‹å’ŒåŒ…</li>
<li><a href="https://easystats.github.io/datawizard/">datawizard</a>ï¼šğŸ§™ æ¸…ç†å’Œè½¬æ¢æ•°æ®çš„é­”æ³•è¯æ°´</li>
</ul>
<p>æˆªæ­¢2022-09-21ï¼Œ easystatsç”Ÿæ€ä¸­å„ä¸ªåŒ…çš„ä¸‹è½½æƒ…å†µ</p>
<table>
<thead>
<tr>
<th style="text-align:left">Total</th>
<th style="text-align:left">insight</th>
<th style="text-align:left">bayestestR</th>
<th style="text-align:left">parameters</th>
<th style="text-align:left">performance</th>
<th style="text-align:left">datawizard</th>
<th style="text-align:left">effectsize</th>
<th style="text-align:left">correlation</th>
<th style="text-align:left">see</th>
<th style="text-align:left">modelbased</th>
<th style="text-align:left">report</th>
<th style="text-align:left">easystats</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">10,001,095</td>
<td style="text-align:left">3,085,739</td>
<td style="text-align:left">1,373,379</td>
<td style="text-align:left">1,363,678</td>
<td style="text-align:left">1,285,506</td>
<td style="text-align:left">1,159,097</td>
<td style="text-align:left">1,060,079</td>
<td style="text-align:left">277,541</td>
<td style="text-align:left">251,038</td>
<td style="text-align:left">94,089</td>
<td style="text-align:left">48,876</td>
<td style="text-align:left">2,073</td>
</tr>
</tbody>
</table>
<p><img loading="lazy" src="easystats-trend.png" alt=""  />
</p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">install.packages(&#34;easystats&#34;)
</code></pre></div><br>
<h2 id="ç‚«ä¸€ä¸‹">ç‚«ä¸€ä¸‹</h2>
<p>easystatsåˆ°åº•å¦‚ä½•å¥½ç”¨ï¼Œä»Šå¤©åªå®éªŒreportåŒ…ï¼Œè¯¥åŒ…å·ç§° â€œä» R åˆ°ä½ çš„æ‰‹ç¨¿â€</p>
<p>æŠ¥å‘Šçš„ä¸»è¦ç›®æ ‡æ˜¯å¼¥åˆ R çš„è¾“å‡ºä¸æ‰‹ç¨¿ä¸­åŒ…å«çš„æ ¼å¼åŒ–ç»“æœä¹‹é—´çš„å·®è·ã€‚ å®ƒæ ¹æ®æœ€ä½³å®è·µæŒ‡å—ï¼ˆä¾‹å¦‚ APA æœŸåˆŠé£æ ¼ï¼‰è‡ªåŠ¨ç”Ÿæˆæ¨¡å‹å’Œæ•°æ®æ¡†æ¶çš„æŠ¥å‘Šï¼Œç¡®ä¿ç»“æœæŠ¥å‘Šçš„æ ‡å‡†åŒ–å’Œè´¨é‡ã€‚</p>
<p>ç”Ÿæˆirisæ•°æ®é›†æè¿°æ€§ç»Ÿè®¡ä¿¡æ¯çš„è‹±æ–‡æŠ¥å‘Š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">report(iris)
</code></pre></div><br>
<p>ç”Ÿæˆçº¿æ€§å›å½’æ¨¡å‹çš„æŠ¥å‘Š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">library(report)

model &lt;- lm(Sepal.Length ~ Species, data = iris)
report(model)
</code></pre></div><p>æ›´å¤šå†…å®¹è¯·é˜…è¯» <a href="https://easystats.github.io/report/">reportåŒ…</a> çš„æ–‡æ¡£ã€‚</p>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Rè¯­è¨€ |  ä½¿ç”¨ggsciåŒ…ç»˜åˆ¶scié£æ ¼å›¾è¡¨</title>
      <link>https://textdata.cn/blog/2022-09-20-r-ggsci/</link>
      <pubDate>Tue, 20 Sep 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-09-20-r-ggsci/</guid>
      <description>ä½¿ç”¨Rè¯­è¨€ggsciåŒ…å®šåˆ¶scié£æ ¼çš„ç»˜å›¾</description>
      <content:encoded><![CDATA[


<p>ä»Šå¤©åˆ†äº«ä¸€ä¸ªRè¯­è¨€ggsciåŒ…ï¼Œå¸®ä½ ç»˜åˆ¶å‡ºç¾è§‚èˆ’æœï¼ŒåˆåˆæœŸåˆŠç¼–è¾‘å®¡ç¾é£æ ¼çš„å›¾è¡¨ã€‚</p>
<p><br></p>
<div id="å®‰è£…" class="section level2">
<h2>å®‰è£…</h2>
<pre class="r"><code>install.packages(&quot;ggsci&quot;)
#remotes::install_github(&quot;nanxstats/ggsci&quot;)</code></pre>
<p>ä½¿ç”¨ <code>vignette("ggsci")</code>å¯ä»¥æŸ¥çœ‹ggsciçš„vignetteã€‚</p>
<p><br></p>
</div>
<div id="æœŸåˆŠé£æ ¼" class="section level2">
<h2>æœŸåˆŠé£æ ¼</h2>
<p>ggsciæ”¯æŒçš„ä¸»é¢˜é£æ ¼ä¸»è¦å‚è€ƒè‡ªæœŸåˆŠã€å¯è§†åŒ–åº“</p>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">é£æ ¼</th>
<th align="left">æœŸåˆŠã€æŠ€æœ¯æ¡†æ¶</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>NPG</strong></td>
<td align="left">Natureæ——ä¸‹æœŸåˆŠ(Nature Publishing Group)</td>
</tr>
<tr class="even">
<td align="left"><strong>AAAS</strong></td>
<td align="left">Scienceæ——ä¸‹æœŸåˆŠ()</td>
</tr>
<tr class="odd">
<td align="left"><strong>NEJM</strong></td>
<td align="left">æ–°è‹±æ ¼å…°åŒ»å­¦æ‚å¿—(New England Journal of Medicine)</td>
</tr>
<tr class="even">
<td align="left"><strong>Lancet</strong></td>
<td align="left">æŸ³å¶åˆ€æ‚å¿—(Lancet Oncology)</td>
</tr>
<tr class="odd">
<td align="left"><strong>JAMA</strong></td>
<td align="left">ç¾å›½åŒ»å­¦å­¦ä¼šæ‚å¿—(Journal of the American Medical Association)</td>
</tr>
<tr class="even">
<td align="left"><strong>JCO</strong></td>
<td align="left">ä¸´åºŠè‚¿ç˜¤å­¦æ‚å¿—(Journal of Clinical Oncology)</td>
</tr>
<tr class="odd">
<td align="left"><strong>UCSCGB</strong></td>
<td align="left">UCSCåŸºå› ç»„æµè§ˆå™¨(UCSC Genome Browser)</td>
</tr>
<tr class="even">
<td align="left"><strong>D3</strong></td>
<td align="left">d3.js</td>
</tr>
<tr class="odd">
<td align="left">â€¦</td>
<td align="left">â€¦</td>
</tr>
</tbody>
</table>
<p><br></p>
</div>
<div id="åŸºæœ¬å›¾è¡¨" class="section level2">
<h2>åŸºæœ¬å›¾è¡¨</h2>
<p>è¿™é‡Œå‡†å¤‡ä¸€ä¸ªå¸¸è§çš„ggplot2å›¾è¡¨</p>
<pre class="r"><code>library(&quot;ggsci&quot;)
library(&quot;ggplot2&quot;)
library(&quot;gridExtra&quot;)

data(&quot;diamonds&quot;)

p1 = ggplot(subset(diamonds, carat &gt;= 2.2),
       aes(x = table, y = price, colour = cut)) +
  geom_point(alpha = 0.7) +
  geom_smooth(method = &quot;loess&quot;, alpha = 0.05, size = 1, span = 1) +
  theme_bw()

p2 = ggplot(subset(diamonds, carat &gt; 2.2 &amp; depth &gt; 55 &amp; depth &lt; 70),
       aes(x = depth, fill = cut)) +
  geom_histogram(colour = &quot;black&quot;, binwidth = 1, position = &quot;dodge&quot;) +
  theme_bw()

grid.arrange(p1, p2, ncol=2)</code></pre>
<p><img src="/blog/2022-09-20-r-ggsci/index_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="gallery" class="section level2">
<h2>Gallery</h2>
<div id="npg" class="section level3">
<h3>NPG</h3>
<p>atureæ——ä¸‹æœŸåˆŠ(Nature Publishing Group)é…è‰²é£æ ¼</p>
<pre class="r"><code>p1_npg = p1 + scale_color_npg()
p2_npg = p2 + scale_fill_npg()
grid.arrange(p1_npg, p2_npg, ncol = 2)</code></pre>
<p><img src="/blog/2022-09-20-r-ggsci/index_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="aaas" class="section level3">
<h3>AAAS</h3>
<p>Scienceæ——ä¸‹æœŸåˆŠ(American Association for the Advancement of Science)é…è‰²é£æ ¼</p>
<pre class="r"><code>p1_aaas = p1 + scale_color_aaas()
p2_aaas = p2 + scale_fill_aaas()
grid.arrange(p1_aaas, p2_aaas, ncol = 2)</code></pre>
<p><img src="/blog/2022-09-20-r-ggsci/index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="nejm" class="section level3">
<h3>NEJM</h3>
<p>æ–°è‹±æ ¼å…°åŒ»å­¦æ‚å¿—(New England Journal of Medicine)é…è‰²é£æ ¼</p>
<pre class="r"><code>p1_nejm = p1 + scale_color_nejm()
p2_nejm = p2 + scale_fill_nejm()
grid.arrange(p1_nejm, p2_nejm, ncol = 2)</code></pre>
<p><img src="/blog/2022-09-20-r-ggsci/index_files/figure-html/unnamed-chunk-5-1.png" width="672" />
<br></p>
</div>
<div id="lancet" class="section level3">
<h3>Lancet</h3>
<p>æŸ³å¶åˆ€æ‚(Lancet)å¿—é…è‰²é£æ ¼</p>
<pre class="r"><code>p1_lancet = p1 + scale_color_lancet()
p2_lancet = p2 + scale_fill_lancet()
grid.arrange(p1_lancet, p2_lancet, ncol = 2)</code></pre>
<p><img src="/blog/2022-09-20-r-ggsci/index_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="jama" class="section level3">
<h3>JAMA</h3>
<p>ç¾å›½åŒ»å­¦å­¦ä¼šæ‚å¿—(Journal of the American Medical Association)é…è‰²é£æ ¼</p>
<pre class="r"><code>p1_jama = p1 + scale_color_jama()
p2_jama = p2 + scale_fill_jama()
grid.arrange(p1_jama, p2_jama, ncol = 2)</code></pre>
<p><img src="/blog/2022-09-20-r-ggsci/index_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="jco" class="section level3">
<h3>JCO</h3>
<p>ä¸´åºŠè‚¿ç˜¤å­¦æ‚å¿—(Journal of Clinical Oncology)é…è‰²é£æ ¼</p>
<pre class="r"><code>p1_jco = p1 + scale_color_jco()
p2_jco = p2 + scale_fill_jco()
grid.arrange(p1_jco, p2_jco, ncol = 2)</code></pre>
<p><img src="/blog/2022-09-20-r-ggsci/index_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="d3" class="section level3">
<h3>D3</h3>
<p>d3.jsé…è‰²é£æ ¼</p>
<pre class="r"><code>p1_d3 = p1 + scale_color_d3()
p2_d3 = p2 + scale_fill_d3()
grid.arrange(p1_d3, p2_d3, ncol = 2)</code></pre>
<p><img src="/blog/2022-09-20-r-ggsci/index_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p><br></p>
</div>
</div>
<div id="å¹¿è€Œå‘Šä¹‹" class="section level2">
<h2>å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
</div>
]]></content:encoded>
    </item>
    
    <item>
      <title>Rè¯­è¨€ | ggpubråŒ…è®©æ•°æ®å¯è§†åŒ–æ›´åŠ ä¼˜é›…</title>
      <link>https://textdata.cn/blog/2022-09-20-r-ggplot2-ggpubr/</link>
      <pubDate>Tue, 20 Sep 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-09-20-r-ggplot2-ggpubr/</guid>
      <description>ggplot2èƒ½ç»˜åˆ¶å¾ˆå¤šç¾è§‚å›¾è¡¨ï¼Œä½†æ˜¯è¯­æ³•å¤ªéš¾ã€‚ggpubråŒ…è®©æ•°æ®å¯è§†åŒ–æ›´åŠ ä¼˜é›…</description>
      <content:encoded><![CDATA[


<p><a href="https://ggplot2.tidyverse.org/">Hadley Wickhamçš„ggplot2</a> æ˜¯ä¸€ä¸ªå‡ºè‰²ä¸”çµæ´»çš„åŒ…ï¼Œç”¨äºåœ¨ R ä¸­è¿›è¡Œä¼˜é›…çš„æ•°æ®å¯è§†åŒ–ã€‚ä½†æ˜¯ï¼Œé»˜è®¤ç”Ÿæˆçš„å›¾éœ€è¦ä¸€äº›æ ¼å¼æ‰èƒ½å‘é€å®ƒä»¬ä»¥ä¾›å‘å¸ƒã€‚ æ­¤å¤–ï¼Œè¦è‡ªå®šä¹‰ ggplotï¼Œè¯­æ³•æ˜¯è´Ÿè´£çš„ï¼Œè¿™æé«˜äº†æ²¡æœ‰é«˜çº§ R ç¼–ç¨‹æŠ€èƒ½çš„ç ”ç©¶äººå‘˜çš„éš¾åº¦ã€‚</p>
<p><strong><a href="https://rpkgs.datanovia.com/ggpubr">ggpubråŒ…</a></strong> æä¾›äº†ä¸€äº›æ˜“äºä½¿ç”¨çš„åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨æ›´ç®€å•çš„è¯­æ³•ä»£ç ç»˜åˆ¶å‡ºå¯ä¾›å‘è¡¨å‡ºç‰ˆçš„å›¾è¡¨ã€‚</p>
<p><br></p>
<div id="å®‰è£…" class="section level2">
<h2>å®‰è£…</h2>
<pre class="r"><code>install.packages(&quot;ggpubr&quot;)</code></pre>
<p><br>
## æŠ˜çº¿å›¾</p>
<pre class="r"><code>library(ggpubr)

df &lt;- data.frame(supp=rep(c(&quot;VC&quot;, &quot;OJ&quot;), each=3),
   dose=rep(c(&quot;D0.5&quot;, &quot;D1&quot;, &quot;D2&quot;),2),
   len=c(6.8, 15, 33, 4.2, 10, 29.5))
#print(df)
#&gt;   supp dose  len
#&gt; 1   VC D0.5  6.8
#&gt; 2   VC   D1 15.0
#&gt; 3   VC   D2 33.0
#&gt; 4   OJ D0.5  4.2
#&gt; 5   OJ   D1 10.0
#&gt; 6   OJ   D2 29.5

# Plot &quot;len&quot; by &quot;dose&quot; and
# Change line types and point shapes by a second groups: &quot;supp&quot;
ggline(df, x=&quot;dose&quot;, y=&quot;len&quot;,
  linetype = &quot;supp&quot;, shape = &quot;supp&quot;)</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<pre class="r"><code># Change colors
# +++++++++++++++++++++

# Change color by group: &quot;supp&quot;
# Use custom color palette
ggline(df, x=&quot;dose&quot;, y=&quot;len&quot;,
   linetype = &quot;supp&quot;, shape = &quot;supp&quot;,
   color = &quot;supp&quot;, palette = c(&quot;#00AFBB&quot;, &quot;#E7B800&quot;))</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="æ•£ç‚¹å›¾" class="section level2">
<h2>æ•£ç‚¹å›¾</h2>
<pre class="r"><code># Load data
data(&quot;mtcars&quot;)
df &lt;- mtcars
df$cyl &lt;- as.factor(df$cyl)
#head(df[, c(&quot;wt&quot;, &quot;mpg&quot;, &quot;cyl&quot;)], 3)
#&gt;                  wt  mpg cyl
#&gt; Mazda RX4     2.620 21.0   6
#&gt; Mazda RX4 Wag 2.875 21.0   6
#&gt; Datsun 710    2.320 22.8   4

# Textual annotation
# +++++++++++++++++
df$name &lt;- rownames(df)
ggscatter(df, x = &quot;wt&quot;, y = &quot;mpg&quot;,
   color = &quot;cyl&quot;, palette = c(&quot;#00AFBB&quot;, &quot;#E7B800&quot;, &quot;#FC4E07&quot;),
   label = &quot;name&quot;, repel = TRUE)</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="é¥¼å½¢å›¾" class="section level2">
<h2>é¥¼å½¢å›¾</h2>
<pre class="r"><code>df &lt;- data.frame(
 group = c(&quot;Male&quot;, &quot;Female&quot;, &quot;Child&quot;),
  value = c(25, 25, 50))

#head(df)
#&gt;    group value
#&gt; 1   Male    25
#&gt; 2 Female    25
#&gt; 3  Child    50


# Basic pie charts
# ++++++++++++++++++++++++++++++++

ggpie(df, &quot;value&quot;, label = &quot;group&quot;)</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<pre class="r"><code>ggpie(df, &quot;value&quot;, label = &quot;group&quot;, fill=&quot;group&quot;)</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre class="r"><code>ggpie(df, &quot;value&quot;, label = &quot;group&quot;, fill=&quot;group&quot;, color=&#39;white&#39;)</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<pre class="r"><code>ggpie(df, &quot;value&quot;, label = &quot;group&quot;, fill=&quot;group&quot;, 
      palette = c(&quot;#00AFBB&quot;, &quot;#E7B800&quot;, &quot;#FC4E07&quot;),
      color=&#39;white&#39;)</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<pre class="r"><code>labs &lt;- paste0(df$group, &quot; (&quot;, df$value, &quot;%)&quot;)
#&gt; &quot;Male (25%)&quot;   &quot;Female (25%)&quot; &quot;Child (50%)&quot; 

ggpie(df, &quot;value&quot;, label = labs, fill=&quot;group&quot;, 
      palette = c(&quot;#00AFBB&quot;, &quot;#E7B800&quot;, &quot;#FC4E07&quot;),
      color=&#39;white&#39;)</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<pre class="r"><code>labs &lt;- paste0(df$group, &quot; (&quot;, df$value, &quot;%)&quot;)
#&gt; &quot;Male (25%)&quot;   &quot;Female (25%)&quot; &quot;Child (50%)&quot; 

ggpie(df, &quot;value&quot;, label = labs, fill=&quot;group&quot;, 
      lab.pos = &quot;in&quot;, lab.font = &quot;white&quot;,
      palette = c(&quot;#00AFBB&quot;, &quot;#E7B800&quot;, &quot;#FC4E07&quot;),
      color=&#39;white&#39;)</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="ç”œç”œåœˆå›¾" class="section level2">
<h2>ç”œç”œåœˆå›¾</h2>
<pre class="r"><code>#&gt; head(df)
#&gt;    group value
#&gt; 1   Male    25
#&gt; 2 Female    25
#&gt; 3  Child    50
#&gt; 
# Change the position and font color of labels
ggdonutchart(df, &quot;value&quot;, label = labs,
   lab.pos = &quot;in&quot;, lab.font = &quot;white&quot;,
   fill = &quot;group&quot;, color = &quot;white&quot;,
   palette = c(&quot;#00AFBB&quot;, &quot;#E7B800&quot;, &quot;#FC4E07&quot;))</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="ç‚¹å›¾" class="section level2">
<h2>ç‚¹å›¾</h2>
<pre class="r"><code># Load data
data(&quot;mtcars&quot;)
dfm &lt;- mtcars
# Convert the cyl variable to a factor
dfm$cyl &lt;- as.factor(dfm$cyl)
# Add the name colums
dfm$name &lt;- rownames(dfm)
# Inspect the data
#head(dfm[, c(&quot;name&quot;, &quot;wt&quot;, &quot;mpg&quot;, &quot;cyl&quot;)])
#&gt;                                name    wt  mpg cyl
#&gt; Mazda RX4                 Mazda RX4 2.620 21.0   6
#&gt; Mazda RX4 Wag         Mazda RX4 Wag 2.875 21.0   6
#&gt; Datsun 710               Datsun 710 2.320 22.8   4
#&gt; Hornet 4 Drive       Hornet 4 Drive 3.215 21.4   6
#&gt; Hornet Sportabout Hornet Sportabout 3.440 18.7   8
#&gt; Valiant                     Valiant 3.460 18.1   6

ggdotchart(dfm, x = &quot;name&quot;, y = &quot;mpg&quot;,
           color = &quot;cyl&quot;,                                # Color by groups
           palette = c(&quot;#00AFBB&quot;, &quot;#E7B800&quot;, &quot;#FC4E07&quot;), # Custom color palette
           sorting = &quot;ascending&quot;,                        # Sort value in descending order
           add = &quot;segments&quot;,                             # Add segments from y = 0 to dots
           ggtheme = theme_pubr()                        # ggplot2 theme
           )</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="å¯†åº¦å›¾" class="section level2">
<h2>å¯†åº¦å›¾</h2>
<pre class="r"><code>set.seed(1234)
wdata = data.frame(
   sex = factor(rep(c(&quot;F&quot;, &quot;M&quot;), each=200)),
   weight = c(rnorm(200, 55), rnorm(200, 58)))
#head(wdata, 4)
#&gt;   sex   weight
#&gt; 1   F 53.79293
#&gt; 2   F 55.27743
#&gt; 3   F 56.08444
#&gt; 4   F 52.65430

# Density plot with mean lines and marginal rug
# :::::::::::::::::::::::::::::::::::::::::::::::::::
# Change outline and fill colors by groups (&quot;sex&quot;)
# Use custom palette
ggdensity(wdata, x = &quot;weight&quot;, color=&#39;sex&#39;)</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<pre class="r"><code>ggdensity(wdata, x = &quot;weight&quot;, color=&#39;sex&#39;, add=&#39;mean&#39;)</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<pre class="r"><code>ggdensity(wdata, x = &quot;weight&quot;, color=&#39;sex&#39;, add=&#39;mean&#39;, rug=TRUE)</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<pre class="r"><code>ggdensity(wdata, x = &quot;weight&quot;, color=&#39;sex&#39;, add=&#39;mean&#39;, rug=TRUE, fill=&#39;sex&#39;)</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<pre class="r"><code>ggdensity(wdata, x = &quot;weight&quot;, color=&#39;sex&#39;, add=&#39;mean&#39;, rug=TRUE, fill=&#39;sex&#39;, 
          palette = c(&quot;#00AFBB&quot;, &quot;#E7B800&quot;))</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="ç›´æ–¹å›¾" class="section level2">
<h2>ç›´æ–¹å›¾</h2>
<pre class="r"><code># Histogram plot with mean lines and marginal rug
# :::::::::::::::::::::::::::::::::::::::::::::::::::
# Change outline and fill colors by groups (&quot;sex&quot;)
# Use custom color palette
gghistogram(wdata, x = &quot;weight&quot;,
   add = &quot;mean&quot;, rug = TRUE,
   color = &quot;sex&quot;, fill = &quot;sex&quot;,
   palette = c(&quot;#00AFBB&quot;, &quot;#E7B800&quot;))</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="ç®±å›¾" class="section level2">
<h2>ç®±å›¾</h2>
<pre class="r"><code># Load data
data(&quot;ToothGrowth&quot;)
df &lt;- ToothGrowth
#head(df, 4)
#&gt;    len supp dose
#&gt; 1  4.2   VC  0.5
#&gt; 2 11.5   VC  0.5
#&gt; 3  7.3   VC  0.5
#&gt; 4  5.8   VC  0.5

# Box plots with jittered points
# :::::::::::::::::::::::::::::::::::::::::::::::::::
# Change outline colors by groups: dose
# Use custom color palette
# Add jitter points and change the shape by groups
 p &lt;- ggboxplot(df, x = &quot;dose&quot;, y = &quot;len&quot;, add = &quot;jitter&quot;,
                color = &quot;dose&quot;, shape = &quot;dose&quot;, 
                palette =c(&quot;#00AFBB&quot;, &quot;#E7B800&quot;, &quot;#FC4E07&quot;))
 p</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="æ¡å½¢å›¾" class="section level2">
<h2>æ¡å½¢å›¾</h2>
<pre class="r"><code># Load data
data(&quot;mtcars&quot;)
dfm &lt;- mtcars
# Convert the cyl variable to a factor
dfm$cyl &lt;- as.factor(dfm$cyl)
# Add the name colums
dfm$name &lt;- rownames(dfm)
# Inspect the data
#head(dfm[, c(&quot;name&quot;, &quot;wt&quot;, &quot;mpg&quot;, &quot;cyl&quot;)])
#&gt;                                name    wt  mpg cyl
#&gt; Mazda RX4                 Mazda RX4 2.620 21.0   6
#&gt; Mazda RX4 Wag         Mazda RX4 Wag 2.875 21.0   6
#&gt; Datsun 710               Datsun 710 2.320 22.8   4
#&gt; Hornet 4 Drive       Hornet 4 Drive 3.215 21.4   6
#&gt; Hornet Sportabout Hornet Sportabout 3.440 18.7   8
#&gt; Valiant                     Valiant 3.460 18.1   6

ggbarplot(dfm, x = &quot;name&quot;, y = &quot;mpg&quot;,
          fill = &quot;cyl&quot;,               # change fill color by cyl
          color = &quot;white&quot;,            # Set bar border colors to white
          palette = &quot;jco&quot;,            # jco journal color palett. see ?ggpar
          sort.val = &quot;desc&quot;,          # Sort the value in dscending order
          sort.by.groups = TRUE,      # Sort inside each group
          x.text.angle = 90           # Rotate vertically x axis texts
          )</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<pre class="r"><code>ggbarplot(dfm, x = &quot;name&quot;, y = &quot;mpg&quot;,
          fill = &quot;cyl&quot;,               # change fill color by cyl
          color = &quot;white&quot;,            # Set bar border colors to white
          palette = &quot;jco&quot;,            # jco journal color palett. see ?ggpar
          sort.val = &quot;desc&quot;,          # Sort the value in dscending order
          sort.by.groups = TRUE,      # Don&#39;t sort inside each group
          x.text.angle = 90,          # Rotate vertically x axis texts
          legend.title = &quot;CYL&quot;        # Set legend title
          )</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-21-1.png" width="672" />
<br></p>
</div>
<div id="è¡¨æ ¼" class="section level2">
<h2>è¡¨æ ¼</h2>
<pre class="r"><code>#Medium blue (mBlue) theme
ggtexttable(head(iris), rows = NULL, theme = ttheme(&quot;mBlue&quot;))</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<pre class="r"><code>main.title &lt;- &quot;Edgar Anderson&#39;s Iris Data&quot;
subtitle &lt;- paste0(
&quot;This famous (Fisher&#39;s or Anderson&#39;s) iris data set gives the measurements&quot;,
&quot; in centimeters of the variables sepal length and width and petal length and width,&quot;,
 &quot; respectively, for 50 flowers from each of 3 species of iris.&quot;,
 &quot; The species are Iris setosa, versicolor, and virginica.&quot;
) %&gt;%
 strwrap(width = 80) %&gt;%
 paste(collapse = &quot;\n&quot;)

tab &lt;- ggtexttable(head(iris), theme = ttheme(&quot;light&quot;))
tab %&gt;%
 tab_add_title(text = subtitle, face = &quot;plain&quot;, size = 10) %&gt;%
 tab_add_title(text = main.title, face = &quot;bold&quot;, padding = unit(0.1, &quot;line&quot;)) %&gt;%
 tab_add_footnote(text = &quot;*Table created using ggpubr&quot;, size = 10, face = &quot;italic&quot;)</code></pre>
<p><img src="/blog/2022-09-20-r-ggplot2-ggpubr/index_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="å¹¿è€Œå‘Šä¹‹" class="section level2">
<h2>å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
</div>
]]></content:encoded>
    </item>
    
    <item>
      <title>Rè¯­è¨€ |  ggplot2ç®€æ˜ç»˜å›¾ä¹‹ç›´æ–¹å›¾</title>
      <link>https://textdata.cn/blog/2022-09-04-r-ggplot2-histogram/</link>
      <pubDate>Sun, 04 Sep 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-09-04-r-ggplot2-histogram/</guid>
      <description>æ•™ä½ ç†è§£å›¾å±‚ã€æ•°geomã€labsç­‰å‡½æ•°ï¼Œè½»æ¾ä¸Šæ‰‹ggplot2</description>
      <content:encoded><![CDATA[


<blockquote>
<p>åŸæ–‡: <a href="https://www.miriamheiss.com/posts/histogram-ggplot/" class="uri">https://www.miriamheiss.com/posts/histogram-ggplot/</a></p>
</blockquote>
<p>ggplot() å‡½æ•°å¯¹ä»»ä½•æ•°æ®ç§‘å­¦å®¶éƒ½æ˜¯å¿…ä¸å¯å°‘çš„, taæ˜¯ä¸€ç§éå¸¸ç®€å•çš„ç»˜å›¾å‡½æ•°ã€‚åˆšå¼€å§‹æ¥è§¦å¯èƒ½çœ‹èµ·æ¥å¾ˆéš¾ï¼Œ ä¸è¿‡ä¸è¦å®³æ€•ï¼Œå› ä¸ºä¸€æ—¦å­¦äº†åŸºç¡€çŸ¥è¯†ï¼Œä¸€åˆ‡éƒ½ä¼šå˜å¾—æ¸…æ™°ï¼ è®©æˆ‘ä»¬å¼€å§‹ï¼</p>
<p>ä¹‹å‰åˆ†äº«è¿‡ <a href="https://textdata.cn/blog/2022-09-04-r-ggplot2-simple-tutorial/">Rè¯­è¨€ | ggplot2ç®€æ˜ç»˜å›¾ä¹‹æ•£ç‚¹å›¾</a>,æ˜¯ä»¥æ•£ç‚¹å›¾ä¸ºä¾‹ç®€å•è®²è§£ggplot2çš„ç»˜å›¾ï¼Œä»Šå¤©æˆ‘ä»¬å°†ä»¥ç›´æ–¹å›¾ä½œä¸ºä¸»è®²å›¾å½¢ã€‚</p>
<p><img src="img/nobel-vis.png" /></p>
<p>ç›´æ–¹å›¾æ˜¯å¦ä¸€ç§ggplot2å¸¸ç”¨çš„å›¾å½¢ï¼Œä¸æ•£ç‚¹å›¾ç±»ä¼¼ï¼Œä¹Ÿæ˜¯åˆ†å¤šä¸ªå›¾å±‚è¿›è¡Œé€å±‚ç»˜åˆ¶ã€‚</p>
<p><br></p>
<div id="å‡†å¤‡" class="section level2">
<h2>å‡†å¤‡</h2>
<p>å¯¼å…¥æœ¬æ–‡è¦ç”¨åˆ°çš„åŒ…</p>
<pre class="r"><code>library(tidyverse) </code></pre>
<pre><code>## â”€â”€ Attaching packages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse 1.3.2 â”€â”€
## âœ” ggplot2 3.3.6     âœ” purrr   0.3.4
## âœ” tibble  3.1.8     âœ” dplyr   1.0.9
## âœ” tidyr   1.2.0     âœ” stringr 1.4.1
## âœ” readr   2.1.2     âœ” forcats 0.5.1
## â”€â”€ Conflicts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse_conflicts() â”€â”€
## âœ– dplyr::filter() masks stats::filter()
## âœ– dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(primer.data) #å‡†å¤‡æ•°æ®
library(showtext)</code></pre>
<pre><code>## Loading required package: sysfonts
## Loading required package: showtextdb</code></pre>
<pre class="r"><code>showtext_auto()  #æ˜¾ç¤ºä¸­æ–‡

#install.packages(&quot;MetBrewer&quot;)
library(MetBrewer) #é…è‰²åŒ…</code></pre>
<p><br></p>
</div>
<div id="é€‰æ‹©æ•°æ®" class="section level2">
<h2>é€‰æ‹©æ•°æ®</h2>
<p>ä½¿ç”¨data()å‡½æ•°å¯ä»¥æŸ¥çœ‹ç°æœ‰çš„æ•°æ®é›†æœ‰å“ªäº›ï¼Œ</p>
<pre><code>data()</code></pre>
<p>è¿™é‡Œé€‰æ‹©nobelï¼Œä½¿ç”¨View(nobel)å¯ä»¥åœ¨æ–°æ‰“å¼€ä¸€ä¸ªçª—å£ï¼Œæ–¹ä¾¿äº†è§£æ•°æ®</p>
<pre><code>View(nobel)</code></pre>
<p><img src="img/View.png" /></p>
<p><br></p>
</div>
<div id="ç”»å¸ƒgglot" class="section level2">
<h2>ç”»å¸ƒgglot</h2>
<p>ç”»ç”»éœ€è¦ç”»å¸ƒï¼Œå¯¹äºæ•°æ®åˆ†æçš„ç»˜å›¾ä¹Ÿæ˜¯åŒç†ã€‚å¯¼å…¥ç›¸å…³RåŒ…åï¼Œ ç”¨ggplotå‡½æ•°æ„é€ ä¸€ä¸ªç”»å¸ƒã€‚å› ä¸ºè¿˜æ²¡è®¾å®šæ•°æ®ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªç©ºç”»å¸ƒ</p>
<pre class="r"><code>ggplot()</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-histogram/index_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>æˆ‘ä»¬å°†ä½¿ç”¨ nobelæ•°æ®é›†ï¼Œä¼ å…¥æ•°æ®çš„ä»£ç ggplot(data=nobel)</p>
<pre class="r"><code>ggplot(data=nobel)</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-histogram/index_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>ç”»å¸ƒçœ‹èµ·æ¥ä¾ç„¶æ˜¯ç©ºç™½çš„ï¼Œä¸è¦ç´§å¼ ã€‚ç†è§£è¿™ä¸ªä¹‹å‰ç±»æ¯”PSè¿™ç±»ç»˜å›¾è½¯ä»¶ï¼Œå°†ä¿®å›¾å·¥ä½œçœ‹åšæ˜¯å¾ˆå¤šä¸ªå›¾å±‚çš„å åŠ ã€‚ç°åœ¨æˆ‘ä»¬ä½¿ç”¨æ—¶ä¾ç„¶åœ¨æœ€åº•å±‚çš„ggplotå›¾å±‚ï¼Œåœ¨ggplotå‡½æ•°å†…æ·»åŠ mapping=aes()å‚æ•°ï¼Œå‡†å¤‡æ·»åŠ xè½´ã€yè½´ã€colorã€‚çš„å›¾å±‚ã€‚</p>
<pre class="r"><code>ggplot(data=nobel,
       mapping=aes())</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-histogram/index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>æ³¨æ„äº†ï¼Œç°åœ¨å›¾å±‚å³å°†å‘ç”Ÿå˜åŒ–ã€‚æˆ‘ä»¬é€‰æ‹©è®¾ç½®xè½´ <code>aes(x=year)</code></p>
<ul>
<li>xè½´ year</li>
</ul>
<pre class="r"><code>ggplot(data=nobel,
       mapping=aes(x=year))</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-histogram/index_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>ç°åœ¨æˆ‘ä»¬å°†å¼€å§‹æ·»åŠ é«˜å±‚æ¬¡çš„å›¾å±‚ï¼Œä¹Ÿä¼šæ˜¾ç¤ºè¶Šæ¥è¶Šå¤šçš„ä¿¡æ¯ã€‚</p>
<p><br></p>
</div>
<div id="æ·»åŠ geom" class="section level2">
<h2>æ·»åŠ geom</h2>
<p>ç°åœ¨æ·»åŠ geomå±‚ï¼Œè¯¥å±‚æ˜¯é€šè¿‡ <code>+</code> æ„å»ºåœ¨ggplotå±‚ä¹‹ä¸Šã€‚è¿™é‡Œä½¿ç”¨ <code>geom_histogram()</code> ç»˜åˆ¶ç›´æ–¹å›¾ï¼Œ</p>
<pre class="r"><code>ggplot(data=nobel,
       mapping=aes(x=year))+
  geom_histogram()</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-histogram/index_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>ä¸é”™ï¼Œæ¥ä¸‹æ¥æ·»åŠ color</p>
<p><br></p>
</div>
<div id="fillå’Œcolor" class="section level2">
<h2>fillå’Œcolor</h2>
<p>æŒ‰ç…§å­¦ç§‘å¯¹æ¯ä¸ªæ—¶æœŸçš„è¯ºå¥–è¿›è¡Œä¸“ä¸šåˆ†ç±»ï¼Œä½¿ç”¨aesä¸­çš„fillå‚æ•°ã€‚</p>
<pre class="r"><code>ggplot(data=nobel,
       mapping=aes(x=year, fill=field))+
  geom_histogram()</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-histogram/index_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>ä½†åŒä¸€æ—¶æœŸï¼Œä¸åŒä¸“ä¸šä¹‹é—´æ²¡æœ‰è¾¹ç•ŒåŒºåˆ†ï¼Œå®¹æ˜“æ··ä¹±ã€‚è¿™é‡Œè®¾ç½® <code>geom_histogram()</code> çš„ <code>color="white"</code>ã€‚</p>
<pre class="r"><code>ggplot(data=nobel,
       mapping=aes(x=year, fill=field))+
  geom_histogram(color=&quot;white&quot;)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-histogram/index_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="æ›´æ”¹é…è‰²" class="section level2">
<h2>æ›´æ”¹é…è‰²</h2>
<p>æ›´æ”¹geomå±‚çš„é¢œè‰²ï¼Œæ‰€ä»¥è¯¥å±‚ç´§è´´geomå±‚ï¼Œä¸”åœ¨geomå±‚ä¹‹ä¸Šã€‚è®¾ç½®æ–¹æ³•å¯ä»¥ä½¿ç”¨ <code>scale_fill_manual()</code> å³å¯ã€‚<code>scale_fill_munual()</code> ä¸­çš„valueså¯ä»¥ä¼ å…¥é¢œè‰²å­—ç¬¦ä¸²ã€‚</p>
<pre class="r"><code>ggplot(data=nobel,
       mapping=aes(x=year, fill=field))+
  scale_fill_manual(values=c(&quot;red&quot;,
                             &quot;orange&quot;,
                             &quot;yellow&quot;,
                             &quot;green&quot;,
                             &quot;blue&quot;,
                             &quot;purple&quot;))+
  geom_histogram(color=&quot;white&quot;)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-histogram/index_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>æ¼‚äº®ï¼ è¿™äº›é¢œè‰²çœŸçš„å¾ˆæ˜è‰³ï¼Œ <code>scale_fill_munual()</code> è¿˜å¯ä»¥é€‰æ‹©åå…­è¿›åˆ¶é¢œè‰²å­—ç¬¦ä¸²è¿›è¡Œé¢œè‰²è‡ªå®šä¹‰</p>
<pre class="r"><code>ggplot(data = nobel,
       mapping = aes(x = year,
                     fill = field)) +
  scale_fill_manual(values = c(&quot;#f73c39&quot;,
                               &quot;#f79b39&quot;,
                               &quot;#f7ee39&quot;,
                               &quot;#228c14&quot;,
                               &quot;#1e80c7&quot;,
                               &quot;#7c148c&quot;)) + 
  geom_histogram(color = &quot;white&quot;)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-histogram/index_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="é…è‰²åŒ…metbrewer" class="section level2">
<h2>é…è‰²åŒ…MetBrewer</h2>
<p>å¯¹äºæˆ‘ä»¬æ™®é€šäººè€Œè¨€ï¼Œ ä¸éœ€è¦è®°ä½é‚£ä¹ˆå¤šé¢œè‰²ï¼Œåªéœ€è¦åœ¨é…è‰²æ–¹æ¡ˆä¸­é€‰æ‹©å¥½çœ‹çš„é…è‰²å³å¯ã€‚ <a href="https://github.com/BlakeRMills/MetBrewer">MetBrewer</a>æ˜¯Rè¯­è¨€çš„é…è‰²åŒ…ï¼Œåœ¨æ–‡ç« å¼€å¤´å·²ç»æå‰å¯¼å…¥äº†ã€‚ä¸‹å›¾æ˜¯MetBrewerçš„é…è‰²æ–¹æ¡ˆï¼Œé€‰æ‹©ä¸€ç§é…è‰²æ–¹æ¡ˆçš„åå­—,å¦‚Signac</p>
<p><img src="img/metbrewer_palettes.png" /></p>
<pre class="r"><code>ggplot(data = nobel,
       mapping = aes(x = year,
                     fill = field)) +
  #é€‰æ‹©Signacé…è‰²æ–¹æ¡ˆï¼Œä½¿ç”¨å…¶ä¸­6ç§é¢œè‰²
  scale_fill_manual(values = met.brewer(&#39;Signac&#39;, 6)) + 
  geom_histogram(color = &quot;white&quot;)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-histogram/index_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="æ ‡ç­¾labs" class="section level2">
<h2>æ ‡ç­¾labs</h2>
<p>ç°åœ¨æˆ‘ä»¬éœ€è¦ç”¨<code>labs()</code> å‡½æ•°ç»™å›¾ç‰‡æ·»åŠ æ ‡ç­¾å›¾å±‚ã€‚ä¾‹å¦‚titleã€subtitleã€captionã€xã€yã€legendã€‚</p>
<pre class="r"><code>ggplot(data = nobel,
       mapping = aes(x = year,
                     fill = field)) +
  scale_fill_manual(values = met.brewer(&quot;Signac&quot;, 6)) + 
  geom_histogram(color = &quot;white&quot;) +
  labs(title = &quot;Nobel prize laureate numbers have gone up in past 50 years&quot;,
       subtitle = &quot;Physics, Medicine, and Chemistry have largest numbers of laureates&quot;,
       x = &quot;Year&quot;,
       y = &quot;Number of laureates&quot;)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-histogram/index_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>ç°åœ¨xè½´ã€yè½´ã€æ ‡é¢˜éƒ½æ˜¯å¤§å†™ï¼Œéœ€è¦å°†fieldä¹Ÿå¤§å†™ã€‚è¿™é‡Œåœ¨labs(fill=â€˜Yearâ€™)æ›´æ”¹yearä¸ºYear</p>
<pre class="r"><code>ggplot(data = nobel,
       mapping = aes(x = year,
                     fill = field)) +
  scale_fill_manual(values = met.brewer(&quot;Signac&quot;, 6)) + 
  geom_histogram(color = &quot;white&quot;) +
  labs(title = &quot;Nobel prize laureate numbers have gone up in past 50 years&quot;,
       subtitle = &quot;Physics, Medicine, and Chemistry have largest numbers of laureates&quot;,
       x = &quot;Year&quot;,
       y = &quot;Number of laureates&quot;,
       fill=&#39;Field&#39;)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-histogram/index_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="ä¸­æ–‡" class="section level2">
<h2>ä¸­æ–‡</h2>
<p>é»˜è®¤ggplot2ä¸æ”¯æŒä¸­æ–‡ï¼Œä¸ºäº†èƒ½æ˜¾ç¤ºä¸­æ–‡ï¼Œä½¿ç”¨showtextåŒ…ã€‚å‰æ–‡å·²æå‰å¯¼å…¥å¹¶åˆå§‹åŒ–</p>
<pre><code>library(showtext) #æ”¯æŒä¸­æ–‡
showtext_auto()</code></pre>
<p>è¿è¡Œä¸­æ–‡çš„ä»£ç </p>
<pre class="r"><code>#æŠŠå­¦ç§‘è½¬ä¸ºä¸­æ–‡
nobel2 &lt;- nobel %&gt;% 
  mutate(
    field = case_when(field==&#39;Chemistry&#39; ~ &#39;åŒ–å­¦&#39;,
                       field==&#39;Economics&#39; ~ &#39;ç»æµå­¦&#39;,
                       field==&#39;Medicine&#39; ~ &#39;ç»æµå­¦&#39;,
                       field==&#39;Peace&#39; ~ &#39;å’Œå¹³&#39;,
                       field==&#39;Physics&#39; ~ &#39;ç‰©ç†å­¦&#39;,
                       field==&#39;Literature&#39; ~ &#39;æ–‡å­¦&#39;))



#ç»˜å›¾
ggplot(data = nobel2,
       mapping = aes(x = year,
                     fill = field)) +
  scale_fill_manual(values = met.brewer(&quot;Signac&quot;, 6)) + 
  geom_histogram(color = &quot;white&quot;) +
  labs(title = &quot;è¿‡å»50å¹´è¯ºè´å°”å¥–å¾—ä¸»äººæ•°ä¸€ç›´ä¿æŒå¢é•¿è¶‹åŠ¿&quot;,
       subtitle = &quot;ç‰©ç†å­¦ã€åŒ»å­¦å’ŒåŒ–å­¦çš„è·å¥–è€…äººæ•°æœ€å¤š&quot;,
       x = &quot;å¹´ä»½&quot;,
       y = &quot;è·å¥–äººæ•°&quot;,
       fill=&#39;é¢†åŸŸ&#39;)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-histogram/index_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="å¹¿è€Œå‘Šä¹‹" class="section level2">
<h2>å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
</div>
]]></content:encoded>
    </item>
    
    <item>
      <title>Rè¯­è¨€ | ggplot2ç®€æ˜ç»˜å›¾ä¹‹åŠ¨æ€å›¾</title>
      <link>https://textdata.cn/blog/2022-09-04-r-ggplot2-ggplotly/</link>
      <pubDate>Sun, 04 Sep 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-09-04-r-ggplot2-ggplotly/</guid>
      <description>è½»æ¾ä¸Šæ‰‹ggplotly</description>
      <content:encoded><![CDATA[
<script src="/blog/2022-09-04-r-ggplot2-ggplotly/index_files/htmlwidgets/htmlwidgets.js"></script>
<script src="/blog/2022-09-04-r-ggplot2-ggplotly/index_files/plotly-binding/plotly.js"></script>
<script src="/blog/2022-09-04-r-ggplot2-ggplotly/index_files/typedarray/typedarray.min.js"></script>
<script src="/blog/2022-09-04-r-ggplot2-ggplotly/index_files/jquery/jquery.min.js"></script>
<link href="/blog/2022-09-04-r-ggplot2-ggplotly/index_files/crosstalk/css/crosstalk.min.css" rel="stylesheet" />
<script src="/blog/2022-09-04-r-ggplot2-ggplotly/index_files/crosstalk/js/crosstalk.min.js"></script>
<link href="/blog/2022-09-04-r-ggplot2-ggplotly/index_files/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="/blog/2022-09-04-r-ggplot2-ggplotly/index_files/plotly-main/plotly-latest.min.js"></script>


<blockquote>
<p>åŸæ–‡: <a href="https://www.miriamheiss.com/posts/graphing-with-ggplot/" class="uri">https://www.miriamheiss.com/posts/graphing-with-ggplot/</a></p>
</blockquote>
<p>ggplot() å‡½æ•°å¯¹ä»»ä½•æ•°æ®ç§‘å­¦å®¶éƒ½æ˜¯å¿…ä¸å¯å°‘çš„, taæ˜¯ä¸€ç§éå¸¸ç®€å•çš„ç»˜å›¾å‡½æ•°ã€‚åˆšå¼€å§‹æ¥è§¦å¯èƒ½çœ‹èµ·æ¥å¾ˆéš¾ï¼Œ ä¸è¿‡ä¸è¦å®³æ€•ï¼Œå› ä¸ºä¸€æ—¦å­¦äº†åŸºç¡€çŸ¥è¯†ï¼Œä¸€åˆ‡éƒ½ä¼šå˜å¾—æ¸…æ™°ï¼ è®©æˆ‘ä»¬å¼€å§‹ï¼</p>
<p>ggplotlyå‡½æ•°å¯ä»¥ç›´æ¥åˆ›å»ºåŠ¨æ€äº¤äº’å›¾æ ‡ï¼Œ è¯¥å‡½æ•°å†…ç½®äºggplot()ä¸­ã€‚ ä»Šå¤©æˆ‘ä»¬è¦ç»˜åˆ¶åŠ¨æ€æ•£ç‚¹å›¾</p>
<p><br></p>
<div id="å‡†å¤‡" class="section level2">
<h2>å‡†å¤‡</h2>
<p>å¯¼å…¥æœ¬æ–‡è¦ç”¨åˆ°çš„åŒ…</p>
<pre class="r"><code>library(tidyverse) 
library(gapminder) #å‡†å¤‡æ•°æ®
library(MetBrewer) #é…è‰²åŒ…
library(plotly) #åŠ¨æ€å›¾</code></pre>
<p><br></p>
</div>
<div id="quick-start" class="section level2">
<h2>quick-start</h2>
<p>åªè¦ä¼šggplotï¼Œåªå¢å¤šä¸€è¡Œä»£ç å³å¯ç»˜åˆ¶å‡ºåŠ¨æ€å›¾ã€‚é¼ æ ‡æ‚¬æµ®å¤„ä¼šæ˜¾ç¤ºä¸€ä¸ªé»‘è‰²å¼¹å‡ºæ¡†ã€‚</p>
<pre class="r"><code>library(plotly)
library(dplyr)
library(gapminder)

#é€‰å‡º2007å¹´çš„æ•°æ®
gapminder_2007 &lt;- gapminder %&gt;% 
  filter(year==&quot;2007&quot;) %&gt;% 
  dplyr::select(-year)

p &lt;- ggplot(data = gapminder_2007, 
            mapping = aes(x=gdpPercap, 
                          y=lifeExp, 
                          size = pop)) +
  geom_point(alpha=0.7)

#å°†é™æ€å›¾è½¬ä¸ºåŠ¨æ€å›¾
ggplotly(p)</code></pre>
<div id="htmlwidget-1" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"data":[{"x":[974.5803384,5937.029526,6223.367465,4797.231267,12779.37964,34435.36744,36126.4927,29796.04834,1391.253792,33692.60508,1441.284873,3822.137084,7446.298803,12569.85177,9065.800825,10680.79282,1217.032994,430.0706916,1713.778686,2042.09524,36319.23501,706.016537,1704.063724,13171.63885,4959.114854,7006.580419,986.1478792,277.5518587,3632.557798,9645.06142,1544.750112,14619.22272,8948.102923,22833.30851,35278.41874,2082.481567,6025.374752,6873.262326,5581.180998,5728.353514,12154.08975,641.3695236,690.8055759,33207.0844,30470.0167,13206.48452,752.7497265,32170.37442,1327.60891,27538.41188,5186.050003,942.6542111,579.231743,1201.637154,3548.330846,39724.97867,18008.94444,36180.78919,2452.210407,3540.651564,11605.71449,4471.061906,40675.99635,25523.2771,28569.7197,7320.880262,31656.06806,4519.461171,1463.249282,1593.06548,23348.13973,47306.98978,10461.05868,1569.331442,414.5073415,12057.49928,1044.770126,759.3499101,12451.6558,1042.581557,1803.151496,10956.99112,11977.57496,3095.772271,9253.896111,3820.17523,823.6856205,944,4811.060429,1091.359778,36797.93332,25185.00911,2749.320965,619.6768924,2013.977305,49357.19017,22316.19287,2605.94758,9809.185636,4172.838464,7408.905561,3190.481016,15389.92468,20509.64777,19328.70901,7670.122558,10808.47561,863.0884639,1598.435089,21654.83194,1712.472136,9786.534714,862.5407561,47143.17964,18678.31435,25768.25759,926.1410683,9269.657808,28821.0637,3970.095407,2602.394995,4513.480643,33859.74835,37506.41907,4184.548089,28718.27684,1107.482182,7458.396327,882.9699438,18008.50924,7092.923025,8458.276384,1056.380121,33203.26128,42951.65309,10611.46299,11415.80569,2441.576404,3025.349798,2280.769906,1271.211593,469.7092981],"y":[43.828,76.423,72.301,42.731,75.32,81.235,79.829,75.635,64.062,79.441,56.728,65.554,74.852,50.728,72.39,73.005,52.295,49.58,59.723,50.43,80.653,44.741,50.651,78.553,72.961,72.889,65.152,46.462,55.322,78.782,48.328,75.748,78.273,76.486,78.332,54.791,72.235,74.994,71.338,71.878,51.579,58.04,52.947,79.313,80.657,56.735,59.448,79.406,60.022,79.483,70.259,56.007,46.388,60.916,70.198,82.208,73.338,81.757,64.698,70.65,70.964,59.545,78.885,80.745,80.546,72.567,82.603,72.535,54.11,67.297,78.623,77.588,71.993,42.592,45.678,73.952,59.443,48.303,74.241,54.467,64.164,72.801,76.195,66.803,74.543,71.164,42.082,62.069,52.906,63.785,79.762,80.204,72.899,56.867,46.859,80.196,75.64,65.483,75.537,71.752,71.421,71.688,75.563,78.098,78.746,76.442,72.476,46.242,65.528,72.777,63.062,74.002,42.568,79.972,74.663,77.926,48.159,49.339,80.941,72.396,58.556,39.613,80.884,81.701,74.143,78.4,52.517,70.616,58.42,69.819,73.923,71.777,51.542,79.425,78.242,76.384,73.747,74.249,73.422,62.698,42.384,43.487],"text":["gdpPercap:   974.5803<br />lifeExp: 43.828<br />pop:   31889923","gdpPercap:  5937.0295<br />lifeExp: 76.423<br />pop:    3600523","gdpPercap:  6223.3675<br />lifeExp: 72.301<br />pop:   33333216","gdpPercap:  4797.2313<br />lifeExp: 42.731<br />pop:   12420476","gdpPercap: 12779.3796<br />lifeExp: 75.320<br />pop:   40301927","gdpPercap: 34435.3674<br />lifeExp: 81.235<br />pop:   20434176","gdpPercap: 36126.4927<br />lifeExp: 79.829<br />pop:    8199783","gdpPercap: 29796.0483<br />lifeExp: 75.635<br />pop:     708573","gdpPercap:  1391.2538<br />lifeExp: 64.062<br />pop:  150448339","gdpPercap: 33692.6051<br />lifeExp: 79.441<br />pop:   10392226","gdpPercap:  1441.2849<br />lifeExp: 56.728<br />pop:    8078314","gdpPercap:  3822.1371<br />lifeExp: 65.554<br />pop:    9119152","gdpPercap:  7446.2988<br />lifeExp: 74.852<br />pop:    4552198","gdpPercap: 12569.8518<br />lifeExp: 50.728<br />pop:    1639131","gdpPercap:  9065.8008<br />lifeExp: 72.390<br />pop:  190010647","gdpPercap: 10680.7928<br />lifeExp: 73.005<br />pop:    7322858","gdpPercap:  1217.0330<br />lifeExp: 52.295<br />pop:   14326203","gdpPercap:   430.0707<br />lifeExp: 49.580<br />pop:    8390505","gdpPercap:  1713.7787<br />lifeExp: 59.723<br />pop:   14131858","gdpPercap:  2042.0952<br />lifeExp: 50.430<br />pop:   17696293","gdpPercap: 36319.2350<br />lifeExp: 80.653<br />pop:   33390141","gdpPercap:   706.0165<br />lifeExp: 44.741<br />pop:    4369038","gdpPercap:  1704.0637<br />lifeExp: 50.651<br />pop:   10238807","gdpPercap: 13171.6388<br />lifeExp: 78.553<br />pop:   16284741","gdpPercap:  4959.1149<br />lifeExp: 72.961<br />pop: 1318683096","gdpPercap:  7006.5804<br />lifeExp: 72.889<br />pop:   44227550","gdpPercap:   986.1479<br />lifeExp: 65.152<br />pop:     710960","gdpPercap:   277.5519<br />lifeExp: 46.462<br />pop:   64606759","gdpPercap:  3632.5578<br />lifeExp: 55.322<br />pop:    3800610","gdpPercap:  9645.0614<br />lifeExp: 78.782<br />pop:    4133884","gdpPercap:  1544.7501<br />lifeExp: 48.328<br />pop:   18013409","gdpPercap: 14619.2227<br />lifeExp: 75.748<br />pop:    4493312","gdpPercap:  8948.1029<br />lifeExp: 78.273<br />pop:   11416987","gdpPercap: 22833.3085<br />lifeExp: 76.486<br />pop:   10228744","gdpPercap: 35278.4187<br />lifeExp: 78.332<br />pop:    5468120","gdpPercap:  2082.4816<br />lifeExp: 54.791<br />pop:     496374","gdpPercap:  6025.3748<br />lifeExp: 72.235<br />pop:    9319622","gdpPercap:  6873.2623<br />lifeExp: 74.994<br />pop:   13755680","gdpPercap:  5581.1810<br />lifeExp: 71.338<br />pop:   80264543","gdpPercap:  5728.3535<br />lifeExp: 71.878<br />pop:    6939688","gdpPercap: 12154.0897<br />lifeExp: 51.579<br />pop:     551201","gdpPercap:   641.3695<br />lifeExp: 58.040<br />pop:    4906585","gdpPercap:   690.8056<br />lifeExp: 52.947<br />pop:   76511887","gdpPercap: 33207.0844<br />lifeExp: 79.313<br />pop:    5238460","gdpPercap: 30470.0167<br />lifeExp: 80.657<br />pop:   61083916","gdpPercap: 13206.4845<br />lifeExp: 56.735<br />pop:    1454867","gdpPercap:   752.7497<br />lifeExp: 59.448<br />pop:    1688359","gdpPercap: 32170.3744<br />lifeExp: 79.406<br />pop:   82400996","gdpPercap:  1327.6089<br />lifeExp: 60.022<br />pop:   22873338","gdpPercap: 27538.4119<br />lifeExp: 79.483<br />pop:   10706290","gdpPercap:  5186.0500<br />lifeExp: 70.259<br />pop:   12572928","gdpPercap:   942.6542<br />lifeExp: 56.007<br />pop:    9947814","gdpPercap:   579.2317<br />lifeExp: 46.388<br />pop:    1472041","gdpPercap:  1201.6372<br />lifeExp: 60.916<br />pop:    8502814","gdpPercap:  3548.3308<br />lifeExp: 70.198<br />pop:    7483763","gdpPercap: 39724.9787<br />lifeExp: 82.208<br />pop:    6980412","gdpPercap: 18008.9444<br />lifeExp: 73.338<br />pop:    9956108","gdpPercap: 36180.7892<br />lifeExp: 81.757<br />pop:     301931","gdpPercap:  2452.2104<br />lifeExp: 64.698<br />pop: 1110396331","gdpPercap:  3540.6516<br />lifeExp: 70.650<br />pop:  223547000","gdpPercap: 11605.7145<br />lifeExp: 70.964<br />pop:   69453570","gdpPercap:  4471.0619<br />lifeExp: 59.545<br />pop:   27499638","gdpPercap: 40675.9964<br />lifeExp: 78.885<br />pop:    4109086","gdpPercap: 25523.2771<br />lifeExp: 80.745<br />pop:    6426679","gdpPercap: 28569.7197<br />lifeExp: 80.546<br />pop:   58147733","gdpPercap:  7320.8803<br />lifeExp: 72.567<br />pop:    2780132","gdpPercap: 31656.0681<br />lifeExp: 82.603<br />pop:  127467972","gdpPercap:  4519.4612<br />lifeExp: 72.535<br />pop:    6053193","gdpPercap:  1463.2493<br />lifeExp: 54.110<br />pop:   35610177","gdpPercap:  1593.0655<br />lifeExp: 67.297<br />pop:   23301725","gdpPercap: 23348.1397<br />lifeExp: 78.623<br />pop:   49044790","gdpPercap: 47306.9898<br />lifeExp: 77.588<br />pop:    2505559","gdpPercap: 10461.0587<br />lifeExp: 71.993<br />pop:    3921278","gdpPercap:  1569.3314<br />lifeExp: 42.592<br />pop:    2012649","gdpPercap:   414.5073<br />lifeExp: 45.678<br />pop:    3193942","gdpPercap: 12057.4993<br />lifeExp: 73.952<br />pop:    6036914","gdpPercap:  1044.7701<br />lifeExp: 59.443<br />pop:   19167654","gdpPercap:   759.3499<br />lifeExp: 48.303<br />pop:   13327079","gdpPercap: 12451.6558<br />lifeExp: 74.241<br />pop:   24821286","gdpPercap:  1042.5816<br />lifeExp: 54.467<br />pop:   12031795","gdpPercap:  1803.1515<br />lifeExp: 64.164<br />pop:    3270065","gdpPercap: 10956.9911<br />lifeExp: 72.801<br />pop:    1250882","gdpPercap: 11977.5750<br />lifeExp: 76.195<br />pop:  108700891","gdpPercap:  3095.7723<br />lifeExp: 66.803<br />pop:    2874127","gdpPercap:  9253.8961<br />lifeExp: 74.543<br />pop:     684736","gdpPercap:  3820.1752<br />lifeExp: 71.164<br />pop:   33757175","gdpPercap:   823.6856<br />lifeExp: 42.082<br />pop:   19951656","gdpPercap:   944.0000<br />lifeExp: 62.069<br />pop:   47761980","gdpPercap:  4811.0604<br />lifeExp: 52.906<br />pop:    2055080","gdpPercap:  1091.3598<br />lifeExp: 63.785<br />pop:   28901790","gdpPercap: 36797.9333<br />lifeExp: 79.762<br />pop:   16570613","gdpPercap: 25185.0091<br />lifeExp: 80.204<br />pop:    4115771","gdpPercap:  2749.3210<br />lifeExp: 72.899<br />pop:    5675356","gdpPercap:   619.6769<br />lifeExp: 56.867<br />pop:   12894865","gdpPercap:  2013.9773<br />lifeExp: 46.859<br />pop:  135031164","gdpPercap: 49357.1902<br />lifeExp: 80.196<br />pop:    4627926","gdpPercap: 22316.1929<br />lifeExp: 75.640<br />pop:    3204897","gdpPercap:  2605.9476<br />lifeExp: 65.483<br />pop:  169270617","gdpPercap:  9809.1856<br />lifeExp: 75.537<br />pop:    3242173","gdpPercap:  4172.8385<br />lifeExp: 71.752<br />pop:    6667147","gdpPercap:  7408.9056<br />lifeExp: 71.421<br />pop:   28674757","gdpPercap:  3190.4810<br />lifeExp: 71.688<br />pop:   91077287","gdpPercap: 15389.9247<br />lifeExp: 75.563<br />pop:   38518241","gdpPercap: 20509.6478<br />lifeExp: 78.098<br />pop:   10642836","gdpPercap: 19328.7090<br />lifeExp: 78.746<br />pop:    3942491","gdpPercap:  7670.1226<br />lifeExp: 76.442<br />pop:     798094","gdpPercap: 10808.4756<br />lifeExp: 72.476<br />pop:   22276056","gdpPercap:   863.0885<br />lifeExp: 46.242<br />pop:    8860588","gdpPercap:  1598.4351<br />lifeExp: 65.528<br />pop:     199579","gdpPercap: 21654.8319<br />lifeExp: 72.777<br />pop:   27601038","gdpPercap:  1712.4721<br />lifeExp: 63.062<br />pop:   12267493","gdpPercap:  9786.5347<br />lifeExp: 74.002<br />pop:   10150265","gdpPercap:   862.5408<br />lifeExp: 42.568<br />pop:    6144562","gdpPercap: 47143.1796<br />lifeExp: 79.972<br />pop:    4553009","gdpPercap: 18678.3144<br />lifeExp: 74.663<br />pop:    5447502","gdpPercap: 25768.2576<br />lifeExp: 77.926<br />pop:    2009245","gdpPercap:   926.1411<br />lifeExp: 48.159<br />pop:    9118773","gdpPercap:  9269.6578<br />lifeExp: 49.339<br />pop:   43997828","gdpPercap: 28821.0637<br />lifeExp: 80.941<br />pop:   40448191","gdpPercap:  3970.0954<br />lifeExp: 72.396<br />pop:   20378239","gdpPercap:  2602.3950<br />lifeExp: 58.556<br />pop:   42292929","gdpPercap:  4513.4806<br />lifeExp: 39.613<br />pop:    1133066","gdpPercap: 33859.7484<br />lifeExp: 80.884<br />pop:    9031088","gdpPercap: 37506.4191<br />lifeExp: 81.701<br />pop:    7554661","gdpPercap:  4184.5481<br />lifeExp: 74.143<br />pop:   19314747","gdpPercap: 28718.2768<br />lifeExp: 78.400<br />pop:   23174294","gdpPercap:  1107.4822<br />lifeExp: 52.517<br />pop:   38139640","gdpPercap:  7458.3963<br />lifeExp: 70.616<br />pop:   65068149","gdpPercap:   882.9699<br />lifeExp: 58.420<br />pop:    5701579","gdpPercap: 18008.5092<br />lifeExp: 69.819<br />pop:    1056608","gdpPercap:  7092.9230<br />lifeExp: 73.923<br />pop:   10276158","gdpPercap:  8458.2764<br />lifeExp: 71.777<br />pop:   71158647","gdpPercap:  1056.3801<br />lifeExp: 51.542<br />pop:   29170398","gdpPercap: 33203.2613<br />lifeExp: 79.425<br />pop:   60776238","gdpPercap: 42951.6531<br />lifeExp: 78.242<br />pop:  301139947","gdpPercap: 10611.4630<br />lifeExp: 76.384<br />pop:    3447496","gdpPercap: 11415.8057<br />lifeExp: 73.747<br />pop:   26084662","gdpPercap:  2441.5764<br />lifeExp: 74.249<br />pop:   85262356","gdpPercap:  3025.3498<br />lifeExp: 73.422<br />pop:    4018332","gdpPercap:  2280.7699<br />lifeExp: 62.698<br />pop:   22211743","gdpPercap:  1271.2116<br />lifeExp: 42.384<br />pop:   11746035","gdpPercap:   469.7093<br />lifeExp: 43.487<br />pop:   12311143"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":0.7,"size":[6.70929835135528,4.73930360976545,6.77527173254923,5.598900411863,7.07528369289545,6.12061399094626,5.2515712457991,4.1508288847182,10.1588656081799,5.44107849786917,5.24035330707835,5.33385387656466,4.86531670289218,4.40395768399738,10.9497220287062,5.16855282584858,5.7356199392208,5.26901439581437,5.72211801075065,5.9564773609874,6.77784403625228,4.8422259478741,5.42852631166044,5.86681801798997,22.6771653543307,7.23282911414924,4.15169850163956,7.9562662998771,4.76713328307226,4.81182340745332,5.97611663817011,4.85794694387522,5.52260397354913,5.42769965273683,4.97410786436283,4.06305719383881,5.35122378867242,5.69571313317988,8.43636871732964,5.1306777542305,4.08813627550005,4.90865391372741,8.32592567062337,4.94778140481952,7.84043376621969,4.36262596871136,4.41454467512776,8.49809123744673,6.25770233060098,5.46648280699294,5.61021330347734,5.40445197132612,4.3666011970112,5.27919109958551,5.18415329737334,5.13475345805415,5.40514308400654,3.9460291298415,21.1203680953071,11.5573968303758,8.11057131553749,6.49879524068774,4.8085649745634,5.07824026167466,7.74130405516196,4.6155666029278,9.65077587363648,5.03869129857133,6.87649613589243,6.28100350114513,7.4168446506104,4.56983839481089,4.78354392302204,4.480300710223,4.68010775450673,5.03693920169262,6.0461636385333,5.66517797748393,6.36196165910748,5.5697344023561,4.69148323166173,4.31315004312066,9.20063061292984,4.63065651672448,4.14203032052794,6.79437672410524,6.09253246174489,7.36876387589759,4.48845333089755,6.56775273775666,5.88528441607637,4.80944439195868,4.99737544049698,5.6338762963756,9.82271393327331,4.87472139425141,4.68175365529605,10.5466615830696,4.68733172329479,5.10307852744492,6.55670348636785,8.74086596862592,7.00115515259145,5.46138101214586,4.78640121163658,4.18215900239245,6.22484391610449,5.3111594952501,3.77952755905512,6.50384061768477,5.58747695964146,5.42123845033248,5.04848038390226,4.86541785279541,4.97176812735327,4.47964255788798,5.33382085391144,7.22380829377829,7.0812884751231,6.11737587407916,7.1561065468969,4.282361176813,5.32616181946541,5.19097245574501,6.05493528307165,6.27409491409121,6.98520027409899,7.97119993399054,5.00028803920838,4.26132881438327,5.43159101796171,8.16356363915206,6.580769078434,7.83015990857845,12.807919245623,4.71746231550028,6.42738713411734,8.57951329437571,4.79655097614072,6.22127948111281,5.54798462578679,5.59074371141117],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":37.2602739726027},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-2176.430056865,51811.172085565],"tickmode":"array","ticktext":["0","10000","20000","30000","40000","50000"],"tickvals":[0,10000,20000,30000,40000,50000],"categoryorder":"array","categoryarray":["0","10000","20000","30000","40000","50000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"gdpPercap","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[37.4635,84.7525],"tickmode":"array","ticktext":["40","50","60","70","80"],"tickvals":[40,50,60,70,80],"categoryorder":"array","categoryarray":["40","50","60","70","80"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"lifeExp","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"pop","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"6d507cad2d7b":{"x":{},"y":{},"size":{},"type":"scatter"}},"cur_data":"6d507cad2d7b","visdat":{"6d507cad2d7b":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="ç”»å¸ƒgglot" class="section level2">
<h2>ç”»å¸ƒgglot</h2>
<p>ç”¨ggplotå‡½æ•°æ„é€ ä¸€ä¸ªç”»å¸ƒ, ä½¿ç”¨gapminderæ•°æ®é›†</p>
<p><img src="img/gapminder.png" /></p>
<ul>
<li>å°†gdpPercapè®¾å®šä¸ºxè½´</li>
<li>å°†lifeExpè®¾å®šä¸ºyè½´</li>
</ul>
<pre class="r"><code>ggplot(data = gapminder_2007,
       mapping = aes(x = gdpPercap,
                     y = lifeExp))</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-ggplotly/index_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>ç°åœ¨æˆ‘ä»¬å°†å¼€å§‹æ·»åŠ é«˜å±‚æ¬¡çš„å›¾å±‚ï¼Œä¼šæ˜¾ç¤ºè¶Šæ¥è¶Šå¤šçš„ä¿¡æ¯ã€‚</p>
<p><br></p>
</div>
<div id="æ·»åŠ geom" class="section level2">
<h2>æ·»åŠ geom</h2>
<p>ç°åœ¨æ·»åŠ geomå±‚ï¼Œè¯¥å±‚æ˜¯é€šè¿‡ <code>+</code> æ„å»ºåœ¨ggplotå±‚ä¹‹ä¸Šã€‚è¿™é‡Œä½¿ç”¨ <code>geom_ponit()</code> ç»˜åˆ¶æ•£ç‚¹å›¾ï¼Œ</p>
<pre class="r"><code>ggplot(data = gapminder_2007,
       mapping = aes(x = gdpPercap,
                     y = lifeExp))+
  geom_point() #é€æ˜åº¦</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-ggplotly/index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>ç”Ÿæˆçš„å›¾ä»…ä»…æ˜¯é»‘ç™½å›¾ï¼Œä¸ºäº†ç¾è§‚ï¼Œå¯ä»¥è®¾ç½®ä¸ºæ›´é“ä¸½çš„é¢œè‰²ã€‚</p>
<p><br></p>
</div>
<div id="aescolor" class="section level2">
<h2>aes(color)</h2>
<p>äºŒç»´ç©ºé—´æ˜¾ç¤ºä¸‰ç»´ä¿¡æ¯ï¼Œ
- xè½´ gdpPercap
- yè½´ lifeExp
- color continent</p>
<pre class="r"><code>ggplot(data = gapminder_2007,
       mapping = aes(x = gdpPercap,     #gdp
                     y = lifeExp,       #é¢„æœŸå¯¿å‘½
                     color=continent))+ #å¤§é™†
  geom_point() </code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-ggplotly/index_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>ç°åœ¨å¯ä»¥æ¸…æ™°åœ°çœ‹å‡ºå“ªäº›å¤§é™†æ›´åŠ å¯Œè£•ã€æ›´åŠ å¥åº·, è¦æ˜¯é…è‰²å†å¥½çœ‹ç‚¹å°±å¥½äº†ã€‚</p>
<p><br></p>
</div>
<div id="è°ƒæ•´é…è‰²" class="section level2">
<h2>è°ƒæ•´é…è‰²</h2>
<p>åœ¨ [<a href="https://textdata.cn/blog/2022-09-04-r-ggplot2-histogram/" class="uri">https://textdata.cn/blog/2022-09-04-r-ggplot2-histogram/</a>]ä¸­é¦–æ¬¡ä½¿ç”¨äº†MetBreweré…è‰²åŒ…ã€‚</p>
<p>è¿™é‡Œä¼šç”¨5ä¸ªå…·æœ‰åŒºåˆ†åº¦çš„é¢œè‰²ï¼Œæˆ‘ä»¬é€‰æ‹© <code>Lakota</code> é…è‰²æ–¹æ¡ˆã€‚åŒæ—¶ï¼Œåœ¨å›¾ä¸­ç»˜åˆ¶å¯¹åº”çš„äººå£è§„æ¨¡ï¼Œä»¥sizeæ–¹å¼æ˜¾ç¤ºã€‚</p>
<pre class="r"><code>ggplot(data = gapminder_2007,
       mapping = aes(x = gdpPercap,     #gdp
                     y = lifeExp,       #é¢„æœŸå¯¿å‘½
                     size = pop,        #äººå£
                     color=continent))+ #å¤§é™†
  geom_point()+                
  scale_color_manual(values=met.brewer(&quot;Lakota&quot;, 5))</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-ggplotly/index_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>ä¸ºäº†è®©æ•°æ®æ›´åŠ å¹³æ»‘ï¼Œå¯¹xè½´å–å¯¹æ•°</p>
<pre class="r"><code>ggplot(data = gapminder_2007,
       mapping = aes(x = gdpPercap,     #gdp
                     y = lifeExp,       #é¢„æœŸå¯¿å‘½
                     size = pop,        #äººå£
                     color=continent))+ #å¤§é™†
  geom_point()+                
  scale_color_manual(values = met.brewer(&quot;Lakota&quot;, 5))+
  scale_x_log10(breaks = c(400, 4000, 40000))</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-ggplotly/index_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="æ›´æ¢ä¸»é¢˜" class="section level2">
<h2>æ›´æ¢ä¸»é¢˜</h2>
<p>ä½¿ç”¨ <code>theme_bw</code> æ›´æ”¹ç»˜å›¾çš„ä¸»é¢˜é£æ ¼</p>
<pre class="r"><code>ggplot(data = gapminder_2007,
       mapping = aes(x = gdpPercap,     #gdp
                     y = lifeExp,       #é¢„æœŸå¯¿å‘½
                     size = pop,        #äººå£
                     color=continent))+ #å¤§é™†
  geom_point()+                
  scale_color_manual(values = met.brewer(&quot;Lakota&quot;, 5))+
  scale_x_log10(breaks = c(400, 4000, 40000))+
  theme_bw()</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-ggplotly/index_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="æ ‡ç­¾labs" class="section level2">
<h2>æ ‡ç­¾labs</h2>
<pre class="r"><code>p2 &lt;- ggplot(data = gapminder_2007,
       mapping = aes(x = gdpPercap,     #gdp
                     y = lifeExp,       #é¢„æœŸå¯¿å‘½
                     size = pop,        #äººå£
                     color=continent,   #å¤§é™†
                     text = country))+  #å›½å®¶
  geom_point()+                #é€æ˜åº¦
  scale_color_manual(values = met.brewer(&quot;Lakota&quot;, 5))+
  scale_x_log10(breaks = c(400, 4000, 40000))+
  theme_bw()+
  labs(title = &quot;Gdp and Life Expectancy in 142 countries&quot;,
       subtitle = &quot;Most of Africa is sick and poor,\nwhile Europe is thriving and rich&quot;,
       x = &quot;Gdp Per Capita&quot;,
       y = &quot;Life Expectancy&quot;,
       fill = &quot;Continent&quot;,
       size = &quot;Population&quot;)

p2</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-ggplotly/index_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>ä½¿ç”¨ggplotlyå°†p2ä»é™æ€å›¾è½¬ä¸ºåŠ¨æ€å›¾ï¼Œ é¼ æ ‡æ‚¬æµ®å¤„å¼¹å‡ºåœ†åœˆå¯¹åº”çš„å›½å®¶ã€‚</p>
<pre class="r"><code>ggplotly(p2, tooltip = &quot;text&quot;)</code></pre>
<div id="htmlwidget-2" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"data":[{"x":[3.79402544509666,3.68099065562682,3.1587498285201,4.09933015629768,3.08530235219712,2.63353984732021,3.31007599301138,2.848814873635,3.23148583131337,2.99394204506796,2.44334414004637,3.56021253312911,3.18885823537455,3.31858116595608,3.74672610693845,4.08472243900371,2.80710831941093,2.83935583435696,4.12078722664154,2.87665060639063,3.1230701584329,2.9743524119827,2.76285235400399,3.16531831968284,3.19571467604724,2.61753222691212,4.08125724466051,3.01902074595738,2.88044194586588,3.0181100381011,3.25603221652431,4.03969130967891,3.58208328429303,2.91576148434958,3.68224081186337,2.79216530171644,3.30405457229069,3.88480230343241,2.93605531183875,3.20369500466057,3.23362351372365,2.93577962517273,2.96667714274902,3.96706370233863,3.41537321502711,3.65451158423759,3.04433674769752,2.94594592049266,3.85082524675123,3.02382022004224,3.10421784482941,2.67182915731664],"y":[72.301,42.731,56.728,50.728,52.295,49.58,50.43,44.741,50.651,65.152,46.462,55.322,48.328,54.791,71.338,51.579,58.04,52.947,56.735,59.448,60.022,56.007,46.388,54.11,42.592,45.678,73.952,59.443,48.303,54.467,64.164,72.801,71.164,42.082,52.906,56.867,46.859,76.442,46.242,65.528,63.062,42.568,48.159,49.339,58.556,39.613,52.517,58.42,73.923,51.542,42.384,43.487],"text":["Algeria","Angola","Benin","Botswana","Burkina Faso","Burundi","Cameroon","Central African Republic","Chad","Comoros","Congo, Dem. Rep.","Congo, Rep.","Cote d'Ivoire","Djibouti","Egypt","Equatorial Guinea","Eritrea","Ethiopia","Gabon","Gambia","Ghana","Guinea","Guinea-Bissau","Kenya","Lesotho","Liberia","Libya","Madagascar","Malawi","Mali","Mauritania","Mauritius","Morocco","Mozambique","Namibia","Niger","Nigeria","Reunion","Rwanda","Sao Tome and Principe","Senegal","Sierra Leone","Somalia","South Africa","Sudan","Swaziland","Tanzania","Togo","Tunisia","Uganda","Zambia","Zimbabwe"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(4,163,189,1)","opacity":1,"size":[6.77527173254923,5.598900411863,5.24035330707835,4.40395768399738,5.7356199392208,5.26901439581437,5.9564773609874,4.8422259478741,5.42852631166044,4.15169850163956,7.9562662998771,4.76713328307226,5.97611663817011,4.06305719383881,8.43636871732964,4.08813627550005,4.90865391372741,8.32592567062337,4.36262596871136,4.41454467512776,6.25770233060098,5.40445197132612,4.3666011970112,6.87649613589243,4.480300710223,4.68010775450673,5.03693920169262,6.0461636385333,5.66517797748393,5.5697344023561,4.69148323166173,4.31315004312066,6.79437672410524,6.09253246174489,4.48845333089755,5.6338762963756,9.82271393327331,4.18215900239245,5.3111594952501,3.77952755905512,5.58747695964146,5.04848038390226,5.33382085391144,7.22380829377829,7.1561065468969,4.282361176813,6.98520027409899,5.00028803920838,5.43159101796171,6.580769078434,5.54798462578679,5.59074371141117],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(4,163,189,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4.10650977201769,3.58230625931688,3.95740617340857,4.56013669242519,4.11963981438709,3.84550611104731,3.98430499758718,3.95173097080165,3.77998406330737,3.83716291957619,3.75802981175127,3.71483669984604,3.0797733480287,3.55002410662006,3.86456330372846,4.07836889751077,3.43922544380543,3.99163295350919,3.6204315729333,3.86975405900188,4.28620284789525,4.25547776303394,4.632979883279,4.02577526370184,4.05750656798335],"y":[75.32,65.554,72.39,80.653,78.553,72.889,78.782,78.273,72.235,74.994,71.878,70.259,60.916,70.198,72.567,76.195,72.899,75.537,71.752,71.421,78.746,69.819,78.242,76.384,73.747],"text":["Argentina","Bolivia","Brazil","Canada","Chile","Colombia","Costa Rica","Cuba","Dominican Republic","Ecuador","El Salvador","Guatemala","Haiti","Honduras","Jamaica","Mexico","Nicaragua","Panama","Paraguay","Peru","Puerto Rico","Trinidad and Tobago","United States","Uruguay","Venezuela"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(240,190,61,1)","opacity":1,"size":[7.07528369289545,5.33385387656466,10.9497220287062,6.77784403625228,5.86681801798997,7.23282911414924,4.81182340745332,5.52260397354913,5.35122378867242,5.69571313317988,5.1306777542305,5.61021330347734,5.27919109958551,5.18415329737334,4.6155666029278,9.20063061292984,4.99737544049698,4.68733172329479,5.10307852744492,6.55670348636785,4.78640121163658,4.26132881438327,12.807919245623,4.71746231550028,6.42738713411734],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(240,190,61,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.98881764549129,4.47415867018597,3.143406361057,3.23395473727517,3.6954041667466,4.59906367268864,3.38955773121288,3.54908318988216,4.06467188236304,3.65041068311967,4.40693643553008,4.50045697098462,3.65508665949928,3.20223362703668,4.3682522837381,4.67492531406996,4.01957563822304,4.09522710701315,3.49076900592376,2.97497199429807,3.03796794384465,4.34862010618943,3.41596567540354,3.50385616482709,4.33555481758265,4.67341887079622,3.59880094359832,3.62164856315343,4.45815837772449,3.87264545733796,3.38767031916547,3.4807755960326,3.35808147396803],"y":[43.828,75.635,64.062,59.723,72.961,82.208,64.698,70.65,70.964,59.545,80.745,82.603,72.535,67.297,78.623,77.588,71.993,74.241,66.803,62.069,63.785,75.64,65.483,71.688,72.777,79.972,72.396,74.143,78.4,70.616,74.249,73.422,62.698],"text":["Afghanistan","Bahrain","Bangladesh","Cambodia","China","Hong Kong, China","India","Indonesia","Iran","Iraq","Israel","Japan","Jordan","Korea, Dem. Rep.","Korea, Rep.","Kuwait","Lebanon","Malaysia","Mongolia","Myanmar","Nepal","Oman","Pakistan","Philippines","Saudi Arabia","Singapore","Sri Lanka","Syria","Taiwan","Thailand","Vietnam","West Bank and Gaza","Yemen, Rep."],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(147,30,24,1)","opacity":1,"size":[6.70929835135528,4.1508288847182,10.1588656081799,5.72211801075065,22.6771653543307,5.13475345805415,21.1203680953071,11.5573968303758,8.11057131553749,6.49879524068774,5.07824026167466,9.65077587363648,5.03869129857133,6.28100350114513,7.4168446506104,4.56983839481089,4.78354392302204,6.36196165910748,4.63065651672448,7.36876387589759,6.56775273775666,4.68175365529605,10.5466615830696,8.74086596862592,6.50384061768477,4.86541785279541,6.11737587407916,6.05493528307165,6.27409491409121,7.97119993399054,8.57951329437571,4.79655097614072,6.22127948111281],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(147,30,24,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.77356920876217,4.55782580062218,4.52753459151331,3.87194045947979,4.02860349094832,4.16492428251317,4.35856884462783,4.54750911081685,4.52123074598147,4.48387269225076,4.50745611553652,4.43993889119905,4.25548825822109,4.55847803563392,4.60933819969144,4.45590597950278,3.96632461957789,4.56582342810493,4.69335042800253,4.18723649435127,4.31195820191596,4.03376444688129,3.990628940935,4.27133768016358,4.41108505321789,4.4597100052953,4.52968372605252,4.57410560181062,3.92728187211911,4.52118074293136],"y":[76.423,79.829,79.441,74.852,73.005,75.748,76.486,78.332,79.313,80.657,79.406,79.483,73.338,81.757,78.885,80.546,74.543,79.762,80.196,75.563,78.098,72.476,74.002,74.663,77.926,80.941,80.884,81.701,71.777,79.425],"text":["Albania","Austria","Belgium","Bosnia and Herzegovina","Bulgaria","Croatia","Czech Republic","Denmark","Finland","France","Germany","Greece","Hungary","Iceland","Ireland","Italy","Montenegro","Netherlands","Norway","Poland","Portugal","Romania","Serbia","Slovak Republic","Slovenia","Spain","Sweden","Switzerland","Turkey","United Kingdom"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(218,121,1,1)","opacity":1,"size":[4.73930360976545,5.2515712457991,5.44107849786917,4.86531670289218,5.16855282584858,4.85794694387522,5.42769965273683,4.97410786436283,4.94778140481952,7.84043376621969,8.49809123744673,5.46648280699294,5.40514308400654,3.9460291298415,4.8085649745634,7.74130405516196,4.14203032052794,5.88528441607637,4.87472139425141,7.00115515259145,5.46138101214586,6.22484391610449,5.42123845033248,4.97176812735327,4.47964255788798,7.0812884751231,5.32616181946541,5.19097245574501,8.16356363915206,7.83015990857845],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(218,121,1,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4.53700472145269,4.40114211228811],"y":[81.235,80.204],"text":["Australia","New Zealand"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(36,125,63,1)","opacity":1,"size":[6.12061399094626,4.80944439195868],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(36,125,63,1)"}},"hoveron":"points","name":"Oceania","legendgroup":"Oceania","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":40.1826484018265,"l":37.2602739726027},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Gdp and Life Expectancy in 142 countries","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[2.33084382564856,4.80585074240034],"tickmode":"array","ticktext":["400","4000","40000"],"tickvals":[2.60205999132796,3.60205999132796,4.60205999132796],"categoryorder":"array","categoryarray":["400","4000","40000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Gdp Per Capita","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[37.4635,84.7525],"tickmode":"array","ticktext":["40","50","60","70","80"],"tickvals":[40,50,60,70,80],"categoryorder":"array","categoryarray":["40","50","60","70","80"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"Life Expectancy","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"continent<br />Population","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"6d507d3656d6":{"x":{},"y":{},"size":{},"colour":{},"text":{},"type":"scatter"}},"cur_data":"6d507d3656d6","visdat":{"6d507d3656d6":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p><br></p>
</div>
<div id="å¹¿è€Œå‘Šä¹‹" class="section level2">
<h2>å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
</div>
]]></content:encoded>
    </item>
    
    <item>
      <title>Rè¯­è¨€ |  ggplot2ç®€æ˜ç»˜å›¾ä¹‹æ•£ç‚¹å›¾</title>
      <link>https://textdata.cn/blog/2022-09-04-r-ggplot2-scatter/</link>
      <pubDate>Sat, 03 Sep 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-09-04-r-ggplot2-scatter/</guid>
      <description>æ•™ä½ ç†è§£å›¾å±‚ã€æ•°geomã€labsç­‰å‡½æ•°ï¼Œè½»æ¾ä¸Šæ‰‹ggplot2</description>
      <content:encoded><![CDATA[


<blockquote>
<p>åŸæ–‡: <a href="https://www.miriamheiss.com/posts/graphing-with-ggplot/" class="uri">https://www.miriamheiss.com/posts/graphing-with-ggplot/</a></p>
</blockquote>
<p>ggplot() å‡½æ•°å¯¹ä»»ä½•æ•°æ®ç§‘å­¦å®¶éƒ½æ˜¯å¿…ä¸å¯å°‘çš„, taæ˜¯ä¸€ç§éå¸¸ç®€å•çš„ç»˜å›¾å‡½æ•°ã€‚åˆšå¼€å§‹æ¥è§¦å¯èƒ½çœ‹èµ·æ¥å¾ˆéš¾ï¼Œ ä¸è¿‡ä¸è¦å®³æ€•ï¼Œå› ä¸ºä¸€æ—¦å­¦äº†åŸºç¡€çŸ¥è¯†ï¼Œä¸€åˆ‡éƒ½ä¼šå˜å¾—æ¸…æ™°ï¼ è®©æˆ‘ä»¬å¼€å§‹ï¼</p>
<div id="å‡†å¤‡" class="section level2">
<h2>å‡†å¤‡</h2>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘éœ€è¦å¯¼å…¥æœ¬èŠ‚éœ€è¦çš„åŒ…ã€‚ <code>tidyverse</code> åŒ…æ‹¬å…«ä¸ªåŒ…ï¼Œå…¶ä¸­ä¹‹ä¸€æ˜¯ <code>ggplot2</code>ã€‚ <code>primer.data</code>åŒ… æ‹¥æœ‰æ¯”R å†…ç½®çš„æ›´å¤šçš„æ•°æ®é›†ã€‚</p>
<pre class="r"><code>library(ggplot2)
library(primer.data) #å‡†å¤‡æ•°æ®
library(showtext)</code></pre>
<pre><code>## Loading required package: sysfonts</code></pre>
<pre><code>## Loading required package: showtextdb</code></pre>
<pre class="r"><code>showtext_auto()  #æ˜¾ç¤ºä¸­æ–‡</code></pre>
</div>
<div id="ç”»å¸ƒgglot" class="section level2">
<h2>ç”»å¸ƒgglot</h2>
<p>ç”»ç”»éœ€è¦ç”»å¸ƒï¼Œå¯¹äºæ•°æ®åˆ†æçš„ç»˜å›¾ä¹Ÿæ˜¯åŒç†ã€‚å¯¼å…¥ç›¸å…³RåŒ…åï¼Œ ç”¨ggplotå‡½æ•°æ„é€ ä¸€ä¸ªç”»å¸ƒã€‚å› ä¸ºè¿˜æ²¡è®¾å®šæ•°æ®ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªç©ºç”»å¸ƒ</p>
<pre class="r"><code>ggplot()</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-scatter/index_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>æˆ‘ä»¬å°†ä½¿ç”¨nhanesæ•°æ®é›†ï¼Œä¼ å…¥æ•°æ®çš„ä»£ç ggplot(data=nhanes)</p>
<pre class="r"><code>ggplot(data=nhanes)</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-scatter/index_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>ç”»å¸ƒçœ‹èµ·æ¥ä¾ç„¶æ˜¯ç©ºç™½çš„ï¼Œä¸è¦ç´§å¼ ã€‚ç†è§£è¿™ä¸ªä¹‹å‰ç±»æ¯”PSè¿™ç±»ç»˜å›¾è½¯ä»¶ï¼Œå°†ä¿®å›¾å·¥ä½œçœ‹åšæ˜¯å¾ˆå¤šä¸ªå›¾å±‚çš„å åŠ ã€‚ç°åœ¨æˆ‘ä»¬ä½¿ç”¨æ—¶ä¾ç„¶åœ¨æœ€åº•å±‚çš„ggplotå›¾å±‚ï¼Œåœ¨ggplotå‡½æ•°å†…æ·»åŠ mapping=aes()å‚æ•°ï¼Œå‡†å¤‡æ·»åŠ xè½´ã€yè½´ã€colorã€‚çš„å›¾å±‚ã€‚</p>
<p>Aesthetic mappingså®¡ç¾æ˜ å°„ã€‚</p>
<pre class="r"><code>ggplot(data=nhanes,
       mapping=aes())</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-scatter/index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>æ³¨æ„äº†ï¼Œç°åœ¨å›¾å±‚å³å°†å‘ç”Ÿå˜åŒ–ã€‚æˆ‘ä»¬é€‰æ‹©è®¾ç½®xè½´ã€yè½´ã€colorçš„å­—æ®µã€‚</p>
<ul>
<li>xè½´ heightèº«é«˜</li>
<li>yè½´ weightä½“é‡</li>
<li>color genderæ€§åˆ«</li>
</ul>
<pre class="r"><code>ggplot(data=nhanes,
       mapping=aes(
         x=height,
         y=weight,
         color=gender))</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-scatter/index_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>ç°åœ¨æˆ‘ä»¬å°†å¼€å§‹æ·»åŠ é«˜å±‚æ¬¡çš„å›¾å±‚ï¼Œä¹Ÿä¼šæ˜¾ç¤ºè¶Šæ¥è¶Šå¤šçš„ä¿¡æ¯ã€‚</p>
<p><br></p>
</div>
<div id="æ·»åŠ geom" class="section level2">
<h2>æ·»åŠ geom</h2>
<p>ç°åœ¨æ·»åŠ geomå±‚(geomæ˜¯geomericç¼©å†™)ï¼Œè¯¥å±‚æ˜¯é€šè¿‡ <code>+</code> æ„å»ºåœ¨ggplotå±‚ä¹‹ä¸Šã€‚è¿™é‡Œä½¿ç”¨ <code>geom_point()</code> ç»˜åˆ¶æ•£ç‚¹å›¾ï¼Œ</p>
<pre class="r"><code>ggplot(data=nhanes,
       mapping = aes(
         x=height,
         y=weight,
         color=gender))+
  geom_point()</code></pre>
<pre><code>## Warning: Removed 366 rows containing missing values (geom_point).</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-scatter/index_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Wow! ä¸é”™çš„å¼€å§‹ï¼Œä¸è¿‡è¿™ä¸ªå›¾ä¸­çš„ç‚¹äº’ç›¸ä¹‹é—´é‡å çš„æœ‰ä¸€ç‚¹ç‚¹ä¸¥é‡ï¼Œéœ€è¦è®¾å®šç‚¹çš„å¤§å°sizeå’Œé€æ˜åº¦alphaæ¥æ§åˆ¶é‡å æ•ˆæœã€‚</p>
<pre class="r"><code>ggplot(data=nhanes,
       mapping=aes(
         x=height,
         y=weight,
         color=gender))+
  geom_point(alpha=0.3, size=0.5)</code></pre>
<pre><code>## Warning: Removed 366 rows containing missing values (geom_point).</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-scatter/index_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>much better! ä½†èƒ½å¦æŒ‰æ€§åˆ«ï¼Œåˆ†åˆ«ç»˜åˆ¶ç”·ã€å¥³çš„æ•£ç‚¹å›¾ã€‚</p>
<p><br></p>
</div>
<div id="åˆ†é¢facet" class="section level2">
<h2>åˆ†é¢facet</h2>
<p>æ¥ä¸‹æ¥æ·»åŠ ä¸€ä¸ªåˆ†é¢å‡½æ•° <code>facet_wrap</code>ã€‚è¯¥å‡½æ•°ä¼šåˆ†åˆ«ç”Ÿæˆç”·æ€§åˆ†é¢ã€å¥³æ€§åˆ†é¢</p>
<pre class="r"><code>ggplot(data=nhanes,
       mapping=aes(
         x=height,
         y=weight,
         color=gender))+
  geom_point(alpha=0.3, size=0.5)+
  facet_wrap(~gender)</code></pre>
<pre><code>## Warning: Removed 366 rows containing missing values (geom_point).</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-scatter/index_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸¤ä¸ªåˆ†é¢å›¾</p>
<p><br></p>
</div>
<div id="æ·»åŠ ç¬¬äºŒä¸ªgeom" class="section level2">
<h2>æ·»åŠ ç¬¬äºŒä¸ªgeom</h2>
<p>ç°åœ¨æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªè¶‹åŠ¿çº¿ï¼Œå¯ä»¥ä½¿ç”¨ <code>geom_smooth()</code> å‡½æ•°ï¼Œå› ä¸ºgeom_smoothå’Œgeom_pointéƒ½æ˜¯geomå±‚çš„å‡½æ•°ï¼Œç†æ‰€å½“ç„¶å®ƒä¿©æ¯” facet_wrapå±‚æ›´è¿‘ä¸€äº›ã€‚ä¸ºäº†è®©è¶‹åŠ¿çº¿æ›´æ˜æ˜¾ï¼Œå°†æ•£ç‚¹çš„é€æ˜åº¦è®¾ç½®çš„æ›´æµ…ï¼Œæ¯”å¦‚0.1</p>
<pre class="r"><code>ggplot(data=nhanes,
       mapping=aes(
         x=height,
         y=weight,
         color=gender))+
  geom_point(alpha=0.1, size=0.5)+
  geom_smooth()+
  facet_wrap(~gender)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<pre><code>## Warning: Removed 366 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 366 rows containing missing values (geom_point).</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-scatter/index_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬æƒ³è®©è¶‹åŠ¿çº¿æ›´å¹³æ»‘ä¸€äº›ã€‚åœ¨<code>geom_smooth()</code>ä¸­ï¼Œæˆ‘ä»¬ä¼šè®¾ç½® <code>method="loess"</code>ä»¥ä½¿å¾—è¶‹åŠ¿çº¿æ›´å¹³æ»‘ã€‚ <code>formula=y~x</code>è¡¨ç¤ºyçš„å˜åŒ–ä¸xæœ‰å…³ã€‚</p>
<pre class="r"><code>ggplot(data=nhanes,
       mapping=aes(
         x=height,
         y=weight,
         color=gender))+
  geom_point(alpha=0.1, size=0.5)+
  geom_smooth(method=&quot;loess&quot;, formula=y~x)+
  facet_wrap(~gender)</code></pre>
<pre><code>## Warning: Removed 366 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 366 rows containing missing values (geom_point).</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-scatter/index_files/figure-html/unnamed-chunk-10-1.png" width="672" />
<br></p>
</div>
<div id="æ ‡ç­¾labs" class="section level2">
<h2>æ ‡ç­¾labs</h2>
<p>ç°åœ¨æˆ‘ä»¬éœ€è¦ç”¨<code>labs()</code>å‡½æ•°ç»™å›¾ç‰‡æ·»åŠ æ ‡ç­¾å›¾å±‚ã€‚ä¾‹å¦‚titleã€subtitleã€captionã€xã€yã€legendã€‚</p>
<pre class="r"><code>ggplot(data=nhanes,
       mapping=aes(
         x=height,
         y=weight,
         color=gender))+
  geom_point(alpha=0.1, size=0.5)+
  geom_smooth(method=&quot;loess&quot;, formula=y~x)+
  facet_wrap(~gender)+
  labs(title = &quot;Heights in the U.S.&quot;,
       subtitle = &quot;On average, men weigh more and are taller than women&quot;)</code></pre>
<pre><code>## Warning: Removed 366 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 366 rows containing missing values (geom_point).</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-scatter/index_files/figure-html/unnamed-chunk-11-1.png" width="672" />
ç°åœ¨æœ‰äº†æ­£å‰¯æ ‡é¢˜ï¼Œæ¨ªçºµåæ ‡æ²¡æœ‰æ•°é‡å•ä½ï¼Œä¸å¤ªniceï¼Œè¿™é‡Œæ›´æ”¹ä¸º <code>Height(cm)ã€Weight(kg)</code></p>
<pre class="r"><code>ggplot(data=nhanes,
       mapping=aes(
         x=height,
         y=weight,
         color=gender))+
  geom_point(alpha=0.1, size=0.5)+
  geom_smooth(method=&quot;loess&quot;, formula=y~x)+
  facet_wrap(~gender)+
  labs(title = &quot;Heights in the U.S.&quot;,
       subtitle = &quot;On average, men weigh more and are taller than women&quot;,
       x=&quot;Height (cm)&quot;,
       y=&quot;Weight (kg)&quot;)</code></pre>
<pre><code>## Warning: Removed 366 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 366 rows containing missing values (geom_point).</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-scatter/index_files/figure-html/unnamed-chunk-12-1.png" width="672" />
Awesome! ä½†å›¾ä¾‹Lengendä¸­çš„ <code>gender</code> ä¾ç„¶æ˜¯å°å†™ï¼Œæˆ‘å¸Œæœ›æ”¹ä¸ºå¤§å†™ã€‚æˆ‘ä»¬çŸ¥é“xã€yã€coloråˆ†åˆ«å¯¹åº”heightã€weightã€genderï¼Œæ‰€ä»¥å¦‚æœæ›´æ”¹genderï¼Œéœ€è¦è®¾ç½®çš„æ˜¯colorã€‚</p>
<pre class="r"><code>ggplot(data=nhanes,
       mapping=aes(
         x=height,
         y=weight,
         color=gender))+
  geom_point(alpha=0.1, size=0.5)+
  geom_smooth(method=&quot;loess&quot;, formula=y~x)+
  facet_wrap(~gender)+
  labs(title = &quot;Heights in the U.S.&quot;,
       subtitle = &quot;On average, men weigh more and are taller than women&quot;,
       x=&quot;Height (cm)&quot;,
       y=&quot;Weight (kg)&quot;,
       color=&quot;Gender&quot;)</code></pre>
<pre><code>## Warning: Removed 366 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 366 rows containing missing values (geom_point).</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-scatter/index_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>ä½†æ˜¯çœ‹åˆ°è¿™ä¸ªå›¾ç‰‡æ—¶ï¼Œå…¶ä»–äººä¼šæƒ³åŸå§‹æ•°æ®æ˜¯å•¥æƒ…å†µï¼Œæ€ä¹ˆæ¥çš„ã€‚è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦å‘Šè¯‰å¤§å®¶nhancesæ•°æ®é›†æ¥è‡ªäº <code>National Health and Nutrition Examination Survey</code>ã€‚é€šè¿‡è®¾ç½®labsçš„captionå‚æ•°å³å¯ã€‚</p>
<pre class="r"><code>ggplot(data=nhanes,
       mapping=aes(
         x=height,
         y=weight,
         color=gender))+
  geom_point(alpha=0.1, size=0.5)+
  geom_smooth(method=&quot;loess&quot;, formula=y~x)+
  facet_wrap(~gender)+
  labs(title = &quot;Heights in the U.S.&quot;,
       subtitle = &quot;On average, men weigh more and are taller than women&quot;,
       x=&quot;Height (cm)&quot;,
       y=&quot;Weight (kg)&quot;,
       color=&quot;Gender&quot;,
       caption=&quot;Source: National Health and Nutrition Examination Survey&quot;)</code></pre>
<pre><code>## Warning: Removed 366 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 366 rows containing missing values (geom_point).</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-scatter/index_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="æ›´æ”¹é…è‰²" class="section level2">
<h2>æ›´æ”¹é…è‰²</h2>
<p>ç»˜å›¾å·²ç»ç›¸å½“å®Œæ•´ï¼Œä½†geomå±‚çš„æ•£ç‚¹é¢œè‰²å¯èƒ½ä¸æ˜¯å’±çš„æœ€çˆ±ï¼Œå¦‚ä½•è®¾ç½®é¢œè‰²å‘¢ï¼Ÿ</p>
<p>æ›´æ”¹geomå±‚çš„é¢œè‰²ï¼Œæ‰€ä»¥è¯¥å±‚ç´§è´´geomå±‚ï¼Œä¸”åœ¨geomå±‚ä¹‹ä¸Šã€‚è®¾ç½®æ–¹æ³•ä½¿ç”¨ <code>scale_color_manual()</code> å³å¯ã€‚<code>scale_color_munual()</code> ä¸­çš„valueså¯ä»¥ä¼ å…¥é¢œè‰²åå…­è¿›åˆ¶çš„å­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥ä¼ å…¥é¢œè‰²å­—ç¬¦ä¸²ã€‚</p>
<pre class="r"><code>ggplot(data=nhanes,
       mapping=aes(
         x=height,
         y=weight,
         color=gender))+
  geom_point(alpha=0.1, size=0.5)+
  geom_smooth(method=&quot;loess&quot;, formula=y~x)+
  scale_color_manual(values=c(&quot;magenta&quot;, &quot;blue&quot;))+
  facet_wrap(~gender)+
  labs(title = &quot;Heights in the U.S.&quot;,
       subtitle = &quot;On average, men weigh more and are taller than women&quot;,
       x=&quot;Height (cm)&quot;,
       y=&quot;Weight (kg)&quot;,
       color=&quot;Gender&quot;,
       caption=&quot;Source: National Health and Nutrition Examination Survey&quot;)</code></pre>
<pre><code>## Warning: Removed 366 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 366 rows containing missing values (geom_point).</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-scatter/index_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="è®¾ç½®ä¸»é¢˜" class="section level2">
<h2>è®¾ç½®ä¸»é¢˜</h2>
<ul>
<li>theme_bw()</li>
<li>theme_dark()</li>
<li>theme_gray()</li>
<li>theme_light()</li>
<li>theme_minimal()</li>
</ul>
<pre class="r"><code>g &lt;- ggplot(data=nhanes,
       mapping=aes(
         x=height,
         y=weight,
         color=gender))+
  geom_point(alpha=0.1, size=0.5)+
  geom_smooth(method=&quot;loess&quot;, formula=y~x)+
  scale_color_manual(values=c(&quot;magenta&quot;, &quot;blue&quot;))+
  facet_wrap(~gender)+
  labs(title = &quot;Heights in the U.S.&quot;,
       subtitle = &quot;On average, men weigh more and are taller than women&quot;,
       x=&quot;Height (cm)&quot;,
       y=&quot;Weight (kg)&quot;,
       color=&quot;Gender&quot;,
       caption=&quot;Source: National Health and Nutrition Examination Survey&quot;)
  
g + theme_minimal()</code></pre>
<pre><code>## Warning: Removed 366 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 366 rows containing missing values (geom_point).</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-scatter/index_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="ä¿å­˜" class="section level2">
<h2>ä¿å­˜</h2>
<pre class="r"><code>ggsave(
  filename = &quot;scatter.png&quot;,
  plot = g,
  width = 10,
  height = 8,
  dpi = 100,
  device = &quot;png&quot;
)</code></pre>
<pre><code>## Warning: Removed 366 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 366 rows containing missing values (geom_point).</code></pre>
<p><br></p>
</div>
<div id="ä¸­æ–‡é—®é¢˜" class="section level2">
<h2>ä¸­æ–‡é—®é¢˜</h2>
<p>é»˜è®¤ggplot2ä¸æ”¯æŒä¸­æ–‡ï¼Œä¸ºäº†èƒ½æ˜¾ç¤ºä¸­æ–‡ï¼Œéœ€è¦ä½¿ç”¨showtextåŒ…</p>
<pre class="r"><code>library(ggplot2)
library(primer.data) #æä¾›æ•°æ®
library(showtext) #æ”¯æŒä¸­æ–‡
showtext_auto()

ggplot(data=nhanes,
       mapping=aes(
         x=height,
         y=weight,
         color=gender))+
  geom_point(alpha=0.1, size=0.5)+
  geom_smooth(method=&quot;loess&quot;, formula=y~x)+
  scale_color_manual(values=c(&quot;magenta&quot;, &quot;blue&quot;))+
  facet_wrap(~gender)+
  labs(title = &quot;ç¾å›½èº«é«˜&quot;,
       subtitle = &quot;å¹³å‡è€Œè¨€ï¼Œç”·æ€§ç¾¤ä½“çš„èº«é«˜ä¼šé«˜äºå¥³æ€§ç¾¤ä½“&quot;,
       x=&quot;èº«é«˜(cm)&quot;,
       y=&quot;ä½“é‡(kg)&quot;,
       color=&quot;æ€§åˆ«&quot;,
       caption=&quot;æ•°æ®æº: National Health and Nutrition Examination Survey&quot;)</code></pre>
<pre><code>## Warning: Removed 366 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 366 rows containing missing values (geom_point).</code></pre>
<p><img src="/blog/2022-09-04-r-ggplot2-scatter/index_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="å¹¿è€Œå‘Šä¹‹" class="section level2">
<h2>å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
</div>
]]></content:encoded>
    </item>
    
    <item>
      <title>Rè¯­è¨€ |  ä½¿ç”¨officedownåŒ…åœ¨Rmarkdownä¸­åˆ¶ä½œPPT</title>
      <link>https://textdata.cn/blog/2022-09-04-officedown-pptdocx/</link>
      <pubDate>Sat, 03 Sep 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-09-04-officedown-pptdocx/</guid>
      <description>ä½¿ç”¨officedownåŒ…åœ¨Rmarkdownä¸­åˆ¶ä½œPPT</description>
      <content:encoded><![CDATA[


<p>ä½¿ç”¨officedownåœ¨Rmarkdownä¸­å†™PPT/Wordã€‚æœ¬æ–‡åªä»¥PPTä¸ºä¾‹ç®€å•æ¼”ç¤ºï¼Œä¸åšç»†èŠ‚è®²è§£ã€‚</p>
<div id="å®‰è£…" class="section level2">
<h2>å®‰è£…</h2>
<pre class="r"><code>install.packages(c(&quot;officedown&quot;, &quot;rvg&quot;))</code></pre>
<p><br></p>
</div>
<div id="æ–°å»ºrmd" class="section level2">
<h2>æ–°å»ºRmd</h2>
<p>æŒ‰ç…§æˆªå›¾ï¼Œ
<img src="img/1.png" />
<img src="img/2.png" /></p>
<p>ä¼šè‡ªåŠ¨æ–°å»ºä¸€ä¸ªRmdæ¨¡æ¿ã€‚
<img src="img/3.png" /></p>
<p>å¦‚æœä½ è‡ªå·±æƒ³æ”¹åŠ¨æ·»åŠ å†…å®¹ï¼Œè‡ªå·±æ”¹å°±è¡Œä¸ç”¨æ€•ï¼Œå¤§ä¸äº†é‡æ–°æ–°å»ºä¸€ä¸ªç©ºç™½æ¨¡æ¿ã€‚</p>
<p><br></p>
</div>
<div id="æ¸²æŸ“" class="section level2">
<h2>æ¸²æŸ“</h2>
<p>å†…å®¹Okayåï¼Œç‚¹å‡»æ¸²æŸ“</p>
<p><img src="img/4.png" /></p>
<p>æ¸²æŸ“æ—¶ä¼šè‡ªåŠ¨å¼¹å¼€MS PowerPoint</p>
<p><img src="img/5.png" /></p>
<p><br></p>
</div>
<div id="ç›¸å…³èµ„æ–™" class="section level2">
<h2>ç›¸å…³èµ„æ–™</h2>
<ul>
<li><a href="https://www.miriamheiss.com/posts/graphing-with-ggplot/" class="uri">https://www.miriamheiss.com/posts/graphing-with-ggplot/</a></li>
<li><a href="https://ardata-fr.github.io/officeverse/index.html" class="uri">https://ardata-fr.github.io/officeverse/index.html</a></li>
</ul>
<p><br></p>
</div>
<div id="å¹¿è€Œå‘Šä¹‹" class="section level2">
<h2>å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
</div>
]]></content:encoded>
    </item>
    
    <item>
      <title>Rè¯­è¨€ |  ä½¿ç”¨posterdownåŒ…åˆ¶ä½œå­¦æœ¯ä¼šè®®æµ·æŠ¥</title>
      <link>https://textdata.cn/blog/2022-09-04-posterdown/</link>
      <pubDate>Sat, 03 Sep 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-09-04-posterdown/</guid>
      <description>ä½¿ç”¨posterdownåŒ…åˆ¶ä½œå­¦æœ¯æµ·æŠ¥</description>
      <content:encoded><![CDATA[


<blockquote>
<p>åŸæ–‡: <a href="https://shilaan.rbind.io/post/academic-conference-posters-using-posterdown/" class="uri">https://shilaan.rbind.io/post/academic-conference-posters-using-posterdown/</a></p>
</blockquote>
<p>å¦‚æœä½ è®¤è¯†æˆ‘ï¼Œä½ å°±ä¼šçŸ¥é“æˆ‘å–œæ¬¢ç”¨ Rè¯­è¨€ åšä»»ä½•äº‹æƒ…ã€‚ å½“éœ€è¦åˆ›å»ºæˆ‘çš„ç¬¬ä¸€ä¸ªå­¦æœ¯ä¼šè®®æµ·æŠ¥æ—¶ï¼Œæˆ‘çŸ¥é“æˆ‘ä¸æƒ³æµªè´¹ä»»ä½•æ—¶é—´åœ¨ä¸åŒçš„è½¯ä»¶ç¯å¢ƒä¹‹é—´ç§»åŠ¨æˆ–å¤åˆ¶ç²˜è´´å’Œæ‰‹åŠ¨æ ¼å¼åŒ–æ–‡æœ¬ã€è¡¨æ ¼ã€å›¾å½¢å’Œç»“æœã€‚</p>
<p>ç›¸åï¼Œæˆ‘æƒ³ä½¿ç”¨ RMarkdown ç”Ÿæˆä¸€ä¸ªå®Œå…¨å¯å¤åˆ¶ä¸”æ ¼å¼ç²¾ç¾çš„ä¼šè®®æµ·æŠ¥ã€‚ åŸæ¥; R åŒ… <a href="https://github.com/brentthorne/posterdown">posterdown</a> ä½¿è¿™å˜å¾—éå¸¸ç®€å•ï¼ åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†ç®€è¦å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨ posterdown åŒ…åˆ›å»ºè‡ªå·±çš„æµ·æŠ¥ã€‚</p>
<p>è¦å…ˆç¹ä¸ºå¿«ï¼Œæ‚¨å¯ä»¥åœ¨æ­¤å¤„æ‰¾åˆ°æˆ‘çš„ç¬¬ä¸€ä¸ª posterdown åˆ›å»ºçš„ <a href="https://sjdm.org/presentations/2021-Poster-Alzahawi-Shilaan-crowds-variability-credibility~.pdf">æµ·æŠ¥</a> ä»¥åŠæ­¤å¤„çš„<a href="https://github.com/shilaan/Many-Analysts/blob/main/poster/GSPA_Poster.Rmd">åŸºç¡€ä»£ç </a>ã€‚</p>
<p><br></p>
<div id="å®‰è£…" class="section level2">
<h2>å®‰è£…</h2>
<pre class="r"><code>install.packages(&quot;posterdown&quot;)</code></pre>
<p><br></p>
</div>
<div id="æ–°å»ºrmd" class="section level2">
<h2>æ–°å»ºRmd</h2>
<p>æŒ‰ç…§ä¸‹é¢æ­¥éª¤ç‚¹å‡»ä»æ¨¡æ¿æ–°å»ºRmarkdown
<code>File -&gt; Net File -&gt; R Markdown -&gt; From Template</code></p>
<p><img src="img/posterdown_tem.png" /></p>
<p>ä»ä¸­é€‰æ‹©posterdownæ¨¡æ¿ï¼Œæœ‰ä¸‰ç§å¯ä¾›é€‰æ‹©çš„å­æ¨¡æ¿ï¼Œå³
- Posterdown HTML
- Posterdown betterland
- Posterdown Betterport</p>
<p>å¤§è‡´çš„æ ·å¼å¦‚ä¸‹</p>
<p><img src="img/posterdown_templates.png" /></p>
<p>è™½ç„¶ HTML æ¨¡æ¿çœ‹èµ·æ¥æ›´åƒæ˜¯ç»å…¸çš„ç§‘å­¦æµ·æŠ¥ï¼Œä½† Betterland å’Œ Betterport æ¨¡æ¿åˆ›å»ºçš„æµ·æŠ¥å…·æœ‰å¤§é‡ç©ºé—´ï¼Œä¸“é—¨ç”¨äºå‘ˆç°é«˜ä¼ é€’æ€§çš„(take-away)ä¿¡æ¯ã€‚
åä¸¤è€…çš„åŒºåˆ«åœ¨äºï¼ŒBetterland æ˜¯æ¨ªå‘çš„ï¼Œè€Œ Betterport æ˜¯çºµå‘çš„ã€‚</p>
<p><br></p>
</div>
<div id="ä¸ªæ€§åŒ–" class="section level2">
<h2>ä¸ªæ€§åŒ–</h2>
<p>å½“é€‰æ‹©äº†æ¨¡æ¿ï¼Œå°±å¯ä»¥åœ¨Rmdæ–‡ä»¶å†…ä¿®æ”¹å†…å®¹ã€‚å¦‚æœå¯¹å­—å·ã€å­—ä½“ç­‰ä¸å¤ªæ»¡æ„ï¼Œè¿˜å¯ä»¥åœ¨ä¿®æ”¹yamléƒ¨åˆ†å‚æ•°ã€‚</p>
<p><img src="img/code.png" /></p>
<p>æœ€åç‚¹å‡»Knitå³å¯æ¸²æŸ“å‡ºå­¦æœ¯ä¼šè®®æµ·æŠ¥</p>
<p><br></p>
</div>
<div id="å‚è€ƒèµ„æ–™" class="section level2">
<h2>å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://shilaan.rbind.io/post/academic-conference-posters-using-posterdown" class="uri">https://shilaan.rbind.io/post/academic-conference-posters-using-posterdown</a></li>
<li><a href="https://github.com/brentthorne/posterdown" class="uri">https://github.com/brentthorne/posterdown</a></li>
</ul>
<p><br></p>
</div>
<div id="å¹¿è€Œå‘Šä¹‹" class="section level2">
<h2>å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
</div>
]]></content:encoded>
    </item>
    
    <item>
      <title>Rè¯­è¨€ | ç»˜åˆ¶ä¸­å›½åœ°å›¾</title>
      <link>https://textdata.cn/blog/2022-09-04-geospatial-plotting/</link>
      <pubDate>Sat, 03 Sep 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-09-04-geospatial-plotting/</guid>
      <description>ä½¿ç”¨ggplot2, leaflet, sf, terraåŒ…ç»˜åˆ¶ä¸­å›½åœ°å›¾</description>
      <content:encoded><![CDATA[


<p><br></p>
<div id="å¹¿è€Œå‘Šä¹‹" class="section level2">
<h2>å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
</div>
]]></content:encoded>
    </item>
    
    <item>
      <title>Latex | ä¸ºRmarkdowné…ç½®tinytexç¯å¢ƒ</title>
      <link>https://textdata.cn/blog/2022-09-01-how_to_use_tinytex/</link>
      <pubDate>Thu, 01 Sep 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-09-01-how_to_use_tinytex/</guid>
      <description>ä¸å†ä½¿ç”¨åŠ¨è¾„åå‡ ä¸ªGçš„Texå·¨å‹è½¯ä»¶åŒ…ï¼Œä»æ­¤ä¸­æ–‡latexæ–‡æ¡£ï¼Œæ¸²æŸ“ä¸å†æ˜¯éš¾é¢˜</description>
      <content:encoded><![CDATA[<p>Råœˆè°¢ä¸€è¾‰å¤§ç¥å¼€å‘çš„ <a href="https://yihui.org/tinytex/">tinytex</a>åŒ…ï¼Œæ˜¯ä¸€ä¸ªå¼ºæ‚ç²¾å¹²çš„Texè½¯ä»¶åŒ…ã€‚å¦‚æœæ¥è§¦è¿‡LaTexçš„åŒå­¦åº”è¯¥çŸ¥é“ï¼Œé…ç½®å¥½Latexçš„ç¯å¢ƒéœ€è¦å‡ ä¸ªGï¼Œååˆ†å ç”¨ç©ºé—´ã€‚å…¶æ¬¡ï¼ŒTinyTexå°†LaTexåŒ…çš„é…ç½®ã€å®‰è£…ã€æ¸²æŸ“ç®€åŒ–ä¸ºå‡ ä¸ªå‡½æ•°ã€‚</p>
<h2 id="é…ç½®tinytex">é…ç½®TinyTex</h2>
<p>å®‰è£…å’Œç»´æŠ¤ <a href="https://yihui.org/tinytex/">TinyTex</a>ç¯å¢ƒååˆ†ç®€å•ï¼Œé¦–å…ˆæˆ‘ä»¬å®‰è£…å¥½Rè¯­è¨€çš„tinytexåŒ…ï¼Œä¹‹åç”¨è¯¥åŒ…å®‰è£…TinyTexè½¯ä»¶ã€‚è€ƒè™‘åˆ° <a href="https://ctan.org/mirrors/mirmon">Texèµ„æºç«™CTAN</a>éƒ¨ç½²åœ¨æµ·å¤–ï¼Œä½¿ç”¨è¯¥ç«™ç‚¹ä¸‹è½½èµ„æºåŒ…ä¼šå¾ˆæ…¢ï¼Œæ‰€ä»¥è¿™é‡Œé…ç½®ä¸ºå›½å†…æ¸…åç«™ç‚¹ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">#å®‰è£…Rè¯­è¨€ä¸­çš„tinytexåŒ…
install.packages(&#34;tinytex&#34;)

#ä½¿ç”¨tinytexåŒ…å®‰è£…TinyTex
tinytex::install_tinytex()

#è®¾ç½®èµ„æºé•œåƒï¼ŒåŠ é€Ÿèµ„æºçš„ä¸‹è½½å®‰è£…
tinytex::tlmgr_repo(&#39;http://mirrors.tuna.tsinghua.edu.cn/CTAN/&#39;)

#tinytex::tl_pkgs()  #æŸ¥çœ‹å®‰è£…çš„latexåŒ…
#length(tinytex::tl_pkgs())

#tinytex::tinytex_root()   # æŸ¥çœ‹é»˜è®¤å®‰è£…è·¯å¾„
</code></pre></div><p><br><br></p>
<h2 id="ç¼–è¯‘">ç¼–è¯‘</h2>
<p>LaTexæ–‡æ¡£æ˜¯ä¸€å›¢æºä»£ç ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶ç¼–è¯‘(æ¸²æŸ“)ä¸ºPDFæ–‡ä»¶ã€‚</p>
<pre><code>#é¦–å…ˆè®°å¾—è®¾ç½®å½“å‰å·¥ä½œè·¯å¾„
setwd('texæ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶')

tinytex::pdflatex('è‹±æ–‡texæ–‡ä»¶è·¯å¾„')  
tinytex::xelatex('ä¸­è‹±æ–‡texæ–‡ä»¶è·¯å¾„') #æ¨è
tinytex::latexmk('ä¸­è‹±æ–‡texæ–‡ä»¶è·¯å¾„') #æ¨è
</code></pre>
<p>æˆ‘ä»¬ç»å¸¸è·Ÿä¸­è‹±æ–‡ä¸€èµ·æ‰“äº¤é“ï¼Œæ‰€ä»¥ç¼–è¯‘æ–¹æ³•ä½¿ç”¨xelatexã€‚ pdflatexæˆ–xelatexæ¸²æŸ“è¿‡ç¨‹å¯èƒ½ä¼šç¼ºä¸€äº›åŒ…ï¼Œéœ€è¦æ‰‹åŠ¨å®‰è£…ã€‚è€Œlatexmkä¼šåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è‡ªåŠ¨å®‰è£…ç¼ºå¤±çš„åŒ…ï¼Œä¸è¿‡ä¸­æ–‡æœ€åè¿˜æ˜¯</p>
<blockquote>
<p>TinyTexç¼ºç‚¹æ˜¯åˆå­¦è€…ç¼–è¯‘æ…¢ï¼Œç”¨çš„è¶Šå¤šè¶Šä¹…ï¼Œè¶Šå¥½ç”¨ï¼Œå·¥å…·ä½¿ç”¨çš„æ”¶ç›Šæ›²çº¿æ˜¯å‘ä¸Šçš„ã€‚è€ŒTexLiveã€MacTexç­‰ä½¿ç”¨éš¾åº¦æ˜¯æ°´å¹³çš„ã€‚</p>
</blockquote>
<p><br><br></p>
<h2 id="ç»´æŠ¤">ç»´æŠ¤</h2>
<p>TinyTeX çš„ä¸»è¦ç»´æŠ¤å·¥ä½œåº”è¯¥æ˜¯å®‰è£… LaTeX åŒ…ä»¥åŠæ›´æ–°ã€‚</p>
<ul>
<li>å¦‚æœç¼–è¯‘ PDF æ—¶å‡ºç°ç¼ºå¤± LaTeX åŒ…çš„é”™è¯¯ä¿¡æ¯ï¼Œå¯ä»¥ç”¨å‘½ä»¤è¡Œ <code>tinytex::tlmgr_search()</code></li>
<li>æ ¹æ®ç¼ºå¤±æ–‡ä»¶åæœç´¢åŒ…åï¼Œå¹¶ç”¨ <code>tinytex::tlmgr_install()</code> å®‰è£…ç¼ºå¤±çš„åŒ…ï¼›</li>
<li>å‘½ä»¤ <code>tinytex::tlmgr_update()</code> å¯ä»¥æ›´æ–°æ•´ä¸ª TeX Live ç³»ç»Ÿã€‚R ç”¨æˆ·å¯ä»¥ä½¿ç”¨ R åŒ… tinytex ä¸­çš„ç›¸åº”å‡½æ•°ï¼Œå¦‚ï¼š</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">tinytex::tlmgr_search(&#39;framed.sty&#39;)  # æœç´¢åŒ…å« framed.sty æ–‡ä»¶çš„ LaTeX åŒ…
tinytex::tlmgr_install(&#39;framed&#39;)     # å®‰è£… framed åŒ…
tinytex::tlmgr_update()              # æ›´æ–° TeX Live
</code></pre></div><p>å¦‚æœä½ æƒ³é™ä½è¿™äº›æœåŒ…ã€è£…åŒ…æ“ä½œï¼Œå¯ä»¥è€ƒè™‘åƒ TexLive é‚£æ ·è£…å‡ ä¸ªGã€‚è°¢ä¸€è¾‰å¤§ç¥ä»Šå¹´æ¨é€äº†ä¸€ä¸ªæ–°èµ„æºï¼Œåªéœ€è¦å®‰è£…4000ä¸ªåŒ…2Gçš„å³å¯ç»‘å®šå¸¸ç”¨èµ„æºåŒ…ã€‚</p>
<p>è®¾ç½®ç¯å¢ƒå˜é‡ <code>TINYTEX_INSTALLER=TinyTeX-2</code>, ä¹‹åè¿è¡Œä»¥ä¸‹ä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># increase the download timeout to 2 hours just in case the
# default 1 hour is not enough (you can further increase it)
options(timeout = 7200)
tinytex::install_tinytex(bundle = &#39;TinyTeX-2&#39;)
</code></pre></div><p>å‹˜å¯Ÿä¸€ä¸‹ç”µè„‘å†…latexåŒ…æ•°é‡</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">length(tinytex::tl_pkgs())
</code></pre></div><p>Wow~~ï¼Œè¾¾åˆ°4197!! å¦‚æœä½ æ„¿æ„TinyTexï¼Œä¹Ÿå¯ä»¥å˜æˆHugeTexã€‚æœ€åå†ç®€å•çš„å·¥å…·ï¼Œå¦‚æœåªçœ‹ä¾ç„¶ä¼šçœ‹ç€å®¹æ˜“ç”¨ç€éš¾ï¼Œè¿˜æ˜¯è¦å¤šåŠ¨æ‰‹çš„ã€‚</p>
<p><br><br></p>
<h2 id="å­¦ä¹ èµ„æ–™">å­¦ä¹ èµ„æ–™</h2>
<ul>
<li>
<p><a href="https://yihui.org/tinytex/cn/">https://yihui.org/tinytex/cn/</a></p>
</li>
<li>
<p><a href="https://yihui.org/tinytex/">https://yihui.org/tinytex/</a></p>
</li>
<li>
<p><a href="https://yihui.org/en/2022/05/tinytex-full/">https://yihui.org/en/2022/05/tinytex-full/</a></p>
</li>
<li>
<p><a href="https://github.com/rstudio/tinytex-releases/">https://github.com/rstudio/tinytex-releases/</a></p>
</li>
</ul>
<p><br><br></p>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>ymlthisåŒ… | ä¸ºRmarkdownæ–‡ä»¶è½»æ¾è®¾ç½®YMAL</title>
      <link>https://textdata.cn/blog/ymlthis_rmarkdown_ymal/</link>
      <pubDate>Sat, 27 Aug 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/ymlthis_rmarkdown_ymal/</guid>
      <description>Rmarkdownæ˜¯Rè¯­è¨€çš„ä»£ç æ–‡ä»¶ç±»å‹ï¼Œèƒ½æ¸²æŸ“æˆhtmlã€pdfã€docç­‰æ–‡ä»¶ã€‚ä½†éœ€è¦ç”¨åˆ°å¤æ‚çš„YAMLè¿›è¡Œå‚æ•°è®¾ç½®ï¼Œå¤ªéš¾è®°ä½äº†ã€‚ä¸è¿‡æœ‰äº†ymlthisåŒ…ï¼Œ éš¾åº¦å¤§å¤§é™ä½ã€‚</description>
      <content:encoded><![CDATA[<p><img loading="lazy" src="img/rmarkdown_function.png" alt=""  />
</p>
<p>Rmarkdownæ˜¯Rè¯­è¨€çš„ä»£ç æ–‡ä»¶ç±»å‹ï¼Œèƒ½æ¸²æŸ“æˆhtmlã€pdfã€docç­‰æ–‡ä»¶ã€‚ä½†éœ€è¦ç”¨åˆ°å¤æ‚çš„YAMLè¿›è¡Œå‚æ•°è®¾ç½®ï¼Œå¤ªéš¾è®°ä½äº†ã€‚ä¸è¿‡æœ‰äº†ymlthisåŒ…ï¼Œ éš¾åº¦å¤§å¤§é™ä½ã€‚</p>
<br>
<h2 id="å®‰è£…ymlthis">å®‰è£…ymlthis</h2>
<p>knitæ¸²æŸ“æ•ˆæœä¸€èˆ¬ç”±Rmarkdownå¼€å¤´çš„YAMLè®¾ç½®ã€‚å½¢å¦‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">title: &#34;Rmarkdownç”¨æ³•&#34;
author: &#34;å¤§é‚“&#34;
date: &#34;2022-07-21&#34;
output: 
  html_document:         #è¾“å‡ºhtml
    toc: true            #ç”Ÿæˆç›®å½•
    toc_float: true      #ç›®å½•æµ®åŠ¨
    theme: readable      #readableä¸»é¢˜
    number_sections: yes #ç« èŠ‚è‡ªåŠ¨æ’åºå·
    df_print: paged      #htmlä¸­çš„data.frameæ•°æ®èƒ½ç¿»é¡µ
</code></pre></div><p>yamlæ¯”è¾ƒéš¾è®°ä½ï¼Œå¾ˆå®¹æ˜“è®¾ç½®é”™è¯¯ï¼Œå¯ä»¥å®‰è£… <code>ymlthisåŒ…</code>ï¼Œè¯¥åŒ…å¯ä»¥å¸®æˆ‘ä»¬çœå»è®°å¿†ä¹‹è‹¦ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">install.packages(&#34;ymlthis&#34;)
</code></pre></div><br>
<h2 id="é…ç½®yaml">é…ç½®YAML</h2>
<p><a href="https://ymlthis.r-lib.org/index.html">ymlthis</a>å®‰è£…æˆåŠŸåï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥å¿«æ·å·¥å…·ã€‚åœ¨å·¥å…·æ ç‚¹å‡» <code>Addins</code></p>
<p><img loading="lazy" src="img/add_in_thisyml_1.jpg" alt=""  />
</p>
<p>æ‰¾åˆ° <code>Write New R Markdown or YAML File</code></p>
<p><img loading="lazy" src="img/add_in_thisyml_2.gif" alt=""  />
</p>
<p>å¤æ‚çš„ <a href="https://bookdown.org/yihui/rmarkdown/html-document.html">htmlæ¸²æŸ“</a>å‚æ•°è®¾ç½®ï¼Œå¦‚æ ‡é¢˜ã€ä½œè€…ã€æ¸²æŸ“æ•ˆæœã€ç›®å½•ã€ä¸»é¢˜ç­‰ï¼Œç¬é—´å˜çš„ç®€å•èµ·æ¥ã€‚</p>
<p>æœ€åï¼Œ.Rmdæ–‡ä»¶æ¸²æŸ“ä¸ºhtmlæ–‡ä»¶çš„æ“ä½œæ–¹æ³•ã€‚</p>
<p><img loading="lazy" src="img/knit_to_html.png" alt=""  />
</p>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><strong>ä»˜è´¹è§†é¢‘è¯¾ç¨‹ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</strong></li>
<li>å¤§é‚“æ¯å¹´ä¼šæœ‰4åœºç›´æ’­ï¼Œäº”ä¸€ã€åä¸€ã€å¯’ã€æš‘å‡ï¼Œå¦‚æœæ—¶é—´ç‚¹æ¥è¿‘ï¼Œå¯è€ƒè™‘æŠ¥åå‚ä¸<a href="https://textdata.cn/blog/2022-05-workshop/7-Python.html">ç›´æ’­è¯¾</a>ã€‚</li>
<li>å¦‚æœåªæ„æ€§ä»·æ¯”ï¼Œä¸”å·²è¿«ä¸åŠå¾…æƒ³å­¦ï¼Œå¯ä»¥è€ƒè™‘ç›´æ¥æŠ¥åå¤§é‚“çš„<a href="https://textdata.cn/blog/management_python_course">å½•æ’­è¯¾</a>ã€‚</li>
<li>å¦‚æœä¸æƒ³å­¦ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘å¤–åŒ…ã€‚æ›´å»ºè®®æ‰¾æ·˜å®ï¼Œå¦‚æœæ‰¾æˆ‘å’¨è¯¢ï¼Œè¯·å…ˆé˜…è¯»<a href="https://textdata.cn/blog/paid_for_service">æœ‰å¿è¯´æ˜</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>blogdownåŒ… | ä½¿ç”¨Rè¯­è¨€ç»´æŠ¤Hugoé™æ€ç½‘ç«™</title>
      <link>https://textdata.cn/blog/blogdown_for_hugo_website/</link>
      <pubDate>Fri, 29 Jul 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/blogdown_for_hugo_website/</guid>
      <description>ä½¿ç”¨ã€ŒRè¯­è¨€ã€ çš„ blogdown &#43; hugo &#43; &#43; githubPages æ­å»ºé™æ€åšå®¢ç³»ç»Ÿï¼Œä½¿ç”¨ç”¨ Rstudio ä¸“æ³¨äºå†™ä½œã€‚</description>
      <content:encoded><![CDATA[


<p>ä½¿ç”¨ã€ŒRè¯­è¨€ã€ çš„ blogdown + hugo + + githubPages æ­å»ºé™æ€åšå®¢ç³»ç»Ÿï¼Œä½¿ç”¨ç”¨ Rstudio ä¸“æ³¨äºå†™ä½œã€‚</p>
<div id="hugo" class="section level2">
<h2>Hugo</h2>
<p>Hugoæ˜¯ä¸€ç§ç‰¹åˆ«å—æ¬¢è¿çš„é™æ€ç«™ç‚¹æ¡†æ¶ï¼ŒåŸºäºGoè¯­è¨€å¼€å‘ï¼Œå»ºç«™é€Ÿåº¦å’Œä¸Šæ‰‹éš¾åº¦éƒ½å¾ˆäº²æ°‘ã€‚</p>
<p><img src="img/hugo.png" /></p>
<p><br><br></p>
</div>
<div id="blogdown" class="section level2">
<h2>Blogdown</h2>
<p>è€Œ blogdown æ˜¯ Rè¯­è¨€çš„å»ºç«™åŒ…ï¼Œ å¯ä»¥åœ¨Rstudioå†…ä¸€è¾¹å†™æ–‡æ¡£ç¬”è®°ä¸€è¾¹æ¸²æŸ“å‡ºhtmlæ–‡ä»¶ã€‚ä¸‹å›¾æ˜¯Rstudio æˆªå›¾</p>
<p><img src="img/Rstudio_blogdown_panel.png" /></p>
<ul>
<li><strong>Rstudioå·¦ä¸Šè§’</strong> ä¸ºåšå®¢æ–‡æ¡£æ’°å†™åŒº(ä»£ç ã€æ–‡æ¡£ã€å›¾ç‰‡)</li>
<li><strong>Rstudioå·¦ä¸‹æ–¹</strong> ä¸ºå‘½ä»¤è¡ŒåŒºåŸŸ</li>
<li><strong>Rstudioå³ä¸‹æ–¹</strong> ä¸ºåšå®¢æ–‡æ¡£æ¸²æŸ“æ•ˆæœ</li>
</ul>
<p><br></p>
<p>å¯¹äº†ï¼Œ blogdownä½œè€… <a href="https://yihui.org/en/">è°¢ç›Šè¾‰</a> æ˜¯ä¸€ä½ä¸­å›½äººï¼Œä»–åŒæ—¶ä¹Ÿæ˜¯ <a href="https://bookdown.org/">bookdown</a>ã€ <a href="https://yihui.org/tinytex/">tinytex</a> ç­‰åŒ…çš„ä½œè€…ã€‚ å­¦ä¹ Rè¯­è¨€çš„åŒå­¦åº”è¯¥å¾ˆç†Ÿæ‚‰çš„ã€‚ç›®å‰å¾ˆå¤š Rè¯­è¨€ ä¼˜ç§€çš„æ–‡æ¡£éƒ½æ˜¯ä½¿ç”¨ bookdownåŒ…ï¼Œæ¯”å¦‚</p>
<p><img src="img/blogdown_gallery1.png" /> <img src="img/blogdown_gallery2.png" /></p>
<p><br><br></p>
</div>
<div id="å·¥ä½œæµç¨‹æ—§" class="section level2">
<h2>å·¥ä½œæµç¨‹(æ—§)</h2>
<p>ä»21å¹´5æœˆèµ·ï¼Œå¤§é‚“ç¬¬ä¸€æ¬¡ä½¿ç”¨ <a href="https://textdata.cn/blog/hugo_website_test/">Hugo + Gihub Page</a> å»ºç«‹ä¸ªäººåšå®¢ç«™ï¼Œä¹‹ååˆæ›´æ¢ä¸º <a href="https://textdata.cn/blog/blog_add_comments_function/">hugo-papermodä¸»é¢˜ï¼›æ–°å¢ç•™è¨€åŠŸèƒ½</a>ã€‚ç•Œé¢ç¾è§‚ï¼Œä»£ç å¤åˆ¶å¾ˆæ–¹ä¾¿ï¼Œé€‚åˆå…¬ä¼—å·å…³æ³¨è€…æµè§ˆå­¦ä¹ ã€‚ä½†å¯¹å¤§é‚“è€Œè¨€ï¼Œå·¥ä½œæµç¨‹å¼‚å¸¸ç¹ç</p>
<ol style="list-style-type: decimal">
<li><strong>jupyter notebook</strong> å†™ä»£ç æ–‡æ¡£ï¼Œæµ‹è¯•ä»£ç å¯è¿è¡Œã€‚</li>
<li>ä» <strong>jupyter</strong> ä¸­ä¸‹è½½ä¸º <strong>markdown</strong> æ–‡æ¡£ï¼Œç¼–è¾‘ç”¨çš„å·¥å…·æ˜¯<strong>Typora</strong>ã€‚</li>
<li><strong>Hugo</strong>å‘½ä»¤è¡Œæ›´æ–°æœ¬åœ°(ç”µè„‘å†…)çš„ç«™ç‚¹ä»“åº“ã€‚</li>
<li>ä½¿ç”¨ <strong>Github Desktop</strong> æ¨é€è‡³<strong>Github Page</strong></li>
</ol>
<p>æ“ä½œæ­¥éª¤ä¸­ï¼Œå¤¹æ‚ç€å¤§é‡çš„å‘½ä»¤è¡Œæ“ä½œï¼Œæˆ‘ä¹Ÿè®°ä¸ä½è¿™äº›å‘½ä»¤è¡Œï¼Œæ˜¯å•ç‹¬å­˜æ”¾åœ¨ä¸€ä¸ªmarkdownç¬”è®°ä¸­ï¼Œç”¨çš„æ—¶å€™å¤åˆ¶ä¸€ä¸‹ã€‚å‘½ä»¤è¡Œç»™å¤§å®¶çœ‹çœ‹</p>
<pre><code>#åˆ‡æ¢è‡³ç”µè„‘åšå®¢ä»“åº“
cd /Users/å¤§é‚“/Desktop/Blog/Github

#å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼Œæµè§ˆå™¨æµ‹è¯•
hugo server -t PaperMod --buildDrafts

#ç”Ÿæˆç«™ç‚¹ï¼Œå¾…æ¨é€è‡³github
hugo --theme=PaperMod --baseUrl=&#39;/&#39; --buildDrafts</code></pre>
<p><br></p>
<p>æ€»ä¹‹å°±æ˜¯å¤æ‚ï¼Œæœ€è¿‘ç”¨ Rè¯­è¨€ å‘ç°æœ‰ <strong>blogdown</strong>åŒ… å¯ä»¥å°†å…¶ä¸­çš„æ­¥éª¤å‹ç¼©ï¼Œ ä¸»è¦å·¥ä½œé›†ä¸­åœ¨ <strong>Rstudio</strong> å’Œ <strong>Github Desktop</strong>ã€‚</p>
<p><br><br></p>
</div>
<div id="æ–°å·¥ä½œæµç¨‹" class="section level2">
<h2>æ–°å·¥ä½œæµç¨‹</h2>
<ol style="list-style-type: decimal">
<li>åœ¨ <strong>Rstudio</strong> å†…æ–°å»º <strong>Rmarkdown</strong> æ–‡æ¡£ï¼Œå†…éƒ¨å¯è¿›è¡Œ Rè¯­è¨€(æˆ–Python) çš„ä»£ç æ’°å†™</li>
<li>ç¼–è¯‘ <strong>Rmarkdownæ–‡æ¡£</strong> ä¸º htmlï¼Œ <strong>Github Desktop</strong> æ¨é€è‡³ä»“åº“ï¼Œæ›´æ–°ç«™ç‚¹ã€‚</li>
</ol>
<p>éœ€è¦ç”¨åˆ°çš„å‘½ä»¤ï¼Œä»…ä»…æœ‰ä»¥ä¸‹4ä¸ª</p>
<pre><code>    #æ–°å»ºåšå®¢ .Rmdæ–‡ä»¶
    blogdown::new_post()

    #å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼Œä¸€éå†™æ–‡æ¡£ï¼Œç½‘é¡µæ¸²æŸ“æ•ˆæœéšæ—¶å¯è§
    blogdown::serve_site()

    #åœæ­¢æœ¬åœ°æœåŠ¡
    blogdown::stop_server()

    #å°†.Rmdæ–‡ä»¶æ¸²æŸ“ä¸ºhtmlç­‰ç«™ç‚¹æ–‡ä»¶
    blogdown::build_site()</code></pre>
<p><br><br></p>
</div>
<div id="æœ¬æ–‡å‚è€ƒèµ„æ–™" class="section level2">
<h2>æœ¬æ–‡å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://bookdown.org/yihui/blogdown/">blogdown Docs</a></li>
<li><a href="https://themes.gohugo.io/themes/hugo-papermod/">Hugo-PaperMod</a></li>
<li><a href="https://cosx.org/2018/01/build-blog-with-blogdown-hugo-netlify-github/">ç”¨ R è¯­è¨€çš„ blogdown+hugo+netlify+github å»ºåšå®¢</a></li>
</ul>
<p><br></p>
</div>
<div id="å¹¿è€Œå‘Šä¹‹" class="section level2">
<h2>å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
</div>
]]></content:encoded>
    </item>
    
    <item>
      <title>ä½¿ç”¨Rå°†å¤šä¸ªtxtæ±‡æ€»åˆ°ä¸€ä¸ªcsvæ–‡ä»¶ä¸­</title>
      <link>https://textdata.cn/blog/multiple_txts_into_csv/</link>
      <pubDate>Fri, 29 Jul 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/multiple_txts_into_csv/</guid>
      <description>ä½¿ç”¨Rè¯­è¨€ï¼Œå¯¹å¤šä¸ªæ–‡ä»¶å¤¹å†…çš„æ•°ç™¾ä¸ªtxtæ±‡æ€»åˆ°ä¸€ä¸ªcsvæ–‡ä»¶å†…ï¼Œæœ‰åˆ©äºåç»­çš„æ–‡æœ¬åˆ†æã€‚æœ¬æ–‡ä¼šç”¨åˆ°readrã€readtextç­‰åŒ…ã€‚</description>
      <content:encoded><![CDATA[


<div id="ä»»åŠ¡" class="section level2">
<h2>ä»»åŠ¡</h2>
<p>ä½¿ç”¨Rè¯­è¨€ï¼Œå¯¹å¤šä¸ªæ–‡ä»¶å¤¹å†…çš„æ•°ç™¾ä¸ªtxtæ±‡æ€»åˆ°ä¸€ä¸ªcsvæ–‡ä»¶å†…ã€‚</p>
<p><br><br></p>
</div>
<div id="æ•°æ®é›†" class="section level2">
<h2>æ•°æ®é›†</h2>
<p>01-21å¹´ï¼Œå…¨å›½å„åœ°å¸‚æ”¿åºœå·¥ä½œæŠ¥å‘Šæ•°æ®é›†ã€‚</p>
<p><img src="img/provinces.png" /></p>
<p><img src="img/anhui.png" /></p>
<p><br><br></p>
</div>
<div id="ä»»åŠ¡åˆ†è§£" class="section level2">
<h2>ä»»åŠ¡åˆ†è§£</h2>
<ol style="list-style-type: decimal">
<li>ä½¿ç”¨list.filesè·å–æ–‡ä»¶è·¯å¾„åˆ—è¡¨</li>
<li>å®šä¹‰éœ€è¦çš„å‡½æ•°
<ul>
<li>ä½¿ç”¨readtext::readtext()å‡½æ•°è¯»å–æŠ¥å‘Šæ–‡æœ¬</li>
<li>å¹´ä»½å‡½æ•°ã€çœä»½å‡½æ•°</li>
</ul></li>
<li>å¯¹æ¯ä¸ªæ–‡ä»¶è·¯å¾„ï¼Œæ ¹æ®2å¾—åˆ°ä¸‰ä¸ªå­—æ®µä¿¡æ¯ï¼Œæ„é€ tibbleç»“æ„ï¼›</li>
<li>æ­¥éª¤2å’Œæ­¥éª¤3ä½¿ç”¨bind_colsåˆå¹¶æˆä¸€ä¸ªtibble</li>
<li>readr::write_csv()å‡½æ•°å­˜è‡³data.csv</li>
<li>å®¡æŸ¥data.csv</li>
</ol>
<p>æ•°æ®å­˜åœ¨provinceæ–‡ä»¶å†…, è¯¥<a href="province.zip"><strong>ç‚¹å‡»ä¸‹è½½è¯¥æ•°æ®é›†</strong></a></p>
<div id="txtè·¯å¾„åˆ—è¡¨" class="section level3">
<h3>1. txtè·¯å¾„åˆ—è¡¨</h3>
<p>ä½¿ç”¨ list.fileså‡½æ•°æŸ¥çœ‹</p>
<ul>
<li>æ–‡ä»¶å¤¹è·¯å¾„åˆ—è¡¨</li>
<li>æ–‡ä»¶è·¯å¾„åˆ—è¡¨</li>
</ul>
<p>provinceå†…çš„æ–‡ä»¶å¤¹è·¯å¾„åˆ—è¡¨</p>
<pre class="r"><code>dirs &lt;- list.files(&#39;province&#39;, full.names = TRUE)
head(dirs)</code></pre>
<pre><code>## [1] &quot;province/ä¸Šæµ·&quot;   &quot;province/äº‘å—&quot;   &quot;province/å†…è’™å¤&quot; &quot;province/åŒ—äº¬&quot;  
## [5] &quot;province/å‰æ—&quot;   &quot;province/å››å·&quot;</code></pre>
<p>æ‰€æœ‰çœä»½æ–‡ä»¶å¤¹å†…çš„æ–‡ä»¶è·¯å¾„åˆ—è¡¨</p>
<pre class="r"><code>files &lt;- list.files(dirs, full.names = TRUE)
head(files)</code></pre>
<pre><code>## [1] &quot;province/ä¸Šæµ·/2003å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt&quot;
## [2] &quot;province/ä¸Šæµ·/2004å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt&quot;
## [3] &quot;province/ä¸Šæµ·/2005å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt&quot;
## [4] &quot;province/ä¸Šæµ·/2006å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt&quot;
## [5] &quot;province/ä¸Šæµ·/2007å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt&quot;
## [6] &quot;province/ä¸Šæµ·/2008å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt&quot;</code></pre>
<p>å…±æœ‰617ä¸ªtxtæ–‡ä»¶</p>
<pre class="r"><code>length(files)</code></pre>
<pre><code>## [1] 617</code></pre>
<p><br></p>
</div>
<div id="readtextè¯»å–txt" class="section level3">
<h3>2.1 readtextè¯»å–txt</h3>
<p>ä½¿ç”¨ readtext::readtext æ‰¹é‡è¯»å– å¤šä¸ªtxt</p>
<pre class="r"><code>txts_df &lt;- readtext::readtext(files)
head(txts_df)</code></pre>
<pre><code>## readtext object consisting of 6 documents and 0 docvars.
## # Description: df [6 Ã— 2]
##   doc_id                     text                         
##   &lt;chr&gt;                      &lt;chr&gt;                        
## 1 2003å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt &quot;\&quot;  å„ä½ä»£è¡¨ï¼Œ ç°åœ¨\&quot;...&quot;   
## 2 2004å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt &quot;\&quot; å„ä½ä»£è¡¨ï¼š\n\n  \&quot;...&quot;   
## 3 2005å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt &quot;\&quot;å„ä½ä»£è¡¨ï¼š\n\nã€€ã€€ç°\&quot;...&quot;
## 4 2006å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt &quot;\&quot;å„ä½ä»£è¡¨ï¼š\nã€€ã€€ä¸Šæµ·\&quot;...&quot;
## 5 2007å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt &quot;\&quot;ã€€ã€€æ”¿åºœå·¥ä½œæŠ¥å‘Š\nã€€\&quot;...&quot;
## 6 2008å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt &quot;\&quot;\n\tæ”¿åºœå·¥ä½œæŠ¥å‘Š\n\n\&quot;...&quot;</code></pre>
<p>æ£€æŸ¥textå­—æ®µé•¿åº¦ï¼Œæ˜¯å¦ä¸º617.</p>
<pre class="r"><code>length(txts_df[[&#39;text&#39;]])</code></pre>
<pre><code>## [1] 617</code></pre>
<p><br></p>
</div>
<div id="å®šä¹‰åŠŸèƒ½å‡½æ•°" class="section level3">
<h3>2.2 å®šä¹‰åŠŸèƒ½å‡½æ•°</h3>
<p>æ•°æ®æ•´ç†åˆ°ä¸€ä¸ªcsvï¼Œæˆ‘ä»¬æƒ³ä¿å­˜å››ä¸ªå­—æ®µï¼Œåˆ†åˆ«æ˜¯</p>
<ul>
<li>txtæ–‡ä»¶å</li>
<li>å¹´ä»½</li>
<li>çœ(å¸‚)å</li>
<li>å·¥ä½œæŠ¥å‘Šå†…å®¹</li>
</ul>
<p>å¹´ä»½å’Œçœä»½éœ€è¦é€šè¿‡å®šä¹‰å‡½æ•°å®ç°~</p>
<pre class="r"><code>s&lt;-basename(&quot;province/ä¸Šæµ·/2003å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt&quot;) 
substr(s, 1, 4)</code></pre>
<pre><code>## [1] &quot;2003&quot;</code></pre>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## â”€â”€ Attaching packages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse 1.3.2 â”€â”€
## âœ” ggplot2 3.3.6     âœ” purrr   0.3.4
## âœ” tibble  3.1.8     âœ” dplyr   1.0.9
## âœ” tidyr   1.2.0     âœ” stringr 1.4.0
## âœ” readr   2.1.2     âœ” forcats 0.5.1
## â”€â”€ Conflicts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse_conflicts() â”€â”€
## âœ– dplyr::filter() masks stats::filter()
## âœ– dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>year_func &lt;- function(filepath){
  year &lt;- filepath %&gt;% 
    basename() %&gt;% 
    substr(1, 4)
  return (year)
}

name_func &lt;- function(file){
  file &lt;- basename(file)
  name &lt;- gsub(&#39;æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt&#39;, &#39;&#39;, file) 
  name &lt;- stringr::str_sub(name, start=6)
  return (name)
}

file &lt;- &quot;province/ä¸Šæµ·/2003å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt&quot;
year_func(file)</code></pre>
<pre><code>## [1] &quot;2003&quot;</code></pre>
<pre class="r"><code>name_func(file)</code></pre>
<pre><code>## [1] &quot;ä¸Šæµ·&quot;</code></pre>
<p>txts_df æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„tibbleæ•°æ®ç±»å‹ã€‚ ç°åœ¨éœ€è¦æ„é€ å¹´ä»½ã€çœä»½å‡½æ•°ï¼Œè·å–å¦å¤–ä¸€ä¸ªtibbleã€‚</p>
<pre class="r"><code>year_province_df &lt;- tibble(
  year = year_func(txts_df$doc_id),
  province = lapply(txts_df$doc_id, name_func) %&gt;% unlist()
  )

head(year_province_df)</code></pre>
<pre><code>## # A tibble: 6 Ã— 2
##   year  province
##   &lt;chr&gt; &lt;chr&gt;   
## 1 2003  ä¸Šæµ·    
## 2 2004  ä¸Šæµ·    
## 3 2005  ä¸Šæµ·    
## 4 2006  ä¸Šæµ·    
## 5 2007  ä¸Šæµ·    
## 6 2008  ä¸Šæµ·</code></pre>
<p><br></p>
</div>
<div id="åˆå¹¶ä¸¤ä¸ªtibble" class="section level3">
<h3>4. åˆå¹¶ä¸¤ä¸ªtibble</h3>
<p>cbind_rows()åˆå¹¶ä¸¤ä¸ªtibble</p>
<pre class="r"><code>res_df &lt;- bind_cols(year_province_df, txts_df)
head(res_df)</code></pre>
<pre><code>## # A tibble: 6 Ã— 4
##   year  province doc_id                     text                                
##   &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;                      &lt;chr&gt;                               
## 1 2003  ä¸Šæµ·     2003å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt &quot;  å„ä½ä»£è¡¨ï¼Œ ç°åœ¨ï¼Œæˆ‘ä»£è¡¨ä¸Šæµ·å¸‚äººâ€¦ 
## 2 2004  ä¸Šæµ·     2004å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt &quot; å„ä½ä»£è¡¨ï¼š\n\n    ç°åœ¨ï¼Œæˆ‘ä»£è¡¨ä¸Šâ€¦ 
## 3 2005  ä¸Šæµ·     2005å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt &quot;å„ä½ä»£è¡¨ï¼š\n\nã€€ã€€ç°åœ¨ï¼Œæˆ‘ä»£è¡¨ä¸Šæµ·â€¦
## 4 2006  ä¸Šæµ·     2006å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt &quot;å„ä½ä»£è¡¨ï¼š\nã€€ã€€ä¸Šæµ·å¸‚å›½æ°‘ç»æµå’Œç¤¾â€¦
## 5 2007  ä¸Šæµ·     2007å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt &quot;ã€€ã€€æ”¿åºœå·¥ä½œæŠ¥å‘Š\nã€€ã€€â€•â€•2007å¹´1æœˆ2â€¦
## 6 2008  ä¸Šæµ·     2008å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt &quot;\n\tæ”¿åºœå·¥ä½œæŠ¥å‘Š\n\n\tâ€”â€”2008å¹´1æœˆ2â€¦</code></pre>
<p><br></p>
</div>
<div id="å­˜å…¥csv" class="section level3">
<h3>5. å­˜å…¥csv</h3>
<p>ä½¿ç”¨ write.table(x, file, sep) å†™å…¥data.csv</p>
<ul>
<li>x å¾…å­˜å‚¨æ•°æ®å¯¹è±¡</li>
<li>file csvæ–‡ä»¶è·¯å¾„</li>
<li>delim åˆ†å‰²ç¬¦</li>
</ul>
<pre class="r"><code>?readr::write_csv</code></pre>
<pre class="r"><code>readr::write_csv(x=res_df, 
                 file=&#39;data.csv&#39;, 
                 col_names=T) </code></pre>
<p><br></p>
</div>
<div id="æ£€æŸ¥data.csv" class="section level3">
<h3>6. æ£€æŸ¥data.csv</h3>
<p>å°è¯•è¯»å– <a href="data.csv">data.csv</a></p>
<pre class="r"><code>df &lt;- readr::read_csv(&#39;data.csv&#39;)</code></pre>
<pre><code>## Rows: 617 Columns: 4
## â”€â”€ Column specification â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
## Delimiter: &quot;,&quot;
## chr (3): province, doc_id, text
## dbl (1): year
## 
## â„¹ Use `spec()` to retrieve the full column specification for this data.
## â„¹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre class="r"><code>head(df)</code></pre>
<pre><code>## # A tibble: 6 Ã— 4
##    year province doc_id                     text                                
##   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;                      &lt;chr&gt;                               
## 1  2003 ä¸Šæµ·     2003å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt &quot;å„ä½ä»£è¡¨ï¼Œ ç°åœ¨ï¼Œæˆ‘ä»£è¡¨ä¸Šæµ·å¸‚äººæ°‘â€¦ 
## 2  2004 ä¸Šæµ·     2004å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt &quot;å„ä½ä»£è¡¨ï¼š\n\n    ç°åœ¨ï¼Œæˆ‘ä»£è¡¨ä¸Šæµ·â€¦
## 3  2005 ä¸Šæµ·     2005å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt &quot;å„ä½ä»£è¡¨ï¼š\n\nã€€ã€€ç°åœ¨ï¼Œæˆ‘ä»£è¡¨ä¸Šæµ·â€¦
## 4  2006 ä¸Šæµ·     2006å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt &quot;å„ä½ä»£è¡¨ï¼š\nã€€ã€€ä¸Šæµ·å¸‚å›½æ°‘ç»æµå’Œç¤¾â€¦
## 5  2007 ä¸Šæµ·     2007å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt &quot;ã€€ã€€æ”¿åºœå·¥ä½œæŠ¥å‘Š\nã€€ã€€â€•â€•2007å¹´1æœˆ2â€¦
## 6  2008 ä¸Šæµ·     2008å¹´ä¸Šæµ·æ”¿åºœå·¥ä½œæŠ¥å‘Š.txt &quot;\n\tæ”¿åºœå·¥ä½œæŠ¥å‘Š\n\n\tâ€”â€”2008å¹´1æœˆ2â€¦</code></pre>
</div>
</div>
]]></content:encoded>
    </item>
    
    <item>
      <title>renvåŒ… | Rè¯­è¨€çš„é¡¹ç›®ç¯å¢ƒç®¡ç†åº“</title>
      <link>https://textdata.cn/blog/renv_environment_management_for_r/</link>
      <pubDate>Thu, 21 Jul 2022 18:43:10 +0600</pubDate>
      
      <guid>/blog/renv_environment_management_for_r/</guid>
      <description>å¦‚ä½•æé«˜ä»£ç çš„é•¿æœŸå¯é‡å¤æ€§</description>
      <content:encoded><![CDATA[
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/2CTC8FRD_Y4" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<br>
<h2 id="renvhttpsgithubcomrstudiorenvç‰¹æ€§"><a href="https://github.com/rstudio/renv">renv</a>ç‰¹æ€§</h2>
<p>renv åŒ…å¯å¸®åŠ©æ‚¨ä¸º R é¡¹ç›®åˆ›å»ºå¯é‡ç°çš„ç¯å¢ƒã€‚ ä½¿ç”¨ renv ä½¿ Rè¯­è¨€é¡¹ç›®æ›´ï¼š</p>
<ul>
<li>
<p><strong>ã€éš”ç¦»çš„ã€</strong>ï¼šä¸ºä¸€ä¸ªé¡¹ç›®å®‰è£…æ–°çš„æˆ–æ›´æ–°çš„åŒ…ä¸ä¼šç ´åå…¶ä»–é¡¹ç›®ï¼Œåä¹‹äº¦ç„¶ã€‚ é‚£æ˜¯å› ä¸º renv ä¸ºæ¯ä¸ªé¡¹ç›®æä¾›äº†è‡ªå·±çš„ç§æœ‰åŒ…ã€‚</p>
</li>
<li>
<p><strong>ã€ä¾¿æºçš„ã€</strong>ï¼šè½»æ¾å°†é¡¹ç›®ä»ä¸€å°è®¡ç®—æœºä¼ è¾“åˆ°å¦ä¸€å°è®¡ç®—æœºï¼Œç”šè‡³è·¨ä¸åŒå¹³å°ã€‚ renv å¯ä»¥å¾ˆå®¹æ˜“åœ°å®‰è£…é¡¹ç›®æ‰€ä¾èµ–çš„åŒ…ã€‚</p>
</li>
<li>
<p><strong>ã€å¯é‡ç°çš„ã€</strong>ï¼š renv è®°å½•é¡¹ç›®æ‰€ä¾èµ–çš„ç¡®åˆ‡è½¯ä»¶åŒ…ç‰ˆæœ¬ï¼Œå¹¶ç¡®ä¿æ— è®ºæ‚¨èµ°åˆ°å“ªé‡Œéƒ½å¯ä»¥å®‰è£…è¿™äº›ç¡®åˆ‡ç‰ˆæœ¬ã€‚</p>
</li>
</ul>
<p><br><br></p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<p>ä»CRANå®‰è£…æœ€æ–°çš„ <code>renv</code>åŒ…</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">install.packages(&#34;renv&#34;)
</code></pre></div><p><br><br></p>
<h2 id="ç”¨æ³•">ç”¨æ³•</h2>
<h3 id="renvinit">renv::init()</h3>
<p>ä½¿ç”¨ <code>renv::init()</code> æ¥åˆå§‹åŒ–æ–°(æˆ–å·²æœ‰)é¡¹ç›®çš„Rç¯å¢ƒã€‚é€šè¿‡åˆå§‹åŒ–å¯ä»¥ä¸ºé¡¹ç›®å»ºç«‹ç‹¬ç«‹çš„ç§æœ‰åŒ…ï¼Œç¡®ä¿é¡¹ç›®æ‰€éœ€åŒ…éƒ½èƒ½å¾—åˆ°å®‰è£…ã€‚</p>
<h3 id="renvsnapshot">renv::snapshot()</h3>
<p>ä¿å­˜é¡¹ç›®çŠ¶æ€ï¼Œ é¡¹ç›®ç”¨åˆ°çš„RåŒ…ä¼šè®°å½•åœ¨<code>lockfile</code>ä¸­ï¼Œè¢«ç§°ä¸º<code>renv.lock</code>ã€‚</p>
<h3 id="renvrestore">renv::restore()</h3>
<p>ä¹‹åï¼Œå¦‚æœéœ€è¦å°†é¡¹ç›®æ–‡ä»¶å¤¹è½¬ç§»åˆ°æ–°çš„ç”µè„‘ï¼Œ å¯ä»¥é€šè¿‡   <code>renv::restore()</code> æ¥é‡è£… lockfileæ–‡ä»¶è®°å½•åˆ°(é¡¹ç›®éœ€è¦çš„)çš„RåŒ…ã€‚</p>
<br>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>åœ¨jupyterå†…è¿è¡ŒRä»£ç </title>
      <link>https://textdata.cn/blog/run_r_in_jupyter/</link>
      <pubDate>Sun, 29 May 2022 10:43:10 +0600</pubDate>
      
      <guid>/blog/run_r_in_jupyter/</guid>
      <description>åœ¨Jupyterä¸­ï¼Œé€šå¸¸æ˜¯é»˜è®¤æ”¯æŒPythonçš„ï¼Œå¦‚ä½•é…ç½®æ‰èƒ½è®©Rä¹Ÿèƒ½è¿è¡Œå‘¢ï¼Ÿ</description>
      <content:encoded><![CDATA[<p>Rå’ŒPythonéƒ½æ˜¯æ•°æ®åˆ†æåˆ©å™¨ï¼Œæœ€å¥½èƒ½ä¸€èµ·ä½¿ç”¨ï¼Œå‘æŒ¥å„è‡ªçš„ä¼˜åŠ¿ã€‚</p>
<p>åœ¨Jupyterä¸­ï¼Œé€šå¸¸æ˜¯é»˜è®¤æ”¯æŒPythonçš„ï¼Œå¦‚ä½•é…ç½®æ‰èƒ½è®©Rä¹Ÿèƒ½è¿è¡Œå‘¢ï¼Ÿ</p>
<br>
<h2 id="é…ç½®æ­¥éª¤">é…ç½®æ­¥éª¤</h2>
<h3 id="step-1">step 1</h3>
<p>å®‰è£…å¥½Rè½¯ä»¶ï¼Œæ‰“å¼€å‘½ä»¤è¡Œï¼Œè¾“å…¥Rå›è½¦ï¼Œè°ƒå‡ºRç¯å¢ƒ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">R
</code></pre></div><p>åœ¨Rç¯å¢ƒä¸­è¿è¡Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-R" data-lang="R"><span class="nf">install.packages</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&#39;repr&#39;</span><span class="p">,</span> <span class="s">&#39;IRdisplay&#39;</span><span class="p">,</span> <span class="s">&#39;evaluate&#39;</span><span class="p">,</span> <span class="s">&#39;crayon&#39;</span><span class="p">,</span> <span class="s">&#39;pbdZMQ&#39;</span><span class="p">,</span> <span class="s">&#39;devtools&#39;</span><span class="p">,</span> <span class="s">&#39;uuid&#39;</span><span class="p">,</span> <span class="s">&#39;digest&#39;</span><span class="p">))</span>
</code></pre></div><br>
<h3 id="step-2">step 2</h3>
<p>ç»§ç»­åœ¨åœ¨Rç¯å¢ƒä¸­è¿è¡Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-R" data-lang="R"><span class="n">devtools</span><span class="o">::</span><span class="nf">install_github</span><span class="p">(</span><span class="s">&#39;IRkernel/IRkernel&#39;</span><span class="p">)</span>
</code></pre></div><br>
<h3 id="step-3">step 3</h3>
<p>ç»§ç»­åœ¨Rç¯å¢ƒä¸­è¿è¡Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-R" data-lang="R"><span class="n">IRkernel</span><span class="o">::</span><span class="nf">installspec</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span>
</code></pre></div><br>
<br>
<h2 id="è°ƒç”¨jupyter">è°ƒç”¨Jupyter</h2>
<p>é‡æ–°æ‰“å¼€å‘½ä»¤è¡Œï¼Œæ‰§è¡Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">jupyter notebook
</code></pre></div><p>å¼¹å‡ºçš„ç•Œé¢ä¸­æ‹¥æœ‰äº†Rçš„kernel</p>
<p><img loading="lazy" src="r_kernel.png" alt=""  />
</p>
<br>
<p>æ–°å»ºä¸€ä¸ªRçš„jupyteræ–‡ä»¶ï¼Œè¿è¡Œä¸‹æ–¹ä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-R" data-lang="R"><span class="nf">library</span><span class="p">(</span><span class="s">&#34;ggsci&#34;</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="s">&#34;ggplot2&#34;</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="s">&#34;gridExtra&#34;</span><span class="p">)</span>

<span class="nf">data</span><span class="p">(</span><span class="s">&#34;diamonds&#34;</span><span class="p">)</span>

<span class="n">p1</span> <span class="o">&lt;-</span> <span class="nf">ggplot</span><span class="p">(</span>
  <span class="nf">subset</span><span class="p">(</span><span class="n">diamonds</span><span class="p">,</span> <span class="n">carat</span> <span class="o">&gt;=</span> <span class="m">2.2</span><span class="p">),</span>
  <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">table</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">price</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="n">cut</span><span class="p">)</span>
<span class="p">)</span> <span class="o">+</span>
  <span class="nf">geom_point</span><span class="p">(</span><span class="n">alpha</span> <span class="o">=</span> <span class="m">0.7</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">geom_smooth</span><span class="p">(</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#34;loess&#34;</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="m">0.05</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">span</span> <span class="o">=</span> <span class="m">1</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">theme_bw</span><span class="p">()</span>

<span class="n">p2</span> <span class="o">&lt;-</span> <span class="nf">ggplot</span><span class="p">(</span>
  <span class="nf">subset</span><span class="p">(</span><span class="n">diamonds</span><span class="p">,</span> <span class="n">carat</span> <span class="o">&gt;</span> <span class="m">2.2</span> <span class="o">&amp;</span> <span class="n">depth</span> <span class="o">&gt;</span> <span class="m">55</span> <span class="o">&amp;</span> <span class="n">depth</span> <span class="o">&lt;</span> <span class="m">70</span><span class="p">),</span>
  <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">depth</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="n">cut</span><span class="p">)</span>
<span class="p">)</span> <span class="o">+</span>
  <span class="nf">geom_histogram</span><span class="p">(</span><span class="n">colour</span> <span class="o">=</span> <span class="s">&#34;black&#34;</span><span class="p">,</span> <span class="n">binwidth</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">position</span> <span class="o">=</span> <span class="s">&#34;dodge&#34;</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">theme_bw</span><span class="p">()</span>


<span class="n">p1_npg</span> <span class="o">&lt;-</span> <span class="n">p1</span> <span class="o">+</span> <span class="nf">scale_color_npg</span><span class="p">()</span>
<span class="n">p2_npg</span> <span class="o">&lt;-</span> <span class="n">p2</span> <span class="o">+</span> <span class="nf">scale_fill_npg</span><span class="p">()</span>
<span class="nf">grid.arrange</span><span class="p">(</span><span class="n">p1_npg</span><span class="p">,</span> <span class="n">p2_npg</span><span class="p">,</span> <span class="n">ncol</span> <span class="o">=</span> <span class="m">2</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<p><img loading="lazy" src="ggsci_plot.png" alt=""  />
</p>
<br>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>TechWeekly-16 æ¯å‘¨æœ‰è¶£æœ‰ç”¨çš„æŠ€æœ¯åˆ†äº«</title>
      <link>https://textdata.cn/blog/techweekly16/</link>
      <pubDate>Fri, 01 Apr 2022 10:43:10 +0600</pubDate>
      
      <guid>/blog/techweekly16/</guid>
      <description>æœ¬æœŸTechWeeklyä¸»è¦æ˜¯ä¸€äº›cssã€jsç±»é¡¹ç›®ï¼Œå¯ä»¥èµ·åˆ°ç‚¹ç¼€ç½‘ç«™çš„æ•ˆæœã€‚</description>
      <content:encoded><![CDATA[<p>æœ¬æœŸTechWeeklyä¸»è¦æ˜¯ä¸€äº›cssã€jsç±»é¡¹ç›®ï¼Œå¯ä»¥èµ·åˆ°ç‚¹ç¼€ç½‘ç«™çš„æ•ˆæœã€‚</p>
<p>å»ºè®®å¤§å®¶å¦‚æœæœ‰æ—¶é—´ï¼Œå¯ä»¥äº†è§£ä¸‹html/cssï¼Œå¾ˆç®€å•çš„ã€‚å¦‚æœä½¿ç”¨Hugoè¿™ç±»å»ºç«™æ¡†æ¶ï¼Œå¯ä»¥è‡ªå·±ä¿®æ”¹ä¸‹å­—ä½“é¢œè‰²ï¼Œä»¥ç¬¦åˆè‡ªå·±çš„å®¡ç¾ã€‚ä»¥åä¼šè€ƒè™‘åœ¨è¿™ä¸ªåšå®¢ç«™ç‚¹ä¸­ç”¨åˆ°ï¼Œäºæ˜¯æ•´ç†å‡ºæ¥æœ¬æœŸTechWeeklyã€‚</p>
<br>
<h2 id="animatecss">Animate.css</h2>
<p><a href="https://animate.style/">https://animate.style/</a></p>
<p>CSSç½‘é¡µåŠ¨ç”»åº“</p>
<div style="text-align: center;">
<figure >
    <a href="https://animate.style/">
        <img src="img/animate.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»å›¾ç‰‡è®¿é—®Animateç½‘ç«™</i></small></figcaption>
</figure>
</div>
<br>
<h2 id="tabler">Tabler</h2>
<p><a href="https://github.com/tabler/tabler">https://github.com/tabler/tabler</a></p>
<p>Tabler æ˜¯åŸºäº Bootstrap æ„å»ºçš„å…è´¹å¼€æº HTML Dashboard UI Kit</p>
<div style="text-align: center;">
<figure >
    <a href="https://preview.tabler.io/">
        <img src="img/tabler.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»å›¾ç‰‡è®¿é—®tablerç½‘ç«™</i></small></figcaption>
</figure>
</div>
<br>
<h2 id="flowbite">Flowbite</h2>
<p><a href="https://github.com/themesberg/flowbite">https://github.com/themesberg/flowbite</a></p>
<p>ä½¿ç”¨ Tailwind CSS æ„å»ºçš„æœ€å—æ¬¢è¿çš„äº¤äº’å¼ UI ç»„ä»¶åº“</p>
<div style="text-align: center;">
<figure >
    <a href="https://flowbite.com/">
        <img src="img/flowbite.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»å›¾ç‰‡è®¿é—®flowbiteç½‘ç«™</i></small></figcaption>
</figure>
</div>
<br>
<h2 id="sheetjs">SheetJs</h2>
<p><a href="https://github.com/SheetJS/sheetjs">https://github.com/SheetJS/sheetjs</a></p>
<ul>
<li>
<p>ç®€åŒ–çš„ç”µå­è¡¨æ ¼</p>
</li>
<li>
<p>é˜…è¯»ã€ç¼–è¾‘å’Œå¯¼å‡ºç”µå­è¡¨æ ¼</p>
</li>
<li>
<p>é€‚ç”¨äºç½‘ç»œæµè§ˆå™¨å’ŒæœåŠ¡å™¨ï¼Œ</p>
</li>
<li>
<p>åœ¨ Office 365 ä¸­å— Microsoft ä¿¡ä»»</p>
</li>
</ul>
<div style="text-align: center;">
<figure >
    <a href="https://sheetjs.com/">
        <img src="img/sheetjs.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»å›¾ç‰‡è®¿é—®ç½‘ç«™</i></small></figcaption>
</figure>
</div>
<br>
<h2 id="d3">D3</h2>
<p><a href="https://github.com/d3/d3">https://github.com/d3/d3</a></p>
<p>D3.js æ˜¯ä¸€ä¸ª JavaScript å¯è§†åŒ–åº“ã€‚ D3 èƒ½ä½¿ HTMLã€SVG å’Œ CSS ç­‰æ–‡ä»¶å°†æ•°æ®å¯è§†åŒ–å˜ä¸ºç°å®ã€‚</p>
<div style="text-align: center;">
<figure >
    <a href="https://d3js.org/">
        <img src="img/d3.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»å›¾ç‰‡è®¿é—®ç½‘ç«™</i></small></figcaption>
</figure>
</div>
<p>ä¸‹é¢æ˜¯D3åˆ¶ä½œçš„æ ·ä¾‹</p>
<div style="text-align: center;">
<figure >
    <a href="https://observablehq.com/@d3/gallery">
        <img src="img/d31.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»å›¾ç‰‡è®¿é—®D3çš„Gallery</i></small></figcaption>
</figure>
</div>
<div style="text-align: center;">
<figure >
    <a href="https://observablehq.com/@d3/gallery">
        <img src="img/d32.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»å›¾ç‰‡è®¿é—®D3çš„Gallery</i></small></figcaption>
</figure>
</div>
<div style="text-align: center;">
<figure >
    <a href="https://observablehq.com/@d3/gallery">
        <img src="img/d33.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»å›¾ç‰‡è®¿é—®D3çš„Gallery</i></small></figcaption>
</figure>
</div>
<br>
<h2 id="budibase">budibase</h2>
<p><a href="https://github.com/Budibase/budibase">https://github.com/Budibase/budibase</a></p>
<p>åœ¨å‡ åˆ†é’Ÿå†…æ„å»ºç»„ç»‡å†…ç½‘çš„åº”ç”¨ç¨‹åºï¼Œæ”¯æŒSupports PostgreSQL, MySQL, MSSQL, MongoDB, Rest API, Docker, K8s</p>
<div style="text-align: center;">
<figure >
    <a href="https://budibase.com/">
        <img src="img/budibase.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»å›¾ç‰‡è®¿é—®budibaseç½‘ç«™</i></small></figcaption>
</figure>
</div>
<br>
<h2 id="vitae">vitae</h2>
<p><a href="https://pkg.mitchelloharawild.com/vitae/">https://pkg.mitchelloharawild.com/vitae/</a></p>
<p>ä½¿ç”¨Rmarkdownåˆ¶ä½œä¸ªäººç®€å†</p>
<div style="text-align: center;">
<figure >
    <a href="https://pkg.mitchelloharawild.com/vitae/">
        <img src="img/vitae.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»å›¾ç‰‡è®¿é—®budibaseç½‘ç«™</i></small></figcaption>
</figure>
</div>
<br>
<h2 id="nextra">nextra</h2>
<p><a href="https://github.com/shuding/nextra">https://github.com/shuding/nextra</a></p>
<p>Nextra æ˜¯ä¸€ä¸ª Next.js å’Œ MDX é©±åŠ¨çš„æ— ä»£ç ç«™ç‚¹ç”Ÿæˆå™¨ã€‚1åˆ†é’Ÿå³å¯åˆ¶ä½œå‡ºä¸‹å›¾çš„é™æ€ç½‘ç«™ã€‚</p>
<div style="text-align: center;">
<figure >
    <a href="https://nextra.vercel.app/">
        <img src="img/nextra.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»å›¾ç‰‡è®¿é—®nextraç½‘ç«™</i></small></figcaption>
</figure>
</div>
<br>
<h2 id="pcolor">pcolor</h2>
<p>åœ¨Rstudioä¸­è‡ªç”±çš„å–è‰²ã€‚</p>
<p>å®‰è£…</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">devtools::install_github(&#34;shalom-lab/pcolor&#34;)
</code></pre></div><p>ä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-R" data-lang="R"><span class="nf">libarary</span><span class="p">(</span><span class="n">pcolor</span><span class="p">)</span>

<span class="nf">pcolor</span><span class="p">()</span>
</code></pre></div><p>è¿è¡Œ</p>
<p><img loading="lazy" src="img/pcolor.png" alt=""  />
</p>
<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://textdata.cn/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>åœ¨Rmarkdownä¸­è°ƒç”¨Pythonä»£ç </title>
      <link>https://textdata.cn/blog/call_python_code_in_rmarkdown/</link>
      <pubDate>Tue, 23 Nov 2021 18:40:10 +0600</pubDate>
      
      <guid>/blog/call_python_code_in_rmarkdown/</guid>
      <description>å·¦æ‰‹Rï¼Œå³æ‰‹Pythonï¼</description>
      <content:encoded><![CDATA[<h1 id="rpy2ç®€ä»‹">rpy2ç®€ä»‹</h1>
<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="https://github.com/hidadeng/DaDengAndHisPython/blob/master/%E5%9C%A8Rmarkdown%E4%B8%AD%E8%B0%83%E7%94%A8Python%E4%BB%A3%E7%A0%81.zip">ç‚¹å‡»ä¸‹è½½æ–‡æœ¬</a></p>
<br>
<p>Pythonå’ŒRæ˜¯ä¸€å¯¹æ•°æ®ç§‘å­¦ä¸¤å¤§è¯­è¨€ï¼Œåœ¨äº’è”äº’é€šçš„è·¯ä¸Šï¼Œæˆ‘æ„Ÿè§‰Ræ›´åŠ çš„ç§¯æã€‚è¿˜è®°å¾—ä¹‹å‰ <strong>Pythonä¸­è°ƒç”¨Rçš„åº“-rpy2</strong>ï¼Œ åœ¨Pythonä½¿ç”¨Rè¯­è¨€è¯­æ³•è¿˜æ˜¯æœ‰äº›ä¸è‡ªç„¶ã€‚åœ¨Rä¸­è°ƒç”¨Pythonä½“éªŒååˆ†æ£’ï¼Œä¸€èµ·è·Ÿæˆ‘çœ‹çœ‹å§ã€‚</p>
<p>reticulateåŒ…æ˜¯å¯ä»¥è®©Rè¯­è¨€éå¸¸æµç•…è‡ªç„¶è”é€šPythonçš„å…³é”®ã€‚</p>
<p><strong>Rmarkdowné¢„å¤‡çŸ¥è¯†</strong></p>
<p>Rmarkdownå¾ˆåƒjupyter notbeookå’Œmarkdownçš„ç»“åˆã€‚</p>
<ul>
<li>ä»£ç å—</li>
<li>markdonæ–‡æœ¬</li>
</ul>
<br>
<h2 id="ä»£ç å—">ä»£ç å—</h2>
<p>åœ¨Rmarkdownä¸­çš„ä»£ç å—çš„å¼€å§‹éƒ½æ˜¯ä»¥ä¸‰å¼•å·ã€{}å’Œè¯­è¨€åä¸ºæ ‡å¿—ï¼Œä»¥ä¸‰å¼•å·ç»“å°¾ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">library(ggplot2)
ggplot(mpg, aes(x=displ, y=cty))+
  geom_point()
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">ggplot</span><span class="p">(</span><span class="n">mpg</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">displ</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">cty</span><span class="p">))</span><span class="o">+</span>
  <span class="nf">geom_point</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="img/unnamed-chunk-1-1.png" width="100%" />
    
    
</figure>

<p>åé¢è®¾ç½®å¥½reticulateåŒ…åï¼Œå°±å¯ä»¥åœ¨Rmarkdownä¸­ä½¿ç”¨pythonä»£ç å—ï¼Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">import pandas as pd
df = pd.read_csv(&#39;test.csv&#39;)
df.head()
</code></pre></div><br>
<h2 id="markdownæ–‡æœ¬">markdownæ–‡æœ¬</h2>
<p>æ–‡æœ¬éƒ¨åˆ†å…¨éƒ¨æ”¯æŒmarkdownè¯­æ³•ï¼Œè¿™é‡Œä¸åšèµ˜è¿°ã€‚</p>
<h2 id="å®‰è£…rpy">å®‰è£…rpy</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">install.packages(&#34;reticulate&#34;)
</code></pre></div><h2 id="ç¯å¢ƒè®¾ç½®">ç¯å¢ƒè®¾ç½®</h2>
<p>å½“æˆ‘ä»¬åœ¨Rä»£ç å—ä¸­è®¾ç½®å¥½Pythonç¯å¢ƒï¼Œå°±å¯ä»¥åœ¨Rmarkdownä¸­è·‘Pythonä»£ç ã€‚</p>
<br>
<h2 id="æŸ¥è¯¢python">æŸ¥è¯¢Python</h2>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“Pythonå®‰è£…è·¯å¾„ï¼Œå¯ä»¥åœ¨<strong>å‘½ä»¤è¡Œ</strong>ä¸­é€è¡Œæ‰§è¡Œä¸‹é¢ä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">python3
import sys
sys.executable
</code></pre></div><p>æˆ‘çš„macç”µè„‘çš„Pythonå®‰è£…è·¯å¾„ä¸º</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">/Library/Frameworks/Python.framework/Versions/3.7/bin/python3
</code></pre></div><br>
<h2 id="æŒ‡å®špython">æŒ‡å®šPython</h2>
<p>æ‰§è¡Œä¸‹æ–¹çš„ä»£ç (è·¯å¾„æ”¹ä¸ºè‡ªå·±çš„Pythonå®‰è£…è·¯å¾„)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">reticulate</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="err">##</span> <span class="nx">Warning</span><span class="p">:</span> <span class="kn">package</span> <span class="err">&#39;</span><span class="nx">reticulate</span><span class="err">&#39;</span> <span class="nx">was</span> <span class="nx">built</span> <span class="nx">under</span> <span class="nx">R</span> <span class="nx">version</span> <span class="mf">3.6.2</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">use_python</span><span class="p">(</span><span class="s">&#39;/Library/Frameworks/Python.framework/Versions/3.7/bin/python3&#39;</span><span class="p">)</span>
</code></pre></div><p>æ‰§è¡Œä»£ç åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨Pythonä»£ç </p>
<br>
<h1 id="è¿è¡Œpythonä»£ç ">è¿è¡ŒPythonä»£ç </h1>
<p>åœ¨Rmarkdownä¸­å†™Pythonä»£ç å—</p>
<h2 id="ä½œå›¾">ä½œå›¾</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span> 
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span> 
<span class="c1"># è®¡ç®—æ­£å¼¦æ›²çº¿ä¸Šç‚¹çš„ x å’Œ y åæ ‡</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span>  <span class="mi">3</span>  <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span>  <span class="mf">0.1</span><span class="p">)</span> 
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&#34;sine wave form&#34;</span><span class="p">)</span>  
<span class="c1"># ä½¿ç”¨ matplotlib æ¥ç»˜åˆ¶ç‚¹</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> 
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="img/unnamed-chunk-3-1.png" width="100%" />
    
    
</figure>

<br>
<h2 id="è¯»å–csv">è¯»å–csv</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&#34;test.csv&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;gbk&#34;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">##      birthday   name               text  age  gender  height  weight
## 0  1985/10/08  Alice  æˆ‘å¾ˆå¼€å¿ƒï¼Œæ¯å¤©éƒ½è¿™ä¹ˆå¿«ä¹ï¼Œæˆ‘å¾ˆå¹¸ç¦   35  female     175      55
## 1    95.07.07   Mary               æˆ‘å¾ˆéš¾è¿‡   25  female     165      50
## 2    01-11-10   Mike              å”‰ï¼ŒçœŸéš¾å—   19    male     180      75
## 3      90/2/8  Smith          æ— æ‰€è°“å¼€å¿ƒè¿˜æ˜¯éš¾è¿‡   30    male     175      70
## 4      93-1-5  Henry          æ¯å¤©èµšä¸€ä¸‡ï¼ŒçœŸçˆ½ï¼   27    male     185      80
</code></pre></div><p>è¿”å›çš„dfæ˜¯Pythonå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¡¨æ ¼ä¸å¥½çœ‹ï¼Œè¿™æ˜¯Rä¸­çš„Pythonå¯¹è±¡ã€‚</p>
<br>
<h2 id="åœ¨rä»£ç å—ä¸­è°ƒç”¨pythonå˜é‡å¯¹è±¡">åœ¨Rä»£ç å—ä¸­è°ƒç”¨Pythonå˜é‡(å¯¹è±¡)</h2>
<p>åˆšåˆšè®²çš„éƒ½æ˜¯åœ¨Rmakdownä¸­è¿è¡ŒPythonä»£ç å—ï¼Œå¹¶ä¸æ˜¯åœ¨Rä»£ç å—ä¸­è¿è¡ŒPythonä»£ç æˆ–è€…è°ƒç”¨Pythonå˜é‡ã€‚</p>
<h3 id="pypython_variable_name">py$python_variable_name</h3>
<p>Rä»£ç å—ä¸­è°ƒç”¨Pythonæ–¹æ³•</p>
<p>py$python_variable_name</p>
<ul>
<li>pyç›¸å½“äºPythonä¸­çš„å¯¹è±¡</li>
<li>$ ç›¸å½“äºPythonä¸­çš„<strong>ç‚¹</strong></li>
<li>python_variable_name æ˜¯Pythonä»£ç å—ä¸­çš„å˜é‡å</li>
</ul>
<p>æ¯”å¦‚åœ¨ä¸Šæ–‡ä¸­Pythonçš„å˜é‡dfï¼Œåœ¨Rä¸­è°ƒç”¨</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="n">py</span><span class="o">$</span><span class="n">df</span>
</code></pre></div>
<figure >
    
        <img src="img/df.png" width="100%" />
    
    
</figure>

<p>ç°åœ¨è°ƒç”¨Pythonå¯¹è±¡dfæ—¶ï¼ŒRä¼šé»˜è®¤å°†å…¶è½¬ä¸ºRå¯¹è±¡ï¼Œæ‰€ä»¥å†…å®¹ä¸€æ ·ï¼Œæ ·å¼ä¼¼ä¹å˜å¥½çœ‹äº†ã€‚</p>
<h3 id="rä»£ç å—ä¸­å¯¼å…¥pythonåº“">Rä»£ç å—ä¸­å¯¼å…¥Pythonåº“</h3>
<p>ä½¿ç”¨osåº“çš„listdirå‡½æ•°æŸ¥è¯¢å½“å‰é¡¹ç›®æ–‡ä»¶å¤¹å†…çš„æ–‡ä»¶åˆ—è¡¨</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">os</span>

<span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">## [&#39;reticulateå­¦ä¹ .md&#39;, &#39;test.csv&#39;, &#39;test.py&#39;, &#39;reticulateå­¦ä¹ .html&#39;, &#39;reticulateå­¦ä¹ _files&#39;, &#39;reticulate.pdf&#39;, &#39;reticulateå­¦ä¹ .Rmd&#39;, &#39;data.py&#39;]
</code></pre></div><p>åœ¨Rä»£ç å—ä¸­å®ç°ä¸Šæ–¹çš„PythonåŠŸèƒ½ï¼Œå¦‚ä¸‹ï¼Œå¾ˆç®€å•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">reticulate</span><span class="p">)</span>

<span class="c1">#å¯¼å…¥åº“</span>
<span class="n">os</span> <span class="o">&lt;-</span> <span class="nf">import</span><span class="p">(</span><span class="s">&#34;os&#34;</span><span class="p">)</span>

<span class="c1">#osåº“çš„listdirå‡½æ•°</span>
<span class="n">os</span><span class="o">$</span><span class="nf">listdir</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">## [1] &#34;reticulateå­¦ä¹ .md&#34;    &#34;test.csv&#34;             &#34;test.py&#34;             
## [4] &#34;reticulateå­¦ä¹ .html&#34;  &#34;reticulateå­¦ä¹ _files&#34; &#34;reticulate.pdf&#34;      
## [7] &#34;reticulateå­¦ä¹ .Rmd&#34;   &#34;data.py&#34;
</code></pre></div><p>å¯ä»¥å‘ç°</p>
<ul>
<li><code>import(&quot;os)</code>ä»£æ›¿äº†<code>import os</code></li>
<li><code>$</code>ä»£æ›¿äº†<code>.</code></li>
<li><code>&lt;-</code> ä»£æ›¿äº† <code>=</code></li>
</ul>
<p>å†ç†Ÿæ‚‰ä¸€ä¸‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">reticulate</span><span class="p">)</span>
<span class="n">pd</span> <span class="o">&lt;-</span> <span class="nf">import</span><span class="p">(</span><span class="s">&#34;pandas&#34;</span><span class="p">)</span>
<span class="n">df2</span> <span class="o">&lt;-</span> <span class="n">pd</span><span class="o">$</span><span class="nf">read_csv</span><span class="p">(</span><span class="s">&#34;test.csv&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&#34;gbk&#34;</span><span class="p">)</span>
<span class="n">df2</span>
</code></pre></div>
<figure >
    
        <img src="img/df2.png" width="100%" />
    
    
</figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨Rä»£ç å—ä¸­æ‰§è¡ŒPythonä»£ç æ—¶ï¼Œé»˜è®¤ä¼šå°†Pythonå¯¹è±¡è½¬ä¸ºRå¯¹è±¡ã€‚</p>
<h3 id="source_python">source_python()</h3>
<p>ä½¿ç”¨reticulateåŒ…ä¸­çš„source_python(&lsquo;pyæ–‡ä»¶è·¯å¾„&rsquo;)å¯ä»¥å¯¼å…¥pyæ–‡ä»¶ä¸­çš„å˜é‡ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨Rä»£ç å—ä¸­ä½¿ç”¨å¤–éƒ¨å˜é‡ã€‚ä¾‹å¦‚æˆ‘åœ¨data.pyä¸­å‡†å¤‡Aå’ŒBä¸¤ä¸ªå­—ç¬¦ä¸²</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">A = &#39;æˆ‘æ˜¯å¼ ä¸‰,&#39;
B = &#39;æ¥è‡ªæ²³åŒ—&#39;
</code></pre></div><p>åœ¨Rä»£ç å—ä¸­è¿è¡Œdata.py</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">reticulate</span><span class="p">)</span>

<span class="nf">source_python</span><span class="p">(</span><span class="s">&#34;data.py&#34;</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">## [1] &#34;æˆ‘æ˜¯å¼ ä¸‰,&#34;
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">print</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">## [1] &#34;æ¥è‡ªæ²³åŒ—&#34;
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">paste0</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">## [1] &#34;æˆ‘æ˜¯å¼ ä¸‰,æ¥è‡ªæ²³åŒ—&#34;
</code></pre></div><h2 id="py_run_file">py_run_file()</h2>
<p>åœ¨Rä»£ç å—ä¸­è¿è¡Œé¡¹ç›®æ–‡ä»¶å¤¹ä¸­çš„test.pyæ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">reticulate</span><span class="p">)</span>
<span class="nf">py_run_file</span><span class="p">(</span><span class="s">&#34;test.py&#34;</span><span class="p">)</span>
</code></pre></div><h1 id="æ•°æ®ç±»å‹å¯¹æ¯”">æ•°æ®ç±»å‹å¯¹æ¯”</h1>
<table>
<thead>
<tr>
<th>R</th>
<th>Python</th>
<th>Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td>Single-element vector</td>
<td>Scalar</td>
<td><code>1</code>, <code>1L</code>, <code>TRUE</code>, <code>&quot;foo&quot;</code></td>
</tr>
<tr>
<td>Multi-element vector</td>
<td>List</td>
<td><code>c(1.0, 2.0, 3.0)</code>, <code>c(1L, 2L, 3L)</code></td>
</tr>
<tr>
<td>List of multiple types</td>
<td>Tuple</td>
<td><code>list(1L, TRUE, &quot;foo&quot;)</code></td>
</tr>
<tr>
<td>Named list</td>
<td>Dict</td>
<td><code>list(a = 1L, b = 2.0)</code>, <code>dict(x = x_data)</code></td>
</tr>
<tr>
<td>Matrix/Array</td>
<td>NumPy ndarray</td>
<td><code>matrix(c(1,2,3,4), nrow = 2, ncol = 2)</code></td>
</tr>
<tr>
<td>Data Frame</td>
<td>Pandas DataFrame</td>
<td><code>data.frame(x = c(1,2,3), y = c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;))</code></td>
</tr>
<tr>
<td>Function</td>
<td>Python function</td>
<td><code>function(x) x + 1</code></td>
</tr>
<tr>
<td>NULL, TRUE, FALSE</td>
<td>None, True, False</td>
<td><code>NULL</code>, <code>TRUE</code>, <code>FALSE</code></td>
</tr>
</tbody>
</table>
<br>
<h1 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h1>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>plotnineç»˜å›¾ | pythonçš„ggplot2è¯­æ³•ç»˜å›¾åŒ…</title>
      <link>https://textdata.cn/blog/plotnine/</link>
      <pubDate>Tue, 23 Nov 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/plotnine/</guid>
      <description>ggplot2è¯­æ³•ï¼Œä¸‰è¡Œä»£ç ç»˜å›¾</description>
      <content:encoded><![CDATA[<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="https://github.com/hidadeng/DaDengAndHisPython/blob/master/plotnine%E5%8C%85%E5%AD%A6%E4%B9%A0-Python%E7%89%88%E7%9A%84ggplot2.ipynb">ç‚¹å‡»è·³è½¬åˆ°ä¸‹è½½é“¾æ¥é¡µé¢</a></p>
<br>
<p>Rè¯­è¨€çš„ggplot2ç»˜å›¾èƒ½åŠ›è¶…å¼ºï¼Œpythonè™½æœ‰matplotlibï¼Œä½†æ˜¯è¯­æ³•è‡ƒè‚¿ï¼Œä½¿ç”¨å¤æ‚ï¼Œå…¥é—¨æéš¾ï¼Œseabornçš„å‡ºç°ç¨å¾®æ”¹å–„äº†matplotlibä»£ç é‡é—®é¢˜ï¼Œä½†æ˜¯å®šåˆ¶åŒ–ç¨‹åº¦ä¾ç„¶éœ€è¦å€ŸåŠ©matplotlibï¼Œä½¿ç”¨éš¾åº¦ä¾ç„¶å¾ˆå¤§ã€‚</p>
<p>å¥½æ¶ˆæ¯æ˜¯pythonä¸­æœ‰ä¸€ä¸ªplotnineåŒ…ï¼Œå¯ä»¥å®ç°ç»å¤§å¤šæ•°ggplot2çš„ç»˜å›¾åŠŸèƒ½ï¼Œä¸¤è€…è¯­æ³•ååˆ†ç›¸ä¼¼ï¼ŒRå’ŒPythonçš„è¯­æ³•è½¬æ¢æˆæœ¬å¤§å¤§é™ä½ã€‚</p>
<ul>
<li>plotnineæ–‡æ¡£
<a href="https://plotnine.readthedocs.io/en/latest/">https://plotnine.readthedocs.io/en/latest/</a></li>
<li>Rè¯­è¨€ggplot2æ–‡æ¡£
<a href="https://ggplot2.tidyverse.org/reference/index.html">https://ggplot2.tidyverse.org/reference/index.html</a></li>
</ul>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python">
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">plotnine</span>

</code></pre></div><h2 id="å‡†å¤‡æ•°æ®">å‡†å¤‡æ•°æ®</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine.data</span> <span class="kn">import</span> <span class="n">mpg</span>

<span class="c1">#dataframe</span>
<span class="n">mpg</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">manufacturer</th>
<th style="text-align:left">model</th>
<th style="text-align:right">displ</th>
<th style="text-align:right">year</th>
<th style="text-align:right">cyl</th>
<th style="text-align:left">trans</th>
<th style="text-align:left">drv</th>
<th style="text-align:right">cty</th>
<th style="text-align:right">hwy</th>
<th style="text-align:left">fl</th>
<th style="text-align:left">class</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:left">audi</td>
<td style="text-align:left">a4</td>
<td style="text-align:right">1.8</td>
<td style="text-align:right">1999</td>
<td style="text-align:right">4</td>
<td style="text-align:left">auto(l5)</td>
<td style="text-align:left">f</td>
<td style="text-align:right">18</td>
<td style="text-align:right">29</td>
<td style="text-align:left">p</td>
<td style="text-align:left">compact</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">audi</td>
<td style="text-align:left">a4</td>
<td style="text-align:right">1.8</td>
<td style="text-align:right">1999</td>
<td style="text-align:right">4</td>
<td style="text-align:left">manual(m5)</td>
<td style="text-align:left">f</td>
<td style="text-align:right">21</td>
<td style="text-align:right">29</td>
<td style="text-align:left">p</td>
<td style="text-align:left">compact</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:left">audi</td>
<td style="text-align:left">a4</td>
<td style="text-align:right">2</td>
<td style="text-align:right">2008</td>
<td style="text-align:right">4</td>
<td style="text-align:left">manual(m6)</td>
<td style="text-align:left">f</td>
<td style="text-align:right">20</td>
<td style="text-align:right">31</td>
<td style="text-align:left">p</td>
<td style="text-align:left">compact</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:left">audi</td>
<td style="text-align:left">a4</td>
<td style="text-align:right">2</td>
<td style="text-align:right">2008</td>
<td style="text-align:right">4</td>
<td style="text-align:left">auto(av)</td>
<td style="text-align:left">f</td>
<td style="text-align:right">21</td>
<td style="text-align:right">30</td>
<td style="text-align:left">p</td>
<td style="text-align:left">compact</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:left">audi</td>
<td style="text-align:left">a4</td>
<td style="text-align:right">2.8</td>
<td style="text-align:right">1999</td>
<td style="text-align:right">6</td>
<td style="text-align:left">auto(l5)</td>
<td style="text-align:left">f</td>
<td style="text-align:right">16</td>
<td style="text-align:right">26</td>
<td style="text-align:left">p</td>
<td style="text-align:left">compact</td>
</tr>
</tbody>
</table>
<h2 id="å¿«é€Ÿä½œå›¾qplot">å¿«é€Ÿä½œå›¾qplot</h2>
<p>æˆ‘ä»¬å…ˆç›´æ¥çœ‹æœ€ç®€å•å¥½ç”¨çš„å¿«é€Ÿä½œå›¾å‡½æ•°qplot(x, y, data)</p>
<ul>
<li>æ¨ªåæ ‡displ</li>
<li>çºµåæ ‡cty</li>
<li>æ•°æ®mpg</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine</span> <span class="kn">import</span> <span class="n">qplot</span>

<span class="n">qplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> 
      <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cty&#39;</span><span class="p">,</span>
      <span class="n">data</span><span class="o">=</span><span class="n">mpg</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_6_0.png" width="800" />
    
    
</figure>

<h2 id="ggplotå›¾å±‚">ggplotå›¾å±‚</h2>
<p>qplotæ˜¯å¿«é€Ÿä½œå›¾å‡½æ•°ï¼Œå¦‚æœæƒ³è®©å›¾æ›´å¥½çœ‹ï¼Œè¿›è¡Œç§äººè®¢åˆ¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦è¿›è¡Œå›¾å±‚è®¾è®¡</p>
<p>é¦–å…ˆè®¾ç½®ggplotå›¾å±‚ï¼ˆç›¸å½“äºä¹°äº†ä¸€ä¸ªé«˜çº§ç”»å¸ƒï¼‰ï¼Œ</p>
<ul>
<li>æ•°æ®mpg</li>
<li>æ¨ªåæ ‡xè½´ä¸ºdispl</li>
<li>çºµåæ ‡yè½´cty</li>
</ul>
<p>åœ¨plotnineä¸­ï¼Œå˜é‡æ‰€å¯¹åº”çš„æ•°æ®å‡å¯é€šè¿‡å­—æ®µåè°ƒç”¨</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine</span> <span class="kn">import</span> <span class="n">ggplot</span><span class="p">,</span> <span class="n">geom_point</span><span class="p">,</span> <span class="n">aes</span>

<span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cty&#39;</span><span class="p">),</span> <span class="n">mpg</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_8_0.png" width="800" />
    
    
</figure>

<h2 id="å›¾å±‚å åŠ ">å›¾å±‚å åŠ </h2>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå·²ç»ç»˜åˆ¶å‡ºä¸€ä¸ªç©ºçš„ggplotå›¾å±‚ï¼Œxè½´ä¸ºdisplï¼Œyè½´ä¸ºctyã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ç»™è¿™ä¸ªå›¾å±‚ä¸ŠåŠ ä¸Šæ•°æ®å¯¹åº”çš„æ•£ç‚¹ï¼Œä½¿ç”¨geom_point()ç›´æ¥è¿½åŠ åœ¨ggplotå›¾å±‚ä¹‹ä¸Šå³å¯ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cty&#39;</span><span class="p">),</span> <span class="n">mpg</span><span class="p">)</span>
 <span class="o">+</span> <span class="n">geom_point</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_10_0.png" width="800" />
    
    
</figure>

<h2 id="color">color</h2>
<p>åœ¨ä¸Šå›¾ä¸­ï¼Œæ•£ç‚¹æ˜¯æ²¡æœ‰åŒºåˆ†æ¯è¾†è½¦çš„æ°”ç¼¸æ•°cylã€‚</p>
<p>åœ¨geom_point()ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§æ°”ç¼¸æ•°cylåˆ†é—¨åˆ«ç±»ï¼ŒæŒ‰ç…§é¢œè‰²æ˜¾ç¤ºå‡ºæ¥</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cty&#39;</span><span class="p">),</span> <span class="n">mpg</span><span class="p">)</span>
 <span class="o">+</span> <span class="n">geom_point</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;cyl&#39;</span><span class="p">))</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_12_0.png" width="800" />
    
    
</figure>

<p>ä¸Šå›¾æŒºå¥½çœ‹çš„ï¼Œæœ‰æ—¶å€™éœ€è¦ç»˜åˆ¶çš„å­—æ®µæ˜¯ç¦»æ•£å‹æ•°å€¼ï¼Œä½†æ˜¯ä¸Šè‰²åå¯èƒ½ä¸å¤Ÿæ˜æ˜¾ï¼Œéœ€è¦å£°æ˜è¯¥å­—æ®µä¸ºç¦»æ•£å‹ã€‚è¿™æ—¶å€™ç”¨factor()æ¥å‘Šè¯‰plotnineï¼Œè¿™ä¸ªå­—æ®µæ˜¯ç¦»æ•£å‹æ•°å€¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cty&#39;</span><span class="p">),</span> <span class="n">mpg</span><span class="p">)</span>
 <span class="o">+</span> <span class="n">geom_point</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;factor(cyl)&#39;</span><span class="p">))</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_14_0.png" width="800" />
    
    
</figure>

<h2 id="size">size</h2>
<p>æœ‰æ—¶å€™ä¸ºäº†å¢åŠ å¯è§†åŒ–æ˜¾ç¤ºçš„ç»´åº¦æ•°ï¼Œè¿˜å¯ä»¥è€ƒè™‘åŠ å…¥ç‚¹çš„å¤§å°size</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cty&#39;</span><span class="p">),</span> <span class="n">mpg</span><span class="p">)</span>
 <span class="o">+</span> <span class="n">geom_point</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="s1">&#39;hwy&#39;</span><span class="p">))</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_16_0.png" width="800" />
    
    
</figure>

<h2 id="æ¢¯åº¦è‰²">æ¢¯åº¦è‰²</h2>
<p>å¦‚æœä½ æƒ³è‡ªå·±è®¾ç½®é¢œè‰²çš„æ¢¯åº¦ï¼Œå¯ä»¥é€šè¿‡scale_color_gradientè®¾ç½®</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine</span> <span class="kn">import</span> <span class="n">scale_color_gradient</span>

<span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cty&#39;</span><span class="p">),</span> <span class="n">mpg</span><span class="p">)</span>
<span class="o">+</span> <span class="n">geom_point</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;hwy&#39;</span><span class="p">))</span>
<span class="o">+</span> <span class="n">scale_color_gradient</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_18_0.png" width="800" />
    
    
</figure>

<h2 id="æ¡å½¢å›¾">æ¡å½¢å›¾</h2>
<p>plotnineä¸­å¯ç»˜åˆ¶çš„å›¾æœ‰å¾ˆå¤šï¼Œåˆšåˆšå·²ç»è®²äº†æ•£ç‚¹å›¾ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹plotnineä¸­çš„æ¡å½¢å›¾ã€‚</p>
<p>é¦–å…ˆå‡†å¤‡ä¸€ä¸‹æ•°æ®</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;variable&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;income&#39;</span><span class="p">,</span> <span class="s1">&#39;income&#39;</span><span class="p">,</span> <span class="s1">&#39;income&#39;</span><span class="p">,</span> <span class="s1">&#39;income&#39;</span><span class="p">],</span>
    <span class="s1">&#39;category&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Female&#39;</span><span class="p">,</span> <span class="s1">&#39;Male&#39;</span><span class="p">,</span> <span class="s1">&#39;1-24&#39;</span><span class="p">,</span> <span class="s1">&#39;25-54&#39;</span><span class="p">,</span> <span class="s1">&#39;55+&#39;</span><span class="p">,</span> <span class="s1">&#39;Lo&#39;</span><span class="p">,</span> <span class="s1">&#39;Lo-Med&#39;</span><span class="p">,</span> <span class="s1">&#39;Med&#39;</span><span class="p">,</span> <span class="s1">&#39;High&#39;</span><span class="p">],</span>
    <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span>
<span class="p">})</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;variable&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;variable&#39;</span><span class="p">],</span> <span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;income&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;category&#39;</span><span class="p">],</span> <span class="n">categories</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;category&#39;</span><span class="p">])</span>

<span class="n">df</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">variable</th>
<th style="text-align:left">category</th>
<th style="text-align:right">value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:left">gender</td>
<td style="text-align:left">Female</td>
<td style="text-align:right">60</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">gender</td>
<td style="text-align:left">Male</td>
<td style="text-align:right">40</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:left">age</td>
<td style="text-align:left">1-24</td>
<td style="text-align:right">50</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:left">age</td>
<td style="text-align:left">25-54</td>
<td style="text-align:right">30</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:left">age</td>
<td style="text-align:left">55+</td>
<td style="text-align:right">20</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:left">income</td>
<td style="text-align:left">Lo</td>
<td style="text-align:right">10</td>
</tr>
<tr>
<td style="text-align:right">6</td>
<td style="text-align:left">income</td>
<td style="text-align:left">Lo-Med</td>
<td style="text-align:right">25</td>
</tr>
<tr>
<td style="text-align:right">7</td>
<td style="text-align:left">income</td>
<td style="text-align:left">Med</td>
<td style="text-align:right">25</td>
</tr>
<tr>
<td style="text-align:right">8</td>
<td style="text-align:left">income</td>
<td style="text-align:left">High</td>
<td style="text-align:right">40</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine</span> <span class="kn">import</span> <span class="n">ggplot</span><span class="p">,</span> <span class="n">aes</span><span class="p">,</span> <span class="n">geom_text</span><span class="p">,</span> <span class="n">position_dodge</span><span class="p">,</span> <span class="n">geom_point</span>

<span class="c1">#è°ƒæ•´æ–‡æœ¬ä½ç½®</span>
<span class="n">dodge_text</span> <span class="o">=</span> <span class="n">position_dodge</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>                              <span class="c1"># new</span>

<span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;variable&#39;</span><span class="p">,</span> 
                <span class="n">y</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> 
                <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">))</span> <span class="c1">#ç±»åˆ«å¡«å……é¢œè‰²</span>
 <span class="o">+</span> <span class="n">geom_col</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s1">&#39;dodge&#39;</span><span class="p">,</span> 
            <span class="n">show_legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>   <span class="c1"># modified</span>
 <span class="o">+</span> <span class="n">geom_text</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">y</span><span class="o">=-</span><span class="mf">.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">),</span>                          <span class="c1"># new</span>
             <span class="n">position</span><span class="o">=</span><span class="n">dodge_text</span><span class="p">,</span>
             <span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span>  <span class="c1">#æ–‡æœ¬é¢œè‰²</span>
             <span class="n">size</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>   <span class="c1">#å­—å·</span>
             <span class="n">angle</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="c1">#æ–‡æœ¬çš„è§’åº¦</span>
             <span class="n">va</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">)</span>
    
 <span class="o">+</span> <span class="n">lims</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">60</span><span class="p">))</span>                                                 <span class="c1"># new</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_22_0.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine.data</span> <span class="kn">import</span> <span class="n">economics_long</span>

<span class="n">economics_long</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">date</th>
<th style="text-align:left">variable</th>
<th style="text-align:right">value</th>
<th style="text-align:right">value01</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:left">1967-07-01 00:00:00</td>
<td style="text-align:left">pce</td>
<td style="text-align:right">507.4</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">1967-08-01 00:00:00</td>
<td style="text-align:left">pce</td>
<td style="text-align:right">510.5</td>
<td style="text-align:right">0.000266001</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:left">1967-09-01 00:00:00</td>
<td style="text-align:left">pce</td>
<td style="text-align:right">516.3</td>
<td style="text-align:right">0.00076368</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:left">1967-10-01 00:00:00</td>
<td style="text-align:left">pce</td>
<td style="text-align:right">512.9</td>
<td style="text-align:right">0.000471937</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:left">1967-11-01 00:00:00</td>
<td style="text-align:left">pce</td>
<td style="text-align:right">518.1</td>
<td style="text-align:right">0.000918132</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine</span> <span class="kn">import</span> <span class="n">ggplot</span><span class="p">,</span> <span class="n">aes</span><span class="p">,</span> <span class="n">geom_line</span>

<span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">economics_long</span><span class="p">,</span> <span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;value01&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;variable&#39;</span><span class="p">))</span>
 <span class="o">+</span> <span class="n">geom_line</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_25_0.png" width="800" />
    
    
</figure>

<p>plotnineç›®å‰å·²ç»æ”¯æŒç»å¤§å¤šæ•°ggplot2ï¼Œä½†æ˜¯æ–‡æ¡£æ–¹é¢æ²¡æœ‰ggplot2å…¨ï¼Œæ‰€ä»¥å­¦ä¹ plotnineæ—¶å¯ä»¥å‚è€ƒggplot2ã€‚</p>
<ul>
<li>plotnineæ–‡æ¡£
<a href="https://plotnine.readthedocs.io/en/latest/">https://plotnine.readthedocs.io/en/latest/</a></li>
<li>Rè¯­è¨€ggplot2æ–‡æ¡£
<a href="https://ggplot2.tidyverse.org/reference/index.html">https://ggplot2.tidyverse.org/reference/index.html</a></li>
</ul>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>rpy2åŒ… | åœ¨Jupyterä¸­è°ƒç”¨Rè¯­è¨€çš„ä»£ç </title>
      <link>https://textdata.cn/blog/call_r_language_code_in_jupyter/</link>
      <pubDate>Mon, 22 Nov 2021 17:40:10 +0600</pubDate>
      
      <guid>/blog/call_r_language_code_in_jupyter/</guid>
      <description>æ–‡æœ¬æ•°æ®åˆ†æåˆ©å™¨Pythonå’ŒRè¯­è¨€ï¼</description>
      <content:encoded><![CDATA[<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="https://github.com/hidadeng/DaDengAndHisPython/blob/master/%E5%9C%A8jupyter%E4%B8%AD%E8%B0%83%E7%94%A8R%E8%AF%AD%E8%A8%80%E4%BB%A3%E7%A0%81.zip">ç‚¹å‡»ä¸‹è½½</a></p>
<br>
<p>åœ¨æ•°æ®åˆ†æä¸­ï¼ŒPythonå’ŒRå„æœ‰åƒç§‹ï¼Œè™½ç„¶Pythonæˆ–Réƒ½èƒ½åœ¨æ•°æ®åˆ†ææ‰“é€šå…³ï¼Œä»é‡‡é›†ã€æ¸…æ´—(é¢„å¤„ç†)ã€åˆ†æã€å¯è§†åŒ–ï¼Œä½†æ˜¯åœ¨ä¸åŒçš„ç¯èŠ‚ï¼Œä¸åŒçš„è¯­è¨€æ˜“ç”¨ç¨‹åº¦ä¸åŒã€‚Pythonèƒœåœ¨å¹²è„æ´»ç´¯æ´»ï¼Œè¯¸å¦‚æ•°æ®é‡‡é›†ã€æ•°æ®æ¸…æ´—ã€æœºå™¨å­¦ä¹ ç­‰ï¼›è€ŒRè¯­è¨€èƒœåœ¨ç»Ÿè®¡åˆ†æã€å¯è§†åŒ–ç­‰ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ æ­£å¥½Pythonå’ŒRéƒ½å…¥é—¨äº†ï¼Œå¯ä»¥è€ƒè™‘ä¸¤è€…ç»“åˆã€‚é‚£ä¹ˆå°±ä¼šé‡åˆ°ä»Šå¤©çš„é—®é¢˜-<strong>å¦‚ä½•åœ¨jupyterä¸­ä½¿ç”¨Rè¯­è¨€ä»£ç ï¼Ÿ</strong></p>
<h2 id="rpy2åŒ…">rpy2åŒ…</h2>
<p>rpy2åŒ…é¦–å…ˆæ˜¯PythonåŒ…ï¼Œtaè¡”æ¥äº†Pythonå’ŒRï¼Œé€šè¿‡rpy2å¯ä»¥è¿è¡ŒRè¯­è¨€ç›¸å…³ä»£ç ã€å‡½æ•°ã€åŒ…ã€‚</p>
<p>åœ¨Jupyter notebookä¸­ä¸»è¦æœ‰ä¸¤ç§æƒ…å†µ</p>
<ol>
<li>å•å…ƒæ ¼ä¸­ä»¥Pythonä¸ºä¸»ï¼Œå¯ä»¥æ’å…¥<strong>Rçš„ä»£ç å­—ç¬¦ä¸²</strong></li>
<li>å•ä¸ªçš„å•å…ƒæ ¼è¦ä¹ˆåªæœ‰<strong>Rä»£ç </strong>ï¼Œè¦ä¹ˆåªæœ‰<strong>Pythonä»£ç </strong></li>
</ol>
<p>é‡åˆ°è¿™ç±»é—®é¢˜ï¼Œå„ä½çš„ç”µè„‘è¦ç¡®ä¿</p>
<ol>
<li>ç”µè„‘å·²ç»å®‰è£…äº†Pythonå’ŒR</li>
<li>å·²å®‰è£…rpy2åŒ…</li>
</ol>
<p>å®‰è£…rpy2åŒ…</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python">
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">rpy2</span>

</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">rpy2.robjects</span> <span class="k">as</span> <span class="nn">robjects</span>
<span class="kn">from</span> <span class="nn">rpy2.robjects</span> <span class="kn">import</span> <span class="n">pandas2ri</span>

<span class="c1">#Rä»£ç è¿è¡Œä¼šå°½é‡ä»¥DataFrameæ˜¾ç¤º</span>
<span class="n">pandas2ri</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>

<span class="c1">#è¿è¡ŒRä»£ç </span>
<span class="n">robjects</span><span class="o">.</span><span class="n">r</span><span class="p">(</span><span class="s1">&#39;Rä»£ç å­—ç¬¦ä¸²&#39;</span><span class="p">)</span>
</code></pre></div><h2 id="è¿è¡Œrä»£ç ">è¿è¡ŒRä»£ç </h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python">
<span class="n">rpy2</span><span class="o">.</span><span class="n">robjects</span><span class="o">.</span><span class="n">r</span><span class="p">(</span><span class="s1">&#39;Rä»£ç å­—ç¬¦ä¸²&#39;</span><span class="p">)</span>

</code></pre></div><p>rpy2.robjects.r()å‡½æ•°ä¼šè¯†åˆ« <strong>Rä»£ç å­—ç¬¦ä¸²</strong>, å¹¶å°†å…¶æ‰§è¡Œã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">rpy2.robjects</span> <span class="k">as</span> <span class="nn">robjects</span>
<span class="kn">from</span> <span class="nn">rpy2.robjects</span> <span class="kn">import</span> <span class="n">pandas2ri</span>
<span class="kn">import</span> <span class="nn">warnings</span> 
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>

<span class="c1">#ç›´æ¥å£°æ˜ï¼Œdata frameå¼ºåˆ¶è½¬ä¸ºDataFrame</span>
<span class="n">pandas2ri</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>

<span class="c1">#Rä»£ç </span>
<span class="n">r_code</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;
</span><span class="s2">library(dplyr)
</span><span class="s2">
</span><span class="s2">text &lt;- c(&#34;Because I could not stop for Death -&#34;,
</span><span class="s2">          &#34;He kindly stopped for me -&#34;,
</span><span class="s2">          &#34;The Carriage held but just Ourselves -&#34;,
</span><span class="s2">          &#34;and Immortality&#34;)
</span><span class="s2">          
</span><span class="s2">text_df &lt;- tibble(docid=1:4, text=text)
</span><span class="s2">text_df
</span><span class="s2">&#34;&#34;&#34;</span>

<span class="c1">#è¿è¡ŒRä»£ç </span>
<span class="n">robjects</span><span class="o">.</span><span class="n">r</span><span class="p">(</span><span class="n">r_code</span><span class="p">)</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">docid</th>
<th style="text-align:left">text</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:left">Because I could not stop for Death -</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2</td>
<td style="text-align:left">He kindly stopped for me -</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3</td>
<td style="text-align:left">The Carriage held but just Ourselves -</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">4</td>
<td style="text-align:left">and Immortality</td>
</tr>
</tbody>
</table>
<ol>
<li>å‡†å¤‡ä¸€ä¸ªRä»£ç r_codeï¼Œè¯¥ä»£ç ä¼šç”ŸæˆRè¯­è¨€çš„tibbleæ•°æ®ç±»å‹(Rè¯­è¨€ä¸­çš„ä¸€ç§data frame)ã€‚</li>
<li>robjects.r(r_code) è¿è¡ŒRä»£ç (å­—ç¬¦ä¸²)</li>
<li>åœ¨æœ¬ä¾‹ä¸­ï¼Œä½¿ç”¨pandas2ri.activate()å¼ºåˆ¶å£°æ˜ï¼Œåœ¨Pythonä¸­å°†å˜é‡text_dfä»¥pandas.DataFrameæ˜¾ç¤º</li>
</ol>
<h2 id="è°ƒç”¨ræ•°æ®é›†">è°ƒç”¨Ræ•°æ®é›†</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">rpy2.robjects.r.data(&#39;Rçš„æ•°æ®é›†å&#39;)
</code></pre></div><p>è°ƒç”¨Rçš„æ•°æ®é›†</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">rpy2.robjects</span> <span class="k">as</span> <span class="nn">robjects</span>
</code></pre></div><ul>
<li>robjects.r.data(&lsquo;Ræ•°æ®é›†å&rsquo;) å‡†å¤‡Ræ•°æ®é›†ï¼Œæ­¤æ—¶Pythonå¹¶æ²¡æœ‰æ˜¾ç¤ºè¯¥æ•°æ®é›†ï¼Œå¯ä»¥ç†è§£ä¸ºå‡†å¤‡æ•°æ®</li>
<li><code>robjects.r['Ræ•°æ®é›†å']</code> å¯¼å…¥Rçš„æ•°æ®é›†</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">rpy2.robjects</span> <span class="k">as</span> <span class="nn">robjects</span>
<span class="kn">from</span> <span class="nn">rpy2.robjects</span> <span class="kn">import</span> <span class="n">pandas2ri</span>

<span class="n">pandas2ri</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>

<span class="c1">#å‡†å¤‡iris</span>
<span class="n">robjects</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="s1">&#39;iris&#39;</span><span class="p">)</span>
<span class="c1">#å¯¼å…¥iris</span>
<span class="n">iris</span> <span class="o">=</span> <span class="n">robjects</span><span class="o">.</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;iris&#39;</span><span class="p">]</span>
<span class="n">iris</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">Sepal.Length</th>
<th style="text-align:right">Sepal.Width</th>
<th style="text-align:right">Petal.Length</th>
<th style="text-align:right">Petal.Width</th>
<th style="text-align:left">Species</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">5.1</td>
<td style="text-align:right">3.5</td>
<td style="text-align:right">1.4</td>
<td style="text-align:right">0.2</td>
<td style="text-align:left">setosa</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">4.9</td>
<td style="text-align:right">3</td>
<td style="text-align:right">1.4</td>
<td style="text-align:right">0.2</td>
<td style="text-align:left">setosa</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">4.7</td>
<td style="text-align:right">3.2</td>
<td style="text-align:right">1.3</td>
<td style="text-align:right">0.2</td>
<td style="text-align:left">setosa</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">4.6</td>
<td style="text-align:right">3.1</td>
<td style="text-align:right">1.5</td>
<td style="text-align:right">0.2</td>
<td style="text-align:left">setosa</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:right">5</td>
<td style="text-align:right">3.6</td>
<td style="text-align:right">1.4</td>
<td style="text-align:right">0.2</td>
<td style="text-align:left">setosa</td>
</tr>
</tbody>
</table>
<h2 id="è°ƒç”¨rè¯­è¨€åŒ…">è°ƒç”¨Rè¯­è¨€åŒ…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">rpy2</span><span class="o">.</span><span class="n">robjects</span><span class="o">.</span><span class="n">packages</span><span class="o">.</span><span class="n">importr</span><span class="p">(</span><span class="s1">&#39;RåŒ…å&#39;</span><span class="p">)</span>
</code></pre></div><p>Rè¯­è¨€ä¸­çš„readråŒ…æœ‰read_csv()å‡½æ•°ï¼Œå¯ä»¥è¯»å–csvæ–‡ä»¶ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">rpy2.robjects.packages</span> <span class="kn">import</span> <span class="n">importr</span>
<span class="kn">from</span> <span class="nn">rpy2.robjects</span> <span class="kn">import</span> <span class="n">pandas2ri</span>

<span class="n">pandas2ri</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>

<span class="c1">#å¯¼å…¥Rè¯­è¨€ä¸­çš„readråŒ…</span>
<span class="n">readr</span> <span class="o">=</span> <span class="n">importr</span><span class="p">(</span><span class="s2">&#34;readr&#34;</span><span class="p">)</span>
<span class="c1">#ä½¿ç”¨readråŒ…ä¸­çš„read_csv()å‡½æ•°</span>
<span class="n">mtcars</span> <span class="o">=</span> <span class="n">readr</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&#34;mtcars.csv&#34;</span><span class="p">)</span>
<span class="n">mtcars</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">car</th>
<th style="text-align:right">mpg</th>
<th style="text-align:right">cyl</th>
<th style="text-align:right">disp</th>
<th style="text-align:right">hp</th>
<th style="text-align:right">drat</th>
<th style="text-align:right">wt</th>
<th style="text-align:right">qsec</th>
<th style="text-align:right">vs</th>
<th style="text-align:right">am</th>
<th style="text-align:right">gear</th>
<th style="text-align:right">carb</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">Mazda RX4</td>
<td style="text-align:right">21</td>
<td style="text-align:right">6</td>
<td style="text-align:right">160</td>
<td style="text-align:right">110</td>
<td style="text-align:right">3.9</td>
<td style="text-align:right">2.62</td>
<td style="text-align:right">16.46</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">4</td>
<td style="text-align:right">4</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:left">Mazda RX4 Wag</td>
<td style="text-align:right">21</td>
<td style="text-align:right">6</td>
<td style="text-align:right">160</td>
<td style="text-align:right">110</td>
<td style="text-align:right">3.9</td>
<td style="text-align:right">2.875</td>
<td style="text-align:right">17.02</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">4</td>
<td style="text-align:right">4</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:left">Datsun 710</td>
<td style="text-align:right">22.8</td>
<td style="text-align:right">4</td>
<td style="text-align:right">108</td>
<td style="text-align:right">93</td>
<td style="text-align:right">3.85</td>
<td style="text-align:right">2.32</td>
<td style="text-align:right">18.61</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">4</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:left">Hornet 4 Drive</td>
<td style="text-align:right">21.4</td>
<td style="text-align:right">6</td>
<td style="text-align:right">258</td>
<td style="text-align:right">110</td>
<td style="text-align:right">3.08</td>
<td style="text-align:right">3.215</td>
<td style="text-align:right">19.44</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:left">Hornet Sportabout</td>
<td style="text-align:right">18.7</td>
<td style="text-align:right">8</td>
<td style="text-align:right">360</td>
<td style="text-align:right">175</td>
<td style="text-align:right">3.15</td>
<td style="text-align:right">3.44</td>
<td style="text-align:right">17.02</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">2</td>
</tr>
</tbody>
</table>
<h2 id="cellåªè¿è¡Œrä»£ç ">Cellåªè¿è¡ŒRä»£ç </h2>
<p>ä¸Šé¢çš„å‡ ä¸ªç« èŠ‚ä¸­ï¼Œæ¯ä¸ªcellä¸­ä»£ç å‡ä¸ºPythonå’ŒRçš„æ··ç”¨ï¼Œå¦‚æœåœ¨Cellä¸­åªè¿è¡ŒRä»£ç ï¼Œ</p>
<ol>
<li>å¯ä»¥å…ˆå•ç‹¬åœ¨ä¸€ä¸ªcellä¸­è¿è¡Œ <code>%load_ext rpy2.ipython</code>,</li>
<li>åœ¨å¦å¤–ä¸€ä¸ªcellä¸­ä½¿ç”¨<code>%%R</code>å£°æ˜æœ¬cellä¸­ä½¿ç”¨çš„æ˜¯Rä»£ç ã€‚</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="o">%</span><span class="n">load_ext</span> <span class="n">rpy2</span><span class="o">.</span><span class="n">ipython</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="o">%%</span><span class="n">R</span>

<span class="nf">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span>

<span class="nf">ggplot</span><span class="p">(</span><span class="n">iris</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">Sepal.Length</span><span class="p">,</span> 
                 <span class="n">y</span><span class="o">=</span><span class="n">Sepal.Width</span><span class="p">,</span> 
                 <span class="n">color</span><span class="o">=</span><span class="n">Species</span><span class="p">))</span><span class="o">+</span>
<span class="nf">geom_point</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="output_17_0.png" width="100%" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="o">%%</span><span class="n">R</span> <span class="o">-</span><span class="n">h</span> <span class="m">550</span> <span class="o">-</span><span class="n">w</span> <span class="m">800</span>  <span class="c1">#è®¾ç½®å®½ã€é«˜</span>

<span class="nf">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span>

<span class="nf">ggplot</span><span class="p">(</span><span class="n">iris</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">Sepal.Length</span><span class="p">,</span> 
                 <span class="n">y</span><span class="o">=</span><span class="n">Sepal.Width</span><span class="p">,</span> 
                 <span class="n">color</span><span class="o">=</span><span class="n">Species</span><span class="p">))</span><span class="o">+</span>
<span class="nf">geom_point</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="output_18_0.png" width="100%" />
    
    
</figure>

<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://textdata.cn/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
  </channel>
</rss>
