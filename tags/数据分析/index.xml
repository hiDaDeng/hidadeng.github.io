<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>æ•°æ®åˆ†æ on å¤§é‚“å’Œä»–çš„PYTHON</title>
    <link>/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/</link>
    <description>Recent content in æ•°æ®åˆ†æ on å¤§é‚“å’Œä»–çš„PYTHON</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Thu, 16 Jun 2022 18:43:10 +0600</lastBuildDate><atom:link href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>æœºå™¨å­¦ä¹ å®æˆ˜ | ä¿¡ç”¨å¡æ¬ºè¯ˆæ£€æµ‹</title>
      <link>https://hidadeng.github.io/blog/ml_credit_card_fraud_detection/</link>
      <pubDate>Thu, 16 Jun 2022 18:43:10 +0600</pubDate>
      
      <guid>/blog/ml_credit_card_fraud_detection/</guid>
      <description>æœ¬æ–‡æ—¨åœ¨ä½¿ç”¨ XGBoostã€éšæœºæ£®æ—ã€KNNã€é€»è¾‘å›å½’ã€SVM å’Œå†³ç­–æ ‘è§£å†³é‡‘èé¢†åŸŸä¿¡ç”¨å¡æ¬ºè¯ˆè¯†åˆ«çš„åˆ†ç±»é—®é¢˜</description>
      <content:encoded><![CDATA[<blockquote>
<p>ä½œè€…: å°çŒ´å­</p>
<p>å…¬ä¼—å·: æœºå™¨å­¦ä¹ ç ”ä¹ é™¢</p>
</blockquote>
<p>æœ¬æ–‡æ—¨åœ¨ä½¿ç”¨ XGBoostã€éšæœºæ£®æ—ã€KNNã€é€»è¾‘å›å½’ã€SVM å’Œå†³ç­–æ ‘è§£å†³åˆ†ç±»é—®é¢˜</p>
<h2 id="æ¡ˆä¾‹ç®€ä»‹">æ¡ˆä¾‹ç®€ä»‹</h2>
<p>å‡è®¾ä½ å—é›‡äºå¸®åŠ©ä¸€å®¶ä¿¡ç”¨å¡å…¬å¸æ£€æµ‹æ½œåœ¨çš„æ¬ºè¯ˆæ¡ˆä»¶ï¼Œä½ çš„å·¥ä½œæ˜¯ç¡®ä¿å®¢æˆ·ä¸ä¼šå› æœªè´­ä¹°çš„å•†å“è€Œè¢«æ”¶å–è´¹ç”¨ã€‚ç»™ä½ ä¸€ä¸ªåŒ…å«äººä¸äººä¹‹é—´äº¤æ˜“çš„æ•°æ®é›†ï¼Œä»–ä»¬æ˜¯æ¬ºè¯ˆä¸å¦çš„ä¿¡æ¯ï¼Œå¹¶è¦æ±‚ä½ åŒºåˆ†å®ƒä»¬ã€‚æˆ‘ä»¬çš„æœ€ç»ˆç›®çš„æ˜¯é€šè¿‡æ„å»ºåˆ†ç±»æ¨¡å‹æ¥å¯¹æ¬ºè¯ˆäº¤æ˜“è¿›è¡Œåˆ†ç±»åŒºåˆ†æ¥è§£å†³ä¸Šè¿°æƒ…å†µã€‚</p>
<br>
<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="ml_credit_card_fraud_detection.zip">ç‚¹å‡»ä¸‹è½½</a></p>
<br>
<p>å¯¹äºè¿™ä¸ªæ¡ˆä¾‹ï¼Œæ‰€éœ€è¦ç”¨åˆ°çš„ä¸»è¦æ¨¡å—æ˜¯å¤„ç†æ•°æ®çš„ Pandasã€å¤„ç†æ•°ç»„çš„ NumPyã€ç”¨äºæ•°æ®æ‹†åˆ†ã€æ„å»ºå’Œè¯„ä¼°åˆ†ç±»æ¨¡å‹çš„ scikit-learnï¼Œæœ€åæ˜¯ç”¨äº xgboost åˆ†ç±»å™¨æ¨¡å‹ç®—æ³•çš„ xgboost åŒ…ã€‚</p>
<br>
<h2 id="å¯¼å…¥æ•°æ®">å¯¼å…¥æ•°æ®</h2>
<p>å…³äºæ•°æ®ï¼š æˆ‘ä»¬å°†è¦ä½¿ç”¨çš„æ•°æ®æ˜¯ <strong>Kaggle ä¿¡ç”¨å¡æ¬ºè¯ˆæ£€æµ‹æ•°æ®é›†</strong>ã€‚å®ƒåŒ…å«ç‰¹å¾ V1 åˆ° V28ï¼Œæ˜¯ PCA è·å¾—çš„ä¸»è¦æˆåˆ†ï¼Œå¹¶å¿½ç•¥å¯¹æ„å»ºæ¨¡å‹æ²¡æœ‰ç”¨çš„æ—¶é—´ç‰¹å¾ã€‚å…¶ä½™çš„ç‰¹å¾æ˜¯åŒ…å«äº¤æ˜“æ€»é‡‘é¢çš„&quot;é‡‘é¢&quot;ç‰¹å¾å’ŒåŒ…å«äº¤æ˜“æ˜¯å¦ä¸ºæ¬ºè¯ˆæ¡ˆä»¶çš„&quot;ç±»åˆ«&quot;ç‰¹å¾ã€‚</p>
<p>ç°åœ¨ä½¿ç”¨&rsquo;pd.read_csv&rsquo;æ–¹æ³•å¯¼å…¥æ•°æ®ï¼Œå¹¶æŸ¥çœ‹éƒ¨åˆ†æ•°æ®æ ·ä¾‹ã€‚</p>
<p>Kaggle ä¿¡ç”¨å¡æ¬ºè¯ˆæ£€æµ‹æ•°æ®é›†: <a href="https://www.kaggle.com/mlg-ulb/creditcardfraud">https://www.kaggle.com/mlg-ulb/creditcardfraud</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;creditcard.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Time&#39;</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>V1</th>
      <th>V2</th>
      <th>V3</th>
      <th>V4</th>
      <th>V5</th>
      <th>V6</th>
      <th>V7</th>
      <th>V8</th>
      <th>V9</th>
      <th>V10</th>
      <th>...</th>
      <th>V21</th>
      <th>V22</th>
      <th>V23</th>
      <th>V24</th>
      <th>V25</th>
      <th>V26</th>
      <th>V27</th>
      <th>V28</th>
      <th>Amount</th>
      <th>Class</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-1.359807</td>
      <td>-0.072781</td>
      <td>2.536347</td>
      <td>1.378155</td>
      <td>-0.338321</td>
      <td>0.462388</td>
      <td>0.239599</td>
      <td>0.098698</td>
      <td>0.363787</td>
      <td>0.090794</td>
      <td>...</td>
      <td>-0.018307</td>
      <td>0.277838</td>
      <td>-0.110474</td>
      <td>0.066928</td>
      <td>0.128539</td>
      <td>-0.189115</td>
      <td>0.133558</td>
      <td>-0.021053</td>
      <td>149.62</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.191857</td>
      <td>0.266151</td>
      <td>0.166480</td>
      <td>0.448154</td>
      <td>0.060018</td>
      <td>-0.082361</td>
      <td>-0.078803</td>
      <td>0.085102</td>
      <td>-0.255425</td>
      <td>-0.166974</td>
      <td>...</td>
      <td>-0.225775</td>
      <td>-0.638672</td>
      <td>0.101288</td>
      <td>-0.339846</td>
      <td>0.167170</td>
      <td>0.125895</td>
      <td>-0.008983</td>
      <td>0.014724</td>
      <td>2.69</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-1.358354</td>
      <td>-1.340163</td>
      <td>1.773209</td>
      <td>0.379780</td>
      <td>-0.503198</td>
      <td>1.800499</td>
      <td>0.791461</td>
      <td>0.247676</td>
      <td>-1.514654</td>
      <td>0.207643</td>
      <td>...</td>
      <td>0.247998</td>
      <td>0.771679</td>
      <td>0.909412</td>
      <td>-0.689281</td>
      <td>-0.327642</td>
      <td>-0.139097</td>
      <td>-0.055353</td>
      <td>-0.059752</td>
      <td>378.66</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-0.966272</td>
      <td>-0.185226</td>
      <td>1.792993</td>
      <td>-0.863291</td>
      <td>-0.010309</td>
      <td>1.247203</td>
      <td>0.237609</td>
      <td>0.377436</td>
      <td>-1.387024</td>
      <td>-0.054952</td>
      <td>...</td>
      <td>-0.108300</td>
      <td>0.005274</td>
      <td>-0.190321</td>
      <td>-1.175575</td>
      <td>0.647376</td>
      <td>-0.221929</td>
      <td>0.062723</td>
      <td>0.061458</td>
      <td>123.50</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-1.158233</td>
      <td>0.877737</td>
      <td>1.548718</td>
      <td>0.403034</td>
      <td>-0.407193</td>
      <td>0.095921</td>
      <td>0.592941</td>
      <td>-0.270533</td>
      <td>0.817739</td>
      <td>0.753074</td>
      <td>...</td>
      <td>-0.009431</td>
      <td>0.798278</td>
      <td>-0.137458</td>
      <td>0.141267</td>
      <td>-0.206010</td>
      <td>0.502292</td>
      <td>0.219422</td>
      <td>0.215153</td>
      <td>69.99</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>5 rows Ã— 30 columns</p>
</div>
<p>æ¥ä¸‹æ¥å°†è¿›è¡Œä¸€äº›æ•°æ®é¢„å¤„ç†å’Œæ¢ç´¢æ€§æ•°æ®åˆ†æï¼ˆEDAï¼‰ã€‚</p>
<br>
<h2 id="æ¢ç´¢æ€§æ•°æ®åˆ†æ">æ¢ç´¢æ€§æ•°æ®åˆ†æ</h2>
<p>çœ‹çœ‹æ•°æ®é›†ä¸­æœ‰å¤šå°‘æ¬ºè¯ˆæ¡ˆä»¶å’Œéæ¬ºè¯ˆæ¡ˆä»¶ã€‚æ­¤å¤–ï¼Œè¿˜è®¡ç®—æ•´ä¸ªè®°å½•äº¤æ˜“ä¸­æ¬ºè¯ˆæ¡ˆä»¶çš„ç™¾åˆ†æ¯”ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">termcolor</span> <span class="kn">import</span> <span class="n">colored</span> <span class="k">as</span> <span class="n">cl</span>

<span class="n">cases</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="n">nonfraud_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">Class</span> <span class="o">==</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">fraud_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">Class</span> <span class="o">==</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">fraud_percentage</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">fraud_count</span><span class="o">/</span><span class="n">nonfraud_count</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;CASE COUNT&#39;</span><span class="p">,</span> <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;--------------------------------------------&#39;</span><span class="p">,</span> <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;Total number of cases are </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cases</span><span class="p">),</span> <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;Number of Non-fraud cases are </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">nonfraud_count</span><span class="p">),</span> <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;Number of Non-fraud cases are </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fraud_count</span><span class="p">),</span> <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;Percentage of fraud cases is </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fraud_percentage</span><span class="p">),</span> <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;--------------------------------------------&#39;</span><span class="p">,</span> <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
</code></pre></div><p>Run</p>
<pre><code>[1mCASE COUNT[0m
[1m--------------------------------------------[0m
[1mTotal number of cases are 284807[0m
[1mNumber of Non-fraud cases are 284315[0m
[1mNumber of Non-fraud cases are 492[0m
[1mPercentage of fraud cases is 0.17[0m
[1m--------------------------------------------[0m
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ <strong>284,807</strong> ä¸ªæ ·æœ¬ä¸­ï¼Œåªæœ‰ <strong>492</strong> ä¸ªæ¬ºè¯ˆæ¡ˆä¾‹ï¼Œä»…å æ ·æœ¬æ€»æ•°çš„ <strong>0.17%</strong> ã€‚æ‰€ä»¥ï¼Œå¯ä»¥è¯´æˆ‘ä»¬æ­£åœ¨å¤„ç†çš„æ•°æ®æ˜¯é«˜åº¦ä¸å¹³è¡¡çš„æ•°æ®ï¼Œéœ€è¦åœ¨å»ºæ¨¡å’Œè¯„ä¼°æ—¶è°¨æ…å¤„ç†ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Python ä¸­çš„**&ldquo;describe&rdquo;**æ–¹æ³•è·å–æ¬ºè¯ˆå’Œéæ¬ºè¯ˆäº¤æ˜“é‡‘é¢æ•°æ®çš„ç»Ÿè®¡è§†å›¾ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">nonfraud_cases</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">Class</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">fraud_cases</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">Class</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;CASE AMOUNT STATISTICS&#39;</span><span class="p">,</span> <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;--------------------------------------------&#39;</span><span class="p">,</span> <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;NON-FRAUD CASE AMOUNT STATS&#39;</span><span class="p">,</span> <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">nonfraud_cases</span><span class="o">.</span><span class="n">Amount</span><span class="o">.</span><span class="n">describe</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;--------------------------------------------&#39;</span><span class="p">,</span> <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;FRAUD CASE AMOUNT STATS&#39;</span><span class="p">,</span> <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fraud_cases</span><span class="o">.</span><span class="n">Amount</span><span class="o">.</span><span class="n">describe</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;--------------------------------------------&#39;</span><span class="p">,</span> <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
</code></pre></div><p>Run</p>
<pre><code>[1mCASE AMOUNT STATISTICS[0m
[1m--------------------------------------------[0m
[1mNON-FRAUD CASE AMOUNT STATS[0m
count    284315.000000
mean         88.291022
std         250.105092
min           0.000000
25%           5.650000
50%          22.000000
75%          77.050000
max       25691.160000
Name: Amount, dtype: float64
[1m--------------------------------------------[0m
[1mFRAUD CASE AMOUNT STATS[0m
count     492.000000
mean      122.211321
std       256.683288
min         0.000000
25%         1.000000
50%         9.250000
75%       105.890000
max      2125.870000
Name: Amount, dtype: float64
[1m--------------------------------------------[0m
</code></pre>
<p>åœ¨æŸ¥çœ‹ç»Ÿè®¡æ•°æ®æ—¶ï¼Œå¯ä»¥çœ‹åˆ°ä¸å…¶ä½™å˜é‡ç›¸æ¯”ï¼Œ&quot;<strong>é‡‘é¢</strong>&quot; å˜é‡ä¸­çš„å€¼å˜åŒ–å¾ˆå¤§ã€‚ä¸ºäº†å‡å°‘å…¶å¹¿æ³›çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ python ä¸­çš„ &ldquo;<strong>StandardScaler()</strong>&rdquo; æ–¹æ³•å¯¹å…¶è¿›è¡Œæ ‡å‡†åŒ–ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>

<span class="n">sc</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span>
<span class="n">amount</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Amount&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;Amount&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">amount</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Amount&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
</code></pre></div><p>Run</p>
<pre><code>[1m0    0.244964
1   -0.342475
2    1.160686
3    0.140534
4   -0.073403
5   -0.338556
6   -0.333279
7   -0.190107
8    0.019392
9   -0.338516
Name: Amount, dtype: float64[0m
</code></pre>
<br>
<h2 id="ç‰¹å¾é€‰æ‹©å’Œæ•°æ®é›†æ‹†åˆ†">ç‰¹å¾é€‰æ‹©å’Œæ•°æ®é›†æ‹†åˆ†</h2>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå®šä¹‰è‡ªå˜é‡ (X) å’Œå› å˜é‡ (Y)ã€‚ä½¿ç”¨å®šä¹‰çš„å˜é‡å°†æ•°æ®åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œè¿›ä¸€æ­¥ç”¨äºå»ºæ¨¡å’Œè¯„ä¼°ã€‚å¯ä»¥ä½¿ç”¨ python ä¸­çš„ &ldquo;<strong>train_test_split</strong>&rdquo; ç®—æ³•è½»æ¾æ‹†åˆ†æ•°æ®ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="c1"># DATA SPLIT</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Class&#39;</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span>
        <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span> <span class="n">random_state</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;X_train samples : &#39;</span><span class="p">,</span> <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]),</span>
      <span class="n">X_train</span><span class="p">[:</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;X_test samples : &#39;</span><span class="p">,</span> <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]),</span>
      <span class="n">X_test</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;y_train samples : &#39;</span><span class="p">,</span> <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]),</span>
      <span class="n">y_train</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">20</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;y_test samples : &#39;</span><span class="p">,</span> <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]),</span>
      <span class="n">y_test</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">20</span><span class="p">])</span>
</code></pre></div><p>Run</p>
<pre><code>[1mX_train samples : [0m [[-1.11504743  1.03558276  0.80071244 -1.06039825  0.03262117  0.85342216
  -0.61424348 -3.23116112  1.53994798 -0.81690879 -1.30559201  0.1081772
  -0.85960958 -0.07193421  0.90665563 -1.72092961  0.79785322 -0.0067594
   1.95677806 -0.64489556  3.02038533 -0.53961798  0.03315649 -0.77494577
   0.10586781 -0.43085348  0.22973694 -0.0705913  -0.30145418]]
[1mX_test samples : [0m [[-0.32333357  1.05745525 -0.04834115 -0.60720431  1.25982115 -0.09176072
   1.1591015  -0.12433461 -0.17463954 -1.64440065 -1.11886302  0.20264731
   1.14596495 -1.80235956 -0.24717793 -0.06094535  0.84660574  0.37945439
   0.84726224  0.18640942 -0.20709827 -0.43389027 -0.26161328 -0.04665061
   0.2115123   0.00829721  0.10849443  0.16113917 -0.19330595]]
[1my_train samples : [0m [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]
[1my_test samples : [0m [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]
</code></pre>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå·²ç»åšå¥½äº†æ„å»ºåˆ†ç±»æ¨¡å‹æ‰€éœ€çš„æ‰€æœ‰å‡†å¤‡ã€‚</p>
<br>
<h2 id="æ¨¡å‹å»ºç«‹">æ¨¡å‹å»ºç«‹</h2>
<p>è¿™é‡Œæ„å»ºå…­ç§ä¸åŒç±»å‹çš„åˆ†ç±»æ¨¡å‹ï¼Œå³<strong>å†³ç­–æ ‘ã€K-æœ€è¿‘é‚» (KNN)ã€é€»è¾‘å›å½’ã€æ”¯æŒå‘é‡æœº (SVM)ã€éšæœºæ£®æ—å’Œ XGBoost</strong>ã€‚è™½ç„¶æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨æ›´å¤šå…¶ä»–çš„æ¨¡å‹ï¼Œä½†æˆ‘ä»¬é€‰ç”¨çš„æ˜¯ç”¨äºè§£å†³åˆ†ç±»é—®é¢˜çš„æœ€æµè¡Œæ¨¡å‹ã€‚æ‰€æœ‰è¿™äº›æ¨¡å‹æ„å»ºå‡æ¯”è¾ƒæ–¹ä¾¿ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ <strong>scikit-learn</strong> åŒ…æä¾›çš„ç®—æ³•æ¥æ„å»ºã€‚ä»…å¯¹äº XGBoost æ¨¡å‹ï¼Œå°†ä½¿ç”¨ xgboost åŒ…ã€‚æ¥ä¸‹æ¥åœ¨ python ä¸­å®ç°è¿™äº›æ¨¡å‹ï¼Œæ‰€ä½¿ç”¨çš„ç®—æ³•å¯èƒ½éœ€è¦èŠ±è´¹ä¸€å®šçš„æ—¶é—´æ¥å®ç°ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">sklearn.tree</span> <span class="kn">import</span> <span class="n">DecisionTreeClassifier</span>
<span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="kn">import</span> <span class="n">KNeighborsClassifier</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LogisticRegression</span>
<span class="kn">from</span> <span class="nn">sklearn.svm</span> <span class="kn">import</span> <span class="n">SVC</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestClassifier</span>
<span class="kn">from</span> <span class="nn">xgboost</span> <span class="kn">import</span> <span class="n">XGBClassifier</span>


<span class="c1"># MODELING</span>

<span class="c1"># 1. Decision Tree</span>
<span class="n">tree_model</span> <span class="o">=</span> <span class="n">DecisionTreeClassifier</span><span class="p">(</span><span class="n">max_depth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">criterion</span> <span class="o">=</span> <span class="s1">&#39;entropy&#39;</span><span class="p">)</span>
<span class="n">tree_model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="n">tree_yhat</span> <span class="o">=</span> <span class="n">tree_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="c1"># 2. K-Nearest Neighbors</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">knn</span> <span class="o">=</span> <span class="n">KNeighborsClassifier</span><span class="p">(</span><span class="n">n_neighbors</span> <span class="o">=</span> <span class="n">n</span><span class="p">)</span>
<span class="n">knn</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="n">knn_yhat</span> <span class="o">=</span> <span class="n">knn</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="c1"># 3. Logistic Regression</span>
<span class="n">lr</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">()</span>
<span class="n">lr</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="n">lr_yhat</span> <span class="o">=</span> <span class="n">lr</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="c1"># 4. SVM </span>
<span class="n">svm</span> <span class="o">=</span> <span class="n">SVC</span><span class="p">()</span>
<span class="n">svm</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="n">svm_yhat</span> <span class="o">=</span> <span class="n">svm</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="c1"># 5. Random Forest Tree</span>
<span class="n">rf</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">(</span><span class="n">max_depth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">rf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="n">rf_yhat</span> <span class="o">=</span> <span class="n">rf</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="c1"># 6. XGBoost</span>
<span class="n">xgb</span> <span class="o">=</span> <span class="n">XGBClassifier</span><span class="p">(</span><span class="n">max_depth</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">xgb</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="n">xgb_yhat</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
</code></pre></div><p>è‡³æ­¤æˆ‘ä»¬æ„å»ºäº†ä»å†³ç­–æ ‘æ¨¡å‹åˆ° XGBoost æ¨¡å‹çš„å…­ç§ä¸åŒç±»å‹çš„åˆ†ç±»æ¨¡å‹ã€‚</p>
<p>åœ¨å†³ç­–æ ‘æ¨¡å‹ä¸­ï¼Œä½¿ç”¨ <strong>&ldquo;DecisionTreeClassifier&rdquo;</strong> ç®—æ³•æ¥æ„å»ºæ¨¡å‹ã€‚åœ¨ç®—æ³•ä¸­ï¼Œè®¾ç½® <strong>&ldquo;max_depth=4&rdquo;</strong>ï¼Œæ„å‘³ç€å…è®¸æ ‘æœ€å¤§åˆ†è£‚å››æ¬¡ï¼Œ<strong>&ldquo;criterion = &lsquo;entropy&rdquo;</strong>ï¼Œä¸**&ldquo;max_depth&rdquo;**æœ€ç›¸ä¼¼ï¼Œä½†å†³å®šä½•æ—¶åˆ†è£‚åœæ­¢åˆ†è£‚æ ‘ã€‚æœ€åæ‹Ÿåˆæ¨¡å‹åå°†é¢„æµ‹å€¼å­˜å‚¨åˆ° <strong>&ldquo;tree_yhat&rdquo;</strong> å˜é‡ä¸­ã€‚</p>
<p>åœ¨K-æœ€è¿‘é‚» (KNN)ä¸­ï¼Œä½¿ç”¨ <strong>&ldquo;KNeighborsClassifier&rdquo;</strong> ç®—æ³•æ„å»ºäº†æ¨¡å‹ï¼Œå¹¶è®¾ç½® <strong>&ldquo;n_neighbors=5&rdquo;</strong>ã€‚ <strong>&lsquo;n_neighbors&rsquo;</strong> çš„å€¼æ˜¯éšæœºé€‰æ‹©çš„ï¼Œå…¶å®å¯ä»¥é€šè¿‡è¿­ä»£ä¸€ç³»åˆ—å€¼æ¥æœ‰ç›®çš„åœ°é€‰æ‹©ï¼Œç„¶åæ‹Ÿåˆæ¨¡å‹åå°†é¢„æµ‹å€¼å­˜å‚¨åˆ° <strong>&ldquo;knn_yhat&rdquo;</strong> å˜é‡ä¸­ã€‚</p>
<p>é€»è¾‘å›å½’çš„ä»£ç æ²¡æœ‰ä»€ä¹ˆå¯è§£é‡Šçš„ï¼Œå› ä¸ºæˆ‘ä½¿ç”¨ <strong>&ldquo;LogisticRegression&rdquo;</strong> ç®—æ³•å¹¶å…¨éƒ¨ä½¿ç”¨é»˜è®¤å€¼ï¼Œå¹¶æ‹Ÿåˆæ¨¡å‹åå°†é¢„æµ‹å€¼å­˜å‚¨åˆ° <strong>&ldquo;lr_yhat&rdquo;</strong> å˜é‡ä¸­ã€‚</p>
<p>ä½¿ç”¨&quot;SVC&quot;ç®—æ³•æ„å»ºäº†æ”¯æŒå‘é‡æœºæ¨¡å‹ï¼Œå¹¶ä¸”åŒæ ·ä½¿ç”¨é»˜è®¤å€¼ï¼Œå¹¶ä¸”é»˜è®¤å†…æ ¸å°±æ˜¯æˆ‘ä»¬æ‰€å¸Œæœ›ç”¨åˆ°çš„æ¨¡å‹ï¼Œå³&quot;rbf&quot;å†…æ ¸ã€‚ä¹‹åï¼Œæˆ‘ä»¬åœ¨æ‹Ÿåˆæ¨¡å‹åå°†é¢„æµ‹å€¼å­˜å‚¨åˆ° &ldquo;svm_yhat&rdquo; ä¸­ã€‚</p>
<p>æ¥ä¸‹æ¥ä½¿ç”¨ <strong>&ldquo;RandomForestClassifier&rdquo;</strong> ç®—æ³•æ„å»ºçš„éšæœºæ£®æ—æ¨¡å‹ï¼Œè®¾ç½®å‚æ•° <strong>&ldquo;max_depth=4&rdquo;</strong>ï¼Œå°±åƒæ„å»ºå†³ç­–æ ‘æ¨¡å‹çš„æ–¹å¼ä¸€æ ·ã€‚æœ€ååœ¨æ‹Ÿåˆæ¨¡å‹åå°†é¢„æµ‹å€¼å­˜å‚¨åˆ° <strong>&ldquo;rf_yhat&rdquo;</strong> ä¸­ã€‚è¯·è®°ä½ï¼Œå†³ç­–æ ‘å’Œéšæœºæ£®æ—ä¹‹é—´çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œå†³ç­–æ ‘ä½¿ç”¨æ•´ä¸ªæ•°æ®é›†æ¥æ„å»ºå•ä¸ªæ¨¡å‹ï¼Œè€Œéšæœºæ£®æ—ä½¿ç”¨éšæœºé€‰æ‹©çš„ç‰¹å¾æ¥æ„å»ºå¤šä¸ªæ¨¡å‹ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šæƒ…å†µä¸‹é€‰æ‹©ä½¿ç”¨éšæœºæ£®æ—æ¨¡å‹è€Œä¸æ˜¯å†³ç­–æ ‘çš„åŸå› ã€‚</p>
<p>æœ€åæ˜¯ XGBoost æ¨¡å‹ã€‚ä½¿ç”¨ xgboost åŒ…æä¾›çš„ <strong>&ldquo;XGBClassifier&rdquo;</strong> ç®—æ³•æ„å»ºæ¨¡å‹ã€‚è®¾ç½® <strong>&ldquo;max_depth=4&rdquo;</strong>ï¼Œæœ€ååœ¨æ‹Ÿåˆæ¨¡å‹åå°†é¢„æµ‹å€¼å­˜å‚¨åˆ° &ldquo;xgb_yhat&rdquo; ä¸­ã€‚</p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬æˆåŠŸæ„å»ºäº†å…­ç§åˆ†ç±»æ¨¡å‹ï¼Œä¸ºäº†ä¾¿äºç†è§£ï¼Œå¯¹ä»£ç è¿›è¡Œäº†ç®€å•è§£é‡Šã€‚æ¥ä¸‹æ¥éœ€è¦è¯„ä¼°æ¯ä¸ªæ¨¡å‹ï¼Œå¹¶æ‰¾åˆ°æœ€é€‚åˆæˆ‘ä»¬æ¡ˆä¾‹çš„æ¨¡å‹ã€‚</p>
<br>
<h2 id="æ¨¡å‹è¯„ä¼°">æ¨¡å‹è¯„ä¼°</h2>
<p>ä¹‹å‰æœ‰æåˆ°è¿‡ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ scikit-learn åŒ…æä¾›çš„è¯„ä¼°æŒ‡æ ‡æ¥è¯„ä¼°æˆ‘ä»¬æ„å»ºçš„æ¨¡å‹ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­çš„ä¸»è¦ç›®æ ‡æ˜¯ä¸ºç»™å®šæ¡ˆä¾‹æ‰¾åˆ°æœ€ä½³æ¨¡å‹ã€‚è¿™é‡Œå°†ä½¿ç”¨çš„è¯„ä¼°æŒ‡æ ‡æ˜¯<strong>å‡†ç¡®åº¦è¯„åˆ†æŒ‡æ ‡ã€f1 è¯„åˆ†æŒ‡æ ‡ï¼ŒåŠæ··æ·†çŸ©é˜µ</strong>ã€‚</p>
<h3 id="å‡†ç¡®ç‡">å‡†ç¡®ç‡</h3>
<p>å‡†ç¡®ç‡æ˜¯æœ€åŸºæœ¬çš„è¯„ä»·æŒ‡æ ‡ä¹‹ä¸€ï¼Œå¹¿æ³›ç”¨äºè¯„ä»·åˆ†ç±»æ¨¡å‹ã€‚å‡†ç¡®ç‡åˆ†æ•°çš„è®¡ç®—æ–¹æ³•å¾ˆç®€å•ï¼Œå°±æ˜¯å°†æ¨¡å‹åšå‡ºçš„æ­£ç¡®é¢„æµ‹çš„æ•°é‡é™¤ä»¥æ¨¡å‹åšå‡ºçš„é¢„æµ‹æ€»æ•°ï¼ˆå¯ä»¥ä¹˜ä»¥ 100 å°†ç»“æœè½¬æ¢ä¸ºç™¾åˆ†æ¯”ï¼‰ã€‚ä¸€èˆ¬å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p>
<p><strong>å‡†ç¡®åº¦åˆ†æ•° = æ­£ç¡®é¢„æµ‹æ•° / æ€»é¢„æµ‹æ•°</strong></p>
<p>æˆ‘ä»¬æ£€æŸ¥æˆ‘ä»¬æ‰€æ„å»ºçš„å…­ç§ä¸åŒåˆ†ç±»æ¨¡å‹çš„å‡†ç¡®ç‡åˆ†æ•°ã€‚è¦åœ¨ python ä¸­å®Œæˆï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ scikit-learn åŒ…æä¾›çš„ <strong>&ldquo;accuracy_score&rdquo;</strong> æ–¹æ³•ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">accuracy_score</span>

<span class="c1"># 1. Accuracy score</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;ACCURACY SCORE&#39;</span><span class="p">,</span> <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;Accuracy score of the Decision Tree model is </span><span class="si">{}</span><span class="s1">&#39;</span>
         <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">tree_yhat</span><span class="p">)),</span>
         <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;Accuracy score of the KNN model is </span><span class="si">{}</span><span class="s1">&#39;</span>
         <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">knn_yhat</span><span class="p">)),</span>
         <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;Accuracy score of the Logistic Regression model is </span><span class="si">{}</span><span class="s1">&#39;</span>
         <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">lr_yhat</span><span class="p">)),</span>
         <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;Accuracy score of the SVM model is </span><span class="si">{}</span><span class="s1">&#39;</span>
         <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">svm_yhat</span><span class="p">)),</span>
         <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;Accuracy score of the Random Forest Tree model is </span><span class="si">{}</span><span class="s1">&#39;</span>
         <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">rf_yhat</span><span class="p">)),</span>
         <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;Accuracy score of the XGBoost model is </span><span class="si">{}</span><span class="s1">&#39;</span>
         <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">xgb_yhat</span><span class="p">)),</span> 
         <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
</code></pre></div><p>Run</p>
<pre><code>[1mACCURACY SCORE[0m
[1mAccuracy score of the Decision Tree model is 0.9993679997191109[0m
[1m[32mAccuracy score of the KNN model is 0.9995259997893332[0m
[1m[31mAccuracy score of the Logistic Regression model is 0.9991924440855307[0m
[1mAccuracy score of the SVM model is 0.9993153330290369[0m
[1mAccuracy score of the Random Forest Tree model is 0.9993153330290369[0m
[1mAccuracy score of the XGBoost model is 0.9994908886626171[0m
</code></pre>
<p>æ ¹æ®å‡†ç¡®æ€§è¯„åˆ†è¯„ä¼°æŒ‡æ ‡æ¥çœ‹ï¼Œ<strong>KNN</strong> æ¨¡å‹ä¸ºæœ€å‡†ç¡®çš„æ¨¡å‹ï¼Œè€Œ <strong>Logistic</strong> å›å½’æ¨¡å‹æœ€ä¸å‡†ç¡®ã€‚ç„¶è€Œï¼Œå½“æˆ‘ä»¬å¯¹æ¯ä¸ªæ¨¡å‹çš„ç»“æœè¿›è¡Œå››èˆäº”å…¥æ—¶ï¼Œå¾—åˆ° 99% çš„å‡†ç¡®æ€§ï¼Œè¿™çœ‹æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„åˆ†æ•°ã€‚</p>
<h3 id="f1-score">F1-score</h3>
<p>F1-score æˆ– F-score æ˜¯ç”¨äºè¯„ä¼°åˆ†ç±»æ¨¡å‹çš„æœ€æµè¡Œçš„è¯„ä¼°æŒ‡æ ‡ä¹‹ä¸€ã€‚å®ƒå¯ä»¥ç®€å•åœ°å®šä¹‰ä¸º<strong>æ¨¡å‹çš„å‡†ç¡®ç‡å’Œå¬å›ç‡çš„è°ƒå’Œå¹³å‡å€¼</strong>ã€‚å®ƒçš„è®¡ç®—æ–¹æ³•æ˜¯å°† æ¨¡å‹çš„ç²¾åº¦å’Œå¬å›ç‡çš„ä¹˜ç§¯é™¤ä»¥æ¨¡å‹çš„ç²¾åº¦å’Œå¬å›ç‡ç›¸åŠ å¾—åˆ°çš„å€¼ï¼Œæœ€åä¹˜ä»¥ 2 å¾—åˆ°çš„å€¼ã€‚å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p>
<p><strong>F1-score  = 2( (ç²¾åº¦ * å¬å›ç‡) / (ç²¾åº¦ + å¬å›ç‡) )</strong></p>
<p>å¯ä»¥ä½¿ç”¨ scikit-learn åŒ…æä¾›çš„ &ldquo;f1_score&rdquo; æ–¹æ³•è½»æ¾è®¡ç®— <strong>F1-score</strong> ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">f1_score</span> 

<span class="c1"># 2. F1 score</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;F1 SCORE&#39;</span><span class="p">,</span> <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;F1 score of the Decision Tree model is </span><span class="si">{}</span><span class="s1">&#39;</span>
         <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">f1_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">tree_yhat</span><span class="p">)),</span>
         <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;F1 score of the KNN model is </span><span class="si">{}</span><span class="s1">&#39;</span>
         <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">f1_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">knn_yhat</span><span class="p">)),</span>
         <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;F1 score of the Logistic Regression model is </span><span class="si">{}</span><span class="s1">&#39;</span>
         <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">f1_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">lr_yhat</span><span class="p">)),</span>
         <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;F1 score of the SVM model is </span><span class="si">{}</span><span class="s1">&#39;</span>
         <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">f1_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">svm_yhat</span><span class="p">)),</span>
         <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;F1 score of the Random Forest Tree model is </span><span class="si">{}</span><span class="s1">&#39;</span>
         <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">f1_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">rf_yhat</span><span class="p">)),</span>
         <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cl</span><span class="p">(</span><span class="s1">&#39;F1 score of the XGBoost model is </span><span class="si">{}</span><span class="s1">&#39;</span>
         <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">f1_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">xgb_yhat</span><span class="p">)),</span>
         <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bold&#39;</span><span class="p">]))</span>
</code></pre></div><p>Run</p>
<pre><code>[1mF1 SCORE[0m
[1mF1 score of the Decision Tree model is 0.8105263157894738[0m
[1m[32mF1 score of the KNN model is 0.8571428571428572[0m
[1m[31mF1 score of the Logistic Regression model is 0.7356321839080459[0m
[1mF1 score of the SVM model is 0.7771428571428572[0m
[1mF1 score of the Random Forest Tree model is 0.7796610169491525[0m
[1mF1 score of the XGBoost model is 0.8449197860962566[0m
</code></pre>
<p>æ¨¡å‹çš„æ’åå‡ ä¹ä¸ä¹‹å‰çš„è¯„ä¼°æŒ‡æ ‡ç›¸ä¼¼ã€‚åœ¨ F1-score è¯„ä¼°æŒ‡æ ‡çš„åŸºç¡€ä¸Šï¼ŒKNN æ¨¡å‹å†æ¬¡å¤ºå¾—ç¬¬ä¸€ï¼ŒLogistic å›å½’æ¨¡å‹ä»ç„¶æ˜¯æœ€ä¸å‡†ç¡®çš„æ¨¡å‹ã€‚</p>
<h3 id="æ··æ·†çŸ©é˜µ">æ··æ·†çŸ©é˜µ</h3>
<p>é€šå¸¸ï¼Œæ··æ·†çŸ©é˜µæ˜¯åˆ†ç±»æ¨¡å‹çš„å¯è§†åŒ–ï¼Œæ˜¾ç¤ºæ¨¡å‹ä¸åŸå§‹ç»“æœç›¸æ¯”é¢„æµ‹ç»“æœçš„ç¨‹åº¦ã€‚é€šå¸¸ï¼Œé¢„æµ‹ç»“æœå­˜å‚¨åœ¨ä¸€ä¸ªå˜é‡ä¸­ï¼Œç„¶åå°†å…¶è½¬æ¢ä¸ºç›¸å…³è¡¨ã€‚ä½¿ç”¨ç›¸å…³è¡¨ï¼Œä»¥çƒ­å›¾çš„å½¢å¼ç»˜åˆ¶æ··æ·†çŸ©é˜µã€‚å°½ç®¡æœ‰å¤šç§å†…ç½®æ–¹æ³•å¯ä»¥å¯è§†åŒ–æ··æ·†çŸ©é˜µï¼Œä½†æˆ‘ä»¬å°†ä»é›¶å¼€å§‹å®šä¹‰å’Œå¯è§†åŒ–å®ƒï¼Œä»¥ä¾¿æ›´å¥½åœ°ç†è§£ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># 3. Confusion Matrix</span>
<span class="c1"># defining the plot function</span>
<span class="k">def</span> <span class="nf">plot_confusion_matrix</span><span class="p">(</span><span class="n">cm</span><span class="p">,</span> <span class="n">classes</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">normalize</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">Blues</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Confusion Matrix of </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    
    <span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">confusion_matrix</span>
    <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
    <span class="kn">import</span> <span class="nn">itertools</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
    
    <span class="k">if</span> <span class="n">normalize</span><span class="p">:</span>
        <span class="n">cm</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span> <span class="o">/</span> <span class="n">cm</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">cm</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="s1">&#39;nearest&#39;</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="n">cmap</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
    <span class="n">tick_marks</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">classes</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">tick_marks</span><span class="p">,</span> <span class="n">classes</span><span class="p">,</span> <span class="n">rotation</span> <span class="o">=</span> <span class="mi">45</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">tick_marks</span><span class="p">,</span> <span class="n">classes</span><span class="p">)</span>

    <span class="n">fmt</span> <span class="o">=</span> <span class="s1">&#39;.2f&#39;</span> <span class="k">if</span> <span class="n">normalize</span> <span class="k">else</span> <span class="s1">&#39;d&#39;</span>
    <span class="n">thresh</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">/</span> <span class="mf">2.</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">product</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">cm</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">range</span><span class="p">(</span><span class="n">cm</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="nb">format</span><span class="p">(</span><span class="n">cm</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">],</span> <span class="n">fmt</span><span class="p">),</span>
                 <span class="n">horizontalalignment</span> <span class="o">=</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span>
                 <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;white&#39;</span> <span class="k">if</span> <span class="n">cm</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">thresh</span> <span class="k">else</span> <span class="s1">&#39;black&#39;</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;True label&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Predicted label&#39;</span><span class="p">)</span>
    
<span class="c1"># Compute confusion matrix for the models</span>

<span class="n">tree_matrix</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">tree_yhat</span><span class="p">,</span> 
                <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span> <span class="c1"># Decision Tree</span>
<span class="n">knn_matrix</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> 
                <span class="n">knn_yhat</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span> <span class="c1"># K-Nearest Neighbors</span>
<span class="n">lr_matrix</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">lr_yhat</span><span class="p">,</span> 
                <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span> <span class="c1"># Logistic Regression</span>
<span class="n">svm_matrix</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">svm_yhat</span><span class="p">,</span> 
                <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span> <span class="c1"># Support Vector Machine</span>
<span class="n">rf_matrix</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">rf_yhat</span><span class="p">,</span> 
                <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span> <span class="c1"># Random Forest Tree</span>
<span class="n">xgb_matrix</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">xgb_yhat</span><span class="p">,</span> 
                <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span> <span class="c1"># XGBoost</span>

<span class="c1"># Plot the confusion matrix</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</code></pre></div><h3 id="decision-tree">Decision tree</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">tree_cm_plot</span> <span class="o">=</span> <span class="n">plot_confusion_matrix</span><span class="p">(</span><span class="n">tree_matrix</span><span class="p">,</span> 
                      <span class="n">classes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Non-Default(0)&#39;</span><span class="p">,</span><span class="s1">&#39;Default(1)&#39;</span><span class="p">],</span> 
                      <span class="n">normalize</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Decision Tree&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;tree_cm_plot.png&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div><p>â€‹ <br>
<img loading="lazy" src="output_21_0.png" alt="png"  />

â€‹</p>
<h3 id="k-nearest-neighbors">K-Nearest Neighbors</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">knn_cm_plot</span> <span class="o">=</span> <span class="n">plot_confusion_matrix</span><span class="p">(</span><span class="n">knn_matrix</span><span class="p">,</span> 
                                <span class="n">classes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Non-Default(0)&#39;</span><span class="p">,</span><span class="s1">&#39;Default(1)&#39;</span><span class="p">],</span> 
                                <span class="n">normalize</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;KNN&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;knn_cm_plot.png&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div><p>â€‹ <br>
<img loading="lazy" src="output_23_0.png" alt="png"  />

â€‹</p>
<h3 id="logistic-regression">Logistic regression</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">lr_cm_plot</span> <span class="o">=</span> <span class="n">plot_confusion_matrix</span><span class="p">(</span><span class="n">lr_matrix</span><span class="p">,</span> 
                                <span class="n">classes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Non-Default(0)&#39;</span><span class="p">,</span><span class="s1">&#39;Default(1)&#39;</span><span class="p">],</span> 
                                <span class="n">normalize</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Logistic Regression&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;lr_cm_plot.png&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div><p>â€‹ <br>
<img loading="lazy" src="output_25_0.png" alt="png"  />

â€‹</p>
<h3 id="support-vector-machine">Support Vector Machine</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">svm_cm_plot</span> <span class="o">=</span> <span class="n">plot_confusion_matrix</span><span class="p">(</span><span class="n">svm_matrix</span><span class="p">,</span> 
                                <span class="n">classes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Non-Default(0)&#39;</span><span class="p">,</span><span class="s1">&#39;Default(1)&#39;</span><span class="p">],</span> 
                                <span class="n">normalize</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;SVM&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;svm_cm_plot.png&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div><p>â€‹ <br>
<img loading="lazy" src="output_27_0.png" alt="png"  />

â€‹</p>
<h3 id="random-forest">Random Forest</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">rf_cm_plot</span> <span class="o">=</span> <span class="n">plot_confusion_matrix</span><span class="p">(</span><span class="n">rf_matrix</span><span class="p">,</span> 
                                <span class="n">classes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Non-Default(0)&#39;</span><span class="p">,</span><span class="s1">&#39;Default(1)&#39;</span><span class="p">],</span> 
                                <span class="n">normalize</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Random Forest Tree&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;rf_cm_plot.png&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div><p>â€‹ <br>
<img loading="lazy" src="output_29_0.png" alt="png"  />

â€‹</p>
<h3 id="xgboost">XGBoost</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">xgb_cm_plot</span> <span class="o">=</span> <span class="n">plot_confusion_matrix</span><span class="p">(</span><span class="n">xgb_matrix</span><span class="p">,</span> 
                                <span class="n">classes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Non-Default(0)&#39;</span><span class="p">,</span><span class="s1">&#39;Default(1)&#39;</span><span class="p">],</span> 
                                <span class="n">normalize</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;XGBoost&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;xgb_cm_plot.png&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div><p>â€‹ <br>
<img loading="lazy" src="output_31_0.png" alt="png"  />

â€‹</p>
<p><strong>æ··æ·†çŸ©é˜µç†è§£</strong>ï¼š ä»¥XGBoostæ¨¡å‹çš„æ··æ·†çŸ©é˜µä¸ºä¾‹ã€‚</p>
<ul>
<li>
<p>ç¬¬ä¸€è¡Œã€‚
ç¬¬ä¸€è¡Œæ˜¯æµ‹è¯•é›†ä¸­å®é™…æ¬ºè¯ˆå€¼ä¸º0çš„äº¤æ˜“ã€‚å¯ä»¥è®¡ç®—ï¼Œå…¶ä¸­56861ç¬”æ¬ºè¯ˆå€¼ä¸º0ã€‚åœ¨è¿™56861ç¬”éæ¬ºè¯ˆäº¤æ˜“ä¸­ï¼Œåˆ†ç±»å™¨æ­£ç¡®é¢„æµ‹äº†å…¶ä¸­çš„56854ç¬”ä¸º 0 å’Œ é¢„æµ‹äº†å…¶ä¸­ 7 ä¸º 1ã€‚è¿™æ„å‘³ç€ï¼Œå¯¹äº 56854 ç¬”éæ¬ºè¯ˆäº¤æ˜“ï¼Œæµ‹è¯•é›†ä¸­çš„å®é™…æµå¤±å€¼ä¸º 0ï¼Œåˆ†ç±»å™¨ä¹Ÿæ­£ç¡®é¢„æµ‹ä¸º 0ã€‚å¯ä»¥è¯´æˆ‘ä»¬çš„æ¨¡å‹å·²ç»å¯¹éæ¬ºè¯ˆäº¤æ˜“è¿›è¡Œäº†åˆ†ç±»äº¤æ˜“è¿˜ä¸é”™ã€‚</p>
</li>
<li>
<p>ç¬¬äºŒè¡Œã€‚
çœ‹èµ·æ¥æœ‰ 101 ç¬”äº¤æ˜“çš„æ¬ºè¯ˆå€¼ä¸º 1ã€‚åˆ†ç±»å™¨æ­£ç¡®é¢„æµ‹å…¶ä¸­ 79 ç¬”ä¸º 1ï¼Œé”™è¯¯é¢„æµ‹å€¼ä¸º 0 çš„ 22 ç¬”ã€‚é”™è¯¯é¢„æµ‹å€¼å¯ä»¥è§†ä¸ºæ¨¡å‹çš„é”™è¯¯ã€‚</p>
</li>
</ul>
<p>åœ¨æ¯”è¾ƒæ‰€æœ‰æ¨¡å‹çš„æ··æ·†çŸ©é˜µæ—¶å¯ä»¥çœ‹å‡ºï¼ŒK-Nearest Neighbors æ¨¡å‹åœ¨ä»éæ¬ºè¯ˆäº¤æ˜“ä¸­åˆ†ç±»æ¬ºè¯ˆäº¤æ˜“æ–¹é¢åšå¾—éå¸¸å¥½ï¼Œå…¶æ¬¡æ˜¯ XGBoost æ¨¡å‹ã€‚æ‰€ä»¥å¯ä»¥å¾—å‡ºç»“è®ºï¼Œæœ€é€‚åˆæœ¬æ¬¡æ¡ˆä¾‹çš„æ¨¡å‹æ˜¯ <strong>K-Nearest Neighbors</strong> æ¨¡å‹ï¼Œå¯ä»¥å¿½ç•¥çš„æ¨¡å‹æ˜¯ Logistic å›å½’æ¨¡å‹ã€‚</p>
<br>
<h2 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h2>
<p>ç»è¿‡ä¸€è¿ä¸²çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸæ„å»ºäº†ä»å†³ç­–æ ‘æ¨¡å‹åˆ°XGBoostæ¨¡å‹çš„å…­ç§ä¸åŒç±»å‹çš„åˆ†ç±»æ¨¡å‹ã€‚éšåä½¿ç”¨è¯„ä¼°æŒ‡æ ‡è¯„ä¼°äº†æ¯ä¸ªæ¨¡å‹ï¼Œå¹¶é€‰æ‹©äº†æœ€é€‚åˆç»™å®šæ¡ˆä¾‹çš„æ¨¡å‹ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬åªé€‰ç”¨äº†6ä¸ªç›¸å¯¹æµè¡Œçš„æ¨¡å‹ï¼Œå…¶å®è¿˜æœ‰æ›´å¤šæ¨¡å‹éœ€è¦æ¢ç´¢ã€‚æ­¤å¤–ï¼Œè™½ç„¶æˆ‘ä»¬å¾ˆè½»æ¾åœ°åœ¨ python ä¸­å¯è¡Œåœ°æ„å»ºäº†æ¨¡å‹ï¼Œä½†æ˜¯æ¯ä¸ªæ¨¡å‹èƒŒåéƒ½æœ‰å¾ˆå¤šçš„æ•°å­¦å’Œç»Ÿè®¡æ•°æ®ï¼Œåœ¨æœ‰ç²¾åŠ›çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥å»äº†è§£ä¸‹è¿™ä¹ˆæ¨¡å‹èƒŒåçš„æ•°å­¦æ¨ç†ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<p>[1] Kaggle ä¿¡ç”¨å¡æ¬ºè¯ˆæ£€æµ‹æ•°æ®é›†: <a href="https://www.kaggle.com/mlg-ulb/creditcardfraud">https://www.kaggle.com/mlg-ulb/creditcardfraud</a></p>
<br>
<h2 id="æ‹›å‹Ÿå°ä¼™ä¼´">æ‹›å‹Ÿå°ä¼™ä¼´</h2>
<div style="text-align: center;">
<figure >
    <a href="https://hidadeng.github.io/blog/we_need_you/">
        <img src="/images/blog/we_need_you.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»åŠ å…¥æˆ‘ä»¬</i></small></figcaption>
</figure>
</div>
<h2 id="å¹¿å‘Šä½">å¹¿å‘Šä½</h2>
<p>æƒ³è½»æ¾è€Œå¿«æ·çš„æ·±åˆ»äº†è§£ä¸€ä¸ªé¢†åŸŸï¼Œçœ‹è§†é¢‘(ç›´æ’­)å­¦ä¹ æ˜¯ä¸€ä¸ªä¸é”™çš„æ–¹å¼ã€‚</p>
<ul>
<li>
<p>å¤§é‚“æ¯å¹´ä¼šæœ‰4åœºç›´æ’­ï¼Œäº”ä¸€ã€åä¸€ã€å¯’ã€æš‘å‡ï¼Œå¦‚æœæ—¶é—´ç‚¹æ¥è¿‘ï¼Œå¯è€ƒè™‘æŠ¥åå‚ä¸<a href="https://hidadeng.github.io/blog/2022-05-workshop/7-Python.html">ç›´æ’­è¯¾</a>ã€‚</p>
</li>
<li>
<p>å¦‚æœåªæ„æ€§ä»·æ¯”ï¼Œä¸”å·²è¿«ä¸åŠå¾…æƒ³å­¦ï¼Œå¯ä»¥è€ƒè™‘ç›´æ¥æŠ¥åå¤§é‚“çš„<a href="https://hidadeng.github.io/blog/management_python_course">å½•æ’­è¯¾</a>ã€‚</p>
</li>
<li>
<p>å¦‚æœä¸æƒ³å­¦ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘å¤–åŒ…ã€‚æ›´å»ºè®®æ‰¾æ·˜å®ï¼Œå¦‚æœæ‰¾æˆ‘å’¨è¯¢ï¼Œè¯·å…ˆé˜…è¯»<a href="https://hidadeng.github.io/blog/paid_for_service">æœ‰å¿è¯´æ˜</a></p>
</li>
</ul>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
<br>
]]></content:encoded>
    </item>
    
    <item>
      <title>åœ¨jupyterå†…è¿è¡ŒRä»£ç </title>
      <link>https://hidadeng.github.io/blog/run_r_in_jupyter/</link>
      <pubDate>Sun, 29 May 2022 10:43:10 +0600</pubDate>
      
      <guid>/blog/run_r_in_jupyter/</guid>
      <description>åœ¨Jupyterä¸­ï¼Œé€šå¸¸æ˜¯é»˜è®¤æ”¯æŒPythonçš„ï¼Œå¦‚ä½•é…ç½®æ‰èƒ½è®©Rä¹Ÿèƒ½è¿è¡Œå‘¢ï¼Ÿ</description>
      <content:encoded><![CDATA[<p>Rå’ŒPythonéƒ½æ˜¯æ•°æ®åˆ†æåˆ©å™¨ï¼Œæœ€å¥½èƒ½ä¸€èµ·ä½¿ç”¨ï¼Œå‘æŒ¥å„è‡ªçš„ä¼˜åŠ¿ã€‚</p>
<p>åœ¨Jupyterä¸­ï¼Œé€šå¸¸æ˜¯é»˜è®¤æ”¯æŒPythonçš„ï¼Œå¦‚ä½•é…ç½®æ‰èƒ½è®©Rä¹Ÿèƒ½è¿è¡Œå‘¢ï¼Ÿ</p>
<br>
<h2 id="é…ç½®æ­¥éª¤">é…ç½®æ­¥éª¤</h2>
<h3 id="step-1">step 1</h3>
<p>å®‰è£…å¥½Rè½¯ä»¶ï¼Œæ‰“å¼€å‘½ä»¤è¡Œï¼Œè¾“å…¥Rå›è½¦ï¼Œè°ƒå‡ºRç¯å¢ƒ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">R
</code></pre></div><p>åœ¨Rç¯å¢ƒä¸­è¿è¡Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-R" data-lang="R"><span class="nf">install.packages</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&#39;repr&#39;</span><span class="p">,</span> <span class="s">&#39;IRdisplay&#39;</span><span class="p">,</span> <span class="s">&#39;evaluate&#39;</span><span class="p">,</span> <span class="s">&#39;crayon&#39;</span><span class="p">,</span> <span class="s">&#39;pbdZMQ&#39;</span><span class="p">,</span> <span class="s">&#39;devtools&#39;</span><span class="p">,</span> <span class="s">&#39;uuid&#39;</span><span class="p">,</span> <span class="s">&#39;digest&#39;</span><span class="p">))</span>
</code></pre></div><br>
<h3 id="step-2">step 2</h3>
<p>ç»§ç»­åœ¨åœ¨Rç¯å¢ƒä¸­è¿è¡Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-R" data-lang="R"><span class="n">devtools</span><span class="o">::</span><span class="nf">install_github</span><span class="p">(</span><span class="s">&#39;IRkernel/IRkernel&#39;</span><span class="p">)</span>
</code></pre></div><br>
<h3 id="step-3">step 3</h3>
<p>ç»§ç»­åœ¨Rç¯å¢ƒä¸­è¿è¡Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-R" data-lang="R"><span class="n">IRkernel</span><span class="o">::</span><span class="nf">installspec</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span>
</code></pre></div><br>
<br>
<h2 id="è°ƒç”¨jupyter">è°ƒç”¨Jupyter</h2>
<p>é‡æ–°æ‰“å¼€å‘½ä»¤è¡Œï¼Œæ‰§è¡Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">jupyter notebook
</code></pre></div><p>å¼¹å‡ºçš„ç•Œé¢ä¸­æ‹¥æœ‰äº†Rçš„kernel</p>
<p><img loading="lazy" src="r_kernel.png" alt=""  />
</p>
<br>
<p>æ–°å»ºä¸€ä¸ªRçš„jupyteræ–‡ä»¶ï¼Œè¿è¡Œä¸‹æ–¹ä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-R" data-lang="R"><span class="nf">library</span><span class="p">(</span><span class="s">&#34;ggsci&#34;</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="s">&#34;ggplot2&#34;</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="s">&#34;gridExtra&#34;</span><span class="p">)</span>

<span class="nf">data</span><span class="p">(</span><span class="s">&#34;diamonds&#34;</span><span class="p">)</span>

<span class="n">p1</span> <span class="o">&lt;-</span> <span class="nf">ggplot</span><span class="p">(</span>
  <span class="nf">subset</span><span class="p">(</span><span class="n">diamonds</span><span class="p">,</span> <span class="n">carat</span> <span class="o">&gt;=</span> <span class="m">2.2</span><span class="p">),</span>
  <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">table</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">price</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="n">cut</span><span class="p">)</span>
<span class="p">)</span> <span class="o">+</span>
  <span class="nf">geom_point</span><span class="p">(</span><span class="n">alpha</span> <span class="o">=</span> <span class="m">0.7</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">geom_smooth</span><span class="p">(</span><span class="n">method</span> <span class="o">=</span> <span class="s">&#34;loess&#34;</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="m">0.05</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">span</span> <span class="o">=</span> <span class="m">1</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">theme_bw</span><span class="p">()</span>

<span class="n">p2</span> <span class="o">&lt;-</span> <span class="nf">ggplot</span><span class="p">(</span>
  <span class="nf">subset</span><span class="p">(</span><span class="n">diamonds</span><span class="p">,</span> <span class="n">carat</span> <span class="o">&gt;</span> <span class="m">2.2</span> <span class="o">&amp;</span> <span class="n">depth</span> <span class="o">&gt;</span> <span class="m">55</span> <span class="o">&amp;</span> <span class="n">depth</span> <span class="o">&lt;</span> <span class="m">70</span><span class="p">),</span>
  <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">depth</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="n">cut</span><span class="p">)</span>
<span class="p">)</span> <span class="o">+</span>
  <span class="nf">geom_histogram</span><span class="p">(</span><span class="n">colour</span> <span class="o">=</span> <span class="s">&#34;black&#34;</span><span class="p">,</span> <span class="n">binwidth</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">position</span> <span class="o">=</span> <span class="s">&#34;dodge&#34;</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">theme_bw</span><span class="p">()</span>


<span class="n">p1_npg</span> <span class="o">&lt;-</span> <span class="n">p1</span> <span class="o">+</span> <span class="nf">scale_color_npg</span><span class="p">()</span>
<span class="n">p2_npg</span> <span class="o">&lt;-</span> <span class="n">p2</span> <span class="o">+</span> <span class="nf">scale_fill_npg</span><span class="p">()</span>
<span class="nf">grid.arrange</span><span class="p">(</span><span class="n">p1_npg</span><span class="p">,</span> <span class="n">p2_npg</span><span class="p">,</span> <span class="n">ncol</span> <span class="o">=</span> <span class="m">2</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<p><img loading="lazy" src="ggsci_plot.png" alt=""  />
</p>
<br>
<h1 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h1>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>karateclubåº“ | è®¡ç®—ç¤¾äº¤ç½‘ç»œä¸­èŠ‚ç‚¹çš„å‘é‡</title>
      <link>https://hidadeng.github.io/blog/karateclub_tutorial/</link>
      <pubDate>Tue, 10 May 2022 09:40:10 +0600</pubDate>
      
      <guid>/blog/karateclub_tutorial/</guid>
      <description>ä½¿ç”¨karateclubè®¡ç®—ç¤¾äº¤ç½‘ç»œä¸­èŠ‚ç‚¹çš„å‘é‡ï¼Œæœ‰äº†èŠ‚ç‚¹çš„å‘é‡ï¼Œå°±å¯ä»¥åŸºäºå‘é‡æ€ç»´æ¯”è¾ƒèŠ‚ç‚¹å¼‚åŒ</description>
      <content:encoded><![CDATA[<p><a href="https://karateclub.readthedocs.io/en/latest">karateclub</a>æ˜¯å°è§„æ¨¡å›¾æŒ–æ˜ç ”ç©¶çš„ä¸€æŠŠç‘å£«å†›åˆ€ï¼Œ å¯ä»¥å¯¹å›¾å½¢ç»“æ„åŒ–æ•°æ®è¿›è¡Œæ— ç›‘ç£å­¦ä¹ ã€‚</p>
<ul>
<li>é¦–å…ˆï¼Œå¯ä»¥è®¡ç®—å‡ºèŠ‚ç‚¹ã€å›¾çš„ç‰¹å¾å‘é‡</li>
<li>å…¶æ¬¡ï¼Œå®ƒåŒ…æ‹¬å¤šç§é‡å å’Œéé‡å çš„ç¤¾åŒºå‘ç°æ–¹æ³•ã€‚</li>
</ul>
<br>
<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="">click to download</a></p>
<br>
<h2 id="æ•°æ®æ ¼å¼">æ•°æ®æ ¼å¼</h2>
<p>karateclubå‡è®¾ç”¨æˆ·æä¾›çš„ç”¨äº<strong>èŠ‚ç‚¹åµŒå…¥</strong>å’Œ<strong>ç¤¾åŒºæ£€æµ‹</strong>çš„ NetworkX å›¾å…·æœ‰ä»¥ä¸‹é‡è¦å±æ€§ï¼š</p>
<ul>
<li>èŠ‚ç‚¹ç”¨æ•´æ•°ç´¢å¼•</li>
<li>èŠ‚ç‚¹ç´¢å¼•ä»é›¶å¼€å§‹ï¼Œç´¢å¼•æ˜¯è¿ç»­çš„</li>
</ul>
<p><strong>èŠ‚ç‚¹çš„å±æ€§çŸ©é˜µ</strong>å¯ä»¥æä¾›ä¸º scipy sparse å’Œ numpy æ•°ç»„ã€‚è¿”å›çš„ç¤¾åŒºæˆå‘˜å­—å…¸å’ŒåµŒå…¥çŸ©é˜µä½¿ç”¨ç›¸åŒçš„æ•°å­—è¿ç»­ç´¢å¼•ã€‚</p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">pip3</span> <span class="n">install</span> <span class="n">karateclub</span>
</code></pre></div><br>
<h2 id="å‡†å¤‡æ•°æ®">å‡†å¤‡æ•°æ®</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;karate_club_graph.csv&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>

<span class="nb">print</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">to_markdown</span><span class="p">())</span>

<span class="nb">print</span><span class="p">()</span>

<span class="n">edges</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;src&#39;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;tgt&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">edges</span><span class="p">)</span>

</code></pre></div><p>Run</p>
<pre><code>Index(['src', 'tgt'], dtype='object')

|    |   src |   tgt |
|---:|------:|------:|
|  0 |     0 |     1 |
|  1 |     0 |     2 |
|  2 |     0 |     3 |
|  3 |     0 |     4 |
|  4 |     0 |     5 |

[(0, 1), (0, 2), (0, 3), (0, 4), (0, 5), (0, 6), (0, 7), (0, 8), (0, 10), (0, 11), (0, 12), (0, 13), (0, 17), (0, 19), (0, 21), (0, 31), (1, 2), (1, 3), (1, 7), (1, 13), (1, 17), (1, 19), (1, 21), (1, 30), (2, 3), (2, 7), (2, 8), (2, 9), (2, 13), (2, 27), (2, 28), (2, 32), (3, 7), (3, 12), (3, 13), (4, 6), (4, 10), (5, 6), (5, 10), (5, 16), (6, 16), (8, 30), (8, 32), (8, 33), (9, 33), (13, 33), (14, 32), (14, 33), (15, 32), (15, 33), (18, 32), (18, 33), (19, 33), (20, 32), (20, 33), (22, 32), (22, 33), (23, 25), (23, 27), (23, 29), (23, 32), (23, 33), (24, 25), (24, 27), (24, 31), (25, 31), (26, 29), (26, 33), (27, 33), (28, 31), (28, 33), (29, 32), (29, 33), (30, 32), (30, 33), (31, 32), (31, 33), (32, 33)]
</code></pre>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>

<span class="n">graph</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
<span class="n">graph</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span><span class="n">edges</span><span class="p">)</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<p>â€‹ <br>
<img loading="lazy" src="output_4_0.png" alt="png"  />

â€‹</p>
<br>
<h2 id="ç¤¾åŒºå‘ç°">ç¤¾åŒºå‘ç°</h2>
<p>ç°åœ¨è®©æˆ‘ä»¬ä½¿ç”¨LabelPropagationç®—æ³•æ¥å‘ç°ç½‘ç»œä¸­çš„ç¤¾åŒºç»“æ„ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">karateclub</span> <span class="kn">import</span> <span class="n">LabelPropagation</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">LabelPropagation</span><span class="p">()</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
<span class="n">cluster_membership</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_memberships</span><span class="p">()</span>
<span class="n">cluster_membership</span>
</code></pre></div><p>Run</p>
<pre><code>{23: 8,
 33: 8,
 5: 10,
 7: 1,
 28: 31,
 4: 10,
 3: 1,
 31: 31,
 20: 8,
 19: 1,
 6: 10,
 32: 8,
 29: 8,
 9: 1,
 14: 8,
 2: 1,
 0: 1,
 17: 1,
 25: 31,
 22: 8,
 11: 1,
 13: 1,
 1: 1,
 24: 31,
 15: 8,
 18: 8,
 26: 8,
 27: 8,
 16: 10,
 12: 1,
 30: 8,
 21: 1,
 8: 8,
 10: 10}
</code></pre>
<p>åœ¨æœ‰34ä¸ªèŠ‚ç‚¹çš„å›¾ä¸­ï¼Œå‘ç°äº†4ä¸ªç¤¾åŒºï¼Œåˆ†åˆ«æ˜¯1ã€8ã€10ã€31ã€‚</p>
<br>
<h2 id="node-embeddings">Node embeddings</h2>
<p>è®¡ç®—èŠ‚ç‚¹çš„å‘é‡ã€‚â€‹ä½¿ç”¨ Diff2vec æ‹Ÿåˆæ•°æ®çš„èŠ‚ç‚¹åµŒå…¥(å‘é‡)ï¼Œå…·æœ‰å°‘é‡ç»´åº¦ã€æ¯ä¸ªæºèŠ‚ç‚¹çš„æ‰©æ•£å’ŒçŸ­æ¬§æ‹‰æ¸¸èµ°ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">karateclub</span> <span class="kn">import</span> <span class="n">Diff2Vec</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">Diff2Vec</span><span class="p">(</span><span class="n">diffusion_number</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> 
                 <span class="n">diffusion_cover</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> 
                 <span class="n">dimensions</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_embedding</span><span class="p">()</span>
<span class="n">X</span><span class="o">.</span><span class="n">shape</span>
</code></pre></div><p>Run</p>
<pre><code>(34, 5)
</code></pre>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">X</span>
</code></pre></div><p>Run</p>
<pre><code>array([[ 1.3687179 , -0.33502993, -0.3294797 ,  0.40154558,  1.0270709 ],
       [ 0.88167036, -0.3201618 , -0.34293872,  0.41519755,  0.71964073],
       [ 0.8756805 , -0.21934716, -0.33261183,  0.33785722,  0.51631075],
       [ 0.9768452 , -0.39260587, -0.39460638,  0.28851682,  0.8665034 ],
       [ 0.4809215 , -0.28729865, -0.19276802,  0.22588767,  0.07305563],
       [ 0.5580538 , -0.28137547, -0.1947159 ,  0.23712516,  0.49257705],
       [ 0.23477663,  0.04262228,  0.07154325,  0.02909669,  0.33999097],
       [ 1.1882199 , -0.21742308, -0.26985615,  0.44171503,  0.6679048 ],
       [ 1.0287609 , -0.27409104, -0.04119629,  0.30143994,  0.704676  ],
       [ 0.5700088 , -0.26341844,  0.01560158, -0.08039217,  0.41796318],
       [ 0.5753763 , -0.2242508 , -0.1795436 ,  0.0705331 ,  0.46571913],
       [ 0.46763912, -0.17108741, -0.22459361,  0.03058788,  0.05998428],
       [ 0.5500626 , -0.12745889, -0.28661036,  0.16889155,  0.48200938],
       [ 0.6217582 , -0.10251168, -0.0713837 ,  0.13550574,  0.60422456],
       [ 0.9797377 , -0.46282482, -0.09380057,  0.2749968 ,  0.7020155 ],
       [ 0.38830167, -0.30841848, -0.20950563, -0.02130592,  0.0836651 ],
       [ 0.57225037, -0.04150235, -0.1246101 ,  0.06918757,  0.23083903],
       [ 0.6431406 , -0.04898892, -0.05708801,  0.1311793 ,  0.46377632],
       [ 0.541667  , -0.16031542, -0.33119023,  0.10385639,  0.39525154],
       [ 0.65543544, -0.27534947, -0.28757   ,  0.2080029 ,  0.5288213 ],
       [ 0.46381798, -0.07729273, -0.09209982,  0.11292508,  0.36836028],
       [ 0.53826964, -0.09915172, -0.09243581,  0.15036733,  0.5449071 ],
       [ 0.31599265, -0.22078821, -0.02872767,  0.07436654,  0.28573534],
       [ 1.0706906 , -0.27783617, -0.16653039,  0.2631594 ,  0.6408689 ],
       [ 0.67875004, -0.34441757, -0.10262538,  0.2588695 ,  0.38405937],
       [ 0.41786563, -0.10344986, -0.19508548,  0.19657765,  0.22006002],
       [ 0.7855942 , -0.27200857,  0.02204541,  0.09168041,  0.42220354],
       [ 0.7773458 , -0.11727296, -0.24145149,  0.04537854,  0.5737133 ],
       [ 0.75732976, -0.314953  , -0.15383345,  0.02065313,  0.51843405],
       [ 0.7226543 , -0.31919608, -0.18878649,  0.15413427,  0.42012522],
       [ 0.43411565, -0.17342259, -0.28042233,  0.26853496,  0.49947587],
       [ 1.1565564 , -0.36802933, -0.12613232,  0.32381424,  0.75113887],
       [ 1.1192797 , -0.162529  , -0.17195942,  0.39265418,  0.83656436],
       [ 1.2231556 , -0.5336606 , -0.14015286,  0.14054438,  0.5695296 ]],
      dtype=float32)
</code></pre>
<p><br><br></p>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>geopyåº“ | åœ°ç†ç¼–ç è®¡ç®—è·ç¦»</title>
      <link>https://hidadeng.github.io/blog/geopy_distance_calculate/</link>
      <pubDate>Thu, 28 Apr 2022 10:40:10 +0600</pubDate>
      
      <guid>/blog/geopy_distance_calculate/</guid>
      <description>åœ°ç†ä¿¡æ¯æ•°æ®åˆ†æï¼Œç»çº¬åº¦è·ç¦»è®¡ç®—</description>
      <content:encoded><![CDATA[<h1 id="geopy">geopy</h1>
<p>geopy æ˜¯å‡ ä¸ªæµè¡Œçš„åœ°ç†ç¼–ç ç½‘ç»œæœåŠ¡çš„ Python å®¢æˆ·ç«¯ã€‚</p>
<p>geopy ä½¿ Python å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åœ°ç†ç¼–ç å™¨å’Œå…¶ä»–æ•°æ®æºè½»æ¾å®šä½å…¨çƒåœ°å€ã€åŸå¸‚ã€å›½å®¶å’Œåœ°æ ‡çš„åæ ‡ã€‚</p>
<p>geopy åŒ…æ‹¬ç”¨äº <a href="https://nominatim.org/">OpenStreetMap Nominatim</a>ã€<a href="https://developers.google.com/maps/documentation/geocoding/">Google Geocoding API (V3)</a> çš„åœ°ç†ç¼–ç å™¨ç±»å’Œè®¸å¤š å…¶ä»–åœ°ç†ç¼–ç æœåŠ¡ã€‚ å®Œæ•´åˆ—è¡¨å¯åœ¨ <a href="https://geopy.readthedocs.io/en/latest/#geocoders">Geocoders æ–‡æ¡£éƒ¨åˆ†</a> ä¸Šæ‰¾åˆ°ã€‚ åœ°ç†ç¼–ç å™¨ç±»ä½äº <a href="https://github.com/geopy/geopy/tree/master/geopy/geocoders">geopy.geocoders</a>ã€‚</p>
<p>geopy é’ˆå¯¹ CPythonï¼ˆç‰ˆæœ¬ 3.5ã€3.6ã€3.7ã€3.8ã€3.9ï¼‰å’Œ PyPy3 è¿›è¡Œäº†æµ‹è¯•ã€‚ geopy 1.x ç³»åˆ—è¿˜æ”¯æŒ CPython 2.7ã€3.4 å’Œ PyPy2ã€‚</p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip3 install geopy
</code></pre></div><h2 id="geocoding">Geocoding</h2>
<p>è¦å°†æŸ¥è¯¢åœ°ç†å®šä½åˆ°åœ°å€å’Œåæ ‡ï¼š</p>
<p>é¦–å…ˆéœ€è¦åœ¨https://www.openstreetmap.org/æ³¨å†Œè´¦å·ï¼Œæ³¨å†Œä¸€ä¸ªappåã€‚æ³¨å†Œå¥½çš„appåç”¨äºå¡«å……user_agent</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">geopy.geocoders</span> <span class="kn">import</span> <span class="n">Nominatim</span>

<span class="n">geolocator</span> <span class="o">=</span> <span class="n">Nominatim</span><span class="p">(</span><span class="n">user_agent</span><span class="o">=</span><span class="s2">&#34;specify_your_app_name_here&#34;</span><span class="p">)</span>
<span class="n">location</span> <span class="o">=</span> <span class="n">geolocator</span><span class="o">.</span><span class="n">geocode</span><span class="p">(</span><span class="s2">&#34;175 5th Avenue NYC&#34;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">location</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
<span class="nb">print</span><span class="p">((</span><span class="n">location</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span> <span class="n">location</span><span class="o">.</span><span class="n">longitude</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">location</span><span class="o">.</span><span class="n">raw</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Flatiron Building, 175, 5th Avenue, Flatiron, New York, NYC, New York, ...
(40.7410861, -73.9896297241625)
{&#39;place_id&#39;: &#39;9167009604&#39;, &#39;type&#39;: &#39;attraction&#39;, ...}
</code></pre></div><p><br><br></p>
<p>ä¸ºäº†æ‰¾åˆ°åœ°å€å¯¹åº”çš„ç»çº¬åº¦</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">geopy.geocoders</span> <span class="kn">import</span> <span class="n">Nominatim</span>

<span class="n">geolocator</span> <span class="o">=</span> <span class="n">Nominatim</span><span class="p">(</span><span class="n">user_agent</span><span class="o">=</span><span class="s2">&#34;specify_your_app_name_here&#34;</span><span class="p">)</span>
<span class="n">location</span> <span class="o">=</span> <span class="n">geolocator</span><span class="o">.</span><span class="n">reverse</span><span class="p">(</span><span class="s2">&#34;52.509669, 13.376294&#34;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">location</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
<span class="nb">print</span><span class="p">((</span><span class="n">location</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span> <span class="n">location</span><span class="o">.</span><span class="n">longitude</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">location</span><span class="o">.</span><span class="n">raw</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Potsdamer Platz, Mitte, Berlin, 10117, Deutschland, European Union
(52.5094982, 13.3765983)
{&#39;place_id&#39;: &#39;654513&#39;, &#39;osm_type&#39;: &#39;node&#39;, ...}
</code></pre></div><p><br><br></p>
<h2 id="æµ‹é‡è·ç¦»">æµ‹é‡è·ç¦»</h2>
<p>Geopy å¯ä»¥ä½¿ç”¨ <a href="https://en.wikipedia.org/wiki/Geodesics_on_an_ellipsoid">geodesic distance</a> æˆ– <a href="https://en.wikipedia.org/wiki/">great-circle distance</a> è®¡ç®—ä¸¤ç‚¹ä¹‹é—´çš„æµ‹åœ°çº¿è·ç¦» Great-circle_distanceï¼‰ï¼Œé»˜è®¤çš„æµ‹åœ°çº¿è·ç¦»å¯ç”¨ä½œå‡½æ•° geopy.distance.distanceã€‚</p>
<p>è¿™æ˜¯æµ‹åœ°çº¿è·ç¦»çš„ç¤ºä¾‹ç”¨æ³•ï¼Œé‡‡ç”¨ä¸€å¯¹ <code>(lat, lon)</code> å…ƒç»„ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">geopy.distance</span> <span class="kn">import</span> <span class="n">geodesic</span>
<span class="n">newport_ri</span> <span class="o">=</span> <span class="p">(</span><span class="mf">41.49008</span><span class="p">,</span> <span class="o">-</span><span class="mf">71.312796</span><span class="p">)</span>
<span class="n">cleveland_oh</span> <span class="o">=</span> <span class="p">(</span><span class="mf">41.499498</span><span class="p">,</span> <span class="o">-</span><span class="mf">81.695391</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">geodesic</span><span class="p">(</span><span class="n">newport_ri</span><span class="p">,</span> <span class="n">cleveland_oh</span><span class="p">)</span><span class="o">.</span><span class="n">miles</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">538.390445368
</code></pre></div><br>
<p>ä½¿ç”¨great-cricleè·ç¦»ç®—æ³•ï¼ŒåŒæ—¶é‡‡ç”¨ä¸€å¯¹ <code>(lat, lon)</code> å…ƒç»„ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">geopy.distance</span> <span class="kn">import</span> <span class="n">great_circle</span>
<span class="n">newport_ri</span> <span class="o">=</span> <span class="p">(</span><span class="mf">41.49008</span><span class="p">,</span> <span class="o">-</span><span class="mf">71.312796</span><span class="p">)</span>
<span class="n">cleveland_oh</span> <span class="o">=</span> <span class="p">(</span><span class="mf">41.499498</span><span class="p">,</span> <span class="o">-</span><span class="mf">81.695391</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">great_circle</span><span class="p">(</span><span class="n">newport_ri</span><span class="p">,</span> <span class="n">cleveland_oh</span><span class="p">)</span><span class="o">.</span><span class="n">miles</span><span class="p">)</span>

</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">536.997990696
</code></pre></div><p><br><br></p>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title></title>
      <link>https://hidadeng.github.io/blog/read_csv_fast_with_pandas/</link>
      <pubDate>Sat, 05 Feb 2022 20:43:10 +0600</pubDate>
      
      <guid>/blog/read_csv_fast_with_pandas/</guid>
      <description>å½“é‡åˆ°ç‰¹åˆ«å¤§çš„csvæ–‡ä»¶ï¼Œä¾‹å¦‚500Mï¼Œpandasè¯»å–ä¼šå¾ˆæ…¢ã€‚æœ¬æ–‡æä¾›äº†æ–°çš„è§£å†³åŠæ³•</description>
      <content:encoded><![CDATA[<h2 id="é—®é¢˜åœºæ™¯">é—®é¢˜åœºæ™¯</h2>
<p>å½“é‡åˆ°ç‰¹åˆ«å¤§çš„csvæ–‡ä»¶ï¼Œä¾‹å¦‚500Mï¼Œpandasè¯»å–ä¼šå¾ˆæ…¢ï¼Œåœ¨ä¹‹å‰æ•™ç¨‹ä¸­è¦ä½¿ç”¨å…¶ä»–åŒ…å¦ç±»çš„è¯­æ³•ã€‚ç°åœ¨åªéœ€æ›´æ–°pandasï¼ŒåŠ ä¸€ä¸ªå‚æ•°å³å¯ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»ï¼š</p>
<ul>
<li>Pandas çš„é»˜è®¤ CSVè¯»æ•°æ®ï¼Œ v1.4 ä¸­å¼•å…¥çš„æ›´å¿«ã€æ›´å¹¶è¡Œçš„ CSVè§£æå™¨ã€‚</li>
<li>ä¸€ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥ä½¿äº‹æƒ…å˜å¾—æ›´å¿«ã€‚</li>
<li>è¯»å– CSVï¼Œé»˜è®¤æ–¹å¼</li>
</ul>
<p>ç¢°å·§æœ‰ä¸€ä¸ª 850MB çš„ CSV æ–‡ä»¶ï¼Œè¿™æ˜¯ä½¿ç”¨ Pandas åŠ è½½å®ƒçš„é»˜è®¤æ–¹å¼ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">## æ›´æ–°pandas</span>
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pandas</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&#34;large.csv&#34;</span><span class="p">)</span>
</code></pre></div><p>ä¸‹é¢æ˜¯<strong>æ—§çš„pandasç‰ˆæœ¬</strong>ä»£ç è¯»æ•°æ®æ‰€æ¶ˆè€—æ—¶é—´</p>
<p>0m13.245s</p>
<br>
<h2 id="ä½¿ç”¨pyarrowè¯»csv">ä½¿ç”¨pyarrowè¯»csv</h2>
<p>2022å¹´1æœˆä»½ï¼Œåˆšåˆšå‘å¸ƒçš„pandas1.4ç‰ˆæœ¬å¢åŠ äº†arrowåº“çš„csvè§£æå™¨ã€‚å¯¹äº†ï¼Œè¯¥åŠŸèƒ½ä»ç„¶å¤„äºè¯•éªŒé˜¶æ®µï¼Œä¸æ˜¯é»˜è®¤è§£æå™¨ï¼Œä½†æ˜¯è¶³å¤Ÿå¿«ã€‚ä¸‹é¢æ˜¯æ–°ç‰ˆæœ¬ç”¨æ³•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&#34;large.csv&#34;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&#34;pyarrow&#34;</span><span class="p">)</span>
</code></pre></div><p>æ–°ç‰ˆæœ¬ä»£ç è¯»æ•°æ®æ‰€æ¶ˆè€—æ—¶é—´</p>
<p>0m6.507s</p>
<table>
<thead>
<tr>
<th>CSVè§£æå™¨</th>
<th>CPUè¿è¡Œæ—¶é—´</th>
</tr>
</thead>
<tbody>
<tr>
<td>é»˜è®¤C</td>
<td>13.2s</td>
</tr>
<tr>
<td>PyArrow</td>
<td>6.5s</td>
</tr>
</tbody>
</table>
<p>éœ€è¦æ³¨æ„ï¼Œå¦‚æœä½ çš„æ•°æ®åˆ†æé¡¹ç›®å·²ç»ä½¿ç”¨äº†å¹¶è¡ŒåŠ é€Ÿæ•°æ®çš„è¯»å–ï¼Œé‚£ä¹ˆä»Šå¤©çš„æ–°æ•™ç¨‹ï¼ˆpyarrowï¼‰å¹¶ä¸ä¼šç‰¹åˆ«æ˜¾è‘—æ”¹å–„ä»£ç è¿è¡Œé€Ÿåº¦ï¼ˆåå‡ å€åŠ é€Ÿï¼‰ï¼Œä½†è‡³å°‘å¯èƒ½æä¾›æœ‰æ„ä¹‰çš„åŠ é€Ÿï¼ˆä¸€å€å·¦å³ï¼‰ã€‚</p>
<br>
<h2 id="é‡æ–°æ€è€ƒ">é‡æ–°æ€è€ƒ</h2>
<p>åŠ è½½ CSV åŸºæœ¬ä¸Šæ˜¯ä¸€é¡¹ç¹é‡çš„å·¥ä½œï¼š</p>
<ul>
<li>éœ€è¦åˆ†æˆå‡ è¡Œã€‚</li>
<li>éœ€è¦ç”¨é€—å·åˆ†éš”æ¯ä¸€è¡Œã€‚</li>
<li>éœ€è¦å¤„ç†å­—ç¬¦ä¸²å¼•ç”¨ã€‚</li>
<li>éœ€è¦çŒœæµ‹ï¼ˆï¼ï¼‰åˆ—çš„ç±»å‹ï¼Œé™¤éæ‚¨æ˜ç¡®åœ°å°†å®ƒä»¬ä¼ é€’ç»™ Pandasã€‚</li>
<li>éœ€è¦å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°ã€æ—¥æœŸå’Œå…¶ä»–éå­—ç¬¦ä¸²ç±»å‹ã€‚</li>
</ul>
<p>æ‰€æœ‰è¿™äº›éƒ½éœ€è¦ CPU æ—¶é—´ã€‚</p>
<p>å¦‚æœæ‚¨ä»ç¬¬ä¸‰æ–¹è·å– CSVï¼Œå¹¶ä¸”åªå¤„ç†ä¸€æ¬¡ï¼Œé‚£ä¹ˆæ‚¨å¯¹æ­¤æ— èƒ½ä¸ºåŠ›ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨å¤šæ¬¡åŠ è½½åŒä¸€ä¸ª CSV æ–‡ä»¶æ€ä¹ˆåŠï¼Ÿæˆ–è€…ï¼Œå¦‚æœæ‚¨æ˜¯åœ¨æ•°æ®å¤„ç†ç®¡é“çš„å…¶ä»–éƒ¨åˆ†ç”Ÿæˆè¾“å…¥æ–‡ä»¶çš„äººï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ</p>
<p>æ‚¨å¯ä»¥è¯»å–å…¶ä»–ä¸€äº›å¤„ç†é€Ÿåº¦æ›´å¿«çš„æ–‡ä»¶æ ¼å¼ï¼Œè€Œä¸æ˜¯è¯»å– CSVã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼Œä½¿ç”¨ Parquet æ•°æ®æ ¼å¼ã€‚ Parquet æ–‡ä»¶æ—¨åœ¨å¿«é€Ÿè¯»å–ï¼šæ‚¨ä¸å¿…åƒä½¿ç”¨ CSV é‚£æ ·è¿›è¡Œå¤§é‡è§£æã€‚ä¸ CSV ä¸åŒï¼Œå…¶ä¸­åˆ—ç±»å‹åœ¨æ–‡ä»¶è¯»å–æ—¶æ— éœ€ç¼–ç ï¼Œåœ¨ Parquet ä¸­ï¼Œåˆ—çš„ç±»å‹å­˜å‚¨åœ¨å®é™…æ–‡ä»¶ä¸­ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å°† CSV æ–‡ä»¶è½¬æ¢ä¸º Parquet æ–‡ä»¶ï¼›æˆ‘ä»¬ç¦ç”¨å‹ç¼©ï¼Œå› æ­¤æˆ‘ä»¬æ­£åœ¨ä¸ CSV è¿›è¡Œæ›´å¤šçš„è‹¹æœå¯¹è‹¹æœçš„æ¯”è¾ƒã€‚å½“ç„¶ï¼Œå¦‚æœæ‚¨æ˜¯ç¬¬ä¸€ä¸ªç”Ÿæˆæ–‡ä»¶çš„äººï¼Œåˆ™ä¸éœ€è¦è½¬æ¢æ­¥éª¤ï¼Œæ‚¨å¯ä»¥ç›´æ¥å°†æ•°æ®å†™å…¥ Parquetã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&#34;large.csv&#34;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="s2">&#34;large.parquet&#34;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div><p>ç°åœ¨æˆ‘ä»¬çš„æ•°æ®å­˜åœ¨äºlarge.parquetä¸­ï¼Œå†è¯»å–large.parquetçœ‹çœ‹è¯»å–æ—¶é—´</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&#34;large.parquet&#34;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&#34;fastparquet&#34;</span><span class="p">)</span>
</code></pre></div><p>2.441s</p>
<table>
<thead>
<tr>
<th>CSVè§£æå™¨</th>
<th>CPUè¿è¡Œæ—¶é—´</th>
</tr>
</thead>
<tbody>
<tr>
<td>é»˜è®¤C</td>
<td>13.2s</td>
</tr>
<tr>
<td>PyArrow</td>
<td>6.5s</td>
</tr>
<tr>
<td>fastparquet</td>
<td>2.4s</td>
</tr>
</tbody>
</table>
<br>
<p>çº¯ç²¹ç”± CPU è¡¡é‡ï¼Œfastparquet æ˜¯è¿„ä»Šä¸ºæ­¢æœ€å¿«çš„ã€‚  è¿™åªæ˜¯ä¸€ä¸ªä¾‹å­ã€‚ ä½†æ˜¾ç„¶é˜…è¯» Parquet æ ¼å¼çš„æ•ˆç‡è¦é«˜å¾—å¤šã€‚</p>
<br>
<h2 id="æœ€å¥½çš„æ–‡ä»¶æ ¼å¼ä¸æ˜¯-csv">æœ€å¥½çš„æ–‡ä»¶æ ¼å¼ä¸æ˜¯ CSV</h2>
<p>CSV æ˜¯ä¸€ç§ç³Ÿç³•çš„æ ¼å¼ã€‚ é™¤äº†è§£ææ•ˆç‡ä½ä¸‹ä¹‹å¤–ï¼Œç¼ºå°‘ç±»å‹æ•°æ®æ„å‘³ç€è§£ææ€»æ˜¯æ¯”å…·æœ‰å®é™…åˆ—ç±»å‹çš„ç»“æ„åŒ–æ–‡ä»¶æ ¼å¼æ›´å®¹æ˜“å‡ºé”™å’Œæ¨¡æ£±ä¸¤å¯ã€‚ å› æ­¤ï¼Œå¦‚æœå¯ä»¥ï¼Œè¯·é¿å…ä½¿ç”¨ CSV å¹¶ä½¿ç”¨æ›´å¥½çš„æ ¼å¼ï¼Œå°½é‡é€‰æ‹©å…¶ä»–é«˜æ•ˆç±»å‹ï¼Œå¦‚ Parquetã€‚</p>
<p>å¦‚æœä½ è¢« CSV å¡ä½äº†ï¼Œè€ƒè™‘åœ¨ Pandas 1.4 ä¸­ä½¿ç”¨æ–°çš„ PyArrow CSV è§£æå™¨ï¼› ä½ ä¼šå¾—åˆ°å¾ˆå¥½çš„åŠ é€Ÿï¼Œç‰¹åˆ«æ˜¯å¦‚æœä½ çš„ç¨‹åºå½“å‰æ²¡æœ‰åˆ©ç”¨å¤šä¸ª CPUã€‚</p>
<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>tomotopy | é€Ÿåº¦æœ€å¿«çš„LDAä¸»é¢˜æ¨¡å‹</title>
      <link>https://hidadeng.github.io/blog/tomotopy_is_the_fastest_topic_model/</link>
      <pubDate>Fri, 07 Jan 2022 11:43:10 +0600</pubDate>
      
      <guid>/blog/tomotopy_is_the_fastest_topic_model/</guid>
      <description>æ¥è¿‘Cçš„é€Ÿåº¦ï¼Œæ¯”å¸‚é¢çš„sklearnã€gensimå¿«åå‡ å€</description>
      <content:encoded><![CDATA[<h2 id="ä»£ç ä¸‹è½½tomotopy_codezip"><a href="tomotopy_code.zip">ä»£ç ä¸‹è½½</a></h2>
<br>
<p><a href="https://hidadeng.github.io/blog/2022workshop/"><img loading="lazy" src="img/workshop.png" alt="å¯’å‡å·¥ä½œåŠ"  />
</a></p>
<br>
<h2 id="tomotopyç®€ä»‹">tomotopyç®€ä»‹ï¼Ÿ</h2>
<p>tomotopy æ˜¯ tomotoï¼ˆä¸»é¢˜å»ºæ¨¡å·¥å…·ï¼‰çš„ Python æ‰©å±•ï¼Œå®ƒæ˜¯ç”¨ C++ ç¼–å†™çš„åŸºäº Gibbs é‡‡æ ·çš„ä¸»é¢˜æ¨¡å‹åº“ã€‚æ”¯æŒçš„ä¸»é¢˜æ¨¡å‹åŒ…æ‹¬ LDAã€DMRã€HDPã€MG-LDAã€PA å’Œ HPAï¼Œ åˆ©ç”¨ç°ä»£ CPU çš„çŸ¢é‡åŒ–æ¥æœ€å¤§åŒ–é€Ÿåº¦ã€‚</p>
<p><a href="https://github.com/bab2min/tomotopy">https://github.com/bab2min/tomotopy</a></p>
<p><strong>ä¸‹å›¾ä¸­åŒæ ·çš„æ•°æ®é›†ï¼Œ tomotopyè¿­ä»£200æ¬¡ï¼Œgensimè¿­ä»£10æ¬¡çš„æƒ…å†µä¸‹ï¼Œ tomotopyä¸gensimè€—æ—¶å¯¹æ¯”å›¾ï¼Œç”±æ­¤å¯è§tomotopyè®­ç»ƒä¸»é¢˜æ¨¡å‹é€Ÿåº¦ä¹‹å¿«ã€‚</strong>
<img loading="lazy" src="img/TomotopyVsGensim.png" alt=""  />
</p>
<p>å½“å‰ç‰ˆæœ¬çš„ tomotopy æ”¯æŒçš„ä¸»é¢˜æ¨¡å‹åŒ…æ‹¬</p>
<ul>
<li>æ½œåœ¨ç‹„åˆ©å…‹é›·åˆ†é…ï¼ˆLDAModelï¼‰</li>
<li>æ ‡è®°çš„ LDAï¼ˆLLDA æ¨¡å‹ï¼‰</li>
<li>éƒ¨åˆ†æ ‡è®°çš„ LDAï¼ˆPLDA æ¨¡å‹ï¼‰</li>
<li>ç›‘ç£LDAï¼ˆSLDAæ¨¡å‹ï¼‰</li>
<li>Dirichlet å¤šé¡¹å›å½’ (DMRModel)</li>
<li>å¹¿ä¹‰ç‹„åˆ©å…‹é›·å¤šé¡¹å›å½’ (GDMRModel)</li>
<li>åˆ†å±‚ç‹„åˆ©å…‹é›·è¿‡ç¨‹ (HDPModel)</li>
<li>åˆ†å±‚LDAï¼ˆHLDAæ¨¡å‹ï¼‰</li>
<li>å¤šç²’ LDAï¼ˆMGLDA æ¨¡å‹ï¼‰</li>
<li>å¼¹ç ç›˜åˆ†é…ï¼ˆPAModelï¼‰</li>
<li>åˆ†å±‚ PA (HPAModel)</li>
<li>ç›¸å…³ä¸»é¢˜æ¨¡å‹ï¼ˆCTModelï¼‰</li>
<li>åŠ¨æ€ä¸»é¢˜æ¨¡å‹ (DTModel)</li>
<li>åŸºäºä¼ªæ–‡æ¡£çš„ä¸»é¢˜æ¨¡å‹ï¼ˆPTModelï¼‰ã€‚</li>
</ul>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">tomotopy</span><span class="o">==</span><span class="mf">0.12.2</span>
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">pyLDAvis</span><span class="o">==</span><span class="mf">3.3.1</span>  
</code></pre></div><p>ç›®å‰ï¼Œtomotopy å¯ä»¥åˆ©ç”¨ AVX2ã€AVX æˆ– SSE2 SIMD æŒ‡ä»¤é›†æ¥æœ€å¤§ç¨‹åº¦åˆ©ç”¨PCçš„æ€§èƒ½ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">tomotopy</span> <span class="k">as</span> <span class="nn">tp</span>

<span class="n">tp</span><span class="o">.</span><span class="n">isa</span>
</code></pre></div><p>Run</p>
<pre><code>'avx2'
</code></pre>
<p>å¦‚æœ tp.isa è¿”å› Noneï¼Œåˆ™è®­ç»ƒè¿‡ç¨‹å¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´ã€‚</p>
<br>
<h2 id="1-å¯¼å…¥æ•°æ®">1. å¯¼å…¥æ•°æ®</h2>
<p>å‡†å¤‡ä¸€ä¸ªè‡ªå·±å¾ˆç†Ÿæ‚‰çš„æ•°æ®disaster_news.csvï¼Œä¸€å…±æœ‰332æ¡ï¼Œè¯é¢˜æ•°K=5ï¼Œï¼ˆæ­£å¸¸æƒ…å†µä¸‹Kæ˜¯éœ€è¦æ¢ç´¢çš„ï¼‰ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;disaster_news.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p><img loading="lazy" src="img/df1.png" alt=""  />
</p>
<br>
<h2 id="2-æ•´ç†æ•°æ®">2. æ•´ç†æ•°æ®</h2>
<p>åˆ†è¯ã€å»é™¤åœç”¨è¯</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">jieba</span>
<span class="kn">from</span> <span class="nn">cntext</span> <span class="kn">import</span> <span class="n">STOPWORDS_zh</span>


<span class="k">def</span> <span class="nf">segment</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">jieba</span><span class="o">.</span><span class="n">lcut</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span> <span class="k">if</span> <span class="n">w</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">STOPWORDS_zh</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">words</span>

<span class="n">test</span> <span class="o">=</span> <span class="s2">&#34;äº‘å—æ°¸å–„å¿çº§åœ°éœ‡å·²è‡´äººä¼¤é—´æ°‘æˆ¿å—æŸä¸­æ–°ç½‘æœˆæ—¥ç”µæ®äº‘å—æ˜­é€šå¸‚é˜²éœ‡å‡ç¾å±€å®˜æ–¹ç½‘ç«™æ¶ˆæ¯æˆªè‡³æ—¥æ—¶äº‘å—æ˜­é€šæ°¸å–„å¿çº§åœ°éœ‡å·²é€ æˆäººå—ä¼¤å…¶ä¸­é‡ä¼¤äººè½»ä¼¤äººå·²å…¨éƒ¨é€åŒ»é™¢æ•‘æ²»æ°‘æˆ¿å—æŸæˆ·é—´å€’å¡Œæˆ·é—´ä¸ªä¹¡é•‡æ‰€å­¦æ ¡ä¸åŒç¨‹åº¦å—æŸç›®å‰è¢«æŸæ¯ç”µåŠ›äº¤é€šé€šè®¯è®¾æ–½å·²å…¨éƒ¨æŠ¢é€šä¿®å¤å½“åœ°å·²è°ƒæ‹¨å¸ç¯·é¡¶ç´§æ€¥è½¬ç§»ä¸‡äººæœˆæ—¥æ—¶åˆ†äº‘å—æ˜­é€šæ°¸å–„å¿å‘ç”Ÿé‡Œæ°çº§åœ°éœ‡éœ‡æºæ·±åº¦å…¬é‡Œå½“åœ°éœ‡æ„Ÿå¼ºçƒˆæ­¤å¤–æˆéƒ½ç­‰å››å·å¤šåœ°ä¹Ÿæœ‰æ˜æ˜¾éœ‡æ„Ÿ&#34;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">segment</span><span class="p">(</span><span class="n">test</span><span class="p">))</span>
</code></pre></div><pre><code>['äº‘å—', 'æ°¸å–„å¿', 'çº§', 'åœ°éœ‡', 'å·²è‡´', 'ä¼¤é—´', 'æ°‘æˆ¿', 'å—æŸ', 'ä¸­æ–°ç½‘', 'æ—¥ç”µ', 'äº‘å—', 'æ˜­é€šå¸‚', 'é˜²éœ‡', 'å‡ç¾', 'å±€', 'å®˜æ–¹ç½‘ç«™', 'æ¶ˆæ¯', 'æ—¥æ—¶', 'äº‘å—', 'æ˜­é€š', 'æ°¸å–„å¿', 'çº§', 'åœ°éœ‡', 'é€ æˆ', 'å—ä¼¤', 'é‡ä¼¤', 'è½»ä¼¤', 'é€', 'åŒ»é™¢', 'æ•‘æ²»', 'æ°‘æˆ¿', 'å—æŸ', 'æˆ·é—´', 'å€’å¡Œ', 'æˆ·é—´', 'ä¹¡é•‡', 'å­¦æ ¡', 'ä¸åŒ', 'ç¨‹åº¦', 'å—æŸ', 'ç›®å‰', 'æŸæ¯', 'ç”µåŠ›', 'äº¤é€š', 'é€šè®¯', 'è®¾æ–½', 'æŠ¢é€š', 'ä¿®å¤', 'è°ƒæ‹¨', 'å¸ç¯·', 'é¡¶', 'ç´§æ€¥', 'è½¬ç§»', 'ä¸‡äºº', 'æ—¶åˆ†', 'äº‘å—', 'æ˜­é€š', 'æ°¸å–„å¿', 'å‘ç”Ÿ', 'é‡Œæ°', 'çº§', 'åœ°éœ‡', 'éœ‡æº', 'æ·±åº¦', 'å…¬é‡Œ', 'éœ‡æ„Ÿ', 'å¼ºçƒˆ', 'æˆéƒ½', 'å››å·', 'å¤šåœ°', 'æ˜æ˜¾', 'éœ‡æ„Ÿ']
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="p">[</span><span class="s1">&#39;words&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p><img loading="lazy" src="img/df2.png" alt=""  />
</p>
<br>
<h2 id="3-æ‰¾åˆ°æœ€ä½³k">3. æ‰¾åˆ°æœ€ä½³K</h2>
<p>æ­£å¸¸çš„æ­¥éª¤åº”è¯¥è®¤çœŸå¯¹å¾…è¿™æ­¥ï¼Œåœ¨ä¸€å®šåŒºé—´èŒƒå›´å†…ï¼Œæ ¹æ®æ¨¡å‹å¾—åˆ†æ‰¾åˆ°åˆç†çš„Kã€‚è¿™é‡Œä½¿ç”¨tomotopyæä¾›çš„ä¸»é¢˜ä¸€è‡´æ€§coherenceå¾—åˆ†å‡è£…æ‰¾ä¸€ä¸‹ã€‚</p>
<p>æˆ‘ä»¬æœŸæœ›çš„å›¾åº”è¯¥çš„topic coherenceéšç€ number of topicså¢åŠ è€Œå¢åŠ ï¼Œç„¶ååˆ°æŸä¸ªtopicå€¼è¶‹äºå¹³ç¨³ã€‚</p>
<p>tomotopyæ¯æ¬¡è¿è¡Œå¾—åˆ°çš„å›¾å½¢çŠ¶ä¸ä¸€æ ·ï¼Œä¸ºäº†ä¿è¯è¿è¡Œç»“æœå…·æœ‰å¯æ¯”æ€§ï¼Œè®¾ç½®äº†éšæœºç§å­seedä¸º555ï¼Œä½ ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦æ”¹ä¸ºè‡ªå·±éœ€è¦çš„éšæœºçŠ¶æ€ã€‚(è¿™é‡Œæœ‰ç‚¹åƒç‚¼ä¸¹)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">find_k</span><span class="p">(</span><span class="n">docs</span><span class="p">,</span> <span class="n">min_k</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_k</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">min_df</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="c1">#min_df è¯è¯­æœ€å°‘å‡ºç°åœ¨2ä¸ªæ–‡æ¡£ä¸­</span>
    <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
    <span class="n">scores</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">min_k</span><span class="p">,</span> <span class="n">max_k</span><span class="p">):</span>
        <span class="c1">#seedéšæœºç§å­ï¼Œä¿è¯åœ¨å¤§é‚“è¿™é‡Œè¿è¡Œç»“æœä¸ä½ è¿è¡Œçš„ç»“æœä¸€æ ·</span>
        <span class="n">mdl</span> <span class="o">=</span> <span class="n">tp</span><span class="o">.</span><span class="n">LDAModel</span><span class="p">(</span><span class="n">min_df</span><span class="o">=</span><span class="n">min_df</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">555</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">words</span> <span class="ow">in</span> <span class="n">docs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">words</span><span class="p">:</span>
                <span class="n">mdl</span><span class="o">.</span><span class="n">add_doc</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>
        <span class="n">mdl</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
        <span class="n">coh</span> <span class="o">=</span> <span class="n">tp</span><span class="o">.</span><span class="n">coherence</span><span class="o">.</span><span class="n">Coherence</span><span class="p">(</span><span class="n">mdl</span><span class="p">)</span>
        <span class="n">scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coh</span><span class="o">.</span><span class="n">get_score</span><span class="p">())</span>

    <span class="c1">#x = list(range(min_k, max_k - 1))  # åŒºé—´æœ€å³ä¾§çš„å€¼ã€‚æ³¨æ„ï¼šä¸èƒ½å¤§äºmax_k</span>
    <span class="c1">#print(x)</span>
    <span class="c1">#print()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">min_k</span><span class="p">,</span> <span class="n">max_k</span><span class="p">),</span> <span class="n">scores</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&#34;number of topics&#34;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&#34;coherence&#34;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    
    
<span class="n">find_k</span><span class="p">(</span><span class="n">docs</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;words&#39;</span><span class="p">],</span> <span class="n">min_k</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_k</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">min_df</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div><p><img loading="lazy" src="img/output_11_0.png" alt="png"  />
</p>
<br>
<h2 id="4-è®­ç»ƒlda">4. è®­ç»ƒlda</h2>
<p>ä½¿ç”¨tomotopyçš„LDAæ¨¡å‹ï¼Œ è¯é¢˜æ•°K=5</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">tomotopy</span> <span class="k">as</span> <span class="nn">tp</span>

<span class="c1">#åˆå§‹åŒ–LDA</span>
<span class="n">mdl</span> <span class="o">=</span> <span class="n">tp</span><span class="o">.</span><span class="n">LDAModel</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">min_df</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">555</span><span class="p">)</span>
<span class="k">for</span> <span class="n">words</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;words&#39;</span><span class="p">]:</span>
    <span class="c1">#ç¡®è®¤words æ˜¯ éç©ºè¯è¯­åˆ—è¡¨</span>
    <span class="k">if</span> <span class="n">words</span><span class="p">:</span>
        <span class="n">mdl</span><span class="o">.</span><span class="n">add_doc</span><span class="p">(</span><span class="n">words</span><span class="o">=</span><span class="n">words</span><span class="p">)</span>

<span class="c1">#è®­ç»ƒ</span>
<span class="n">mdl</span><span class="o">.</span><span class="n">train</span><span class="p">()</span>

<span class="c1">#æŸ¥çœ‹æ¯ä¸ªtopic feature words</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">mdl</span><span class="o">.</span><span class="n">k</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Top 10 words of topic #</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">mdl</span><span class="o">.</span><span class="n">get_topic_words</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">top_n</span><span class="o">=</span><span class="mi">10</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">    Top 10 words of topic #0
    [(&#39;ä¸€è¾†&#39;, 0.02751251682639122), (&#39;äº‹æ•…&#39;, 0.021704642102122307), (&#39;è®°è€…&#39;, 0.018342189490795135), (&#39;æ­»äº¡&#39;, 0.01650812290608883), (&#39;é€ æˆ&#39;, 0.014062701724469662), (&#39;äººå‘˜&#39;, 0.013909862376749516), (&#39;ç°åœº&#39;, 0.013451346196234226), (&#39;å—ä¼¤&#39;, 0.012687151320278645), (&#39;ç›¸æ’&#39;, 0.011922957375645638), (&#39;è´§è½¦&#39;, 0.011922957375645638)]


â€‹    
â€‹    Top 10 words of topic #1
â€‹    [(&#39;å­¦ç”Ÿ&#39;, 0.02709135226905346), (&#39;é£Ÿç‰©ä¸­æ¯’&#39;, 0.02498047426342964), (&#39;å‡ºç°&#39;, 0.019175563007593155), (&#39;åŒ»é™¢&#39;, 0.016185153275728226), (&#39;äº‹ä»¶&#39;, 0.013546556234359741), (&#39;è°ƒæŸ¥&#39;, 0.013194743543863297), (&#39;å¹´æœˆæ—¥&#39;, 0.012842929922044277), (&#39;æ²»ç–—&#39;, 0.012667023576796055), (&#39;ç—‡çŠ¶&#39;, 0.011787491850554943), (&#39;å&#39;, 0.011259771883487701)]


â€‹    
â€‹    Top 10 words of topic #2
â€‹    [(&#39;ç°åœº&#39;, 0.018848909065127373), (&#39;å‘ç”Ÿ&#39;, 0.01677251048386097), (&#39;åŒ»é™¢&#39;, 0.015015557408332825), (&#39;èµ·ç«&#39;, 0.014216942712664604), (&#39;åŸå› &#39;, 0.012140544131398201), (&#39;ç›®å‰&#39;, 0.012140544131398201), (&#39;æ•‘æ²»&#39;, 0.01150165218859911), (&#39;è¿›è¡Œ&#39;, 0.011022482998669147), (&#39;å&#39;, 0.009425252676010132), (&#39;ç«åŠ¿&#39;, 0.009265529923141003)]


â€‹    
â€‹    Top 10 words of topic #3
â€‹    [(&#39;å‘ç”Ÿ&#39;, 0.03348556533455849), (&#39;çˆ†ç‚¸&#39;, 0.022389251738786697), (&#39;é€ æˆ&#39;, 0.019663840532302856), (&#39;æ­»äº¡&#39;, 0.01713310182094574), (&#39;å—ä¼¤&#39;, 0.016938429325819016), (&#39;å¹´æœˆæ—¥&#39;, 0.016354413703083992), (&#39;è½¿è½¦&#39;, 0.012655640952289104), (&#39;è­¦æ–¹&#39;, 0.012460969388484955), (&#39;è¢­å‡»&#39;, 0.012266295962035656), (&#39;äº‹ä»¶&#39;, 0.011487606912851334)]


â€‹    
â€‹    Top 10 words of topic #4
â€‹    [(&#39;åœ°éœ‡&#39;, 0.047826822847127914), (&#39;å‘ç”Ÿ&#39;, 0.03555167838931084), (&#39;ç«ç¾&#39;, 0.03140682727098465), (&#39;æ—¶åˆ†&#39;, 0.020885275676846504), (&#39;çº§&#39;, 0.015783920884132385), (&#39;æ—¶é—´&#39;, 0.013870910741388798), (&#39;å…¬é‡Œ&#39;, 0.013711493462324142), (&#39;äººå‘˜ä¼¤äº¡&#39;, 0.013073823414742947), (&#39;è®°è€…&#39;, 0.013073823414742947), (&#39;éœ‡æ„Ÿ&#39;, 0.012276736088097095)]
</code></pre></div><br>
<p>æŸ¥çœ‹è¯é¢˜æ¨¡å‹ä¿¡æ¯</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">mdl</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="w">
</span><span class="w">    </span><span class="o">&lt;</span><span class="n">Basic</span><span class="w"> </span><span class="n">Info</span><span class="o">&gt;</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nf">LDAModel</span><span class="w"> </span><span class="p">(</span><span class="n">current</span><span class="w"> </span><span class="n">version</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">12</span><span class="p">.</span><span class="mi">2</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">332</span><span class="w"> </span><span class="n">docs</span><span class="p">,</span><span class="w"> </span><span class="mi">29749</span><span class="w"> </span><span class="n">words</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Total</span><span class="w"> </span><span class="n">Vocabs</span><span class="p">:</span><span class="w"> </span><span class="mi">8428</span><span class="p">,</span><span class="w"> </span><span class="n">Used</span><span class="w"> </span><span class="n">Vocabs</span><span class="p">:</span><span class="w"> </span><span class="mi">2984</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Entropy</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">words</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">.</span><span class="mi">10665</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Entropy</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">term</span><span class="o">-</span><span class="n">weighted</span><span class="w"> </span><span class="n">words</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">.</span><span class="mi">10665</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Removed</span><span class="w"> </span><span class="n">Vocabs</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">NA</span><span class="o">&gt;</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w">    </span><span class="o">&lt;</span><span class="n">Training</span><span class="w"> </span><span class="n">Info</span><span class="o">&gt;</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Iterations</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">Burn</span><span class="o">-</span><span class="k">in</span><span class="w"> </span><span class="n">steps</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Optimization</span><span class="w"> </span><span class="k">Interval</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Log</span><span class="o">-</span><span class="n">likelihood</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">word</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mi">7</span><span class="p">.</span><span class="mi">79934</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w">    </span><span class="o">&lt;</span><span class="n">Initial</span><span class="w"> </span><span class="n">Parameters</span><span class="o">&gt;</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">tw</span><span class="p">:</span><span class="w"> </span><span class="n">TermWeight</span><span class="p">.</span><span class="n">ONE</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">min_cf</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="n">minimum</span><span class="w"> </span><span class="n">collection</span><span class="w"> </span><span class="n">frequency</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">words</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">min_df</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="n">minimum</span><span class="w"> </span><span class="n">document</span><span class="w"> </span><span class="n">frequency</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">words</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">rm_top</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="n">the</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">top</span><span class="w"> </span><span class="n">words</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">removed</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">k</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="p">(</span><span class="n">the</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">topics</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="mi">32767</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">alpha</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="n">hyperparameter</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">Dirichlet</span><span class="w"> </span><span class="n">distribution</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">document</span><span class="o">-</span><span class="n">topic</span><span class="p">,</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="o">`</span><span class="kt">float</span><span class="o">`</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">symmetric</span><span class="w"> </span><span class="n">prior</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="o">`</span><span class="n">k</span><span class="o">`</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="o">`</span><span class="kt">float</span><span class="o">`</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">asymmetric</span><span class="w"> </span><span class="n">prior</span><span class="p">.)</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">eta</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="p">(</span><span class="n">hyperparameter</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">Dirichlet</span><span class="w"> </span><span class="n">distribution</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">topic</span><span class="o">-</span><span class="n">word</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">seed</span><span class="p">:</span><span class="w"> </span><span class="mi">555</span><span class="w"> </span><span class="p">(</span><span class="n">random</span><span class="w"> </span><span class="n">seed</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">trained</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">12</span><span class="p">.</span><span class="mi">2</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w">    </span><span class="o">&lt;</span><span class="n">Parameters</span><span class="o">&gt;</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nf">alpha</span><span class="w"> </span><span class="p">(</span><span class="n">Dirichlet</span><span class="w"> </span><span class="n">prior</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">per</span><span class="o">-</span><span class="n">document</span><span class="w"> </span><span class="n">topic</span><span class="w"> </span><span class="n">distributions</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w">  </span><span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">7143365</span><span class="w">  </span><span class="mi">0</span><span class="p">.</span><span class="mi">6852513</span><span class="w">  </span><span class="mi">0</span><span class="p">.</span><span class="mi">75089616</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">6204677</span><span class="w">  </span><span class="mi">0</span><span class="p">.</span><span class="mi">7040125</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nf">eta</span><span class="w"> </span><span class="p">(</span><span class="n">Dirichlet</span><span class="w"> </span><span class="n">prior</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">per</span><span class="o">-</span><span class="n">topic</span><span class="w"> </span><span class="n">word</span><span class="w"> </span><span class="n">distribution</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w">  </span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w">    </span><span class="o">&lt;</span><span class="n">Topics</span><span class="o">&gt;</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="c1">#0 (6513) : ä¸€è¾† äº‹æ•… è®°è€… æ­»äº¡ é€ æˆ
</span><span class="c1"></span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="c1">#1 (5655) : å­¦ç”Ÿ é£Ÿç‰©ä¸­æ¯’ å‡ºç° åŒ»é™¢ äº‹ä»¶
</span><span class="c1"></span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="c1">#2 (6231) : ç°åœº å‘ç”Ÿ åŒ»é™¢ èµ·ç« åŸå› 
</span><span class="c1"></span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="c1">#3 (5107) : å‘ç”Ÿ çˆ†ç‚¸ é€ æˆ æ­»äº¡ å—ä¼¤
</span><span class="c1"></span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="c1">#4 (6243) : åœ°éœ‡ å‘ç”Ÿ ç«ç¾ æ—¶åˆ† çº§
</span></code></pre></div><h3 id="topicè§£è¯»">topicè§£è¯»</h3>
<p>æ ¹æ®æ¯ä¸ªè¯é¢˜top10çš„ç‰¹å¾è¯ï¼Œ5ä¸ªè¯é¢˜è§£è¯»ä¸º</p>
<ul>
<li>äº¤é€šäº‹æ•…| #0 (6513) : ä¸€è¾† äº‹æ•… è®°è€… æ­»äº¡ é€ æˆ</li>
<li>é£Ÿå“å®‰å…¨| #1 (5655) : å­¦ç”Ÿ é£Ÿç‰©ä¸­æ¯’ å‡ºç° åŒ»é™¢ äº‹ä»¶</li>
<li>ç«ç¾æ–°é—»| #2 (6231) : ç°åœº å‘ç”Ÿ åŒ»é™¢ èµ·ç« åŸå› </li>
<li>ææ€–è¢­å‡»| #3 (5107) : å‘ç”Ÿ çˆ†ç‚¸ é€ æˆ æ­»äº¡ å—ä¼¤</li>
<li>åœ°éœ‡ç¾å®³| #4 (6243) : åœ°éœ‡ å‘ç”Ÿ ç«ç¾ æ—¶åˆ† çº§</li>
</ul>
<br>
<h2 id="5-å¯è§†åŒ–">5. å¯è§†åŒ–</h2>
<p>ä½¿ç”¨pyLDAvis</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pyLDAvis</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">Warning</span><span class="p">)</span>

<span class="c1">#åœ¨notebookæ˜¾ç¤º</span>
<span class="n">pyLDAvis</span><span class="o">.</span><span class="n">enable_notebook</span><span class="p">()</span>

<span class="c1">#è·å–pyldaviséœ€è¦çš„å‚æ•°</span>
<span class="n">topic_term_dists</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">([</span><span class="n">mdl</span><span class="o">.</span><span class="n">get_topic_word_dist</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">mdl</span><span class="o">.</span><span class="n">k</span><span class="p">)])</span>
<span class="n">doc_topic_dists</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">([</span><span class="n">doc</span><span class="o">.</span><span class="n">get_topic_dist</span><span class="p">()</span> <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">mdl</span><span class="o">.</span><span class="n">docs</span><span class="p">])</span>
<span class="n">doc_topic_dists</span> <span class="o">/=</span> <span class="n">doc_topic_dists</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">keepdims</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">doc_lengths</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">words</span><span class="p">)</span> <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">mdl</span><span class="o">.</span><span class="n">docs</span><span class="p">])</span>
<span class="n">vocab</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">mdl</span><span class="o">.</span><span class="n">used_vocabs</span><span class="p">)</span>
<span class="n">term_frequency</span> <span class="o">=</span> <span class="n">mdl</span><span class="o">.</span><span class="n">used_vocab_freq</span>


<span class="n">prepared_data</span> <span class="o">=</span> <span class="n">pyLDAvis</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span>
    <span class="n">topic_term_dists</span><span class="p">,</span> 
    <span class="n">doc_topic_dists</span><span class="p">,</span> 
    <span class="n">doc_lengths</span><span class="p">,</span> 
    <span class="n">vocab</span><span class="p">,</span> 
    <span class="n">term_frequency</span><span class="p">,</span>
    <span class="n">start_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="c1"># tomotopyè¯é¢˜idä»0å¼€å§‹ï¼ŒpyLDAvisè¯é¢˜idä»1å¼€å§‹</span>
    <span class="n">sort_topics</span><span class="o">=</span><span class="kc">False</span> <span class="c1">#æ³¨æ„ï¼šå¦åˆ™pyLDAvisä¸tomotopyå†…çš„è¯é¢˜æ— æ³•ä¸€ä¸€å¯¹åº”ã€‚ </span>
<span class="p">)</span>


<span class="c1">#å¯è§†åŒ–ç»“æœå­˜åˆ°htmlæ–‡ä»¶ä¸­</span>
<span class="c1">#pyLDAvis.save_html(prepared_data, &#39;ldavis.html&#39;)</span>

<span class="c1">#notebookä¸­æ˜¾ç¤º</span>
<span class="n">pyLDAvis</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">prepared_data</span><span class="p">)</span>
</code></pre></div><p><img loading="lazy" src="img/ldavis.png" alt=""  />
</p>
<br>
<h2 id="6-é¢„æµ‹">6. é¢„æµ‹</h2>
<p>é¢„æµ‹æŸæ–‡æ¡£çš„è¯é¢˜</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">jieba</span>
<span class="kn">from</span> <span class="nn">cntext</span> <span class="kn">import</span> <span class="n">STOPWORDS_zh</span>

<span class="c1">#é¢„æµ‹</span>
<span class="n">doc</span> <span class="o">=</span> <span class="s1">&#39;äº‘å—æ°¸å–„å¿çº§åœ°éœ‡å·²è‡´ä¼¤é—´æ°‘æˆ¿å—æŸä¸­æ–°ç½‘æ—¥ç”µäº‘å—æ˜­é€šå¸‚é˜²éœ‡å‡ç¾å±€å®˜æ–¹ç½‘ç«™æ¶ˆæ¯æ—¥æ—¶äº‘å—æ˜­é€šæ°¸å–„å¿çº§åœ°éœ‡é€ æˆå—ä¼¤é‡ä¼¤è½»ä¼¤é€åŒ»é™¢æ•‘æ²»æ°‘æˆ¿å—æŸæˆ·é—´å€’å¡Œæˆ·é—´ä¹¡é•‡å­¦æ ¡ä¸åŒç¨‹åº¦å—æŸç›®å‰æŸæ¯ç”µåŠ›äº¤é€šé€šè®¯è®¾æ–½æŠ¢é€šä¿®å¤è°ƒæ‹¨å¸ç¯·é¡¶ç´§æ€¥è½¬ç§»ä¸‡äººæ—¶åˆ†äº‘å—æ˜­é€šæ°¸å–„å¿å‘ç”Ÿé‡Œæ°çº§åœ°éœ‡éœ‡æºæ·±åº¦å…¬é‡Œéœ‡æ„Ÿå¼ºçƒˆæˆéƒ½å››å·å¤šåœ°æ˜æ˜¾éœ‡æ„Ÿ&#39;</span>
<span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">jieba</span><span class="o">.</span><span class="n">lcut</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span> <span class="k">if</span> <span class="n">w</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">STOPWORDS_zh</span><span class="p">]</span>

<span class="c1">#æ„é€ tomotopyéœ€è¦çš„æ•°æ®</span>
<span class="n">doc_inst</span> <span class="o">=</span> <span class="n">mdl</span><span class="o">.</span><span class="n">make_doc</span><span class="p">(</span><span class="n">words</span><span class="o">=</span><span class="n">words</span><span class="p">)</span>
<span class="n">topic_dist</span><span class="p">,</span> <span class="n">ll</span> <span class="o">=</span> <span class="n">mdl</span><span class="o">.</span><span class="n">infer</span><span class="p">(</span><span class="n">doc_inst</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Topic Distribution for Unseen Docs: &#34;</span><span class="p">,</span> <span class="n">topic_dist</span><span class="p">)</span>

</code></pre></div><pre><code>Topic Distribution for Unseen Docs:  [0.11645161 0.10240361 0.5342029  0.03622254 0.21071935]
</code></pre>
<p>åˆ—è¡¨é•¿åº¦ä¸º5ï¼Œ åˆ—è¡¨ç¬¬ä¸‰ä¸ªæ•°å€¼(topic #2)æ•°å€¼æœ€å¤§ï¼Œè¯¥æ–‡æœ¬æœ€å¤§çš„å¯èƒ½æ€§æ˜¯topic #2</p>
<br>
<h2 id="è¡¥å……-æŒ‡å®šä¸»é¢˜ç‰¹å¾è¯">è¡¥å……: æŒ‡å®šä¸»é¢˜ç‰¹å¾è¯</h2>
<p>å¦‚æœå¯¹æ•°æ®æ¯”è¾ƒäº†è§£ï¼Œå·²ç»çŸ¥é“æœ‰ä¸€äº›ä¸»é¢˜ï¼Œå¯ä»¥æŠŠæ¯”è¾ƒæ˜æ˜¾çš„è¯è¯­åˆ†é…ç»™æŒ‡å®šçš„topic_idã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">mdl</span> <span class="o">=</span> <span class="n">tp</span><span class="o">.</span><span class="n">LDAModel</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">min_df</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">555</span><span class="p">)</span>

<span class="k">for</span> <span class="n">words</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;words&#39;</span><span class="p">]:</span>
    <span class="k">if</span> <span class="n">words</span><span class="p">:</span>
        <span class="n">mdl</span><span class="o">.</span><span class="n">add_doc</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>

<span class="c1">#æŠŠwordç›¸æ’ åˆ†é…ç»™topic_0, æƒé‡è®¾ç½®ä¸º1ï¼Œ å…¶ä»–topicæƒé‡è®¾ç½®ä¸º0.1</span>
<span class="c1">#æ³¨æ„è¿™é‡Œçš„range(5) 5æ˜¯å¯¹åº”çš„kå€¼</span>
<span class="n">mdl</span><span class="o">.</span><span class="n">set_word_prior</span><span class="p">(</span><span class="s1">&#39;ç›¸æ’&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.0</span> <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="mf">0.1</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)])</span>
<span class="c1">#æŠŠwordåœ°éœ‡ åˆ†é…ç»™topic_1, æƒé‡è®¾ç½®ä¸º1ï¼Œ å…¶ä»–topicæƒé‡è®¾ç½®ä¸º0.1</span>
<span class="n">mdl</span><span class="o">.</span><span class="n">set_word_prior</span><span class="p">(</span><span class="s1">&#39;åœ°éœ‡&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.0</span> <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="mf">0.1</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)])</span>
<span class="c1">#æŠŠwordç«ç¾ åˆ†é…ç»™topic_2, æƒé‡è®¾ç½®ä¸º1ï¼Œ å…¶ä»–topicæƒé‡è®¾ç½®ä¸º0.1</span>
<span class="n">mdl</span><span class="o">.</span><span class="n">set_word_prior</span><span class="p">(</span><span class="s1">&#39;ç«ç¾&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.0</span> <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">2</span> <span class="k">else</span> <span class="mf">0.1</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)])</span>
<span class="c1">#æŠŠwordä¸­æ¯’ åˆ†é…ç»™topic_3, æƒé‡è®¾ç½®ä¸º1ï¼Œ å…¶ä»–topicæƒé‡è®¾ç½®ä¸º0.1</span>
<span class="n">mdl</span><span class="o">.</span><span class="n">set_word_prior</span><span class="p">(</span><span class="s1">&#39;ä¸­æ¯’&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.0</span> <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">3</span> <span class="k">else</span> <span class="mf">0.1</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)])</span>
<span class="c1">#æŠŠwordè¢­å‡» åˆ†é…ç»™topic_4, æƒé‡è®¾ç½®ä¸º1ï¼Œ å…¶ä»–topicæƒé‡è®¾ç½®ä¸º0.1</span>
<span class="n">mdl</span><span class="o">.</span><span class="n">set_word_prior</span><span class="p">(</span><span class="s1">&#39;è¢­å‡»&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.0</span> <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="mf">0.1</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)])</span>

<span class="n">mdl</span><span class="o">.</span><span class="n">train</span><span class="p">()</span>
<span class="n">mdl</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>  
</code></pre></div><pre><code>&lt;Basic Info&gt;
| LDAModel (current version: 0.12.2)
| 332 docs, 29749 words
| Total Vocabs: 8428, Used Vocabs: 2984
| Entropy of words: 7.10665
| Entropy of term-weighted words: 7.10665
| Removed Vocabs: &lt;NA&gt;
|
&lt;Training Info&gt;
| Iterations: 10, Burn-in steps: 0
| Optimization Interval: 10
| Log-likelihood per word: -7.72251
|
&lt;Initial Parameters&gt;
| tw: TermWeight.ONE
| min_cf: 0 (minimum collection frequency of words)
| min_df: 2 (minimum document frequency of words)
| rm_top: 0 (the number of top words to be removed)
| k: 5 (the number of topics between 1 ~ 32767)
| alpha: [0.1] (hyperparameter of Dirichlet distribution for document-topic, given as a single `float` in case of symmetric prior and as a list with length `k` of `float` in case of asymmetric prior.)
| eta: 0.01 (hyperparameter of Dirichlet distribution for topic-word)
| seed: 555 (random seed)
| trained in version 0.12.2
|
&lt;Parameters&gt;
| alpha (Dirichlet prior on the per-document topic distributions)
|  [0.7106193  0.60264444 0.5734784  0.71375024 0.6234263 ]
| eta (Dirichlet prior on the per-topic word distribution)
|  0.01
|
&lt;Topics&gt;
| #0 (6599) : ä¸€è¾† äº‹æ•… æ­»äº¡ å‘ç”Ÿ é€ æˆ
| #1 (6087) : åœ°éœ‡ å‘ç”Ÿ çº§ å…¬é‡Œ å¹´æœˆæ—¥
| #2 (5892) : ç«ç¾ å‘ç”Ÿ ç°åœº å¤§ç« èµ·ç«
| #3 (6402) : åŒ»é™¢ å­¦ç”Ÿ é£Ÿç‰©ä¸­æ¯’ å‡ºç° å
| #4 (4769) : äº‹ä»¶ å‘ç”Ÿ è¢­å‡» äººå‘˜ å·¥ä½œ
|
</code></pre>
<br>
<h2 id="æ–‡æœ¬åˆ†æè¯¾">æ–‡æœ¬åˆ†æè¯¾</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
<p><a href="https://hidadeng.github.io/blog/2022workshop/"><img loading="lazy" src="img/workshop.png" alt="å¯’å‡å·¥ä½œåŠ"  />
</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Stargazeråº“ |  åˆ›å»ºæ¼‚äº®å¯å‘è¡¨çš„å¤šå…ƒå›å½’è¡¨</title>
      <link>https://hidadeng.github.io/blog/stargazer/</link>
      <pubDate>Sun, 02 Jan 2022 20:43:10 +0600</pubDate>
      
      <guid>/blog/stargazer/</guid>
      <description>å¯ç”¨äºåˆ›å»ºæ¼‚äº®çš„ã€å¯å‘è¡¨çš„å¤šå…ƒå›å½’è¡¨</description>
      <content:encoded><![CDATA[<h2 id="ä»£ç ä¸‹è½½stargazer_examplesipynb"><a href="Stargazer_examples.ipynb">ä»£ç ä¸‹è½½</a></h2>
<br>
<h2 id="stargazeråº“ä»‹ç»">Stargazeråº“ä»‹ç»</h2>
<p>Rè¯­è¨€æœ‰ä¸€ä¸ªstargazeråŒ…ï¼Œå¯ç”¨äºåˆ›å»ºæ¼‚äº®çš„ã€å¯å‘è¡¨çš„å¤šå…ƒå›å½’è¡¨ã€‚å¦‚ä»Šæœ‰PythonåŒ–çš„stargazeråº“ä¹Ÿå¯åšç±»ä¼¼çš„äº‹ã€‚</p>
<p>ä¸‹å›¾æ˜¯ä½¿ç”¨stargazerç”Ÿæˆçš„æ²¡æœ‰ä»»ä½•æ ·å¼çš„åŸå§‹ç¤ºä¾‹çš„ç¤ºä¾‹ï¼š</p>

<figure >
    
        <img src="img/latex_example.png" width="800" />
    
    
</figure>

<br>
<h2 id="ä»€ä¹ˆæ—¶å€™ä¼šç”¨åˆ°è¿™äº›">ä»€ä¹ˆæ—¶å€™ä¼šç”¨åˆ°è¿™äº›ï¼Ÿ</h2>
<p>äººä»¬å€¾å‘äºä½¿ç”¨Rç‰ˆæœ¬çš„stargazerçš„ä¸»è¦æƒ…å†µæ˜¯åœ¨å­¦æœ¯è®ºæ–‡ä¸­æŠ¥å‘Šå›å½’ç»“æœã€‚ å®ƒå…è®¸æ‚¨è½»æ¾åœ°æ¯”è¾ƒå¤šä¸ªå›å½’ç»“æœï¼Œè¿™æœ‰åŠ©äºæ¯”è¾ƒå…·æœ‰å®éªŒå½±å“çš„æ¨¡å‹ä¸æ²¡æœ‰å½±å“çš„æ¨¡å‹ä¹‹é—´çš„ç»“æœã€‚ è¿™å…è®¸ç”¨æˆ·è½»æ¾æŸ¥çœ‹ç³»æ•°çš„å·®å¼‚ã€ç»Ÿè®¡æ˜¾ç€æ€§ä»¥åŠå®éªŒå¼•å…¥çš„æ–°å˜é‡çš„å½±å“ã€‚</p>
<p>å®ƒç›®å‰æ”¯æŒ LaTeX å’Œ HTML è¾“å‡ºï¼Œstargazerå¼€å‘è€…æœ€ç»ˆæœ€è¡¨æ˜¯ä¹Ÿæ”¯æŒ Markdown å’Œ ASCII æ–‡æœ¬ã€‚</p>
<br>
<h2 id="é¡¹ç›®åœ°å€">é¡¹ç›®åœ°å€</h2>
<p><a href="https://github.com/mwburke/stargazer">https://github.com/mwburke/stargazer</a></p>
<br>
è¯¥åº“å®ç°äº†åŸå§‹åŒ…ä¸­çš„è®¸å¤šè‡ªå®šä¹‰åŠŸèƒ½ã€‚å¤§å¤šæ•°ç¤ºä¾‹å¯ä»¥åœ¨ç¤ºä¾‹ jupyter notebook ä¸­æ‰¾åˆ°ï¼ŒåŠŸèƒ½å‡½æ•°å®Œæ•´åˆ—è¡¨å¦‚ä¸‹ï¼š
<h2 id="stargazeråº“çš„å‡½æ•°">Stargazeråº“çš„å‡½æ•°</h2>
<ul>
<li>show_headerï¼šæ˜¾ç¤ºæˆ–éšè—æ¨¡å‹å¤´æ•°æ®</li>
<li>show_model_numbersï¼šæ˜¾ç¤ºæˆ–éšè—å‹å·</li>
<li>custom_columnsï¼šè‡ªå®šä¹‰æ¨¡å‹åç§°å’Œæ¨¡å‹åˆ†ç»„</li>
<li>significance_levelsï¼šæ›´æ”¹ç»Ÿè®¡æ˜¾ç€æ€§é˜ˆå€¼</li>
<li>significant_digitsï¼šæ›´æ”¹æœ‰æ•ˆæ•°å­—çš„æ•°é‡</li>
<li>show_confidence_intervalsï¼šæ˜¾ç¤ºç½®ä¿¡åŒºé—´ï¼Œè€Œä¸æ˜¯æ–¹å·®</li>
<li>dependent_variable_nameï¼šé‡å‘½åå› å˜é‡</li>
<li>rename_covariates: é‡å‘½ååå˜é‡</li>
<li>covariate_orderï¼šé‡æ–°æ’åºåå˜é‡</li>
<li>reset_covariate_orderï¼šå°†åå˜é‡é¡ºåºé‡ç½®ä¸ºåŸå§‹é¡ºåº</li>
<li>show_degrees_of_freedomï¼šæ˜¾ç¤ºæˆ–éšè—è‡ªç”±åº¦</li>
<li>custom_note_labelï¼šè¡¨æ ¼åº•éƒ¨çš„æ ‡ç­¾æ³¨é‡Šéƒ¨åˆ†</li>
<li>add_custom_notesï¼šå°†è‡ªå®šä¹‰æ³¨é‡Šæ·»åŠ åˆ°è¡¨æ ¼åº•éƒ¨çš„éƒ¨åˆ†</li>
<li>add_lineï¼šå‘è¡¨æ ¼ä¸­æ·»åŠ è‡ªå®šä¹‰è¡Œ</li>
<li>append_notesï¼šæ˜¾ç¤ºæˆ–éšè—ç»Ÿè®¡æ˜¾ç€æ€§é˜ˆå€¼</li>
</ul>
<p>è¿™äº›åŠŸèƒ½ä¸æ¸²æŸ“ç±»å‹æ— å…³ï¼Œæ— è®ºç”¨æˆ·ä»¥ HTMLã€LaTeX ç­‰æ ¼å¼è¾“å‡ºéƒ½å°†åº”ç”¨</p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">stargazer</span>
</code></pre></div><br>
<h2 id="olså›å½’">OLSå›å½’</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">datasets</span>
<span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="nn">sm</span>
<span class="kn">from</span> <span class="nn">stargazer.stargazer</span> <span class="kn">import</span> <span class="n">Stargazer</span>

<span class="n">diabetes</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">load_diabetes</span><span class="p">()</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">diabetes</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="s1">&#39;Sex&#39;</span><span class="p">,</span> <span class="s1">&#39;BMI&#39;</span><span class="p">,</span> <span class="s1">&#39;ABP&#39;</span><span class="p">,</span> <span class="s1">&#39;S1&#39;</span><span class="p">,</span> <span class="s1">&#39;S2&#39;</span><span class="p">,</span> <span class="s1">&#39;S3&#39;</span><span class="p">,</span> <span class="s1">&#39;S4&#39;</span><span class="p">,</span> <span class="s1">&#39;S5&#39;</span><span class="p">,</span> <span class="s1">&#39;S6&#39;</span><span class="p">]</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">diabetes</span><span class="o">.</span><span class="n">target</span>

<span class="n">est</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">endog</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">],</span> <span class="n">exog</span><span class="o">=</span><span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]]))</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">est2</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">endog</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">],</span> <span class="n">exog</span><span class="o">=</span><span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">6</span><span class="p">]]))</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>

<span class="n">stargazer</span> <span class="o">=</span> <span class="n">Stargazer</span><span class="p">([</span><span class="n">est</span><span class="p">,</span> <span class="n">est2</span><span class="p">])</span>
</code></pre></div><pre><code>/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/statsmodels/tsa/tsatools.py:142: FutureWarning: In a future version of pandas all arguments of concat except for the argument 'objs' will be keyword-only
  x = pd.concat(x[::order], 1)
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#åˆ†æç»“æœæ¸²æŸ“æˆhtml</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">HTML</span>
<span class="n">raw_str</span> <span class="o">=</span> <span class="n">stargazer</span><span class="o">.</span><span class="n">render_html</span><span class="p">()</span>
<span class="n">html</span> <span class="o">=</span> <span class="n">HTML</span><span class="p">(</span><span class="n">raw_str</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/html_example.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#åˆ†æç»“æœæ¸²æŸ“æˆlatex</span>
<span class="n">stargazer</span><span class="o">.</span><span class="n">render_latex</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="img/latex_example.png" width="800" />
    
    
</figure>

<p><br><br></p>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>PNAS | æƒ…ä¾£åˆ†æ‰‹3ä¸ªæœˆå‰å°±æœ‰é¢„å…†ï¼èŠå¤©è®°å½•è¿˜èƒ½åæ˜ åˆ†æ‰‹åé—ç—‡</title>
      <link>https://hidadeng.github.io/blog/pnas_love_separate/</link>
      <pubDate>Sun, 02 Jan 2022 12:43:10 +0600</pubDate>
      
      <guid>/blog/pnas_love_separate/</guid>
      <description>å¥³å‹æå‡ºåˆ†æ‰‹ï¼Œä½ æ˜¯ä¸æ˜¯åæ‚”æ²¡æœ‰æ—©ç‚¹å¯Ÿè§‰ï¼Ÿè¿™ä¸ï¼Œå…³äºåˆ†æ‰‹å‰çš„èŠå¤©è®°å½•çš„æ–‡æœ¬åˆ†æï¼Œç§‘å­¦å®¶ç»™å‡ºäº†ç­”æ¡ˆã€‚</description>
      <content:encoded><![CDATA[<blockquote>
<p>å…¬ä¼—å·-æ–°æ™ºå…ƒ</p>
<p>ç¼–è¾‘: æ¡ƒå­ å°å’¸é±¼</p>
</blockquote>
<p>å¥³æœ‹å‹æå‡ºåˆ†æ‰‹ï¼Œä½ æ˜¯ä¸æ˜¯åæ‚”æ²¡æœ‰æ—©ç‚¹å¯Ÿè§‰ï¼Ÿ</p>
<p><strong>è¿™ä¸ï¼Œå¯¹äºåˆ†æ‰‹å‰çš„æœ‰å…³è¿¹è±¡ï¼Œç§‘å­¦å®¶ç»™å‡ºäº†ç­”æ¡ˆï¼šèŠå¤©è®°å½•ï¼</strong></p>
<br>
<p>è¿‘æ—¥ï¼Œç¾å›½å¾·å…‹è¨æ–¯å¤§å­¦çš„ç ”ç©¶äººå‘˜å‘è¡¨çš„ä¸€ç¯‡è®ºæ–‡è¡¨æ˜ï¼Œé€šè¿‡åˆ†ææƒ…ä¾£çš„èŠå¤©è®°å½•ï¼Œå¯ä»¥æ‰¾åˆ°æƒ…ä¾£å³å°†åˆ†æ‰‹çš„è¯æ®ã€‚</p>
<p>è¿™ç¯‡ Language left behind on social media exposes the emotional and cognitive costs of a romantic breakup å·²äº12æœˆ20æ—¥å‘è¡¨åœ¨å›½é™…é¡¶åˆŠPNASã€‚</p>
<p><img loading="lazy" src="img/pnas_love_home.png" alt=""  />
</p>
<p><strong>åˆ†æ‰‹å‰ä¸‰ä¸ªæœˆï¼ŒèŠå¤©ä¾¿ä¸æ­£å¸¸äº†</strong></p>
<p>åŸºäºå·²æœ‰çš„æ•°æ®ï¼Œç ”ç©¶äººå‘˜å¯¹6800åRedditç”¨æˆ·å‘å¸ƒçš„1027541ä¸ªå¸–å­è¿›è¡Œäº†æ–‡æœ¬åˆ†æã€‚</p>
<p><img loading="lazy" src="img/pnas_love_table.png" alt=""  />
</p>
<p>è¿™äº›å¸–å­æ¶µç›–äº†ç”¨æˆ·åœ¨è¿‡å»2å¹´é‡Œçš„Redditå‘å¸–æ•°æ®ï¼Œè¿™äº›å¸–å­çš„å†…å®¹ä¸ä»…ä»…ä¸ä»–ä»¬çš„æ„Ÿæƒ…å…³ç³»æœ‰å…³ï¼Œä¹Ÿæ¶µç›–äº†ä»–ä»¬ç”Ÿæ´»ä¸­å„ä¸ªæ–¹é¢çš„å†…å®¹ã€‚</p>
 <br>
<h2 id="è¯­è¨€æ ‡è®°">è¯­è¨€æ ‡è®°</h2>
<p>è¡¨ç¤ºã€Œå³å°†åˆ†æ‰‹ã€çš„ã€Œ<strong>è¯­è¨€æ ‡è®°</strong>ã€åœ¨åˆ†æ‰‹å‘ç”Ÿå‰3ä¸ªæœˆå‡ºç°çš„é¢‘æ¬¡éå¸¸é«˜ï¼Œåœ¨åˆ†æ‰‹çš„é‚£ä¸€å‘¨è¾¾åˆ°å³°å€¼ï¼Œå¹¶åœ¨6ä¸ªæœˆåæ¢å¤åˆ°æ­£å¸¸åŸºçº¿ã€‚</p>
<p>åœ¨è¡¨ç¤ºã€Œå³å°†åˆ†æ‰‹ã€çš„ã€Œè¯­è¨€æ ‡è®°ã€ä¸­ï¼Œå‡ºç°æ¬¡æ•°æ¯”è¾ƒå¤šçš„æ˜¯ã€Œæˆ‘ã€ã€ã€Œæˆ‘ä»¬ã€è¿™ç±»å­—çœ¼ï¼Œä»¥åŠæš—å«è®¤çŸ¥è¿‡ç¨‹ï¼ˆcognitive processing ï¼‰çš„è¯æ±‡ï¼ˆå¸¸å¸¸è¡¨ç¤ºæŠ‘éƒã€é«˜åº¦é›†ä¸­çš„æ³¨æ„åŠ›ã€æ¢ç©¶æ„ä¹‰ç­‰ï¼‰ã€‚</p>
<p><img loading="lazy" src="img/pnas_love_line.png" alt=""  />
</p>
<p>åˆ†æ‰‹å‰åRedditç”¨æˆ·è¯­è¨€æ¨¡å¼çš„å˜åŒ–ã€‚ç¬¬0å‘¨æ˜¯æ¯ä¸ªç”¨æˆ·åœ¨åˆ†æ‰‹æ—¶å…¬å¼€æŠ«éœ²åˆ†æ‰‹çš„æ—¶é—´ç‚¹ã€‚</p>
<p>æ­¤å¤–ï¼Œã€Œè¯­è¨€æ ‡è®°ã€ä¸­æœ‰å…³ã€Œåˆ†ææ€è€ƒã€ï¼ˆanalytic thinkingï¼‰çš„è¯æ±‡çš„å‡ºç°é¢‘æ¬¡ä¼šä¸‹é™ï¼Œä¸ã€Œåˆ†ææ€è€ƒã€ç›¸å…³çš„è¯æ±‡å¾€å¾€åŒ…å«æ›´å¤šä»¥ä¸ªäººä¸ºä¸­å¿ƒå’Œéæ­£å¼çš„è¯­è¨€ã€‚</p>
<p>ç ”ç©¶äººå‘˜è¿˜å‘ç°ï¼Œå³ä½¿äººä»¬åœ¨ä¸åˆ†æ‰‹è¿™ç±»è¯é¢˜æ— å…³çš„ç¾¤ç»„ä¸­å‘å¸–ï¼Œä¸Šè¿°è¿™ç§ã€Œè¯­è¨€æ ‡è®°ã€æ¨¡å¼ä»ç„¶å­˜åœ¨ã€‚</p>
<p><strong>è¦æ³¨æ„äº†ï¼</strong></p>
<p>ä¸å¶å°”å‘ä¸€æ¬¡å¸–çš„äººç›¸æ¯”ï¼Œé‚£äº›ç»å¸¸å‘å¸ƒåˆ†æ‰‹ä¿¡æ¯çš„äººåœ¨åˆ†æ‰‹ä¸€å¹´ä¹‹åï¼Œé€‚åº”èƒ½åŠ›ä¼šå˜å¾—å¾ˆå·®ã€‚</p>
<p>83%çš„äººéƒ½ä¼šä»¥ç¬¬ä¸€äººç§°å‘é€ç¬¬ä¸€æ¬¡åˆ†æ‰‹çš„ä¿¡æ¯ï¼Œå¹¶ä¸”è¿™äº›å¸–å­è¯¦ç»†æè¿°äº†åˆ†æ‰‹è¿‡ç¨‹ï¼Œç”šè‡³å¯¼è‡´åˆ†æ‰‹çš„åŸå› å’Œåˆ†æ‰‹çš„åæœéƒ½æœ‰ã€‚</p>
<p><img loading="lazy" src="img/pnas_love_S1.png" alt=""  />
</p>
<p>ä¾‹å¦‚ï¼Œä¸€ä½ç½‘å‹é€šè¿‡å›å¿†æ¥è®²è¿°è‡ªå·±åˆ†æ‰‹çš„æ•…äº‹ï¼š</p>
<blockquote>
<p>â€œHey breakups, going through a rough one this week. The girl I&rsquo;ve been seeing the last 7 months left me last Friday due to us not having common interests. Our relationship seemed just awesome and thought we were happy. We did get into a &ldquo;routine&rdquo; pretty fast and I was happy with it. Cook dinner, sex, watch movies together. I knew going into this with her she was a free spirited outdoorsy type and I am admittedly the opposite. But we sparked, and formed a relationship after a few months of talking. Things seemed great. We lived maybe 45 minutes away from each other and had different work schedules, so we only saw each other maybe 3 times a week, so it was sometimes hard to see each other&hellip;â€</p>
</blockquote>
<br>
<h2 id="åˆ†ææ€è€ƒå’Œè®¤çŸ¥è¿‡ç¨‹">åˆ†ææ€è€ƒå’Œè®¤çŸ¥è¿‡ç¨‹</h2>
<p>å°½ç®¡è®¸å¤šæƒ…ä¾£å…³ç³»è§£ä½“æ¨¡å‹éƒ½å¼ºè°ƒäº†åˆ†æ‰‹è¿‡ç¨‹ä¸­å›ºæœ‰çš„è®¤çŸ¥æ€ç»´ï¼Œä½†æ²¡æœ‰ä¸€é¡¹ç ”ç©¶èƒ½å¤Ÿå®æ—¶è·Ÿè¸ªè®¤çŸ¥è¿‡ç¨‹ã€‚</p>
<p>åŒæ—¶ï¼Œç ”ç©¶äººå‘˜åœ¨ç ”ç©¶è®¤çŸ¥è¿‡ç¨‹çš„å˜åŒ–æ—¶é¢ä¸´ç€å‡ ä¸ªè‰°å·¨çš„æŒ‘æˆ˜ï¼ŒåŒ…æ‹¬å¦‚ä½•è¯†åˆ«å’Œæµ‹é‡æ„Ÿå…´è¶£çš„è®¤çŸ¥åŠ¨æ€ã€‚</p>
<p>ç ”ç©¶äººå‘˜æœ€è¿‘çš„å·¥ä½œç¡®å®šäº†ä¸¤ç§åŸºäºè¯­è¨€çš„é€šç”¨æ€ç»´æ¨¡å¼ï¼šä¸€æ˜¯åˆ†ææ€è€ƒï¼Œå¦ä¸€æ˜¯è®¤çŸ¥è¿‡ç¨‹ã€‚</p>
<p><img loading="lazy" src="img/pnas_love_LIWC.png" alt=""  />
</p>
<p><strong>è¯´è¯ä»¥ã€Œæˆ‘ã€ã€ã€Œæˆ‘ä»¬ã€ä¸ºç„¦ç‚¹</strong></p>
<p>å›æƒ³ä¸‹ï¼Œæ’é™¤ç¬¬ä¸‰è€…å…³ç³»ï¼Œå¥³å‹å’Œä½ æå‡ºåˆ†æ‰‹å‰ï¼Œæ˜¯ä¸æ˜¯ç»å¸¸ä¼šè¯´ã€Œæˆ‘&hellip;.ã€</p>
<p>æ­£å¦‚ç ”ç©¶äººå‘˜æŒ‡å‡ºï¼Œå½“åˆ†æ‰‹å‘ç”Ÿæ—¶ï¼Œäººä»¬ä¼šå‘å†…å»ç†è§£å‘ç”Ÿå…³ç³»ç ´è£‚çš„åŸå› ï¼Œè¿™æœ‰æ—¶ä¼šè®©äººé™·å…¥æ²‰æ€å’Œæƒ…ç»ªå›°æ‰° ã€‚</p>
<p>åœ¨ä¸æŠ‘éƒã€è‡ªæ€ã€æƒ…ç»ªå‰§å˜ã€æ¶ˆæå’Œå¿ƒç†å›°æ‰°ç›¸å…³çš„æŠ¥å‘Šä¸­ï¼Œã€Œæˆ‘ã€è¿™ä¸ªè¯æ˜¯æœ€å¸¸è§çš„ã€‚è¿™è¡¨æ˜ ã€Œæˆ‘ã€çš„ä½¿ç”¨èƒ½å¤Ÿæ•è·å†…éƒ¨çš„ç„¦ç‚¹å’Œä¸ªäººå†…éƒ¨çš„å…³æ³¨ã€‚</p>
<p>åŒæ ·ï¼Œåœ¨æƒ…ä¾£å…³ç³»ç ”ç©¶ä¸­ï¼Œåœ¨åˆ†æ‰‹ä¹‹å‰ã€ä¹‹ä¸­å’Œä¹‹åæŸ¥çœ‹ã€Œæˆ‘ã€å­—çš„ä½¿ç”¨å¯èƒ½æ˜¯ä¸€ç§ä¸é”™çš„æ–¹æ³•ï¼Œæ¥è·Ÿè¸ªäººä»¬åœ¨æ•´ä¸ªåˆ†æ‰‹è¿‡ç¨‹ä¸­çš„å¯¹è‡ªæˆ‘å…³æ³¨å’Œè°ƒæ•´ã€‚</p>
<p><img loading="lazy" src="img/pnas_love_LIWC.png" alt=""  />
</p>
<p>åœ¨åˆ†æ‰‹æœŸé—´ï¼Œäººä»¬å¯èƒ½ä¼šæ·±ç©¶å¯¹æ–¹çš„å‰ä»»ä¼´ä¾£å’Œä¸¤äººé—´çš„å…³ç³»ã€‚</p>
<p>ã€Œæˆ‘ä»¬ã€ä¸€è¯ï¼Œæ­ç¤ºäº†æƒ…ä¾£é—´çš„å…³ç³»æ‰¿è¯ºã€ç»§ç»­å…³ç³»çš„æ„å›¾å’Œè§£å†³é—®é¢˜çš„è¡Œä¸ºç­‰ç­‰ä¿¡æ¯ã€‚</p>
<p>è€Œæƒ…ä¾£ä¹‹é—´æ›´å¤šåœ°ä½¿ç”¨ã€Œæˆ‘ä»¬ã€ä¸€è¯çªå‡ºäº†æˆåŠŸçš„æµªæ¼«å…³ç³»èƒŒåé çš„æ˜¯æƒ…ä¾£é—´çš„ç›¸äº’ä¾å­˜æ€§ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœæƒ…ä¾£é—´çš„å…³ç³»å˜åå‘¢ï¼Ÿ</p>
<p>ä¸€äº›ç ”ç©¶å‘ç°ï¼Œç»å¸¸åˆ†äº«åˆ†æ‰‹æ•…äº‹çš„äººï¼Œå¦‚æœå¼€å§‹é¢‘ç¹åœ°ä½¿ç”¨ã€Œæˆ‘ä»¬ã€è¿™ä¸ªè¯ï¼Œè¿™ç§ç°è±¡å°±é¢„ç¤ºç€ä»–å’Œä»–ä¼´ä¾£é—´çš„å…³ç³»ä¼šå˜å¾—æ›´å·®ã€‚</p>
<br>
<h2 id="åˆ†æ‰‹åé—ç—‡">åˆ†æ‰‹åé—ç—‡</h2>
<p>åœ¨äººä»¬çš„ç¤¾äº¤ç”Ÿæ´»ä¸å…¶åœ¨çº¿çŠ¶æ€äº¤ç»‡åœ¨ä¸€èµ·çš„æ—¶ä»£ï¼Œç ”ç©¶åˆ†æ‰‹å’Œå…¶ä»–ä¸ªäººå¿ƒæƒ…åŠ¨è¡å‡ºç°äº†æ–°çš„æ–¹æ³•ã€‚</p>
<p>é€šè¿‡ç ”ç©¶ç¤¾äº¤åª’ä½“å¸–å­ï¼Œç ”ç©¶äººå‘˜å·²ç»å‘ç°äº†ä¸äººä»¬æƒ…ç»ªå’Œå¿ƒç†çŠ¶æ€ç›¸å…³çš„è¯­è¨€æ¨¡å¼ï¼Œä¾‹å¦‚æŠ‘éƒç—‡ã€åˆ›ä¼¤ååº”æ¿€éšœç¢è¯Šæ–­å’Œæ³¨æ„ç¼ºé™·å¤šåŠ¨éšœç¢ç—‡çŠ¶ã€‚</p>
<p>é€šè¿‡å¯¹ç¤¾äº¤åª’ä½“å¹³å°ä¸­äººä»¬çš„è¯­è¨€è¿›è¡Œåˆ†æï¼Œç ”ç©¶äººå‘˜æœ€ç»ˆå¯ä»¥è¿½è¸ªäººä»¬åœ¨åˆ†æ‰‹æ—¶ä¸æ–­æ¼”å˜çš„å¿ƒç†è¿‡ç¨‹ã€‚</p>
<p>æ­£å¦‚ç ”ç©¶è€…æŒ‡å‡ºï¼ŒçœŸæ­£åˆ†æ‰‹åä¼šæŒç»­6ä¸ªæœˆçš„å¿ƒç†å½±å“ã€‚</p>
<p><img loading="lazy" src="img/pnas_love_sig.png" alt=""  />
</p>
<p>åˆ†æ‰‹åé—ç—‡ï¼Œä½ æœ‰å—ï¼Ÿ</p>
<br>
<h2 id="æ•°æ®ä¸‹è½½httpsosfioa9qmxview_only07f3d732d9c04bcc9f6844c4e889c1e8"><a href="https://osf.io/a9qmx/?view_only=07f3d732d9c04bcc9f6844c4e889c1e8">æ•°æ®ä¸‹è½½</a></h2>
<p><a href="https://osf.io/a9qmx/?view_only=07f3d732d9c04bcc9f6844c4e889c1e8">4.8G,å«ä»£ç </a></p>
<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>ä½¿ç”¨æ–‡æœ¬ç›¸ä¼¼åº¦å¯ä»¥è¯†åˆ«å˜åŒ–çš„æ—¶é—´ç‚¹</title>
      <link>https://hidadeng.github.io/blog/text_sim/</link>
      <pubDate>Thu, 30 Dec 2021 12:43:10 +0600</pubDate>
      
      <guid>/blog/text_sim/</guid>
      <description>ç”¨æ¼‚äº®å›½å¤§ç»Ÿé¢†æŠ¥å‘Š(æ¼”è®²)åšæ”¿ç­–è¿ç»­æ€§åˆ†æ&amp;amp;å¯è§†åŒ–</description>
      <content:encoded><![CDATA[<p>ä½¿ç”¨æ–‡æœ¬ç›¸ä¼¼åº¦å¯ä»¥è¯†åˆ«å˜åŒ–çš„æ—¶é—´ç‚¹ï¼Œå…ˆé…ç½®ç¯å¢ƒ</p>
<h2 id="ä»£ç ä¸‹è½½codezip"><a href="code.zip">ä»£ç ä¸‹è½½</a></h2>
<br>
<h2 id="é…ç½®ç¯å¢ƒ">é…ç½®ç¯å¢ƒ</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">scikit</span><span class="o">-</span><span class="n">learn</span><span class="o">==</span><span class="mf">1.0</span>
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">cntext</span><span class="o">==</span><span class="mf">1.2</span> 

<span class="c1"># å®‰è£…pyechartså¯è§†åŒ–</span>
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">pyecharts</span><span class="o">==</span><span class="mf">1.6.2</span>
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">pyecharts</span><span class="o">-</span><span class="n">javascripthon</span><span class="o">==</span><span class="mf">0.0.6</span>              
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">pyecharts</span><span class="o">-</span><span class="n">jupyter</span><span class="o">-</span><span class="n">installer</span><span class="o">==</span><span class="mf">0.0.3</span>              
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">pyecharts</span><span class="o">-</span><span class="n">snapshot</span><span class="o">==</span><span class="mf">0.2.0</span> 
</code></pre></div><br>
<h2 id="1-æŸ¥çœ‹æ•°æ®">1. æŸ¥çœ‹æ•°æ®</h2>
<p>æœ¬æ¬¡ä½¿ç”¨sotuæ•°æ®é›†ï¼Œæ”¶é›†äº†ä»1790å¹´è‡³2018å¹´å›½æƒ…å’¨æ–‡æ–‡æœ¬ï¼Œè¿™æ˜¯æ¼‚äº®å›½å¤§ç»Ÿé¢†æ¯å¹´å‘è¡¨çš„æ¼”è®²ï¼Œç”¨äºæè¿°å›½å®¶è¿‡å»çš„æˆå°±å’Œæœªæ¥é¢ä¸´çš„æŒ‘æˆ˜ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;sotu.csv&#39;</span><span class="p">)</span>
<span class="c1">#text2æ˜¯textå‘ä¸‹é¡ºç§»1ä½çš„ç»“æœ</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;text2&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c1">#å‰”é™¤ç©ºå­—ç¬¦</span>
<span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/df.png" width="800" />
    
    
</figure>

<p>ä¸¤æ®µæ–‡æœ¬çš„ç›¸ä¼¼åº¦å¯ä»¥é€šè¿‡cosè®¡ç®—</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">cntext.similarity</span> <span class="kn">import</span> <span class="n">similarity_score</span>

<span class="n">text1</span> <span class="o">=</span> <span class="s1">&#39;Mr. Speaker, Mr. Vice President, members of&#39;</span>
<span class="n">text2</span> <span class="o">=</span> <span class="s1">&#39;Thank you very much. Mr. Speaker, Mr. Vice&#39;</span>

<span class="n">similarity_score</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<pre><code>{'Sim_Cosine': 0.4629100498862757,
 'Sim_Jaccard': 0.3,
 'Sim_MinEdit': 16,
 'Sim_Simple': 0.9619883040935673}
</code></pre>
<br>
<h2 id="2-ç›¸ä¼¼åº¦å¯è§†åŒ–">2. ç›¸ä¼¼åº¦å¯è§†åŒ–</h2>
<p>å¦‚æœæŠŠå¾ˆå¤šä¸ªç›¸é‚»æ–‡æœ¬(æœ‰æ—¶é—´å…ˆåé¡ºåº)ä¾æ¬¡è®¡ç®—ç›¸ä¼¼åº¦ï¼Œå¯ä»¥ç»˜åˆ¶å‡ºæ›²çº¿ï¼Œæˆ‘ä»¬æ ¹æ®è‡ªå·±çš„é¢†åŸŸçŸ¥è¯†ï¼Œå°±å¯ä»¥çœ‹å‡ºå˜åŒ–çš„æ—¶é—´ç‚¹ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">cntext.similarity</span> <span class="kn">import</span> <span class="n">similarity_score</span>
<span class="n">cosines</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">text1</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">]</span>
    <span class="n">text2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s1">&#39;text2&#39;</span><span class="p">]</span>
    <span class="n">simi</span> <span class="o">=</span> <span class="n">similarity_score</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">)[</span><span class="s1">&#39;Sim_Cosine&#39;</span><span class="p">]</span>
    <span class="n">cosines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">simi</span><span class="p">)</span>
<span class="n">cosines</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[0.42767330405703097,
 0.39821498388325544,
 0.410744931596176,
 0.3844380358041578,
 0.4116242706522565,
 0.4169268094228332,
 0.4249719376001671,
 ....
 0.39065212923423315,
 0.3763764307701755,
 0.35307484669994105,
 0.4119319787659037,
 0.43053043053064594,
 0.45219743197249296,
 0.421723837550935,
 0.427904362863808]
</code></pre></div><p>ç´§æ¥ç€</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pyecharts.charts</span> <span class="kn">import</span> <span class="n">Line</span>
<span class="kn">from</span> <span class="nn">pyecharts</span> <span class="kn">import</span> <span class="n">options</span> <span class="k">as</span> <span class="n">opts</span>
<span class="kn">from</span> <span class="nn">pyecharts.globals</span> <span class="kn">import</span> <span class="n">CurrentConfig</span><span class="p">,</span> <span class="n">NotebookType</span>
<span class="n">CurrentConfig</span><span class="o">.</span><span class="n">NOTEBOOK_TYPE</span> <span class="o">=</span> <span class="n">NotebookType</span><span class="o">.</span><span class="n">JUPYTER_NOTEBOOK</span>

<span class="n">line</span> <span class="o">=</span> <span class="n">Line</span><span class="p">()</span>

<span class="n">line</span><span class="o">.</span><span class="n">add_xaxis</span><span class="p">(</span><span class="n">xaxis_data</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">])</span>

<span class="n">line</span><span class="o">.</span><span class="n">add_yaxis</span><span class="p">(</span><span class="s2">&#34;æœ¬æœŸä¸ä¸ŠæœŸçš„ç›¸ä¼¼åº¦&#34;</span><span class="p">,</span> 
               <span class="n">cosines</span><span class="p">,</span> 
               <span class="n">label_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">LabelOpts</span><span class="p">(</span><span class="n">is_show</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

<span class="n">line</span><span class="o">.</span><span class="n">set_global_opts</span><span class="p">(</span><span class="n">title_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">TitleOpts</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&#34;1790å¹´è‡³2018å¹´å›½æƒ…å’¨æ–‡æ–‡æœ¬ç›¸ä¼¼åº¦&#34;</span><span class="p">))</span>

<span class="n">line</span><span class="o">.</span><span class="n">load_javascript</span><span class="p">()</span>
<span class="n">line</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s1">&#39;1790å¹´è‡³2018å¹´å›½æƒ…å’¨æ–‡æ–‡æœ¬ç›¸ä¼¼åº¦å¯è§†åŒ–.html&#39;</span><span class="p">)</span>
<span class="n">line</span><span class="o">.</span><span class="n">render_notebook</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="img/%e7%9b%b8%e4%bc%bc%e5%ba%a6%e8%b6%8b%e5%8a%bf.png" width="800" />
    
    
</figure>

<p>æ³¨æ„ï¼Œæ¨ªåæ ‡æ˜¾ç¤ºçš„æ˜¯å½“å¹´æŠ¥å‘Š ä¸ å‰ä¸€å¹´æŠ¥å‘Š çš„å¯¹æ¯”ç›¸ä¼¼åº¦</p>
<br>
<h2 id="3-å›¾å½¢è§£è¯»">3. å›¾å½¢è§£è¯»</h2>
<p>ç›¸ä¼¼åº¦è¶Šä½ï¼Œè¯´æ˜æœ¬æœŸä¸å‰æœŸç›¸æ¯”ï¼Œæ–‡æœ¬å˜åŒ–è¾ƒå¤§ï¼Œåœ¨æœ¬åœºæ™¯ä¸­å¯èƒ½æ˜¯æ¼‚äº®å›½åœ¨å¤§å¹…åº¦è°ƒæ•´æ”¿ç­–ã€‚</p>
<ol>
<li>åœ¨å›¾ä¸­ï¼Œæˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„æ—¶æœŸæ˜¯ä¸€æˆ˜å’ŒäºŒæˆ˜ï¼Œè¿™ä¸ªé˜¶æ®µåœ¨å›¾ä¸­è¾ƒé•¿æ—¶é—´å¤„äºä½ä½ï¼Œæ¼‚äº®å›½zfçš„æ”¿ç­–å¤„äºæˆ˜æ—¶çŠ¶æ€ã€‚</li>
<li>æ¼‚äº®å›½ç«‹å›½åˆæœŸï¼Œç›¸ä¼¼åº¦è¿çº¿ä¹Ÿé•¿æ—¶é—´å¤„äºä½ä½ï¼Œä½“ç°äº†æ–°å›½å®¶æ­£åœ¨æ¢ç´¢ä¸ºæ”¿ä¹‹é“ã€‚</li>
<li>æ¼‚äº®å›½æ¯4å¹´é€‰juä¸€æ¬¡ï¼Œé‚£ä¹ˆæ¢å±Šå¹´ä»½ï¼Œç›¸ä¼¼åº¦ä¹Ÿä¼šæ¯”è¾ƒä½ã€‚</li>
</ol>
<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>PNAS | æ–‡æœ¬ç½‘ç»œåˆ†æ&amp;æ–‡åŒ–æ¡¥æ¢Pythonä»£ç å®ç°</title>
      <link>https://hidadeng.github.io/blog/pnas_culture_bridges/</link>
      <pubDate>Tue, 28 Dec 2021 09:43:10 +0600</pubDate>
      
      <guid>/blog/pnas_culture_bridges/</guid>
      <description> PNAS2016è¿™ç¯‡ä½¿ç”¨â€œè‡ªé—­ç—‡è°±ç³»éšœç¢ASDç–¾ç—…çš„æ²»ç—…åŸå› å¤§è®¨è®ºâ€åšç ”ç©¶ï¼Œæ–‡ä¸­ä½¿ç”¨TF-IDFåˆ»ç”»å‚ä¸è€…ä¿¡æ¯çš„â€œæ–°ä¸”ç†Ÿæ‚‰â€ ,æ„å»ºå‚ä¸è€…æ–‡åŒ–ç½‘ç»œã€‚ä½¿ç”¨è‡ªåŠ¨æ–‡æœ¬åˆ†æå‘ç°ï¼Œå¦‚æœç»„ç»‡æ–¹å»ºç«‹æ–‡åŒ–æ¡¥æ¢ï¼Œåœ¨å¾ˆå°‘èƒ½ä¸€èµ·è®¨è®ºçš„è®®é¢˜é¢†åŸŸå†…äº§ç”Ÿå¯è¿æ¥çš„å¯¹è¯ä¸»é¢˜ä¿¡æ¯ï¼Œè¿™ç±»ä¿¡æ¯ä¸ä»…èƒ½å¼•èµ·å¤šä¸ªå—ä¼—çš„å…±é¸£ï¼Œè€Œä¸”è¿˜èƒ½è®©è¿™äº›å—ä¼—å½¼æ­¤è¿›è¡Œå¯¹è¯ï¼Œé‚£ä¹ˆç»„ç»‡æ–¹æ›´æœ‰å¯èƒ½æ¿€å‘æ–°ç¤¾äº¤åª’ä½“å—ä¼—çš„è¯„è®º</description>
      <content:encoded><![CDATA[<h2 id="ä»£ç ä¸‹è½½codezip"><a href="code.zip">ä»£ç ä¸‹è½½</a></h2>
<p>ç°åœ¨ä¸€æåˆ°æ–‡æœ¬åˆ†æï¼Œé™¤äº†è¯é¢‘ç»Ÿè®¡ã€æƒ…æ„Ÿåˆ†æï¼Œå°±å±è¯é¢˜åˆ†ææœ€ç«ï¼Œä¸»æµæŠ€æœ¯è·¯çº¿æ˜¯ä½¿ç”¨LDAè¯é¢˜æ¨¡å‹è¿›è¡Œä¸»é¢˜åˆ†æã€‚ä½†æ˜¯LDAé€‚åˆæ–‡æ¡£åŒºåˆ†åº¦å¤§ï¼Œæ–‡æœ¬æ¡£æ•°è¾ƒå¤§ã€‚å¦‚æœä¸æ»¡è¶³è¿™ä¸¤ç‚¹ï¼ŒLDAè™½ç„¶èƒ½è·‘å‡ºæ¨¡å‹ï¼Œä½†æ˜¯è·‘å‡ºçš„topicæ— æ³•è§£è¯»ï¼Œæ²¡æœ‰æ„ä¹‰ã€‚ä»Šå¤©åˆ†äº«ä¸€ä¸ªæŠ€æœ¯æ–‡ï¼Œåœ¨çœ‹æŠ€æœ¯æ–‡ä¹‹å‰ï¼Œå°†æŠ€æœ¯æ–‡çš„èƒŒæ™¯æ–‡çŒ®ç¨å¾®æ•´ç†ç¿»è¯‘äº†ä¸‹ï¼Œæ–¹ä¾¿å¤§å®¶æ›´å¥½çš„ç†è§£textnetsçš„åº”ç”¨åœºæ™¯ã€‚</p>
<p>ç½‘ç»œåˆ†æé€šå¸¸ç”¨äºæè¿°äººä¸äººä¹‹é—´çš„å…³ç³»â€”â€”å°¤å…¶æ˜¯åœ¨ç¤¾ä¼šç§‘å­¦ä¸­â€”â€”ä½†å®ƒä¹Ÿå¯ä»¥åº”ç”¨äºè¯ä¹‹é—´çš„å…³ç³»ã€‚ä¾‹å¦‚ï¼Œç½‘ç»œå…³ç³»å¯ä»¥é€šè¿‡æ–‡æ¡£ä¸­å•ä¸ªå•è¯çš„å…±ç°æ¥åˆ›å»ºï¼Œæˆ–è€…å¯ä»¥ä½¿ç”¨åŒæ¨¡å¼ç½‘ç»œæŠ•å½±åœ¨æ–‡æ¡£ä¹‹é—´åˆ›å»ºå…³ç³»ã€‚</p>
<p>åŸºäºç½‘ç»œçš„è‡ªåŠ¨æ–‡æœ¬åˆ†ææ–¹æ³•çš„ä¼˜ç‚¹æ˜¯</p>
<ul>
<li>
<p>åƒç¤¾ä¼šç¾¤ä½“ä¸€æ ·ï¼Œå¯ä»¥é€šè¿‡ä¸‰å…ƒé—­åŒ…æ›´å‡†ç¡®åœ°æµ‹é‡è¯ç»„çš„å«ä¹‰â€”â€”æˆ–è€…ä»»ä½•ä¸¤ä¸ªè¯æˆ–æœ¯è¯­ç›¸äº’çš„å«ä¹‰çš„åŸåˆ™å¦‚æœå°†å®ƒä»¬æ”¾åœ¨ç¬¬ä¸‰ä¸ªè¯çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œå¯ä»¥æ›´å‡†ç¡®åœ°ç†è§£ï¼›</p>
</li>
<li>
<p><strong>æ–‡æœ¬ç½‘ç»œå¯ä»¥åº”ç”¨äºä»»ä½•é•¿åº¦çš„æ–‡æ¡£</strong>ï¼Œè¿™ä¸é€šå¸¸éœ€è¦å¤§é‡å•è¯æ‰èƒ½æ­£å¸¸è¿è¡Œçš„ä¸»é¢˜æ¨¡å‹ä¸åŒã€‚åœ¨ç®€çŸ­çš„ç¤¾äº¤åª’ä½“æ–‡æœ¬å˜å¾—æ™®éçš„æ—¶ä»£ï¼Œè¿™æ˜¯ä¸€ä¸ªæ˜¾ç€çš„ä¼˜åŠ¿ã€‚</p>
</li>
<li>
<p>æœ€åï¼Œè¿™ç§æ–¹æ³•å—ç›Šäº<strong>ç¤¾åŒºæ£€æµ‹</strong>è·¨å­¦ç§‘æ–‡çŒ®çš„æœ€æ–°è¿›å±•ï¼Œå¯ä»¥è¯´å®ƒæä¾›äº†æ›´å‡†ç¡®çš„å•è¯åˆ†ç»„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å—ç›Šäºç½‘ç»œå†…è§‚å¯Ÿåˆ°çš„èšç±»ï¼Œè€Œä¸æ˜¯è¯è¢‹æ¨¡å‹ã€‚</p>
</li>
</ul>
<br>
<h2 id="èƒŒæ™¯-æ–‡åŒ–æ¡¥æ¢">èƒŒæ™¯-æ–‡åŒ–æ¡¥æ¢</h2>
<p>æ–‡åŒ–ä¿¡æ¯ä¼ é€’ç†è®ºå’Œå…¬å…±å®¡è®®å’Œè®¡ç®—æŠ€æœ¯ã€‚</p>
<blockquote>
<p>Markowitz, D. M., &amp; Shulman, H. C. (2021). The predictive utility of word familiarity for online engagements and funding. Proceedings of the National Academy of Sciences, 118(18).</p>
</blockquote>
<p>ç”±äºæ¯å¤©å…‰é¡¾æ­¤ç±»è®ºå›çš„äººæ•°è¿…é€Ÿå¢åŠ ï¼Œç¤¾äº¤åª’ä½“ä¸ºå€¡å¯¼ç»„ç»‡å¡‘é€ å…¬å…±è¾©è®ºæä¾›äº†æœ‰åŠ›çš„æœºä¼šã€‚ ç„¶è€Œï¼Œç¤¾ä¼šç§‘å­¦å®¶è¿˜æ²¡æœ‰è§£é‡Šä¸ºä»€ä¹ˆä¸€äº›<strong>è®®é¢˜å‘èµ·è€…</strong>èƒ½æˆåŠŸå‘èµ·å¤§è§„æ¨¡çš„å¹¿æ³›å‚ä¸æ€§(å…¬å¼€è¾©è®º/å¹¿æ³›å¯¹è¯)ï¼Œè€Œå¤§å¤šæ•°å…¶ä»–ç»„ç»‡å´æ²¡åšåˆ°ã€‚ æœ¬æ–‡ä½¿ç”¨è‡ªåŠ¨æ–‡æœ¬åˆ†æå‘ç°ï¼Œå¦‚æœç»„ç»‡æ–¹å»ºç«‹<strong>æ–‡åŒ–æ¡¥æ¢</strong>ï¼Œåœ¨å¾ˆå°‘èƒ½ä¸€èµ·è®¨è®ºçš„è®®é¢˜é¢†åŸŸå†…äº§ç”Ÿå¯è¿æ¥çš„å¯¹è¯ä¸»é¢˜ä¿¡æ¯ï¼Œè¿™ç±»ä¿¡æ¯ä¸ä»…èƒ½å¼•èµ·å¤šä¸ªå—ä¼—çš„å…±é¸£ï¼Œè€Œä¸”è¿˜èƒ½è®©è¿™äº›å—ä¼—å½¼æ­¤è¿›è¡Œå¯¹è¯ï¼Œé‚£ä¹ˆç»„ç»‡æ–¹æ›´æœ‰å¯èƒ½æ¿€å‘æ–°ç¤¾äº¤åª’ä½“å—ä¼—çš„è¯„è®ºã€‚
åœ¨æ§åˆ¶è¿™äº›å› ç´ çš„æƒ…å†µä¸‹ï¼Œå»ºç«‹å®è´¨æ€§æ–‡åŒ–æ¡¥æ¢çš„ç»„ç»‡ï¼Œ å…¶æ‰€å‘å¸ƒä¿¡æ¯ï¼Œ æ¯”é‚£äº›æ²¡æœ‰å»ºç«‹å®è´¨æ€§æ–‡åŒ–æ¡¥æ¢çš„ç»„ç»‡ï¼Œ å¾—åˆ°çš„è¯„è®ºæ•°å¤š 2.52 å€ã€‚</p>

<figure >
    
        <img src="img/large.jpg" />
    
    
</figure>

<p>ç¤¾äº¤ç½‘ç»œåˆ†æé€šå¸¸ç”¨äºæè¿°ä¸ªäººä¹‹é—´çš„å‹è°Šæˆ–å…¶ä»–å…³ç³»ï¼Œä½†å®ƒä¹Ÿå¯é€šè¿‡å‚ä¸è€…çš„æ¶ˆæ¯æˆ–æƒ³æ³•çš„ç±»å‹æ¥æè¿°å‚ä¸è€…ä¹‹é—´çš„å…³ç³»ï¼ˆå¦‚ä¸‹å›¾) æ˜¯â€œæ–‡åŒ–ç½‘ç»œâ€ä¸­çš„ä¸€ä¸ªå°åŒºåŸŸã€‚</p>
<ul>
<li>æ¯ä¸ªèŠ‚ç‚¹æè¿°ä¸€ä¸ªå‚ä¸è®®é¢˜å…¬å¼€å¯¹è¯çš„å‚ä¸è€…</li>
<li>èŠ‚ç‚¹é—´çš„è¾¹ä»£è¡¨é‚£äº›åœ¨ç¤¾äº¤åª’ä½“å€¡å¯¼é¢†åŸŸå†…è®¨è®ºç±»ä¼¼è®®é¢˜çš„äººã€‚</li>
</ul>
<p>PNAS2016è¿™ç¯‡ä½¿ç”¨â€œ<strong>è‡ªé—­ç—‡è°±ç³»éšœç¢ASDç–¾ç—…çš„æ²»ç—…åŸå› å¤§è®¨è®º</strong>â€åšçš„æ•°æ®åˆ†äº«ï¼Œå›¾ä¸­ t1 å¤„çš„ä¸€ç±»ç”¨æˆ·è®¤ä¸ºASDè‡´ç—…å¯èƒ½è·Ÿç–«è‹—æœ‰å…³ï¼Œè€Œå¦ä¸€ç±»äººå¯èƒ½è®¤ä¸ºASDå¯èƒ½ä¸é—ä¼ å› ç´ çš„æœ‰å…³ã€‚ä»å›¾å½¢çœ‹ï¼Œt1è¿™ç±»è®®é¢˜å‘èµ·æ–¹å¼ï¼Œæ²¡æœ‰äº§ç”Ÿå¹¿æ³›å‚ä¸æ€§ã€‚è€Œt2å’Œt3ï¼Œæ–‡åŒ–ç½‘ç»œä¸­å› ä¸ºæ–‡åŒ–æ¡¥æ¢çš„å­˜åœ¨ï¼Œäº§ç”Ÿäº†å¹¿æ³›å‚ä¸æ€§ã€‚</p>
<p><strong>å‡è®¾çš„æ–‡åŒ–ç½‘ç»œ</strong>ï¼Œå…¶ä¸­èŠ‚ç‚¹ä»£è¡¨å‚ä¸æœ‰å…³è®®é¢˜çš„å¯¹è¯å‚ä¸è€…ï¼Œè€ŒèŠ‚ç‚¹ä¹‹é—´çš„è¾¹åˆ™æè¿°äº†å…¶æ¶ˆæ¯å†…å®¹çš„ç›¸ä¼¼æ€§ã€‚è®®é¢˜å¹¿æ³›å‚ä¸æ€§ï¼Œé™¤äº†è¯é¢˜å‘èµ·è€…å½±å“åŠ›ã€è¯é¢˜æŠ•æ”¾èµ„æºç­‰å› ç´ å½±å“ï¼Œè¿˜æœ‰ä¸€ä¸ªå› ç´ å°±æ˜¯å‘èµ·çš„è¯é¢˜æ˜¯å¦å¸å¼•äº†å—ä¼—ã€‚å¯¹äºå‚ä¸è€…è€Œè¨€ï¼Œæœ€æœ‰å¸å¼•åŠ›çš„è¯é¢˜éœ€è¦æ»¡è¶³â€œ<strong>æ–°é¢–ï¼Œä¸”ç†Ÿæ‚‰</strong>â€ã€‚</p>
<p><strong>ç”¨TF-IDFåˆ»ç”»æ–‡åŒ–ç½‘ç»œä¸­çš„â€œæ–°ä¸”ç†Ÿæ‚‰â€</strong>
åœ¨æ–‡æœ¬åˆ†æä¸­æœ‰ä¸€ä¸ªæ–‡æœ¬ç‰¹å¾æå–æŠ€æœ¯tf-idf</p>
<ul>
<li>tfæŒ‡è¯è¯­åœ¨æŸæ–‡æ¡£ä¸­å‡ºç°çš„æ¬¡æ•°ï¼›ä»è¯è¯­çš„è§’åº¦ï¼Œè¯¥å€¼è¶Šå¤§è¶Šç†Ÿæ‚‰</li>
<li>idfé€†æ–‡æ¡£æ•°ï¼Œå³è¯è¯­å‡ºç°åœ¨å¤šå°‘ä¸ªæ–‡æ¡£ä¸­ï¼›ä»è¯è¯­çš„è§’åº¦ï¼Œè¯¥å€¼è¶Šå°è¶Šæ–°é¢–</li>
</ul>

<figure >
    
        <img src="img/large2.jpg" />
    
    
</figure>

<p>æœ¬æ•™ç¨‹å°†å¼•å¯¼æ‚¨å®Œæˆä½¿ç”¨æ–‡æœ¬ç½‘ç»œåˆ†æå’Œå¯è§†åŒ–æ•°æ®æ‰€éœ€çš„æ‰€æœ‰æ­¥éª¤ã€‚ åœ¨è§£å†³ä¸ä½¿ç”¨æ–‡æœ¬ç½‘ç»œç›¸å…³çš„å…¶ä»–æ‚é¡¹é—®é¢˜ä¹‹å‰ï¼Œæœ¬æ•™ç¨‹é¦–å…ˆä»‹ç»äº†ä¸€ä¸ªç‹¬ç«‹çš„ç¤ºä¾‹ã€‚</p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">pip3</span> <span class="n">install</span> <span class="n">textnets</span>
</code></pre></div><br>
<h2 id="1-æŸ¥çœ‹æ•°æ®">1. æŸ¥çœ‹æ•°æ®</h2>
<p>pnas2016è¿™ç¯‡çš„æ•°æ®æ²¡æœ‰å¼€æºï¼Œé€šè¿‡æ–‡æœ¬æ„å»ºæ–‡åŒ–ç½‘ç»œã€å‘ç°æ–‡åŒ–æ¡¥æ¢ã€‚è¿™é‡Œä½¿ç”¨ä¸€ä¸ªç‰¹åˆ«ç‰¹åˆ«å°çš„æ–°é—»æ•°æ®ï¼Œå…³äºäººç±»ç¬¬ä¸€æ¬¡ç™»æœˆã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨<a href="https://github.com/jboynyc/textnets">textnets</a>ï¼Œå‡†å¤‡çš„æ•°æ®éœ€è¦æœ‰ä¸¤ä¸ªåˆ—</p>
<ul>
<li>è®®é¢˜å‚ä¸è€…ï¼Œç±»æ¯”æŠ¥åˆŠ</li>
<li>è®®é¢˜å‚ä¸è€…å‘å¸ƒçš„å†…å®¹ï¼Œå¦‚è¯„è®ºç­‰</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;test.csv&#39;</span><span class="p">)</span>
<span class="n">df</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">|    | Unnamed: 0        | headlines                                                                 |
|---:|:------------------|:--------------------------------------------------------------------------|
|  0 | The Guardian      | 3:56 am: Man Steps On to the Moon                                         |
|  1 | New York Times    | Men Walk on Moon -- Astronauts Land on Plain, Collect Rocks, Plant Flag   |
|  2 | Boston Globe      | Man Walks on Moon                                                         |
|  3 | Houston Chronicle | Armstrong and Aldrich &#34;Take One Small Step for Man&#34; on the Moon           |
|  4 | Washington Post   | The Eagle Has Landed -- Two Men Walk on the Moon                          |
|  5 | Chicago Tribune   | Giant Leap for Mankind -- Armstrong Takes 1st Step on Moon                |
|  6 | Los Angeles Times | Walk on Moon -- That\&#39;s One Small Step for Man, One Giant Leap for Mankind |
</code></pre></div><br>
<h2 id="2-å¯¼å…¥corpus">2. å¯¼å…¥corpus</h2>
<p>ä½¿ç”¨textnetsåº“çš„å°†æ•°æ®å¯¼å…¥ä¸ºå…¶ç‰¹æœ‰çš„è¯­æ–™æ ¼å¼ã€‚ä»ä¸‹æ–¹å¯ä»¥çœ‹åˆ°textnetså¯èƒ½ä¼šç”¨spacyï¼Œå¦‚æœè¦é…ç½®è‹±æ–‡en_core_web_smæˆ–ä¸­æ–‡zh_core_web_sm, è¯·æŸ¥çœ‹è¯¥æ–‡ <a href="https://t.hk.uy/aCmr">https://t.hk.uy/aCmr</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">textnets</span> <span class="k">as</span> <span class="nn">tn</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="c1">#è®¾ç½®éšæœºç§å­ï¼Œä¿è¯ä»£ç å¯é‡å¤æ€§</span>
<span class="n">tn</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s2">&#34;seed&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">42</span>

<span class="n">corpus</span> <span class="o">=</span> <span class="n">tn</span><span class="o">.</span><span class="n">Corpus</span><span class="o">.</span><span class="n">from_csv</span><span class="p">(</span><span class="s1">&#39;test.csv&#39;</span><span class="p">)</span>
<span class="n">corpus</span>
</code></pre></div>
<figure >
    
        <img src="img/corpus.png" width="100%" />
    
    
</figure>

<br>
<h2 id="3-æ„å»ºç½‘ç»œ">3. æ„å»ºç½‘ç»œ</h2>
<p>éœ€è¦æ³¨æ„çš„æ˜¯corpus.tokenized()æ˜¯textnetsç‰¹æœ‰çš„åˆ†è¯æ–¹æ³•ï¼Œå¦‚æœæ‰€å¤„ç†çš„æ–°é—»æ˜¯ä¸­æ–‡ï¼Œéœ€è¦æå‰åˆ†è¯å»åœç”¨è¯æ•´ç†ä¸ºåƒè‹±æ–‡æ•°æ®æ ¼å¼ï¼Œç”¨ç©ºæ ¼é—´éš”å•è¯ã€‚</p>
<p>textnetsæä¾›äº†æ„å»ºç½‘ç»œçš„æ–¹æ³•</p>
<p>tn.Textnet(data, min_docs, connected, doc_attrs)</p>
<ul>
<li>data DataFrameç±»å‹, ä¸‰åˆ—ï¼Œè‡ªå·±å¯ä»¥è¿è¡Œ corpus.tokenized() æŸ¥çœ‹æ ·å¼</li>
<li>min_docs ä¸€ä¸ªè¯è¯­å­˜åœ¨äºè‡³å°‘å¤šå°‘ä¸ªæ–‡æ¡£ä¸­ï¼Œé»˜è®¤ä¸º2ã€‚ä¸€ä¸ªè¯è‡³å°‘å‡ºç°åœ¨ä¸¤ä¸ªdocä¸­ï¼Œæ‰ä¼šè®©ä¸¤ä¸ªdocäº§ç”Ÿè¿æ¥</li>
<li>connected ä»…ä¿ç•™ç½‘ç»œçš„æœ€å¤§è¿æ¥ç»„ä»¶ï¼ˆé»˜è®¤å€¼ï¼šFalseï¼‰</li>
<li>doc_attrs æ–‡æ¡£èŠ‚ç‚¹çš„å±æ€§ï¼Œå­—å…¸çš„å­—å…¸(åŒå±‚åµŒå¥—å­—å…¸)</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">t</span> <span class="o">=</span> <span class="n">tn</span><span class="o">.</span><span class="n">Textnet</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">tokenized</span><span class="p">(),</span> <span class="n">min_docs</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div><p>ä½¿ç”¨æ‰€æœ‰é»˜è®¤å‚æ•°ï¼Œ textnets ä¼šå¸®æˆ‘ä»¬åˆ é™¤è‹±æ–‡åœç”¨è¯ï¼Œè¯å¹²åŒ–(åˆå¹¶åŒç±»è¯)ï¼Œå¹¶åˆ é™¤æ ‡ç‚¹ç¬¦å·ã€æ•°å­—ã€URL ç­‰ã€‚</p>
<p>ä½†è¿™é‡Œæˆ‘ä»¬å°†ç ´ä¾‹å°† min_docs è®¾ç½®ä¸º1ï¼ˆå› ä¸ºæ•°æ®åªæœ‰å‡ å¥è¯å‡ åä¸ªå•è¯ï¼Œè¿™é‡Œç ´ä¾‹è®¾ç½®ä¸º1ï¼Œæ­£å¸¸è¿™é‡Œè‡³å°‘æ˜¯2ï¼‰</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">t</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label_nodes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>   <span class="c1">#æ ‡è®°èŠ‚ç‚¹å(å•è¯ã€åª’ä½“)</span>
       <span class="n">show_clusters</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1">#ç»˜åˆ¶ç°‡çš„è¾¹ç•Œ</span>
</code></pre></div>
<figure >
    
        <img src="img/output_10_0.svg" width="100%" />
    
    
</figure>

<p>show_clusters ä½¿ç”¨ <strong>Leidenç¤¾åŒºæ£€æµ‹ç®—æ³•</strong>(Leiden community detection algorithm)æ‰¾åˆ°äº†åˆ†åŒºæˆç°‡ï¼Œå®ƒä¼¼ä¹è¯†åˆ«äº†<strong>åŒä¸€ä¸»é¢˜</strong>(ç™»æœˆ)ä¸‹ä¸åŒè¯ä¹‹é—´çš„è¿œè¿‘(ç›¸ä¼¼çš„è¯åœ¨ä¸€ä¸ªç°‡ä¸­ï¼Œä¸åŒçš„è¯å¤„äºä¸åŒçš„ç°‡ä¸­)ã€‚</p>
<p>ä½ å¯èƒ½ä¼šç–‘æƒ‘ï¼šä¸ºä»€ä¹ˆç½‘ç»œå›¾ä¸­çš„<strong>å•è¯: moon</strong>ä¼šè‡ªå·±æ¼‚ç§»ï¼Ÿ é‚£æ˜¯å› ä¸ºmoonè¿™ä¸ªè¯åœ¨æ¯ä¸ªæ–‡æ¡£ä¸­åªå‡ºç°ä¸€æ¬¡ï¼Œæ‰€ä»¥æ¯ä¸ªæ–‡æ¡£moonçš„tf-idfå¾—åˆ†ä¸º0ã€‚</p>
<p>è®©æˆ‘ä»¬å†æ¬¡å¯è§†åŒ–ç›¸åŒçš„äº‹æƒ…ï¼Œä½†è¿™æ¬¡æ ¹æ®èŠ‚ç‚¹çš„ BiRankï¼ˆäºŒéƒ¨ç½‘ç»œçš„ä¸­å¿ƒæ€§åº¦é‡ï¼‰ç¼©æ”¾èŠ‚ç‚¹ï¼Œæ ¹æ®æƒé‡ç¼©æ”¾è¾¹ç¼˜ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">t</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label_nodes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
       <span class="n">show_clusters</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
       <span class="n">scale_nodes_by</span><span class="o">=</span><span class="s2">&#34;birank&#34;</span><span class="p">,</span>
       <span class="n">scale_edges_by</span><span class="o">=</span><span class="s2">&#34;weight&#34;</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/output_12_0.svg" width="100%" />
    
    
</figure>

<p>æˆ‘ä»¬è¿˜å¯ä»¥åªå¯è§†åŒ–æŠ¥åˆŠç½‘ç»œï¼Œä¸æ˜¾ç¤ºè¯è¯­ã€‚è¿™é‡Œè®¾ç½®node_type=&lsquo;doc&rsquo;</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#node_typeæœ‰ä¸¤ç§å€¼ï¼Œ docã€term</span>
<span class="n">papers</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">project</span><span class="p">(</span><span class="n">node_type</span><span class="o">=</span><span class="s2">&#34;doc&#34;</span><span class="p">)</span>
<span class="n">papers</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label_nodes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/output_14_0.svg" width="100%" />
    
    
</figure>

<p>å’Œä¹‹å‰çš„åŒå‘ç½‘ç»œä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°Houston Chronicleã€  Chicago Tribuneã€  Los Angeles Timesæ›´ç´§å¯†åœ°èšé›†åœ¨ä¸€èµ·ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œè¯ç½‘ç»œï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">words</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">project</span><span class="p">(</span><span class="n">node_type</span><span class="o">=</span><span class="s2">&#34;term&#34;</span><span class="p">)</span>
<span class="n">words</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label_nodes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
           <span class="n">show_clusters</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/output_16_0.svg" width="100%" />
    
    
</figure>

<p>é™¤äº†å¯è§†åŒ–ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨<strong>ç¤¾äº¤ç½‘ç»œæŒ‡æ ‡</strong>åˆ†ææˆ‘ä»¬çš„è¯­æ–™åº“ã€‚ ä¾‹å¦‚ï¼Œå…·æœ‰æ•™é«˜<strong>ä»‹æ•°ä¸­å¿ƒæ€§betweenness centrality</strong>çš„æ–‡æ¡£å¯èƒ½å°†ä¸»é¢˜ä¸åŒç°‡è”ç³»èµ·æ¥ï¼Œèµ·åˆ°æ–‡åŒ–æ¡¥æ¢çš„ä½œç”¨ï¼Œä»è€Œåˆºæ¿€è·¨è¶Šç¬¦å·é¸¿æ²Ÿçš„äº¤æµ(Bail,2016)ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">papers</span><span class="o">.</span><span class="n">top_betweenness</span><span class="p">()</span>
</code></pre></div><pre><code>Los Angeles Times    7.0
Boston Globe         0.0
Chicago Tribune      0.0
Houston Chronicle    0.0
New York Times       0.0
The Guardian         0.0
Washington Post      0.0
dtype: float64
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">words</span><span class="o">.</span><span class="n">top_betweenness</span><span class="p">()</span>
</code></pre></div><pre><code>walk         72.00
man          18.00
step         16.00
small        12.75
land          6.00
giant         6.00
leap          6.00
mankind       6.00
armstrong     3.25
plain         0.00
dtype: float64
</code></pre>
<p>è¿™æ˜¯å› ä¸ºNew York Timesåœ¨å…¶æ ‡é¢˜ä¸­ä½¿ç”¨äº†â€œwalkâ€ä¸€è¯ï¼Œå°†â€œone small stepâ€ç°‡ä¸â€œman on moonâ€ç°‡è”ç³»èµ·æ¥ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å†æ¬¡ç”Ÿæˆè¯ç½‘ç»œå›¾ï¼Œè¿™æ¬¡æ ¹æ®èŠ‚ç‚¹çš„ä¸­ä»‹ä¸­å¿ƒæ€§ç¼©æ”¾èŠ‚ç‚¹ï¼Œå¹¶ä½¿ç”¨â€œéª¨å¹²æå–â€ä»ç½‘ç»œä¸­ä¿®å‰ªè¾¹ç¼˜ï¼šcite:p<code>Serrano2009</code>ã€‚</p>
<p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ color_clustersï¼ˆè€Œä¸æ˜¯ show_clustersï¼‰æ ¹æ®èŠ‚ç‚¹çš„åˆ†åŒºä¸ºèŠ‚ç‚¹ç€è‰²ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è¿‡æ»¤èŠ‚ç‚¹æ ‡ç­¾ï¼Œåªæ ‡è®°é‚£äº›ä¸­é—´ä¸­å¿ƒæ€§betweenness centralityåˆ†æ•°é«˜äºä¸­ä½æ•°çš„èŠ‚ç‚¹ã€‚ è¿™åœ¨é«˜é˜¶ç½‘ç»œä¸­ç‰¹åˆ«æœ‰ç”¨ï¼Œå…¶ä¸­æ ‡è®°æ¯ä¸ªèŠ‚ç‚¹ä¼šå¯¼è‡´è§†è§‰æ··ä¹±ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">words</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label_nodes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
           <span class="n">scale_nodes_by</span><span class="o">=</span><span class="s2">&#34;betweenness&#34;</span><span class="p">,</span>
           <span class="n">color_clusters</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
           <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
           <span class="n">edge_width</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="o">*</span><span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="s2">&#34;weight&#34;</span><span class="p">]],</span>
           <span class="n">edge_opacity</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span>
           <span class="n">node_label_filter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="n">n</span><span class="o">.</span><span class="n">betweenness</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">words</span><span class="o">.</span><span class="n">betweenness</span><span class="o">.</span><span class="n">median</span><span class="p">())</span>
</code></pre></div>
<figure >
    
        <img src="img/output_21_0.svg" width="100%" />
    
    
</figure>

<h2 id="å…¶ä»–textnetsæ¡ˆä¾‹èµ„æ–™">å…¶ä»–textnetsæ¡ˆä¾‹èµ„æ–™</h2>
<p><a href="https://www.jboy.space/blog/enemies-foreign-and-partisan.html">https://www.jboy.space/blog/enemies-foreign-and-partisan.html</a></p>
<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>éŸ³é¢‘å¯è§†åŒ–ï¼šé‡‡æ ·ã€é¢‘ç‡å’Œå‚…é‡Œå¶å˜æ¢</title>
      <link>https://hidadeng.github.io/blog/voice2pic/</link>
      <pubDate>Mon, 20 Dec 2021 10:43:10 +0600</pubDate>
      
      <guid>/blog/voice2pic/</guid>
      <description>ä¸»é¢˜å»ºæ¨¡å’Œè¯­ä¹‰æœç´¢åº“</description>
      <content:encoded><![CDATA[<blockquote>
<p>author:cj1128</p>
<p>Github: <a href="https://github.com/cj1128">https://github.com/cj1128</a></p>
<p>Blog: <a href="https://cjting.me/">https://cjting.me/</a></p>
<p>src: <a href="https://cjting.me/2021/08/07/fourier-transform-and-audio-visualization/">https://cjting.me/2021/08/07/fourier-transform-and-audio-visualization/</a></p>
</blockquote>
<p>å°è±¡ä¸­ä½¿ç”¨çš„ç¬¬ä¸€ä¸ª PC éŸ³ä¹æ’­æ”¾å™¨æ˜¯ã€Œåƒåƒé™å¬ã€ï¼Œå¤§æ¦‚æ˜¯ 08 å¹´å·¦å³ã€‚æˆ‘è¿˜æ¸…æ¥šåœ°è®°å¾—å®ƒè‡ªå¸¦äº†ä¸€é¦–æ¢é™èŒ¹çš„æ­Œã€ŒLove is everythingã€ï¼ŒåŠ¨å¬çš„æ—‹å¾‹è‡³ä»Šè¦ç»•è€³æ—ã€‚</p>

<figure >
    
        <img src="img/qianqian.jpeg" width="100%" />
    
    
</figure>

<p>åƒåƒé™å¬çš„å·¦ä¸Šè§’æœ‰ä¸€ç»„éšç€éŸ³ä¹è·³åŠ¨çš„æŸ±å­ï¼Œæˆ‘æƒ³å¤§å®¶éƒ½ä¹ ä»¥ä¸ºå¸¸äº†ï¼Œå¾ˆå¤šæ’­æ”¾å™¨éƒ½æœ‰è¿™åŠŸèƒ½ã€‚ä½†æ˜¯å…¶å®æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œè¿™æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</p>
<p>è¦ç†è§£è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é¦–å…ˆè¦ç†è§£å£°éŸ³æ˜¯ä»€ä¹ˆã€‚</p>
<br>
<h2 id="æ³¢">æ³¢</h2>
<p>ä¸­å­¦ç‰©ç†æœ‰ä»‹ç»è¿‡ï¼Œå£°éŸ³æ˜¯ç”±ç‰©ä½“æŒ¯åŠ¨äº§ç”Ÿçš„ï¼Œè¿™ä¸ªæŒ¯åŠ¨ç»ç”±ä»‹è´¨ä¼ å¯¼åˆ°æˆ‘ä»¬çš„è€³æœµä¸­å¼•èµ·è€³è†œæŒ¯åŠ¨ä»è€Œè®©æˆ‘ä»¬å¬è§å£°éŸ³ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç”¨æ³¢å½¢æ¥æè¿°æŒ¯åŠ¨ï¼Œå…¶ä¸­æ¨ªè½´æ˜¯æ—¶é—´ï¼Œçºµè½´æ˜¯æŒ¯åŠ¨çš„ä½ç§»ï¼Œä¹Ÿå°±æ˜¯ç¦»å¼€åŸç‚¹çš„è·ç¦»ã€‚</p>
<p>æŒ¯åŠ¨çš„ä¸¤ä¸ªå…³é”®å±æ€§æ˜¯é¢‘ç‡å’ŒæŒ¯å¹…ï¼Œé¢‘ç‡æ˜¯æŒ‡ä¸€ç§’é’ŸæŒ¯åŠ¨å¤šå°‘æ¬¡ï¼Œå¯¹åº”äºéŸ³é«˜ï¼Œé¢‘ç‡è¶Šé«˜å£°éŸ³è¶Šå°–é”åˆºè€³ã€‚</p>
<p>æŒ¯å¹…åˆ™è¡¨ç¤ºæœ€å¤§çš„ä½ç§»å€¼ï¼Œå¯¹åº”äºéŸ³é‡ï¼ŒæŒ¯å¹…è¶Šå¤§å£°éŸ³è¶Šå“ã€‚</p>

<figure >
    
        <img src="img/200hz.png" width="100%" />
    
    
</figure>

<p>ä¸Šå›¾æ˜¯ç”¨ <a href="https://matplotlib.org/">matplotlib</a> ç»˜åˆ¶çš„ä¸€ä¸ªæ­£å¼¦æ³¢ï¼Œå¯ä»¥çœ‹å‡ºåœ¨ 0.01s å†…æŒ¯åŠ¨äº† 2 æ¬¡ï¼Œå› æ­¤é¢‘ç‡æ˜¯ 200ï¼ŒæŒ¯å¹…æ˜¯ 1ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">sin_wave</span><span class="p">(</span><span class="n">hz</span><span class="p">):</span>
  <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">hz</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&#34;Time&#34;</span><span class="p">)</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">sin_wave</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
</code></pre></div><p>è¿™ç§æœ€ç®€å•çš„æ³¢å½¢å¯¹åº”çš„å£°éŸ³å«åš pure toneï¼Œé¡¾åæ€ä¹‰ï¼Œéå¸¸çš„ç®€å•è€Œä¸”çº¯ç²¹ã€‚</p>
<p>ä¸‹é¢æ˜¯ç”¨ <a href="https://www.scipy.org/">scipy</a> ç”Ÿæˆçš„ 200hz çš„å£°éŸ³ï¼Œå¤§å®¶å¯ä»¥å¬å¬çœ‹ã€‚</p>
<audio id="audio" controls="" preload="none">
      <source id="wav" src="img/200hz.wav">
</audio>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">scipy.io.wavfile</span> <span class="k">as</span> <span class="nn">wav</span>

<span class="n">SAMPLE_RATE</span> <span class="o">=</span> <span class="mi">44100</span>
<span class="n">DURATION</span> <span class="o">=</span> <span class="mi">5</span>

<span class="k">def</span> <span class="nf">write_wav</span><span class="p">(</span><span class="n">hz</span><span class="p">):</span>
  <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">DURATION</span><span class="p">,</span> <span class="n">SAMPLE_RATE</span> <span class="o">*</span> <span class="n">DURATION</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
  <span class="n">tone</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">hz</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
  <span class="n">normalized_tone</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">((</span><span class="n">tone</span> <span class="o">/</span> <span class="n">tone</span><span class="o">.</span><span class="n">max</span><span class="p">())</span> <span class="o">*</span> <span class="mi">32767</span><span class="p">)</span>
  <span class="n">wav</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">hz</span><span class="si">}</span><span class="s2">hz.wav&#34;</span><span class="p">,</span> <span class="n">SAMPLE_RATE</span><span class="p">,</span> <span class="n">normalized_tone</span><span class="p">)</span>

<span class="n">write_wav</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
</code></pre></div><p>è¿™æ˜¯ 800hz çš„å£°éŸ³ï¼Œå¯ä»¥æ˜æ˜¾æ„Ÿè§‰åˆ°ï¼Œå£°éŸ³æ›´åŠ å°–é”äº†ã€‚</p>
<audio id="audio" controls="" preload="none">
      <source id="wav" src="img/800hz.wav">
</audio>
<p>ç°å®ä¸–ç•Œä¸­æˆ‘ä»¬å¬åˆ°çš„å£°éŸ³ä¸ä¼šæ˜¯ pure toneï¼Œè€Œæ˜¯å„ç§ pure tone å åŠ çš„ç»“æœã€‚</p>
<p>ä¸‹å›¾ä¸­è“è‰²æ˜¯ 200hzï¼Œé»„è‰²æ˜¯ 800hzï¼Œè€Œç»¿è‰²åˆ™æ˜¯å®ƒä»¬å åŠ çš„ç»“æœï¼Œå·²ç»ä¸å†æ˜¯ä¸€ä¸ª pure tone äº†ã€‚</p>

<figure >
    
        <img src="img/200-add-800hz.png" width="100%" />
    
    
</figure>

<p>ä¸‹é¢æ˜¯ç»¿è‰²æ›²çº¿å¬èµ·æ¥çš„æ•ˆæœã€‚</p>
<audio id="audio" controls="" preload="none">
      <source id="wav" src="img/mixed.wav">
</audio>
<p>æ€»ç»“ä¸€ä¸‹ï¼š</p>
<ul>
<li>æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæ³¢å½¢å›¾æ¥è¡¨ç¤ºå£°éŸ³ï¼Œå…¶ä¸­ X è½´æ˜¯æ—¶é—´ï¼ŒY è½´æ˜¯æŒ¯åŠ¨çš„ä½ç§»</li>
<li>æœ€ç®€å•çš„æ­£å¼¦æ³¢å¯¹åº”çš„å£°éŸ³å«åš pure tone</li>
<li>æ—¥å¸¸ä¸­æˆ‘ä»¬å¬åˆ°çš„å£°éŸ³éƒ½æ˜¯å„ç§ pure tone å åŠ çš„ç»“æœ</li>
</ul>
<p>Tip:</p>
<p>å¦‚æœæƒ³äº†è§£ä¸€ç‚¹ä¹ç†ï¼Œ<a href="https://www.lightnote.co/music-theory/sound-waves">LIGHTNOTE</a> éå¸¸ä¸é”™ã€‚</p>
<p>å®ƒçš„ç½‘é¡µåšå¾—å¾ˆæ£’ï¼Œé€šè¿‡äº’åŠ¨çš„å½¢å¼è®²è¿°åŸºæœ¬çš„ä¹ç†çŸ¥è¯†ï¼ŒåŒ…æ‹¬éŸ³é˜¶ã€å’Œå¼¦ï¼ŒåäºŒå¹³å‡å¾‹ç­‰ã€‚</p>
<br>
<h2 id="é‡‡æ ·">é‡‡æ ·</h2>
<p>å› ä¸ºå£°éŸ³æ˜¯ä¸€ä¸ªéšæ—¶é—´å˜åŒ–çš„è¿ç»­å‡½æ•°ï¼Œä»»æ„ä¸€æ®µé—´éš”å†…éƒ½æœ‰æ— ç©·å¤šä¸ªå€¼ï¼Œè€Œæ— ç©·å¤šçš„æ•°æ®æ˜¯æ²¡åŠæ³•å­˜å‚¨åœ¨è®¡ç®—æœºä¸­çš„ã€‚</p>
<p>æƒ³è¦å­˜å‚¨ï¼Œæˆ‘ä»¬å°±éœ€è¦å°†å®ƒç¦»æ•£åŒ–å˜æˆç¦»æ•£åºåˆ—ï¼Œå…·ä½“çš„æ–¹æ³•å°±æ˜¯é‡‡æ ·ï¼Œä½¿ç”¨å›ºå®šçš„é—´éš”å¯¹å‡½æ•°è¿›è¡Œæ±‚å€¼ã€‚</p>
<p>è¿™æ˜¯åŸå§‹çš„å£°éŸ³ã€‚</p>

<figure >
    
        <img src="img/origin.png" width="100%" />
    
    
</figure>

<p>è¿™æ˜¯é‡‡æ ·åçš„ç»“æœã€‚</p>

<figure >
    
        <img src="img/sampled.png" width="100%" />
    
    
</figure>

<p>é€šè¿‡é‡‡æ ·ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªæ— å°½åºåˆ—å˜æˆäº†ä¸€ä¸ªæœ‰é™åºåˆ—ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªå€¼å«åšæ ·æœ¬ï¼Œè¿™æ ·å°±å¯ä»¥æ–¹ä¾¿åœ°åœ¨è®¡ç®—æœºä¸­å­˜å‚¨äº†ã€‚</p>
<p>é‡‡æ ·çš„å…³é”®å‚æ•°æœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯é‡‡æ ·é¢‘ç‡å’Œé‡‡æ ·æ·±åº¦ã€‚</p>
<p>é‡‡æ ·é¢‘ç‡æ˜¯æŒ‡æ¯ç§’é’Ÿé‡‡æ ·å¤šå°‘æ¬¡ï¼Œå¾ˆæ˜æ˜¾ï¼Œé‡‡æ ·é¢‘ç‡è¶Šé«˜ï¼Œæ ·æœ¬è¶Šå¤šï¼Œæ•°æ®é‡è¶Šå¤§ï¼ŒåŒæ—¶ä¹Ÿæ›´æ¥è¿‘åŸå§‹çš„å£°éŸ³ã€‚</p>
<p>é‡‡æ ·æ·±åº¦æ˜¯æŒ‡ç”¨å¤šå°‘æ¯”ç‰¹å»å­˜å‚¨é‡‡æ ·å¾—åˆ°çš„å€¼ï¼Œä½¿ç”¨çš„æ¯”ç‰¹è¶Šå¤šï¼Œè¿˜åŸå¾—åˆ°çš„å£°éŸ³è¶Šç»†è…»ï¼Œå’Œå›¾ç‰‡çš„è‰²å½©æ·±åº¦æ˜¯ä¸€ä¸ªé“ç†ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬ç”¨ 16bit é‡‡æ ·æ·±åº¦å’Œ 44100 çš„é‡‡æ ·é¢‘ç‡ï¼Œé‚£ä¹ˆä¸€æ®µä¸€ç§’é’Ÿçš„å£°éŸ³å°±å˜æˆäº†ä¸€ä¸ª 44100 å¤§å°çš„ int16 æ•°ç»„ã€‚</p>
<p>å¾—åˆ°é‡‡æ ·å€¼æ•°ç»„ä»¥åï¼Œæ¥ä¸‹æ¥å¦‚ä½•å­˜å‚¨è¿™ä¸ªæ•°ç»„å°±æ˜¯ç¼–ç çš„èŒƒç•´äº†ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥å­˜ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨æŸç§ç®—æ³•å‹ç¼©ä»¥åå†å­˜ã€‚å„ç§å„æ ·çš„åŠæ³•ï¼Œå¯¹åº”ç€å„ç§å„æ ·çš„éŸ³é¢‘æ ¼å¼ï¼Œæ¯”å¦‚ MP3, AAC, WAV ç­‰ã€‚</p>
<p>è¿™å…¶ä¸­ AAC å’Œ MP3 æ ¼å¼æ˜¯æœ‰æŸçš„ï¼Œä¹Ÿå°±æ˜¯å­˜å‚¨ä»¥åå†è¯»å‡ºæ¥ï¼Œå¾—åˆ°çš„æ ·æœ¬å’ŒåŸå§‹çš„ä¼šæœ‰ä¸€äº›åŒºåˆ«ï¼Œä½†è¿™äº›åŒºåˆ«å¾ˆç»†å¾®ï¼Œå¯ä»¥å¿½ç•¥ã€‚æœ‰æŸçš„ç‰¹ç‚¹å°±æ˜¯åœ¨åŸºæœ¬ä¸å½±å“æœ€ç»ˆæ’­æ”¾æ•ˆæœçš„æƒ…å†µä¸‹ï¼Œå¤§å¹…åº¦å‡å°‘æ–‡ä»¶ä½“ç§¯ã€‚</p>
<p>è€Œ WAV åˆ™æ˜¯æ— æŸçš„ï¼Œè¾“å…¥æ˜¯ä»€ä¹ˆï¼Œè¯»å‡ºæ¥å°±æ˜¯ä»€ä¹ˆï¼Œç¼ºç‚¹è‡ªç„¶æ˜¯ä½“ç§¯è¦å¤§å¾ˆå¤šã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ scipy æ¥è¯»å– WAV éŸ³é¢‘ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">scipy.io.wavfile</span> <span class="k">as</span> <span class="nn">wav</span>

<span class="n">rate</span><span class="p">,</span> <span class="n">all_samples</span> <span class="o">=</span> <span class="n">wav</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&#34;xxx.wav&#34;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">rate</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_samples</span><span class="p">),</span> <span class="n">all_samples</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
<span class="c1"># 44100 10639873 int16</span>
<span class="c1"># ä¸Šé¢åˆ†åˆ«æ˜¯ï¼šé‡‡æ ·ç‡ï¼Œæ ·æœ¬æ€»æ•°ï¼Œä»¥åŠæ ·æœ¬å€¼çš„ç±»å‹</span>
<span class="c1"># int16 è¯´æ˜æ¯ä¸€ä¸ªæ ·æœ¬æ˜¯ 16bit æ•´æ•°</span>

<span class="nb">print</span><span class="p">(</span><span class="n">all_samples</span><span class="p">[:</span><span class="mi">20</span><span class="p">])</span>
<span class="c1"># [-41 -51 -49 -41 -28 -15 -20 -33 -32 -38 -54 -54 -44 -30  -8  10  11   2</span>
<span class="c1"># -14 -36]</span>
<span class="c1"># å¯ä»¥çœ‹åˆ°æ ·æœ¬å°±æ˜¯ä¸€ç»„æ•°å­—</span>
</code></pre></div><p>å¯ä»¥çœ‹å‡ºï¼Œé‡‡æ ·é¢‘ç‡æ˜¯ 44100ï¼Œä¸€å…±æœ‰ 10639873 ä¸ªæ ·æœ¬ï¼Œä½¿ç”¨ int16 è¿›è¡Œå­˜å‚¨ï¼Œè®¡ç®—å¯çŸ¥è¿™é¦–æ­Œçš„æ—¶é—´æ˜¯ 241 ç§’ã€‚</p>
<br>
<h2 id="å‚…é‡Œå¶å˜æ¢">å‚…é‡Œå¶å˜æ¢</h2>
<p>ç»™å®šä¸€ä¸ª 200hz çš„æ³¢å½¢å’Œä¸€ä¸ª 800hz çš„æ³¢å½¢ï¼Œè®¡ç®—å®ƒä»¬å åŠ ä»¥åçš„ç»“æœéå¸¸ç®€å•ï¼Œæ²¡æœ‰ä»»ä½•éš¾åº¦ã€‚</p>

<figure >
    
        <img src="img/200-add-800hz.png" width="100%" />
    
    
</figure>

<p>ä½†æ˜¯ï¼Œå¦‚æœç»™åˆ°å åŠ ä»¥åçš„ç»“æœå‘¢ï¼Ÿ</p>

<figure >
    
        <img src="img/mixed2.png" width="100%" />
    
    
</figure>

<p>èƒ½çœ‹å‡ºä¸Šé¢çš„ç»¿è‰²æ›²çº¿æ˜¯ 200hz+800hz å åŠ å¾—åˆ°çš„å—ï¼Ÿå®Œå…¨çœ‹ä¸å‡ºæ¥ï¼Œç”šè‡³ï¼Œè¿™æ ·çš„é€†æ¨çœŸçš„å¯è¡Œå—ï¼Ÿè¿˜æ˜¯è¯´å’Œæ°¸åŠ¨æœºä¸€æ ·åœ¨åŸç†ä¸Šå°±æ˜¯ä¸å¯è¡Œçš„ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯å¯è¡Œçš„ï¼Œé€šè¿‡å‚…é‡Œå¶å˜æ¢ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªå¤åˆæ³¢å½¢æ‹†è§£ä¸ºæ„æˆå®ƒçš„ç®€å•æ³¢å½¢ã€‚</p>
<p>æƒ³æƒ³éƒ½è§‰å¾—ä¸å¯æ€è®®ï¼Œè¿™æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿå‚…é‡Œå¶åˆæ˜¯æ€ä¹ˆæƒ³åˆ°çš„ï¼Ÿä¸å¾—ä¸è¯´åå…«ä¸–çºªçš„æ³•å›½æ•°å­¦å®¶å‚…é‡Œå¶æ˜¯ä¸€ä¸ªå¤©æ‰ï¼Œè®©äººä»°æœ›ã€‚</p>
<p>Tip: 3Blue1Brown æœ‰ä¸€ä¸ªè§†é¢‘ä»‹ç»å‚…é‡Œå¶å˜æ¢çš„åŸç†ï¼Œéå¸¸æ£’ï¼š<a href="https://www.youtube.com/watch?v=spUNpyF58BY">å½¢è±¡çš„ä»‹ç»ï¼šä»€ä¹ˆæ˜¯å‚…é‡Œå¶å˜æ¢ï¼Ÿ</a></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹æ€æ ·é€šè¿‡å‚…é‡Œå¶å˜æ¢æ¥æ‹†è§£å¤åˆæ³¢å½¢ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è®¤ä¸ºå‚…é‡Œå¶å˜æ¢æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„è¾“å…¥ä¸º N ä¸ªå®æ•°ï¼Œä»£è¡¨é‡‡æ ·å€¼ï¼Œè¾“å‡ºä¸º N ä¸ªå¤æ•°ï¼Œä»£è¡¨ä¸åŒé¢‘ç‡çš„åˆ†é‡ï¼Œè¿™é‡Œæˆ‘ä»¬å¿½ç•¥å¤æ•°çš„å®éƒ¨å’Œè™šéƒ¨ï¼Œåªå…³å¿ƒå®ƒçš„æ¨¡ï¼Œä¹Ÿå°±æ˜¯ç»å¯¹å€¼ã€‚</p>
<p>Tip: è¿™é‡Œå…³äºå‚…é‡Œå¶å˜æ¢çš„è¯´æ³•å¹¶ä¸å®Œæ•´ï¼Œæ¯”å¦‚å‚…é‡Œå¶å˜æ¢çš„è¾“å…¥ä¹Ÿå¯ä»¥æ˜¯å¤æ•°ã€‚ä½†æ˜¯å¯¹æˆ‘ä»¬æ¥è¯´ç†è§£åˆ°è¿™ä¸€å±‚é¢å°±å¤Ÿäº†ã€‚å¦‚æœæƒ³è¦æ·±å…¥ç ”ç©¶ï¼Œå¯ä»¥å»å­¦ä¹ æ•°å­—ä¿¡å·å¤„ç†ç›¸å…³çš„è¯¾ç¨‹ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨ scipy æ¥å®é™…è¿›è¡Œä¸€ä¸‹å‚…é‡Œå¶å˜æ¢ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">scipy.fft</span> <span class="kn">import</span> <span class="n">fft</span><span class="p">,</span> <span class="n">fftfreq</span>

<span class="c1"># è¿™æ˜¯å³å°†è¿›è¡Œå˜æ¢çš„é‡‡æ ·å€¼: [0, 1, 2, 3, 4, 5, 6, 7]</span>
<span class="n">samples</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>

<span class="c1"># è¿™æ˜¯å‚…é‡Œå¶å˜æ¢çš„ç»“æœ</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">fft</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">y</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="c1"># å˜æ¢ç»“æœä¸º 8 ä¸ªå¤æ•°</span>
<span class="c1"># (28-0j)</span>
<span class="c1"># (-3.9999999999999996+9.65685424949238j)</span>
<span class="c1"># (-4+4j)</span>
<span class="c1"># (-4+1.6568542494923797j)</span>
<span class="c1"># (-4-0j)</span>
<span class="c1"># (-4-1.6568542494923797j)</span>
<span class="c1"># (-4-4j)</span>
<span class="c1"># (-3.9999999999999996-9.65685424949238j)</span>

<span class="c1"># x æ˜¯ä¸Šé¢æ¯ä¸ªç»“æœå¯¹åº”çš„é¢‘ç‡</span>
<span class="c1"># è¿™é‡Œ fftfreq å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ ·æœ¬æ•°é‡</span>
<span class="c1"># ç¬¬äºŒä¸ªå‚æ•°ä¸º é‡‡æ ·ç‡çš„ å€’æ•°ï¼Œæˆ‘ä»¬å‡å®šé‡‡æ ·ç‡ä¸º 8</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">fftfreq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">samples</span><span class="p">),</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">8</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1"># [ 0.  1.  2.  3. -4. -3. -2. -1.]</span>
<span class="c1"># è¿™é‡Œæ„å‘³ç€ y[0] å¯¹åº”çš„é¢‘ç‡æ˜¯ 0ï¼Œy[1] å¯¹åº”çš„é¢‘ç‡æ˜¯ 1</span>
<span class="c1"># è´Ÿæ•°é¢‘ç‡æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Ÿæˆ‘ä»¬å¯ä»¥ä¸ç®¡ï¼Œå¿½ç•¥</span>
</code></pre></div><p>ä¸Šé¢çš„ä»£ç æˆ‘ä»¬æ„é€ äº† 8 ä¸ªæ•°å­—è¿›è¡Œå‚…é‡Œå¶å˜æ¢ï¼Œå¹¶å‡å®šè¿™ç»„æ ·æœ¬æ˜¯ä½¿ç”¨é‡‡æ ·ç‡ 8 è¿›è¡Œé‡‡æ ·å¾—åˆ°çš„ã€‚</p>
<p>å˜æ¢çš„ç»“æœæ˜¯ 8 ä¸ªå¤æ•°ï¼Œè¿™ 8 ä¸ªå¤æ•°å¯¹åº” 8 ä¸ªé¢‘ç‡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œæ­£é¢‘ç‡å’Œè´Ÿé¢‘ç‡å¯¹åº”çš„å˜æ¢ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿå°±æ˜¯å˜æ¢åçš„ç»“æœæ˜¯å¯¹ç§°çš„ã€‚</p>
<p>ä¸Šé¢å¾—åˆ°çš„ç»“æœæ„ä¹‰ä¸å¤§ï¼Œå› ä¸ºè¾“å…¥æ²¡ä»€ä¹ˆæ„ä¹‰ã€‚ç°åœ¨æˆ‘ä»¬ä½¿ç”¨å‚…é‡Œå¶å˜æ¢å¤„ç†ä¸€ä¸‹ 200hz+800hz å åŠ åçš„æ³¢å½¢ï¼Œçœ‹çœ‹æ˜¯å¦èƒ½è¿˜åŸå› 200hz å’Œ 800hzã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">import</span> <span class="n">figure</span>
<span class="kn">from</span> <span class="nn">scipy.fft</span> <span class="kn">import</span> <span class="n">fft</span><span class="p">,</span> <span class="n">fftfreq</span>

<span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>

<span class="n">DURATION</span> <span class="o">=</span> <span class="mf">0.01</span>
<span class="n">SAMPLE_RATE</span> <span class="o">=</span> <span class="mi">44100</span>

<span class="k">def</span> <span class="nf">gen_sine_wave</span><span class="p">(</span><span class="n">freq</span><span class="p">):</span>
  <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">DURATION</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">DURATION</span> <span class="o">*</span> <span class="n">SAMPLE_RATE</span><span class="p">),</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">freq</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">y</span>

<span class="n">hz200</span> <span class="o">=</span> <span class="n">gen_sine_wave</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="n">hz800</span> <span class="o">=</span> <span class="n">gen_sine_wave</span><span class="p">(</span><span class="mi">800</span><span class="p">)</span>

<span class="c1"># å åŠ åçš„é‡‡æ ·æ•°æ®</span>
<span class="c1"># è¿™é‡Œæ¯ä¸ªæ ·æœ¬ä¸æ˜¯ int16ï¼Œè€Œæ˜¯ floatï¼Œæ— å…³ç´§è¦</span>
<span class="n">total</span> <span class="o">=</span> <span class="n">hz200</span> <span class="o">+</span> <span class="n">hz800</span>

<span class="n">y</span> <span class="o">=</span> <span class="n">fft</span><span class="p">(</span><span class="n">total</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">fftfreq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">total</span><span class="p">),</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">SAMPLE_RATE</span><span class="p">)</span>

<span class="c1"># æ­¤æ—¶æ¨ªè½´æ˜¯é¢‘ç‡ï¼Œçºµè½´æ˜¯è¯¥é¢‘ç‡çš„åˆ†é‡</span>
<span class="c1"># ä½¿ç”¨ np.abs è®¡ç®—å¤æ•°çš„æ¨¡</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div><p>å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œé¦–å…ˆè¾“å‡ºç»“æœæ˜¯å·¦å³å¯¹ç§°çš„ï¼Œæˆ‘ä»¬å¿½ç•¥æ‰è´Ÿé¢‘ç‡éƒ¨åˆ†ï¼Œåªå…³æ³¨æ­£é¢‘ç‡ã€‚</p>
<p>å…¶æ¬¡ï¼Œå‚…é‡Œå¶å˜æ¢å‘Šè¯‰æˆ‘ä»¬è¯¥è¾“å…¥ä¿¡å·ç”± 2 ä¸ªé¢‘ç‡ç»„æˆï¼Œç¨‹åºè¿è¡Œæ—¶é¼ æ ‡æ”¾ä¸Šå»å¯ä»¥çœ‹å‡ºæ˜¯ 200 å’Œ 800ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡å‚…é‡Œå¶å˜æ¢ï¼Œæˆ‘ä»¬å°†å¤åˆæ³¢å½¢æ‹†è§£ä¸ºäº†ç®€å•æ³¢å½¢ã€‚</p>
<p>æˆ–è€…è¯´ï¼Œé€šè¿‡å‚…é‡Œå¶å˜æ¢ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªä¿¡å·æ‹†è§£ä¸ºäº†ä¸€ç»„ä¸åŒé¢‘ç‡çš„æ­£å¼¦æ³¢ï¼Œå°†å®ƒä»æ—¶åŸŸå˜æ¢åˆ°äº†é¢‘åŸŸã€‚ä¿¡å·è¿˜æ˜¯è¿™ä¸ªä¿¡å·ï¼Œåªä¸è¿‡æ¢ä¸ªè§’åº¦å»çœ‹å®ƒã€‚</p>
<p><img loading="lazy" src="https://cjting.me/2021/08/07/fourier-transform-and-audio-visualization/transform.png" alt="img"  />
</p>
<p>æ€»ç»“ä¸€ä¸‹ï¼š</p>
<ul>
<li>å‚…é‡Œå¶å˜æ¢æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸²æ•°å­—ä»£è¡¨æ ·æœ¬å€¼ï¼Œè¾“å‡ºä¸€ä¸²å¤æ•°ä»£è¡¨é¢‘ç‡åˆ†é‡</li>
<li>æ¯ä¸ªæ•°å­—å…·ä½“ä»£è¡¨çš„é¢‘ç‡å¯ä»¥æ ¹æ®æ ·æœ¬æ•°é‡å’Œé‡‡æ ·é¢‘ç‡è®¡ç®—å¾—çŸ¥</li>
<li>æˆ‘ä»¬ä¸å…³å¿ƒå¤æ•°çš„æ–¹å‘ï¼Œæˆ‘ä»¬åªå…³å¿ƒå¤æ•°çš„æ¨¡</li>
<li>å‚…é‡Œå¶è¾“å‡ºçš„ç»“æœæ˜¯å·¦å³å¯¹ç§°çš„ï¼Œå› æ­¤åªæœ‰ä¸€åŠçš„ä¿¡æ¯æœ‰ä»·å€¼</li>
</ul>
<p>å› ä¸ºè¾“å‡ºç»“æœæ˜¯å¯¹ç§°çš„ï¼Œåªæœ‰ä¸€åŠçš„ä¿¡æ¯æœ‰ä»·å€¼ï¼Œå› æ­¤æœ‰ä¸€ä¸ªå˜ä½“å«åš <code>rfft</code>ï¼Œåªè¿”å›ä¸€åŠçš„ä¿¡æ¯ï¼Œè®¡ç®—é€Ÿåº¦å¯ä»¥æ›´å¿«ä¸€äº›ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy.fft</span> <span class="kn">import</span> <span class="n">rfft</span><span class="p">,</span> <span class="n">rfftfreq</span>

<span class="n">SAMPLE_RATE</span> <span class="o">=</span> <span class="mi">8</span>

<span class="n">samples</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>

<span class="c1"># æ­¤æ—¶ x å’Œ y éƒ½æ˜¯ 5 ä¸ªå€¼</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">rfft</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">rfftfreq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">samples</span><span class="p">),</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">SAMPLE_RATE</span><span class="p">)</span>

<span class="c1"># y[0] è¡¨ç¤ºé¢‘ç‡ 0 çš„åˆ†é‡</span>
<span class="c1"># y[1] è¡¨ç¤ºé¢‘ç‡ 1 çš„åˆ†é‡</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1"># [0. 1. 2. 3. 4.]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">y</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="c1"># å’Œä¹‹å‰ fft/fftfreq çš„è¾“å‡ºå¯¹æ¯”ï¼Œå¯ä»¥å‘ç°ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡å»æ‰äº†å¯¹ç§°çš„å†—ä½™ä¿¡æ¯</span>
<span class="c1"># (28+0j)</span>
<span class="c1"># (-3.9999999999999996+9.65685424949238j)</span>
<span class="c1"># (-4+4j)</span>
<span class="c1"># (-4+1.6568542494923797j)</span>
<span class="c1"># (-4+0j)</span>
</code></pre></div><br>
<h2 id="éŸ³é¢‘å¯è§†åŒ–">éŸ³é¢‘å¯è§†åŒ–</h2>
<p>åˆ°äº†è¿™é‡Œæ‰€æœ‰å®ç°éŸ³é¢‘å¯è§†åŒ–æ‰€éœ€è¦çš„çŸ¥è¯†éƒ½å¤‡é½äº†ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬å¯ä»¥çŒœåˆ°ï¼ŒéšéŸ³ä¹è·³åŠ¨çš„æ¯ä¸ªæŸ±å­ï¼Œå¯¹åº”çš„æ˜¯ä¸€ä¸ªé¢‘ç‡æˆ–ä¸€ç»„é¢‘ç‡ï¼Œè€ŒæŸ±å­çš„é«˜åº¦åˆ™æ˜¯é¢‘ç‡çš„åˆ†é‡å¤§å°ï¼Œè¿™ä¸¤ä¸ªä¿¡æ¯å‚…é‡Œå¶å˜æ¢éƒ½èƒ½ç»™åˆ°ã€‚</p>
<p>ç°åœ¨å‰©ä¸‹çš„é—®é¢˜åˆ™æ˜¯è¾“å…¥æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬ä¸å¯èƒ½æŠŠä¸€é¦–æ­Œæ›²çš„æ‰€æœ‰æ ·æœ¬ä½œä¸ºè¾“å…¥è¿›è¡Œå‚…é‡Œå¶å˜æ¢ï¼Œå¦‚æœè¿™æ ·åšï¼Œæˆ‘ä»¬åªèƒ½å¾—åˆ°ä¸€ä»½é¢‘ç‡æ•°æ®ã€‚</p>
<p>æˆ‘ä»¬å¸Œæœ›å¾—åˆ°çš„é¢‘ç‡æ•°æ®éšç€éŸ³ä¹åœ¨å˜åŒ–ï¼Œå› æ­¤è¿™é‡Œè¦é€‰æ‹©ä¸€ä¸ªçª—å£å¤§å°ï¼ˆFFT_SIZEï¼‰ï¼Œæ¯”å¦‚ 2048ã€‚éšç€éŸ³ä¹çš„æ’­æ”¾ï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½ä»å½“å‰æ’­æ”¾ä½ç½®é€‰æ‹© 2048 ä¸ªæ ·æœ¬ç„¶åè¿›è¡Œå‚…é‡Œå¶å˜æ¢ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬çš„åˆæ­¥éŸ³é¢‘å¯è§†åŒ–æ–¹æ¡ˆå°±ç¡®å®šäº†ï¼š</p>
<ul>
<li>è§£æéŸ³é¢‘æ–‡ä»¶å¾—åˆ° allSamples</li>
<li>æ¯æ¬¡ç»˜å›¾æ—¶ï¼Œä»å½“å‰ sample å¼€å§‹é€‰æ‹© FFT_SIZE ä¸ª sample</li>
<li>å¯¹è¿™äº› sample è¿›è¡Œå‚…é‡Œå¶å˜æ¢</li>
<li>å¯¹å˜æ¢å¾—åˆ°çš„å¤æ•°æ±‚æ¨¡</li>
<li>æŠŠç»“æœå˜æ¢åˆ° 0 ~ 1 ç„¶åç»˜å›¾</li>
</ul>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ç”¨ Web æ¥å®ç°ä¸€ä¸ªç®€å•çš„éŸ³é¢‘å¯è§†åŒ–å·¥å…·ã€‚</p>
<p>é¦–å…ˆï¼Œè§£æéŸ³é¢‘æ–‡ä»¶å¾—åˆ° allSamples æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ WebAudio çš„ APIã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="c1">// å¾—åˆ°æŸä¸ªéŸ³é¢‘æ–‡ä»¶çš„äºŒè¿›åˆ¶æ•°æ®
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">ab</span> <span class="o">=</span> <span class="nx">fetch</span><span class="p">(</span><span class="s2">&#34;xxx.mp3&#34;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="p">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">arrayBuffer</span><span class="p">())</span>

<span class="c1">// æ–°å»º WebAudio context
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">audioCtx</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AudioContext</span><span class="p">()</span>

<span class="c1">// è§£æ arrayBuffer
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">audioBuffer</span> <span class="o">=</span> <span class="nx">audioCtx</span><span class="p">.</span><span class="nx">decodeAudioData</span><span class="p">(</span><span class="nx">ab</span><span class="p">)</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">audioBuffer</span><span class="p">)</span>
<span class="c1">// AudioBuffer {length: 10639872, duration: 241.2669387755102, sampleRate: 44100, numberOfChannels: 2}
</span><span class="c1">//  duration: 241.2669387755102
</span><span class="c1">//  length: 10639872
</span><span class="c1">//  numberOfChannels: 2
</span><span class="c1">//  sampleRate: 44100
</span><span class="c1">// [[Prototype]]: AudioBuffer
</span><span class="c1"></span>
<span class="c1">// ä¸€èˆ¬æ¥è¯´éŸ³é¢‘éƒ½æœ‰å¤šä¸ªå£°é“ï¼Œç”¨äºç«‹ä½“å£°æ’­æ”¾
</span><span class="c1">// è¿™é‡Œæˆ‘ä»¬é€‰ç¬¬ä¸€ä¸ªå£°é“å°±å¯ä»¥äº†
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">allSamples</span> <span class="o">=</span> <span class="nx">audioBuffer</span><span class="p">.</span><span class="nx">getChannelData</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1">// allSamples å°±æ˜¯æˆ‘ä»¬è¦çš„æ ·æœ¬æ•°ç»„ï¼Œæ¯ä¸€ä¸ªæ ·æœ¬å€¼æ˜¯æµ®ç‚¹æ•°
</span><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">allSamples</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="c1">// Float32Array(10) [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
</span></code></pre></div><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>requestAnimationFrame</code> æ¥è¿›è¡Œç»˜åˆ¶ã€‚</p>
<p>æ¯æ¬¡ç»˜åˆ¶çš„æ—¶å€™ï¼Œéœ€è¦å…ˆè·å–å½“å‰çš„æ’­æ”¾ä½ç½®ã€‚audioBuffer ä¸­æœ‰éŸ³é¢‘çš„æ€»æ—¶é—´ï¼Œé€šè¿‡ <code>audioCtx.currentTime</code> æˆ‘ä»¬å¯ä»¥å¾—çŸ¥å½“å‰çš„æ’­æ”¾æ—¶é—´ï¼Œä¸¤ä¸ªç›¸é™¤ä¾¿æ˜¯æ’­æ”¾ä½ç½®ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="c1">// ç”¨æˆ·ç‚¹å‡»æ’­æ”¾æ—¶
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">onPlay</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="c1">// è®°å½•ä¸‹æ’­æ”¾çš„å¼€å§‹æ—¶é—´
</span><span class="c1"></span>  <span class="kr">const</span> <span class="nx">startTime</span> <span class="o">=</span> <span class="nx">audioCtx</span><span class="p">.</span><span class="nx">currentTime</span>

  <span class="kr">const</span> <span class="nx">draw</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">draw</span><span class="p">)</span>

    <span class="c1">// ç›®å‰æ’­æ”¾äº†å¤šå°‘æ—¶é—´ (seconds)
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">cur</span> <span class="o">=</span> <span class="nx">audioCtx</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">startTime</span>

    <span class="c1">// æ’­æ”¾çš„è¿›åº¦æ˜¯å¤šå°‘
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">per</span> <span class="o">=</span> <span class="nx">cur</span> <span class="o">/</span> <span class="nx">audioBuffer</span><span class="p">.</span><span class="nx">duration</span>

    <span class="kr">const</span> <span class="nx">startIndex</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">allSamples</span><span class="p">.</span><span class="nx">length</span> <span class="o">*</span> <span class="nx">per</span><span class="p">)</span>

    <span class="c1">// ä» startIndex å¼€å§‹åˆ‡å‰² FFT_SIZE ä¸ª sample å‡ºæ¥
</span><span class="c1"></span>    <span class="c1">// æ­¤æ—¶è¦è¿›è¡Œå‚…é‡Œå¶å˜æ¢çš„ samples å°±å‡†å¤‡å¥½äº†
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">samples</span> <span class="o">=</span> <span class="nx">allSamples</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">startIndex</span><span class="p">,</span> <span class="nx">startIndex</span> <span class="o">+</span> <span class="nx">FFT_SIZE</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">draw</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><p>æ¥ä¸‹æ¥å°±æ˜¯å‚…é‡Œå¶å˜æ¢äº†ï¼Œè¿™é‡Œæˆ‘æ‰¾äº†ä¸€ä¸‹ï¼ŒJS ç›¸å…³çš„åº“å¾ˆå°‘ï¼Œä¸è¿‡éªŒè¯ä¸‹æ¥ <a href="https://github.com/indutny/fft.js/">fft.js</a> æ˜¯å¯ç”¨çš„ã€‚</p>
<p>Tip: ä¸å¾—ä¸è¯´ç§‘å­¦è®¡ç®—è¿˜æ˜¯ Python æ–¹ä¾¿ï¼Œnumpy å’Œ scipy çœŸçš„å¤ªå¥½ç”¨äº†ã€‚</p>
<p>ç»è¿‡ FFT ä»¥åï¼Œæˆ‘ä»¬å¾—åˆ°äº† 1025 ä¸ªå¤æ•°ï¼Œå¯¹è¿™äº›å¤æ•°å–æ¨¡ï¼Œå¾—åˆ° 1025 ä¸ªå®æ•°ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="c1">// JS æ²¡æœ‰å¤æ•°ï¼Œæˆ‘ä»¬è‡ªè¡Œå®šä¹‰ä¸€ä¸ª
</span><span class="c1"></span><span class="kr">class</span> <span class="nx">Complex</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="nx">real</span><span class="p">,</span> <span class="nx">imag</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">real</span> <span class="o">=</span> <span class="nx">real</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">imag</span> <span class="o">=</span> <span class="nx">imag</span>
  <span class="p">}</span>

  <span class="nx">abs</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">real</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">real</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">imag</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">imag</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">rfft</span> <span class="o">=</span> <span class="p">(</span><span class="nx">samples</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">f</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FFTJS</span><span class="p">(</span><span class="nx">samples</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
  <span class="kr">const</span> <span class="nx">out</span> <span class="o">=</span> <span class="nx">f</span><span class="p">.</span><span class="nx">createComplexArray</span><span class="p">()</span>

  <span class="kr">const</span> <span class="nx">N</span> <span class="o">=</span> <span class="nx">samples</span><span class="p">.</span><span class="nx">length</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span>

  <span class="nx">f</span><span class="p">.</span><span class="nx">realTransform</span><span class="p">(</span><span class="nx">out</span><span class="p">,</span> <span class="nx">samples</span><span class="p">)</span>

  <span class="kr">const</span> <span class="nx">value</span> <span class="o">=</span> <span class="p">[]</span>

  <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">N</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">value</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Complex</span><span class="p">(</span><span class="nx">out</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="nx">i</span><span class="o">+</span><span class="mi">0</span><span class="p">],</span> <span class="nx">out</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">value</span>
<span class="p">}</span>

<span class="c1">// æ­¤æ—¶æˆ‘ä»¬å¾—åˆ°äº†ä¸€ç»„å®æ•°
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">rfft</span><span class="p">(</span><span class="nx">samples</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">c</span> <span class="p">=&gt;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">abs</span><span class="p">())</span>
</code></pre></div><p>Tip:</p>
<p>å…¶å®è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬ä¸ä¼šç›´æ¥æŠŠ samples è¿›è¡Œ FFT å˜æ¢ï¼Œè€Œæ˜¯ä¼šå…ˆåº”ç”¨ä¸€ä¸ª Window Functionï¼Œè¿™æ ·åšçš„ç›®çš„å¦‚æœæ„Ÿå…´è¶£å¯ä»¥è‡ªè¡Œäº†è§£ã€‚</p>
<p>å¯¹äºæˆ‘ä»¬æ¥è¯´ï¼ŒWindow Function å°±æ˜¯ä¸€ä¸ª <code>number[] -&gt; number[]</code> çš„å‡½æ•°ã€‚</p>
<p>æ¥ä¸‹æ¥å°±æ˜¯å°†è¿™äº›æ•°å­—å˜æ¢åˆ° 0 ~ 1 åŒºé—´ï¼Œè¿™ä¸€æ­¥æ¯”è¾ƒç®€å•ï¼Œè§‚å¯Ÿä¸€ä¸‹æœ€å¤§æœ€å°å€¼åšä¸ªçº¿æ€§å˜æ¢å°±è¡Œäº†ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">y</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">v</span> <span class="p">=&gt;</span> <span class="p">(</span><span class="nx">v</span> <span class="o">+</span> <span class="mi">20</span><span class="p">)</span> <span class="o">/</span> <span class="mi">80</span><span class="p">)</span>
</code></pre></div><p>æœ‰äº†ä¸€ç»„ 0 ~ 1 çš„æ•°å­—ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ Canvas è¿›è¡Œç»˜å›¾äº†ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">W</span> <span class="o">=</span> <span class="mi">800</span> <span class="c1">// canvas width
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">H</span> <span class="o">=</span> <span class="mi">600</span> <span class="c1">// canvas height
</span><span class="c1"></span>
<span class="kr">const</span> <span class="nx">draw</span> <span class="o">=</span> <span class="p">(</span><span class="nx">spectrum</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">W</span><span class="p">,</span> <span class="nx">H</span><span class="p">)</span>

  <span class="kr">const</span> <span class="nx">barWidth</span> <span class="o">=</span> <span class="nx">W</span> <span class="o">/</span> <span class="nx">spectrum</span><span class="p">.</span><span class="nx">length</span>

  <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">spectrum</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">spectrum</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
    <span class="kr">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">*</span> <span class="nx">barWidth</span>
    <span class="kr">const</span> <span class="nx">height</span> <span class="o">=</span> <span class="nx">v</span> <span class="o">*</span> <span class="nx">H</span>
    <span class="kr">const</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">H</span> <span class="o">-</span> <span class="nx">height</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">barWidth</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>ç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹ç»“æœï¼Œæ‰“å¼€ <a href="http://cjting.me/audio-vis-demo/">audio-vis-demo</a>ï¼Œé€‰æ‹©ä¸€ä¸ªéŸ³é¢‘æ–‡ä»¶ï¼Œå–æ¶ˆå‹¾é€‰ â€œSmoothâ€ï¼Œç‚¹å‡»æ’­æ”¾ï¼Œç„¶åæˆ‘ä»¬ä¼šå‘ç°ï¼ŒæŸ±å­å¯ä»¥æ­£å¸¸åœ°ç»˜åˆ¶å‡ºæ¥ï¼Œä½†æ˜¯å®ƒä»¬â€è·³è·ƒâ€œå¾—éå¸¸å‰å®³ï¼Œä¸å¤Ÿå¹³ç¨³ã€‚</p>
<p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ¼äº†ä¸€æ­¥ï¼Œå«åš Time smoothingã€‚</p>
<p>å…·ä½“çš„æœºç†æˆ‘å¹¶ä¸ç†è§£ï¼Œæ‰€ä»¥å°±ä¸å†è¯´æ˜äº†ï¼Œå¯¹æˆ‘ä»¬çš„ç›®æ ‡æ¥è¯´ï¼Œè¿™éƒ¨åˆ†å½“åšé»‘ç›’å¤„ç†å°±å¯ä»¥äº†ã€‚</p>
<p>è¿™é‡Œæˆ‘æƒ³è¯´æ˜ä¸€ä¸‹ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œå­¦ä¹ ä»»ä½•çŸ¥è¯†éƒ½æ˜¯åˆ†å±‚çš„ï¼Œå­¦åˆ°è‡ªå·±æ„Ÿå…´è¶£çš„å±‚çº§å³å¯ï¼Œå¯¹ä¸‹ä¸€å±‚æœ‰ä¸€ä¸ªå®šæ€§çš„è®¤è¯†ï¼Œéœ€è¦çš„æ—¶å€™å¯ä»¥å†å»ç»†ç©¶ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è®¤ä¸º Time smoothing å°±æ˜¯å¯¹å½“å‰çš„ result å’Œä¸Šä¸€ä¸ª result è¿›è¡ŒæŸç§æ“ä½œï¼Œç„¶åè¾“å‡ºä¸€ç»„å€¼ã€‚</p>
<p>ä¸‹é¢æ˜¯å…·ä½“çš„ç®—æ³•ï¼Œä»£ç éå¸¸ç®€å•ï¼Œä½†æ˜¯æ•ˆæœéå¸¸æ˜æ˜¾ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">smoothConstantDown</span> <span class="o">=</span> <span class="mf">0.08</span>
<span class="kr">const</span> <span class="nx">smoothConstantUp</span> <span class="o">=</span> <span class="mf">0.8</span>

<span class="k">if</span><span class="p">(</span><span class="nx">lastY</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">lastY</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">y</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nx">lastY</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
      <span class="nx">lastY</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">y</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">*</span> <span class="nx">smoothConstantDown</span> <span class="o">+</span> <span class="nx">lastY</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">smoothConstantDown</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">lastY</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">y</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">*</span> <span class="nx">smoothConstantUp</span> <span class="o">+</span> <span class="nx">lastY</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">smoothConstantUp</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nx">lastY</span> <span class="o">=</span> <span class="nx">y</span>
<span class="p">}</span>
</code></pre></div><p>æˆ‘ä»¬åœ¨ Demo ä¸­å‹¾é€‰ä¸Š â€œSmoothâ€ å¯ç”¨è¿™ä¸ªç®—æ³•ï¼Œç„¶åå°±ä¼šå‘ç°å›¾åƒé©¬ä¸Šå˜å¾—ä¸å†è·³åŠ¨äº†ï¼Œæ•´ä½“ç»“æœå·²ç»å’Œå…¶ä»–æ’­æ”¾å™¨å¾ˆæ¥è¿‘äº†ã€‚</p>
<p>æ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯ä¸ºäº†å­¦ä¹ åº•å±‚çš„æ­¥éª¤å’Œç»†èŠ‚ï¼Œæ‰€ä»¥å¾ˆå¤šæ“ä½œéƒ½è‡ªå·±æ¥åšã€‚å¦‚æœçœŸçš„éœ€è¦å¼€å‘ç›¸å…³åŠŸèƒ½ï¼Œä½¿ç”¨ WebAudio çš„ API æ˜¯æ›´åˆç†çš„é€‰æ‹©ã€‚</p>
<p>æˆ‘åœ¨ <a href="http://cjting.me/audio-vis-demo/">audio-vis-demo</a> ä¸­ä¹ŸåŸºäº WebAudio çš„ API è¿›è¡Œäº†å®ç°ï¼Œä¸»è¦æ˜¯ä¸ºäº†å¯¹æ¯”å’Œå‚è€ƒã€‚</p>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å®Œæ•´åœ°å®ç°äº†ä»ä¸€ç»„æ•°å­—åˆ°å¯è§†åŒ–å›¾å½¢çš„å…¨è¿‡ç¨‹ï¼Œæ·±åˆ‡åœ°æ„Ÿå—åˆ°äº†æ•°å­¦çš„é­…åŠ›ã€‚è¿™é‡Œçš„ç¼–ç ä¸€ç‚¹ä¹Ÿä¸éš¾ï¼Œéš¾çš„ï¼Œæˆ–è€…æ˜¯è®©äººèµå¹çš„ï¼Œæ˜¯èƒŒåçš„æ•°å­¦ï¼Œäººç±»æ™ºæ…§çš‡å† ä¸Šæœ€ç¿çƒ‚çš„æ˜ç ã€‚</p>
<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>PNAS | å†å²è¯­è¨€è®°å½•æ­ç¤ºäº†è¿‘å‡ åå¹´æ¥è®¤çŸ¥æ‰­æ›²çš„æ¿€å¢</title>
      <link>https://hidadeng.github.io/blog/pnas_historical_language/</link>
      <pubDate>Sun, 19 Dec 2021 20:43:10 +0600</pubDate>
      
      <guid>/blog/pnas_historical_language/</guid>
      <description> æ‚£æœ‰æŠ‘éƒç—‡çš„äººå®¹æ˜“å‡ºç°é€‚åº”ä¸è‰¯çš„æ€ç»´æ¨¡å¼ï¼Œå³è®¤çŸ¥æ‰­æ›²ï¼Œä»–ä»¬ä»¥è¿‡äºæ¶ˆæå’Œä¸å‡†ç¡®çš„æ–¹å¼æ€è€ƒè‡ªå·±ã€ä¸–ç•Œå’Œæœªæ¥ã€‚ è¿™äº›æ‰­æ›²ä¸ä¸ªäººæƒ…ç»ªã€è¡Œä¸ºå’Œè¯­è¨€çš„æ˜¾ç€å˜åŒ–æœ‰å…³ã€‚ **æˆ‘ä»¬å‡è®¾ç¤¾ä¼šå¯ä»¥ç»å†ç±»ä¼¼çš„é›†ä½“å¿ƒç†å˜åŒ–ï¼Œè¿™äº›å˜åŒ–ä¼šåæ˜ åœ¨è¯­è¨€ä½¿ç”¨çš„å†å²è®°å½•ä¸­**ã€‚æˆ‘ä»¬è°ƒæŸ¥äº†è¿‡å» **125 å¹´è¶… 1400 ä¸‡æœ¬ä¹¦ä¸­è®¤çŸ¥æ‰­æ›²ï¼ˆcongnition disorderï¼‰**çš„æ–‡æœ¬æ ‡è®°çš„æµè¡Œæƒ…å†µï¼Œå¹¶è§‚å¯Ÿåˆ°è‡ª 1980 å¹´ä»£ä»¥æ¥å®ƒä»¬çš„æµè¡Œç¨‹åº¦æ¿€å¢ï¼Œè¾¾åˆ°è¶…è¿‡å¤§è§æ¡å’Œä¸¤æ¬¡ä¸–ç•Œå¤§æˆ˜çš„æ°´å¹³ã€‚ **è¿™ç§æ¨¡å¼ä¼¼ä¹ä¸æ˜¯ç”±è¯ä¹‰ã€å‡ºç‰ˆå’Œå†™ä½œæ ‡å‡†æˆ– Google å›¾ä¹¦æ ·æœ¬çš„å˜åŒ–é©±åŠ¨çš„**ã€‚ æˆ‘ä»¬çš„ç ”ç©¶ç»“æœå‘ç°ï¼Œé€šè¿‡è¯­è¨€åˆ†æ**æœ€è¿‘çš„ç¤¾ä¼šè½¬å‘ä¸è®¤çŸ¥æ‰­æ›²å’Œå†…åŒ–éšœç¢ç›¸å…³**ã€‚</description>
      <content:encoded><![CDATA[<blockquote>
<p>Bollen, Johan, et al. &ldquo;Historical language records reveal a surge of cognitive distortions in recent decades.&rdquo; <em>Proceedings of the National Academy of Sciences</em> 118.30 (2021).</p>
</blockquote>
<br>
<h2 id="æ‘˜è¦">æ‘˜è¦</h2>
<p>æ‚£æœ‰æŠ‘éƒç—‡çš„äººå®¹æ˜“å‡ºç°é€‚åº”ä¸è‰¯çš„æ€ç»´æ¨¡å¼ï¼Œå³è®¤çŸ¥æ‰­æ›²ï¼Œä»–ä»¬ä»¥è¿‡äºæ¶ˆæå’Œä¸å‡†ç¡®çš„æ–¹å¼æ€è€ƒè‡ªå·±ã€ä¸–ç•Œå’Œæœªæ¥ã€‚ è¿™äº›æ‰­æ›²ä¸ä¸ªäººæƒ…ç»ªã€è¡Œä¸ºå’Œè¯­è¨€çš„æ˜¾ç€å˜åŒ–æœ‰å…³ã€‚ <strong>æˆ‘ä»¬å‡è®¾ç¤¾ä¼šå¯ä»¥ç»å†ç±»ä¼¼çš„é›†ä½“å¿ƒç†å˜åŒ–ï¼Œè¿™äº›å˜åŒ–ä¼šåæ˜ åœ¨è¯­è¨€ä½¿ç”¨çš„å†å²è®°å½•ä¸­</strong>ã€‚æˆ‘ä»¬è°ƒæŸ¥äº†è¿‡å» <strong>125 å¹´è¶… 1400 ä¸‡æœ¬ä¹¦ä¸­è®¤çŸ¥æ‰­æ›²ï¼ˆcongnition disorderï¼‰<strong>çš„æ–‡æœ¬æ ‡è®°çš„æµè¡Œæƒ…å†µï¼Œå¹¶è§‚å¯Ÿåˆ°è‡ª 1980 å¹´ä»£ä»¥æ¥å®ƒä»¬çš„æµè¡Œç¨‹åº¦æ¿€å¢ï¼Œè¾¾åˆ°è¶…è¿‡å¤§è§æ¡å’Œä¸¤æ¬¡ä¸–ç•Œå¤§æˆ˜çš„æ°´å¹³ã€‚ <strong>è¿™ç§æ¨¡å¼ä¼¼ä¹ä¸æ˜¯ç”±è¯ä¹‰ã€å‡ºç‰ˆå’Œå†™ä½œæ ‡å‡†æˆ– Google å›¾ä¹¦æ ·æœ¬çš„å˜åŒ–é©±åŠ¨çš„</strong>ã€‚ æˆ‘ä»¬çš„ç ”ç©¶ç»“æœå‘ç°ï¼Œé€šè¿‡è¯­è¨€åˆ†æ</strong>æœ€è¿‘çš„ç¤¾ä¼šè½¬å‘ä¸è®¤çŸ¥æ‰­æ›²å’Œå†…åŒ–éšœç¢ç›¸å…³</strong>ã€‚</p>
<br>
<h2 id="æ­£æ–‡">æ­£æ–‡</h2>
<p>æŠ‘éƒç—‡ä¸ç‹¬ç‰¹ä¸”å¯è¯†åˆ«çš„é€‚åº”ä¸è‰¯æ€ç»´æ¨¡å¼æœ‰å…³ï¼Œç§°ä¸º<strong>è®¤çŸ¥æ‰­æ›²</strong>ï¼Œå…¶ä¸­ä¸ªäººä»¥ä¸å‡†ç¡®å’Œè¿‡äºæ¶ˆæçš„æ–¹å¼æ€è€ƒè‡ªå·±ã€æœªæ¥å’Œä¸–ç•Œ (9-12)ã€‚ä¾‹å¦‚ï¼Œå½“ä¸ªä½“ç”¨æ¶ˆæçš„ã€ç»å¯¹ä¸»ä¹‰çš„æœ¯è¯­ï¼ˆä¾‹å¦‚ï¼Œâ€œI am a loserâ€ï¼‰ç»™è‡ªå·±è´´ä¸Šæ ‡ç­¾æ—¶ï¼Œå°±ä¼šå‡ºç°åœ¨æŠ‘éƒç—‡ä¸­çœ‹åˆ°çš„è®¤çŸ¥æ‰­æ›²ã€‚ä»–ä»¬å¯èƒ½ä¼šç”¨äºŒåˆ†æ³•ã€æç«¯çš„æœ¯è¯­è°ˆè®ºæœªæ¥äº‹ä»¶ï¼ˆä¾‹å¦‚ï¼Œâ€œMy meeting will be a complete disasterâ€ï¼‰æˆ–å¯¹åˆ«äººçš„å¿ƒæ€åšå‡ºæ¯«æ— æ ¹æ®çš„å‡è®¾ï¼ˆä¾‹å¦‚ï¼Œâ€œEverybody will think that I am a failureâ€ï¼‰ã€‚</p>
<p>è®¤çŸ¥æ‰­æ›²çš„ç±»å‹é€šå¸¸åŒºåˆ†è®¸å¤šéƒ¨åˆ†é‡å çš„ç±»å‹ï¼Œä¾‹å¦‚â€œç¾éš¾åŒ–â€ã€â€œäºŒåˆ†æ¨ç†â€ã€â€œå¦å®šç§¯æçš„â€ã€â€œæƒ…æ„Ÿæ¨ç†â€ã€â€œç®—å‘½â€ã€â€œæ ‡è®°å’Œé”™è¯¯æ ‡è®°â€ã€â€œæ”¾å¤§å’Œæœ€å°åŒ–â€ã€â€œå¿ƒç†è¿‡æ»¤â€ã€â€œè¯»å¿ƒæœ¯â€ã€â€œè¿‡åº¦æ¦‚æ‹¬â€ã€â€œä¸ªæ€§åŒ–â€å’Œâ€œåº”è¯¥é™ˆè¿°â€ã€‚</p>
<p>**è®¤çŸ¥è¡Œä¸ºç–—æ³• (cognitive-behavioral therapyï¼ŒCBT) ** æ˜¯æ²»ç–—æŠ‘éƒç—‡å’Œå…¶ä»–å†…åŒ–éšœç¢çš„é»„é‡‘æ ‡å‡† (13)ï¼Œå…¶åŸºç¡€ç†è®ºè®¤ä¸ºè®¤çŸ¥æ‰­æ›²ä¸å†…åŒ–éšœç¢æœ‰å…³ï¼› å®ƒä»¬åæ˜ äº†ç¯å¢ƒå‹åŠ›ä¸‹çš„è´Ÿé¢æƒ…æ„Ÿå’Œå›é¿è¡Œä¸ºæ¨¡å¼ (14, 15)ã€‚ <strong>è¯­è¨€ä¸è¿™ç§åŠ¨æ€å¯†åˆ‡ç›¸å…³ã€‚ äº‹å®ä¸Šï¼Œæœ€è¿‘çš„ç ”ç©¶è¡¨æ˜ï¼Œæ‚£æœ‰å†…åŒ–éšœç¢çš„ä¸ªä½“åœ¨ä»–ä»¬çš„è¯­è¨€ä¸­è¡¨ç°å‡ºæ˜æ˜¾æ›´é«˜æ°´å¹³çš„è®¤çŸ¥æ‰­æ›² (16, 17)ï¼Œä»¥è‡³äºä»–ä»¬çš„æ‚£ç—…ç‡å¯èƒ½è¢«ç”¨ä½œæŠ‘éƒç—‡æ˜“æ„Ÿæ€§çš„æŒ‡æ ‡ (18, 19)ã€‚</strong></p>
<p>æˆ‘ä»¬åˆ†æäº†è¿‡å» 125 å¹´ä¸­å¤§é‡ä»¥è‹±è¯­ã€è¥¿ç­ç‰™è¯­å’Œå¾·è¯­å‡ºç‰ˆçš„è¶…è¿‡ 1400 ä¸‡æœ¬ä¹¦ç±ï¼ˆè°·æ­Œå›¾ä¹¦ï¼‰ä¸­çš„å¤§é‡è®¤çŸ¥æ‰­æ›²æ ‡è®°çš„æµè¡Œæƒ…å†µã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬æ­£åœ¨ç ”ç©¶ç”± CBT ä¸“å®¶ã€è®¡ç®—è¯­è¨€å­¦å®¶å’ŒåŒè¯­æ¯è¯­äººå£«ç»„æˆçš„å›¢é˜Ÿè®¾è®¡çš„æ•°ç™¾ä¸ª 1 åˆ° 5 ä¸ªå•è¯ (n-gram)ã€ æ ‡è®°çš„è®¤çŸ¥å¤±çœŸå›¾å¼ (cognitive distortion schemata,CDS) çš„çºµå‘æµè¡Œæƒ…å†µï¼Œä»¥åŠç”± CBT ä¸“å®¶å°ç»„å¤–éƒ¨éªŒè¯ï¼Œä»¥æ•æ‰ 12 ç§è®¤çŸ¥æ‰­æ›²çš„è¡¨è¾¾ (9)ã€‚ <strong>CDS n-gram</strong> è¢«è®¾è®¡ä¸ºç®€çŸ­ã€æ˜ç¡®å’Œç‹¬ç«‹çš„è¯­å¥ï¼Œä½¿ç”¨é¢‘ç‡å¾ˆé«˜çš„æœ¯è¯­è¡¨è¾¾ç‰¹å®šè®¤çŸ¥æ‰­æ›²ç±»å‹çš„æ ¸å¿ƒï¼ˆå›¾ 1 å’Œ SI é™„å½•ï¼Œè¡¨ S1-S3ï¼‰ã€‚ä¾‹å¦‚ï¼Œ3-gram çš„â€œI am aâ€æ•è·äº†æ ‡ç­¾å’Œé”™è¯¯æ ‡ç­¾å¤±çœŸï¼Œè€Œä¸ç®¡å…¶ä¸Šä¸‹æ–‡æˆ–æ‰€æ¶‰åŠçš„ç²¾ç¡®æ ‡ç­¾ï¼ˆâ€œå¥³å£«â€ã€â€œå°Šè´µçš„äººâ€ã€â€œå¤±è´¥è€…â€ç­‰ï¼‰ã€‚è¿™äº›ç›¸åŒçš„ n-gram åœ¨æ—©æœŸçš„ç ”ç©¶ä¸­è¢«è¯æ˜æ˜¾ç€æ›´å¤šã€‚</p>
<br>
<h2 id="cdsæµè¡Œåº¦æµ‹é‡">CDSæµè¡Œåº¦æµ‹é‡</h2>

<figure >
    
        <img src="img/CDS_n-gram.png" width="800" />
    
    
</figure>

<p><strong>CDS n-gram</strong> æ˜¾ç¤ºåœ¨ç°è‰²æ¡†å†…çš„ç¤ºä¾‹ï¼Œå‘¨å›´æ˜¯åˆç†çš„ä¸Šä¸‹æ–‡è¯ï¼Œè¿™äº›è¯å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼Œè€Œä¸ä¼šå½±å“ n-gram æ˜¯å¦æ ‡è®°ç»™å®šç±»å‹çš„è®¤çŸ¥æ‰­æ›²çš„è¡¨è¾¾ï¼ˆä¾‹å¦‚ï¼Œ<strong>è¯»å¿ƒæœ¯Mindreadingã€æƒ…æ„Ÿæ¨ç†Emotiona lReasoningã€æ ‡è®°Labelingå’Œé”™è¯¯æ ‡è®°Mislabeling</strong>ï¼‰ . CDS æ˜¯ç”± CBT ä¸“å®¶ã€è¯­è¨€å­¦å®¶å’Œæ¯è¯­ä½¿ç”¨è€…ç»„æˆçš„å›¢é˜Ÿè®¾è®¡çš„ï¼Œç”¨äºæ•æ‰ç‰¹å®šè®¤çŸ¥æ‰­æ›²ç±»å‹çš„è¡¨è¾¾ï¼Œè€Œä¸ç®¡å…¶ç‰¹å®šçš„è¯æ±‡ä¸Šä¸‹æ–‡ã€‚ å¯¹äºè‹±è¯­ï¼ˆç¾å›½ï¼‰ã€è¥¿ç­ç‰™è¯­å’Œå¾·è¯­ï¼Œä¸“å®¶å›¢é˜Ÿåˆ†åˆ«å®šä¹‰äº† 241ã€435 å’Œ 296 ä¸ª n-gram æ¥æ ‡è®° 12 ç§å¸¸è§çš„è®¤çŸ¥æ‰­æ›²ç±»å‹ã€‚ è¯·æ³¨æ„ï¼Œæˆ‘ä»¬çš„<strong>æµè¡Œåº¦æµ‹é‡åªè®¡ç®— CDS n-gram çš„å‡ºç°ï¼Œè€Œä¸ç®¡ä¸Šä¸‹æ–‡ï¼ˆâ€œæ¯ä¸ªäººéƒ½åœ¨æ€è€ƒâ€ã€â€œä»ç„¶æ„Ÿè§‰â€å’Œâ€œæˆ‘æ˜¯ä¸€ä¸ªâ€ï¼‰</strong>ã€‚ æŒ‰å¤±çœŸç±»å‹æä¾›çš„æ‰€æœ‰ CDS n-gram çš„å®Œæ•´åˆ—è¡¨åœ¨SI Appendix, Tables S1â€“S3.</p>

<figure >
    
        <img src="img/fig2.png" width="800" />
    
    
</figure>

<p>(A-C) ç¾å›½è‹±è¯­ (A)ã€è¥¿ç­ç‰™è¯­ (B) å’Œå¾·è¯­ (C) ä» 1855 å¹´åˆ° 2020 å¹´ (125 y) çš„ CDS n-gram æµè¡Œæ—¶é—´åºåˆ—çš„ä¸­å€¼ z åˆ†æ•°ï¼Œå…¶ä¸­æ·»åŠ äº†å¹´ä»½æ ‡è®° å¯¹äºé‡å¤§å†å²äº‹ä»¶ã€‚ åœ¨ 20 ä¸–çºªçš„å¤§éƒ¨åˆ†æ—¶é—´é‡Œï¼Œæ‰€æœ‰æ—¶é—´åºåˆ—éƒ½æ˜¾ç¤ºå‡ºç¨³å®šæˆ–ä¸‹é™çš„æ°´å¹³ï¼Œéšååœ¨è¿‡å»çš„ 30 å¹´é‡Œè®¤çŸ¥æ‰­æ›²æ€¥å‰§å¢åŠ ã€‚</p>
<p>ç¾å›½è‹±è¯­ä» 1899 å¹´åˆ° 1978 å¹´å‘ˆä¸‹é™è¶‹åŠ¿ï¼Œåœ¨ 1914 å¹´å’Œ 1940 å¹´ï¼ˆç¬¬ä¸€æ¬¡ä¸–ç•Œå¤§æˆ˜å’Œç¬¬äºŒæ¬¡ä¸–ç•Œå¤§æˆ˜ï¼‰ä»¥åŠç‰¹åˆ«æ˜¯ 1968 å¹´å‡ºç°å°é«˜å³°ã€‚éšåæ˜¯ CDS æµè¡Œç‡ä» 1978 å¹´å¼€å§‹æ¿€å¢ï¼Œå¹¶æŒç»­åˆ° 2019 å¹´ã€‚</p>
<p>å¯¹äºè¥¿ç­ç‰™è¯­ æˆ‘ä»¬å‘ç°ä» 1895 å¹´åˆ° 1980 å¹´ä»£åˆæœŸçš„ç¨³å®šæ°´å¹³ï¼Œåœ¨è¿™ä¸€ç‚¹ä¸Šå‡ºç°äº†ä¸€ä¸ªè¶‹åŠ¿ï¼Œå³ CDS æ‚£ç—…ç‡æ°´å¹³é«˜äºä¹‹å‰è§‚å¯Ÿåˆ°çš„ä»»ä½•æ°´å¹³ã€‚</p>
<p>å¾·å›½è¡¨ç°å‡ºç¨³å®šçš„ CDS æµè¡Œæ°´å¹³ï¼Œé™¤äº†ç¬¬ä¸€æ¬¡ä¸–ç•Œå¤§æˆ˜å’Œç¬¬äºŒæ¬¡ä¸–ç•Œå¤§æˆ˜å‰åå’Œä¹‹åçš„å¼ºåŠ²é«˜å³°ï¼Œç›´åˆ° 2007 å¹´çªç„¶æ¿€å¢ã€‚</p>
<br>
<h2 id="data">Data</h2>
<p>ç ”ç©¶æ•°æ®è°·æ­Œå·²ç»å¼€æºï¼Œå¼€æºä¸‹è½½å“¦</p>
<p><a href="https://storage.googleapis.com/books/ngrams/books/datasetsv3.html">https://storage.googleapis.com/books/ngrams/books/datasetsv3.html</a></p>

<figure >
    
        <img src="img/googlebooks.png" width="800" />
    
    
</figure>

<br>
<h2 id="cds-ngramè¯è¡¨">CDS ngramè¯è¡¨</h2>
<p>è¯¥è®ºæ–‡CDS ngramè¯è¡¨</p>

<figure >
    
        <img src="img/cdsngramlist.png" width="800" />
    
    
</figure>

<br>
<h2 id="ä»£ç ">ä»£ç </h2>
<p>ngramä»£ç å®ç°</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">nltk.util</span> <span class="kn">import</span> <span class="n">ngrams</span>
<span class="kn">from</span> <span class="nn">nltk.tokenize</span> <span class="kn">import</span> <span class="n">word_tokenize</span>

<span class="n">sentence</span> <span class="o">=</span> <span class="s2">&#34;Historical language records reveal a surge of cognitive distortions in recent decades&#34;</span>
<span class="n">words</span> <span class="o">=</span> <span class="n">word_tokenize</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;åˆ†è¯ç»“æœ: &#39;</span><span class="p">,</span> <span class="n">words</span><span class="p">)</span>
<span class="c1">#2-gram</span>
<span class="n">two_grams</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tw</span><span class="p">)</span> <span class="k">for</span> <span class="n">tw</span> <span class="ow">in</span> <span class="n">ngrams</span><span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;2-gramå¤„ç†ç»“æœ: &#39;</span><span class="p">,</span> <span class="n">two_grams</span><span class="p">)</span>
<span class="c1">#3-gram</span>
<span class="n">three_grams</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tw</span><span class="p">)</span> <span class="k">for</span> <span class="n">tw</span> <span class="ow">in</span> <span class="n">ngrams</span><span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;3-gramå¤„ç†ç»“æœ: &#39;</span><span class="p">,</span> <span class="n">three_grams</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">åˆ†è¯ç»“æœ:  [&#39;Historical&#39;, &#39;language&#39;, &#39;records&#39;, &#39;reveal&#39;, &#39;a&#39;, &#39;surge&#39;, &#39;of&#39;, &#39;cognitive&#39;, &#39;distortions&#39;, &#39;in&#39;, &#39;recent&#39;, &#39;decades&#39;]

2-gramå¤„ç†ç»“æœ:  [&#39;Historical language&#39;, &#39;language records&#39;, &#39;records reveal&#39;, &#39;reveal a&#39;, &#39;a surge&#39;, &#39;surge of&#39;, &#39;of cognitive&#39;, &#39;cognitive distortions&#39;, &#39;distortions in&#39;, &#39;in recent&#39;, &#39;recent decades&#39;]

3-gramå¤„ç†ç»“æœ:  [&#39;Historical language records&#39;, &#39;language records reveal&#39;, &#39;records reveal a&#39;, &#39;reveal a surge&#39;, &#39;a surge of&#39;, &#39;surge of cognitive&#39;, &#39;of cognitive distortions&#39;, &#39;cognitive distortions in&#39;, &#39;distortions in recent&#39;, &#39;in recent decades&#39;]

</code></pre></div><p>ç»Ÿè®¡ç»Ÿè®¡CDS-ngramä¸ngramé¢‘æ•°ï¼Œè¿›è€Œè®¡ç®—å‡ºCDSæµè¡Œåº¦ã€‚</p>
<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>æœ‰å¿æ•°æ®åˆ†ææœåŠ¡</title>
      <link>https://hidadeng.github.io/blog/paid_for_service/</link>
      <pubDate>Sun, 12 Dec 2021 12:43:10 +0600</pubDate>
      
      <guid>/blog/paid_for_service/</guid>
      <description>æœ¬æ–‡æ—¨åœ¨å›ç­”å¤§æ•°æ®æŠ€æœ¯å¦‚ä½•æ‰èƒ½æˆä¸ºæ³•å­¦ç ”ç©¶çš„æ–¹æ³•ï¼Œå¦‚ä½•ä¸æ³•å¾‹å®è¯ç ”ç©¶ã€è§„èŒƒç ”ç©¶è¿™ä¸¤å¤§ä¼ ç»Ÿçš„æ–¹æ³•å®ç°æœ‰æ•ˆçš„äº’åŠ¨ã€‚</description>
      <content:encoded><![CDATA[<p>ç»å¸¸æœ‰æœ‹å‹å’¨è¯¢å¯å¦æä¾›æœ‰å¿æœåŠ¡ï¼Œç›®å‰å¯æ¥æ–‡æœ¬æ•°æ®åˆ†æï¼Œå¸¸è§çš„åˆ†ææ”¯æŒ</p>
<ul>
<li>è¯é¢‘ç»Ÿè®¡</li>
<li>æƒ…æ„Ÿåˆ†æ</li>
<li>LDAè¯é¢˜åˆ†æ</li>
<li>æ–‡æœ¬åˆ†ç±»</li>
<li>ç›¸ä¼¼åº¦åˆ†æ</li>
<li>å…¶ä»–</li>
</ul>
<p>ä¸ºäº†æé«˜æ²Ÿé€šæ•ˆç‡ï¼Œéœ€è¦æ‚¨æä¾›éœ€æ±‚æ–‡æ¡£ï¼Œéœ€è¦è¯´æ˜ä¸¤éƒ¨åˆ†ä¿¡æ¯</p>
<h2 id="1æ•°æ®è¯´æ˜">1ã€æ•°æ®è¯´æ˜</h2>
<ol>
<li>æ˜¯å¦å·²æ‹¥æœ‰æ•°æ®</li>
<li>æ•°æ®çš„æ–‡ä»¶æ ¼å¼(pdfã€txtã€excelç±»ç­‰)</li>
<li>æ•°æ®é‡(æ–‡ä»¶æ•°æˆ–å¤šå°‘M)</li>
</ol>
<br>
<h2 id="2æ•°æ®åˆ†æ">2ã€æ•°æ®åˆ†æ</h2>
<ol>
<li>åˆ—å‡ºéœ€è¦è®¡ç®—çš„æŒ‡æ ‡ï¼ˆåˆ—å‡ºè®¡ç®—æ–¹æ³•ï¼‰</li>
<li>åˆ†æç»“æœçš„å­˜å‚¨æ ¼å¼åŠå­—æ®µæ ·å¼(å»ºè®®excelæ ¼å¼)</li>
</ol>
<br>
<h2 id="æç¤º">æç¤º</h2>
<p>æˆ‘è‡ªå·±æ—¶é—´ç²¾åŠ›æœ‰é™ï¼ŒæœåŠ¡è‚¯å®šæ²¡æœ‰å…¨èŒæ•°æ®åˆ†æå¸ˆåšçš„å¥½ï¼Œæ›´å»ºè®®å¤§å®¶ä»˜è´¹è´­ä¹°è¯¾ç¨‹è‡ªå­¦ï¼ŒæŠ€æœ¯ä¸Šæ‰“é“è¿˜éœ€è‡ªèº«ç¡¬ã€‚å¸¸è§çš„æ•°æ®åˆ†æéƒ½å·²å½¢æˆè¯¾ç¨‹ï¼Œä»·æ ¼ä¹Ÿä¸è´µã€‚</p>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
<br>
<h2 id="å’¨è¯¢æ–¹å¼">å’¨è¯¢æ–¹å¼</h2>
<p>å‡†å¤‡å¥½éœ€æ±‚æ–‡æ¡£åï¼Œå¯åŠ å¾®ä¿¡<strong>18373154668</strong>ï¼ˆå¾®ä¿¡æ‰‹æœºåŒå·ï¼‰</p>
<ul>
<li>ä¸­åˆ12:00-14:00</li>
<li>æ™šé—´22:00-24:00</li>
</ul>
<br>
]]></content:encoded>
    </item>
    
    <item>
      <title>è½¬è½½ | ç®¡ç†å†³ç­–æƒ…å¢ƒä¸‹å¤§æ•°æ®é©±åŠ¨çš„ç ”ç©¶å’Œåº”ç”¨æŒ‘æˆ˜</title>
      <link>https://hidadeng.github.io/blog/management_challenge_in_big_data_era/</link>
      <pubDate>Wed, 08 Dec 2021 12:42:10 +0600</pubDate>
      
      <guid>/blog/management_challenge_in_big_data_era/</guid>
      <description>åœ¨æ•°å­—åŒ–ç”Ÿæ´»èƒŒæ™¯ä¸‹, ä¼ ç»Ÿçš„ç®¡ç†å˜æˆæˆ–æ­£åœ¨å˜æˆæ•°æ®çš„ç®¡ç†, ä¼ ç»Ÿçš„å†³ç­–å˜æˆæˆ–æ­£åœ¨å˜æˆåŸºäºæ•°æ®åˆ†æçš„å†³ç­–.ä»å¤§æ•°æ®çš„æ•°æ®ç‰¹å¾ã€é—®é¢˜ç‰¹å¾å’Œç®¡ç†å†³ç­–ç‰¹å¾å‡ºå‘, è®¨è®ºç®¡ç†å†³ç­–ç ”ç©¶å’Œåº”ç”¨çš„èŒƒå¼è½¬å˜.å¤§æ•°æ®é©±åŠ¨èŒƒå¼å¯ä»¥ä»å¤–éƒ¨åµŒå…¥ã€æŠ€æœ¯å¢å¼ºå’Œä½¿èƒ½åˆ›æ–°ä¸‰ä¸ªè§’åº¦æ¥å®¡è§†, å¹¶ä½“ç°å‡ºâ€œæ•°æ®é©±åŠ¨&#43;æ¨¡å‹é©±åŠ¨â€çš„â€œå…³è”&#43;å› æœâ€å«ä¹‰.æ­¤å¤–, å›´ç»•å¤§æ•°æ®ç‰¹å¾å’Œé‡è¦ç ”ç©¶æ–¹å‘, é˜è¿°äº†å…¨æ™¯å¼PAGEæ¡†æ¶åŠå…¶è¦ç´ .</description>
      <content:encoded><![CDATA[<p><strong>æ‘˜  è¦ï¼š</strong></p>
<p>åœ¨æ•°å­—åŒ–ç”Ÿæ´»èƒŒæ™¯ä¸‹, ä¼ ç»Ÿçš„ç®¡ç†å˜æˆæˆ–æ­£åœ¨å˜æˆæ•°æ®çš„ç®¡ç†, ä¼ ç»Ÿçš„å†³ç­–å˜æˆæˆ–æ­£åœ¨å˜æˆåŸºäºæ•°æ®åˆ†æçš„å†³ç­–.ä»å¤§æ•°æ®çš„æ•°æ®ç‰¹å¾ã€é—®é¢˜ç‰¹å¾å’Œç®¡ç†å†³ç­–ç‰¹å¾å‡ºå‘, è®¨è®ºç®¡ç†å†³ç­–ç ”ç©¶å’Œåº”ç”¨çš„èŒƒå¼è½¬å˜.å¤§æ•°æ®é©±åŠ¨èŒƒå¼å¯ä»¥ä»å¤–éƒ¨åµŒå…¥ã€æŠ€æœ¯å¢å¼ºå’Œä½¿èƒ½åˆ›æ–°ä¸‰ä¸ªè§’åº¦æ¥å®¡è§†, å¹¶ä½“ç°å‡ºâ€œæ•°æ®é©±åŠ¨+æ¨¡å‹é©±åŠ¨â€çš„â€œå…³è”+å› æœâ€å«ä¹‰.æ­¤å¤–, å›´ç»•å¤§æ•°æ®ç‰¹å¾å’Œé‡è¦ç ”ç©¶æ–¹å‘, é˜è¿°äº†å…¨æ™¯å¼PAGEæ¡†æ¶åŠå…¶è¦ç´ .</p>
<p><strong>å…³é”®è¯</strong>ï¼š å¤§æ•°æ® ï¼› ç®¡ç†å†³ç­– ï¼› ç ”ç©¶èŒƒå¼ ï¼› å…¨æ™¯å¼ PAGE æ¡†æ¶</p>
<br>
<p>ä¿¡æ¯ç§‘æŠ€çš„é£é€Ÿå‘å±•å’Œæ·±åº¦èåˆå¼€å¯äº†æ•°å­—åŒ–ç”Ÿæ´»çš„æ–°ç¯‡ç« , æŠŠäººä»¬å¸¦å…¥äº†å¤§æ•°æ® (big data) æ—¶ä»£.ä¸€æ–¹é¢, éšç€å„ç§æ„Ÿåº”æ¢æµ‹æŠ€æœ¯ã€æ™ºèƒ½ç»ˆç«¯ä»¥åŠç§»åŠ¨äº’è”çš„å¹¿æ³›åº”ç”¨, ä½¿å¾—ç¤¾ä¼šç»æµç”Ÿæ´»çš„æ–¹æ–¹é¢é¢ä»¥æ›´ç»†ç²’åº¦çš„æ•°æ®å½¢å¼å‘ˆç°, è¿›è€Œæ•´ä¸ªç¤¾ä¼šçš„â€œåƒç´ â€å¾—åˆ°æ˜¾è‘—æå‡;å¦ä¸€æ–¹é¢, ç¤¾ä¼šâ€œåƒç´ â€çš„æå‡ä¿ƒè¿›äº†æ•°å­—â€œæˆåƒâ€çš„å‘å±•, ä½¿å¾—é€šè¿‡æ•°æ®ä¸–ç•Œå¯ä»¥æ›´æ¸…æ™°åœ°æç»˜ç¤¾ä¼šç»æµæ´»åŠ¨æƒ…å¢ƒ, è¿›è€ŒåŸºäºæ•°æ®çš„å•†åŠ¡åˆ†æ (business analytics, BA) æ­£åœ¨æˆä¸ºä½¿èƒ½åˆ›æ–°çš„æ ¸å¿ƒç«äº‰åŠ›.åœ¨æ­¤èƒŒæ™¯ä¸‹, ä¼ ç»Ÿçš„ç®¡ç†å˜æˆæˆ–æ­£åœ¨å˜æˆæ•°æ®çš„ç®¡ç†, ä¼ ç»Ÿçš„å†³ç­–å˜æˆæˆ–æ­£åœ¨å˜æˆåŸºäºæ•°æ®åˆ†æçš„å†³ç­–.</p>
<p>è¿‘å¹´æ¥, å¤§æ•°æ®æˆä¸ºå­¦ç•Œã€æ”¿ç•Œå’Œä¸šç•ŒæŒç»­å…³æ³¨çš„çƒ­ç‚¹.åœ¨å­¦æœ¯ç•Œ, æ—©åœ¨2008å¹´å’Œ2011å¹´, ã€ŠNatureã€‹ä¸ã€ŠScienceã€‹æ‚å¿—åˆ†åˆ«ä»äº’è”ç½‘æŠ€æœ¯ã€äº’è”ç½‘ç»æµå­¦ã€è¶…çº§è®¡ç®—ã€ç¯å¢ƒç§‘å­¦ä»¥åŠç”Ÿç‰©åŒ»è¯ç­‰å¤šæ–¹é¢è®¨è®ºå¤§æ•°æ®çš„å¤„ç†ä¸åº”ç”¨45æ­¤å, å¤§æ•°æ®åœ¨å„ä¸ªå­¦ç§‘é¢†åŸŸåŒ…æ‹¬åŒ»å­¦ã€ç»æµå­¦ã€ç®¡ç†å­¦ä»¥åŠå…¬å…±ç®¡ç†ç­‰é¢†åŸŸå¾—åˆ°äº†å¹¿æ³›çš„æ¢è®¨ä¸ç ”ç©¶6789åŒæ—¶, å¤§æ•°æ®ä¹Ÿå¼•èµ·ä¸–ç•Œå„å›½é«˜åº¦é‡è§†, ç¾å›½ã€æ¬§ç›Ÿã€æ¾³å¤§åˆ©äºšä»¥åŠæ—¥æœ¬ç­‰å›½éƒ¨ç½²äº†ä¸€ç³»åˆ—å¤§æ•°æ®ç›¸å…³æˆ˜ç•¥å’Œå…³é”®é¢†åŸŸã€‚åœ¨äº§ä¸šç•Œ, å›½å†…å¤–å¤§æ‰¹çŸ¥åä¼ä¸šæ€èµ·äº†æŠ€æœ¯äº§ä¸šåˆ›æ–°æµªæ½®, é€šè¿‡æ”¶è´­ä¸åˆä½œæ„å»ºå’Œæå‡å¤§æ•°æ®æŠ€æœ¯ä¸åº”ç”¨èƒ½åŠ›, å¸ƒå±€å’Œå¼€æ‹“ç›¸å…³çš„ä¸šæ€å’Œå¸‚åœº.</p>
<p>æˆ‘å›½æ”¿åºœå¯¹å¤§æ•°æ®é«˜åº¦é‡è§†å¹¶æœ‰ä¸€ç³»åˆ—å‰ç»æ€§æ´è§å’Œéƒ¨ç½².2015å¹´åå…«å±Šäº”ä¸­å…¨ä¼šæå‡ºå®æ–½å›½å®¶å¤§æ•°æ®æˆ˜ç•¥  , å›½åŠ¡é™¢å‘å¸ƒã€Šä¿ƒè¿›å¤§æ•°æ®å‘å±•è¡ŒåŠ¨çº²è¦ã€‹  , æŒ‡å‡ºå¤§æ•°æ®æ˜¯å›½å®¶åŸºç¡€æ€§æˆ˜ç•¥èµ„æº, æ—¨åœ¨å…¨é¢æ¨è¿›æˆ‘å›½å¤§æ•°æ®å‘å±•å’Œåº”ç”¨, åŠ å¿«å»ºè®¾æ•°æ®å¼ºå›½.2017å¹´åä¹å¤§æŠ¥å‘Šè¿›ä¸€æ­¥å¼ºè°ƒè¦æ¨åŠ¨äº’è”ç½‘ã€å¤§æ•°æ®ã€äººå·¥æ™ºèƒ½å’Œå®ä½“ç»æµæ·±åº¦èåˆ.é€šè¿‡å›½å®¶éœ€æ±‚ã€æ”¿ç­–æ”¯æŒã€äº§ä¸šç»“åˆä»¥åŠä¼ä¸šç ”å‘ç­‰å½¢å¼, è¿‘äº›å¹´æ¥æ¶Œç°å‡ºä¸€å¤§æ‰¹é‡å¤§è§„åˆ’å’Œæ”¿äº§å­¦ç ”é¡¹ç›®, åŒ…æ‹¬å›½å®¶è‡ªç„¶ç§‘å­¦åŸºé‡‘å§”å‘˜ä¼š (NSFC) äº2015å¹´9æœˆå¯åŠ¨çš„â€œå¤§æ•°æ®é©±åŠ¨çš„ç®¡ç†ä¸å†³ç­–ç ”ç©¶â€é‡å¤§ç ”ç©¶è®¡åˆ’ (ç®€ç§°NSFCå¤§æ•°æ®é‡å¤§ç ”ç©¶è®¡åˆ’, å‚è§é™„æ³¨)  .</p>
<p>å¤§æ•°æ®åœ¨ç»™ç¤¾ä¼šç»æµç”Ÿæ´»å¸¦æ¥æ·±åˆ»å˜é©çš„åŒæ—¶, ä¹Ÿå¯¹ç®¡ç†ä¸å†³ç­–ç ”ç©¶å¸¦æ¥ä¸€ç³»åˆ—æ–°çš„é‡è¦è¯¾é¢˜.ä»ä¿¡æ¯æŠ€æœ¯ (IT) èŒƒç•´æ¥çœ‹, å¯ä»¥ä»ä¸¤ä¸ªè§†è§’æ¥è®¤è¯†å¤§æ•°æ®, å³å¤§æ•°æ®çš„â€œé€ â€ä¸â€œç”¨â€è§†è§’ (å¦‚å›¾1æ‰€ç¤º) .è¿™å’Œäº§å“çš„å±æ€§ç±»ä¼¼, ä¸€æ–¹é¢, äººä»¬å…³å¿ƒäº§å“æ˜¯å¦‚ä½•è®¾è®¡å’Œåˆ¶é€ å‡ºæ¥çš„;å¦ä¸€æ–¹é¢, äººä»¬å…³å¿ƒäº§å“æ˜¯å¦‚ä½•ä½¿ç”¨å’Œæœ‰ç”¨çš„.å¤§æ•°æ®ä»¥ITçš„å½¢å¼å‘ˆç°, é€šå¸¸å¯ä»¥æ¦‚æ‹¬ä¸ºæ•°æ®å’Œç³»ç»Ÿ (åŒ…æ‹¬ç®—æ³•ã€åº”ç”¨ã€å¹³å°ç­‰) .ä»é€ çš„è§†è§’å‡ºå‘, æ¶‰åŠçš„ä¸»è¦é—®é¢˜åŒ…æ‹¬å¤§æ•°æ®åˆ†æ (å¦‚ç”»åƒã€å­¦ä¹ ã€æ¨æ–­ç­‰) å’Œå¤§æ•°æ®ç³»ç»Ÿå»ºè®¾ (å¦‚ä½“ç³»ã€åŠŸèƒ½ã€é›†æˆç­‰) .ä»ç”¨çš„è§†è§’å‡ºå‘, æ¶‰åŠçš„ä¸»è¦é—®é¢˜åŒ…æ‹¬å¤§æ•°æ®ä½¿ç”¨è¡Œä¸º (å¦‚é‡‡çº³ã€å½±å“ã€ç®¡ç†ç­‰) å’Œå¤§æ•°æ®ä½¿èƒ½åˆ›æ–° (å¦‚è¦ç´ ã€ä»·å€¼ã€å¸‚åœºç­‰) .</p>

<figure >
    
        <img src="img/1.jpg" width="800" />
    
    
</figure>

<p>å€¼å¾—ä¸€æçš„æ˜¯, å¤§æ•°æ®ç›¸å…³çš„ç ”ç©¶ä¸ä»…éœ€è¦å¯¹ç›¸å…³é¢†åŸŸçš„ç†è®ºä¸åº”ç”¨è¿›è¡Œæ¢ç´¢å’Œåˆ›æ–°, ä¹Ÿéœ€è¦å¯¹è®¸å¤šæƒ¯å¸¸çš„è®¤è¯†è§†è§’å’Œæ–¹æ³•è®ºèŒƒå¼è¿›è¡Œå®¡è§†å’Œå‘å±•.åŒæ—¶, æˆ‘å›½å­¦è€…å’Œç ”ç©¶äººå‘˜ä¹Ÿé¢ä¸´ç€â€œä¸¥è°¨ (rigor) ä¸ç›¸å…³ (relevance) â€ (å­¦æœ¯è§„èŒƒä¸å®è·µå½±å“) å’Œâ€œä¸–ç•Œä¸ä¸­å›½â€ (å›½é™…è§†é‡ä¸ä¸­å›½æ ¹åŸº) æ—¢åˆ†é‡åˆç»Ÿä¸€çš„æŒ‘æˆ˜, å½“ç„¶åº”å¯¹è¿™äº›æŒ‘æˆ˜ä¹Ÿä¸ºåˆ›æ–°æœºé‡å¼€æ‹“äº†å¹¿è¢¤çš„ç©ºé—´.</p>
<br>
<br>
<h2 id="å¤§æ•°æ®ç‰¹å¾">å¤§æ•°æ®ç‰¹å¾</h2>
<p>æ¦‚æ‹¬è¯´æ¥, å¤§æ•°æ®çš„ç‰¹å¾å¯ä»¥ä»ä¸‰ä¸ªæ–¹é¢æ¥æè¿°:æ•°æ®ç‰¹å¾, é—®é¢˜ç‰¹å¾å’Œç®¡ç†å†³ç­–ç‰¹å¾, åˆ†åˆ«åˆ»ç”»å¤§æ•°æ®å…·æœ‰çš„æ•°æ®å±æ€§ã€å¤§æ•°æ®é—®é¢˜çš„ç‰¹ç‚¹ã€ä»¥åŠç®¡ç†å†³ç­–å¤§æ•°æ®é—®é¢˜çš„è§†è§’.</p>
<h3 id="11-å¤§æ•°æ®çš„æ•°æ®ç‰¹å¾">1.1 å¤§æ•°æ®çš„æ•°æ®ç‰¹å¾</h3>
<p>å¤§æ•°æ®ä½œä¸ºæ•°æ®, å…·æœ‰ä½“é‡å¤§ã€å¤šæ ·æ€§ã€ (ä»·å€¼) å¯†åº¦ä½ã€é€Ÿç‡é«˜ç­‰å±æ€§ç‰¹å¾ (å³4Vç­‰ç‰¹å¾ï¼‰.ç¬¬ä¸€, æ•°å­—åŒ–ç”Ÿæ´»å„è¦ç´ çš„æ•°æ®ç”Ÿæˆå’Œäº¤äº’åŠ é€Ÿäº†æ•°æ®çš„æµ·é‡ç§¯ç´¯, ä½¿å¾—æ•°æ®è§„æ¨¡å‰§å¢.ä½“é‡å¤§å¯ä»¥ä»è¶…è§„æ¨¡ (å³è¶…å‡ºä¼ ç»Ÿè§„æ¨¡) å’Œé—®é¢˜é¢†åŸŸè§’åº¦æ¥ç†è§£, å› ä¸ºè§„æ¨¡æ˜¯ä¸é—®é¢˜é¢†åŸŸç›¸å…³, è€Œä¸æ˜¯æ‹˜æ³¥äºç»Ÿä¸€é‡çº²æ ‡å‡†.ä¾‹å¦‚, å¸‚åœºè¥é”€é¢†åŸŸçš„å®¢æˆ·æ»¡æ„åº¦è°ƒæŸ¥çš„ä¼ ç»Ÿæ–¹å¼æ˜¯é—®å·å’Œè®¿è°ˆ, é‚£ä¹ˆè¿›ä¸€æ­¥è€ƒè™‘æµ·é‡ç½‘ä¸Šè´­ç‰©è¯„è®ºå’Œç¤¾äº¤åª’ä½“ä½“éªŒåˆ†äº«çš„ç”¨æˆ·ç”Ÿæˆå†…å®¹ (user generated content, UGC) å°±æ„æˆäº†ä¸€ä¸ªå¤§æ•°æ®æƒ…å¢ƒ.ç¬¬äºŒ, æ•°å­—åŒ–ç”Ÿæ´»å„è¦ç´ çš„æ•°æ®ç”Ÿæˆå’Œäº¤äº’ä¸°å¯Œäº†æ•°æ®ç±»å‹, ä½¿å¾—æ•°æ®å¤šæ ·æ€§æˆä¸ºå¸¸æ€.å¤šæ ·æ€§å¼ºè°ƒæ•°æ®çš„å¤šæºå¼‚æ„å’Œå¯Œåª’ä½“ (å¦‚æ–‡æœ¬ã€è¯­éŸ³ã€å›¾ç‰‡ã€è§†é¢‘ç­‰) ç‰¹ç‚¹.ä¾‹å¦‚, ç¤¾äº¤ç½‘ç»œä¸Šçš„å…¬ä¼—å£°éŸ³ã€æ™ºæ…§äº¤é€šå¹³å°ä¸Šçš„å½±åƒä¿¡æ¯ç­‰å‡ä¸ºå¯Œåª’ä½“å½¢æ€ä¸”æ¥æºå¹¿æ³›.ç¬¬ä¸‰, æ•°å­—åŒ–ç”Ÿæ´»å„è¦ç´ çš„æ•°æ®ç”Ÿæˆå’Œäº¤äº’åœ¨åŠ é€Ÿæµ·é‡ç§¯ç´¯çš„åŒæ—¶ä¹Ÿå‡å°‘äº†ä»·å€¼æ•°æ®çš„å æ¯”, ä½¿å¾—ä»·å€¼å‘ç°çš„éš¾åº¦æå‡.ä»·å€¼å¯†åº¦ä½æ„å‘³ç€æ•°æ®æŒ–æ˜å’Œå•†åŠ¡åˆ†ææ˜¯å¤§æ•°æ®åº”ç”¨çš„å…³é”®.ä¾‹å¦‚, å¯¹äºåœ¨çº¿ä¼ä¸šæˆ–æœåŠ¡å¹³å°æ¥è®², éšç€ç½‘ç»œè®¿é—®çš„å¢åŠ å’Œä¸šåŠ¡æ´»åŠ¨çš„æ‰©å±•, è¯†åˆ«é«˜ä»·å€¼çš„æ½œåœ¨ç”¨æˆ·å˜å¾—ç›¸å¯¹å›°éš¾, ä¹Ÿå‡¸æ˜¾å‡ºå¤§æ•°æ®åˆ†æçš„é‡è¦æ€§.ç¬¬å››, æ•°å­—åŒ–ç”Ÿæ´»å„è¦ç´ çš„æ•°æ®ç”Ÿæˆå’Œäº¤äº’å¼ºåŒ–äº†æµæ•°æ®å½¢æ€å’Œå³æ—¶æ€§, ä½¿å¾—æ•°æ®ä¼ è¾“å’Œäº¤æ¢é€Ÿç‡æ˜¾è‘—å‡é«˜.é€Ÿç‡é«˜å¯¹å¹³æ»‘æµé€šå’Œè¿ç»­å•†åŠ¡æå‡ºäº†æ›´é«˜è¦æ±‚.ä¾‹å¦‚, æ™ºèƒ½æ‰‹æœºå®¢æˆ·ç«¯åº”ç”¨è½¯ä»¶ (Apps) çš„ä½¿ç”¨éœ€è¦åœ¨æœåŠ¡å†…å®¹å’Œæ•ˆæœæ–¹é¢ (åŒ…æ‹¬ç›¸å…³å†…å®¹çš„æµè§ˆã€ä¸‹è½½ã€ä¸Šä¼ ã€å“åº”ã€å±•ç°ç­‰) æœ‰è‰¯å¥½çš„ä¸´åœºæ„Ÿå’Œå®æ—¶ä½“éªŒ.</p>
<br>
<h3 id="12-å¤§æ•°æ®çš„é—®é¢˜ç‰¹å¾">1.2 å¤§æ•°æ®çš„é—®é¢˜ç‰¹å¾</h3>
<p>åœ¨å„ç±»ç ”ç©¶å’Œåº”ç”¨é—®é¢˜ä¸­, æœ‰ä¸€ç±»é—®é¢˜å¯ä»¥å½’ä¸ºå¤§æ•°æ®é—®é¢˜.å¤§æ•°æ®é—®é¢˜åº”è‡³å°‘å…·æœ‰ä»¥ä¸‹ä¸‰ä¸ªç‰¹ç‚¹:ç²’åº¦ç¼©æ”¾ã€è·¨ç•Œå…³è”å’Œå…¨å±€è§†å›¾.é¦–å…ˆ, ç²’åº¦ç¼©æ”¾æ˜¯æŒ‡é—®é¢˜è¦ç´ çš„æ•°æ®åŒ–, å¹¶èƒ½å¤Ÿåœ¨ä¸åŒç²’åº¦å±‚çº§é—´è¿›è¡Œç¼©æ”¾.è¿™éœ€è¦é€šè¿‡æ•°æ®æ„ŸçŸ¥ã€è¿æ¥å’Œé‡‡é›†è·å¾—è¶³å¤Ÿç»†çš„ç²’åº¦æ€§, åŒæ—¶å¯¹äºä¸åŒå±‚çº§é—´çš„ç²’åº¦è½¬æ¢å…·æœ‰åˆ†è§£å’Œèšåˆèƒ½åŠ›.å…¶æ¬¡, è·¨ç•Œå…³è”æ˜¯æŒ‡é—®é¢˜çš„è¦ç´ ç©ºé—´å¤–æ‹“.è¿™éœ€è¦æ‰©å±•æƒ¯å¸¸çš„è¦ç´ çº¦æŸå’Œé¢†åŸŸè§†è§’, å¼ºè°ƒâ€œå¤–éƒ¨æ€§â€å’Œâ€œè·¨ç•Œâ€, åœ¨é—®é¢˜è¦ç´ ç©ºé—´ä¸­é€šè¿‡å¼•å…¥å¤–éƒ¨è§†è§’ä¸ä¼ ç»Ÿè§†è§’è”åŠ¨, å°†å†…éƒ¨æ•°æ® (å¦‚ä¸ªä½“è‡ªèº«ã€ä¼ä¸šç»„ç»‡å’Œè¡Œä¸šç­‰å†…éƒ¨æ•°æ®) ä¸å¤–éƒ¨æ•°æ® (å¦‚ç¤¾ä¼šåª’ä½“å†…å®¹ç­‰) äºˆä»¥å…³è”.æœ€å, å…¨å±€è§†å›¾æ˜¯æŒ‡é—®é¢˜å®šä¹‰ä¸æ±‚è§£çš„å…¨å±€æ€§, å¼ºè°ƒå¯¹ç›¸å…³æƒ…å¢ƒçš„æ•´ä½“ç”»åƒåŠå…¶åŠ¨æ€æ¼”åŒ–çš„æŠŠæ§å’Œè¯ é‡Š.è¿™éœ€è¦åŸºäºæ•°æ®åˆ†æå’Œå¹³å°é›†æˆçš„å…¨æ™¯å¼â€œæˆåƒâ€èƒ½åŠ›.</p>
<p>åœ¨æ•°å­—åŒ–ç”Ÿæ´»çš„èƒŒæ™¯ä¸‹, å…·æœ‰ç²’åº¦ç¼©æ”¾ã€è·¨ç•Œå…³è”å’Œå…¨å±€è§†å›¾ç‰¹ç‚¹çš„åº”ç”¨é—®é¢˜ä¸æ–­æ¶Œç°, è¿›è€Œæ¿€å‘äº†å¤§é‡åˆ›æ–°å¹¶å‚¬ç”Ÿäº†è®¸å¤šæ–°æ¨¡å¼ã€æ–°ä¸šæ€.ä¾‹å¦‚, åœ¨åŒ»ç–—å¥åº·é¢†åŸŸ, ä¼ ç»Ÿç–¾ç—…è¯Šç–—ä¸­çš„ç—…äººå°±åŒ»å…³ç³»æ­£åœ¨è¢«æ‰©å±•ä¸ºèåˆé™¢å¤–æ£€æµ‹ã€å¹²é¢„ã€åº·å¤æ•°æ®çš„æ–°å‹è¯Šç–—æ¨¡å¼.å…¶ä¸­, ä¸ä»…æ¶‰åŠä¼ ç»Ÿæ„ä¹‰ä¸Šçš„ç”ŸåŒ–ã€å½±åƒå’Œè¯Šç–—ç­‰åŒ»é™¢å†…éƒ¨æ•°æ®, ä¹Ÿæ¶‰åŠåŒ»é™¢å¤–ç—…äººå’Œç¤¾åŒºç›¸å…³çš„ä½“å¾ã€ä½“éªŒã€ç¤¾ä¼šå…³ç³»ã€ç¯å¢ƒç­‰å¤–éƒ¨æ•°æ®.è¿™é‡Œ, éœ€è¦è·å–ç›¸å…³ç”ŸåŒ–ç»„ç»‡ã€ç–¾ç—…ã€äººã€ç¤¾åŒºã€ç¯å¢ƒç­‰å¾®è§‚å®è§‚ç²’åº¦ä¿¡æ¯;åŒæ—¶è¿›è¡Œè§†è§’æ‹“å±•å’Œå…³è”, åŒ…æ‹¬ä»ç§‘å®¤å†…å¤–åˆ°åŒ»é™¢å†…å¤–çš„è·¨ç•Œèåˆ;è¿›è€Œ, å¯ä»¥åœ¨å…¨å±€å±‚é¢è¿›è¡Œæ›´ä¸ºæœ‰æ•ˆçš„è¯Šç–—å†³ç­–å’Œç®¡ç†.æ­¤å¤–, è¿‘å¹´æ¥å‘å±•è¿…é€Ÿçš„æ–°å‹åŒ»ç–—å¥åº·æœåŠ¡å¹³å°, é€šè¿‡æ•´åˆç¤¾ä¼šå’Œè¡Œä¸šèµ„æº, è¿æ¥åŒ»ç”Ÿã€å…¬ä¼—ã€åŒ»é™¢ä»¥åŠç›¸å…³ä¸Šä¸‹æ¸¸ä¼ä¸šæä¾›ä¿¡æ¯å’¨è¯¢ã€è¯Šç–—é“¾å…¥ã€å¥åº·æŒ‡å¯¼ç­‰æœåŠ¡äº§å“, å½¢æˆäº†ä¸€ç±»æ–°ä¸šæ€å¹¶å‘ˆç°æ˜¾è‘—çš„å¤§æ•°æ®é—®é¢˜ç‰¹å¾.å†å¦‚, åœ¨æ–°å‹å•†åŠ¡é¢†åŸŸ, å…±äº«å•è½¦ä½“ç°äº†å¤§æ•°æ®é—®é¢˜çš„ç²’åº¦ç¼©æ”¾ã€è·¨ç•Œå…³è”å’Œå…¨å±€è§†å›¾ç‰¹ç‚¹.é€šè¿‡è½¦è½½ä¼ æ„Ÿå™¨ã€å®šä½ç³»ç»Ÿä»¥åŠæ™ºèƒ½æ‰‹æœºç»ˆç«¯ç­‰è®¾å¤‡è·å¾—è°ƒåº¦å’Œç®¡ç†éœ€è¦çš„â€œäººâ€”è½¦â€”è·¯â€ç²’åº¦ä¿¡æ¯;åŒæ—¶, æ‰“é€šå¯¼èˆªã€æ”¯ä»˜ã€é€šè®¯ã€å•†é“ºä»¥åŠé¤é¥®ç­‰è¯¸å¤šä¸šåŠ¡åŠŸèƒ½, å®ç°è·¨ç•Œè”åŠ¨;è¿›è€Œ, ä¼ä¸šå’Œå¹³å°å¯ä»¥ä»å…¨å±€å‡ºå‘å½¢æˆæ•´ä½“ç”»åƒ, å¹¶ä¼˜åŒ–å¸ƒå±€å’Œè¿ä½œä»¥åšå‡ºç›¸åº”çš„ç®¡ç†å†³ç­–.</p>
<br>
<h3 id="13-å¤§æ•°æ®ç®¡ç†å†³ç­–ç‰¹å¾">1.3 å¤§æ•°æ®ç®¡ç†å†³ç­–ç‰¹å¾</h3>
<p>ä¸€èˆ¬è€Œè¨€, ç®¡ç†è€…åœ¨ä¸šåŠ¡æ´»åŠ¨ä¸­é€šå¸¸æœ‰ä¸‰ä¸ªå…³æ³¨:å‘ç”Ÿäº†ä»€ä¹ˆ (what) , ä¸ºä»€ä¹ˆå‘ç”Ÿ (why) ä»¥åŠå°†å‘ç”Ÿä»€ä¹ˆ (will) .åœ¨å¤§æ•°æ®é—®é¢˜ç‰¹å¾çš„æƒ…å¢ƒä¸‹, è¿™ä¸‰ä¸ªå…³æ³¨å¯ä»¥ä»ä¸šåŠ¡å±‚é¢ã€æ•°æ®å±‚é¢å’Œå†³ç­–å±‚é¢è¿›è¡Œåˆ»ç”», è¿›è€Œå½¢æˆç®¡ç†å†³ç­–å¤§æ•°æ®é—®é¢˜çš„ç‰¹å¾æ¡†æ¶ (å¦‚å›¾2æ‰€ç¤º) .</p>

<figure >
    
        <img src="img/2.jpg" width="800" />
    
    
</figure>

<p>é¦–å…ˆ, å¯¹äºå‘ç”Ÿäº†ä»€ä¹ˆ (what) çš„å…³æ³¨, ä¸šåŠ¡å±‚é¢éœ€è¦åæ˜ ä¸šåŠ¡çš„çŠ¶æ€, å³å·²ç»å‘ç”Ÿæˆ–è€…æ­£åœ¨å‘ç”Ÿçš„äº‹ä»¶å’Œæ´»åŠ¨ (å¦‚å¸‚åœºä»½é¢ã€äº¤æ˜“ç°çŠ¶ã€KPIè¡¨ç°ç­‰) ;æ•°æ®å±‚é¢éœ€è¦ä½“ç°ä¸šåŠ¡ç¯èŠ‚çš„æ•°æ®ç²’åº¦, å³ç°æœ‰çš„æ•°æ®èƒ½å¦è¶³å¤Ÿæ”¯æ’‘ç®¡ç†è€…å¯¹ä¸åŒç²’åº¦å±‚çº§çš„ä¸šåŠ¡çŠ¶æ€è¿›è¡Œäº†è§£å’ŒæŠŠæ¡ (å¦‚æ„ŸçŸ¥ã€é‡‡é›†ã€è§£æã€èåˆç­‰) ;å†³ç­–å±‚é¢éœ€è¦æ„å»ºé—®é¢˜çš„å…¨å±€è§†è§’, å³å®šæœŸæ•´åˆæ±‡æ€»ä»¥åŠéšéœ€è¦ç´ å±•ç° (å¦‚:æŒ‰æ—¶ç»Ÿè®¡æŠ¥è¡¨ã€å®æ—¶ä¿¡æ¯æŸ¥è¯¢ç­‰) .</p>
<p>æ¥ç€, å¯¹äºä¸ºä»€ä¹ˆä¼šå‘ç”Ÿ (why) çš„å…³æ³¨, ä¸šåŠ¡å±‚é¢éœ€è¦åæ˜ ä¸šåŠ¡åŠå…¶è¦ç´ ä¹‹é—´çš„è”ç³», å³ä¸šåŠ¡ç‰¹å®šçŠ¶æ€çš„å‘ç”Ÿä¸å“ªäº›ç¯èŠ‚å’Œè¦ç´ æœ‰å…³è”;æ•°æ®å±‚é¢éœ€è¦ä½“ç°ä¸åŒä¸šåŠ¡æ•°æ®è·¯å¾„çš„è¿æ¥, å³ä¸åŒç²’åº¦å±‚çº§å’Œè·¨ç•Œå…³è”çš„ä¸šåŠ¡æ•°æ®æ˜¯å¦æœ‰æ•ˆèé€š, å¹¶èƒ½å¤Ÿæ”¯æŒå¯¹æ•°æ®çš„åˆ†æå¤„ç† (å¦‚å¤šç»´ã€åˆ‡åˆ†ã€å›æº¯ç­‰) ;å†³ç­–å±‚é¢éœ€è¦å‘ç°å…³è”ä¸šåŠ¡/è¦ç´ ä¹‹é—´çš„å› æœå…³ç³», å³å˜æ¸…ä¸šåŠ¡é€»è¾‘å’ŒçŠ¶æ€è½¬æ¢æœºç†.åœ¨æ­¤, ç‰¹åˆ«éœ€è¦æŒ‡å‡ºçš„æ˜¯, åœ¨å¾ˆå¤šæƒ…å½¢ä¸‹, å°¤å…¶åœ¨ç®¡ç†å†³ç­–é¢†åŸŸ, å¤§æ•°æ®éœ€è¦æ—¢è®²å…³è”ä¹Ÿè®²å› æœ.å¯¹äºè®¸å¤šç®¡ç†é—®é¢˜è€Œè¨€, å¦‚æœå†³ç­–è€…å¯¹äº‹ä»¶ä¹‹é—´çš„å› æœå…³ç³»æ²¡æœ‰å‡†ç¡®çš„åˆ†æä¸åˆ¤æ–­, åˆ™éš¾ä»¥åšå‡ºæœ‰æ•ˆçš„å†³ç­–, å½“ç®¡ç†è€…é¢ä¸´é‡å¤§å†³ç­–æ—¶æ›´æ˜¯å¦‚æ­¤ (å¦‚æŠ•èèµ„ã€è¿›å…¥æ–°å¸‚åœºã€ä¸šåŠ¡è½¬å‹ã€ç»“æ„é‡ç»„ç­‰) .</p>
<p>è¿›è€Œ, å¯¹äºå°†å‘ç”Ÿä»€ä¹ˆ (will) çš„å…³æ³¨, ä¸šåŠ¡å±‚é¢éœ€è¦åæ˜ ä¸šåŠ¡å‘å±•è½¨è¿¹, å³å‹¾å‹’å‡ºç”±å†³ç­–æˆ–å˜åŒ–å¯¼è‡´çš„ä¸šåŠ¡èµ°å‘;æ•°æ®å±‚é¢éœ€è¦ä½“ç°æ•°æ®çš„åŠ¨æ€æ¼”åŒ–æƒ…å†µ, å³å¯¹äºç›¸å…³äº‹ä»¶è¿›è¡Œä¸ç¡®å®šæ€§åŠ¨æ€å»ºæ¨¡å¹¶èƒ½å¤Ÿæ”¯æŒæ™ºèƒ½å­¦ä¹ å’Œæ¨æ–­ (å¦‚æ¨¡æ‹Ÿã€é¢„æµ‹ã€äººå·¥æ™ºèƒ½ç­‰) ;å†³ç­–å±‚é¢éœ€è¦æå‡å‰ç»æ€§å’Œé£é™©æ´è§, å³è·å¾—å†³ç­–æƒ…å¢ƒæ˜ ç°å’Œè¶‹åŠ¿é¢„åˆ¤èƒ½åŠ›.</p>
<br>
<h2 id="å¤§æ•°æ®é©±åŠ¨èŒƒå¼">å¤§æ•°æ®é©±åŠ¨èŒƒå¼</h2>
<p>ç³»ç»ŸåŒ–ç®¡ç†ç†è®ºçš„äº§ç”ŸåŠå…¶å‘å±•, åŒ…æ‹¬è¡Œä¸ºç†è®ºã€å†³ç­–ç†è®ºã€æƒå˜ç†è®ºå’Œæˆ˜ç•¥ç®¡ç†ç­‰ç†è®ºä½“ç³»å’Œç®¡ç†æ¨¡å‹çš„ç ”ç©¶[19], åœ¨æç‚¼ç®¡ç†æ€æƒ³ã€è¯ é‡Šç®¡ç†æ¨¡å¼å’ŒæŒ‡å¯¼ç®¡ç†å®è·µæ–¹é¢å‘æŒ¥äº†é‡è¦ä½œç”¨.é•¿æœŸä»¥æ¥, ç®¡ç†å­¦ç ”ç©¶ä¸€ç›´ä»¥æ¨¡å‹é©±åŠ¨èŒƒå¼ä¸ºé¢†åŸŸä¸»æµ.åœ¨æ¨¡å‹é©±åŠ¨èŒƒå¼ä¸‹, ç ”ç©¶è€…åŸºäºè§‚å¯ŸæŠ½è±¡å’Œç†è®ºæ¨æ¼”å»ºç«‹æ¦‚å¿µæ¨¡å‹å’Œå…³è”å‡è®¾, å†å€ŸåŠ©è§£ææ‰‹æ®µ (ä¾‹å¦‚è¿ç­¹å­¦å’Œåšå¼ˆè®ºç­‰åˆ†æå·¥å…·) å¯¹æ¨¡å‹è¿›è¡Œæ±‚è§£å’Œä¼˜åŒ–, æˆ–åˆ©ç”¨ç›¸å…³æ•°æ® (åŒ…æ‹¬ä»¿çœŸæ•°æ®ã€è°ƒç ”æ•°æ®ã€è§‚æµ‹æ•°æ®ã€ç³»ç»Ÿè®°å½•æ•°æ®ç­‰) å¯¹å‡è®¾è¿›è¡Œç»Ÿè®¡æ£€éªŒ.æ­¤å¤–, å»ºç«‹åœ¨å½’çº³é€»è¾‘åŸºç¡€ä¸Šçš„æ‰æ ¹ç†è®ºç­‰ç ”ç©¶èŒƒå¼, ä¼ ç»Ÿä¸Šå¼ºè°ƒä»æ–‡çŒ®æ¦‚æ‹¬ã€å®åœ°è°ƒç ”ã€æ·±åº¦è®¿è°ˆä¸­è¿›è¡Œå®šæ€§æ¨æ¼”å½¢æˆç†è®ºå’Œè®¤è¯†.</p>
<p>ä½†æ˜¯, åœ¨å¤§æ•°æ®èƒŒæ™¯ä¸‹, ä¸€äº›æ–°çš„æŒ‘æˆ˜æ­£åœ¨æ¶Œç°[20,21].è¿™é‡Œ, ä»¥ä¼ ç»Ÿçš„è¡Œä¸ºæ¨¡å‹æˆ–è®¡é‡æ¨¡å‹ (ç®€ç§°ä¼ ç»Ÿæ¨¡å‹) ä¸ºä¾‹.ç¬¬ä¸€, ä¼ ç»Ÿæ¨¡å‹åŸºäºè§‚å¯ŸæŠ½è±¡ã€ç†è®ºæ¨æ¼”ä»¥åŠç»éªŒæç‚¼ç¡®å®šå˜é‡ (æˆ–æ„å¿µ) ç»„åˆ, ä»¥æ­¤æ„å»ºå˜é‡å…³ç³»å’Œç†è®ºå‡è®¾, å¹¶é€šè¿‡æ•°æ®å®è¯è¿›è¡Œæ¨¡å‹æ£€éªŒ.ç„¶è€Œ, åœ¨å¤§æ•°æ®èƒŒæ™¯ä¸‹, å¸¸å¸¸éœ€è¦æ£€éªŒå¤§é‡çš„å˜é‡ç»„åˆ (å¦‚æŒ‡æ•°çº§ç»„åˆæ•°) , è¿™å°±ä½¿å¾—é€ä¸€æ„å»ºä¼ ç»Ÿæ¨¡å‹å¹¶è¿›è¡Œæ£€éªŒæˆä¸ºéš¾ä»¥å®Œæˆçš„ä»»åŠ¡.ç¬¬äºŒ, æœ‰äº›é‡è¦æ½œåœ¨å½±å“å› ç´ å’Œéšå˜é‡æ²¡æœ‰è¢«æ„è¯†åˆ°, å› è€Œæ²¡æœ‰è¢«è€ƒè™‘åˆ°ä¼ ç»Ÿæ¨¡å‹çš„å˜é‡ç»„åˆä¸­, è¿™å¸¸å¸¸å¯¼è‡´ä¼ ç»Ÿæ¨¡å‹çš„å‡è®¾ä¸æ•°æ®çš„é€‚é…æ€§ä¸å¼º, æ¨¡å‹è§£é‡ŠåŠ›ä¸é«˜.ç¬¬ä¸‰, è™½ç„¶çŸ¥é“æœ‰äº›å½±å“å› ç´ å’Œå˜é‡æ˜¯é‡è¦çš„, ä½†æ˜¯ç”±äºè¿™äº›å› ç´ å’Œå˜é‡åœ¨ä¼ ç»Ÿæ„ä¹‰ä¸Šä¸å¯æµ‹æˆ–ä¸å¯è· (å¦‚æ–‡æœ¬ã€å›¾åƒã€è¯­éŸ³ç­‰å¯Œåª’ä½“æ•°æ®) , éš¾ä»¥å®¹çº³åˆ°ä¼ ç»Ÿæ¨¡å‹å˜é‡ç»„åˆä¸­, è¿›è€Œé€ æˆæ¨¡å‹è§£é‡ŠåŠ›ä¸ç†æƒ³.ç¬¬å››, å½“æ ·æœ¬æ•°æ®è§„æ¨¡å¤§å¹…å¢åŠ æ—¶, å¯¹ä¸€äº›å˜é‡çš„æ˜¾è‘—æ€§æ£€éªŒæœ‰æ•ˆæ€§ä¸‹é™, å¯èƒ½å‡ºç°è”ç³»ç¼ºå¤±æˆ–æ‹Ÿåˆè¿‡åº¦ç­‰æƒ…å½¢.</p>
<p>é¢å¯¹ä¸Šè¿°æŒ‘æˆ˜, æ•°æ®é©±åŠ¨èŒƒå¼çš„ä¼˜åŠ¿ä¸æ–­å‡¸æ˜¾.æ¦‚æ‹¬è¯´æ¥, æ•°æ®é©±åŠ¨èŒƒå¼çš„ä½œç”¨æœ‰ä¸¤ä¸ª:ä¸€æ˜¯ç›´æ¥å‘ç°ç‰¹å®šå˜é‡å…³ç³»æ¨¡å¼, å½¢æˆé—®é¢˜è§£å†³æ–¹æ¡ˆ;äºŒæ˜¯ä¸æ¨¡å‹é©±åŠ¨èŒƒå¼è¿›è¡Œè¡¥å……æ‰©å±•, å½¢æˆèåˆèŒƒå¼.å€¼å¾—æŒ‡å‡ºçš„æ˜¯, æ•°æ®é©±åŠ¨èŒƒå¼å‘ç°çš„ä¸€ç±»é‡è¦å…³ç³»æ¨¡å¼æ˜¯å…³è” (association) åŠå…¶æ‰©å±•å½¢å¼ (å¦‚å…³è”è§„åˆ™ã€å±‚æ¬¡å…³è”ã€æ•°é‡å…³è”ã€æ—¶æ€å…³è”ã€ç±»å…³è”ã€æ¨¡å¼å…³è”ç­‰) , å¹¶å¹¿æ³›åº”ç”¨åˆ°è®¸å¤šé¢†åŸŸ (å¦‚æœç´¢ã€æ¨èã€æ¨¡å¼è¯†åˆ«ç­‰) [22].ç„¶è€Œ, è®¸å¤šç®¡ç†å†³ç­–æƒ…å½¢ä¸ä»…éœ€è¦å…³è”ä¹Ÿéœ€è¦å› æœ, è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‚¬ç”Ÿäº†èåˆèŒƒå¼åŠå…¶åº”ç”¨.ä¾‹å¦‚, é¦–å…ˆåˆ©ç”¨æ•°æ®é©±åŠ¨èŒƒå¼çš„å…³è”æŒ–æ˜æ–¹æ³•å‘ç°å˜é‡é—´çš„å…³è”, ä»¥ç¼©å‡å˜é‡ç©ºé—´å’Œç»„åˆè§„æ¨¡;è¿›è€Œåˆ©ç”¨æ¨¡å‹é©±åŠ¨èŒƒå¼çš„è¡Œä¸ºæ–¹æ³•è¾¨è¯†æ„å¿µå½±å“è·¯å¾„, æˆ–è®¡é‡æ–¹æ³•è§£æå˜é‡é—´çš„å› æœå…³ç³».è¿™æ˜¯ä¸€ä¸ªâ€œæ•°æ®é©±åŠ¨+æ¨¡å‹é©±åŠ¨â€æ€è·¯, ä½“ç°â€œå…³è”+å› æœâ€çš„è¯‰æ±‚, è¿™å¯¹äºç®¡ç†å†³ç­–å°¤ä¸ºé‡è¦.è¿™é‡Œ, ä¸ä¼ ç»Ÿæ¨¡å‹ç›¸æ¯”ä¸€ä¸ªé‡è¦åŒºåˆ«æ˜¯, æ­¤æ—¶çš„å˜é‡ç©ºé—´ä¸­å¯èƒ½å­˜åœ¨ç€ä¸€äº›æ–°é¢–ä¸”æ½œåœ¨çš„å˜é‡åŠå…¶å…³è”, åœ¨è¿›ä¸€æ­¥èåˆè¿ç”¨æ¨¡å‹é©±åŠ¨æ–¹æ³•æ„å»ºå˜é‡å…³ç³»æ—¶å­˜åœ¨å›°éš¾, å› ä¸ºå·²æœ‰çš„ç†è®ºçŸ¥è¯†å’Œé¢†åŸŸç»éªŒä¸èƒ½ç›´æ¥æ”¯æŒç›¸å…³çš„å»ºæ¨¡é€»è¾‘å’Œå…³ç³»å½¢å¼.è¿™å°±éœ€è¦åœ¨æ›´æ·± (åŒ…æ‹¬é—´æ¥ã€æ½œéš) å±‚é¢ä¸Šæ¢å¯»æ–°çš„å˜é‡å½±å“æœºç†å’Œç†è®º, å¹¶åœ¨æ–¹æ³•è®ºä¸Šå¦è¾Ÿæ–°å¾„ (å¦‚é€šè¿‡æ­¥è¿›/å±‚æ¬¡/è¿­ä»£çš„è¯•é”™å’Œå¯å‘å»ºæ¨¡æ–¹å¼) .</p>
<p>ç‰¹åˆ«åœ°, å½“æ•°æ®å…·æœ‰4Vç­‰ç‰¹å¾å¹¶ä¸”é¢å¯¹ç®¡ç†å†³ç­–å¤§æ•°æ®é—®é¢˜æ—¶, è€ƒè™‘æ•°æ®é©±åŠ¨ä¸æ¨¡å‹é©±åŠ¨çš„ç»“åˆã€ç®¡ç†å†³ç­–çš„å…³è”å› æœç‰¹ç‚¹ã€ä½¿èƒ½åˆ›æ–°ç­‰å…ƒç´ çš„ä¸€ç±»æ–°å‹èŒƒå¼ (åœ¨æ­¤ç§°ä½œå¤§æ•°æ®é©±åŠ¨èŒƒå¼) åº”è¿è€Œç”Ÿ, å¹¶åœ¨æ·±å…¥ç ”ç©¶ä¸åº”ç”¨è¿‡ç¨‹ä¸­å¾—åˆ°è¿›ä¸€æ­¥å‘å±•å®Œå–„.ä¸€èˆ¬è€Œè¨€, å¤§æ•°æ®é©±åŠ¨èŒƒå¼å…·æœ‰â€œæ•°æ®é©±åŠ¨+æ¨¡å‹é©±åŠ¨â€çš„â€œå…³è”+å› æœâ€æ€§è´¨.å…·ä½“è¯´æ¥, å¤§æ•°æ®é©±åŠ¨èŒƒå¼çš„æ¡†æ¶å¯ä»ä¸‰ä¸ªè§’åº¦æ¥å®¡è§†:å¤–éƒ¨åµŒå…¥ã€æŠ€æœ¯å¢å¼ºä»¥åŠä½¿èƒ½åˆ›æ–° (å¦‚å›¾3æ‰€ç¤º) .å‰ä¸¤ä¸ªè§’åº¦ä¸»è¦æ¶‰åŠæ–¹æ³•è®ºå±‚é¢, åä¸€ä¸ªè§’åº¦ä¸»è¦æ¶‰åŠä»·å€¼åˆ›é€ å±‚é¢.</p>

<figure >
    
        <img src="img/3.jpg" width="800" />
    
    
</figure>

<br>
<h3 id="21-å¤–éƒ¨åµŒå…¥">2.1 å¤–éƒ¨åµŒå…¥</h3>
<p>å¤–éƒ¨åµŒå…¥æŒ‡å¤–éƒ¨è§†è§’å¼•å…¥, å³å°†ä¼ ç»Ÿæ¨¡å‹è§†è§’ä¹‹å¤–çš„ä¸€äº›é‡è¦å˜é‡ (åŒ…æ‹¬æ„å¿µã€å› ç´ ç­‰) å¼•å…¥åˆ°æ¨¡å‹ä¸­.å‡è®¾è‡ªå˜é‡é›†åˆä¸ºX'={x1, x2, â€¦, xm, xm+1, â€¦, xn}, å…¶ä¸­x1, x2, â€¦, xmä¸ºä¼ ç»Ÿå»ºæ¨¡å˜é‡, xm+1, â€¦, xnä¸ºé€šè¿‡æ•°æ®é©±åŠ¨æ–¹æ³•æ–°å¼•å…¥çš„å˜é‡ (å¤šä¸ºå¯Œåª’ä½“å½¢æ€) .å¦‚æœæ²¡æœ‰å˜é‡å¼•å…¥ (n=m) , ä¼ ç»Ÿæ¨¡å‹çš„å˜é‡å…³ç³»æ˜¯Y=f (X) , X={x1, x2, â€¦, xm}.åœ¨è·¨ç•Œå…³è”æƒ…å¢ƒä¸‹ (n&gt;m) , å°†å½¢æˆæ–°å˜é‡å…³ç³»Y'=f' (X') .æ¢å¥è¯è¯´, Y=f (X) å¯ä»¥æ˜¯Y'=f' (X') çš„ç‰¹ä¾‹;ä¸€èˆ¬æ„ä¹‰ä¸Šè®², X'â‰ X, f'â‰ f, Y'â‰ Y.æ˜¾ç„¶, æ–°å˜é‡å…³ç³»çš„æ„å»ºé¢ä¸´ç€æ·±åˆ»çš„æŒ‘æˆ˜, æ—¢æœ‰æ–°å˜é‡ç©ºé—´çš„å‘ç°, åˆæœ‰æ–°è§†è§’çš„æ´å¯Ÿ, ä¹Ÿæœ‰æ–°å˜é‡å…³ç³»çš„è¾¨è¯†å’Œæ–°ç†è®ºçš„ç”Ÿæˆ.å½“ç„¶, å¯¹äºç ”ç©¶å’Œåº”ç”¨æ¥è®², è¿™äº›æŒ‘æˆ˜åŒæ—¶ä¹Ÿæ˜¯åˆ›æ–°çš„æœºé‡.ä¾‹å¦‚, åœ¨é‡‘èé¢†åŸŸ, å¯ä»¥è€ƒè™‘å¼•å…¥æœç´¢å¹³å°ä¸Šçš„è‚¡ç¥¨å…³æ³¨æ•°æ®å˜é‡ä»¥åŠç¤¾äº¤åª’ä½“å¹³å°ä¸Šçš„ç›¸å…³å…¬å…±äº‹ä»¶æ•°æ®å˜é‡ç­‰, ä»¥æ„å»ºæ–°å‹è‚¡ä»·é¢„æµ‹æ¨¡å‹;åœ¨å•†åŠ¡é¢†åŸŸ, å¯ä»¥è€ƒè™‘å¼•å…¥è´­ç‰©å¹³å°ä¸Šçš„è¯„è®ºæ•°æ®å˜é‡ä»¥åŠæœ‹å‹åœˆä¸­çš„ä½“éªŒå’Œå£ç¢‘æ•°æ®å˜é‡ç­‰, ä»¥æ„å»ºæ–°å‹å•†å“è¥é”€æ¨¡å‹;åœ¨åŒ»ç–—å¥åº·é¢†åŸŸ, å¯ä»¥è€ƒè™‘å¼•å…¥é™¢å¤–ç—…å‹æ™ºèƒ½æ£€æµ‹ç»ˆç«¯æ•°æ®å˜é‡ä»¥åŠåŒºåŸŸç¯å¢ƒè¯±å› æ•°æ®å˜é‡ç­‰, ä»¥æ„å»ºæ–°å‹å‘¼å¸ç–¾ç—…é¢„é˜²è¯Šç–—æ¨¡å‹;åœ¨å…¬å…±ç®¡ç†é¢†åŸŸ, å¯ä»¥è€ƒè™‘å¼•å…¥ç¤¾äº¤å¹³å°ä¸Šçš„å—ä¼—æ„è§æ•°æ®å˜é‡ä»¥åŠç›¸å…³é¢†åŸŸè”åŠ¨å½±å“æ•°æ®å˜é‡ç­‰, ä»¥æ„å»ºæ–°å‹å…¬å…±æ”¿ç­–æ¨¡å‹.</p>
<br>
<h3 id="22-æŠ€æœ¯å¢å¼º">2.2 æŠ€æœ¯å¢å¼º</h3>
<p>å¯¹äºä¼ ç»Ÿæ¨¡å‹æ¥è®², é€šè¿‡å¤–éƒ¨åµŒå…¥è€Œå¼•å…¥çš„å˜é‡å¤šä¸ºå¯Œåª’ä½“ã€æ½œéšæ€§ã€ä¸å¯æµ‹æˆ–ä¸å¯è·, é€šå¸¸éœ€è¦åˆ©ç”¨æ•°æ®é©±åŠ¨æ–¹æ³•å’ŒæŠ€æœ¯.å¯ä»¥è¯´, æ•°æ®å’ŒæŠ€æœ¯æ„è¯†åŠå…¶èƒ½åŠ›æ˜¯å¤§æ•°æ®èƒŒæ™¯ä¸‹ç ”ç©¶å’Œåº”ç”¨çš„æ ¸å¿ƒç«äº‰åŠ›, ä¹Ÿæ˜¯å¤§æ•°æ®é©±åŠ¨èŒƒå¼çš„å…³é”®è¦ç´ .æŠ€æœ¯å¢å¼ºæ—¨åœ¨æå‡è¿™æ ·çš„èƒ½åŠ›ä¸è¦ç´ æ°´å¹³.</p>
<p>ä»å¤§æ•°æ®çš„â€œç”¨â€ä¸â€œé€ â€è§†è§’å‡ºå‘, æŠ€æœ¯å¢å¼ºå…·æœ‰ä¸¤æ–¹é¢å«ä¹‰.ä¸€æ–¹é¢, â€œç”¨â€çš„è§†è§’è¦æ±‚ç®¡ç†æ¨¡å‹é©±åŠ¨çš„ç ”ç©¶å’Œåº”ç”¨èƒ½å¤Ÿå¢å¼ºå¯¹å¤–éƒ¨å¤§æ•°æ®çš„æ•æ„Ÿæ€§, å¼•å…¥å¤–éƒ¨å˜é‡å¹¶æ„å»ºå…¶å…³ç³»;åŒæ—¶, èƒ½å¤Ÿå¢å¼ºå¯¹å¤§æ•°æ®åˆ†ææŠ€æœ¯çš„æ•æ„Ÿæ€§, æ„å»ºæ–¹æ³•å’Œå·¥å…·çš„è·å–å’Œä½¿ç”¨èƒ½åŠ›.ç ”ç©¶å’Œåº”ç”¨åˆ›æ–°é€šå¸¸ä½“ç°åœ¨é€šè¿‡æ–°å‹èŒƒå¼å¼€å‘æ–°çš„å˜é‡å…³ç³», è¿›è€Œå½¢æˆæ–°çš„ç®¡ç†å­¦æ¨¡å‹å’Œåº”ç”¨ (å¦‚é¢å‘ç®¡ç†é—®é¢˜çš„æ–°å‹è¡Œä¸ºæ¨¡å‹æˆ–è®¡é‡æ¨¡å‹) , ä»¥è·å¾—æ›´æ·±å…¥å’Œæ›´å…·è§£é‡ŠåŠ›çš„ç®¡ç†å†³ç­–æ´è§å’Œç­–ç•¥.</p>
<p>å¦ä¸€æ–¹é¢, â€œé€ â€çš„è§†è§’è¦æ±‚æ•°æ®é©±åŠ¨çš„ç ”ç©¶å’Œåº”ç”¨èƒ½å¤Ÿå¢å¼ºå¯¹äºç®¡ç†å†³ç­–é—®é¢˜çš„æ•æ„Ÿæ€§, æ„å»ºé¢å‘ç®¡ç†å†³ç­–é—®é¢˜çš„æ–¹æ³•å’ŒæŠ€æœ¯.ç ”ç©¶å’Œåº”ç”¨åˆ›æ–°é€šå¸¸ä½“ç°åœ¨æ ¹æ®ç®¡ç†å†³ç­–é—®é¢˜ç‰¹ç‚¹åŠå…¶æ•°æ®å±æ€§å¼€å‘ç›¸å…³æ€§è´¨ã€æµ‹åº¦å’Œç­–ç•¥, ä»¥è·å¾—æ–°é¢–æœ‰æ•ˆçš„ç®—æ³•å’Œè§£å†³æ–¹æ¡ˆ.å€¼å¾—æŒ‡å‡ºçš„æ˜¯, è¿™é‡Œè®¸å¤šç®—æ³• (ç‰¹åˆ«æ˜¯å¯å‘å¼ç®—æ³•å’Œè¿‘ä¼¼è§£æ³•) éœ€è¦ç»è¿‡å®éªŒæ•°æ®çš„éªŒè¯ä»¥è¯„ä¼°å…¶æ•ˆç‡å’Œæ•ˆæœ.</p>
<p>å¤šå¹´æ¥, ä¸ç®¡æ˜¯â€œç”¨â€çš„è§†è§’è¿˜æ˜¯â€œé€ â€çš„è§†è§’åœ¨æ•°æ®çš„ä½¿ç”¨æ ‡å‡†ä¸Šä¹Ÿç»å†äº†ä¸€ä¸ªä¸æ–­å‡çº§çš„è¿‡ç¨‹, ä»æ¨¡æ‹Ÿæ•°æ®åˆ°æ ‡æ†æ•°æ®, å†åˆ°ç›¸å½“è§„æ¨¡çš„å®é™…æ•°æ®, å½¢æˆä¸€ä¸ªé€æ­¥ä¸°å¯Œå’Œå åŠ çš„éªŒè¯å®è·µ.åœ¨å¤§æ•°æ®æƒ…å¢ƒä¸‹, å®é™…æ•°æ®çš„è§„æ¨¡åŒ–å¾—åˆ°äº†è¿›ä¸€æ­¥å¼ºåŒ–.æ­¤å¤–, åœ¨ç®—æ³•æ¯”è¾ƒä¸­, æ›´å…³æ³¨ç®—æ³•å¸¦æ¥çš„å®ç”¨æ•ˆæœæå‡çš„æ˜¾è‘—æ€§, ç‰¹åˆ«åœ¨æ¶‰åŠç›¸å…³ç”¨æˆ·çš„åœºæ™¯ä¸­, é€šå¸¸éœ€è¦è¿›è¡Œç”¨æˆ·è¡Œä¸ºå®éªŒåŠå…¶æ•ˆæœæ„ŸçŸ¥è¯„æµ‹.</p>
<p>åœ¨æ•°æ®ç±»å‹æ–¹é¢, å¯Œåª’ä½“å½¢æ€ (å¦‚æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ç­‰) æˆä¸ºä¸»æµ.å…¶ä¸­, éŸ³é¢‘æ•°æ®ã€è§†é¢‘æ•°æ®å…·æœ‰æ—¶é—´è¿ç»­æ€§ç‰¹ç‚¹.ç”±äºè®¡ç®—æœºä¸­é€šå¸¸é‡‡ç”¨ç¼–ç ã€é‡‡æ ·ç­‰æ–¹å¼è¡¨ç¤ºå¯Œåª’ä½“æ•°æ®, å› è€Œæ•°æ®å˜æ¢æˆä¸ºå¤§æ•°æ®åˆ†æçš„é‡è¦å†…å®¹.å¸¸ç”¨çš„æ•°æ®å˜æ¢æ–¹æ³•åŒ…æ‹¬æ–‡æœ¬å¤„ç†çš„å‘é‡ç©ºé—´æ¨¡å‹ (VSM) [23]ã€ä¸»é¢˜æ¨¡å‹ (topic model) [24], å›¾åƒå¤„ç†çš„å°ºåº¦ä¸å˜ç‰¹å¾è½¬æ¢ (SIFT) [25], éŸ³é¢‘å¤„ç†çš„çŸ­æ—¶å‚…é‡Œå¶å˜æ¢ (STFT) [26], è§†é¢‘å¤„ç†çš„æ—¶ç©ºå…´è¶£ç‚¹æ£€æµ‹ (STIP) [27]ç­‰æ–¹æ³•.è¿‘å¹´æ¥, éšç€å¤§æ•°æ®å¹³å°åŒ–è¿ç®—èƒ½åŠ›çš„æ˜¾è‘—æå‡, åŸºäºæ·±åº¦ç¥ç»ç½‘ç»œçš„ç›¸å…³æ–¹æ³•è¿›ä¸€æ­¥å‘å±•, å¹¶åœ¨å¯Œåª’ä½“æ•°æ®å˜æ¢ä¸Šå±•ç°å‡ºè‰¯å¥½çš„åº”ç”¨æ•ˆæœå’Œå‘å±•å‰æ™¯.ä¾‹å¦‚, ç”¨äºæ–‡æœ¬æ•°æ®çš„å•è¯åµŒå…¥ (word embedding) [28], ç”¨äºå›¾åƒæ•°æ®çš„å·ç§¯ç¥ç»ç½‘ç»œ (CNN) [29]å’Œèƒ¶å›Šç¥ç»ç½‘ç»œ (capsnet) [30], ç”¨äºéŸ³è§†é¢‘ç­‰å…·æœ‰æ—¶é—´åºåˆ—ç‰¹å¾æ•°æ®çš„å¾ªç¯ç¥ç»ç½‘ç»œ (RNN) [31]ã€é•¿çŸ­æ—¶è®°å¿†ç¥ç»ç½‘ç»œ (LSTM) [32]ç­‰.å…¶ä»–è¾ƒæ–°çš„æ•°æ®å˜æ¢æ–¹æ³•è¿˜åŒ…æ‹¬å¤šå±‚æ„ŸçŸ¥æœº (MLP) ã€è‡ªå­¦ä¹ ç¼–ç å™¨ (AE) ã€å—é™åˆ¶ç»å°”å…¹æ›¼æœº (RBM) ã€æ·±åº¦è¯­ä¹‰ç›¸ä¼¼æ¨¡å‹ (DSSM) ã€ç¥ç»è‡ªå›å½’åˆ†å¸ƒä¼°è®¡ (NADE) ã€ç”Ÿæˆå¯¹æŠ—ç½‘ç»œ (GAN) ç­‰[33,34].</p>
<br>
<h3 id="23-ä½¿èƒ½åˆ›æ–°">2.3 ä½¿èƒ½åˆ›æ–°</h3>
<p>å¤§æ•°æ®é©±åŠ¨çš„ä¸€ä¸ªé‡è¦å«ä¹‰æ˜¯å¤§æ•°æ®ä½¿èƒ½ (enabling) .å¤§æ•°æ®èƒ½åŠ›ä¸»è¦åŒ…æ‹¬å¤§æ•°æ®æˆ˜ç•¥ã€å¤§æ•°æ®åŸºç¡€è®¾æ–½ã€å¤§æ•°æ®åˆ†æ (6) æ–¹æ³•ä¸æŠ€æœ¯ç­‰.å¤§æ•°æ®ä½¿èƒ½æ˜¯æŒ‡å¤§æ•°æ®èƒ½åŠ›å¸¦åŠ¨çš„ä»·å€¼åˆ›é€ .ä¾‹å¦‚, ä»ç ”ç©¶å’Œåº”ç”¨èŒƒå¼è§’åº¦çœ‹, å¤–éƒ¨åµŒå…¥æ˜¯ä¸€ç§ä½¿èƒ½æƒ…å½¢, Y'=f' (X') ä¸­, å¤§æ•°æ®èƒ½åŠ›é€šè¿‡è‡ªå˜é‡X'ä½“ç°, åˆ›é€ çš„ä»·å€¼é€šè¿‡å› å˜é‡Y'ä½“ç°, ä½¿èƒ½è½¬æ¢æ–¹å¼é€šè¿‡f'ä½“ç°.ä»ç ”ç©¶å’Œåº”ç”¨æƒ…å¢ƒè§’åº¦çœ‹, ä¼ä¸šçš„ä»·å€¼åˆ›é€ å¯ä»¥ä½“ç°åœ¨å…¶ä»·å€¼é“¾çš„ç¯èŠ‚ä¸Š, æ—¢åŒ…æ‹¬ä»·å€¼é“¾çš„ä¸»ç¯èŠ‚åŠå…¶æ´»åŠ¨, ä¹ŸåŒ…æ‹¬ä»·å€¼é“¾çš„æ”¯æŒç¯èŠ‚åŠå…¶æ´»åŠ¨[35].åœ¨ä¼ä¸šå†…å¤–éƒ¨å¤§æ•°æ®ç¯å¢ƒä¸‹, ä¼ä¸šä½¿èƒ½åˆ›æ–°æ˜¯é€šè¿‡æ„å»ºå¤§æ•°æ®èƒ½åŠ›, å¸¦åŠ¨æ–°æ´å¯Ÿã€æ–°æ¨¡å¼ã€æ–°æœºä¼šçš„å‘ç°, è¿›è€Œæ¨åŠ¨äº§å“/æœåŠ¡åˆ›æ–°å’Œå•†ä¸šæ¨¡å¼åˆ›æ–°, ä»¥å®ç°ä¼ä¸šçš„ä»·å€¼åˆ›é€  (å¦‚å›¾4æ‰€ç¤º) .</p>

<figure >
    
        <img src="img/4.jpg" width="800" />
    
    
</figure>

<p>ç»¼ä¸Šæ‰€è¿°, å¤§æ•°æ®é©±åŠ¨èŒƒå¼é€šè¿‡æŠ€æœ¯å¢å¼ºå¼•å…¥äº†æ–°è§†è§’, è¿›è€Œæ¨åŠ¨äº†æ–°å‹å˜é‡å…³ç³»ã€è¦ç´ æœºç†å’Œç†è®ºæ¨¡å‹æ„å»º, å¹¶æå‡äº†å¤§æ•°æ®ä½¿èƒ½åˆ›æ–°çš„ä»·å€¼åˆ›é€ .è¿™å¯¹äºåº”å¯¹æ–°å‹å•†åŠ¡å½¢æ€çš„è¿›ä¸€æ­¥å‘å±•æœºé‡å’ŒæŒ‘æˆ˜å…·æœ‰é‡è¦æ„ä¹‰.ç®€å•è¯´æ¥, æ–°å‹å•†åŠ¡å¯ä»¥é€šè¿‡ä¸¤ä¸ªé˜¶æ®µäºˆä»¥æè¿°.ç¬¬ä¸€ä¸ªé˜¶æ®µç§°ä½œæ•°æ®å•†åŠ¡ (digital businessæˆ–data-centric business) , å³â€œæ•°æ®åŒ–+å•†åŠ¡åˆ†æ (BA) â€.æ­¤æ—¶é€šè¿‡ç»†åŒ–æ•°æ®ç²’åº¦ä½¿å¾—å•†åŠ¡è¦ç´ çš„â€œåƒç´ â€æ˜¾è‘—æå‡, å¹¶åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œå•†åŠ¡åˆ†æ, é’ˆå¯¹ä¸åŒç®¡ç†åœºæ™¯å’Œå±‚æ¬¡è¿›è¡Œâ€œæˆåƒâ€å’Œå†³ç­–.ç¬¬äºŒä¸ªé˜¶æ®µç§°ä½œç®—æ³•å•†åŠ¡ (algorithmic business) , å³â€œå•†åŠ¡åˆ†æ+â€.æ­¤æ—¶, åœ¨å·²æœ‰çš„å•†åŠ¡é«˜åƒç´ åŸºç¡€ä¸Š, æˆåƒç®—æ³•æˆä¸ºå…³æ³¨é‡ç‚¹, æ—¨åœ¨è·å¾—é¢å¯¹æ–°æ¨¡å¼ã€æ–°ä¸šæ€ã€æ–°äººç¾¤[3]çš„å‘å±•ç­–ç•¥å’Œç«äº‰ä¼˜åŠ¿.è¿™é‡Œ, â€œå•†åŠ¡åˆ†æ+â€åŒ…æ‹¬BAç®—æ³•åˆ›æ–°å’ŒBAä½¿èƒ½åˆ›æ–°.</p>
<p>è¿‘å¹´æ¥, äººå·¥æ™ºèƒ½ (artificial intelligence, AI) çš„ç ”ç©¶å’Œåº”ç”¨å¾—åˆ°äº†å¿«é€Ÿå‘å±•, å¹¶å—åˆ°å„ç•Œçš„å¹¿æ³›é‡è§†.äººå·¥æ™ºèƒ½è‡ªäºŒåä¸–çºª50å¹´ä»£ä»¥æ¥çš„å‘å±•èµ·èµ·ä¼ä¼[36], è™½ç„¶åœ¨ç›¸å…³æ€æƒ³ã€æ¨¡å‹å’Œæ–¹æ³•ç­‰æ–¹é¢å–å¾—äº†è®¸å¤šé‡è¦è¿›å±•å’Œæˆæœ, ä½†æ˜¯ç”±äºå¸¸å¸¸å—é™äºæ•°æ®åŸºç¡€ä»¥åŠè®¡ç®—èƒ½åŠ›çš„ä¸è¶³, å…¶å­¦ä¹ ã€è¿›åŒ–ä»¥åŠæ¨ç†ç­‰æ–¹é¢çš„èƒ½åŠ›éš¾ä»¥å¾—åˆ°å‘æŒ¥, åº”ç”¨æ•ˆæœä¹Ÿå—åˆ°å½±å“.ç›´è‡³è¿›å…¥å¤§æ•°æ®æ—¶ä»£, äººå·¥æ™ºèƒ½çš„è®¸å¤šæˆæœå¾—åˆ°äº†å·¥ç¨‹åŒ–å’Œäº§å“åŒ–å®ç°, å¼€å§‹åœ¨æ·±åº¦å’Œå¹¿åº¦ä¸Šæ¸—é€åˆ°ç¤¾ä¼šç»æµæ´»åŠ¨ä¸­, å¹¶å¼•å‘äººä»¬å¯¹äºæœªæ¥äº§ä¸šå’Œäººç±»ç”Ÿå­˜çš„éæƒ³å’Œæ‹…å¿§.æœºå™¨äººå’Œæ™ºèƒ½äº§å“æ—©æœŸç”¨äºæ›¿ä»£äººç±»ç®€å•é‡å¤ä½“åŠ›æ€§å·¥ä½œ, ç°åœ¨åˆ™å¯ä»¥å¼€å§‹å°è¯•ç”¨äºæ›¿ä»£ä¸å°‘å¤æ‚å¹¶å…·æœ‰æ™ºåŠ›çš„å·¥ä½œ, è¯¸å¦‚å›´æ£‹[37]ã€ç¿»è¯‘[38]ã€ç»˜ç”»[39,40]ã€ä½œæ›²[40]ã€ä½œè¯—[41]ã€æ— äººé©¾é©¶[42]ã€äººè„¸è¯†åˆ«[42]ã€æ„å¿µæ§åˆ¶[43,44]ç­‰ç­‰.äººå·¥æ™ºèƒ½åœ¨ç®¡ç†é¢†åŸŸçš„åº”ç”¨ä¹Ÿåˆè§ç«¯å€ª, æ¯”å¦‚è´¢åŠ¡æœºå™¨äºº[45]ã€è‡ªåŠ¨é‡‘èäº¤æ˜“[42,45]ã€ç«äº‰æ™ºèƒ½[46]ã€å®¢æˆ·æœåŠ¡[45,47]ã€äººåŠ›èµ„æºç®¡ç†[48]ã€å¸‚åœºè¥é”€[42,45]ç­‰ç­‰.æ¯«æ— ç–‘é—®, äººå·¥æ™ºèƒ½å°†åœ¨æ–°å‹å•†åŠ¡ä¸­å‘æŒ¥ç€è¶Šæ¥è¶Šé‡è¦çš„è§’è‰².å¦ä¸€æ–¹é¢, ä¼´éšç€ä»å¼±äººå·¥æ™ºèƒ½åˆ°å¼ºäººå·¥æ™ºèƒ½ä¹ƒè‡³è¶…äººå·¥æ™ºèƒ½çš„è¿›é˜¶, äººä»¬å¯¹äºäººå·¥æ™ºèƒ½åº”ç”¨åœ¨éšç§å’Œä¼¦ç†æ–¹é¢çš„æ‹…å¿§ä¹Ÿåœ¨ä¸æ–­åŠ é‡[49].æ­¤å¤–, äººå·¥æ™ºèƒ½ç†è®ºå’ŒæŠ€æœ¯å‘å±•ä¹Ÿé¢ä¸´ä¼—å¤šæŒ‘æˆ˜ (å¦‚â€œé»‘ç›’å­â€ç‰¹ç‚¹ã€å­¦ä¹ æœºç†ã€è¯­ä¹‰ç†è§£ç­‰) , è¿™äº›å¯¹äºå¼ºè°ƒâ€œå…³è”+å› æœâ€çš„ç®¡ç†å†³ç­–é¢†åŸŸå°¤ä¸ºé‡è¦.</p>
<p>æœ€å, ç®¡ç†å­¦æ˜¯ä¸€é—¨èåˆäº†â€œç§‘å­¦â€ä¸â€œè‰ºæœ¯â€çš„å­¦ç§‘.åœ¨å¤§æ•°æ®èƒŒæ™¯ä¸‹, â€œç§‘å­¦â€å±‚é¢çš„å¯æµ‹æ€§ã€ç¨‹å¼åŒ–å’Œå¯é‡å¤æ€§ç­‰è¦ç´ æ­£åœ¨è¶Šæ¥è¶Šå¤šåœ°è¢«æ•°æ®å’Œç®—æ³•è¡¨è¾¾;è€Œâ€œè‰ºæœ¯â€å±‚é¢çš„æƒ…æ„Ÿã€å¿ƒç†ä»¥åŠè®¤çŸ¥ç­‰è¦ç´ ä¹Ÿå¼€å§‹è¢«ä¸æ–­â€œé‡åŒ–â€, åŒ…æ‹¬å€ŸåŠ©ä¸€äº›æ„ŸçŸ¥æŠ€æœ¯ (affective technologies) (å¦‚çœ¼åŠ¨ã€è„‘ç”µæŠ€æœ¯ç­‰) .æœªæ¥çš„ç®¡ç†å­¦åœ¨æ¢ç©¶ç»„ç»‡å†…å¤–â€œä»»åŠ¡â€ä¸â€œäººâ€æœ‰æœºç»“åˆçš„è¿‡ç¨‹ä¸­, æ•°æ®é©±åŠ¨ç‰¹å¾å°†æ„ˆåŠ å‡¸æ˜¾, ç›¸å…³èŒƒå¼è½¬å˜ä¹Ÿå°†è¿›ä¸€æ­¥æ·±åŒ–.</p>
<br>
<h2 id="å…¨æ™¯å¼pageæ¡†æ¶">å…¨æ™¯å¼PAGEæ¡†æ¶</h2>
<p>å…¨æ™¯å¼PAGEæ¡†æ¶æ˜¯èåˆå¤§æ•°æ®ç‰¹å¾å’Œé‡è¦ç ”ç©¶æ–¹å‘çš„è¦ç´ çŸ©é˜µ, æ—¨åœ¨åˆ»ç”»å¤§æ•°æ®é©±åŠ¨çš„â€œå…¨æ™¯å¼â€ç®¡ç†å†³ç­–æ¡†æ¶.å…¨æ™¯å¼PAGEæ¡†æ¶å…·æœ‰ä¸‰ä¸ªè¦ä»¶:å¤§æ•°æ®é—®é¢˜ç‰¹å¾ã€PAGEå†…æ ¸ã€é¢†åŸŸæƒ…å¢ƒ (å¦‚å›¾5æ‰€ç¤º) .å¤§æ•°æ®é—®é¢˜ç‰¹å¾æ¶µç›–ç²’åº¦ç¼©æ”¾ã€è·¨ç•Œå…³è”å’Œå…¨å±€è§†å›¾, å¹¶ä½œä¸ºç®¡ç†å†³ç­–èƒŒæ™¯ä¸‹çš„ç‰¹å¾è§†è§’æ˜ å°„åˆ°ç ”ç©¶å†…å®¹æ–¹å‘ä¸Š.PAGEå†…æ ¸æ˜¯æŒ‡å››ä¸ªç ”ç©¶æ–¹å‘, å³ç†è®ºèŒƒå¼ (paradigm) ã€åˆ†ææŠ€æœ¯ (analytics) ã€èµ„æºæ²»ç† (governance) ä»¥åŠä½¿èƒ½åˆ›æ–° (enabling) .é¢†åŸŸæƒ…å¢ƒæ˜¯æŒ‡é’ˆå¯¹å…·ä½“è¡Œä¸š/é¢†åŸŸ (å¦‚å•†åŠ¡ã€é‡‘èã€åŒ»ç–—å¥åº·å’Œå…¬å…±ç®¡ç†ç­‰) è¿›è¡Œé›†æˆå‡å.</p>

<figure >
    
        <img src="img/5.jpg" width="800" />
    
    
</figure>

<p>å›´ç»•PAGEå†…æ ¸, åœ¨å¤§æ•°æ®é—®é¢˜ç‰¹å¾æ˜ å°„ä¸‹å¯ä»¥å½¢æˆä¸€ä¸ª4Ã—3çš„è¦ç´ çŸ©é˜µ.åœ¨ç†è®ºèŒƒå¼ (P) ç ”ç©¶æ–¹å‘ä¸Š, é‡ç‚¹å…³æ³¨ç®¡ç†å†³ç­–èŒƒå¼è½¬å˜æœºç†ä¸ç†è®º.ä¼ ç»Ÿçš„ç®¡ç†å†³ç­–æ­£åœ¨ä»ä»¥ç®¡ç†æµç¨‹ä¸ºä¸»çš„çº¿æ€§èŒƒå¼é€æ¸å‘ä»¥æ•°æ®ä¸ºä¸­å¿ƒçš„æ–°å‹æ‰å¹³åŒ–äº’åŠ¨èŒƒå¼è½¬å˜, ç®¡ç†å†³ç­–ä¸­å„å‚ä¸æ–¹çš„è§’è‰²å’Œç›¸å…³ä¿¡æ¯æµå‘æ›´è¶‹äºå¤šå…ƒå’Œäº¤äº’.æ¦‚æ‹¬è¯´æ¥, æ–°å‹ç®¡ç†å†³ç­–èŒƒå¼å‘ˆç°å‡ºå¤§æ•°æ®é©±åŠ¨çš„å…¨æ™¯å¼ç‰¹ç‚¹.è¿›è€Œ, ç”±äºå…¨æ™¯å¼çš„å¤šç»´äº¤äº’åŠ¨æ€æ€§ä»¥åŠå…¨è¦ç´ å‚ä¸ç‰¹ç‚¹, åœ¨ç ”ç©¶ä¸Šéœ€è¦é‡‡ç”¨æ–°å‹çš„ç ”ç©¶èŒƒå¼ (å³å¤§æ•°æ®é©±åŠ¨èŒƒå¼) .å…·ä½“è¯´æ¥, åœ¨ç²’åº¦ç¼©æ”¾æ–¹é¢, éœ€è¦å†³ç­–è¦ç´ åœ¨å®è§‚å’Œå¾®è§‚å±‚é¢å¯æµ‹å¯è·;åœ¨è·¨ç•Œå…³è”æ–¹é¢, éœ€è¦å¼•å…¥å¤–éƒ¨è¦ç´ å¹¶å½¢æˆå†…å¤–è¦ç´ äº’åŠ¨;åœ¨å…¨å±€è§†å›¾æ–¹é¢, éœ€è¦å¤šç»´æ•´åˆå¹¶èƒ½å¤Ÿé’ˆå¯¹ä¸åŒå†³ç­–ç¯å¢ƒè¿›è¡Œæƒ…å¢ƒæ˜ ç°å’Œè¯„ä¼°.</p>
<p>åœ¨åˆ†ææŠ€æœ¯ (A) ç ”ç©¶æ–¹å‘ä¸Š, é‡ç‚¹å…³æ³¨ç®¡ç†å†³ç­–é—®é¢˜å¯¼å‘çš„å¤§æ•°æ®åˆ†ææ–¹æ³•å’Œæ”¯æ’‘æŠ€æœ¯.åœ¨ç²’åº¦ç¼©æ”¾æ–¹é¢, éœ€è¦æ•°æ®çš„æ„ŸçŸ¥ä¸é‡‡é›†, å¹¶èƒ½å¤Ÿåœ¨ä¸åŒç»´åº¦å’Œå±‚æ¬¡ä¸Šè¿›è¡Œåˆ†è§£ä¸èšåˆ;åœ¨è·¨ç•Œå…³è”æ–¹é¢, éœ€è¦æ•æ‰æ•°æ®å…³ç³»åŠå…¶åŠ¨æ€å˜åŒ–, å¹¶èƒ½å¤Ÿè¿›è¡Œé’ˆå¯¹å¤šæºå¼‚æ„çš„å†…å¤–æ•°æ®èåˆ;åœ¨å…¨å±€è§†å›¾æ–¹é¢, éœ€è¦ä½“ç³»æ„å»ºå’Œå¹³å°è®¡ç®—èƒ½åŠ›, å¹¶èƒ½å¤Ÿå½¢æˆå„ç±»ç”»åƒä»¥åŠå¼€å±•æ™ºèƒ½åº”ç”¨.</p>
<p>åœ¨èµ„æºæ²»ç† (G) ç ”ç©¶æ–¹å‘ä¸Š, é‡ç‚¹å…³æ³¨å¤§æ•°æ®èµ„æºæ²»ç†æœºåˆ¶è®¾è®¡ä¸ååŒç®¡ç†.åœ¨ç²’åº¦ç¼©æ”¾æ–¹é¢, éœ€è¦è¿›è¡Œèµ„æºè¦ç´ çš„æ•°æ®åŒ–, å¹¶æ˜ç¡®æ•°æ®æ ‡å‡†å’Œæƒå±;åœ¨è·¨ç•Œå…³è”æ–¹é¢, éœ€è¦åˆ»ç”»èµ„æºæµé€šçš„å¥‘çº¦å…³ç³», å¹¶å½¢æˆæœ‰æ•ˆåè°ƒå…±äº«æ¨¡å¼;åœ¨å…¨å±€è§†å›¾æ–¹é¢, éœ€è¦å»ºç«‹èµ„æºç®¡ç†æœºåˆ¶, å¹¶åˆ¶å®šç»„ç»‡çš„èµ„æºæˆ˜ç•¥.</p>
<p>åœ¨ä½¿èƒ½åˆ›æ–° (E) ç ”ç©¶æ–¹å‘ä¸Š, é‡ç‚¹å…³æ³¨å¤§æ•°æ®ä½¿èƒ½çš„ä»·å€¼åˆ›é€ ä¸æ¨¡å¼åˆ›æ–°.åœ¨ç²’åº¦ç¼©æ”¾æ–¹é¢, éœ€è¦æå‡ä¸šåŠ¡ä»·å€¼ç¯èŠ‚çš„åƒç´ , å¹¶æŠŠæ¡ä¸šåŠ¡çŠ¶æ€;åœ¨è·¨ç•Œå…³è”æ–¹é¢, éœ€è¦æ¢³ç†ä¸šåŠ¡é€»è¾‘å’Œè”ç³», å¹¶è¾¨è¯†å½±å“ä¸šåŠ¡çŠ¶æ€çš„å› æœå…³ç³»;åœ¨å…¨å±€è§†å›¾æ–¹é¢, éœ€è¦æå‡å¤§æ•°æ®ä½¿èƒ½åˆ›æ–°èƒ½åŠ›, å¹¶ä¿ƒè¿›ç»„ç»‡å‘å±•ä¸ä»·å€¼åˆ›é€ .</p>
<p>å›´ç»•é¢†åŸŸæƒ…å¢ƒ, å¯ä»¥å¯¹PAGEç›¸å…³ç ”ç©¶å’Œåº”ç”¨è¿›è¡Œå‡ç»ƒã€æ•´åˆå’Œå‡å.ä»¥NSFCå¤§æ•°æ®é‡å¤§ç ”ç©¶è®¡åˆ’é›†æˆå¹³å°æ„å»ºä¸ºä¾‹, ä¸€èˆ¬æ¥è®², é›†æˆå¹³å°ç”±ä¸‰ä¸ªéƒ¨ä»¶ç»„æˆ, åˆ†åˆ«æ˜¯å¹³å°ä½“ç³»ã€å†…ç½®éƒ¨ä»¶ã€æ•´åˆéƒ¨ä»¶.ä½œä¸ºç®€åŒ–ç¤ºä¾‹, å¯¹äºå•†åŠ¡é¢†åŸŸé›†æˆå¹³å°, å¹³å°ä½“ç³»ç”±ä¸€ä¸ªå•†åŠ¡ç®¡ç†å†³ç­–ç›¸å…³çš„æ•°æ®æ± , ä»¥åŠç›¸åº”çš„æ•°æ®ç®¡ç†å’Œåº”ç”¨ç®¡ç†å¹³å°ç³»ç»Ÿ (åŒ…æ‹¬æ¨¡å‹ã€æ–¹æ³•ã€å·¥å…·åº“) ç­‰ç»„æˆ;å†…ç½®éƒ¨ä»¶ç”±é’ˆå¯¹ç‰¹å®šè¡Œä¸š (å¦‚æ±½è½¦) å’Œç‰¹å®šé¢†åŸŸ (å¦‚è¥é”€) çš„ç ”ç©¶æˆæœåŠç¤ºèŒƒç³»ç»Ÿç»„æˆ;æ•´åˆéƒ¨ä»¶ç”±å•†åŠ¡é¢†åŸŸå†… (ä¸é™äºå†…ç½®éƒ¨ä»¶é¢†åŸŸ) å…¶å®ƒç›¸å…³é¡¹ç›®æˆæœåœ¨å¹³å°ä½“ç³»æ¡†æ¶ä¸‹ç»è¿‡æç‚¼å‡åæ±‡é›†è€Œæˆ.å¯¹äºé‡‘èé¢†åŸŸé›†æˆå¹³å°, å¹³å°ä½“ç³»ç”±ä¸€ä¸ªé‡‘èç›‘æµ‹é¢„è­¦æœåŠ¡å¹³å°, ä»¥åŠç›¸åº”çš„æ•°æ®ç®¡ç†å’Œåº”ç”¨ç®¡ç†å¹³å°ç³»ç»Ÿ (åŒ…æ‹¬æ¨¡å‹ã€æ–¹æ³•ã€å·¥å…·åº“) ç­‰ç»„æˆ;å†…ç½®éƒ¨ä»¶ç”±é’ˆå¯¹ç‰¹å®šè¡Œä¸š (å¦‚äº’è”ç½‘é‡‘è) å’Œç‰¹å®šé¢†åŸŸ (å¦‚å¾ä¿¡è¯„ä¼°ã€é£é™©é¢„è­¦ç­‰) çš„ç ”ç©¶æˆæœåŠç¤ºèŒƒç³»ç»Ÿç»„æˆ;æ•´åˆéƒ¨ä»¶ç”±é‡‘èé¢†åŸŸå†… (ä¸é™äºå†…ç½®éƒ¨ä»¶é¢†åŸŸ) å…¶å®ƒç›¸å…³é¡¹ç›®æˆæœåœ¨å¹³å°ä½“ç³»æ¡†æ¶ä¸‹ç»è¿‡æç‚¼å‡åæ±‡é›†è€Œæˆ.</p>
<br>
<h2 id="ç»“æŸè¯­">ç»“æŸè¯­</h2>
<p>é¢å‘ç®¡ç†å†³ç­–ç ”ç©¶å’Œåº”ç”¨çš„å¤§æ•°æ®é©±åŠ¨èŒƒå¼é€šè¿‡æŠ€æœ¯å¢å¼ºå¼•å…¥äº†æ–°è§†è§’, è¿›è€Œæ¨åŠ¨äº†æ–°å‹å˜é‡å…³ç³»ã€è¦ç´ æœºç†å’Œç†è®ºæ¨¡å‹æ„å»º, å¹¶æå‡äº†å¤§æ•°æ®ä½¿èƒ½åˆ›æ–°çš„ä»·å€¼åˆ›é€ .è¿™å¯¹äºåº”å¯¹æ–°å‹å•†åŠ¡å½¢æ€çš„è¿›ä¸€æ­¥æœºé‡å’ŒæŒ‘æˆ˜å…·æœ‰é‡è¦æ„ä¹‰.æ­¤å¤–, å…¨æ™¯å¼PAGEæ¡†æ¶åˆ»ç”»äº†åœ¨ç²’åº¦ç¼©æ”¾ã€è·¨ç•Œå…³è”å’Œå…¨å±€è§†å›¾ç‰¹å¾è§†è§’æ˜ å°„ä¸‹çš„ç†è®ºèŒƒå¼ã€åˆ†ææŠ€æœ¯ã€èµ„æºæ²»ç†ã€ä½¿èƒ½åˆ›æ–°ç­‰é‡è¦ç ”ç©¶æ–¹å‘.</p>
<p>é™„æ³¨:å›½å®¶è‡ªç„¶ç§‘å­¦åŸºé‡‘å§”å‘˜ä¼šâ€œå¤§æ•°æ®é©±åŠ¨çš„ç®¡ç†ä¸å†³ç­–ç ”ç©¶â€é‡å¤§ç ”ç©¶è®¡åˆ’æ˜¯ä¸€ä¸ªå…·æœ‰ç»Ÿä¸€ç›®æ ‡çš„é¡¹ç›®é›†ç¾¤, æ—¨åœ¨å……åˆ†å‘æŒ¥ç®¡ç†ã€ä¿¡æ¯ã€æ•°ç†ã€åŒ»å­¦ç­‰å¤šå­¦ç§‘äº¤å‰åˆä½œç ”ç©¶çš„ä¼˜åŠ¿, ä»¥å…¨æ™¯å¼PAGEæ¡†æ¶ä½œä¸ºæ€»ä½“æ€è·¯æ¡†æ¶, åšæŒâ€œæœ‰é™ç›®æ ‡ã€ç¨³å®šæ”¯æŒã€é›†æˆå‡åã€è·¨è¶Šå‘å±•â€çš„åŸåˆ™, å›´ç»•å­¦ç§‘é¢†åŸŸè¶‹åŠ¿ã€ç†è®ºåº”ç”¨ç‰¹ç‚¹, æ³¨é‡åŸºç¡€æ€§ã€å‰ç»æ€§å’Œäº¤å‰æ€§ç ”ç©¶åˆ›æ–°.è‡ª2015å¹´åº•è‡³2017å¹´åº•, æ­¤é‡å¤§ç ”ç©¶è®¡åˆ’éƒ¨ç½²äº†åŒ…æ‹¬åŸ¹è‚²é¡¹ç›®ã€é‡ç‚¹é¡¹ç›®å’Œé›†æˆé¡¹ç›®ç­‰ä¸€ç³»åˆ—é¡¹ç›®.å…¶åç»­çš„é¡¹ç›®éƒ¨ç½²å°†åœ¨å…¨æ™¯å¼PAGEæ¡†æ¶ä¸‹, è¿›ä¸€æ­¥çªå‡ºå‡ç»ƒã€æ•´åˆä¸å‡å, å¼ºè°ƒä¸æ€»ä½“æ€è·¯æ¡†æ¶å†…å®¹çš„å¥‘åˆæ€§å’Œè´¡çŒ®åº¦.</p>
<p>æœ¬æ–‡ç´ æéƒ¨åˆ†æ¥è‡ªå›½å®¶è‡ªç„¶ç§‘å­¦åŸºé‡‘å§”â€œå¤§æ•°æ®é©±åŠ¨çš„ç®¡ç†ä¸å†³ç­–ç ”ç©¶â€é‡å¤§ç ”ç©¶è®¡åˆ’ç›¸å…³çš„ç³»åˆ—ç ”è®¨.ç”±è¡·æ„Ÿè°¢ä¸åŒå­¦ç§‘é¢†åŸŸä¸“å®¶å­¦è€… (åŒ…æ‹¬NSFCå¤§æ•°æ®é‡å¤§ç ”ç©¶è®¡åˆ’æŒ‡å¯¼ä¸“å®¶ç»„ã€é¡¾é—®ä¸“å®¶ç»„ã€ç®¡ç†å·¥ä½œç»„ç­‰ä¸“å®¶å­¦è€…) çš„çœŸçŸ¥ç¼è§å’Œæ€æƒ³è´¡çŒ®!</p>
<br>
<p>äº†è§£è¯¾ç¨‹</p>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>DataSpellæ•°æ®æŒ–æ˜ç¼–è¾‘å™¨</title>
      <link>https://hidadeng.github.io/blog/data_spell/</link>
      <pubDate>Wed, 01 Dec 2021 20:40:10 +0600</pubDate>
      
      <guid>/blog/data_spell/</guid>
      <description>pythonæ•°æ®æŒ–æ˜ç”Ÿäº§åŠ›å·¥å…·</description>
      <content:encoded><![CDATA[<p>Dataspellâ€”â€”ä¸€ä¸ªä¸“ä¸ºæ•°æ®ç§‘å­¦å®¶åˆ¶ä½œçš„IDEã€‚ ä¸€æ–¹é¢ï¼Œæ‚¨æ‹¥æœ‰ Jupyter ä»¥å®ç°æœ€å¤§çš„äº¤äº’æ€§ï¼Œå¦ä¸€æ–¹é¢æ‹¥æœ‰ PyCharm ä½œä¸ºä¸“ä¸šç¯å¢ƒã€‚</p>
<br>
<h2 id="ä»€ä¹ˆæ˜¯dataspell">ä»€ä¹ˆæ˜¯DataSpellï¼Ÿ</h2>
<p>Dataspell æ˜¯ä¸“ä¸ºæ•°æ®ç§‘å­¦å®¶åˆ¶ä½œçš„ IDEï¼ˆé›†æˆå¼€å‘ç¯å¢ƒï¼‰ã€‚ å®ƒç”± Jetbrains ( IntelliJ Idea å’Œ PyCharm èƒŒåçš„ä¸€å®¶å…¬å¸)å¼€å‘ï¼Œæ”¯æŒæ‰€æœ‰ä¸»è¦æ“ä½œç³»ç»Ÿå¹³å°ï¼ŒåŒ…æ‹¬ ARM (M1) Macã€‚</p>
<p>DataSpelläº®ç‚¹ï¼š</p>
<ul>
<li>åŸç”Ÿnotebookä½“éªŒâ€”â€”å¦‚æœä½ ä½¿ç”¨è¿‡ Jupyter ä¼šæœ‰å®¾è‡³å¦‚å½’çš„æ„Ÿè§‰ã€‚</li>
<li>æ™ºèƒ½ä»£ç è¾…åŠ© - æœ‰ç‚¹åƒ Jupyter å’Œ PyCharm ç”Ÿäº†å­©å­ã€‚</li>
<li>Markdown å’Œ JavaScript â€” æ ¹æ®éœ€è¦è®¾ç½®notebookæ ·å¼å¹¶åµŒå…¥æ•°æ®å¯è§†åŒ–ã€‚</li>
<li>äº¤äº’å¼å¤–å£³ - REPL æ§åˆ¶å° + è¯­æ³•æ£€æŸ¥ã€‚</li>
<li>SQL æ•°æ®åº“æ”¯æŒ â€” è¿æ¥åˆ°æ•°æ®åº“ã€ç›´è§‚åœ°æ£€æŸ¥æ•°æ®ã€å¯¼å…¥/å¯¼å‡ºæ•°æ®ç­‰ã€‚</li>
</ul>
<p>æ‰“å¼€dataspellï¼Œå¾ˆåƒPyCharm</p>

<figure >
    
        <img src="img/dataspell%e7%95%8c%e9%9d%a2.png" width="800" />
    
    
</figure>

<br>
<h2 id="åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªnotebook">åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªnotebook</h2>
<p>è¯¥è¿‡ç¨‹å‡ ä¹ä¸ä»»ä½•å…¶ä»– Jetbrains äº§å“ç›¸åŒã€‚ ç‚¹å‡»æ ¹ç›®å½•ï¼Œè¿›å…¥æ–°å»ºâ€”â€”Jupyter Notebookï¼š</p>

<figure >
    
        <img src="img/dataspell%e7%95%8c%e9%9d%a22.png" width="800" />
    
    
</figure>

<p>æˆ‘å°†å…¶å‘½åä¸º first_notebook.ipynbã€‚</p>

<figure >
    
        <img src="img/first_notebook.png" width="800" />
    
    
</figure>

<p>æ ·å¼æ˜¯ä¸ªäººå–œå¥½çš„ä¸œè¥¿ï¼Œä½†ä½ ä¸èƒ½è¯´è®¾è®¡ä¸æ˜¯ä¸€æµçš„ã€‚</p>
<p>åœ¨åˆ›å»ºç¬”è®°æœ¬æ—¶ï¼Œæ‚¨å¯èƒ½å·²ç»çœ‹åˆ°åˆ›å»º R è„šæœ¬å’Œ Markdown æ–‡ä»¶çš„é€‰é¡¹ã€‚ ä¸€æ—¦ Python æ­£å¸¸è¿è¡Œï¼ŒDataspell å°†åŒæ—¶æ”¯æŒ R å’Œ Juliaï¼ˆæ¥æºï¼‰ã€‚</p>
<p>ç°åœ¨è®©æˆ‘ä»¬æ¢ç´¢åŸºæœ¬çš„ Python å’Œæ•°æ®ç§‘å­¦åº“æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ ä¸‹å›¾æ˜¾ç¤ºäº† Numpy æ•°ç»„å’Œ Pandas DataFrameï¼š</p>

<figure >
    
        <img src="img/numpypandas.png" width="800" />
    
    
</figure>

<p>æ­£å¦‚é¢„æœŸçš„é‚£æ ·ã€‚ æˆ‘å–œæ¬¢ Numpy æ•°ç»„æ‰“å°ä¸º Pandas ç³»åˆ—çš„æ–¹å¼ï¼Œä½†è¿™åªæ˜¯ä¸ªäººå–œå¥½ã€‚
Matplotlib å‘¢ï¼Ÿ è¿™æ˜¯ä¸€ä¸ªçœŸæ­£ç®€å•çš„æ•£ç‚¹å›¾ï¼š</p>

<figure >
    
        <img src="img/matplotlib.png" width="800" />
    
    
</figure>

<p>æˆ‘æ›´å–œæ¬¢å‡ºç‰ˆç‰©å¯è§†åŒ–çš„ç™½è‰²èƒŒæ™¯ï¼Œä½†åœ¨æ™šä¸Šå·¥ä½œæ—¶çœ¼ç›æ— æ³•é•¿æ—¶é—´å·¥ä½œï¼Œå¤œæ™šæˆ‘å–œæ¬¢é»‘è‰²èƒŒæ™¯ã€‚ å¹²å¾—å¥½ï¼ŒDataspellã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ¢ç´¢æ¯ä¸ª IDE å¿…é¡»å…·å¤‡çš„åŠŸèƒ½â€”â€”æ™ºèƒ½ç¼–ç è¾…åŠ©ã€‚</p>
<br>
<h2 id="æ™ºèƒ½ç¼–ç è¾…åŠ©">æ™ºèƒ½ç¼–ç è¾…åŠ©</h2>
<p>æˆ‘ä¸å–œæ¬¢ JupyterLab çš„æ˜¯ç¼ºä¹ç¼–ç å¸®åŠ©ã€‚ ç¡®å®æœ‰æ’ä»¶ï¼Œä½†å®ƒä»¬çš„å¸®åŠ©è¿œä¸åŠä¸“ä¸šçš„ IDEã€‚ æˆ‘ä¸å–œæ¬¢ IDE çš„æ˜¯ç¼ºä¹äº¤äº’æ€§ã€‚ å¸Œæœ› Dataspell å°†æ˜¯ä¸¤å…¨å…¶ç¾çš„ã€‚</p>
<p>è®©æˆ‘ä»¬å°è¯•å¯¼å…¥ Numpyï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆï¼š</p>

<figure >
    
        <img src="img/assitence.png" width="800" />
    
    
</figure>

<p>æ”¯æŒè‡ªåŠ¨ä»£ç æç¤ºâ€”â€”å®ƒå®Œç¾æ— ç¼ºï¼› ä¹Ÿæ”¯æŒä»£ç æœªæ­£ç¡®ç¼–å†™æ—¶çš„è­¦å‘Š/é”™è¯¯ï¼Œä¾‹å¦‚å‡½æ•°add_integers åº”è¯¥è¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œä½†å®ƒæ•…æ„è¿”å›ä¸€ä¸ªæµ®ç‚¹æ•°ï¼š</p>

<figure >
    
        <img src="img/add_integers.png" width="800" />
    
    
</figure>

<br>
<h2 id="æ”¯æŒmarkdown">æ”¯æŒmarkdown</h2>
<p>é¦–å…ˆï¼Œå°†é¼ æ ‡æ‚¬åœåœ¨å•å…ƒæ ¼ä¸Šæ–¹å¹¶å•å‡»æ·»åŠ  Markdown å•å…ƒæ ¼ï¼š</p>

<figure >
    
        <img src="img/markdown.png" width="800" />
    
    
</figure>

<p>å¦ä¸€ç§æ–¹æ³•æ˜¯å•å‡»ä»£ç ä¸‹æ‹‰åˆ—è¡¨å¹¶å°†å•å…ƒæ ¼ç±»å‹åˆ‡æ¢ä¸º Markdownã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€äº› Markdown ä»£ç ä¾›æ‚¨å°è¯•ï¼š</p>

<figure >
    
        <img src="img/markdown2.png" width="800" />
    
    
</figure>

<p>è¿™æ˜¯è¿è¡Œå•å…ƒæ ¼æ—¶çš„æ ·å­ï¼š</p>

<figure >
    
        <img src="img/markdown3.png" width="800" />
    
    
</figure>

<br>
<h2 id="æ”¯æŒæ•°æ®åº“">æ”¯æŒæ•°æ®åº“</h2>
<p>ä½œä¸ºæ•°æ®ç§‘å­¦å®¶ï¼Œæ‚¨å‡ ä¹æ¯å¤©éƒ½å¿…é¡»å»ºç«‹å’Œç®¡ç†æ•°æ®åº“è¿æ¥ã€‚ å½“ SQL å†™æˆå­—ç¬¦ä¸²æ—¶ï¼Œè°ƒè¯•å¾ˆé•¿çš„ SQL è¡Œå¹¶ä¸å®¹æ˜“ã€‚ Dataspell æœ‰ä¸€ä¸ªè§£å†³æ–¹æ¡ˆã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨ sqlite3 åŒ…å»ºç«‹è¿æ¥ã€åˆ›å»ºæ•°æ®åº“å’Œè¡¨çš„æ–¹æ³•ï¼š</p>

<figure >
    
        <img src="img/database.png" width="800" />
    
    
</figure>

<p>æ‚¨ç°åœ¨å¯ä»¥åƒå¾€å¸¸ä¸€æ ·æ’å…¥æ•°æ®ï¼š</p>

<figure >
    
        <img src="img/database2.png" width="800" />
    
    
</figure>

<p>Dataspell çš„ç‰¹åˆ«ä¹‹å¤„åœ¨äºæ— éœ€ç¦»å¼€ IDE æˆ–ç¼–å†™ä¸å¿…è¦çš„æŸ¥è¯¢å³å¯æµè§ˆæ•°æ®åº“çš„é€‰é¡¹ã€‚ åªéœ€åŒå‡»æ•°æ®åº“ï¼Œå°±ä¼šæ‰“å¼€ä¸€ä¸ªæ–°çš„ä¾§çª—å£ã€‚ä»é‚£é‡Œï¼Œæ‚¨å¯ä»¥è½»æ¾å•å‡»ä»»ä½•æ„Ÿå…´è¶£çš„è¡¨æ ¼ï¼Œåœ¨å•ç‹¬çš„é€‰é¡¹å¡ä¸­æµè§ˆå®ƒï¼š</p>

<figure >
    
        <img src="img/database3.png" width="800" />
    
    
</figure>

<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>pyjanitoræ•°æ®åˆ†ææ¸…æ´åŒ…</title>
      <link>https://hidadeng.github.io/blog/pyjanitor_tutorial/</link>
      <pubDate>Thu, 25 Nov 2021 23:10:10 +0600</pubDate>
      
      <guid>/blog/pyjanitor_tutorial/</guid>
      <description>æ¸…æ´—æ•°æ®ï¼Œä¹Ÿç®€æ´ä»£ç </description>
      <content:encoded><![CDATA[<ul>
<li>
<p><a href="https://pyjanitor-devs.github.io/pyjanitor/">official docs</a></p>
</li>
<li>
<p><a href="https://github.com/pyjanitor-devs/pyjanitor">github</a></p>
</li>
</ul>
<br>
<p>pyjanitoræ˜¯å‚ç…§Rè¯­è¨€janitoråŒ…è¯­æ³•ï¼Œä¸ºPythoné‡èº«å®šåˆ¶çš„æ•°æ®æ¸…æ´—åŒ…,å³å¯æ¸…æ´—æ•°æ®ï¼Œåˆå¯è®©ä»£ç ç®€æ´å¹²å‡€ã€‚</p>
<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="pyjanitor_tutorial.ipynb">click to download the code</a></p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">pyjanitor</span>
</code></pre></div><br>
<h2 id="ä¸ºä»€ä¹ˆç”¨janitor">ä¸ºä»€ä¹ˆç”¨janitorï¼Ÿ</h2>
<p>æ•°æ®é¢„å¤„ç†é€šå¸¸ç”±ä¸€ç³»åˆ—æ­¥éª¤ç»„æˆï¼Œè¿™äº›æ­¥éª¤æ¶‰åŠå°†åŸå§‹æ•°æ®è½¬æ¢ä¸ºå¯ç†è§£/å¯ç”¨çš„æ ¼å¼ã€‚è¿™ä¸€ç³»åˆ—çš„æ­¥éª¤éœ€è¦æŒ‰ç…§ä¸€å®šçš„é¡ºåºè¿è¡Œæ‰èƒ½æˆåŠŸã€‚æˆ‘ä»¬ä»¥åŸºç¡€æ•°æ®æ–‡ä»¶ä¸ºèµ·ç‚¹ï¼Œå¯¹å…¶æ‰§è¡Œæ“ä½œï¼Œä¾‹å¦‚åˆ é™¤ç©ºè¡Œ/ç©ºè¡Œã€ç”¨å…¶ä»–å€¼æ›¿æ¢å®ƒä»¬ã€æ·»åŠ /é‡å‘½å/åˆ é™¤æ•°æ®åˆ—ã€è¿‡æ»¤è¡Œç­‰ã€‚æ›´æ­£å¼åœ°è¯´ï¼Œè¿™äº›æ­¥éª¤ä»¥åŠå®ƒä»¬çš„å…³ç³»å’Œä¾èµ–å…³ç³»é€šå¸¸è¢«ç§°ä¸ºæœ‰å‘æ— ç¯å›¾ (DAG)ã€‚</p>
<p>pandas API å¯¹ Python æ•°æ®ç§‘å­¦ç”Ÿæ€ç³»ç»Ÿéå¸¸å®è´µï¼Œå®ƒå®ç°äº†æ–¹æ³•å­é›†çš„æ–¹æ³•é“¾ä½œä¸º API çš„ä¸€éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œé‡ç½®ç´¢å¼• (.reset_index())ã€åˆ é™¤ç©ºå€¼ (.dropna()) ç­‰éƒ½æ˜¯é€šè¿‡é€‚å½“çš„ pd.DataFrame æ–¹æ³•è°ƒç”¨æ¥å®Œæˆçš„ã€‚</p>
<p>å— R ç»Ÿè®¡è¯­è¨€ç”Ÿæ€ç³»ç»Ÿ dplyr åŒ…çš„æ˜“ç”¨æ€§å’Œè¡¨è¾¾èƒ½åŠ›çš„å¯å‘ï¼Œæˆ‘ä»¬å°† pyjanitor å¼€å‘ä¸ºè¯­æ³•åŒ…ï¼Œç”¨äºä¸º Pandas ç”¨æˆ·è¡¨è¾¾æ•°æ®å¤„ç† DAGã€‚</p>
<p>ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨å£°æ˜å¼çš„æ“ä½œ æ›¿æ¢ä¸ºå…è®¸ é€»è¾‘é¡ºåºçš„æ–¹æ³•é“¾ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ä¸‹é¢å¸¦æ³¨é‡Šçš„ç¤ºä¾‹ã€‚é¦–å…ˆï¼Œè¿™é‡Œæ˜¯æ•°æ®æ¸…ç†è·¯å¾„çš„æ–‡å­—æè¿°ï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªdataframeã€‚</li>
<li>åˆ é™¤ä¸€åˆ—ã€‚</li>
<li>åˆ é™¤ä¸¤ä¸ªç‰¹å®šåˆ—ä¸­å…·æœ‰ç©ºå€¼çš„è¡Œã€‚</li>
<li>é‡å‘½åå¦å¤–ä¸¤åˆ—ã€‚</li>
<li>æ·»åŠ ä¸€ä¸ªæ–°åˆ—ã€‚</li>
</ol>
<p>è®©æˆ‘ä»¬å¯¼å…¥ä¸€äº›åº“å¹¶ä»æœ¬ç¤ºä¾‹çš„ä¸€äº›ç¤ºä¾‹æ•°æ®å¼€å§‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Libraries</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">janitor</span>

<span class="c1"># Sample Data curated for this example</span>
<span class="n">company_sales</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;SalesMonth&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Jan&#39;</span><span class="p">,</span> <span class="s1">&#39;Feb&#39;</span><span class="p">,</span> <span class="s1">&#39;Mar&#39;</span><span class="p">,</span> <span class="s1">&#39;April&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Company1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">150.0</span><span class="p">,</span> <span class="mf">200.0</span><span class="p">,</span> <span class="mf">300.0</span><span class="p">,</span> <span class="mf">400.0</span><span class="p">],</span>
    <span class="s1">&#39;Company2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">180.0</span><span class="p">,</span> <span class="mf">250.0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">500.0</span><span class="p">],</span>
    <span class="s1">&#39;Company3&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">400.0</span><span class="p">,</span> <span class="mf">500.0</span><span class="p">,</span> <span class="mf">600.0</span><span class="p">,</span> <span class="mf">675.0</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div><br>
<h2 id="å¸¸è§çš„pandaså®ç°æ–¹å¼">å¸¸è§çš„Pandaså®ç°æ–¹å¼</h2>
<p>ä¸‹é¢æ˜¯ä¼ ç»Ÿçš„Pandasæ–¹å¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># The Pandas Way</span>

<span class="c1"># 1. åˆ›å»ºä¸€ä¸ªdataframe</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">company_sales</span><span class="p">)</span>

<span class="c1"># 2.åˆ é™¤ä¸€åˆ—ã€‚ Say &#39;Company1&#39;</span>
<span class="k">del</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Company1&#39;</span><span class="p">]</span>

<span class="c1"># 3. åˆ é™¤ä¸¤ä¸ªç‰¹å®šåˆ—ä¸­å…·æœ‰ç©ºå€¼çš„è¡Œã€‚ &#39;Company2&#39; and &#39;Company3&#39;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Company2&#39;</span><span class="p">,</span> <span class="s1">&#39;Company3&#39;</span><span class="p">])</span>

<span class="c1"># 4. é‡å‘½åå¦å¤–ä¸¤åˆ—ã€‚ å°†&#39;Company2&#39; æ”¹ä¸º &#39;Amazon&#39;ï¼› å°† &#39;Company3&#39; æ”¹ä¸º &#39;Facebook&#39;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s1">&#39;Company2&#39;</span><span class="p">:</span> <span class="s1">&#39;Amazon&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Company3&#39;</span><span class="p">:</span> <span class="s1">&#39;Facebook&#39;</span><span class="p">},</span>
               <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># 5. æ·»åŠ ä¸€ä¸ªæ–°åˆ— &#39;Google&#39;</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;Google&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">450.0</span><span class="p">,</span> <span class="mf">550.0</span><span class="p">,</span> <span class="mf">800.0</span><span class="p">]</span>

<span class="n">df</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown">|      | SalesMonth | Amazon | Facebook | Google |
| ---: | :--------- | -----: | -------: | -----: |
|    0 | Jan        |    180 |      400 |    450 |
|    1 | Feb        |    250 |      500 |    550 |
|    3 | April      |    500 |      675 |    800 |
</code></pre></div><br>
<h2 id="ç¨å¾®é«˜çº§ä¸€ç‚¹pandaså®ç°æ–¹å¼">ç¨å¾®é«˜çº§ä¸€ç‚¹Pandaså®ç°æ–¹å¼</h2>
<p>ç¨å¾®é«˜çº§ä¸€ç‚¹çš„ç”¨æˆ·å¯èƒ½ä¼šåˆ©ç”¨å‡½æ•°å¼ APIï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">company_sales</span><span class="p">)</span>
    <span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">&#34;Company1&#34;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s2">&#34;Company2&#34;</span><span class="p">,</span> <span class="s2">&#34;Company3&#34;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&#34;Company2&#34;</span><span class="p">:</span> <span class="s2">&#34;Amazon&#34;</span><span class="p">,</span> <span class="s2">&#34;Company3&#34;</span><span class="p">:</span><span class="s2">&#34;Facebook&#34;</span><span class="p">})</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">Google</span><span class="o">=</span><span class="p">[</span><span class="mf">450.0</span><span class="p">,</span> <span class="mf">550.0</span><span class="p">,</span> <span class="mf">800.0</span><span class="p">])</span>
<span class="p">)</span>

<span class="n">df</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown">|      | SalesMonth | Amazon | Facebook | Google |
| ---: | :--------- | -----: | -------: | -----: |
|    0 | Jan        |    180 |      400 |    450 |
|    1 | Feb        |    250 |      500 |    550 |
|    3 | April      |    500 |      675 |    800 |
</code></pre></div><br>
<h2 id="pyjanitorå®ç°æ–¹å¼">PyJanitorå®ç°æ–¹å¼</h2>
<p>å€ŸåŠ©pyjanitoråº“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ–¹æ³•åé“¾å¼ä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">company_sales</span><span class="p">)</span>
    <span class="o">.</span><span class="n">remove_columns</span><span class="p">([</span><span class="s1">&#39;Company1&#39;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s2">&#34;Company2&#34;</span><span class="p">,</span> <span class="s2">&#34;Company3&#34;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">rename_column</span><span class="p">(</span><span class="s2">&#34;Company2&#34;</span><span class="p">,</span> <span class="s2">&#34;Amazon&#34;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">rename_column</span><span class="p">(</span><span class="s2">&#34;Company3&#34;</span><span class="p">,</span> <span class="s2">&#34;Facebook&#34;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&#34;Google&#34;</span><span class="p">,</span> <span class="p">[</span><span class="mf">450.0</span><span class="p">,</span> <span class="mf">550.0</span><span class="p">,</span> <span class="mf">800.0</span><span class="p">])</span>

<span class="p">)</span>

<span class="n">df</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown">|      | SalesMonth | Amazon | Facebook | Google |
| ---: | :--------- | -----: | -------: | -----: |
|    0 | Jan        |    180 |      400 |    450 |
|    1 | Feb        |    250 |      500 |    550 |
|    3 | April      |    500 |      675 |    800 |
</code></pre></div><p>å› æ­¤ï¼Œpyjanitor çš„è¯æºä¸â€œæ¸…æ´åº¦â€æœ‰åŒé‡å…³ç³»ã€‚ é¦–å…ˆï¼Œå®ƒæ˜¯å…³äºä½¿ç”¨æ–¹ä¾¿çš„æ•°æ®æ¸…ç†ä¾‹ç¨‹æ‰©å±• Pandasã€‚ å…¶æ¬¡ï¼Œå®ƒæ˜¯å…³äºä¸ºå¸¸è§çš„ Pandas ä¾‹ç¨‹æä¾›æ›´æ¸…æ™°ã€æ–¹æ³•é“¾æ¥ã€åŸºäºåŠ¨è¯çš„ APIã€‚</p>
<br>
<h2 id="pyjanitoræ›´å¤šåŠŸèƒ½">pyjanitoræ›´å¤šåŠŸèƒ½</h2>
<ul>
<li>æ¸…ç†åˆ—åï¼ˆå¤šç´¢å¼•æ˜¯å¯èƒ½çš„ï¼ï¼‰</li>
<li>åˆ é™¤ç©ºè¡Œå’Œåˆ—</li>
<li>è¯†åˆ«é‡å¤æ¡ç›®</li>
<li>å°†åˆ—ç¼–ç ä¸ºåˆ†ç±»</li>
<li>å°†æ•°æ®æ‹†åˆ†ä¸ºç‰¹å¾å’Œç›®æ ‡ï¼ˆç”¨äºæœºå™¨å­¦ä¹ ï¼‰</li>
<li>æ·»åŠ ã€åˆ é™¤å’Œé‡å‘½ååˆ—</li>
<li>å°†å¤šåˆ—åˆå¹¶ä¸ºä¸€åˆ—</li>
<li>æ—¥æœŸè½¬æ¢ï¼ˆä» matlabã€excelã€unixï¼‰åˆ° Python æ—¥æœŸæ—¶é—´æ ¼å¼</li>
<li>å°†å…·æœ‰åˆ†éš”çš„åˆ†ç±»å€¼çš„å•ä¸ªåˆ—æ‰©å±•ä¸ºè™šæ‹Ÿç¼–ç å˜é‡</li>
<li>åŸºäºåˆ†éš”ç¬¦è¿æ¥å’Œåˆ†ç¦»åˆ—</li>
<li>ç”¨äºæ ¹æ®åˆ—ä¸Šçš„æŸ¥è¯¢è¿‡æ»¤æ•°æ®æ¡†çš„è¯­æ³•ç³–</li>
<li>é‡‘èã€ç”Ÿç‰©ã€åŒ–å­¦ã€å·¥ç¨‹å’Œ pyspark çš„å®éªŒå­æ¨¡å—</li>
</ul>
<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>æ–‡æœ¬å¯è¯»æ€§ç ”ç©¶åŠåº”ç”¨æ¸…å•</title>
      <link>https://hidadeng.github.io/blog/text_readability/</link>
      <pubDate>Wed, 24 Nov 2021 23:40:10 +0600</pubDate>
      
      <guid>/blog/text_readability/</guid>
      <description>äº¬è¯­è¨€å¤§å­¦æ™ºèƒ½è®¡ç®—æœºè¾…åŠ©è¯­è¨€å­¦ä¹ ï¼ˆICALLï¼‰ç ”ç©¶ç»„ç»´æŠ¤çš„æ–‡æœ¬å¯è¯»æ€§é˜…è¯»æ¸…å•ã€‚å«ç»¼è¿°ã€é¡¹ç›®ã€ä»£ç ç­‰</description>
      <content:encoded><![CDATA[<p>è¿™æ˜¯åŒ—äº¬è¯­è¨€å¤§å­¦æ™ºèƒ½è®¡ç®—æœºè¾…åŠ©è¯­è¨€å­¦ä¹ ï¼ˆICALLï¼‰ç ”ç©¶ç»„ç»´æŠ¤çš„æ–‡æœ¬å¯è¯»æ€§é˜…è¯»æ¸…å•ã€‚</p>
<table>
<thead>
<tr>
<th>ç›®å½•</th>
</tr>
</thead>
<tbody>
<tr>
<td>1. <a href="#1">ç»¼è¿°</a></td>
</tr>
<tr>
<td>2. <a href="#2">ç›¸å…³ç ”ç©¶</a></td>
</tr>
<tr>
<td>2.1 <a href="#2.2">ä¸­æ–‡å¯è¯»æ€§</a></td>
</tr>
<tr>
<td>2.2 <a href="#2.3">å…¶ä»–è¯­è¨€å¯è¯»æ€§</a></td>
</tr>
<tr>
<td>3. <a href="#3">å¯è¯»æ€§åˆ†æå·¥å…·</a></td>
</tr>
<tr>
<td>4 <a href="#4">ä¸­æ–‡æ•°æ®</a></td>
</tr>
</tbody>
</table>
<br>
<h2 id="1">1. ç»¼è¿°</h2>
<ul>
<li>
<p>Klare, G. R. (1974â€“1975). <a href="https://scholar.google.com/scholar_url?url=https://www.jstor.org/stable/747086&amp;hl=zh-TW&amp;sa=T&amp;oi=gsb&amp;ct=res&amp;cd=0&amp;d=6838320539766870596&amp;ei=-1t9Xoq9M8SBywSKyJqgDg&amp;scisig=AAGBfm1iWtmdPfAMXqFhp5eCXdApCr8JfQ">Assessing readability</a>. <em>Reading Research Quarterly</em>.</p>
</li>
<li>
<p>å´æ€è¿œ, è”¡å»ºæ°¸, äºä¸œ, æ±Ÿæ–°. 2018. <a href="https://www.researchgate.net/profile/Xin_Jiang26/publication/332834238_A_Survey_on_the_Automatic_Text_Readability_Measureswenbenkeduxingdezidongfenxiyanjiuzongshu/links/5ccc04ca299bf11c2a3d46f3/A-Survey-on-the-Automatic-Text-Readability-Measureswenbenkeduxingdezidongfenxiyanjiuzongshu.pdf">æ–‡æœ¬å¯è¯»æ€§çš„è‡ªåŠ¨åˆ†æç ”ç©¶ç»¼è¿°</a>. <em>ä¸­æ–‡ä¿¡æ¯å­¦æŠ¥</em>.</p>
</li>
<li>
<p>éƒ­å‡¯ã€é‡‘æª€ã€é™†å°é£. 2018. <a href="http://www.cnki.com.cn/Article/CJFDTotal-WYCJ201803005.htm">æ–‡æœ¬éš¾åº¦è°ƒæ§çš„ç ”ç©¶ä¸å®è·µâ€”â€”ä»å¯è¯»å…¬å¼ã€å¤šç»´ç‰¹å¾åˆ°æ™ºèƒ½æ”¹ç¼–</a>. <em>å¤–è¯­æµ‹è¯•ä¸æ•™å­¦</em>.</p>
</li>
</ul>
<br>
<h2 id="2">2. Related Task</h2>
<h3 id="2.1">2.1 Research on Chinese Readability</h3>
<ul>
<li>
<p>Yao-Ting Sung, Tao Hsing Chang. 2016. <a href="https://link.springer.com/content/pdf/10.3758%2Fs13428-015-0649-1.pdf">CRIE: An automated analyzer for Chinese texts</a>. <em>Behavior Research Methods</em>.</p>
</li>
<li>
<p>Yao-Ting Sung, Weic Lin, SB Dyson, Kuoen Chang. 2015. <a href="https://onlinelibrary.wiley.com/doi/epdf/10.1111/modl.12213">Leveling L2 Texts Through Readability: Combining Multilevel Linguistic Features with the CEFR</a>. *<em>The Modern Language Journal</em>.</p>
</li>
<li>
<p>LAU Tak Pang. 2006. <a href="https://core.ac.uk/download/pdf/48538871.pdf">Chinese Readability Analysis and its Applications on the Internet</a>. <em>Master&rsquo;s thesis, The Chinese University of Hong Kong</em>.</p>
</li>
<li>
<p>Yu Qiaona. 2016.<a href="https://scholarspace.manoa.hawaii.edu/bitstream/10125/51627/1/2016-12-phd-yu.pdf">Defining and Assessing Chinese Syntactic Complexity via TC-Units</a>. <em>Doctor&rsquo;s thesis, University of Hawaii at Manoa</em>.</p>
</li>
</ul>
<br>
<h3 id="2.2">2.2 Research on Readability in Other Languages</h3>
<ul>
<li>
<p>Arthur C. Graesser, Danielle S. McNamara. 2004. <a href="https://link.springer.com/content/pdf/10.3758%2FBF03195564.pdf">Coh-Metrix: Analysis of text on cohesion and language</a>. <em>Behavior Research Methods, Instruments, &amp; Computers</em>.</p>
</li>
<li>
<p>Arthur C. Graesser, Danielle S. McNamara. 2011. <a href="http://sage.cnpereading.com/paragraph/download/10.3102/0013189X11413260">Coh-Metrix: Providing multilevel analysis of text characteristic</a>. <em>Educational Researcher</em>.</p>
</li>
<li>
<p>Xiaofei Lu. 2010. <a href="https://www.jbe-platform.com/docserver/fulltext/ijcl.15.4.02lu.pdf?expires=1561207415&amp;id=id&amp;accname=jbid110151&amp;checksum=0E423CA22C4B7AAB06AEC4C0359EBEF9">Automatic analysis of syntactic complexity in second language writing</a>. <em>International Journal of Corpus Linguistics</em>.</p>
</li>
<li>
<p>Xiaofei Lu. 2013. <a href="https://s3.amazonaws.com/academia.edu.documents/32693735/Ai_Lu_2013_syntactic_complexity.pdf?response-content-disposition=inline%3B%20filename%3DA_corpus-based_comparison_of_syntactic_c.pdf&amp;X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAIWOWYYGZ2Y53UL3A%2F20190623%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20190623T072057Z&amp;X-Amz-Expires=3600&amp;X-Amz-SignedHeaders=host&amp;X-Amz-Signature=ec1c034b7a2f9191914b65ec60cc3d41a8ca932fcf137c45d23a87194977b080">A corpus-based comparison of syntactic complexity in NNS and NS university studentsâ€™ writing</a>. <em>Automatic Treatment and Analysis of Learner Corpus Data</em></p>
</li>
<li>
<p>é™†å°é£, è®¸çª. 2016. <a href="http://www.cnki.com.cn/Article/CJFDTotal-WJYY201603008.htm">äºŒè¯­å¥æ³•å¤æ‚åº¦åˆ†æå™¨åŠå…¶åœ¨äºŒè¯­å†™ä½œç ”ç©¶ä¸­çš„åº”ç”¨</a>. <em>å¤–è¯­æ•™å­¦ä¸ç ”ç©¶</em></p>
</li>
<li>
<p>Xiaofei Lu. 2017. <a href="http://sage.cnpereading.com/paragraph/download/10.1177/0265532217710675">Automated measurement of syntactic complexity in corpus-based L2 writing research and implications for writing assessment. Language Testing</a>. <em>Language Testing</em></p>
</li>
<li>
<p>Jin, T., Lu, X., &amp; Ni, J. (2020). <a href="https://onlinelibrary.wiley.com/doi/full/10.1111/modl.12622">Syntactic complexity in adapted teaching materials: Differences among grade levels and implications for benchmarking</a>. <em>The Modern Language Journal</em></p>
</li>
<li>
<p>Menglin Xia ,Ekaterina Kochmar ,Ted Briscoe. 2016. <a href="https://www.aclweb.org/anthology/W16-0502.pdf">Text Readability Assessment for Second Language Learners</a>. <em>Proceedings of the 11th Workshop on Innovative Use of NLP for Building Educational Applications</em></p>
</li>
<li>
<p>Xiaobin Chen, Detmar Meurers. 2016. <a href="https://www.aclweb.org/anthology/W16-4113.pdf">CTAP: A Web-Based Tool Supporting Automatic Complexity Analysis</a>. <em>Proceedings of the Workshop on Computational Linguistics for Linguistic Complexity</em>.</p>
</li>
<li>
<p>Chen, X. 2018. <a href="https://publikationen.uni-tuebingen.de/xmlui/bitstream/handle/10900/85888/main.pdf?sequence=1">Automatic Analysis of Linguistic Complexity and Its Application in Language Learning Research</a>, <em>PhD thesis in computational linguistics,  Eberhard Karls UniversitÃ¤t TÃ¼bingen</em>.</p>
</li>
<li>
<p>Nadezda Okinina, Jennifer-Carmen Frey. CTAP for Italian: Integrating Components for the Analysis of Italian into a Multilingual Linguistic Complexity Analysis Tool.</p>
</li>
<li>
<p>Zarah Weiss, Z. 2017. <a href="https://www.researchgate.net/profile/Zarah_Weiss/publication/334318057_Using_Measures_of_Linguistic_Complexity_to_Assess_German_L2_Proficiency_in_Learner_Corpora_under_Consideration_of_Task-Effects/links/5d24456c299bf1547ca4fe92/Using-Measures-of-Linguistic-Complexity-to-Assess-German-L2-Proficiency-in-Learner-Corpora-under-Consideration-of-Task-Effects.pdf">Using Measures of Linguistic Complexity to Assess German L2 Proficiency in Learner Corpora under Consideration of Task-Effects</a>. <em>M.A. Thesis in Computational Linguistics</em>.</p>
</li>
<li>
<p>Weiss Z, Meurers D. 2019. <a href="http://www.sfs.uni-tuebingen.de/~zweiss/rsrc/Weiss.Meurers-17-LCR-Presentation.pdf">Broad Linguistic Modeling is Beneficial for German L2 Proficiency Assessment</a>. <em>Widening the Scope of Learner Corpus Research, Selected Papers from the Fourth Learner Corpus Research Conference</em>.</p>
</li>
<li>
<p>S Tonelli, KT Manh, E Pianta. 2012. <a href="https://dl.acm.org/doi/pdf/10.5555/2390916.2390924?download=true">Making readability indices readable</a>. <em>Proceedings of the First Workshop on Predicting and Improving Text Readability for target reader populations</em>.</p>
</li>
<li>
<p>Lijun Feng. 2010. <a href="https://academicworks.cuny.edu/cgi/viewcontent.cgi?article=2964&amp;context=gc_etds">Automatic Readability Assessment</a>. *<em>Doctor&rsquo;s thesis, City University of New York</em>.</p>
</li>
</ul>
<br>
<h2 id="3">3. Readability Analysis Tools</h2>
<ul>
<li>
<p>Lu Xiaofei (2010). <a href="https://www.jbe-platform.com/docserver/fulltext/ijcl.15.4.02lu.pdf?">Automatic analysis of syntactic complexity in second language writing</a>. <em>International Journal of Corpus Linguistics</em>.
(<a href="https://aihaiyang.com/software/l2sca/">Web-based L2 Syntactical Complexity Analyzer (L2SCA)</a>)</p>
</li>
<li>
<p>Yao-Ting Sung, Tao Hsing Chang. 2016. <a href="https://link.springer.com/content/pdf/10.3758%2Fs13428-015-0649-1.pdf">CRIE: An automated analyzer for Chinese texts</a>. <em>Behavior Research Methods</em>.
(<a href="http://www.chinesereadability.net/CRIE/index.aspx?LANG=CHT">æ–‡æœ¬å¯è¯»æ€§æŒ‡æ ‡è‡ªåŠ¨åŒ–åˆ†æç³»ç»Ÿ(Chinese Readability Index Explorer, CRIE)</a>)</p>
</li>
<li>
<p>Arthur C. Graesser, Danielle S. McNamara . 2011. <a href="http://sage.cnpereading.com/paragraph/download/10.3102/0013189X11413260">Coh-Metrix: Providing multilevel analysis of text characteristic</a>. <em>Educational Researcher</em>.
(<a href="http://210.240.188.161/Chinese_CohMetrix/index.html">ä¸­æ–‡æ–‡æœ¬è‡ªåŠ¨åŒ–åˆ†æç³»ç»Ÿ: Coh-Metrix</a>)</p>
</li>
<li>
<p>Xiaobin Chen, Detmar Meurers. 2016. <a href="https://www.aclweb.org/anthology/W16-4113.pdf">CTAP: A Web-Based Tool Supporting Automatic Complexity Analysis</a>. <em>Proceedings of the Workshop on Computational Linguistics for Linguistic Complexity (CL4LC))</em>.
(<a href="http://samos.sfs.uni-tuebingen.de:8080/ctapweb/">CTAP</a>)</p>
</li>
<li>
<p>é‡‘æª€ã€é™†å°é£ã€éƒ­å‡¯ã€æç™¾å·. 2018. Eng-Editor: An online English text evaluation and adaptation system. å¹¿å·ï¼šè¯­è¨€æ•°æ®ç½‘(languagedata.net/tester).
( <a href="https://www.languagedata.net/tester/">è‹±è¯­é˜…è¯»åˆ†çº§æŒ‡éš¾é’ˆ</a> )</p>
</li>
</ul>
<br>
<h2 id="4">4. Chinese Data Resources</h2>
<ul>
<li><a href="https://mp.weixin.qq.com/s/VRiNJyILWMwNOAzXJUoKyA">æ±‰è¯­è¯æ³•éš¾åº¦åˆ†çº§è¡¨</a></li>
<li><a href="https://mp.weixin.qq.com/s/IRSqMm75mjoI95VGArW9Jw">æ±‰è¯­å¥æ³•éš¾åº¦åˆ†çº§è¡¨</a></li>
<li>å›½é™…æ±‰è¯­æ•™å¸ˆè¯­æ³•æ•™å­¦æ‰‹å†Œ</li>
<li>å›½é™…æ±‰è¯­æ•™å¸ˆä¸­çº§è¯­æ³•æ•™å­¦æ‰‹å†Œ</li>
</ul>
<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>ç§‘å­¦ç»˜å›¾matplotlib</title>
      <link>https://hidadeng.github.io/blog/sci_matplotlib/</link>
      <pubDate>Wed, 24 Nov 2021 22:40:10 +0600</pubDate>
      
      <guid>/blog/sci_matplotlib/</guid>
      <description>å­—æ®µä¸°å¯Œï¼Œé€‚åˆç©æ•°æ®åˆ†æ</description>
      <content:encoded><![CDATA[<p>Python ç§‘å­¦å¯è§†åŒ–é¢†åŸŸæ˜¯å·¨å¤§çš„ï¼Œç”±æ— æ•°å·¥å…·ç»„æˆï¼Œä»æœ€é€šç”¨å’Œæœ€å¹¿æ³›ä½¿ç”¨çš„å·¥å…·åˆ°æ›´ä¸“ä¸šå’Œæœºå¯†çš„å·¥å…·ã€‚å…¶ä¸­ä¸€äº›å·¥å…·æ˜¯åŸºäºç¤¾åŒºçš„ï¼Œè€Œå¦ä¸€äº›åˆ™æ˜¯ç”±å…¬å¸å¼€å‘çš„ã€‚æœ‰äº›æ˜¯ä¸“é—¨ä¸º Web åˆ¶ä½œçš„ï¼Œæœ‰äº›ä»…é€‚ç”¨äºæ¡Œé¢ï¼Œæœ‰äº›å¤„ç† 3D å’Œå¤§æ•°æ®ï¼Œè€Œæœ‰äº›åˆ™é’ˆå¯¹å®Œç¾çš„ 2D æ¸²æŸ“ã€‚</p>
<p>åœ¨è¿™ä¸ªå›¾æ™¯ä¸­ï¼ŒMatplotlib æœ‰ç€éå¸¸ç‰¹åˆ«çš„åœ°æ–¹ã€‚</p>
<ul>
<li>å®ƒæ˜¯ä¸€ä¸ªå¤šåŠŸèƒ½ä¸”åŠŸèƒ½å¼ºå¤§çš„åº“ï¼Œå¯è®©æ‚¨è®¾è®¡éå¸¸é«˜è´¨é‡çš„å›¾å½¢ï¼Œé€‚ç”¨äº<strong>ç§‘å­¦å‡ºç‰ˆ</strong>ã€‚</li>
<li>å®ƒè¿˜æä¾›äº†ä¸€ä¸ªç®€å•ç›´è§‚çš„ç•Œé¢ä»¥åŠä¸€ä¸ªé¢å‘å¯¹è±¡çš„æ¶æ„ï¼Œå…è®¸æ‚¨è°ƒæ•´å›¾å½¢ä¸­çš„ä»»ä½•å†…å®¹ã€‚</li>
<li>æœ€åï¼Œå®ƒå¯ä»¥ç”¨ä½œå¸¸è§„å›¾å½¢åº“ä»¥è®¾è®¡éç§‘å­¦å›¾å½¢ã€‚</li>
</ul>
<br>
<h2 id="æœ¬ä¹¦ç« èŠ‚å››ä¸ªéƒ¨åˆ†">æœ¬ä¹¦ç« èŠ‚å››ä¸ªéƒ¨åˆ†</h2>
<ul>
<li>
<p>ç¬¬ä¸€éƒ¨åˆ† Matplotlib åº“çš„åŸºæœ¬åŸç†ã€‚</p>
<p>è¿™åŒ…æ‹¬å›é¡¾æ„æˆå›¾å½¢çš„ä¸åŒéƒ¨åˆ†ã€ä¸åŒçš„åæ ‡ç³»ã€å¯ç”¨çš„æ¯”ä¾‹å’ŒæŠ•å½±ï¼Œæˆ‘ä»¬è¿˜å°†ä»‹ç»ä¸€äº›ä¸æ’ç‰ˆå’Œé¢œè‰²ç›¸å…³çš„æ¦‚å¿µã€‚</p>
</li>
<li>
<p>ç¬¬äºŒéƒ¨åˆ† å›¾å½¢æ¶‰åŠå®è·µã€‚</p>
<p>åœ¨ä»‹ç»äº†ä¸€äº›ç”Ÿæˆæ›´å¥½å›¾å½¢çš„ç®€å•è§„åˆ™ä¹‹åï¼Œæˆ‘ä»¬å°†ç»§ç»­è§£é‡Š Matplotlib é»˜è®¤å€¼å’Œæ ·å¼ç³»ç»Ÿï¼Œç„¶åå†æ·±å…¥ç ”ç©¶å›¾å½¢å¸ƒå±€ç»„ç»‡ã€‚ç„¶åæˆ‘ä»¬å°†æ¢ç´¢å¯ç”¨çš„ä¸åŒç±»å‹çš„æƒ…èŠ‚ï¼Œçœ‹çœ‹å¦‚ä½•ç”¨ä¸åŒçš„å…ƒç´ è£…é¥°ä¸€ä¸ªäººç‰©ã€‚</p>
</li>
<li>
<p>ç¬¬ä¸‰éƒ¨åˆ† æ›´é«˜çº§çš„æ¦‚å¿µ</p>
<p>å³ 3D å›¾å½¢ã€ä¼˜åŒ–å’ŒåŠ¨ç”»ã€‚ç¬¬å››éƒ¨åˆ†ä¹Ÿæ˜¯æœ€åä¸€éƒ¨åˆ†æ˜¯å±•ç¤ºé›†åˆã€‚</p>
</li>
</ul>
<br>
<h2 id="ç¾å›¾å±•è§ˆ">ç¾å›¾å±•è§ˆ</h2>
<p>
<figure >
    
        <img src="img/1.png" width="800" />
    
    
</figure>


<figure >
    
        <img src="img/2.png" width="800" />
    
    
</figure>


<figure >
    
        <img src="img/3.png" width="800" />
    
    
</figure>
</p>
<br>
<h2 id="æ¡ˆä¾‹ä»£ç ">æ¡ˆä¾‹ä»£ç </h2>

<figure >
    
        <img src="img/matplotlib.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.textpath</span> <span class="kn">import</span> <span class="n">TextPath</span>
<span class="kn">from</span> <span class="nn">matplotlib.patches</span> <span class="kn">import</span> <span class="n">PathPatch</span>
<span class="kn">from</span> <span class="nn">matplotlib.collections</span> <span class="kn">import</span> <span class="n">PolyCollection</span>
<span class="kn">from</span> <span class="nn">matplotlib.font_manager</span> <span class="kn">import</span> <span class="n">FontProperties</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">font_manager</span> <span class="k">as</span> <span class="n">fm</span><span class="p">,</span> <span class="n">rcParams</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="c1">#æ›´æ”¹å­—ä½“ï¼Œæ”¯æŒä¸­æ–‡ã€‚</span>
<span class="n">prop</span> <span class="o">=</span> <span class="n">FontProperties</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="s1">&#39;fonts/Alibaba-PuHuiTi-Bold.otf&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="n">red</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">233</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="mi">85</span><span class="p">,</span> <span class="mi">255</span><span class="p">])</span> <span class="o">/</span> <span class="mi">255</span>
<span class="n">darkred</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">130</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">255</span><span class="p">])</span> <span class="o">/</span> <span class="mi">255</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">14.8</span> <span class="o">/</span> <span class="mf">2.54</span><span class="p">,</span> <span class="mi">21</span> <span class="o">/</span> <span class="mf">2.54</span><span class="p">))</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="n">ylim</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">14.2</span><span class="p">,</span> <span class="mf">14.2</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&#34;off&#34;</span><span class="p">)</span>

<span class="c1"># Text path</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">TextPath</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s2">&#34;MATPLOTLIBåº“&#34;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">prop</span><span class="o">=</span><span class="n">prop</span><span class="p">)</span>

<span class="c1"># Text centering</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">vertices</span>
<span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">V</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">V</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">V</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">V</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="n">V</span> <span class="o">-=</span> <span class="p">(</span><span class="n">xmin</span> <span class="o">+</span> <span class="n">xmax</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">ymin</span> <span class="o">+</span> <span class="n">ymax</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>


<span class="c1"># Compute shadow by iterating over text path segments</span>
<span class="n">polys</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">code</span><span class="p">)</span> <span class="ow">in</span> <span class="n">path</span><span class="o">.</span><span class="n">iter_segments</span><span class="p">(</span><span class="n">curves</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">path</span><span class="o">.</span><span class="n">MOVETO</span><span class="p">:</span>
        <span class="n">points</span> <span class="o">=</span> <span class="p">[</span><span class="n">point</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">path</span><span class="o">.</span><span class="n">LINETO</span><span class="p">:</span>
        <span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">path</span><span class="o">.</span><span class="n">CLOSEPOLY</span><span class="p">:</span>
        <span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">p0</span><span class="p">,</span> <span class="n">p1</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">polys</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p1</span> <span class="o">+</span> <span class="p">(</span><span class="o">+</span><span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">),</span> <span class="n">p0</span> <span class="o">+</span> <span class="p">(</span><span class="o">+</span><span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">)])</span>

<span class="c1"># Display shadow</span>
<span class="n">collection</span> <span class="o">=</span> <span class="n">PolyCollection</span><span class="p">(</span>
    <span class="n">polys</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="n">darkred</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=-</span><span class="mi">10</span>
<span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_collection</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>

<span class="c1"># Display text</span>
<span class="n">patch</span> <span class="o">=</span> <span class="n">PathPatch</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s2">&#34;white&#34;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&#34;none&#34;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_artist</span><span class="p">(</span><span class="n">patch</span><span class="p">)</span>

<span class="c1"># Transparent gradient to fade out shadow</span>
<span class="n">I</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">200</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span> <span class="o">+</span> <span class="n">red</span>
<span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">11</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span> <span class="n">zorder</span><span class="o">=-</span><span class="mi">20</span><span class="p">,</span> <span class="n">clip_on</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">I</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">I</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">11</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">clip_on</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>


<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
    <span class="mf">6.5</span><span class="p">,</span>
    <span class="o">-</span><span class="mf">1.75</span><span class="p">,</span>
    <span class="s2">&#34;ä¸€ä¸ªå¤šåŠŸèƒ½çš„ç§‘å­¦å¯è§†åŒ–åº“&#34;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&#34;white&#34;</span><span class="p">,</span>
    <span class="n">ha</span><span class="o">=</span><span class="s2">&#34;right&#34;</span><span class="p">,</span>
    <span class="n">va</span><span class="o">=</span><span class="s2">&#34;baseline&#34;</span><span class="p">,</span>
    <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="c1">#family=&#34;Pacifico&#34;,</span>
    <span class="n">zorder</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
    <span class="n">fontproperties</span><span class="o">=</span><span class="n">prop</span>
<span class="p">)</span>

<span class="c1"># Save and show result</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&#34;text-shadow.pdf&#34;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&#34;text-shadow.png&#34;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div><br>
<h2 id="ç”µå­ä¹¦ä¸‹è½½">ç”µå­ä¹¦ä¸‹è½½</h2>
<p>æ‚¨å¯ä»¥é˜…è¯» PDFï¼ˆ95Moï¼Œé¦–é€‰ç«™ç‚¹ï¼‰è¿™æœ¬ä¹¦ï¼Œè¯¥ä¹¦æ˜¯å¼€æ”¾è®¿é—®çš„ï¼Œæ‰˜ç®¡åœ¨ HAL ä¸Šï¼ŒHAL æ˜¯ä¸€ä¸ªé¢å‘å­¦æœ¯ç•Œçš„æ³•å›½å¼€æ”¾æ¡£æ¡ˆé¦†ã€‚æœ€æ–°ç‰ˆæœ¬ä¹Ÿå¯ä»¥åœ¨ GitHub ä¸Šæ‰¾åˆ°ã€‚æœ¬ä¹¦çš„æ¥æºï¼ˆåŒ…æ‹¬ä»£ç ç¤ºä¾‹ï¼‰å¯åœ¨ github.com/rougier/scientific-visualization-book ä¸Šæ‰¾åˆ°ã€‚</p>
<br>
<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="https://github.com/hiDaDeng/DaDengAndHisPython/tree/master/matplotlib%E7%BB%98%E5%9B%BE%E6%94%AF%E6%8C%81%E4%B8%AD%E6%96%87">ç‚¹å‡»ä¸‹è½½</a></p>
<br>
<p>##äº†è§£è¯¾ç¨‹</p>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>æ–‡æœ¬åˆ†ææ–¹æ³•åœ¨2021ç®¡ç†ä¸–ç•Œä¸­çš„åº”ç”¨</title>
      <link>https://hidadeng.github.io/blog/text_mining_in_2021_management_world/</link>
      <pubDate>Tue, 23 Nov 2021 21:33:10 +0600</pubDate>
      
      <guid>/blog/text_mining_in_2021_management_world/</guid>
      <description>æœ¬æ–‡åŸºäºé«˜å±‚æ¢¯é˜Ÿç†è®ºå’Œç¤¾ä¼šå¿ƒç†å­¦ä¸­çš„æ—¶é—´å¯¼å‘ç†è®ºï¼Œæå‡ºäº†ç®¡ç†è€…å†…åœ¨çš„çŸ­è§†ä¸»ä¹‰ç‰¹è´¨ä¸ä¼ä¸šèµ„æœ¬æ”¯å‡ºå’Œç ”å‘æ”¯å‡ºçš„å…³ç³»ï¼Œå¹¶é‡‡ç”¨æ–‡æœ¬åˆ†æå’Œæœºå™¨å­¦ä¹ æŠ€æœ¯æ„å»ºå‡ºç®¡ç†è€…çŸ­è§†ä¸»ä¹‰æŒ‡æ ‡ä»è€Œå¯¹å…¶è¿›è¡Œå®è¯æ£€éªŒã€‚ç ”ç©¶ç»“æœå‘ç°ï¼Œå¹´æŠ¥ MD&amp;amp;A ä¸­æŠ«éœ²çš„â€œçŸ­æœŸè§†åŸŸâ€ è¯­è¨€ èƒ½å¤Ÿåæ˜ ç®¡ç†è€…å†…åœ¨çš„çŸ­è§†ä¸»ä¹‰ç‰¹è´¨ï¼Œç®¡ç†è€…çŸ­è§†ä¼šå¯¼è‡´ä¼ä¸šå‡å°‘èµ„æœ¬æ”¯å‡ºå’Œç ”å‘æ”¯å‡ºã€‚å½“å…¬å¸æ²»ç†æ°´å¹³ã€ç›‘ç£å‹æœºæ„æŠ•èµ„è€…çš„æŒè‚¡æ¯”ä¾‹ä»¥åŠåˆ†æå¸ˆå…³æ³¨åº¦è¶Šé«˜æ—¶ï¼Œç®¡ç†è€…çŸ­è§†ä¸»ä¹‰å¯¹è¿™äº›é•¿æœŸæŠ•èµ„çš„è´Ÿå‘å½±å“è¶Š æ˜“å—åˆ°æŠ‘åˆ¶ã€‚æœ€ç»ˆï¼Œç®¡ç†è€…çŸ­è§†ä¸»ä¹‰å¯¼è‡´çš„ç ”å‘æ”¯å‡ºå‡å°‘å’Œèµ„æœ¬æŠ•èµ„æ•ˆç‡é™ä½ä¼šæŸå®³ä¼ä¸šçš„æœªæ¥ç»©æ•ˆã€‚æœ¬æ–‡æ‹“å®½äº†ç®¡ç†è€…çŸ­è§†ä¸»ä¹‰çš„è¡Œä¸ºåæœåˆ†æï¼Œå¯¹ä¼ä¸šé«˜å±‚æ¬¡ç®¡ç†äººæ‰çš„è˜ä»»ä»¥åŠä¼ä¸šå’Œæ”¿åºœçš„ç›‘ç®¡å…·æœ‰é‡è¦çš„å®è·µå¯ç¤ºã€‚åŒæ—¶ï¼Œæœ¬æ–‡å°†æ–‡æœ¬åˆ†æå’Œæœºå™¨å­¦ä¹ æ–¹æ³•å¼•å…¥ç®¡ç†è€…çŸ­è§†ä¸»ä¹‰çš„ç ”ç©¶ï¼Œä¸ºæœªæ¥è¯¥é¢†åŸŸçš„ç ”ç©¶æä¾›äº†å‚è€ƒå’Œå€Ÿé‰´ã€‚</description>
      <content:encoded><![CDATA[<h2 id="æ¡ˆä¾‹æ–‡çŒ®">æ¡ˆä¾‹æ–‡çŒ®</h2>
<p>èƒ¡æ¥ ,è–›ä»˜å©§,ç‹æ˜Šæ¥ .ç®¡ç†è€…çŸ­è§†ä¸»ä¹‰å½±å“ä¼ä¸šé•¿æœŸæŠ•èµ„å—ï¼Ÿâ€”â€”åŸºäºæ–‡æœ¬åˆ†æå’Œæœºå™¨å­¦ä¹ [J].ç®¡ç†ä¸–ç•Œ,2021,37(05):139-156+11+19-21.</p>
<h2 id="æ‘˜è¦">æ‘˜è¦ï¼š</h2>
<p>åœ¨å¯æŒç»­å‘å±•æˆ˜ç•¥å¯¼å‘ä¸‹ï¼Œç§‰æŒé•¿è¿œç†å¿µæ˜¯ä¼ä¸šæŠµå¾¡å¤–éƒ¨ç¯å¢ƒå¨èƒå’Œæ‹¥æœ‰å¯æŒç»­ç»è¥èƒ½åŠ›çš„åŸº çŸ³ã€‚ç„¶è€Œï¼Œä½œä¸ºä¼ä¸šæŒèˆµäººçš„ç®¡ç†è€…å¹¶ééƒ½å…·æœ‰é•¿è¿œçš„ç›®å…‰ã€‚æœ¬æ–‡åŸºäº<strong>é«˜å±‚æ¢¯é˜Ÿç†è®º</strong>å’Œç¤¾ä¼šå¿ƒç†å­¦ä¸­çš„<strong>æ—¶é—´å¯¼å‘ç†è®º</strong>ï¼Œæå‡ºäº†ç®¡ç†è€…å†…åœ¨çš„çŸ­è§†ä¸»ä¹‰ç‰¹è´¨ä¸ä¼ä¸šèµ„æœ¬æ”¯å‡ºå’Œç ”å‘æ”¯å‡ºçš„å…³ç³»ï¼Œå¹¶<strong>é‡‡ç”¨æ–‡æœ¬åˆ†æå’Œæœºå™¨å­¦ä¹ æŠ€æœ¯æ„å»ºå‡ºç®¡ç†è€…çŸ­è§†ä¸»ä¹‰æŒ‡æ ‡ä»è€Œå¯¹å…¶è¿›è¡Œå®è¯æ£€éªŒ</strong>ã€‚ç ”ç©¶ç»“æœå‘ç°ï¼Œ<strong>å¹´æŠ¥ MD&amp;A ä¸­æŠ«éœ²çš„â€œçŸ­æœŸè§†åŸŸâ€ è¯­è¨€</strong> èƒ½å¤Ÿåæ˜ ç®¡ç†è€…å†…åœ¨çš„çŸ­è§†ä¸»ä¹‰ç‰¹è´¨ï¼Œç®¡ç†è€…çŸ­è§†ä¼šå¯¼è‡´ä¼ä¸šå‡å°‘èµ„æœ¬æ”¯å‡ºå’Œç ”å‘æ”¯å‡ºã€‚å½“å…¬å¸æ²»ç†æ°´å¹³ã€ç›‘ç£å‹æœºæ„æŠ•èµ„è€…çš„æŒè‚¡æ¯”ä¾‹ä»¥åŠåˆ†æå¸ˆå…³æ³¨åº¦è¶Šé«˜æ—¶ï¼Œç®¡ç†è€…çŸ­è§†ä¸»ä¹‰å¯¹è¿™äº›é•¿æœŸæŠ•èµ„çš„è´Ÿå‘å½±å“è¶Š æ˜“å—åˆ°æŠ‘åˆ¶ã€‚æœ€ç»ˆï¼Œç®¡ç†è€…çŸ­è§†ä¸»ä¹‰å¯¼è‡´çš„ç ”å‘æ”¯å‡ºå‡å°‘å’Œèµ„æœ¬æŠ•èµ„æ•ˆç‡é™ä½ä¼šæŸå®³ä¼ä¸šçš„æœªæ¥ç»©æ•ˆã€‚æœ¬æ–‡æ‹“å®½äº†ç®¡ç†è€…çŸ­è§†ä¸»ä¹‰çš„è¡Œä¸ºåæœåˆ†æï¼Œå¯¹ä¼ä¸šé«˜å±‚æ¬¡ç®¡ç†äººæ‰çš„è˜ä»»ä»¥åŠä¼ä¸šå’Œæ”¿åºœçš„ç›‘ç®¡å…·æœ‰é‡è¦çš„å®è·µå¯ç¤ºã€‚<strong>åŒæ—¶ï¼Œæœ¬æ–‡å°†æ–‡æœ¬åˆ†æå’Œæœºå™¨å­¦ä¹ æ–¹æ³•å¼•å…¥ç®¡ç†è€…çŸ­è§†ä¸»ä¹‰çš„ç ”ç©¶ï¼Œä¸ºæœªæ¥è¯¥é¢†åŸŸçš„ç ”ç©¶æä¾›äº†å‚è€ƒå’Œå€Ÿé‰´</strong>**ã€‚**</p>
<h2 id="å…³é”®è¯">å…³é”®è¯ï¼š</h2>
<p>ç®¡ç†è€…çŸ­è§† é•¿æœŸæŠ•èµ„ æ–‡æœ¬åˆ†æ æœºå™¨å­¦ä¹ </p>
<h2 id="å˜é‡æµ‹é‡è®ºè¯">å˜é‡æµ‹é‡è®ºè¯</h2>
<p><strong>è¯­è¨€èƒ½å¤Ÿåæ˜ äººçš„è®¤çŸ¥ã€åå¥½å’Œä¸ªæ€§ï¼ˆWebb et al.ï¼Œ1966ï¼‰ï¼Œç ”ç©¶è€…å¯é€šè¿‡åˆ†æå®éªŒå¯¹è±¡è¯­è¨€ä¸­ä½¿ç”¨çš„è¯è¯­ç±»å‹å’Œè¯é¢‘æ¥æ•æ‰äººçš„ç‰¹è´¨</strong>ï¼ˆMiller and Rossï¼Œ1975ï¼›Pennebaker et al.ï¼Œ2003ï¼‰ã€‚å¦‚ä¸€ä¸ªäººçš„è¯­è¨€ä¸­è¶Šå¼ºè°ƒâ€œè¿‡å»â€ã€â€œ æ›¾ç»â€ç­‰è¯æ±‡ï¼Œåæ˜ å…¶è¶Šå…³æ³¨è¿‡å»ï¼›ä¸€ä¸ªäººçš„è¯­è¨€ä¸­è¶Šå¼ºè°ƒâ€œå°†æ¥â€ã€â€œ å¯èƒ½â€ã€â€œ è¦å»â€ç­‰è¯æ±‡ï¼Œåæ˜ å…¶è¶Šå…³æ³¨æœªæ¥ï¼ˆPennebaker et al.ï¼Œ2003ï¼‰ã€‚<strong>åŸºäºæ­¤ç ”ç©¶èŒƒå¼ï¼Œæœ¬æ–‡ç»“åˆå·²æœ‰çš„è‹±æ–‡â€œçŸ­æœŸè§†åŸŸâ€è¯é›†ã€MD&amp;A ä¸­æ–‡è¯­æ–™ç‰¹ç‚¹ä»¥åŠ Word2Vec æœºå™¨å­¦ä¹ åˆ¶å®šå‡ºèƒ½å¤Ÿåæ˜ ç®¡ç†è€…â€œçŸ­æœŸè§†åŸŸâ€çš„ä¸­æ–‡è¯é›†ï¼Œéšåé€šè¿‡è¯å…¸æ³•æ„å»ºå‡ºç®¡ç†è€…çš„çŸ­è§†ä¸»ä¹‰æŒ‡æ ‡ã€‚</strong></p>
<p>MD&amp;A æ˜¯ç®¡ç†è€…å¯¹æŠ¥å‘ŠæœŸå†…ä¼ä¸šç»è¥çŠ¶å†µçš„å›é¡¾ä»¥åŠå¯¹ä¸‹ä¸€å¹´åº¦ç»è¥è®¡åˆ’ä»¥åŠä¼ä¸šæœªæ¥å‘å±•æ‰€é¢ä¸´çš„æœºé‡ã€æŒ‘æˆ˜å’Œå„ç§é£é™©çš„é˜è¿°ã€‚å·²æœ‰åˆ©ç”¨ MD&amp;A ç­‰æ–‡æœ¬åˆ»ç”»ç®¡ç†è€…ç‰¹è´¨çš„ç ”ç©¶æˆæœåœ¨ä¸€å®šç¨‹åº¦ä¸Šè¯å®äº†å…¶å¯é æ€§ï¼ˆLiï¼Œ2012ï¼›è’‹è‰³è¾‰ã€å†¯æ¥šå»ºï¼Œ2014ï¼‰ã€‚å¦‚</p>
<ul>
<li>Liï¼ˆ2012ï¼‰åˆ©ç”¨ç¾å›½ä¸Šå¸‚å…¬å¸ MD&amp;A æ–‡æœ¬æ¥åˆ»ç”»ç®¡ç†è€…çš„ <strong>è‡ªæˆ‘å½’å› åå·®</strong>ã€‚</li>
<li>è’‹è‰³è¾‰å’Œå†¯æ¥šå»ºï¼ˆ2014ï¼‰åˆ©ç”¨ MD&amp;A ä¸­â€œæˆ‘ä»¬â€ã€â€œ æˆ‘å…¬å¸â€ã€â€œ æˆ‘ä»¬å…¬å¸â€ç­‰è¯è¯­å‡ºç°çš„é¢‘ç‡åˆ»ç”»ç®¡ç†è€…çš„<strong>è‡ªæˆ‘æŒ‡æ¶‰åº¦</strong>ï¼Œä»è€Œè¡¡é‡ç®¡ç†å±‚å¯¹å…¬å¸çš„è®¤çŸ¥å’ŒåŠªåŠ›ç¨‹åº¦ã€‚</li>
<li>åŒæ—¶ï¼Œå›½å¤–æ–‡çŒ®è¡¨æ˜ CEO å¯¹ä¼ä¸šçš„ç»è¥å†³ç­–èµ·ç€ç»å¯¹çš„ä¸»å¯¼ä½œç”¨ï¼Œèƒ½å¤Ÿç›´æ¥å½±å“ä¼ä¸šæœªæ¥çš„å‘å±•æ–¹å‘å’Œå‘½è¿ï¼ˆChandlerï¼Œ1962ï¼›Finkelstein and Hambrickï¼Œ1996ï¼‰ã€‚CEO çš„ç‰¹è´¨å¦‚è‡ªæ‹ç¨‹åº¦ã€å­¦å†å’Œä»»æœŸç­‰éƒ½ä¼šæå¤§å½±å“å…¬å¸çš„ä¿¡æ¯æŠ«éœ²ç‰¹ç‚¹ï¼ˆMarquez Illescas et al.ï¼Œ2019ï¼›Lewis et al.ï¼Œ2019ï¼‰ï¼Œå› æ­¤å¹´æŠ¥æŠ«éœ²çš„æ–‡æœ¬ä¿¡æ¯æ›´å¤šåœ°åæ˜ äº† CEO çš„æ„æ€ã€‚è€Œåœ¨æˆ‘å›½ï¼Œä¸Šå¸‚å…¬å¸çš„è‘£äº‹é•¿æ›´åƒå‘è¾¾å›½å®¶çš„ CEOï¼ˆå§œä»˜ç§€ç­‰ï¼Œ2009ï¼›é™ˆä¼ æ˜ã€å­™ä¿Šåï¼Œ2008ï¼›æå¥ç­‰ï¼Œ2012ï¼‰ã€‚</li>
</ul>
<p><strong>å› æ­¤ï¼Œæˆ‘ä»¬ä» MD&amp;A ä¸­æ•è·çš„ç®¡ç†è€…çŸ­è§†ä¸»ä¹‰ç‰¹è´¨æ›´å¤šåæ˜ çš„æ˜¯è‘£äº‹é•¿çš„çŸ­è§†ä¸»ä¹‰ç‰¹è´¨ï¼Œæœ¬æ–‡çš„ç®¡ç†è€…æŒ‡çš„æ˜¯ä¼ä¸šçš„è‘£äº‹é•¿ã€‚</strong></p>
<h2 id="æŒ‡æ ‡æ„å»ºè¿‡ç¨‹">æŒ‡æ ‡æ„å»ºè¿‡ç¨‹</h2>
<p>å…·ä½“æ¥è®²**ï¼Œç®¡ç†è€…çŸ­è§†ä¸»ä¹‰æŒ‡æ ‡**çš„æ„å»ºè¿‡ç¨‹å¦‚ä¸‹ã€‚</p>
<ol>
<li>å€Ÿé‰´ Brochet ç­‰ï¼ˆ2015ï¼‰çš„è‹±æ–‡â€œ<strong>çŸ­æœŸè§†åŸŸ</strong>â€è¯é›†ä¸ Liï¼ˆ2010ï¼‰æ„å»ºæ–‡æœ¬æŒ‡æ ‡çš„æ€è·¯ï¼Œæˆ‘ä»¬é˜…è¯»äº† 500 ä»½ MD&amp;A è¯­æ–™ä»¥è·å–ä¸­æ–‡æ–‡æœ¬ä¿¡æ¯çš„ç‰¹ç‚¹ï¼Œåˆ¶å®šå‡ºä¸­æ–‡ MD&amp;A ä¸­æœ‰å…³â€œçŸ­æœŸè§†åŸŸâ€çš„ç§å­è¯é›†ï¼ŒåŒ…æ‹¬ç›´æ¥å’Œé—´æ¥ ä¸¤å¤§ç±»ã€‚<strong>ç›´æ¥çŸ­æœŸè§†åŸŸ</strong>å¤§ç±»åŒ…æ‹¬ï¼šâ€œ å¤©å†…â€ã€â€œ æ•°æœˆâ€ã€â€œ å¹´å†…â€ã€â€œ å°½å¿«â€ã€â€œ ç«‹åˆ»â€ã€â€œ é©¬ä¸Šâ€ï¼›<strong>é—´æ¥****çŸ­æœŸè§†åŸŸ</strong>å¤§ç±»åŒ…æ‹¬ï¼šâ€œ å¥‘æœºâ€ã€â€œ ä¹‹é™…â€ã€ â€œå‹åŠ›â€ã€â€œ è€ƒéªŒâ€ã€‚</li>
<li>é’ˆå¯¹åŒä¸€æ¦‚å¿µæˆ–è€…äº‹ç‰©ï¼Œè¡¨è¾¾è€…å¾€å¾€ä½¿ç”¨å¤šä¸ªè¯­ä¹‰ç›¸ä¼¼çš„è¯æ±‡è¿›è¡Œæè¿°ï¼Œå› æ­¤éœ€è¦å¯¹ç§å­è¯é›†è¿›è¡Œç›¸ä¼¼è¯æ‰©å……ã€‚æœ¬æ–‡é‡‡ç”¨ Word2Vec ä¸­çš„ CBOW æ¨¡å‹ï¼ˆContinuous Bag-of-words Modelï¼‰å¯¹ä¸­æ–‡å¹´åº¦è´¢åŠ¡æŠ¥å‘Šè¯­æ–™è¿›è¡Œè®­ç»ƒã€‚</li>
<li>æˆ‘ä»¬é€šè¿‡é‚€è¯· 3 åä¸šç•Œå’Œå­¦æœ¯ç•Œä¸“å®¶ä»¥åŠå¯¹æ¯” MD&amp;A æ–‡æœ¬æ ·ä¾‹å¯¹æŒ‡æ ‡è¯é›†è¿›è¡Œæ ¸éªŒï¼Œæœ€ç»ˆç¡®å®šè¯é›†åŒ…å« 43 ä¸ªâ€œçŸ­æœŸè§†åŸŸâ€è¯æ±‡ï¼ˆè¯é›†å’Œè¯­å¥ç¤ºä¾‹è¯¦è§ã€Šç®¡ç†ä¸–ç•Œã€‹ç½‘ç»œå‘è¡Œç‰ˆé™„å½• 2ï¼‰ã€‚éšåï¼Œæœ¬æ–‡åŸºäºè¯å…¸æ³•è®¡ç®— â€œçŸ­æœŸè§†åŸŸâ€è¯æ±‡æ€»è¯é¢‘å  MD&amp;A æ€»è¯é¢‘çš„æ¯”ä¾‹ï¼Œä¹˜ä»¥ 100 åå¾—åˆ°<strong>ç®¡ç†è€…çŸ­è§†ä¸»ä¹‰æŒ‡æ ‡</strong>ã€‚è¯¥æŒ‡æ ‡å€¼è¶Šå¤§ï¼Œè¡¨æ˜ç®¡ç†è€…è¶ŠçŸ­è§†ã€‚</li>
</ol>
<h2 id="æŠ€æœ¯åˆ†æ">æŠ€æœ¯åˆ†æ</h2>
<blockquote>
<p>çº¯æŠ€æœ¯è®¨è®ºï¼Œéè®ºæ–‡å†…å®¹</p>
</blockquote>
<p>è¿™ç¯‡ç®¡ç†ä¸–ç•Œçš„è®ºæ–‡ï¼Œä¸»è¦éš¾ç‚¹æœ‰ä¸¤ä¸ªï¼š</p>
<ol>
<li>
<p>å¦‚ä½•æ„å»º <strong>çŸ­è§†ä¸»ä¹‰è¯å…¸(é›†)</strong> ï¼Ÿ</p>
</li>
<li>
<ul>
<li>æ ¹æ®å¯¹ç ”ç©¶å’Œæ•°æ®çš„äº†è§£ï¼Œ<strong>äººå·¥æ‘˜é€‰</strong>ä¸€äº› çŸ­è§†ä¸»ä¹‰è¯å…¸(é›†)ç§å­è¯ï¼›äººå·¥ï¼Œä¸éœ€è¦pythonç¼–ç¨‹</li>
<li>ä½¿ç”¨Word2VecæŠ€æœ¯æ‰©å…… çŸ­è§†ä¸»ä¹‰è¯å…¸(é›†)ï¼›éœ€è¦pythonç¼–ç¨‹</li>
</ul>
</li>
<li>
<p>å¦‚ä½•ä½¿ç”¨ <strong>çŸ­è§†ä¸»ä¹‰è¯å…¸(é›†)</strong> è®¡ç®—  <strong>çŸ­è§†ä¸»ä¹‰æŒ‡æ ‡</strong>ï¼Ÿ</p>
</li>
<li>
<ul>
<li>éœ€è¦ä½¿ç”¨Pythonç¼–ç¨‹è¯­è¨€ï¼Œæ ¹æ® <strong>è¯å…¸æ³•</strong> å®ç°çŸ­è§†ä¸»ä¹‰æŒ‡æ ‡çš„è®¡ç®—ã€‚</li>
</ul>
</li>
</ol>
<h2 id="pythonå­¦ä¹ ä¸å®ç°">pythonå­¦ä¹ ä¸å®ç°</h2>
<p>éš¾ç‚¹ä¸»è¦å¯åœ¨æŒæ¡ <strong><a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">è§†é¢‘ä¸“æ è¯¾| Pythonç½‘ç»œçˆ¬è™«ä¸æ–‡æœ¬åˆ†æ</a></strong>  åï¼Œç»“åˆä»¥ä¸‹ä¸¤ä¸ªæŠ€èƒ½ç‚¹å®ç°</p>
<ul>
<li>æ‰©å……è¯é›†å¯ä»¥ç”¨åˆ°ä¹‹å‰åˆ†äº«çš„<strong>wordexpansionåº“</strong>  <a href="https://github.com/DataPlusCommunity/wordexpansion">https://github.com/DataPlusCommunity/wordexpansion</a></li>
<li>è®¡ç®—çŸ­è§†ä¸»ä¹‰æŒ‡æ ‡ï¼Œå³è¯å…¸æ³•å¯ä»¥ç”¨åˆ°<strong>cnsentiåº“</strong>  <a href="https://github.com/DataPlusCommunity/cnsenti">https://github.com/DataPlusCommunity/cnsenti</a></li>
</ul>
<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>åœ¨Rmarkdownä¸­è°ƒç”¨Pythonä»£ç </title>
      <link>https://hidadeng.github.io/blog/call_python_code_in_rmarkdown/</link>
      <pubDate>Tue, 23 Nov 2021 18:40:10 +0600</pubDate>
      
      <guid>/blog/call_python_code_in_rmarkdown/</guid>
      <description>å·¦æ‰‹Rï¼Œå³æ‰‹Pythonï¼</description>
      <content:encoded><![CDATA[<h1 id="rpy2ç®€ä»‹">rpy2ç®€ä»‹</h1>
<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="https://github.com/hidadeng/DaDengAndHisPython/blob/master/%E5%9C%A8Rmarkdown%E4%B8%AD%E8%B0%83%E7%94%A8Python%E4%BB%A3%E7%A0%81.zip">ç‚¹å‡»ä¸‹è½½æ–‡æœ¬</a></p>
<br>
<p>Pythonå’ŒRæ˜¯ä¸€å¯¹æ•°æ®ç§‘å­¦ä¸¤å¤§è¯­è¨€ï¼Œåœ¨äº’è”äº’é€šçš„è·¯ä¸Šï¼Œæˆ‘æ„Ÿè§‰Ræ›´åŠ çš„ç§¯æã€‚è¿˜è®°å¾—ä¹‹å‰ <strong>Pythonä¸­è°ƒç”¨Rçš„åº“-rpy2</strong>ï¼Œ åœ¨Pythonä½¿ç”¨Rè¯­è¨€è¯­æ³•è¿˜æ˜¯æœ‰äº›ä¸è‡ªç„¶ã€‚åœ¨Rä¸­è°ƒç”¨Pythonä½“éªŒååˆ†æ£’ï¼Œä¸€èµ·è·Ÿæˆ‘çœ‹çœ‹å§ã€‚</p>
<p>reticulateåŒ…æ˜¯å¯ä»¥è®©Rè¯­è¨€éå¸¸æµç•…è‡ªç„¶è”é€šPythonçš„å…³é”®ã€‚</p>
<p><strong>Rmarkdowné¢„å¤‡çŸ¥è¯†</strong></p>
<p>Rmarkdownå¾ˆåƒjupyter notbeookå’Œmarkdownçš„ç»“åˆã€‚</p>
<ul>
<li>ä»£ç å—</li>
<li>markdonæ–‡æœ¬</li>
</ul>
<br>
<h2 id="ä»£ç å—">ä»£ç å—</h2>
<p>åœ¨Rmarkdownä¸­çš„ä»£ç å—çš„å¼€å§‹éƒ½æ˜¯ä»¥ä¸‰å¼•å·ã€{}å’Œè¯­è¨€åä¸ºæ ‡å¿—ï¼Œä»¥ä¸‰å¼•å·ç»“å°¾ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">library(ggplot2)
ggplot(mpg, aes(x=displ, y=cty))+
  geom_point()
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">ggplot</span><span class="p">(</span><span class="n">mpg</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">displ</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">cty</span><span class="p">))</span><span class="o">+</span>
  <span class="nf">geom_point</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="img/unnamed-chunk-1-1.png" width="100%" />
    
    
</figure>

<p>åé¢è®¾ç½®å¥½reticulateåŒ…åï¼Œå°±å¯ä»¥åœ¨Rmarkdownä¸­ä½¿ç”¨pythonä»£ç å—ï¼Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">import pandas as pd
df = pd.read_csv(&#39;test.csv&#39;)
df.head()
</code></pre></div><br>
<h2 id="markdownæ–‡æœ¬">markdownæ–‡æœ¬</h2>
<p>æ–‡æœ¬éƒ¨åˆ†å…¨éƒ¨æ”¯æŒmarkdownè¯­æ³•ï¼Œè¿™é‡Œä¸åšèµ˜è¿°ã€‚</p>
<h2 id="å®‰è£…rpy">å®‰è£…rpy</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">install.packages(&#34;reticulate&#34;)
</code></pre></div><h2 id="ç¯å¢ƒè®¾ç½®">ç¯å¢ƒè®¾ç½®</h2>
<p>å½“æˆ‘ä»¬åœ¨Rä»£ç å—ä¸­è®¾ç½®å¥½Pythonç¯å¢ƒï¼Œå°±å¯ä»¥åœ¨Rmarkdownä¸­è·‘Pythonä»£ç ã€‚</p>
<br>
<h2 id="æŸ¥è¯¢python">æŸ¥è¯¢Python</h2>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“Pythonå®‰è£…è·¯å¾„ï¼Œå¯ä»¥åœ¨<strong>å‘½ä»¤è¡Œ</strong>ä¸­é€è¡Œæ‰§è¡Œä¸‹é¢ä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">python3
import sys
sys.executable
</code></pre></div><p>æˆ‘çš„macç”µè„‘çš„Pythonå®‰è£…è·¯å¾„ä¸º</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">/Library/Frameworks/Python.framework/Versions/3.7/bin/python3
</code></pre></div><br>
<h2 id="æŒ‡å®špython">æŒ‡å®šPython</h2>
<p>æ‰§è¡Œä¸‹æ–¹çš„ä»£ç (è·¯å¾„æ”¹ä¸ºè‡ªå·±çš„Pythonå®‰è£…è·¯å¾„)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">reticulate</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="err">##</span> <span class="nx">Warning</span><span class="p">:</span> <span class="kn">package</span> <span class="err">&#39;</span><span class="nx">reticulate</span><span class="err">&#39;</span> <span class="nx">was</span> <span class="nx">built</span> <span class="nx">under</span> <span class="nx">R</span> <span class="nx">version</span> <span class="mf">3.6.2</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">use_python</span><span class="p">(</span><span class="s">&#39;/Library/Frameworks/Python.framework/Versions/3.7/bin/python3&#39;</span><span class="p">)</span>
</code></pre></div><p>æ‰§è¡Œä»£ç åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨Pythonä»£ç </p>
<br>
<h1 id="è¿è¡Œpythonä»£ç ">è¿è¡ŒPythonä»£ç </h1>
<p>åœ¨Rmarkdownä¸­å†™Pythonä»£ç å—</p>
<h2 id="ä½œå›¾">ä½œå›¾</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span> 
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span> 
<span class="c1"># è®¡ç®—æ­£å¼¦æ›²çº¿ä¸Šç‚¹çš„ x å’Œ y åæ ‡</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span>  <span class="mi">3</span>  <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span>  <span class="mf">0.1</span><span class="p">)</span> 
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&#34;sine wave form&#34;</span><span class="p">)</span>  
<span class="c1"># ä½¿ç”¨ matplotlib æ¥ç»˜åˆ¶ç‚¹</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> 
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="img/unnamed-chunk-3-1.png" width="100%" />
    
    
</figure>

<br>
<h2 id="è¯»å–csv">è¯»å–csv</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&#34;test.csv&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;gbk&#34;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">##      birthday   name               text  age  gender  height  weight
## 0  1985/10/08  Alice  æˆ‘å¾ˆå¼€å¿ƒï¼Œæ¯å¤©éƒ½è¿™ä¹ˆå¿«ä¹ï¼Œæˆ‘å¾ˆå¹¸ç¦   35  female     175      55
## 1    95.07.07   Mary               æˆ‘å¾ˆéš¾è¿‡   25  female     165      50
## 2    01-11-10   Mike              å”‰ï¼ŒçœŸéš¾å—   19    male     180      75
## 3      90/2/8  Smith          æ— æ‰€è°“å¼€å¿ƒè¿˜æ˜¯éš¾è¿‡   30    male     175      70
## 4      93-1-5  Henry          æ¯å¤©èµšä¸€ä¸‡ï¼ŒçœŸçˆ½ï¼   27    male     185      80
</code></pre></div><p>è¿”å›çš„dfæ˜¯Pythonå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¡¨æ ¼ä¸å¥½çœ‹ï¼Œè¿™æ˜¯Rä¸­çš„Pythonå¯¹è±¡ã€‚</p>
<br>
<h2 id="åœ¨rä»£ç å—ä¸­è°ƒç”¨pythonå˜é‡å¯¹è±¡">åœ¨Rä»£ç å—ä¸­è°ƒç”¨Pythonå˜é‡(å¯¹è±¡)</h2>
<p>åˆšåˆšè®²çš„éƒ½æ˜¯åœ¨Rmakdownä¸­è¿è¡ŒPythonä»£ç å—ï¼Œå¹¶ä¸æ˜¯åœ¨Rä»£ç å—ä¸­è¿è¡ŒPythonä»£ç æˆ–è€…è°ƒç”¨Pythonå˜é‡ã€‚</p>
<h3 id="pypython_variable_name">py$python_variable_name</h3>
<p>Rä»£ç å—ä¸­è°ƒç”¨Pythonæ–¹æ³•</p>
<p>py$python_variable_name</p>
<ul>
<li>pyç›¸å½“äºPythonä¸­çš„å¯¹è±¡</li>
<li>$ ç›¸å½“äºPythonä¸­çš„<strong>ç‚¹</strong></li>
<li>python_variable_name æ˜¯Pythonä»£ç å—ä¸­çš„å˜é‡å</li>
</ul>
<p>æ¯”å¦‚åœ¨ä¸Šæ–‡ä¸­Pythonçš„å˜é‡dfï¼Œåœ¨Rä¸­è°ƒç”¨</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="n">py</span><span class="o">$</span><span class="n">df</span>
</code></pre></div>
<figure >
    
        <img src="img/df.png" width="100%" />
    
    
</figure>

<p>ç°åœ¨è°ƒç”¨Pythonå¯¹è±¡dfæ—¶ï¼ŒRä¼šé»˜è®¤å°†å…¶è½¬ä¸ºRå¯¹è±¡ï¼Œæ‰€ä»¥å†…å®¹ä¸€æ ·ï¼Œæ ·å¼ä¼¼ä¹å˜å¥½çœ‹äº†ã€‚</p>
<h3 id="rä»£ç å—ä¸­å¯¼å…¥pythonåº“">Rä»£ç å—ä¸­å¯¼å…¥Pythonåº“</h3>
<p>ä½¿ç”¨osåº“çš„listdirå‡½æ•°æŸ¥è¯¢å½“å‰é¡¹ç›®æ–‡ä»¶å¤¹å†…çš„æ–‡ä»¶åˆ—è¡¨</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">os</span>

<span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">## [&#39;reticulateå­¦ä¹ .md&#39;, &#39;test.csv&#39;, &#39;test.py&#39;, &#39;reticulateå­¦ä¹ .html&#39;, &#39;reticulateå­¦ä¹ _files&#39;, &#39;reticulate.pdf&#39;, &#39;reticulateå­¦ä¹ .Rmd&#39;, &#39;data.py&#39;]
</code></pre></div><p>åœ¨Rä»£ç å—ä¸­å®ç°ä¸Šæ–¹çš„PythonåŠŸèƒ½ï¼Œå¦‚ä¸‹ï¼Œå¾ˆç®€å•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">reticulate</span><span class="p">)</span>

<span class="c1">#å¯¼å…¥åº“</span>
<span class="n">os</span> <span class="o">&lt;-</span> <span class="nf">import</span><span class="p">(</span><span class="s">&#34;os&#34;</span><span class="p">)</span>

<span class="c1">#osåº“çš„listdirå‡½æ•°</span>
<span class="n">os</span><span class="o">$</span><span class="nf">listdir</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">## [1] &#34;reticulateå­¦ä¹ .md&#34;    &#34;test.csv&#34;             &#34;test.py&#34;             
## [4] &#34;reticulateå­¦ä¹ .html&#34;  &#34;reticulateå­¦ä¹ _files&#34; &#34;reticulate.pdf&#34;      
## [7] &#34;reticulateå­¦ä¹ .Rmd&#34;   &#34;data.py&#34;
</code></pre></div><p>å¯ä»¥å‘ç°</p>
<ul>
<li><code>import(&quot;os)</code>ä»£æ›¿äº†<code>import os</code></li>
<li><code>$</code>ä»£æ›¿äº†<code>.</code></li>
<li><code>&lt;-</code> ä»£æ›¿äº† <code>=</code></li>
</ul>
<p>å†ç†Ÿæ‚‰ä¸€ä¸‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">reticulate</span><span class="p">)</span>
<span class="n">pd</span> <span class="o">&lt;-</span> <span class="nf">import</span><span class="p">(</span><span class="s">&#34;pandas&#34;</span><span class="p">)</span>
<span class="n">df2</span> <span class="o">&lt;-</span> <span class="n">pd</span><span class="o">$</span><span class="nf">read_csv</span><span class="p">(</span><span class="s">&#34;test.csv&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&#34;gbk&#34;</span><span class="p">)</span>
<span class="n">df2</span>
</code></pre></div>
<figure >
    
        <img src="img/df2.png" width="100%" />
    
    
</figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨Rä»£ç å—ä¸­æ‰§è¡ŒPythonä»£ç æ—¶ï¼Œé»˜è®¤ä¼šå°†Pythonå¯¹è±¡è½¬ä¸ºRå¯¹è±¡ã€‚</p>
<h3 id="source_python">source_python()</h3>
<p>ä½¿ç”¨reticulateåŒ…ä¸­çš„source_python(&lsquo;pyæ–‡ä»¶è·¯å¾„&rsquo;)å¯ä»¥å¯¼å…¥pyæ–‡ä»¶ä¸­çš„å˜é‡ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨Rä»£ç å—ä¸­ä½¿ç”¨å¤–éƒ¨å˜é‡ã€‚ä¾‹å¦‚æˆ‘åœ¨data.pyä¸­å‡†å¤‡Aå’ŒBä¸¤ä¸ªå­—ç¬¦ä¸²</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">A = &#39;æˆ‘æ˜¯å¼ ä¸‰,&#39;
B = &#39;æ¥è‡ªæ²³åŒ—&#39;
</code></pre></div><p>åœ¨Rä»£ç å—ä¸­è¿è¡Œdata.py</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">reticulate</span><span class="p">)</span>

<span class="nf">source_python</span><span class="p">(</span><span class="s">&#34;data.py&#34;</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">## [1] &#34;æˆ‘æ˜¯å¼ ä¸‰,&#34;
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">print</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">## [1] &#34;æ¥è‡ªæ²³åŒ—&#34;
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">paste0</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">## [1] &#34;æˆ‘æ˜¯å¼ ä¸‰,æ¥è‡ªæ²³åŒ—&#34;
</code></pre></div><h2 id="py_run_file">py_run_file()</h2>
<p>åœ¨Rä»£ç å—ä¸­è¿è¡Œé¡¹ç›®æ–‡ä»¶å¤¹ä¸­çš„test.pyæ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">reticulate</span><span class="p">)</span>
<span class="nf">py_run_file</span><span class="p">(</span><span class="s">&#34;test.py&#34;</span><span class="p">)</span>
</code></pre></div><h1 id="æ•°æ®ç±»å‹å¯¹æ¯”">æ•°æ®ç±»å‹å¯¹æ¯”</h1>
<table>
<thead>
<tr>
<th>R</th>
<th>Python</th>
<th>Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td>Single-element vector</td>
<td>Scalar</td>
<td><code>1</code>, <code>1L</code>, <code>TRUE</code>, <code>&quot;foo&quot;</code></td>
</tr>
<tr>
<td>Multi-element vector</td>
<td>List</td>
<td><code>c(1.0, 2.0, 3.0)</code>, <code>c(1L, 2L, 3L)</code></td>
</tr>
<tr>
<td>List of multiple types</td>
<td>Tuple</td>
<td><code>list(1L, TRUE, &quot;foo&quot;)</code></td>
</tr>
<tr>
<td>Named list</td>
<td>Dict</td>
<td><code>list(a = 1L, b = 2.0)</code>, <code>dict(x = x_data)</code></td>
</tr>
<tr>
<td>Matrix/Array</td>
<td>NumPy ndarray</td>
<td><code>matrix(c(1,2,3,4), nrow = 2, ncol = 2)</code></td>
</tr>
<tr>
<td>Data Frame</td>
<td>Pandas DataFrame</td>
<td><code>data.frame(x = c(1,2,3), y = c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;))</code></td>
</tr>
<tr>
<td>Function</td>
<td>Python function</td>
<td><code>function(x) x + 1</code></td>
</tr>
<tr>
<td>NULL, TRUE, FALSE</td>
<td>None, True, False</td>
<td><code>NULL</code>, <code>TRUE</code>, <code>FALSE</code></td>
</tr>
</tbody>
</table>
<br>
<h1 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h1>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>ç§‘ç ”ç»˜å›¾SciencePlotsåº“</title>
      <link>https://hidadeng.github.io/blog/scienceplots/</link>
      <pubDate>Tue, 23 Nov 2021 18:40:10 +0600</pubDate>
      
      <guid>/blog/scienceplots/</guid>
      <description>ç§‘ç ”å¯è§†åŒ–ç»˜å›¾åŒ…</description>
      <content:encoded><![CDATA[<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="https://github.com/hidadeng/DaDengAndHisPython/blob/master/SciencePlot%E7%A7%91%E7%A0%94%E7%BB%98%E5%9B%BE.zip">https://github.com/hidadeng/DaDengAndHisPython/blob/master/SciencePlotç§‘ç ”ç»˜å›¾.zip</a></p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python">
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">SciencePlots</span>

</code></pre></div><pre><code>Looking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple/
Collecting SciencePlots
  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/c2/44/7b5c0ecd6f2862671a076425546f86ac540bc48c1a618a82d6faa3b26f58/SciencePlots-1.0.9.tar.gz (10 kB)
  Installing build dependencies ... [?25l/
</code></pre>
<p><strong>tips</strong>:</p>
<p>SciencePlotsåº“éœ€è¦ç”µè„‘å®‰è£…LaTexï¼Œå…¶ä¸­</p>
<ul>
<li>MacOSç”µè„‘å®‰è£…MacTex  <a href="https://www.tug.org/mactex/">https://www.tug.org/mactex/</a></li>
<li>Windowsç”µè„‘å®‰è£…MikTex  <a href="https://miktex.org/">https://miktex.org/</a></li>
</ul>
<h2 id="åˆå§‹åŒ–ç»˜å›¾æ ·å¼">åˆå§‹åŒ–ç»˜å›¾æ ·å¼</h2>
<p>åœ¨SciencePlotsåº“ä¸­ç§‘ç ”ç»˜å›¾æ ·å¼éƒ½æ˜¯ç”¨çš„science</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;science&#39;</span><span class="p">)</span>
</code></pre></div><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥åŒæ—¶è®¾ç½®å¤šä¸ªæ ·å¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">([</span><span class="s1">&#39;science&#39;</span><span class="p">,</span> <span class="s1">&#39;ieee&#39;</span><span class="p">])</span>
</code></pre></div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ <strong>ieee</strong> ä¼šè¦†ç›–æ‰ <strong>science</strong> ä¸­çš„æŸäº›å‚æ•°ï¼ˆåˆ—å®½ã€å­—å·ç­‰ï¼‰ï¼Œ ä»¥è¾¾åˆ°ç¬¦åˆ <strong>IEEE</strong>è®ºæ–‡çš„ç»˜å›¾è¦æ±‚</p>
<p>å¦‚æœè¦ä¸´æ—¶ä½¿ç”¨æŸç§ç»˜å›¾æ ·å¼ï¼Œç§‘ç ”ä½¿ç”¨å¦‚ä¸‹è¯­æ³•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#æ³¨æ„ï¼Œæ­¤å¤„æ˜¯è¯­æ³•ç¤ºä¾‹ï¼Œ</span>
<span class="c1">#å¦‚è¦è¿è¡Œï¼Œ è¯·æå‰å‡†å¤‡å¥½xå’Œyçš„æ•°æ®</span>
<span class="k">with</span> <span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">context</span><span class="p">([</span><span class="s1">&#39;science&#39;</span><span class="p">,</span> <span class="s1">&#39;ieee&#39;</span><span class="p">]):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div><h2 id="æ¡ˆä¾‹">æ¡ˆä¾‹</h2>
<p>å®šä¹‰å‡½æ•°æ›²çº¿ï¼Œ å‡†å¤‡æ•°æ®</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="k">def</span> <span class="nf">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">**</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">x</span> <span class="o">**</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">p</span><span class="p">))</span>

<span class="n">pparam</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;Voltage (mV)&#39;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;Current ($\mu$A)&#39;</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.75</span><span class="p">,</span> <span class="mf">1.25</span><span class="p">,</span> <span class="mi">201</span><span class="p">)</span>
</code></pre></div><h3 id="scienceæ ·å¼">scienceæ ·å¼</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">with</span> <span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">context</span><span class="p">([</span><span class="s1">&#39;science&#39;</span><span class="p">]):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">]:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="n">p</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Order&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">autoscale</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="o">**</span><span class="n">pparam</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figures/fig1.pdf&#39;</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figures/fig1.jpg&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/output_12_0.png" width="800" />
    
    
</figure>

<h3 id="scienceieeeæ ·å¼">science+ieeeæ ·å¼</h3>
<p>é’ˆå¯¹IEEEè®ºæ–‡å‡†å¤‡çš„<strong>science+ieee</strong>æ ·å¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">with</span> <span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">context</span><span class="p">([</span><span class="s1">&#39;science&#39;</span><span class="p">,</span> <span class="s1">&#39;ieee&#39;</span><span class="p">]):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">100</span><span class="p">]:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="n">p</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Order&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">autoscale</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="o">**</span><span class="n">pparam</span><span class="p">)</span>
    <span class="c1"># Note: $\mu$ doesn&#39;t work with Times font (used by ieee style)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Current (\textmu A)&#39;</span><span class="p">)</span>  
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figures/fig2a.pdf&#39;</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figures/fig2a.jpg&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/output_14_0.png" width="800" />
    
    
</figure>

<h3 id="sciencescatteræ ·å¼">science+scatteræ ·å¼</h3>
<p><strong>IEEE</strong> è¦æ±‚å›¾å½¢ä»¥é»‘ç™½æ‰“å°æ—¶å¿…é¡»å¯è¯»ã€‚ <strong>ieee</strong> æ ·å¼è¿˜å¯ä»¥å°†å›¾å½¢å®½åº¦è®¾ç½®ä¸ºé€‚åˆIEEEè®ºæ–‡çš„ä¸€åˆ—ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">with</span> <span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">context</span><span class="p">([</span><span class="s1">&#39;science&#39;</span><span class="p">,</span> <span class="s1">&#39;scatter&#39;</span><span class="p">]):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;k--&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">2.2</span><span class="p">,</span> <span class="mf">1.8</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.8</span><span class="p">,</span> <span class="mf">2.2</span><span class="p">],</span>
                    <span class="n">color</span><span class="o">=</span><span class="s1">&#39;dodgerblue&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
        <span class="n">x1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="n">y1</span> <span class="o">=</span> <span class="n">x1</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">r</span><span class="s2">&#34;$^\#$</span><span class="si">{}</span><span class="s2">&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Sample&#39;</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">xlbl</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&#34;$\log_</span><span class="si">{10}</span><span class="s2">\left(\frac{L_\mathrm</span><span class="si">{IR}</span><span class="s2">}{\mathrm</span><span class="si">{L}</span><span class="s2">_\odot}\right)$&#34;</span>
    <span class="n">ylbl</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&#34;$\log_</span><span class="si">{10}</span><span class="s2">\left(\frac{L_\mathrm</span><span class="si">{6.2}</span><span class="s2">}{\mathrm</span><span class="si">{L}</span><span class="s2">_\odot}\right)$&#34;</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">xlbl</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">ylbl</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figures/fig3.pdf&#39;</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figures/fig3.jpg&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/output_16_0.png" width="800" />
    
    
</figure>

<h3 id="dark_background-sciencehigh-vis">dark_background +science+high-vis</h3>
<p>æ‚¨è¿˜å¯ä»¥å°†è¿™äº›æ ·å¼ä¸Matplotlibéšé™„çš„å…¶ä»–æ ·å¼ç»“åˆä½¿ç”¨ã€‚ ä¾‹å¦‚ï¼Œdark_background +science+high-visæ ·å¼ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">with</span> <span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">context</span><span class="p">([</span><span class="s1">&#39;dark_background&#39;</span><span class="p">,</span> <span class="s1">&#39;science&#39;</span><span class="p">,</span> <span class="s1">&#39;high-vis&#39;</span><span class="p">]):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">]:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="n">p</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Order&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">autoscale</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="o">**</span><span class="n">pparam</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figures/fig5.pdf&#39;</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figures/fig5.jpg&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/output_18_0.png" width="800" />
    
    
</figure>

<br>
<p>##äº†è§£è¯¾ç¨‹</p>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>plotnineç»˜å›¾ | pythonçš„ggplot2è¯­æ³•ç»˜å›¾åŒ…</title>
      <link>https://hidadeng.github.io/blog/plotnine/</link>
      <pubDate>Tue, 23 Nov 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/plotnine/</guid>
      <description>ggplot2è¯­æ³•ï¼Œä¸‰è¡Œä»£ç ç»˜å›¾</description>
      <content:encoded><![CDATA[<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="https://github.com/hidadeng/DaDengAndHisPython/blob/master/plotnine%E5%8C%85%E5%AD%A6%E4%B9%A0-Python%E7%89%88%E7%9A%84ggplot2.ipynb">ç‚¹å‡»è·³è½¬åˆ°ä¸‹è½½é“¾æ¥é¡µé¢</a></p>
<br>
<p>Rè¯­è¨€çš„ggplot2ç»˜å›¾èƒ½åŠ›è¶…å¼ºï¼Œpythonè™½æœ‰matplotlibï¼Œä½†æ˜¯è¯­æ³•è‡ƒè‚¿ï¼Œä½¿ç”¨å¤æ‚ï¼Œå…¥é—¨æéš¾ï¼Œseabornçš„å‡ºç°ç¨å¾®æ”¹å–„äº†matplotlibä»£ç é‡é—®é¢˜ï¼Œä½†æ˜¯å®šåˆ¶åŒ–ç¨‹åº¦ä¾ç„¶éœ€è¦å€ŸåŠ©matplotlibï¼Œä½¿ç”¨éš¾åº¦ä¾ç„¶å¾ˆå¤§ã€‚</p>
<p>å¥½æ¶ˆæ¯æ˜¯pythonä¸­æœ‰ä¸€ä¸ªplotnineåŒ…ï¼Œå¯ä»¥å®ç°ç»å¤§å¤šæ•°ggplot2çš„ç»˜å›¾åŠŸèƒ½ï¼Œä¸¤è€…è¯­æ³•ååˆ†ç›¸ä¼¼ï¼ŒRå’ŒPythonçš„è¯­æ³•è½¬æ¢æˆæœ¬å¤§å¤§é™ä½ã€‚</p>
<ul>
<li>plotnineæ–‡æ¡£
<a href="https://plotnine.readthedocs.io/en/latest/">https://plotnine.readthedocs.io/en/latest/</a></li>
<li>Rè¯­è¨€ggplot2æ–‡æ¡£
<a href="https://ggplot2.tidyverse.org/reference/index.html">https://ggplot2.tidyverse.org/reference/index.html</a></li>
</ul>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python">
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">plotnine</span>

</code></pre></div><h2 id="å‡†å¤‡æ•°æ®">å‡†å¤‡æ•°æ®</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine.data</span> <span class="kn">import</span> <span class="n">mpg</span>

<span class="c1">#dataframe</span>
<span class="n">mpg</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">manufacturer</th>
<th style="text-align:left">model</th>
<th style="text-align:right">displ</th>
<th style="text-align:right">year</th>
<th style="text-align:right">cyl</th>
<th style="text-align:left">trans</th>
<th style="text-align:left">drv</th>
<th style="text-align:right">cty</th>
<th style="text-align:right">hwy</th>
<th style="text-align:left">fl</th>
<th style="text-align:left">class</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:left">audi</td>
<td style="text-align:left">a4</td>
<td style="text-align:right">1.8</td>
<td style="text-align:right">1999</td>
<td style="text-align:right">4</td>
<td style="text-align:left">auto(l5)</td>
<td style="text-align:left">f</td>
<td style="text-align:right">18</td>
<td style="text-align:right">29</td>
<td style="text-align:left">p</td>
<td style="text-align:left">compact</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">audi</td>
<td style="text-align:left">a4</td>
<td style="text-align:right">1.8</td>
<td style="text-align:right">1999</td>
<td style="text-align:right">4</td>
<td style="text-align:left">manual(m5)</td>
<td style="text-align:left">f</td>
<td style="text-align:right">21</td>
<td style="text-align:right">29</td>
<td style="text-align:left">p</td>
<td style="text-align:left">compact</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:left">audi</td>
<td style="text-align:left">a4</td>
<td style="text-align:right">2</td>
<td style="text-align:right">2008</td>
<td style="text-align:right">4</td>
<td style="text-align:left">manual(m6)</td>
<td style="text-align:left">f</td>
<td style="text-align:right">20</td>
<td style="text-align:right">31</td>
<td style="text-align:left">p</td>
<td style="text-align:left">compact</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:left">audi</td>
<td style="text-align:left">a4</td>
<td style="text-align:right">2</td>
<td style="text-align:right">2008</td>
<td style="text-align:right">4</td>
<td style="text-align:left">auto(av)</td>
<td style="text-align:left">f</td>
<td style="text-align:right">21</td>
<td style="text-align:right">30</td>
<td style="text-align:left">p</td>
<td style="text-align:left">compact</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:left">audi</td>
<td style="text-align:left">a4</td>
<td style="text-align:right">2.8</td>
<td style="text-align:right">1999</td>
<td style="text-align:right">6</td>
<td style="text-align:left">auto(l5)</td>
<td style="text-align:left">f</td>
<td style="text-align:right">16</td>
<td style="text-align:right">26</td>
<td style="text-align:left">p</td>
<td style="text-align:left">compact</td>
</tr>
</tbody>
</table>
<h2 id="å¿«é€Ÿä½œå›¾qplot">å¿«é€Ÿä½œå›¾qplot</h2>
<p>æˆ‘ä»¬å…ˆç›´æ¥çœ‹æœ€ç®€å•å¥½ç”¨çš„å¿«é€Ÿä½œå›¾å‡½æ•°qplot(x, y, data)</p>
<ul>
<li>æ¨ªåæ ‡displ</li>
<li>çºµåæ ‡cty</li>
<li>æ•°æ®mpg</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine</span> <span class="kn">import</span> <span class="n">qplot</span>

<span class="n">qplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> 
      <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cty&#39;</span><span class="p">,</span>
      <span class="n">data</span><span class="o">=</span><span class="n">mpg</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_6_0.png" width="800" />
    
    
</figure>

<h2 id="ggplotå›¾å±‚">ggplotå›¾å±‚</h2>
<p>qplotæ˜¯å¿«é€Ÿä½œå›¾å‡½æ•°ï¼Œå¦‚æœæƒ³è®©å›¾æ›´å¥½çœ‹ï¼Œè¿›è¡Œç§äººè®¢åˆ¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦è¿›è¡Œå›¾å±‚è®¾è®¡</p>
<p>é¦–å…ˆè®¾ç½®ggplotå›¾å±‚ï¼ˆç›¸å½“äºä¹°äº†ä¸€ä¸ªé«˜çº§ç”»å¸ƒï¼‰ï¼Œ</p>
<ul>
<li>æ•°æ®mpg</li>
<li>æ¨ªåæ ‡xè½´ä¸ºdispl</li>
<li>çºµåæ ‡yè½´cty</li>
</ul>
<p>åœ¨plotnineä¸­ï¼Œå˜é‡æ‰€å¯¹åº”çš„æ•°æ®å‡å¯é€šè¿‡å­—æ®µåè°ƒç”¨</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine</span> <span class="kn">import</span> <span class="n">ggplot</span><span class="p">,</span> <span class="n">geom_point</span><span class="p">,</span> <span class="n">aes</span>

<span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cty&#39;</span><span class="p">),</span> <span class="n">mpg</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_8_0.png" width="800" />
    
    
</figure>

<h2 id="å›¾å±‚å åŠ ">å›¾å±‚å åŠ </h2>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå·²ç»ç»˜åˆ¶å‡ºä¸€ä¸ªç©ºçš„ggplotå›¾å±‚ï¼Œxè½´ä¸ºdisplï¼Œyè½´ä¸ºctyã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ç»™è¿™ä¸ªå›¾å±‚ä¸ŠåŠ ä¸Šæ•°æ®å¯¹åº”çš„æ•£ç‚¹ï¼Œä½¿ç”¨geom_point()ç›´æ¥è¿½åŠ åœ¨ggplotå›¾å±‚ä¹‹ä¸Šå³å¯ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cty&#39;</span><span class="p">),</span> <span class="n">mpg</span><span class="p">)</span>
 <span class="o">+</span> <span class="n">geom_point</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_10_0.png" width="800" />
    
    
</figure>

<h2 id="color">color</h2>
<p>åœ¨ä¸Šå›¾ä¸­ï¼Œæ•£ç‚¹æ˜¯æ²¡æœ‰åŒºåˆ†æ¯è¾†è½¦çš„æ°”ç¼¸æ•°cylã€‚</p>
<p>åœ¨geom_point()ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§æ°”ç¼¸æ•°cylåˆ†é—¨åˆ«ç±»ï¼ŒæŒ‰ç…§é¢œè‰²æ˜¾ç¤ºå‡ºæ¥</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cty&#39;</span><span class="p">),</span> <span class="n">mpg</span><span class="p">)</span>
 <span class="o">+</span> <span class="n">geom_point</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;cyl&#39;</span><span class="p">))</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_12_0.png" width="800" />
    
    
</figure>

<p>ä¸Šå›¾æŒºå¥½çœ‹çš„ï¼Œæœ‰æ—¶å€™éœ€è¦ç»˜åˆ¶çš„å­—æ®µæ˜¯ç¦»æ•£å‹æ•°å€¼ï¼Œä½†æ˜¯ä¸Šè‰²åå¯èƒ½ä¸å¤Ÿæ˜æ˜¾ï¼Œéœ€è¦å£°æ˜è¯¥å­—æ®µä¸ºç¦»æ•£å‹ã€‚è¿™æ—¶å€™ç”¨factor()æ¥å‘Šè¯‰plotnineï¼Œè¿™ä¸ªå­—æ®µæ˜¯ç¦»æ•£å‹æ•°å€¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cty&#39;</span><span class="p">),</span> <span class="n">mpg</span><span class="p">)</span>
 <span class="o">+</span> <span class="n">geom_point</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;factor(cyl)&#39;</span><span class="p">))</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_14_0.png" width="800" />
    
    
</figure>

<h2 id="size">size</h2>
<p>æœ‰æ—¶å€™ä¸ºäº†å¢åŠ å¯è§†åŒ–æ˜¾ç¤ºçš„ç»´åº¦æ•°ï¼Œè¿˜å¯ä»¥è€ƒè™‘åŠ å…¥ç‚¹çš„å¤§å°size</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cty&#39;</span><span class="p">),</span> <span class="n">mpg</span><span class="p">)</span>
 <span class="o">+</span> <span class="n">geom_point</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="s1">&#39;hwy&#39;</span><span class="p">))</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_16_0.png" width="800" />
    
    
</figure>

<h2 id="æ¢¯åº¦è‰²">æ¢¯åº¦è‰²</h2>
<p>å¦‚æœä½ æƒ³è‡ªå·±è®¾ç½®é¢œè‰²çš„æ¢¯åº¦ï¼Œå¯ä»¥é€šè¿‡scale_color_gradientè®¾ç½®</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine</span> <span class="kn">import</span> <span class="n">scale_color_gradient</span>

<span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cty&#39;</span><span class="p">),</span> <span class="n">mpg</span><span class="p">)</span>
<span class="o">+</span> <span class="n">geom_point</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;hwy&#39;</span><span class="p">))</span>
<span class="o">+</span> <span class="n">scale_color_gradient</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_18_0.png" width="800" />
    
    
</figure>

<h2 id="æ¡å½¢å›¾">æ¡å½¢å›¾</h2>
<p>plotnineä¸­å¯ç»˜åˆ¶çš„å›¾æœ‰å¾ˆå¤šï¼Œåˆšåˆšå·²ç»è®²äº†æ•£ç‚¹å›¾ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹plotnineä¸­çš„æ¡å½¢å›¾ã€‚</p>
<p>é¦–å…ˆå‡†å¤‡ä¸€ä¸‹æ•°æ®</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;variable&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;income&#39;</span><span class="p">,</span> <span class="s1">&#39;income&#39;</span><span class="p">,</span> <span class="s1">&#39;income&#39;</span><span class="p">,</span> <span class="s1">&#39;income&#39;</span><span class="p">],</span>
    <span class="s1">&#39;category&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Female&#39;</span><span class="p">,</span> <span class="s1">&#39;Male&#39;</span><span class="p">,</span> <span class="s1">&#39;1-24&#39;</span><span class="p">,</span> <span class="s1">&#39;25-54&#39;</span><span class="p">,</span> <span class="s1">&#39;55+&#39;</span><span class="p">,</span> <span class="s1">&#39;Lo&#39;</span><span class="p">,</span> <span class="s1">&#39;Lo-Med&#39;</span><span class="p">,</span> <span class="s1">&#39;Med&#39;</span><span class="p">,</span> <span class="s1">&#39;High&#39;</span><span class="p">],</span>
    <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span>
<span class="p">})</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;variable&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;variable&#39;</span><span class="p">],</span> <span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;income&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;category&#39;</span><span class="p">],</span> <span class="n">categories</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;category&#39;</span><span class="p">])</span>

<span class="n">df</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">variable</th>
<th style="text-align:left">category</th>
<th style="text-align:right">value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:left">gender</td>
<td style="text-align:left">Female</td>
<td style="text-align:right">60</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">gender</td>
<td style="text-align:left">Male</td>
<td style="text-align:right">40</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:left">age</td>
<td style="text-align:left">1-24</td>
<td style="text-align:right">50</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:left">age</td>
<td style="text-align:left">25-54</td>
<td style="text-align:right">30</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:left">age</td>
<td style="text-align:left">55+</td>
<td style="text-align:right">20</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:left">income</td>
<td style="text-align:left">Lo</td>
<td style="text-align:right">10</td>
</tr>
<tr>
<td style="text-align:right">6</td>
<td style="text-align:left">income</td>
<td style="text-align:left">Lo-Med</td>
<td style="text-align:right">25</td>
</tr>
<tr>
<td style="text-align:right">7</td>
<td style="text-align:left">income</td>
<td style="text-align:left">Med</td>
<td style="text-align:right">25</td>
</tr>
<tr>
<td style="text-align:right">8</td>
<td style="text-align:left">income</td>
<td style="text-align:left">High</td>
<td style="text-align:right">40</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine</span> <span class="kn">import</span> <span class="n">ggplot</span><span class="p">,</span> <span class="n">aes</span><span class="p">,</span> <span class="n">geom_text</span><span class="p">,</span> <span class="n">position_dodge</span><span class="p">,</span> <span class="n">geom_point</span>

<span class="c1">#è°ƒæ•´æ–‡æœ¬ä½ç½®</span>
<span class="n">dodge_text</span> <span class="o">=</span> <span class="n">position_dodge</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>                              <span class="c1"># new</span>

<span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;variable&#39;</span><span class="p">,</span> 
                <span class="n">y</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> 
                <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">))</span> <span class="c1">#ç±»åˆ«å¡«å……é¢œè‰²</span>
 <span class="o">+</span> <span class="n">geom_col</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s1">&#39;dodge&#39;</span><span class="p">,</span> 
            <span class="n">show_legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>   <span class="c1"># modified</span>
 <span class="o">+</span> <span class="n">geom_text</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">y</span><span class="o">=-</span><span class="mf">.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">),</span>                          <span class="c1"># new</span>
             <span class="n">position</span><span class="o">=</span><span class="n">dodge_text</span><span class="p">,</span>
             <span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span>  <span class="c1">#æ–‡æœ¬é¢œè‰²</span>
             <span class="n">size</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>   <span class="c1">#å­—å·</span>
             <span class="n">angle</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="c1">#æ–‡æœ¬çš„è§’åº¦</span>
             <span class="n">va</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">)</span>
    
 <span class="o">+</span> <span class="n">lims</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">60</span><span class="p">))</span>                                                 <span class="c1"># new</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_22_0.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine.data</span> <span class="kn">import</span> <span class="n">economics_long</span>

<span class="n">economics_long</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">date</th>
<th style="text-align:left">variable</th>
<th style="text-align:right">value</th>
<th style="text-align:right">value01</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:left">1967-07-01 00:00:00</td>
<td style="text-align:left">pce</td>
<td style="text-align:right">507.4</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">1967-08-01 00:00:00</td>
<td style="text-align:left">pce</td>
<td style="text-align:right">510.5</td>
<td style="text-align:right">0.000266001</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:left">1967-09-01 00:00:00</td>
<td style="text-align:left">pce</td>
<td style="text-align:right">516.3</td>
<td style="text-align:right">0.00076368</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:left">1967-10-01 00:00:00</td>
<td style="text-align:left">pce</td>
<td style="text-align:right">512.9</td>
<td style="text-align:right">0.000471937</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:left">1967-11-01 00:00:00</td>
<td style="text-align:left">pce</td>
<td style="text-align:right">518.1</td>
<td style="text-align:right">0.000918132</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine</span> <span class="kn">import</span> <span class="n">ggplot</span><span class="p">,</span> <span class="n">aes</span><span class="p">,</span> <span class="n">geom_line</span>

<span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">economics_long</span><span class="p">,</span> <span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;value01&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;variable&#39;</span><span class="p">))</span>
 <span class="o">+</span> <span class="n">geom_line</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_25_0.png" width="800" />
    
    
</figure>

<p>plotnineç›®å‰å·²ç»æ”¯æŒç»å¤§å¤šæ•°ggplot2ï¼Œä½†æ˜¯æ–‡æ¡£æ–¹é¢æ²¡æœ‰ggplot2å…¨ï¼Œæ‰€ä»¥å­¦ä¹ plotnineæ—¶å¯ä»¥å‚è€ƒggplot2ã€‚</p>
<ul>
<li>plotnineæ–‡æ¡£
<a href="https://plotnine.readthedocs.io/en/latest/">https://plotnine.readthedocs.io/en/latest/</a></li>
<li>Rè¯­è¨€ggplot2æ–‡æ¡£
<a href="https://ggplot2.tidyverse.org/reference/index.html">https://ggplot2.tidyverse.org/reference/index.html</a></li>
</ul>
<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p>[ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ](</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>è¯»å®Œæœ¬æ–‡ä½ å°±äº†è§£ä»€ä¹ˆæ˜¯æ–‡æœ¬åˆ†æ</title>
      <link>https://hidadeng.github.io/blog/read_this_you_will_know_what_is_text_mining/</link>
      <pubDate>Mon, 22 Nov 2021 23:40:10 +0600</pubDate>
      
      <guid>/blog/read_this_you_will_know_what_is_text_mining/</guid>
      <description>ä¸“æ³¨ç»æµç®¡ç†ç§‘ç ”é¢†åŸŸçš„Pythonæ•°æ®åˆ†æï¼Œæ¶µç›–æ•°æ®åˆ†æä¸»è¦ç¯èŠ‚ï¼Œå¦‚Pythonç½‘ç»œçˆ¬è™«ã€Pandasæ•°æ®æ¢ç´¢æ€§åˆ†æã€ä¸­è‹±æ–‡æ–‡æœ¬æ•°æ®æ¸…æ´—ã€æœºå™¨å­¦ä¹ ä¸è‡ªç„¶è¯­è¨€å¤„ç†ã€‚å¼€å‘æœ‰ä¸“é—¨çš„Pythonç»æµç®¡ç†æ–‡æœ¬æ•°æ®æŒ–æ˜è§†é¢‘è¯¾ç¨‹</description>
      <content:encoded><![CDATA[<h2 id="ä¸€æ–‡æœ¬çš„ä½œç”¨">ä¸€ã€æ–‡æœ¬çš„ä½œç”¨</h2>
<p>æ–‡æœ¬æ¶‰åŠä¸¤ä¸ªä¸»ä½“ï¼Œå³<strong>æ–‡æœ¬ç”Ÿäº§è€…</strong>å’Œ<strong>æ–‡æœ¬æ¶ˆè´¹è€…</strong>ï¼š</p>
<ul>
<li>æ–‡æœ¬ç”Ÿäº§è€…: ç”Ÿæˆæ–‡æœ¬çš„ä¸»ä½“ï¼›ä¼ é€’ç”Ÿäº§è€…æƒ³è¡¨è¾¾çš„å†…å®¹ï¼Œå¯èƒ½ä¹Ÿä¼šæ½œåœ¨è•´å«ç€ç”Ÿäº§è€…çš„ä¸€äº›ç‰¹è´¨å±æ€§</li>
<li>æ–‡æœ¬æ¶ˆè´¹è€…: é˜…è¯»æ–‡æœ¬çš„ä¸»ä½“ï¼›æ¶ˆè´¹è€…é˜…è¯»è¿™æ®µæ–‡æœ¬æ—¶ï¼Œæ–‡æœ¬åˆå¯¹æ¶ˆè´¹è€…è®¤çŸ¥æ´»åŠ¨äº§ç”Ÿå½±å“ã€‚</li>
</ul>
<p>åœ¨å¤§æ•°æ®çš„ä»Šå¤©ï¼Œé€šè¿‡äº’è”ç½‘è¶…æ–‡æœ¬é“¾æ¥ï¼Œæ— æ•°çš„<strong>ä¸ªäººã€å›¢ä½“ã€å…¬å¸ã€æ”¿åºœ</strong>ç­‰ä¸åŒç»„ç»‡å½¢æ€çš„ä¸»ä½“å‡æ·±æ·±åµŒå…¥åˆ°äº’è”ç½‘ä¸–ç•Œï¼Œåœ¨ç½‘ç»œä¸–ç•Œä¸­ç•™ä¸‹äº†å¤§é‡çš„æ–‡æœ¬ã€‚<strong>ç¤¾ä¼šã€ç®¡ç†ã€ç»æµã€è¥é”€ã€é‡‘è</strong>ç­‰ä¸åŒå­¦ç§‘ï¼Œå‡å¯ä»¥ç ”ç©¶ç½‘ç»œä¸Šæµ·é‡çš„æ–‡æœ¬ï¼Œæ‰©å®½çš„ç ”ç©¶å¯¹è±¡å’Œç ”ç©¶é¢†åŸŸã€‚ä¸‹é¢å¤§éƒ¨åˆ†å†…å®¹æ˜¯ä»æ”¿æ²»å­¦å’Œç»ç®¡é¢†åŸŸçš„ä¸¤ä»½æ–‡æ¡£ç¿»è¯‘æ¥ï¼Œæˆ‘è§‰å¾—è®²çš„æŒºæ˜ç™½çš„ï¼Œå…¶ä¸­åŠ å…¥äº†æˆ‘çš„ä¸€äº›ç†è§£å’Œæ‰©å……ã€‚</p>
<h2 id="äºŒ-ç†è§£æ–‡æœ¬">äºŒã€ ç†è§£æ–‡æœ¬</h2>
<ul>
<li>text as text åŸå§‹çš„æ–‡æœ¬ï¼Œå®šæ€§çš„æ–‡æœ¬</li>
<li>textual data(text as data)  é‡åŒ–åçš„æ–‡æœ¬æ•°æ®ï¼Œå¯å®šé‡</li>
</ul>
<h3 id="21-text-as-text">2.1 text as text</h3>
<blockquote>
<p>text as text åŸå§‹çš„æ–‡æœ¬ï¼Œå®šæ€§çš„æ–‡æœ¬</p>
</blockquote>
<p>æ–‡æœ¬çš„é‡ç‚¹æ˜¯ä¼ é€’ç€æŸç§ä¸œè¥¿ï¼Œä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œæ‰€æœ‰å½¢å¼çš„æ–‡æœ¬éƒ½åŒ…å«å¯ä»¥è¢«è§†ä¸ºæ•°æ®å½¢å¼çš„ä¿¡æ¯ã€‚å› æ­¤ï¼Œæ–‡æœ¬æ€»æ˜¯ä»¥æŸç§æ–¹å¼æä¾›ä¿¡æ¯ï¼ˆå³ä½¿æˆ‘ä»¬ä¸äº†è§£å¦‚ä½•æ“ä½œï¼‰ã€‚ä½†æ˜¯ï¼Œè¨€è¯­æ´»åŠ¨çš„ä¸»è¦ç›®æ ‡ä¸æ˜¯è®°å½•ä¿¡æ¯ï¼Œè€Œæ˜¯è¿›è¡Œäº¤æµï¼šä¼ è¾¾æ€æƒ³ï¼ŒæŒ‡ä»¤ï¼ŒæŸ¥è¯¢ç­‰ã€‚æˆ‘ä»¬å¯ä»¥è®°å½•ä¸‹æ¥å¹¶å°†å…¶è§†ä¸ºæ•°æ®ï¼Œä½†æ˜¯å°†æˆ‘ä»¬çš„æƒ³æ³•æˆ–æ€æƒ³è¡¨è¾¾ä¸ºå•è¯å’Œå¥å­çš„ç›®çš„ä¸»è¦æ˜¯äº¤æµï¼Œè€Œä¸æ˜¯å°†æˆ‘ä»¬çš„æƒ³æ³•æˆ–æ€æƒ³è®°å½•ä¸ºæ•°æ®å½¢å¼ã€‚å¤§å¤šæ•°æ•°æ®æ˜¯è¿™æ ·çš„ï¼šå®ƒè¡¨å¾çš„æ´»åŠ¨ä¸æ•°æ®æœ¬èº«å®Œå…¨ä¸åŒã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨ç»æµå­¦ä¸­ï¼Œå¯èƒ½æ˜¯æˆ‘ä»¬æƒ³è¦åˆ»ç”»çš„ç»æµäº¤æ˜“ï¼ˆä½¿ç”¨ä»·å€¼åª’ä»‹äº¤æ¢å•†å“æˆ–æœåŠ¡ï¼‰ï¼Œè€Œæ•°æ®æ˜¯ä»¥æŸç§èšåˆå½¢å¼å¯¹è¿™äº›äº¤æ˜“è¿›è¡ŒæŠ½è±¡ï¼Œè¿™æœ‰åŠ©äºæˆ‘ä»¬ç†è§£äº¤æ˜“çš„æ„ä¹‰ã€‚é€šè¿‡å°±æŠ½è±¡çš„ç›¸å…³ç‰¹å¾è¾¾æˆå…±è¯†ï¼Œæˆ‘ä»¬å¯ä»¥è®°å½•å¹¶åˆ†æäººç±»æ´»åŠ¨ï¼Œä¾‹å¦‚åˆ¶é€ ä¸šï¼ŒæœåŠ¡ä¸šæˆ–å†œä¸šã€‚ä»é€šä¿¡è¡Œä¸ºä¸­æå–æ–‡æœ¬æ•°æ®ç‰¹å¾çš„è¿‡ç¨‹éµå¾ªç›¸åŒçš„è¿‡ç¨‹ï¼Œä½†æœ‰ä¸€ä¸ªä¸»è¦åŒºåˆ«ï¼šç”±äºåŸå§‹æ–‡æœ¬å¯ä»¥ç›´æ¥é€šè¿‡è®°å½•çš„è¯­è¨€ä¸æˆ‘ä»¬äº¤è°ˆï¼Œå› æ­¤æ–‡æœ¬é¦–å…ˆä¸éœ€è¦è¿›è¡Œå¤„ç†æˆ–æŠ½è±¡åŒ–å¾…åˆ†æã€‚ä½†æ˜¯ï¼Œ<strong>æˆ‘åœ¨è¿™é‡Œçš„è®ºç‚¹æ˜¯ï¼Œç‰¹å¾æŠ½è±¡çš„è¿‡ç¨‹æ˜¯å°†æ–‡æœ¬è§†ä¸ºæ•°æ®è€Œä¸æ˜¯ç›´æ¥å°†å…¶è§†ä¸ºæ–‡æœ¬çš„æ–¹æ³•çš„ç‹¬ç‰¹ä¹‹å¤„</strong>ã€‚</p>
<p><strong>å…·æœ‰è®½åˆºæ„å‘³çš„æ˜¯ï¼Œåªæœ‰å½“æˆ‘ä»¬ç ´åäº†ç›´æ¥ç†è§£æ–‡æœ¬çš„èƒ½åŠ›æ—¶ï¼Œæ‰æœ‰å¯èƒ½åˆ©ç”¨æ–‡æœ¬çš„æ•°æ®è·å–æ´å¯ŸåŠ›</strong>ã€‚ä¸ºäº†ä½¿å®ƒä½œä¸ºæ•°æ®æœ‰ç”¨ï¼Œæˆ‘ä»¬å¿…é¡»æ¶ˆé™¤åŸå§‹æ–‡æœ¬çš„ç»“æ„ï¼Œå°†æ–‡æœ¬è½¬æ¢ä¸ºç»“æ„åŒ–çš„è¡¨æ ¼æ•°æ®ã€‚å®šé‡åˆ†ææ˜¯ç†è§£éè¯­è¨€æ•°æ®çš„èµ·ç‚¹ï¼›å¦ä¸€æ–¹é¢ï¼Œéç»“æ„çš„æ–‡æœ¬å˜æˆä¸‘é™‹è¡¨æ ¼æ•°æ®çš„è¿‡ç¨‹ï¼Œå‡ºäºç»Ÿè®¡åˆ†ææˆ–æœºå™¨å­¦ä¹ ç›®çš„ï¼Œæˆ‘ä»¬ç»å¸¸è´¨ç–‘è¿™ä¸€è¿‡ç¨‹ä¸¢å¤±äº†ä»€ä¹ˆä¿¡æ¯ã€‚</p>
<p>æœºå™¨æ˜¯æ„šè ¢çš„ï¼Œä½†æ˜¯å°†æ–‡æœ¬è§†ä¸ºæ•°æ®æ„å‘³ç€è®©æ„šè ¢çš„æœºå™¨å¤„ç†å¹¶å¯èƒ½åˆ†ææˆ‘ä»¬çš„æ–‡æœ¬ã€‚å…³é”®æ˜¯ï¼Œä¸ºäº†<strong>å°†æ–‡æœ¬ä½œä¸ºæ•°æ®</strong> è€Œä¸æ˜¯<strong>æ–‡æœ¬ä»…ä»…æ˜¯æ–‡æœ¬</strong>ï¼Œ<strong>æˆ‘ä»¬å¿…é¡»ç ´ååŸå§‹æ–‡æœ¬çš„ç›´æ¥å¯è§£é‡Šæ€§ï¼Œä½†ç›®çš„æ˜¯ä»å…¶æ ·å¼åŒ–ç‰¹å¾ä¸­è¿›è¡Œæ›´ç³»ç»Ÿï¼Œæ›´å¤§è§„æ¨¡çš„æ¨æ–­</strong>ã€‚æˆ‘ä»¬åº”è¯¥åšå®šä¸ç§»åœ°è®¤è¯†åˆ°è¿™ä¸€è¿‡ç¨‹ï¼Œä½†ä¹Ÿä¸è¦å› æ­¤è€Œå¯é£Ÿä¸å®‰ï¼Œå› ä¸º<strong>å°†æ–‡æœ¬ä½œä¸ºæ•°æ®è¿›è¡Œåˆ†æçš„é‡ç‚¹æ°¸è¿œä¸æ˜¯è§£é‡Šæ•°æ®è€Œæ˜¯æŒ–æ˜å…¶æ·±å±‚æ¬¡çš„æ¨¡å¼</strong>ã€‚æ•°æ®æŒ–æ˜æ˜¯ä¸€ä¸ªç ´åæ€§çš„è¿‡ç¨‹-éšä¾¿é—®é—®å“ªä¸ªçŸ¿å±±-ä¸ºäº†å¼€é‡‡å…¶å®è´µèµ„æºï¼Œå¼€é‡‡çŸ¿äº§èµ„æºä¸å¯é¿å…ä¼šç ´ååœ°è¡¨å½¢æ€å’Œç¯å¢ƒã€‚</p>
<h3 id="22-latent-versus-manifest-characteristics-from-textual-data">2.2 Latent versus manifest characteristics from textual data</h3>
<blockquote>
<p>textual data(text as data)  é‡åŒ–åçš„æ–‡æœ¬æ•°æ®ï¼Œå¯å®šé‡çš„æ•°æ®ã€‚æ‰€ä»¥å°æ ‡é¢˜æˆ‘ç¿»è¯‘ä¸ºâ€œé‡åŒ–åçš„æ–‡æœ¬æ•°æ®éšè—çš„ä¿¡æ¯vsç›´è§‚å¯è§çš„ä¿¡æ¯â€ï¼Œ</p>
</blockquote>
<p>åœ¨æ”¿æ²»å­¦é¢†åŸŸï¼Œæˆ‘ä»¬é€šå¸¸æœ€æ„Ÿå…´è¶£çš„ä¸æ˜¯æ–‡æœ¬æœ¬èº«ï¼Œè€Œæ˜¯æ–‡æœ¬é€æ¼ç»™æˆ‘ä»¬æœ‰å…³ä½œè€…çš„ä¸€äº›éšè—ç‰¹æ€§ã€‚åœ¨æ”¿æ²»ï¼ˆä»¥åŠå¿ƒç†å­¦ï¼‰ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬æœ‰å…³æ”¿æ²»å’Œç¤¾ä¼šè¡Œä¸ºè€…çš„ä¸€äº›é‡è¦ç†è®ºï¼Œå¾ˆå¤šæ—¶å€™ç›´æ¥è§‚å¯Ÿè¡Œä¸ºæ´»åŠ¨å¾ˆéš¾è§‚å¯Ÿåˆ°å…¶å†…åœ¨çš„å“è´¨ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæ„è¯†å½¢æ€æ˜¯ç ”ç©¶æ”¿æ²»ç«äº‰å’Œæ”¿æ²»åå¥½çš„åŸºç¡€ï¼Œä½†æ˜¯æˆ‘ä»¬æ²¡æœ‰ç›´æ¥çš„è¡¡é‡å·¥å…·æ¥è®°å½•ä¸ªäººæˆ–æ”¿å…šæœ‰å…³â€œç¤¾ä¼šå’Œé“å¾·è‡ªç”±æ”¿ç­–ä¸ä¿å®ˆæ”¿ç­–â€çš„ç›¸å¯¹åå¥½ã€‚å…¶ä»–åå¥½ï¼ŒåŒ…æ‹¬æ”¯æŒæˆ–åå¯¹ç‰¹å®šæ”¿ç­–ï¼Œå¦‚1846å¹´åºŸé™¤äº†è‹±å›½çš„ã€Šç‰ç±³æ³•ã€‹ï¼ˆSchonhardt-Baileyï¼Œ2003å¹´ï¼‰ï¼›åœ¨å…³äºã€Šè±è‚¯å…¬çº¦ã€‹çš„è¾©è®ºä¸­æ”¯æŒæˆ–åå¯¹è¿›ä¸€æ­¥çš„æ¬§æ´²ä¸€ä½“åŒ–ï¼ˆBenoitç­‰ï¼Œ2005ï¼‰ï¼›å†æ¯”å¦‚æ”¯æŒæˆ–åå¯¹ä¸ä¿¡ä»»è¿åŠ¨ï¼ˆLaverå’ŒBenoitï¼Œ2002å¹´ï¼‰ã€‚</p>
<p>è¿™äº›åå¥½æ˜¯ä½œä¸ºæ”¿æ²»è¡Œä¸ºè€…çš„å†…éƒ¨çŠ¶æ€è€Œå­˜åœ¨çš„ï¼Œæ— è®ºè¿™äº›è¡Œä¸ºè€…æ˜¯ç«‹æ³•è€…ï¼Œæ”¿å…šï¼Œä»£è¡¨è¿˜æ˜¯å€™é€‰äººï¼Œéƒ½æ— æ³•ç›´æ¥è§‚å¯Ÿã€‚<strong>éè¨€è¯­è¡Œä¸ºæŒ‡æ ‡ä¹Ÿå¯ç”¨äºæ¨æ–­è¿™äº›ä¿¡æ¯ï¼Œä½†äº‹å®è¡¨æ˜ï¼Œæ”¿æ²»è¡Œä¸ºè€…æ‰€è¯´çš„è¯æ¯”å…¶ä»–è¡Œä¸ºå½¢å¼æ›´ä¸ºçœŸè¯šã€‚</strong></p>
<p>å› æ­¤ï¼Œ<strong>æ–‡æœ¬æ•°æ®ï¼ˆTextual dataï¼‰å¯èƒ½åŒ…å«æœ‰å…³å–å‘å’Œä¿¡å¿µçš„é‡è¦ä¿¡æ¯ï¼Œå¯¹äºè¿™äº›å–å‘å’Œä¿¡å¿µï¼Œéè¯­è¨€å½¢å¼çš„è¡Œä¸ºå¯èƒ½ä¼šå……å½“ä¸è‰¯æŒ‡æ ‡ã€‚é•¿æœŸä»¥æ¥ï¼Œå¿ƒç†å­¦é¢†åŸŸä¹Ÿä¸€ç›´å°†è¨€è¯­è¡Œä¸ºä½œä¸ºå¯è§‚å¯Ÿåˆ°çš„æ½œåœ¨å…´è¶£çŠ¶æ€çš„æš—ç¤ºï¼Œä¾‹å¦‚äººæ ¼ç‰¹è´¨</strong>ï¼ˆä¾‹å¦‚Tausczikå’ŒPennebakerï¼Œ2010å¹´ï¼‰ã€‚ç¼ºå°‘å¢å¼ºçš„è¯¢é—®æŠ€æœ¯æˆ–å¤´è„‘é˜…è¯»æŠ€æœ¯æ¥è¯†åˆ«æ”¿æ²»å’Œç¤¾ä¼šè¡Œä¸ºè€…çš„åå¥½ï¼Œä¿¡å¿µï¼Œæ„å›¾ï¼Œåè§æˆ–ä¸ªæ€§ï¼Œä¸‹ä¸€ä¸ªæœ€ä½³é€‰æ‹©æ˜¯æ ¹æ®å…¶è¯´è¯æˆ–ä¹¦å†™çš„å†…å®¹æ¥æ”¶é›†å’Œåˆ†ææ•°æ®ã€‚<strong>å…³æ³¨çš„å¯¹è±¡ä¸æ˜¯æ–‡æœ¬åŒ…å«çš„å†…å®¹ï¼Œè€Œæ˜¯å…¶å†…å®¹ä½œä¸ºæœ‰å…³æ½œåœ¨ç‰¹å¾çš„æ•°æ®æ‰€æ­ç¤ºçš„å†…å®¹ï¼Œè¿™äº›æ½œåœ¨ç‰¹å¾ä¸ºå…¶æä¾›äº†å¯è§‚å¯Ÿçš„å«ä¹‰</strong>ã€‚æœ€åä¸€å¥è¯æ¯”è¾ƒéš¾ç†è§£ï¼Œå¯ä»¥ç†è§£ä¸ºä¸‡äº‹ä¸‡ç‰©æœ‰è”ç³»ï¼Œé€šè¿‡è”ç³»æ€ç»´æ¥æŒ–æ˜æ–‡æœ¬ä¸­çš„ä¿¡æ¯ã€‚</p>
<p>æ–‡æœ¬æ•°æ®(Textual data)è¿˜å¯èƒ½å…·æœ‰è¾ƒä¸ºæ˜æ˜¾çš„ç‰¹å¾ï¼Œä¾‹å¦‚ï¼Œæ”¿æ²»ä¼ æ’­çš„è®¸å¤šé¢†åŸŸéƒ½ä¸æ–‡æœ¬æ‰€æŒ‡å‡ºçš„æ½œåœ¨ç‰¹å¾æ— å…³ï¼Œè€Œä¸æ–‡æœ¬æœ¬èº«æ‰€åŒ…å«çš„ä¼ æ’­å½¢å¼å’Œæ€§è´¨æœ‰å…³ã€‚ä¸¾ä¸€ä¸ªç»å…¸çš„ä¾‹å­ï¼Œ<strong>åœ¨ä¸€ä¸ªè‘—åçš„æ”¿æ²»å±€å§”å‘˜å¯¹æ–¯å¤§æ—è¯è¾°70å‘¨å¹´ä¹‹é™…çš„æ–‡ç« çš„ç ”ç©¶ä¸­ï¼Œè±ç‰¹æ–¯ï¼Œä¼¯åŠªç‰¹å’ŒåŠ ç´¢å¤«ï¼ˆ1951ï¼‰èƒ½å¤Ÿè¡¡é‡å„å›¢ä½“åœ¨å…±äº§ä¸»ä¹‰æ„è¯†å½¢æ€æ–¹é¢çš„å·®å¼‚</strong>ã€‚åœ¨è¿™ä¸€æ”¿æ²»äº‹ä»¶ä¸­ï¼Œè¿™äº›ä¿¡æ¯ä¸ä»…é¢„ç¤ºäº†æ½œåœ¨çš„æ–¹å‘ï¼Œè€Œä¸”è¿˜é¢„ç¤ºäº†åœ¨å¯é¢„è§çš„æ–¯å¤§æ—æ­»åäº‹ä»¶ä¸­æœ‰å…³é¢†å¯¼æƒæ–—äº‰çš„æŸç§æ”¿æ²»åŠ¨ä½œã€‚è¿™äº›ä¿¡æ¯æœ¬èº«æ˜¯é‡è¦çš„ï¼Œ<strong>è¿™äº›ä¿¡æ¯åªèƒ½ä»æ¯ä¸ªæ”¿æ²»å±€å§”å‘˜æ’°å†™çš„å…¬å¼€æ–‡ç« ä¸­æœé›†è€Œæ¥ï¼Œå®ƒä»¬å¿…é¡»å……åˆ†äº†è§£å°†åœ¨å…šå’Œè‹è”è‹ç»´åŸƒæ–°é—»ï¼Œå¹¶ç”±å…¶ä»–æ”¿æƒå‚ä¸è€…è§£é‡Šä¸ºä¿¡å·</strong>ã€‚å†ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬å¯¹ä¸€ä¸ªæ”¿æ²»æ¼”è¯´å®¶æ˜¯ä½¿ç”¨æ°‘ç²¹ä¸»ä¹‰è¿˜æ˜¯ç§æ—ä¸»ä¹‰è¯­è¨€æ„Ÿå…´è¶£ï¼Œé‚£ä¹ˆè¯¥è¯­è¨€å°†ç›´æ¥ä»¥æ°‘ç²¹ä¸»ä¹‰æˆ–ç§æ—ä¸»ä¹‰æœ¯è¯­æˆ–å‚è€ƒå½¢å¼å‡ºç°åœ¨æ–‡æœ¬ä¸­ï¼Œè€Œè¦ç´§çš„æ˜¯å®ƒä»¬æ˜¯å¦è¢«ä½¿ç”¨ã€‚ä¸å…¶è¯´è¿™äº›æœ¯è¯­ä»£è¡¨ä»€ä¹ˆï¼Œä¸å¦‚è¯´æ˜¯ä»€ä¹ˆã€‚<strong>ä¾‹å¦‚Jagerså’ŒWalgraveï¼ˆ2007ï¼‰åœ¨ç ”ç©¶æ¯”åˆ©æ—¶æ”¿å…šçš„æ”¿å…šæ”¿æ²»å¹¿æ’­æ—¶ï¼Œå‘ç°æå³ç¿¼æ”¿å…šVlaams Blokæ‰€ä½¿ç”¨çš„æ°‘ç²¹è¯è¯­è¿œæ¯”å…¶ä»–æ¯”åˆ©æ—¶æ”¿å…šä¸°å¯Œçš„å¤šã€‚</strong></p>
<p>åœ¨å®è·µä¸­ï¼Œä»æ–‡æœ¬<strong>å¯è§‚å¯Ÿåˆ°çš„æ˜æ˜¾ç‰¹å¾</strong>ä¸<strong>æ½œåœ¨ç‰¹å¾ä¹‹é—´çš„ç‰¹å¾</strong>çš„æœ‰æ—¶å€™è¿™ä¸¤ä¸ªæ¦‚å¿µåŒºåˆ†çš„å¹¶ä¸æ˜æ˜¾ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæ–‡ä½“é£æ ¼å¯ä»¥ç”¨ä¸€äº›æ˜æ˜¾çš„ç‰¹å¾è¯å¯¹æ–‡æœ¬è¿›è¡Œé‡åŒ–ï¼Œä½“ç°å‡ºä½œè€…çš„ä¸€äº›å†™ä½œåå¥½ã€‚ä¾‹å¦‚ï¼Œåœ¨ä½¿ç”¨é€‚ç”¨äºæ”¿æ²»æ–‡æœ¬çš„<strong>å¯è¯»æ€§åº¦é‡æ”¹ç¼–</strong>çš„ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå¯¹<strong>æ”¿æ²»æˆç†Ÿåº¦</strong>çš„æ½œåœ¨æ°´å¹³æ„Ÿå…´è¶£ï¼Œè¿™å¯ä»¥ç”¨æ¥è¡¡é‡è¯´è¯è€…çš„æ„å›¾æˆ–<strong>è¯´è¯è€…çš„ç‰¹å¾</strong>ï¼Œè¿™ä¸€ç‚¹ä»è§‚å¯Ÿåˆ°çš„æ–‡æœ¬æ ·æœ¬ä¸­å¯ä»¥çœ‹å‡ºã€‚æˆ–è€…ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå¯¹å®ƒä»¬åœ¨å¯è¯»æ€§ä¸Šçš„æ˜æ˜¾å·®å¼‚æ„Ÿå…´è¶£ï¼Œè¿™æ˜¯ä¼ æ’­åª’ä»‹æ›´ç›´æ¥æŒ‡æ ‡ã€‚ä¾‹å¦‚ï¼Œåœ¨å¯¹è‹±å›½è®®ä¼šå†å²æ¼”è®²çš„ç ”ç©¶ä¸­ï¼ŒSpirlingï¼ˆ2016ï¼‰å°†19ä¸–çºªæœ«æœŸå‘ç®€å•è¯­è¨€çš„è½¬å˜å½’å› äºå¹¿æ’­æ‰©å±•ç‰¹è®¸ç»è¥çš„æ°‘ä¸»åŒ–æ•ˆåº”ã€‚Benoitï¼ŒMungerå’ŒSpirlingï¼ˆ2019ï¼‰ä½¿ç”¨ç±»ä¼¼çš„æªæ–½ï¼Œæ¯”è¾ƒäº†åŒä¸€ä½æ€»ç»Ÿå½“å¤©åœ¨åŒä¸€å¤©å‘è¡¨çš„ç¾å›½æ€»ç»Ÿå›½æƒ…å’¨æ–‡æ¼”è®²çš„æ ·æœ¬ï¼Œä½†å…¶å£å¤´å’Œä¹¦é¢å½¢å¼å‡è¡¨æ˜å£å¤´å½¢å¼ä½¿ç”¨çš„è¯­è¨€è¾ƒä¸ºç®€å•ã€‚å‰ä¸€é¡¹ç ”ç©¶å¯èƒ½å¯¹è¯­è¨€çš„<strong>æ˜“ç”¨æ€§</strong>æ„Ÿå…´è¶£ï¼Œè¯¥è¯­è¨€çš„æ˜“ç”¨æ€§æ˜¯æ”¿æ²»ä»£è¡¨åˆ¶æ›´æ½œåœ¨çš„ç‰¹å¾çš„æŒ‡æ ‡ï¼Œè€Œåä¸€é¡¹åˆ†æå¯èƒ½æ›´ä¾§é‡äºäº¤ä»˜åª’ä»‹çš„æ˜æ˜¾åæœã€‚<strong>å¯¹äºè®¸å¤šä½¿ç”¨æ–‡æœ¬æ•°æ®çš„ç ”ç©¶è®¾è®¡è€Œè¨€ï¼ŒåŒºåˆ«æ›´å¤šæ˜¯ç ”ç©¶ç›®æ ‡çš„é—®é¢˜ï¼Œè€Œä¸æ˜¯ç»“æ„åŒ–å’Œåˆ†ææ–‡æœ¬æ•°æ®çš„æŸäº›å†…åœ¨æ–¹å¼ã€‚</strong></p>
<h3 id="23-æ–‡æœ¬åˆ†æçš„æ­¥éª¤">2.3 æ–‡æœ¬åˆ†æçš„æ­¥éª¤</h3>

<figure >
    
        <img src="img/textprocesssteps.png" width="800" />
    
    
</figure>

<p>å®Œæ•´çš„æ–‡æœ¬åˆ†ææ­¥éª¤åŒ…æ‹¬:</p>
<ol>
<li>è¯»å–æ•°æ®</li>
<li>åˆ†è¯(ä¸­æ–‡å¿…é¡»æœ‰è¿™ä¸€æ­¥ï¼Œç”±äºè‹±æ–‡æ˜¯ç©ºæ ¼é—´éš”çš„è¯­è¨€ï¼Œè‹±æ–‡æœ‰æ—¶å€™ä¸éœ€è¦åˆ†è¯ï¼‰</li>
<li>å‰”é™¤ç¬¦å·å’Œæ— æ„ä¹‰çš„åœæ­¢è¯</li>
<li>å­—æ¯å˜å°å†™ï¼Œè¯å¹²åŒ–</li>
<li>ä½¿ç”¨ä¸€å®šçš„ç¼–ç æ–¹å¼æ„å»ºæ–‡æ¡£è¯é¢‘çŸ©é˜µ</li>
</ol>
<table>
<thead>
<tr>
<th>åºå·</th>
<th>æ­¥éª¤</th>
<th>è§£é‡Š</th>
<th>ä¸­æ–‡</th>
<th>è‹±æ–‡</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><strong>è¯»å–æ•°æ®</strong></td>
<td>æ•°æ®ä¸€èˆ¬å­˜å‚¨äºä¸åŒçš„æ–‡ä»¶å¤¹ä¸åŒæ–‡ä»¶å†…ï¼Œéœ€è¦å°†å…¶å¯¼å…¥åˆ°è®¡ç®—æœº</td>
<td></td>
<td></td>
</tr>
<tr>
<td>2</td>
<td><strong>åˆ†è¯</strong></td>
<td>å¯¼å…¥åˆ°è®¡ç®—çš„æ–‡æœ¬æ˜¯å­—ç¬¦ä¸²æ•°æ®ï¼Œéœ€è¦æ•´ç†ä¸ºæ›´å¥½ç”¨çš„åˆ—è¡¨</td>
<td>ä¾‹å¦‚â€œæˆ‘çˆ±ä½ ä¸­å›½â€åˆ†è¯å<br>å¾—åˆ°[&ldquo;æˆ‘&rdquo;, &ldquo;çˆ±&rdquo;, &ldquo;ä½ &rdquo;, &ldquo;ä¸­å›½&rdquo;]</td>
<td>&ldquo;I love China&quot;åˆ†ä¸º<br>[&ldquo;I&rdquo;, &ldquo;love&rdquo;, &ldquo;China&rdquo;]</td>
</tr>
<tr>
<td>3</td>
<td><strong>å‰”é™¤ç¬¦å·å’Œæ— æ„ä¹‰çš„åœæ­¢è¯</strong></td>
<td>ä¸ºäº†é™ä½è®¡ç®—æœºè¿è¡Œæ—¶é—´ï¼Œå¯¹åˆ†æç»“æœå½±å“è¾ƒå°çš„å­—ç¬¦ï¼Œè¯¸å¦‚ç¬¦å·å’Œæ— æ„ä¹‰çš„è¯è¯­éœ€è¦å‰”é™¤æ‰</td>
<td>å¦‚â€œçš„â€ï¼Œâ€œå¥¹â€ï¼Œ â€å‘¢â€ï¼Œ â€œäº†â€</td>
<td>&ldquo;is&rdquo; , &ldquo;a&rdquo;, &ldquo;the&rdquo;</td>
</tr>
<tr>
<td>4</td>
<td><strong>å­—æ¯å˜å°å†™ï¼Œè¯å¹²åŒ–</strong></td>
<td>åŒä¹‰è¯å½’å¹¶ï¼ŒåŒä¸»ä½“è¯å½’å¹¶</td>
<td>â€œä¸­é“â€ï¼Œâ€œä¸­å›½é“å»ºâ€ï¼Œâ€œä¸­é“é›†å›¢â€éƒ½å¯ä»¥å½’å¹¶ä¸ºâ€œä¸­é“â€</td>
<td>å…ˆå˜ä¸ºå°å†™ï¼Œè¿™æ ·â€œIâ€å’Œâ€œiâ€éƒ½å½’å¹¶ä¸ºâ€œiâ€ï¼›<br>â€œwasâ€ï¼Œâ€œareâ€ï¼Œâ€œisâ€éƒ½å½’å¹¶ä¸ºâ€œbeâ€</td>
</tr>
<tr>
<td>5</td>
<td><strong>æ„å»ºæ–‡æ¡£è¯é¢‘çŸ©é˜µ</strong></td>
<td>ä½¿ç”¨ä¸€å®šçš„ç¼–ç æ–¹å¼ï¼Œå³ç”¨æŸç§æ–¹å¼è¡¨ç¤ºæ–‡æœ¬ã€‚å¸¸è§çš„æœ‰è¯è¢‹æ³•ã€tf-idfï¼›<br>å¯ä»¥ä½¿ç”¨scikit-learnæ„å»ºæ–‡æ¡£è¯é¢‘çŸ©é˜µï¼Œä½†ä¸­è‹±æ–‡ç•¥æœ‰åŒºåˆ«ï¼Œéœ€è¦æ³¨æ„</td>
<td>â€œæˆ‘çˆ±ä½ ä¸­å›½â€éœ€è¦å…ˆæ•´ç†ä¸ºâ€œæˆ‘ çˆ± ä½  ä¸­å›½â€</td>
<td>â€œI love Chinaâ€</td>
</tr>
</tbody>
</table>
<br>
<h2 id="ä¸‰å¸¸è§çš„æ–‡æœ¬åˆ†ææŠ€æœ¯æœ‰">ä¸‰ã€å¸¸è§çš„æ–‡æœ¬åˆ†ææŠ€æœ¯æœ‰</h2>
<ul>
<li>ä¸»é¢˜åˆ†æ(Thematic analysis)</li>
<li>å†…å®¹åˆ†æ(content analysis)</li>
<li>åŸºäºè¯å…¸çš„æ–¹æ³•(dictionary analysis)</li>
<li>æ–‡æœ¬å‘é‡åŒ–(Bag-of-words)</li>
<li>ç›‘ç£å­¦ä¹ å¦‚SVMã€Bayeså’ŒRegression</li>
<li>æ— ç›‘ç£å­¦ä¹ ï¼Œå¦‚LDAè¯é¢˜æ¨¡å‹</li>
<li>è‡ªç„¶è¯­è¨€å¤„ç†</li>
</ul>
<p>ä¸Šè¿°æ–‡æœ¬åˆ†ææŠ€æœ¯ï¼ŒæŒ‰ç…§äººä¸æœºå™¨å‚ä¸ç¨‹åº¦ï¼Œç»˜åˆ¶åœ¨ä¸‹å›¾ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¶Šå‘å³ï¼Œæ–‡æœ¬åˆ†ææŠ€æœ¯çš„è‡ªåŠ¨åŒ–ç¨‹åº¦è¶Šé«˜ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è‡ªåŠ¨åŒ–è¶Šé«˜ï¼Œå¹¶ä¸ä»£è¡¨äººçš„å·¥ä½œé‡å°±è¶Šå°‘ã€‚</p>

<figure >
    
        <img src="img/textautomate.png" width="800" />
    
    
</figure>

<h4 id="heading"></h4>
<h3 id="31-ä¸»é¢˜åˆ†æthematic-analysis">3.1 ä¸»é¢˜åˆ†æThematic Analysis</h3>
<p>ä¸»é¢˜åˆ†æ(Thematic analysis)æ˜¯ä¸€ç§ä¸“å®¶æ–¹æ³•ï¼Œä¸€èˆ¬ä¸æ‰æ ¹ç†è®ºæ–¹æ³•ç›¸ç»“åˆ(Baumer, Mimno, Guha, Quan, &amp; Gay, 2017)ã€‚æ‰æ ¹ç†è®ºä¸ä¸»é¢˜åˆ†æçš„ç†å¿µæ˜¯åŸºäºä¸“å®¶è‡ªèº«ç»éªŒå’Œå¯¹ä¸–ç•Œçš„ç†è§£ï¼Œåšå‡ºå¯¹æ•°æ®çš„è§è§£ï¼Œä»è€Œæ„å»ºæ–°ç†è®ºã€‚ä¸»é¢˜åˆ†æå¸¸è§äºç»„ç»‡ç§‘å­¦å’Œä¼ æ’­å­¦(Gioia, Corley, &amp; Hamilton, 2013; Strauss &amp; Corbin, 1998)ã€‚</p>
<p>ä¸»é¢˜åˆ†ææ¶‰åŠä¸€ä¸ªåå¤è¿­ä»£çš„è¿‡ç¨‹ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œç ”ç©¶äººå‘˜å°†å¼€å‘å‡ºä¸€ç³»åˆ—æºè‡ªæ–‡æœ¬çš„ä»£ç å’Œç±»åˆ«ã€‚é™¤éè¦ç²¾ç‚¼ç†è®ºï¼Œå¦åˆ™ä¸€èˆ¬åœ¨åˆ†æå¼€å§‹ä¹‹å‰å°šä¸çŸ¥é“ç±»åˆ«ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ•°æ®åˆ†æéœ€è¦å¯¹æ–‡çŒ®å’Œæ•°æ®è¿›è¡Œä¸æ–­çš„æ¯”è¾ƒã€‚</p>
<ol>
<li>ç ”ç©¶äººå‘˜ä»å‚ä¸è€…è‡ªå·±çš„è¯­è¨€å¼€å§‹ï¼ˆç§°ä¸ºâ€œä¸€é˜¶ç¼–ç â€æˆ–â€œå¼€æ”¾å¼ç¼–ç â€ï¼›Gioiaç­‰äººï¼Œ2013ï¼›Straussï¼†Corbinï¼Œ1998ï¼‰</li>
<li>ç„¶åå°†ç›¸ä¼¼çš„ä»£ç å½’ä¸ºä¸€ç±»ï¼ˆç§°ä¸ºâ€œäºŒé˜¶ä»£ç â€æˆ–â€œä¸»è½´ç¼–ç â€ï¼›Straussï¼†Corbinï¼Œ1998ï¼‰ã€‚</li>
</ol>
<p>è¯¸å¦‚NVivoå’ŒATLAS.tiä¹‹ç±»çš„è®¡ç®—æœºè½¯ä»¶å¯ä»¥å¸®åŠ©ç®€åŒ–ä¸Šè¿°è¿‡ç¨‹ï¼Œä½†æ–‡æœ¬çš„åˆ†ç±»é€šå¸¸ä¾èµ–äºäººç±»ç¼–ç è¡ç”Ÿçš„ç±»åˆ«çš„æ“ä½œå®šä¹‰ï¼Œè®¡ç®—æœºè‡ªåŠ¨åŒ–çš„ç¨‹åº¦ä¾æ—§å¾ˆä½ï¼Œåˆ†æçš„æ•°æ®é‡é€šå¸¸ä¸å¤§ã€‚è€Œä¸”ç¼–ç è¿‡ç¨‹å¯¹ç¼–ç è€…çš„è¦æ±‚ä¸¥æ ¼ï¼Œé€šå¸¸æ˜¯å¯¹è¯¥é¢†åŸŸæœ‰è¾ƒæ·±ç†è§£çš„äººæ‰é€‚åˆåšæ­¤ç±»å·¥ä½œã€‚</p>
<h3 id="32-å†…å®¹åˆ†æåŸºäºè¯å…¸çš„æ–¹æ³•æ³•">3.2 å†…å®¹åˆ†æ/åŸºäºè¯å…¸çš„æ–¹æ³•æ³•</h3>
<p><strong>å†…å®¹åˆ†æ</strong> å’Œ <strong>å…¶ä»–åŸºäºå­—å…¸çš„æ–¹æ³•</strong> é€šå¸¸æ˜¯é€šè¿‡å¯¹ç‰¹å®šæ–‡æœ¬ä¸­ <strong>å•è¯/è¯ç»„</strong> çš„é¢‘ç‡è®¡æ•°è¿›è¡Œçš„ï¼ˆReinardï¼Œ2008ï¼›Shortï¼ŒBrobergï¼ŒCogliserï¼†Brighamï¼Œ2010ï¼‰ã€‚å› ä¸ºæŒ‰ç…§è¿™ç§æ–¹æ³•ï¼Œæ–‡æœ¬æ•°æ®è¢«å‹ç¼©æˆè¯ç»„é¢‘æ•°ï¼Œå®šæ€§çš„æ–‡æœ¬æ•°æ®è½¬åŒ–ä¸ºå®šé‡çš„é¢‘æ•°ï¼Œç´¢å¼•å¯ç”¨äºå›ç­”æ›´å¤šä»¥å®šé‡ä¸ºå¯¼å‘çš„ç ”ç©¶é—®é¢˜ï¼ˆMcKennyç­‰ï¼Œ2016ï¼›Reinardï¼Œ2008ï¼‰ã€‚</p>
<p>æ¯”å¦‚è¿›è¡Œæ–‡æœ¬æƒ…æ„Ÿåˆ†æï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¾ˆç®€å•çš„æ€è·¯ã€‚å³ç»Ÿè®¡æ–‡æœ¬ä¸­æ­£é¢è¯å‡ºç°çš„æ€»æ•°å’Œè´Ÿé¢è¯å‡ºç°çš„æ€»æ•°ï¼Œå¾—å‡ºæ–‡æœ¬çš„æƒ…æ„Ÿå€¼ã€‚è€Œåœ¨æ­¤åˆ†æè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦äº‹å…ˆæ‹¥æœ‰ä¸€ä¸ªæ­£é¢è¯è¯å…¸å’Œè´Ÿé¢è¯è¯å…¸ã€‚</p>
<p>æ˜¯å¦æœ‰æˆç†Ÿçš„é¢†åŸŸè¯å…¸ã€æˆ–è€…æ„å»ºé¢†åŸŸè¯å…¸ï¼Œè¿™éœ€è¦ç ”ç©¶è€…å¯¹ç ”ç©¶é—®é¢˜å’Œç ”ç©¶çš„æ•°æ®æœ‰ä¸€å®šçš„é¢†åŸŸçŸ¥è¯†ï¼Œå·¥ä½œé‡ä¹Ÿä¼šå› æ˜¯å¦æœ‰è¯å…¸è€Œä¸åŒã€‚ä¸€èˆ¬æœ‰ç°æˆçš„æˆç†Ÿçš„è¯å…¸ï¼Œè®¡ç®—æœºè‡ªåŠ¨åŒ–ç¨‹åº¦é«˜ï¼Œäººå·¥å·¥ä½œé‡ä½ã€‚</p>
<p>ä¸ä¸»é¢˜åˆ†æç±»ä¼¼ï¼Œè®¡ç®—æœºè½¯ä»¶å¯ä»¥ååŠ©å†…å®¹åˆ†æè¿‡ç¨‹ã€‚åƒDICTIONè¿™æ ·çš„ç¨‹åºä¼šä½¿ç”¨ <strong>åˆ†ç±»å­—å…¸</strong> è‡ªåŠ¨å¯¹æ–‡æœ¬è¯„åˆ†ï¼ˆå³ï¼Œæ ¹æ®å•è¯æˆ–n-gramè€Œéæ“ä½œå®šä¹‰ç¡®å®šä¸»é¢˜ï¼‰ã€‚å¯ä»¥ä¸ä¸»é¢˜åˆ†æç±»ä¼¼åœ°ä½¿ç”¨å…¶ä»–ç¨‹åºï¼Œä¾‹å¦‚NVivoæˆ–ATLAS.tiï¼Œåœ¨ä¸»é¢˜åˆ†æä¸­ï¼Œé€šè¿‡è½¯ä»¶çš„å¸®åŠ©æ‰‹åŠ¨è¿›è¡Œç¼–ç å’Œåˆ†ç±»ï¼Œä»¥ç»„ç»‡æ•°æ®ã€‚</p>
<h3 id="33-è¯è¢‹æ³•bag-of-words">3.3 è¯è¢‹æ³•Bag-of-words</h3>

<figure >
    
        <img src="img/bagofwords.png" width="800" />
    
    
</figure>

<p>æ–‡æœ¬æ•°æ®æ˜¯éç»“æ„åŒ–çš„å®šæ€§æ•°æ®ï¼Œè®¡ç®—æœºå¹¶ä¸èƒ½ç›´æ¥ä½¿ç”¨ã€‚æˆ‘ä»¬éœ€è¦æŒ‰ç…§è®¡ç®—æœºå®¹æ˜“ç†è§£çš„æ–¹å¼å»ç»„ç»‡æ•°æ®ï¼Œç±»ä¼¼äºä¸Šå›¾çš„ç¬¬ä¸€æ­¥éª¤,å››æ®µè‹±æ–‡æ–‡æœ¬è¢«ç»„ç»‡æˆä¸€ä¸ªæ–‡æ¡£ç‰¹å¾çŸ©é˜µï¼ˆdocument-feature-matrixï¼‰ï¼ŒçŸ©é˜µä¸­</p>
<ul>
<li>æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªè‹±æ–‡æ–‡æ¡£</li>
<li>æ¯ä¸€ä¸ªåˆ—ä»£è¡¨ä¸€ä¸ªç‰¹å¾è¯</li>
</ul>
<h4 id="331-è¯è¢‹æ³•-vs-ä¸»é¢˜åˆ†æä¸­çš„ç¼–ç è€…">3.3.1 è¯è¢‹æ³• vs ä¸»é¢˜åˆ†æä¸­çš„ç¼–ç è€…</h4>
<p>ä¸ºäº†ç†è§£è¯è¢‹æ³•ï¼Œå¯ä»¥ç±»æ¯”<strong>ä¸»é¢˜åˆ†æ</strong> ä¸­çš„ç¼–ç è€…ã€‚æˆ‘ä»¬å¯ä»¥å°†è¯è¢‹æ³•çœ‹åšæ˜¯ä¸€ä¸ªæ­»æ¿çš„ï¼Œä¸çŸ¥å˜é€šçš„äººï¼Œè„‘å­å¾ˆç®€å•ï¼ŒåªçŸ¥é“ç»Ÿè®¡ç‰¹å¾è¯åœ¨æ¯ä¸ªæ–‡æ¡£ä¸­å‡ºç°çš„è¯é¢‘ã€‚é‚£ä¹ˆæ®æ­¤æˆ‘ä»¬å°±çŸ¥é“è¯è¢‹æ³•å’Œäººçš„ä¼˜ç¼ºç‚¹ã€‚</p>
<p>å¯¹äºè¯è¢‹æ³•ï¼Œä¼˜ç‚¹æ˜¯è§„åˆ™æ ‡å‡†ç»Ÿä¸€ï¼Œç¼ºç‚¹æ˜¯ä¸çŸ¥å˜é€šï¼Œç‰ºç‰²äº†æ–‡æœ¬ä¸­å¾ˆå¤šçš„ä¿¡æ¯é‡ã€‚å¼ºè°ƒç¼–ç è¿‡ç¨‹çš„é«˜æ ‡å‡†ï¼Œç‰ºç‰²äº†åˆ†æçš„æ·±åº¦ã€‚</p>
<p>å¯¹äºç ”ç©¶è€…å‚ä¸ <strong>ä¸»é¢˜åˆ†æ</strong> è¿™æ ·çš„ç¼–ç è¿‡ç¨‹ï¼Œä¼˜ç‚¹æ˜¯ç ”ç©¶è€…æœ‰å¾ˆå¼ºçš„é¢†åŸŸçŸ¥è¯†å’Œå¼ºå¤§çš„æ´å¯ŸåŠ›ï¼Œå¯ä»¥çµæ´»æ´å¯Ÿè§„å¾‹ï¼Œç¼ºç‚¹æ˜¯æ¯ä¸ªç ”ç©¶è€…éƒ½å…·æœ‰ç‰¹æ®Šçš„ç»å†å’Œåå¥½ï¼Œç¼–ç æ ‡å‡†ä¸ç»Ÿä¸€ã€‚ç”¨ç ”ç©¶è€…ç¼–ç çš„è¿‡ç¨‹ï¼Œå¼ºè°ƒç¼–ç çš„æ·±åº¦å’Œè´¨é‡ï¼Œç‰ºç‰²äº†ç¼–ç åˆ†æè¿‡ç¨‹çš„æ ‡å‡†æ€§ã€‚</p>
<h4 id="332-è¯è¢‹æ³•çš„ç”¨é€”">3.3.2 è¯è¢‹æ³•çš„ç”¨é€”</h4>
<p>è¯è¢‹æ³•ç¼–ç æ˜¯è®¡ç®—ç§‘å­¦é¢†åŸŸå¯¹æ–‡æœ¬æ•°æ®çš„ç®€åŒ–å’Œå‹ç¼©çš„æ–¹æ³•ï¼Œåç»­å¯ä»¥æ®æ­¤è¿›è¡Œç›‘ç£å­¦ä¹ å’Œæ— ç›‘ç£å­¦ä¹ ã€‚</p>
<h3 id="34-ç›‘ç£å­¦ä¹ ">3.4 ç›‘ç£å­¦ä¹ </h3>
<p>åœ¨æœ‰ç›‘ç£çš„æ–¹æ³•ä¸­ï¼Œç ”ç©¶äººå‘˜äº‹å…ˆçŸ¥é“taæ­£åœ¨å¯»æ‰¾ä»€ä¹ˆï¼ˆç½—ä¼¯èŒ¨ç­‰ï¼Œ2014ï¼‰ã€‚æ¯”å¦‚è¦åˆ¤æ–­è®ºæ–‡çš„ä½œè€…èº«ä»½è¿™ä¸ªé—®é¢˜ï¼Œç ”ç©¶äººå‘˜ä¸ºç¨‹åºæä¾›è¾“å…¥ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ä¸ºæ–‡æœ¬ï¼‰å’Œè¾“å‡ºï¼ˆä¾‹å¦‚ï¼Œæ–‡æœ¬ä½œè€…çš„èº«ä»½ï¼‰ï¼Œç„¶åç³»ç»Ÿåˆ›å»ºä¸€ç§ç®—æ³•æ¥æ˜ å°„ä¸¤è€…ä¹‹é—´çš„è”ç³»ï¼ˆJanasikï¼Œ Honkelaå’ŒBruunï¼Œ2009å¹´ï¼‰ã€‚Mosteller and Wallaceï¼ˆ1963ï¼‰é€šè¿‡ä½¿ç”¨ç®€å•çš„è´å¶æ–¯å•è¯æ¦‚ç‡æ¥é¢„æµ‹12ç¯‡æœ‰äº‰è®®çš„è”é‚¦ä¸»ä¹‰è€…è®ºæ–‡ï¼ˆè©¹å§†æ–¯Â·éº¦è¿ªé€Šæˆ–äºšå†å±±å¤§Â·æ±‰å¯†å°”é¡¿ï¼‰çš„ä½œè€…èº«ä»½ã€‚å¦‚ä»Šï¼Œæœ´ç´ è´å¶æ–¯ï¼ˆBayesï¼‰å’Œæ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰ç­‰æŠ€æœ¯æ˜¯ç”¨äºæ–‡æœ¬åˆ†æçš„æµè¡Œçš„ç›‘ç£ç®—æ³•ï¼ˆManningï¼ŒPrabhakarå’ŒHinrichï¼Œ2008å¹´ï¼‰ã€‚</p>
<h3 id="35-æ— ç›‘ç£å­¦ä¹ ">3.5 æ— ç›‘ç£å­¦ä¹ </h3>
<p>æ— ç›‘ç£ç®—æ³•ï¼Œå¦‚ä¸»é¢˜åˆ†æï¼ˆJanasikç­‰ï¼Œ2009ï¼‰å¯è¯†åˆ«æ•°æ®ä¸­çš„<strong>å•è¯ç°‡</strong>å’Œ<strong>ä¸»é¢˜</strong>ã€‚ä½†æ˜¯ï¼Œä¸<strong>ä¸»é¢˜åˆ†æ</strong>ä¸åŒï¼Œ<strong>ä¸»é¢˜å»ºæ¨¡</strong>ä½¿ç”¨é«˜åº¦è‡ªåŠ¨åŒ–çš„æ–¹æ³•æ¥ç¡®å®šé‡è¦ä¸»é¢˜ï¼Œåˆ†æè¿‡ç¨‹æ‰€éœ€çš„æ—¶é—´å’Œé¢†åŸŸçŸ¥è¯†ç›¸å¯¹è¾ƒå°‘ã€‚å°½ç®¡äººç±»çš„æ´å¯ŸåŠ›ä»ç„¶å¯¹å¸®åŠ©è§£é‡Šå‡ºç°çš„ä¸»é¢˜å¾ˆé‡è¦ï¼Œä¸»é¢˜å»ºæ¨¡é€‚åˆåˆ†æå¤§è§„æ¨¡æ–‡æœ¬æ•°æ®ï¼ˆKobayashi1ï¼ŒMolï¼ŒBerkersï¼ŒKismihokå’ŒDen Hartogï¼Œ2017ï¼‰ã€‚<strong>ä¸»é¢˜å»ºæ¨¡åˆ©ç”¨äº†ä¸»é¢˜åˆ†æï¼ˆå³äººç±»æ´å¯ŸåŠ›ã€è§£é‡ŠåŠ›ï¼‰å’Œæœºå™¨å­¦ä¹ ï¼ˆå³å¿«é€Ÿåˆ†æå¤§é‡æ–‡æœ¬ï¼‰çš„ä¼˜åŠ¿</strong>ã€‚</p>
<h3 id="36-è‡ªç„¶è¯­è¨€å¤„ç†">3.6 è‡ªç„¶è¯­è¨€å¤„ç†</h3>
<p>æœ€åï¼Œè‡ªç„¶è¯­è¨€å¤„ç†(Natural Language Processing)é€šå¸¸æ˜¯æ–‡æœ¬åˆ†æä¸­è‡ªåŠ¨åŒ–ç¨‹åº¦æœ€é«˜çš„å½¢å¼ï¼ˆæœ‰å…³ç»¼è¿°ï¼Œè¯·å‚é˜…Manningç­‰äººï¼Œ2008ï¼‰ã€‚è¿™ç§æ–¹æ³•æ¨¡æ‹Ÿäº†äººç±»å¦‚ä½•ç†è§£å’Œå¤„ç†è¯­è¨€ï¼ˆChowdhuryï¼Œ2003ï¼›Collobertç­‰ï¼Œ2011ï¼›Joshiï¼Œ1991ï¼‰ã€‚ä¾‹å¦‚ï¼ŒNLPæŠ€æœ¯å¯ä»¥æ ‡è®°å¥å­ä¸­å•è¯çš„è¯æ€§ï¼ˆä¾‹å¦‚ï¼Œåè¯ï¼Œå½¢å®¹è¯ç­‰ï¼‰ï¼Œå°†æ–‡æ¡£ä»ä¸€ç§è¯­è¨€ç¿»è¯‘æˆå¦ä¸€ç§è¯­è¨€ï¼Œç”šè‡³ä½¿ç”¨å¥å­çš„ä¸Šä¸‹æ–‡æ¥é˜æ˜è¯è¯­çš„è¯ä¹‰ï¼ˆBuntineï¼†Jakulinï¼Œ2004å¹´ï¼‰ã€‚</p>
<p>å› æ­¤ï¼Œä¸<strong>è¯è¢‹æ³•</strong>ä¸åŒï¼ŒNLPè®¤ä¸ºå•è¯é¡ºåºå¾ˆé‡è¦ã€‚å½“ä½¿ç”¨è®­ç»ƒé›†æ—¶ï¼Œä½¿ç”¨æ·±åº¦å­¦ä¹ å’Œå¤šæ¨¡å¼ï¼ˆå³ç»“åˆæ–‡æœ¬å’Œå›¾åƒï¼‰ç­‰å°–ç«¯æŠ€æœ¯è¿›è¡Œæƒ…æ„Ÿåˆ†ææ˜¯NLPçš„ä¸€ç§æµè¡Œå½¢å¼ï¼ˆKouloumpisï¼ŒWilsonå’ŒMooreï¼Œ2011ï¼‰ã€‚è¿™ç§ç‰¹æ®Šçš„åˆ†æå°†æ–‡æœ¬çš„æ€»ä½“æ€åº¦ï¼Œæƒ…æ„Ÿæˆ–è§‚ç‚¹åˆ†ç±»ä¸ºè‚¯å®šï¼Œå¦å®šæˆ–ä¸­ç«‹ã€‚</p>
<p>ä¸<strong>ä¸»é¢˜åˆ†æ</strong>å½¢æˆé²œæ˜å¯¹æ¯”çš„æ˜¯ï¼Œè‡ªç„¶è¯­è¨€å¤„ç†æ˜¯ä¸€ä¸ªå®Œå…¨è®¡ç®—æœºè‡ªåŠ¨åŒ–çš„è¿‡ç¨‹ï¼Œå› æ­¤å‡ ä¹ä¸éœ€è¦äººç±»çš„ç†è§£å’Œæˆ–è§£é‡Šï¼ˆQuinnç­‰äººï¼Œ2010ï¼‰ã€‚æ­¤å¤–ï¼Œç›¸å¯¹äºéœ€è¦äººå·¥ç¼–ç ï¼ˆä¾‹å¦‚ï¼Œä¸»é¢˜åˆ†æï¼‰çš„æŠ€æœ¯ï¼ŒNLPçš„æ‰§è¡Œé€Ÿåº¦éå¸¸å¿«ï¼Œå¹¶ä¸”æ¯”å…¶ä»–æ–¹æ³•æ›´å…·ç³»ç»Ÿæ€§ã€‚ä¾‹å¦‚ï¼Œè®¡ç®—æœºç§‘å­¦ï¼Œä¿¡æ¯ç§‘å­¦ï¼Œè¯­è¨€å­¦å’Œå¿ƒç†å­¦çš„ç ”ç©¶äººå‘˜åˆ©ç”¨NLPä½œä¸ºæ–‡æœ¬åˆ†æå·¥å…·ï¼ˆChowdhuryï¼Œ2003å¹´ï¼‰ã€‚</p>
<p>å¤§é‚“æé†’ä¸€ä¸‹ï¼Œè‡ªç„¶è¯­è¨€å¤„ç†å±äºäººå·¥æ™ºèƒ½èŒƒç•´ï¼Œäººå·¥æ™ºèƒ½æŠ€æœ¯æ²¡æœ‰é‚£ä¹ˆç¥ï¼Œæˆ‘ä»¬åº”è¯¥å°†å…¶ç†è§£ä¸ºâ€œäººå·¥â€+â€œæ™ºèƒ½â€å¯èƒ½æ›´å¦¥å½“ä¸€äº›ï¼Œå³æ•°æ®å‡†å¤‡é˜¶æ®µç”¨å¤§é‡çš„äººå·¥æ—¶å¯¹æ•°æ®è¿›è¡Œæ ‡æ³¨ï¼Œäº§ç”Ÿè®­ç»ƒæ•°æ®é›†åˆã€‚ä¹‹åå€ŸåŠ©äºè®¡ç®—æœºçš„â€œæ™ºèƒ½â€å­¦ä¹ æ•°æ®é›†ä¸­çš„è§„å¾‹ï¼Œå› æ­¤äººå·¥æ™ºèƒ½è„±ç¦»äº†äººå·¥æ ‡æ³¨æ•°æ®çš„å–‚å…»ï¼Œåªèƒ½åšå¾ˆç®€å•çš„äº‹æƒ…ï¼Œæ›´åƒæ˜¯äººå·¥æ™ºéšœã€‚</p>
<h3 id="37-ä¸åŒæ–‡æœ¬åˆ†ææŠ€æœ¯æ±‡æ€»å¯¹æ¯”">3.7 ä¸åŒæ–‡æœ¬åˆ†ææŠ€æœ¯æ±‡æ€»å¯¹æ¯”</h3>
<h4 id="heading-1"></h4>
<table>
<thead>
<tr>
<th>æŠ€æœ¯</th>
<th>æè¿°</th>
<th>ä¼˜ç‚¹</th>
<th>ç¼ºç‚¹</th>
<th>å¸¸è¢«åº”ç”¨(é¢†åŸŸ)</th>
<th>è½¯ä»¶</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ä¸»é¢˜åˆ†æ</strong>Thematic analysis</td>
<td>éœ€è¦æœ‰ç»éªŒçš„äººå‘˜åŸºäºè‡ªèº«ç»éªŒå’Œæä¿Šæ°ï¼Œå¯¹ç ”ç©¶çš„æ•°æ®è¿›è¡ŒæŒ–æ˜ã€‚ç¼–ç è¿‡ç¨‹ä¸ºè¿­ä»£è¿›è¡Œ</td>
<td>ä½¿ç”¨å‚ä¸è€…è‡ªå·±çš„è¯è¯­æˆ–è€…æ„å¿µæ¥æŒ–æ˜æ•°æ®ï¼Œå¯¹å°‘é‡æ–‡æœ¬ç†è§£çš„æ›´æ·±å…¥</td>
<td>å±äºæ—¶é—´ã€åŠ³åŠ¨å¯†é›†å‹ä»»åŠ¡ï¼Œä¸é€‚åˆå¤§è§„æ¨¡æ•°æ®ã€‚<br>ç”±äºä¸åŒçš„ç¼–ç äººå‘˜æœ‰ä¸åŒçš„ç»å†å’Œåå¥½ï¼Œç¼–ç è¿‡ç¨‹çš„æ ‡å‡†ä¸å¯é </td>
<td>ç¤¾ä¼šå­¦ã€ç®¡ç†å­¦</td>
<td>Nvivoï¼›</td>
</tr>
<tr>
<td><strong>å†…å®¹åˆ†æ/åŸºäºå­—å…¸æ–¹æ³•</strong></td>
<td>ç»Ÿè®¡æ–‡æœ¬ä¸­è¯è¯­/è¯ç»„çš„å‡ºç°é¢‘ç‡</td>
<td>å…è®¸å¯¹ç ”ç©¶çš„æ•°æ®è¿›è¡Œå®šé‡åˆ†æ</td>
<td>é‡‡ç”¨çš„è¯å…¸åº”å°½é‡ä¸ç ”ç©¶é—®é¢˜é€‚åº”ï¼Œè¯å…¸é€‚é…æ€§é—®é¢˜çªå‡º</td>
<td>ç®¡ç†å­¦</td>
<td>LIWCã€Nvivoã€DICTIONï¼›</td>
</tr>
<tr>
<td><strong>è¯è¢‹æ³•</strong>ï¼ˆBag of wordsï¼‰</td>
<td>å°†æ–‡æœ¬å­—ç¬¦ä¸²è½¬ä¸ºè®¡ç®—æœºèƒ½ç†è§£çš„æ•°å­—åŒ–å‘é‡</td>
<td>ç¼–ç æ ‡å‡†ç¨³å®šç®€å•ï¼Œå…·æœ‰ç»Ÿè®¡å­¦ç‰¹æ€§ï¼Œæ‰©å±•æ€§å¼º</td>
<td>ç¼–ç è¿‡ç¨‹å¿½ç•¥è¯è¯­çš„å…ˆåé¡ºåº</td>
<td>ç®¡ç†å­¦</td>
<td>Pythonçš„scikit-learnã€gensimã€nltkç­‰ï¼›R</td>
</tr>
<tr>
<td><strong>ç›‘ç£å­¦ä¹ </strong>(Supervise models),å¦‚SVMã€Bayesã€Logistic Regression</td>
<td>ç ”ç©¶è€…è¦çŸ¥é“è¾“å…¥æ•°æ®Xå’Œæ ‡ç­¾yï¼›éœ€è¦æ ¸å®çš„æ¨¡å‹éœ€è¦Xå’Œyä¹‹é—´çš„å…³ç³»å’Œè§„å¾‹</td>
<td>å…è®¸äº‹å…ˆå®šä¹‰ç¼–ç è§„åˆ™(å¦‚é€‰æ‹©è¯è¢‹æ³•è¿˜æ˜¯tfidf)ï¼›é€»è¾‘ç®€å•</td>
<td>éœ€è¦é«˜è´¨é‡çš„æ ‡æ³¨æ•°æ®(å·¥ä½œé‡å¤§)ï¼›youä¸ç‰¹å¾è¯å¤ªå¤šï¼Œè®­ç»ƒçš„æ¨¡å‹å¾ˆå®¹æ˜“è¿‡æ‹Ÿåˆã€‚</td>
<td>è®¡ç®—æœºå­¦ã€æ”¿æ²»å­¦ã€ç®¡ç†å­¦</td>
<td>Pythonçš„scikit-learnã€gensimã€nltkç­‰ï¼›Rï¼ˆtopicmodelsï¼Œ stmï¼‰</td>
</tr>
<tr>
<td><strong>æ— ç›‘ç£å­¦ä¹ </strong>(Kmeansã€ LDAè¯é¢˜æ¨¡å‹)</td>
<td>ä½¿ç”¨èšç±»ã€è¯é¢˜åˆ†æï¼Œè®©è®¡ç®—æœºè‡ªåŠ¨å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„</td>
<td>åœ¨æ²¡æœ‰äººå·¥æ ‡æ³¨çš„æƒ…å†µä¸‹ï¼ŒåŠ é€Ÿäº†æ•°æ®çš„â€œæ ‡æ³¨â€æˆ–â€œåˆ†ç±»â€</td>
<td>â€œæ ‡æ³¨â€æ˜¯æœºå™¨æŒ‰ç…§æ•°å­—ç‰¹å¾è¿›è¡Œçš„åˆ†ç»„ï¼Œéœ€è¦ç ”ç©¶è€…è§£è¯»æ‰å¯ä»¥èµ‹äºˆâ€œæ ‡å‡†â€œæ„ä¹‰ï¼›è®­ç»ƒè¿‡ç¨‹éœ€è¦å¤§é‡çš„è°ƒå‚</td>
<td>è®¡ç®—æœºå­¦ã€æ”¿æ²»å­¦ã€ç®¡ç•™å­¦</td>
<td>Pythonçš„scikit-learnã€gensimã€nltkç­‰ï¼›Rï¼ˆtopicmodelsï¼Œ stmï¼‰</td>
</tr>
<tr>
<td><strong>è‡ªç„¶è¯­è¨€å¤„ç†</strong></td>
<td>æŒ‰ç…§äººç±»å¯¹è¯­è¨€çš„ç†è§£è¿›è¡Œå»ºæ¨¡ï¼Œè€ƒè™‘è¯è¯­é¡ºåº</td>
<td>è®¡ç®—æœºè‡ªåŠ¨åŒ–ï¼›å¯åˆ†æè¯­ä¹‰</td>
<td>å¤§å¤šæ•°æ¨¡å‹æ˜¯äººç±»æ— æ³•è§£è¯»çš„é»‘ç®±ï¼›<br>è™½ç„¶ä»£ç ç¼–ç¨‹é‡å°ï¼Œä½†è®­ç»ƒä»£ç è€—æ—¶å·¨å¤§</td>
<td>è®¡ç®—ç§‘å­¦ï¼›å¸‚åœºè¥é”€ï¼›å¿ƒç†å­¦</td>
<td>pytorchã€tensorflow</td>
</tr>
</tbody>
</table>
<h3 id="38-pythonèƒ½åšå“ªäº›">3.8 Pythonèƒ½åšå“ªäº›ï¼Ÿ</h3>
<p>è®¡ç®—æœºèƒ½åšçš„æ–‡æœ¬åˆ†æï¼ŒPythonéƒ½èƒ½åšåˆ°ï¼ŒåŒ…æ‹¬</p>
<ul>
<li>åŸºäºè¯å…¸çš„åˆ†ææ³•ï¼›å¦‚åŸºäºè¯å…¸æ³•çš„æƒ…æ„Ÿè®¡ç®—</li>
<li>è¯è¢‹æ³•ï¼›å¯ä»¥è¿›è¡Œæ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—</li>
<li>æœ‰ç›‘ç£æœºå™¨å­¦ä¹ ï¼›å¦‚åŸºäºæœºå™¨å­¦ä¹ çš„æƒ…æ„Ÿåˆ†æï¼›æ–‡æœ¬åˆ†ç±»</li>
<li>æ— ç›‘ç£æœºå™¨å­¦ä¹ ï¼›ldaè¯é¢˜æ¨¡å‹å¯¹æ–‡æœ¬è¿›è¡Œè¯é¢˜åˆ†æ</li>
<li>è‡ªç„¶è¯­è¨€å¤„ç†ï¼›è€ƒè™‘è¯è¯­é¡ºåºçš„LSTM</li>
</ul>
<p>é™¤äº†è‡ªç„¶è¯­è¨€å¤„ç†éƒ¨åˆ†ï¼Œå››ç§æ–¹æ³•åœ¨æˆ‘çš„<a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">ã€ŠPythonç½‘ç»œçˆ¬è™«ä¸æ–‡æœ¬æ•°æ®åˆ†æã€‹</a>è§†é¢‘è¯¾ç¨‹ä¸­éƒ½æœ‰ç›¸å…³çš„è®²è§£å’Œå®æˆ˜ä»£ç </p>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="90%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<br>
<h2 id="ç›¸å…³æ–‡çŒ®">ç›¸å…³æ–‡çŒ®</h2>
<blockquote>
<p>[1]Berger, Jonah, Ashlee Humphreys, Stephan Ludwig, Wendy W. Moe, Oded Netzer, and David A. Schweidel. &ldquo;Uniting the tribes: Using text for marketing insight.&rdquo; Journal of Marketing (2019): 0022242919873106.</p>
</blockquote>
<blockquote>
<p>[2]Kenneth Benoit. July 16, 2019. â€œ[Text as Data: An Overview](<a href="https://kenbenoit.net/pdfs/28">https://kenbenoit.net/pdfs/28</a> Benoit Text as Data draft 2.pdf).â€ Forthcoming in Cuirini, Luigi and Robert Franzese, eds. <em>Handbook of Research Methods in Political Science and International Relations</em>. Thousand Oaks: Sage.</p>
</blockquote>
<blockquote>
<p>[3]Banks, George C., Haley M. Woznyj, Ryan S. Wesslen, and Roxanne L. Ross. &ldquo;A review of best practice recommendations for text analysis in R (and a user-friendly app).&rdquo; <em>Journal of Business and Psychology</em> 33, no. 4 (2018): 445-459.</p>
</blockquote>
<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>æ•°æ®åˆ†æplydataåº“</title>
      <link>https://hidadeng.github.io/blog/plydata/</link>
      <pubDate>Mon, 22 Nov 2021 22:40:10 +0600</pubDate>
      
      <guid>/blog/plydata/</guid>
      <description>è®©æ•°æ®åˆ†æçš„ä»£ç æ›´ç®€æ´</description>
      <content:encoded><![CDATA[<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="https://github.com/hidadeng/DaDengAndHisPython/blob/master/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90plydata%E5%BA%93%E5%AD%A6%E4%B9%A0.zip">https://github.com/hidadeng/DaDengAndHisPython/blob/master/æ•°æ®åˆ†æplydataåº“å­¦ä¹ .zip</a></p>
<p>plydataæ˜¯ä¸€ä¸ªæä¾›æ•°æ®å¤„ç†è¯­æ³•çš„Pythonåº“ï¼Œå€Ÿé‰´äº†Rè¯­è¨€dplyrï¼Œtidyrå’Œforcatsç­‰åŒ…ä¸­çš„ç®¡é“æ“ä½œç¬¦ã€‚</p>
<p>plydataä½¿ç”¨ <code>&gt;&gt;è¿ç®—ç¬¦</code> ä½œä¸ºç®¡é“ç¬¦å·ï¼Œæˆ–è€…ä½¿ç”¨<code>plyï¼ˆdataï¼Œ* verbsï¼‰</code>å‡½æ•°ä»£æ›¿ <code>&gt;&gt;</code>ï¼Œ ç›®å‰ä»…æ”¯æŒå¯¹pandas.DataFrameæ•°æ®è¿›è¡Œæ“ä½œã€‚</p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">plydata</span>
</code></pre></div><h2 id="å¿«é€Ÿä¸Šæ‰‹">å¿«é€Ÿä¸Šæ‰‹</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">plydata</span> <span class="kn">import</span> <span class="n">define</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">if_else</span><span class="p">,</span> <span class="n">ply</span>


<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
    <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;zero&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">]})</span>

<span class="n">df</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">x</th>
<th style="text-align:left">y</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:left">zero</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:left">one</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2</td>
<td style="text-align:left">two</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3</td>
<td style="text-align:left">three</td>
</tr>
</tbody>
</table>
<h2 id="define">define</h2>
<p>defineå‡½æ•°åå¾ˆç®€å•ï¼Œå®šä¹‰å˜é‡æˆ–è€…æ“ä½œå˜é‡ã€‚</p>
<p><code>define(data, *args,**kwargs)</code></p>
<ul>
<li>data å¾…æ“ä½œçš„dataframeæ•°æ®</li>
<li>argsã€kwargs æ“ä½œè¿‡ç¨‹åŠç»“æœã€‚</li>
</ul>
<p>æ¯”å¦‚æˆ‘ä»¬æƒ³åœ¨dfä¸­æ–°å»ºä¸€ä¸ªzåˆ—ï¼Œzåˆ—çš„å€¼å®Œå…¨å¤åˆ¶è‡ªxåˆ—ã€‚å¯ä»¥ä½¿ç”¨ä»£ç  define(df, z=&lsquo;x&rsquo;)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">define</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">x</th>
<th style="text-align:left">y</th>
<th style="text-align:right">z</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:left">zero</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:left">one</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2</td>
<td style="text-align:left">two</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3</td>
<td style="text-align:left">three</td>
<td style="text-align:right">3</td>
</tr>
</tbody>
</table>
<p><strong>æ³¨æ„:</strong> dfä¸­æœ‰xåˆ—ï¼Œæ‰€ä»¥è¿™é‡Œçš„ä½¿ç”¨çš„&rsquo;x',è€Œä¸æ˜¯xã€‚</p>
<h2 id="ç®¡é“ç¬¦">&raquo;ç®¡é“ç¬¦</h2>
<p>åˆšåˆšçš„é—®é¢˜å¯ä»¥ä½¿ç”¨ç®¡é“ç¬¦å®ç°ä¸define(df, z=&lsquo;x&rsquo;)ç›¸åŒçš„åŠŸèƒ½ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#ç­‰åŒäºdf[&#39;z&#39;]=df[&#39;x&#39;]</span>
<span class="c1">#ç­‰åŒäºdefine(df, z=&#39;x&#39;)</span>
<span class="n">df</span> <span class="o">&gt;&gt;</span> <span class="n">define</span><span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">x</th>
<th style="text-align:left">y</th>
<th style="text-align:right">z</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:left">zero</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:left">one</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2</td>
<td style="text-align:left">two</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3</td>
<td style="text-align:left">three</td>
<td style="text-align:right">3</td>
</tr>
</tbody>
</table>
<p>å¦‚æœæœ‰å¤šä¸ªç¯èŠ‚ï¼Œå¯ä»¥ç”¨æ‹¬å·åŒ…è£¹ä½ï¼Œç¯èŠ‚ä¸ç¯èŠ‚ç”¨<code>&gt;&gt;</code>å’Œ<code>æ¢è¡Œ</code>å‰åè¡”æ¥ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬æœ‰å¤šä¸ªæ“ä½œï¼Œæ¯ä¸€æ­¥æ“ä½œå¦‚ä¸‹</p>
<ol>
<li><code>m=2x</code></li>
<li><code>n=m*m</code></li>
<li><code>q=m+n</code></li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="p">(</span><span class="n">df</span> 
 <span class="o">&gt;&gt;</span> <span class="n">define</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="s1">&#39;2*x&#39;</span><span class="p">)</span> 
 <span class="o">&gt;&gt;</span> <span class="n">define</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="s1">&#39;m*m&#39;</span><span class="p">)</span> 
 <span class="o">&gt;&gt;</span> <span class="n">define</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="s1">&#39;m+n&#39;</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">x</th>
<th style="text-align:left">y</th>
<th style="text-align:right">m</th>
<th style="text-align:right">n</th>
<th style="text-align:right">q</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:left">zero</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:left">one</td>
<td style="text-align:right">2</td>
<td style="text-align:right">4</td>
<td style="text-align:right">6</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2</td>
<td style="text-align:left">two</td>
<td style="text-align:right">4</td>
<td style="text-align:right">16</td>
<td style="text-align:right">20</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3</td>
<td style="text-align:left">three</td>
<td style="text-align:right">6</td>
<td style="text-align:right">36</td>
<td style="text-align:right">42</td>
</tr>
</tbody>
</table>
<p>ä¸Šé¢æ‰€æœ‰çš„plydataç›¸å…³æ“ä½œä¸ä¼šä¿®æ”¹åŸå§‹æ•°æ®df</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">x</th>
<th style="text-align:left">y</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:left">zero</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:left">one</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2</td>
<td style="text-align:left">two</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3</td>
<td style="text-align:left">three</td>
</tr>
</tbody>
</table>
<h2 id="if_else">if_else</h2>
<p>åœ¨dfä¸­æ–°å»ºzåˆ—ï¼Œzçš„å€¼æ»¡è¶³</p>
<ul>
<li>å½“xå¤§äº1ï¼Œzä¸º1</li>
<li>å½“xå°äºç­‰äº1ï¼Œ zä¸º0</li>
</ul>
<p>ä½¿ç”¨if_else(predicate, true_value, false_value)</p>
<ul>
<li>predicate é€»è¾‘åˆ¤æ–­æ¡ä»¶å­—ç¬¦ä¸²</li>
<li>true_value æ»¡è¶³é€»è¾‘æ¡ä»¶è¿”å›çš„å€¼</li>
<li>false_value ä¸æ»¡è¶³é€»è¾‘æ¡ä»¶è¿”å›çš„å€¼</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#ç­‰åŒäºdefine(df, z=if_else(&#39;x&gt;1&#39;, 1, 0))</span>
<span class="n">df</span> <span class="o">&gt;&gt;</span> <span class="n">define</span><span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="n">if_else</span><span class="p">(</span><span class="s1">&#39;x&gt;1&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">x</th>
<th style="text-align:left">y</th>
<th style="text-align:right">z</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:left">zero</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:left">one</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2</td>
<td style="text-align:left">two</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3</td>
<td style="text-align:left">three</td>
<td style="text-align:right">1</td>
</tr>
</tbody>
</table>
<h2 id="query">query</h2>
<p>query(data, expr)</p>
<ul>
<li>data å¾…æŸ¥è¯¢çš„dataframeæ•°æ®</li>
<li>expr  æŸ¥è¯¢æ¡ä»¶å­—ç¬¦ä¸²</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="p">(</span><span class="n">df</span> 
 <span class="o">&gt;&gt;</span> <span class="n">define</span><span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="n">if_else</span><span class="p">(</span><span class="s1">&#39;x&gt;1&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> 
 <span class="o">&gt;&gt;</span> <span class="n">query</span><span class="p">(</span><span class="s1">&#39;z==1&#39;</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">x</th>
<th style="text-align:left">y</th>
<th style="text-align:right">z</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2</td>
<td style="text-align:left">two</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3</td>
<td style="text-align:left">three</td>
<td style="text-align:right">1</td>
</tr>
</tbody>
</table>
<h2 id="ply">ply()</h2>
<p>plyåŠŸèƒ½ç­‰åŒäºç®¡é“ç¬¦&raquo;ï¼Œ åˆšåˆšä¸Šé¢çš„ä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="p">(</span><span class="n">df</span> 
 <span class="o">&gt;&gt;</span> <span class="n">define</span><span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="n">if_else</span><span class="p">(</span><span class="s1">&#39;x&gt;1&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> 
 <span class="o">&gt;&gt;</span> <span class="n">query</span><span class="p">(</span><span class="s1">&#39;z==1&#39;</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div><p>å¯ä»¥ç”¨ply</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">ply</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
    <span class="n">define</span><span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="n">if_else</span><span class="p">(</span><span class="s1">&#39;x &gt; 1&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
    <span class="n">query</span><span class="p">(</span><span class="s1">&#39;z == 1&#39;</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">x</th>
<th style="text-align:left">y</th>
<th style="text-align:right">z</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2</td>
<td style="text-align:left">two</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3</td>
<td style="text-align:left">three</td>
<td style="text-align:right">1</td>
</tr>
</tbody>
</table>
<h2 id="plydataä¸plotnine">plydataä¸plotnine</h2>
<p>åœ¨Rè¯­è¨€ä¸­ï¼Œç”¨ggplot2ä½œå›¾ç»å¸¸ä¼šç”¨åˆ°ç®¡é“ç¬¦ã€‚è€Œåœ¨Pythonä¸­ï¼Œplydataæä¾›ç®¡é“ç¬¦ï¼Œå¯ä»¥ä¸ä½œå›¾åº“plotnineç»“åˆä½¿ç”¨ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine</span> <span class="kn">import</span> <span class="n">ggplot</span><span class="p">,</span> <span class="n">geom_line</span><span class="p">,</span> <span class="n">aes</span>
<span class="kn">from</span> <span class="nn">plydata</span> <span class="kn">import</span> <span class="n">define</span><span class="p">,</span> <span class="n">if_else</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>


<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">500</span><span class="p">)})</span>
<span class="p">(</span><span class="n">df</span> 
 <span class="o">&gt;&gt;</span> <span class="n">define</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;np.sin(x)&#39;</span><span class="p">)</span> 
 <span class="o">&gt;&gt;</span> <span class="n">define</span><span class="p">(</span><span class="n">sign</span><span class="o">=</span><span class="n">if_else</span><span class="p">(</span><span class="s1">&#39;y&gt;=0&#39;</span><span class="p">,</span> <span class="s1">&#39;&#34;pos&#34;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#34;neg&#34;&#39;</span><span class="p">))</span> 
 <span class="o">&gt;&gt;</span> <span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> 
                <span class="n">y</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> 
                <span class="n">color</span><span class="o">=</span><span class="s1">&#39;sign&#39;</span><span class="p">))</span><span class="o">+</span>
     <span class="n">geom_line</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mf">1.5</span><span class="p">))</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_27_0.png" width="100%" />
    
    
</figure>

<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>70Gä¸Šäº¤æ‰€å¹´æŠ¥æ•°æ®é›†</title>
      <link>https://hidadeng.github.io/blog/70g_china_market_anunal_report_datasets/</link>
      <pubDate>Mon, 22 Nov 2021 20:40:10 +0600</pubDate>
      
      <guid>/blog/70g_china_market_anunal_report_datasets/</guid>
      <description>Pythonç½‘ç»œçˆ¬è™«ä¸æ–‡æœ¬åˆ†æï¼Œ 70gä¼šè®¡å¹´æŠ¥pdfæ•°æ®é›†å…è´¹ä¸‹è½½</description>
      <content:encoded><![CDATA[<h2 id="70gå¹´æŠ¥pdfæ•°æ®é›†">70Gå¹´æŠ¥pdfæ•°æ®é›†</h2>

<figure >
    
        <img src="img/1.gif" width="100%" />
    
    
</figure>

<h2 id="æ•°æ®ä¸‹è½½è¯´æ˜">æ•°æ®ä¸‹è½½è¯´æ˜</h2>
<p>æ‰€æœ‰pdfå‡æ¥è‡ªä¸Šæµ·è¯åˆ¸äº¤æ˜“æ‰€å®˜ç½‘ï¼Œä½¿ç”¨shreportåº“è¿›è¡Œçš„ä¸‹è½½ã€‚</p>

<figure >
    
        <img src="img/2.png" width="100%" />
    
    
</figure>

<h2 id="æŠ¥å‘Šä¿¡æ¯æ±‡æ€»æ–‡ä»¶">æŠ¥å‘Šä¿¡æ¯æ±‡æ€»æ–‡ä»¶</h2>
<h4 id="heading"></h4>

<figure >
    
        <img src="img/3.gif" width="100%" />
    
    
</figure>

<p>summary.xlsxå†…å­—æ®µ</p>
<ul>
<li>company ä¸Šå¸‚å…¬å¸ä¼ä¸šå</li>
<li>code è‚¡ç¥¨ä»£ç </li>
<li>type æŠ¥å‘Šç±»å‹</li>
<li>year æŠ¥å‘Šå¹´ä»½</li>
<li>date æŠ¥å‘Šå‘å¸ƒæ—¥æœŸ</li>
<li>pdf æŠ¥å‘Špdfæ–‡ä»¶ä¸‹è½½é“¾æ¥</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">import pandas as pd
from pathlib import Path


#æŠ¥å‘Šæ±‡æ€»æ–‡ä»¶summary.xlsx
df = pd.read_excel(&#39;summary.xlsx&#39;)
df.head()
</code></pre></div>
<figure >
    
        <img src="img/4.png" width="100%" />
    
    
</figure>

<p>ä¸€å…±æœ‰æŠ¥å‘Š71126ä»½</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">len(df)
71149
</code></pre></div><p>ä¸€å…±æœ‰ä¸Šå¸‚å…¬å¸1486å®¶</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">len(df[&#39;company&#39;].unique())
1486
</code></pre></div><h2 id="summaryæ–‡ä»¶å¤¹">summaryæ–‡ä»¶å¤¹</h2>
<p>summaryæ–‡ä»¶å¤¹å†…æ˜¯æ¯å®¶å…¬å¸çš„æŠ¥å‘ŠæŠ«éœ²æƒ…å†µ</p>

<figure >
    
        <img src="img/5.gif" width="100%" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">df1 = pd.read_excel(&#39;summary/600000.xlsx&#39;)
df1.head()
</code></pre></div>
<figure >
    
        <img src="img/6.png" width="800" />
    
    
</figure>

<p>æµ¦å‘é“¶è¡Œä¸€å…±æœ‰75ä»½å®šæœŸæŠ¥å‘Š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">len(df1)
75
</code></pre></div><h2 id="reportsæ–‡ä»¶å¤¹">reportsæ–‡ä»¶å¤¹</h2>
<p>reportsæ–‡ä»¶å¤¹å­˜æ”¾ç€ä»¥å„å„å…¬å¸è‚¡ç¥¨ä»£ç å‘½åçš„æ–‡ä»¶å¤¹</p>
<p>æ–‡ä»¶å¤¹å†…æ˜¯è¯¥å…¬å¸æ‰€æœ‰å®šæœŸæŠ¥å‘Š</p>

<figure >
    
        <img src="img/7.gif" width="100%" />
    
    
</figure>

<h2 id="è¯»å–pdfæŠ¥å‘Š">è¯»å–pdfæŠ¥å‘Š</h2>
<p>å¯ä½¿ç”¨pdfdocxåº“è¯»å–pdf,</p>
<p>pdfdocxæ–‡æ¡£é“¾æ¥ <a href="https://github.com/thunderhit/pdfdocx">https://github.com/thunderhit/pdfdocx</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">from pdfdocx import read_pdf

p_text = read_pdf(&#39;reports/600000/600000_2012_1.pdf&#39;)
p_text
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">ä¸Šæµ·æµ¦ä¸œå‘å±•é“¶è¡Œè‚¡ä»½æœ‰é™å…¬å¸ \n\n2012 å¹´ç¬¬ä¸€å­£åº¦æŠ¥å‘Š \n\n \n\n \n\nÂ§1 é‡è¦æç¤º \n\n1.1 å…¬å¸è‘£äº‹ä¼šã€ç›‘äº‹ä¼šåŠå…¶è‘£äº‹ã€ç›‘äº‹ã€é«˜çº§ç®¡ç†äººå‘˜ä¿è¯æœ¬æŠ¥å‘Šæ‰€è½½èµ„æ–™ä¸å­˜åœ¨ä»»ä½•è™šå‡è®°è½½ã€\n\nè¯¯å¯¼æ€§é™ˆè¿°æˆ–è€…é‡å¤§é—æ¼ï¼Œå¹¶å¯¹å…¶å†…å®¹çš„çœŸå®æ€§ã€å‡†ç¡®æ€§å’Œå®Œæ•´æ€§æ‰¿æ‹…ä¸ªåˆ«åŠè¿å¸¦è´£ä»»ã€‚\n\n1.2 å…¬å¸äº 2012 å¹´ 4 æœˆ 26 æ—¥ä»¥é€šè®¯è¡¨å†³çš„æ–¹å¼å¬å¼€ç¬¬å››å±Šè‘£äº‹ä¼šç¬¬äºŒåå…­æ¬¡ä¼šè®®å®¡è®®é€šè¿‡æœ¬æŠ¥å‘Šï¼Œ\n\n1.4 å…¬å¸è‘£äº‹é•¿ã€è¡Œé•¿å‰æ™“è¾‰ã€è´¢åŠ¡æ€»ç›‘åˆ˜ä¿¡ä¹‰åŠè´¢åŠ¡æœºæ„è´Ÿè´£äººå‚…èƒ½å£°æ˜ï¼šä¿è¯æœ¬å­£åº¦æŠ¥å‘Šä¸­è´¢åŠ¡\n\nå…¬å¸å…¨ä½“è‘£äº‹å‡ºå¸­è‘£äº‹ä¼šä¼šè®®å¹¶è¡Œä½¿è¡¨å†³æƒã€‚\n\n1.3 å…¬å¸ç¬¬ä¸€å­£åº¦è´¢åŠ¡æŠ¥å‘Šæœªç»å®¡è®¡ã€‚\n\næŠ¥å‘Šçš„çœŸå®ã€å®Œæ•´ã€‚\n\n \nÂ§2 å…¬å¸åŸºæœ¬æƒ…å†µ \n\n2.1 ä¸»è¦ä¼šè®¡æ•°æ®åŠè´¢åŠ¡æŒ‡æ ‡ \n\næœ¬æŠ¥å‘ŠæœŸæœ« \n\nä¸Šå¹´åº¦æœŸæœ« \n\nå¸ç§:äººæ°‘å¸ \n\næœ¬æŠ¥å‘ŠæœŸæœ«æ¯”ä¸Šå¹´\nåº¦æœŸæœ«å¢å‡(%) \n\næ€»èµ„äº§(åƒå…ƒ) \n\nå½’å±äºä¸Šå¸‚å…¬å¸è‚¡ä¸œçš„æ‰€æœ‰è€…æƒç›Š(åƒå…ƒ) \n\n2,804,646,567\n\n157,055,724\n\n2,684,693,689 \n148,891,235 \n\nå½’å±äºä¸Šå¸‚å…¬å¸è‚¡ä¸œçš„æ¯è‚¡å‡€èµ„äº§(å…ƒ) \n\n8.420\n\n7.982 \n\n4.47 \n5.48 \n5.49 \n\nç»è¥æ´»åŠ¨äº§ç”Ÿçš„ç°é‡‘æµé‡å‡€é¢(åƒå…ƒ) \n\næ¯è‚¡ç»è¥æ´»åŠ¨äº§ç”Ÿçš„ç°é‡‘æµ\n\n \n\n \n \næ¯å…¬å¸ç°é‡‘æµé‡è¡¨ \n \n2012 å¹´ 1â€”3 æœˆ \n \nç¼–åˆ¶å•ä½: ä¸Šæµ·æµ¦ä¸œå‘å±•é“¶è¡Œè‚¡ä»½æœ‰é™å…¬å¸....
</code></pre></div><h2 id="70gæ•°æ®ä¸‹è½½">70Gæ•°æ®ä¸‹è½½</h2>
<p>é“¾æ¥:https://pan.baidu.com/s/14PI6MbxunFQ3fZOfR33zkw å¯†ç :osoi</p>
<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>rpy2åŒ… | åœ¨Jupyterä¸­è°ƒç”¨Rè¯­è¨€çš„ä»£ç </title>
      <link>https://hidadeng.github.io/blog/call_r_language_code_in_jupyter/</link>
      <pubDate>Mon, 22 Nov 2021 17:40:10 +0600</pubDate>
      
      <guid>/blog/call_r_language_code_in_jupyter/</guid>
      <description>æ–‡æœ¬æ•°æ®åˆ†æåˆ©å™¨Pythonå’ŒRï¼</description>
      <content:encoded><![CDATA[<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="https://github.com/hidadeng/DaDengAndHisPython/blob/master/%E5%9C%A8jupyter%E4%B8%AD%E8%B0%83%E7%94%A8R%E8%AF%AD%E8%A8%80%E4%BB%A3%E7%A0%81.zip">ç‚¹å‡»ä¸‹è½½</a></p>
<br>
<p>åœ¨æ•°æ®åˆ†æä¸­ï¼ŒPythonå’ŒRå„æœ‰åƒç§‹ï¼Œè™½ç„¶Pythonæˆ–Réƒ½èƒ½åœ¨æ•°æ®åˆ†ææ‰“é€šå…³ï¼Œä»é‡‡é›†ã€æ¸…æ´—(é¢„å¤„ç†)ã€åˆ†æã€å¯è§†åŒ–ï¼Œä½†æ˜¯åœ¨ä¸åŒçš„ç¯èŠ‚ï¼Œä¸åŒçš„è¯­è¨€æ˜“ç”¨ç¨‹åº¦ä¸åŒã€‚Pythonèƒœåœ¨å¹²è„æ´»ç´¯æ´»ï¼Œè¯¸å¦‚æ•°æ®é‡‡é›†ã€æ•°æ®æ¸…æ´—ã€æœºå™¨å­¦ä¹ ç­‰ï¼›è€ŒRè¯­è¨€èƒœåœ¨ç»Ÿè®¡åˆ†æã€å¯è§†åŒ–ç­‰ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ æ­£å¥½Pythonå’ŒRéƒ½å…¥é—¨äº†ï¼Œå¯ä»¥è€ƒè™‘ä¸¤è€…ç»“åˆã€‚é‚£ä¹ˆå°±ä¼šé‡åˆ°ä»Šå¤©çš„é—®é¢˜-<strong>å¦‚ä½•åœ¨jupyterä¸­ä½¿ç”¨Rè¯­è¨€ä»£ç ï¼Ÿ</strong></p>
<h2 id="rpy2åŒ…">rpy2åŒ…</h2>
<p>rpy2åŒ…é¦–å…ˆæ˜¯PythonåŒ…ï¼Œtaè¡”æ¥äº†Pythonå’ŒRï¼Œé€šè¿‡rpy2å¯ä»¥è¿è¡ŒRè¯­è¨€ç›¸å…³ä»£ç ã€å‡½æ•°ã€åŒ…ã€‚</p>
<p>åœ¨Jupyter notebookä¸­ä¸»è¦æœ‰ä¸¤ç§æƒ…å†µ</p>
<ol>
<li>å•å…ƒæ ¼ä¸­ä»¥Pythonä¸ºä¸»ï¼Œå¯ä»¥æ’å…¥<strong>Rçš„ä»£ç å­—ç¬¦ä¸²</strong></li>
<li>å•ä¸ªçš„å•å…ƒæ ¼è¦ä¹ˆåªæœ‰<strong>Rä»£ç </strong>ï¼Œè¦ä¹ˆåªæœ‰<strong>Pythonä»£ç </strong></li>
</ol>
<p>é‡åˆ°è¿™ç±»é—®é¢˜ï¼Œå„ä½çš„ç”µè„‘è¦ç¡®ä¿</p>
<ol>
<li>ç”µè„‘å·²ç»å®‰è£…äº†Pythonå’ŒR</li>
<li>å·²å®‰è£…rpy2åŒ…</li>
</ol>
<p>å®‰è£…rpy2åŒ…</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python">
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">rpy2</span>

</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">rpy2.robjects</span> <span class="k">as</span> <span class="nn">robjects</span>
<span class="kn">from</span> <span class="nn">rpy2.robjects</span> <span class="kn">import</span> <span class="n">pandas2ri</span>

<span class="c1">#Rä»£ç è¿è¡Œä¼šå°½é‡ä»¥DataFrameæ˜¾ç¤º</span>
<span class="n">pandas2ri</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>

<span class="c1">#è¿è¡ŒRä»£ç </span>
<span class="n">robjects</span><span class="o">.</span><span class="n">r</span><span class="p">(</span><span class="s1">&#39;Rä»£ç å­—ç¬¦ä¸²&#39;</span><span class="p">)</span>
</code></pre></div><h2 id="è¿è¡Œrä»£ç ">è¿è¡ŒRä»£ç </h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python">
<span class="n">rpy2</span><span class="o">.</span><span class="n">robjects</span><span class="o">.</span><span class="n">r</span><span class="p">(</span><span class="s1">&#39;Rä»£ç å­—ç¬¦ä¸²&#39;</span><span class="p">)</span>

</code></pre></div><p>rpy2.robjects.r()å‡½æ•°ä¼šè¯†åˆ« <strong>Rä»£ç å­—ç¬¦ä¸²</strong>, å¹¶å°†å…¶æ‰§è¡Œã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">rpy2.robjects</span> <span class="k">as</span> <span class="nn">robjects</span>
<span class="kn">from</span> <span class="nn">rpy2.robjects</span> <span class="kn">import</span> <span class="n">pandas2ri</span>
<span class="kn">import</span> <span class="nn">warnings</span> 
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>

<span class="c1">#ç›´æ¥å£°æ˜ï¼Œdata frameå¼ºåˆ¶è½¬ä¸ºDataFrame</span>
<span class="n">pandas2ri</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>

<span class="c1">#Rä»£ç </span>
<span class="n">r_code</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;
</span><span class="s2">library(dplyr)
</span><span class="s2">
</span><span class="s2">text &lt;- c(&#34;Because I could not stop for Death -&#34;,
</span><span class="s2">          &#34;He kindly stopped for me -&#34;,
</span><span class="s2">          &#34;The Carriage held but just Ourselves -&#34;,
</span><span class="s2">          &#34;and Immortality&#34;)
</span><span class="s2">          
</span><span class="s2">text_df &lt;- tibble(docid=1:4, text=text)
</span><span class="s2">text_df
</span><span class="s2">&#34;&#34;&#34;</span>

<span class="c1">#è¿è¡ŒRä»£ç </span>
<span class="n">robjects</span><span class="o">.</span><span class="n">r</span><span class="p">(</span><span class="n">r_code</span><span class="p">)</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">docid</th>
<th style="text-align:left">text</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:left">Because I could not stop for Death -</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2</td>
<td style="text-align:left">He kindly stopped for me -</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3</td>
<td style="text-align:left">The Carriage held but just Ourselves -</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">4</td>
<td style="text-align:left">and Immortality</td>
</tr>
</tbody>
</table>
<ol>
<li>å‡†å¤‡ä¸€ä¸ªRä»£ç r_codeï¼Œè¯¥ä»£ç ä¼šç”ŸæˆRè¯­è¨€çš„tibbleæ•°æ®ç±»å‹(Rè¯­è¨€ä¸­çš„ä¸€ç§data frame)ã€‚</li>
<li>robjects.r(r_code) è¿è¡ŒRä»£ç (å­—ç¬¦ä¸²)</li>
<li>åœ¨æœ¬ä¾‹ä¸­ï¼Œä½¿ç”¨pandas2ri.activate()å¼ºåˆ¶å£°æ˜ï¼Œåœ¨Pythonä¸­å°†å˜é‡text_dfä»¥pandas.DataFrameæ˜¾ç¤º</li>
</ol>
<h2 id="è°ƒç”¨ræ•°æ®é›†">è°ƒç”¨Ræ•°æ®é›†</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">rpy2.robjects.r.data(&#39;Rçš„æ•°æ®é›†å&#39;)
</code></pre></div><p>è°ƒç”¨Rçš„æ•°æ®é›†</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">rpy2.robjects</span> <span class="k">as</span> <span class="nn">robjects</span>
</code></pre></div><ul>
<li>robjects.r.data(&lsquo;Ræ•°æ®é›†å&rsquo;) å‡†å¤‡Ræ•°æ®é›†ï¼Œæ­¤æ—¶Pythonå¹¶æ²¡æœ‰æ˜¾ç¤ºè¯¥æ•°æ®é›†ï¼Œå¯ä»¥ç†è§£ä¸ºå‡†å¤‡æ•°æ®</li>
<li><code>robjects.r['Ræ•°æ®é›†å']</code> å¯¼å…¥Rçš„æ•°æ®é›†</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">rpy2.robjects</span> <span class="k">as</span> <span class="nn">robjects</span>
<span class="kn">from</span> <span class="nn">rpy2.robjects</span> <span class="kn">import</span> <span class="n">pandas2ri</span>

<span class="n">pandas2ri</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>

<span class="c1">#å‡†å¤‡iris</span>
<span class="n">robjects</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="s1">&#39;iris&#39;</span><span class="p">)</span>
<span class="c1">#å¯¼å…¥iris</span>
<span class="n">iris</span> <span class="o">=</span> <span class="n">robjects</span><span class="o">.</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;iris&#39;</span><span class="p">]</span>
<span class="n">iris</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">Sepal.Length</th>
<th style="text-align:right">Sepal.Width</th>
<th style="text-align:right">Petal.Length</th>
<th style="text-align:right">Petal.Width</th>
<th style="text-align:left">Species</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">5.1</td>
<td style="text-align:right">3.5</td>
<td style="text-align:right">1.4</td>
<td style="text-align:right">0.2</td>
<td style="text-align:left">setosa</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">4.9</td>
<td style="text-align:right">3</td>
<td style="text-align:right">1.4</td>
<td style="text-align:right">0.2</td>
<td style="text-align:left">setosa</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">4.7</td>
<td style="text-align:right">3.2</td>
<td style="text-align:right">1.3</td>
<td style="text-align:right">0.2</td>
<td style="text-align:left">setosa</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">4.6</td>
<td style="text-align:right">3.1</td>
<td style="text-align:right">1.5</td>
<td style="text-align:right">0.2</td>
<td style="text-align:left">setosa</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:right">5</td>
<td style="text-align:right">3.6</td>
<td style="text-align:right">1.4</td>
<td style="text-align:right">0.2</td>
<td style="text-align:left">setosa</td>
</tr>
</tbody>
</table>
<h2 id="è°ƒç”¨rè¯­è¨€åŒ…">è°ƒç”¨Rè¯­è¨€åŒ…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">rpy2</span><span class="o">.</span><span class="n">robjects</span><span class="o">.</span><span class="n">packages</span><span class="o">.</span><span class="n">importr</span><span class="p">(</span><span class="s1">&#39;RåŒ…å&#39;</span><span class="p">)</span>
</code></pre></div><p>Rè¯­è¨€ä¸­çš„readråŒ…æœ‰read_csv()å‡½æ•°ï¼Œå¯ä»¥è¯»å–csvæ–‡ä»¶ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">rpy2.robjects.packages</span> <span class="kn">import</span> <span class="n">importr</span>
<span class="kn">from</span> <span class="nn">rpy2.robjects</span> <span class="kn">import</span> <span class="n">pandas2ri</span>

<span class="n">pandas2ri</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>

<span class="c1">#å¯¼å…¥Rè¯­è¨€ä¸­çš„readråŒ…</span>
<span class="n">readr</span> <span class="o">=</span> <span class="n">importr</span><span class="p">(</span><span class="s2">&#34;readr&#34;</span><span class="p">)</span>
<span class="c1">#ä½¿ç”¨readråŒ…ä¸­çš„read_csv()å‡½æ•°</span>
<span class="n">mtcars</span> <span class="o">=</span> <span class="n">readr</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&#34;mtcars.csv&#34;</span><span class="p">)</span>
<span class="n">mtcars</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">car</th>
<th style="text-align:right">mpg</th>
<th style="text-align:right">cyl</th>
<th style="text-align:right">disp</th>
<th style="text-align:right">hp</th>
<th style="text-align:right">drat</th>
<th style="text-align:right">wt</th>
<th style="text-align:right">qsec</th>
<th style="text-align:right">vs</th>
<th style="text-align:right">am</th>
<th style="text-align:right">gear</th>
<th style="text-align:right">carb</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">Mazda RX4</td>
<td style="text-align:right">21</td>
<td style="text-align:right">6</td>
<td style="text-align:right">160</td>
<td style="text-align:right">110</td>
<td style="text-align:right">3.9</td>
<td style="text-align:right">2.62</td>
<td style="text-align:right">16.46</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">4</td>
<td style="text-align:right">4</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:left">Mazda RX4 Wag</td>
<td style="text-align:right">21</td>
<td style="text-align:right">6</td>
<td style="text-align:right">160</td>
<td style="text-align:right">110</td>
<td style="text-align:right">3.9</td>
<td style="text-align:right">2.875</td>
<td style="text-align:right">17.02</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">4</td>
<td style="text-align:right">4</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:left">Datsun 710</td>
<td style="text-align:right">22.8</td>
<td style="text-align:right">4</td>
<td style="text-align:right">108</td>
<td style="text-align:right">93</td>
<td style="text-align:right">3.85</td>
<td style="text-align:right">2.32</td>
<td style="text-align:right">18.61</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">4</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:left">Hornet 4 Drive</td>
<td style="text-align:right">21.4</td>
<td style="text-align:right">6</td>
<td style="text-align:right">258</td>
<td style="text-align:right">110</td>
<td style="text-align:right">3.08</td>
<td style="text-align:right">3.215</td>
<td style="text-align:right">19.44</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:left">Hornet Sportabout</td>
<td style="text-align:right">18.7</td>
<td style="text-align:right">8</td>
<td style="text-align:right">360</td>
<td style="text-align:right">175</td>
<td style="text-align:right">3.15</td>
<td style="text-align:right">3.44</td>
<td style="text-align:right">17.02</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">2</td>
</tr>
</tbody>
</table>
<h2 id="cellåªè¿è¡Œrä»£ç ">Cellåªè¿è¡ŒRä»£ç </h2>
<p>ä¸Šé¢çš„å‡ ä¸ªç« èŠ‚ä¸­ï¼Œæ¯ä¸ªcellä¸­ä»£ç å‡ä¸ºPythonå’ŒRçš„æ··ç”¨ï¼Œå¦‚æœåœ¨Cellä¸­åªè¿è¡ŒRä»£ç ï¼Œ</p>
<ol>
<li>å¯ä»¥å…ˆå•ç‹¬åœ¨ä¸€ä¸ªcellä¸­è¿è¡Œ <code>%load_ext rpy2.ipython</code>,</li>
<li>åœ¨å¦å¤–ä¸€ä¸ªcellä¸­ä½¿ç”¨<code>%%R</code>å£°æ˜æœ¬cellä¸­ä½¿ç”¨çš„æ˜¯Rä»£ç ã€‚</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="o">%</span><span class="n">load_ext</span> <span class="n">rpy2</span><span class="o">.</span><span class="n">ipython</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="o">%%</span><span class="n">R</span>

<span class="nf">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span>

<span class="nf">ggplot</span><span class="p">(</span><span class="n">iris</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">Sepal.Length</span><span class="p">,</span> 
                 <span class="n">y</span><span class="o">=</span><span class="n">Sepal.Width</span><span class="p">,</span> 
                 <span class="n">color</span><span class="o">=</span><span class="n">Species</span><span class="p">))</span><span class="o">+</span>
<span class="nf">geom_point</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="output_17_0.png" width="100%" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="o">%%</span><span class="n">R</span> <span class="o">-</span><span class="n">h</span> <span class="m">550</span> <span class="o">-</span><span class="n">w</span> <span class="m">800</span>  <span class="c1">#è®¾ç½®å®½ã€é«˜</span>

<span class="nf">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span>

<span class="nf">ggplot</span><span class="p">(</span><span class="n">iris</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">Sepal.Length</span><span class="p">,</span> 
                 <span class="n">y</span><span class="o">=</span><span class="n">Sepal.Width</span><span class="p">,</span> 
                 <span class="n">color</span><span class="o">=</span><span class="n">Species</span><span class="p">))</span><span class="o">+</span>
<span class="nf">geom_point</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="output_18_0.png" width="100%" />
    
    
</figure>

<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>ä½¿ç”¨pandas_bokehåšå¯è§†åŒ–</title>
      <link>https://hidadeng.github.io/blog/pandas_bokeh_vis/</link>
      <pubDate>Thu, 18 Nov 2021 17:40:10 +0600</pubDate>
      
      <guid>/blog/pandas_bokeh_vis/</guid>
      <description>ç®€æ´æ•°æ®å¯è§†åŒ–</description>
      <content:encoded><![CDATA[<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="https://github.com/hidadeng/DaDengAndHisPython/blob/master/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96pandas_bokeh.zip">ç‚¹å‡»ä¸‹è½½ä»£ç </a></p>
<h2 id="pandas_bokeh">pandas_bokeh</h2>
<p>pandas_bokehå¯ä»¥ä½¿å¾—dataframeç›´æ¥è°ƒç”¨bokehåº•å±‚ä»£ç ã€‚é€šè¿‡ä½¿ç”¨pandas_bokehï¼Œå¯ä»¥åœ¨notebookæˆ–è€…htmlä¸­æ˜¾ç¤ºï¼Œè¯­æ³•ç›¸æ¯”äºbokehæ›´ç®€æ´æ˜“ç”¨ã€‚</p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">pandas_bokeh</span>
</code></pre></div><h2 id="å¿«é€Ÿä¸Šæ‰‹">å¿«é€Ÿä¸Šæ‰‹</h2>
<p>å¯¹fruits.csvåšä¸€ä¸ªæ¡å½¢å›¾</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;fruits.xlsx&#39;</span><span class="p">)</span>
<span class="n">df</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">fruits</th>
<th style="text-align:right">2015</th>
<th style="text-align:right">2016</th>
<th style="text-align:right">2017</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:left">è‹¹æœ</td>
<td style="text-align:right">2</td>
<td style="text-align:right">5</td>
<td style="text-align:right">3</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">æ¢¨</td>
<td style="text-align:right">1</td>
<td style="text-align:right">3</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:left">é¦™è•‰</td>
<td style="text-align:right">4</td>
<td style="text-align:right">3</td>
<td style="text-align:right">4</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:left">è‰è“</td>
<td style="text-align:right">3</td>
<td style="text-align:right">2</td>
<td style="text-align:right">4</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:left">æ¨±æ¡ƒ</td>
<td style="text-align:right">2</td>
<td style="text-align:right">4</td>
<td style="text-align:right">5</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:left">æ©˜å­</td>
<td style="text-align:right">4</td>
<td style="text-align:right">6</td>
<td style="text-align:right">3</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">pandas_bokeh</span>
<span class="kn">import</span> <span class="nn">warnings</span> 
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&#34;ignore&#34;</span><span class="p">)</span> <span class="c1">#å¿½ç•¥æŸäº›ä¸å½±å“ç¨‹åºçš„æç¤º</span>

<span class="c1">#åœ¨notebookä¸­èƒ½æ˜¾ç¤ºå¯è§†åŒ–ç»“æœ</span>
<span class="n">pandas_bokeh</span><span class="o">.</span><span class="n">output_notebook</span><span class="p">()</span>

<span class="c1">#å°†fruitsåˆ—è®¾ç½®ä¸ºè¡Œç´¢å¼•</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;fruits.xlsx&#39;</span><span class="p">)</span>


<span class="n">df</span><span class="o">.</span><span class="n">plot_bokeh</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> 
              <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;fruits&#39;</span><span class="p">,</span> <span class="c1">#å°†fruitsåˆ—é€‰åšxè½´</span>
              <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;2015&#39;</span><span class="p">,</span> <span class="s1">&#39;2016&#39;</span><span class="p">,</span> <span class="s1">&#39;2017&#39;</span><span class="p">],</span> <span class="c1">#å°†å¹´ä»½é€‰åšyè½´</span>
              <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;æ°´æœä»·æ ¼(å…ƒ/æ–¤)&#39;</span><span class="p">,</span>
              <span class="n">title</span><span class="o">=</span><span class="s1">&#39;æ°´æœ&#39;</span><span class="p">,</span>
              <span class="n">show_figure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1">#æ˜¾ç¤º</span>
</code></pre></div>
<figure >
    
        <img src="img/2.gif" width="800" />
    
    
</figure>

<p>ä¸Šé¢çš„ä¾‹å­å·²ç»å¯ä»¥çœ‹åˆ°è¯¥åº“çš„ç®€æ´ä¼˜ç¾ä¹‹å¤„ï¼Œç°åœ¨æˆ‘ä»¬å¤šå­¦ç‚¹</p>
<h2 id="pandas_bokehè¾“å‡ºè®¾å®š">pandas_bokehè¾“å‡ºè®¾å®š</h2>
<ul>
<li>pandas_bokeh.output_notebook() åœ¨notebookä¸­èƒ½æ˜¾ç¤ºå¯è§†åŒ–ç»“æœ</li>
<li>pandas_bokeh.output_file(filename) å°†ç»“æœè¾“å‡ºåˆ°htmlæ–‡ä»¶ä¸­</li>
</ul>
<h2 id="æ”¯æŒå¯è§†åŒ–å›¾ç§ç±»">æ”¯æŒå¯è§†åŒ–å›¾ç§ç±»</h2>
<ul>
<li>line</li>
<li>bar</li>
<li>point</li>
<li>scatter</li>
<li>histogram</li>
<li>area</li>
<li>pie</li>
<li>map</li>
</ul>
<p>ä»¥barä¸ºä¾‹ï¼Œè°ƒç”¨å¯è§†åŒ–æ¥å£æ—¶ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§ä½¿ç”¨æ–¹æ³•</p>
<ul>
<li>df.plot_bokeh.line(&hellip;)</li>
<li>df.plot_bokeh(kind=&lsquo;line&rsquo;)</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;fake_stocks.xlsx&#39;</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">plot_bokeh</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&#34;line&#34;</span><span class="p">,</span> 
              <span class="n">x</span><span class="o">=</span><span class="s1">&#39;æ—¥æœŸ&#39;</span><span class="p">,</span> <span class="c1">#å°†excelä¸­çš„æ—¥æœŸåˆ—å½“åšxè½´</span>
              <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Google&#39;</span><span class="p">,</span> <span class="s1">&#39;Apple&#39;</span><span class="p">])</span> <span class="c1">#å°†&#39;Google&#39;, &#39;Apple&#39;ä¸¤åˆ—ä½œä¸ºyè½´</span>
</code></pre></div>
<figure >
    
        <img src="img/3.gif" width="800" />
    
    
</figure>

<h2 id="é«˜çº§å‚æ•°">é«˜çº§å‚æ•°</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="o">.</span><span class="n">plot_bokeh</span><span class="p">(</span><span class="n">kind</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">figsize</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">xlim</span><span class="p">,</span> <span class="n">ylim</span><span class="p">,</span> <span class="n">xlabel</span><span class="p">,</span> <span class="n">ylabel</span><span class="p">,</span>
              <span class="n">logx</span><span class="p">,</span> <span class="n">logy</span><span class="p">,</span> <span class="n">xticks</span><span class="p">,</span> <span class="n">yticks</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">colormap</span><span class="p">,</span> <span class="n">hovertool</span><span class="p">,</span> 
              <span class="n">zooming</span><span class="p">,</span> <span class="n">panning</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div><ul>
<li>kind: æ”¯æŒçš„å›¾ç§ç±»&quot;line&quot;, &ldquo;point&rdquo;, &ldquo;scatter&rdquo;, &ldquo;bar&rdquo; ,&ldquo;histogram&quot;ç­‰</li>
<li>x: é€‰ä¸­æ•°æ®æŸåˆ—åä½œä¸ºxè½´ã€‚å¦‚æœxä¸ä¼ å…¥å‚æ•°ï¼Œä¼šé»˜è®¤ä½¿ç”¨dfçš„ç´¢å¼•ä½œä¸ºxè½´</li>
<li>y: å°†æ•°æ®ä¸­çš„æŸåˆ—æˆ–æŸäº›åˆ—æŒ‡å®šä¸ºyè½´</li>
<li>figsize: å›¾çš„å°ºå¯¸,å¦‚figsize=(600, 350)</li>
<li>title:  å›¾çš„æ ‡é¢˜</li>
<li>xlim/ylim: è®¾ç½®å›¾çš„xè½´å’Œyè½´çš„èŒƒå›´</li>
<li>xlabel/ylabel: è®¾ç½®xè½´å’Œyè½´çš„åå­—</li>
<li>logx/logy: å¸ƒå°”å‹å€¼ï¼Œå¯¹xå’Œyçš„æ•°æ®æ˜¯å¦è¿›è¡Œlogå˜æ¢</li>
<li>xticks/yticks: æ˜¾æ€§å®šä¹‰æ¨ªçºµåæ ‡åˆ»åº¦</li>
<li>color: å¯¹å›¾ä¸­ä½¿ç”¨åŒä¸€çš„é¢œè‰²ï¼Œå¦‚æœæƒ³å®šä¹‰å¤šç§é¢œè‰²ï¼Œè¯·ä½¿ç”¨colormapå‚æ•°</li>
<li>colormap: å¯ä»¥å¯¹å›¾ä¸­çš„ä¸åŒå¯¹è±¡è®¾ç½®é¢œè‰²ï¼Œ ä¼ å…¥çš„æ˜¯é¢œè‰²å­—ç¬¦ä¸²åˆ—è¡¨ã€‚</li>
<li>hovertool: é»˜è®¤Trueï¼Œé¼ æ ‡æ”¾åœ¨å›¾ä¸Šä¼šæ‚¬æµ®æ˜¾ç¤ºå…·ä½“ä¿¡æ¯ã€‚</li>
<li>zooming: å¸ƒå°”å€¼ï¼Œé»˜è®¤Trueæ”¯æŒç¼©æ”¾</li>
<li>panning: å¸ƒå°”å€¼ï¼Œé»˜è®¤Trueæ”¯æŒå¹³ç§»</li>
<li>kwargs**: æ›´å¤šå‚æ•°è®¾å®šè¯·çœ‹å®˜æ–¹æ–‡æ¡£</li>
</ul>
<h2 id="æ–‡æ¡£">æ–‡æ¡£</h2>
<ul>
<li>pandas_bokehæ–‡æ¡£åœ°å€https://github.com/PatrikHlobil/Pandas-Bokeh</li>
<li>Bokehå®˜æ–¹æ–‡æ¡£åœ°å€https://docs.bokeh.org/en/latest/</li>
</ul>
<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>äººå·¥æ™ºèƒ½ä¸å›¾æ•°æ®åº“æŠ€æœ¯</title>
      <link>https://hidadeng.github.io/blog/ai_and_graph_database_technology/</link>
      <pubDate>Tue, 16 Nov 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/ai_and_graph_database_technology/</guid>
      <description>é€šè¿‡é¢†åŸŸçŸ¥è¯†å’Œå…³è”æ•°æ®æé«˜AIæ€§èƒ½,äººå·¥æ™ºèƒ½ä¸å›¾æ•°æ®åº“æŠ€æœ¯ã€‚</description>
      <content:encoded><![CDATA[
<figure >
    
        <img src="img/Neo4j-ai-graph-technology-white-paper-ZH-01.png" width="100%" />
    
    
</figure>


<figure >
    
        <img src="img/Neo4j-ai-graph-technology-white-paper-ZH-02.png" width="100%" />
    
    
</figure>


<figure >
    
        <img src="img/Neo4j-ai-graph-technology-white-paper-ZH-03.png" width="100%" />
    
    
</figure>


<figure >
    
        <img src="img/Neo4j-ai-graph-technology-white-paper-ZH-04.png" width="100%" />
    
    
</figure>


<figure >
    
        <img src="img/Neo4j-ai-graph-technology-white-paper-ZH-05.png" width="100%" />
    
    
</figure>


<figure >
    
        <img src="img/Neo4j-ai-graph-technology-white-paper-ZH-06.png" width="100%" />
    
    
</figure>


<figure >
    
        <img src="img/Neo4j-ai-graph-technology-white-paper-ZH-07.png" width="100%" />
    
    
</figure>


<figure >
    
        <img src="img/Neo4j-ai-graph-technology-white-paper-ZH-08.png" width="100%" />
    
    
</figure>


<figure >
    
        <img src="img/Neo4j-ai-graph-technology-white-paper-ZH-09.png" width="100%" />
    
    
</figure>


<figure >
    
        <img src="img/Neo4j-ai-graph-technology-white-paper-ZH-10.png" width="100%" />
    
    
</figure>

<br>
<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="https://github.com/hidadeng/DaDengAndHisPython/blob/master/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E4%B8%8E%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8A%80%E6%9C%AF.pdf">https://github.com/hidadeng/DaDengAndHisPython/blob/master/äººå·¥æ™ºèƒ½ä¸å›¾æ•°æ®åº“æŠ€æœ¯.pdf</a></p>
<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>æ¨è|pandaså¿…çŸ¥å¿…ä¼š50ä¾‹</title>
      <link>https://hidadeng.github.io/blog/pandas_must_know_50_examples/</link>
      <pubDate>Tue, 16 Nov 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/pandas_must_know_50_examples/</guid>
      <description>pandaså¸¸ç”¨çŸ¥è¯†8000å­—è¯¦ç»†è¯´æ˜</description>
      <content:encoded><![CDATA[<blockquote>
<p>src: <a href="https://mp.weixin.qq.com/s/j71IPWmT57g3VTajGhgN7Q">https://mp.weixin.qq.com/s/j71IPWmT57g3VTajGhgN7Q</a>
author: ä¿Šæ¬£
å…¬ä¼—å·: å…³äºæ•°æ®åˆ†æä¸å¯è§†åŒ–</p>
</blockquote>
<br>
<p>æœ¬ç¯‡æˆ‘ä»¬ç»§ç»­å‰é¢pandasç³»åˆ—æ•™ç¨‹çš„æ¢è®¨ï¼Œä»Šå¤©å°ç¼–ä¼šä»‹ç»pandasåº“å½“ä¸­ä¸€äº›éå¸¸åŸºç¡€çš„æ–¹æ³•ä¸å‡½æ•°ï¼Œå¸Œæœ›å¤§å®¶çœ‹äº†ä¹‹åä¼šæœ‰æ‰€æ”¶è·ã€‚</p>
<h2 id="å‡†å¤‡éœ€è¦çš„æ•°æ®é›†">å‡†å¤‡éœ€è¦çš„æ•°æ®é›†</h2>
<p>æˆ‘ä»¬å…ˆå‡†å¤‡ç”Ÿæˆä¸€äº›éšæœºæ•°ï¼Œä½œä¸ºåé¢éœ€è¦ç”¨åˆ°çš„æ•°æ®é›†</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&#34;1/1/2000&#34;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="n">series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s2">&#34;a&#34;</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">,</span> <span class="s2">&#34;c&#34;</span><span class="p">,</span> <span class="s2">&#34;d&#34;</span><span class="p">,</span> <span class="s2">&#34;e&#34;</span><span class="p">])</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> 
                  <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span>
                  <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&#34;A&#34;</span><span class="p">,</span> <span class="s2">&#34;B&#34;</span><span class="p">,</span> <span class="s2">&#34;C&#34;</span><span class="p">])</span>

</code></pre></div><br>
<h2 id="head-and-tail">Head and tail</h2>
<p>head()å’Œtail()æ–¹æ³•æ˜¯ç”¨æ¥æŸ¥çœ‹æ•°æ®é›†å½“ä¸­çš„å‰å‡ è¡Œå’Œæœ«å°¾å‡ è¡Œçš„ï¼Œé»˜è®¤æ˜¯æŸ¥çœ‹5è¡Œï¼Œå½“ç„¶è¯»è€…æœ‹å‹ä¹Ÿå¯ä»¥è‡ªè¡Œè®¾å®šè¡Œæ•°</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">series2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
<span class="n">series2</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><pre><code>0    0.578276
1    0.643313
2   -0.336030
3   -0.422468
4   -0.493812
dtype: float64
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># åŒç†</span>
<span class="n">series2</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</code></pre></div><pre><code>95    1.307962
96    1.165135
97    0.717692
98    0.605668
99    0.264990
dtype: float64
</code></pre>
<br>
<h2 id="æ•°æ®çš„ç»Ÿè®¡åˆ†æ">æ•°æ®çš„ç»Ÿè®¡åˆ†æ</h2>
<p>åœ¨pandaså½“ä¸­ç”¨describe()æ–¹æ³•æ¥å¯¹è¡¨æ ¼ä¸­çš„æ•°æ®åšä¸€ä¸ªæ¦‚æ‹¬æ€§çš„ç»Ÿè®¡åˆ†æï¼Œä¾‹å¦‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">series2</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</code></pre></div><pre><code>count    100.000000
mean       0.106277
std        1.027541
min       -2.554005
25%       -0.510912
50%        0.028765
75%        0.795444
max        2.512260
dtype: float64
</code></pre>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®¾ç½®å¥½è¾“å‡ºçš„åˆ†ä½</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">series2</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">])</span>
</code></pre></div><pre><code>count    100.000000
mean       0.106277
std        1.027541
min       -2.554005
5%        -1.450067
25%       -0.510912
50%        0.028765
75%        0.795444
95%        1.757926
max        2.512260
dtype: float64
</code></pre>
<p>å¯¹äºç¦»æ•£å‹çš„æ•°æ®æ¥è¯´ï¼Œdescribe()æ–¹æ³•ç»™å‡ºçš„ç»“æœåˆ™ä¼šç®€æ´å¾ˆå¤š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s2">&#34;a&#34;</span><span class="p">,</span> <span class="s2">&#34;a&#34;</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">,</span> <span class="s2">&#34;a&#34;</span><span class="p">,</span> <span class="s2">&#34;a&#34;</span><span class="p">,</span> <span class="s2">&#34;d&#34;</span><span class="p">,</span> <span class="s2">&#34;c&#34;</span><span class="p">,</span> <span class="s2">&#34;d&#34;</span><span class="p">,</span> <span class="s2">&#34;a&#34;</span><span class="p">])</span>
<span class="n">s</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</code></pre></div><pre><code>count     10
unique     4
top        a
freq       5
dtype: object
</code></pre>
<p>è¦æ˜¯è¡¨æ ¼ä¸­æ—¢åŒ…å«äº†ç¦»æ•£å‹æ•°æ®ï¼Œä¹ŸåŒ…å«äº†è¿ç»­å‹çš„æ•°æ®ï¼Œé»˜è®¤çš„è¯ï¼Œdescribe()æ˜¯ä¼šé’ˆå¯¹<strong>è¿ç»­å‹æ•°æ®</strong>è¿›è¡Œç»Ÿè®¡åˆ†æ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;Yes&#34;</span><span class="p">,</span> <span class="s2">&#34;Yes&#34;</span><span class="p">,</span> <span class="s2">&#34;No&#34;</span><span class="p">,</span> <span class="s2">&#34;No&#34;</span><span class="p">],</span> <span class="s2">&#34;b&#34;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">4</span><span class="p">)})</span>
<span class="n">df2</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">|       |        b |
|:------|---------:|
| count | 4        |
| mean  | 0.967026 |
| std   | 0.859657 |
| min   | 0.204027 |
| 25%   | 0.233797 |
| 50%   | 0.947075 |
| 75%   | 1.6803   |
| max   | 1.76993  |
</code></pre></div><p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‡å®šè®©å…¶å¼ºåˆ¶ç»Ÿè®¡åˆ†æç¦»æ•£å‹æ•°æ®æˆ–è€…è¿ç»­å‹æ•°æ®</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df2</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s2">&#34;object&#34;</span><span class="p">])</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">|        | a   |
|:-------|:----|
| count  | 4   |
| unique | 2   |
| top    | Yes |
| freq   | 2   |
</code></pre></div><p>åŒç†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‡å®šè¿ç»­å‹çš„æ•°æ®è¿›è¡Œç»Ÿè®¡åˆ†æ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df2</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s2">&#34;number&#34;</span><span class="p">])</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">|       |        b |
|:------|---------:|
| count | 4        |
| mean  | 0.967026 |
| std   | 0.859657 |
| min   | 0.204027 |
| 25%   | 0.233797 |
| 50%   | 0.947075 |
| 75%   | 1.6803   |
| max   | 1.76993  |
</code></pre></div><p>å¦‚æœæˆ‘ä»¬éƒ½è¦å»åšç»Ÿè®¡åˆ†æï¼Œå¯ä»¥è¿™ä¹ˆæ¥æ‰§è¡Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df2</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s2">&#34;all&#34;</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">|        | a   |          b |
|:-------|:----|-----------:|
| count  | 4   |   4        |
| unique | 2   | nan        |
| top    | Yes | nan        |
| freq   | 2   | nan        |
| mean   | nan |   0.967026 |
| std    | nan |   0.859657 |
| min    | nan |   0.204027 |
| 25%    | nan |   0.233797 |
| 50%    | nan |   0.947075 |
| 75%    | nan |   1.6803   |
| max    | nan |   1.76993  |
</code></pre></div><br>
<h2 id="æœ€å¤§æœ€å°å€¼çš„ä½ç½®">æœ€å¤§/æœ€å°å€¼çš„ä½ç½®</h2>
<p>idxmin()å’Œidxmax()æ–¹æ³•æ˜¯ç”¨æ¥æŸ¥æ‰¾è¡¨æ ¼å½“ä¸­æœ€å¤§/æœ€å°å€¼çš„ä½ç½®ï¼Œè¿”å›çš„æ˜¯å€¼çš„ç´¢å¼•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">s1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="n">s1</span>
</code></pre></div><pre><code>0    2.244266
1    1.398258
2   -1.827026
3   -0.058691
4    0.275471
dtype: float64
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">s1</span><span class="o">.</span><span class="n">idxmin</span><span class="p">(),</span> <span class="n">s1</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>
</code></pre></div><pre><code>(2, 0)
</code></pre>
<p>ç”¨åœ¨DataFrameä¸Šé¢çš„è¯ï¼Œå¦‚ä¸‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> 
                   <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&#34;A&#34;</span><span class="p">,</span> <span class="s2">&#34;B&#34;</span><span class="p">,</span> <span class="s2">&#34;C&#34;</span><span class="p">])</span>
<span class="n">df1</span><span class="o">.</span><span class="n">idxmin</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">|    |   0 |
|:---|----:|
| A  |   2 |
| B  |   3 |
| C  |   2 |
</code></pre></div><p>åŒç†ï¼Œæˆ‘ä»¬å°†axiså‚æ•°æ”¹æˆ1</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df1</span><span class="o">.</span><span class="n">idxmin</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">|    | 0   |
|---:|:----|
|  0 | B   |
|  1 | B   |
|  2 | A   |
|  3 | B   |
|  4 | B   |
</code></pre></div><br>
<h2 id="value_countsæ–¹æ³•">value_counts()æ–¹æ³•</h2>
<p>pandaså½“ä¸­çš„value_counts()æ–¹æ³•ä¸»è¦ç”¨äºæ•°æ®è¡¨çš„è®¡æ•°ä»¥åŠæ’åºï¼Œç”¨æ¥æŸ¥çœ‹è¡¨æ ¼å½“ä¸­ï¼ŒæŒ‡å®šåˆ—æœ‰å¤šå°‘ä¸ªä¸åŒçš„æ•°æ®å€¼å¹¶ä¸”è®¡ç®—ä¸åŒå€¼åœ¨è¯¥åˆ—å½“ä¸­å‡ºç°çš„æ¬¡æ•°ï¼Œå…ˆæ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;åŸå¸‚&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;åŒ—äº¬&#39;</span><span class="p">,</span> <span class="s1">&#39;å¹¿å·&#39;</span><span class="p">,</span> <span class="s1">&#39;ä¸Šæµ·&#39;</span><span class="p">,</span> <span class="s1">&#39;ä¸Šæµ·&#39;</span><span class="p">,</span> <span class="s1">&#39;æ­å·&#39;</span><span class="p">,</span> <span class="s1">&#39;æˆéƒ½&#39;</span><span class="p">,</span> <span class="s1">&#39;é¦™æ¸¯&#39;</span><span class="p">,</span> <span class="s1">&#39;å—äº¬&#39;</span><span class="p">,</span> <span class="s1">&#39;åŒ—äº¬&#39;</span><span class="p">,</span> <span class="s1">&#39;åŒ—äº¬&#39;</span><span class="p">],</span>
                   <span class="s1">&#39;æ”¶å…¥&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="mi">5500</span><span class="p">,</span> <span class="mi">5500</span><span class="p">,</span> <span class="mi">4000</span><span class="p">,</span> <span class="mi">50000</span><span class="p">,</span> <span class="mi">8000</span><span class="p">,</span> <span class="mi">5000</span><span class="p">,</span> <span class="mi">5200</span><span class="p">,</span> <span class="mi">5600</span><span class="p">],</span>
                   <span class="s1">&#39;å¹´é¾„&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">25</span><span class="p">]})</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&#34;åŸå¸‚&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</code></pre></div><pre><code>åŒ—äº¬    3
ä¸Šæµ·    2
å¹¿å·    1
æ­å·    1
å—äº¬    1
é¦™æ¸¯    1
æˆéƒ½    1
Name: åŸå¸‚, dtype: int64
</code></pre>
<p>å¯ä»¥çœ‹åˆ°åŒ—äº¬å‡ºç°äº†3æ¬¡ï¼Œä¸Šæµ·å‡ºç°äº†2æ¬¡ï¼Œå¹¶ä¸”é»˜è®¤é‡‡ç”¨çš„æ˜¯é™åºæ¥æ’åˆ—çš„ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ç”¨å‡åºçš„æ–¹å¼æ¥æ’åˆ—ä¸€ä¸‹æ”¶å…¥è¿™ä¸€åˆ—</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="p">[</span><span class="s2">&#34;æ”¶å…¥&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div><pre><code>5600     1
5000     1
8000     1
5200     1
50000    1
4000     1
10000    2
5500     2
Name: æ”¶å…¥, dtype: int64
</code></pre>
<p>åŒæ—¶é‡Œé¢ä¹Ÿè¿˜å¯ä»¥åˆ©ç”¨å‚æ•°normalize=Trueï¼Œæ¥è®¡ç®—ä¸åŒå€¼çš„è®¡æ•°å æ¯”</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python">
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;å¹´é¾„&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                      <span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div><pre><code>32    0.1
34    0.1
50    0.1
40    0.1
43    0.1
45    0.1
25    0.4
Name: å¹´é¾„, dtype: float64
</code></pre>
<br>
<h2 id="æ•°æ®åˆ†ç»„">æ•°æ®åˆ†ç»„</h2>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨cut()æ–¹æ³•ä»¥åŠqcut()æ–¹æ³•æ¥å¯¹è¡¨æ ¼ä¸­çš„è¿ç»­å‹æ•°æ®åˆ†ç»„ï¼Œé¦–å…ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹cut()æ–¹æ³•ï¼Œå‡è®¾ä¸‹é¢è¿™ç»„æ•°æ®ä»£è¡¨çš„æ˜¯å°ç»„æ¯ä¸ªæˆå‘˜çš„å¹´é¾„</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">ages</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="mi">36</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">58</span><span class="p">,</span><span class="mi">62</span><span class="p">,</span><span class="mi">85</span><span class="p">,</span><span class="mi">89</span><span class="p">,</span><span class="mi">95</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">32</span><span class="p">])</span>
<span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">ages</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</code></pre></div><pre><code>[(1.907, 20.6], (1.907, 20.6], (1.907, 20.6], (39.2, 57.8], (20.6, 39.2], ..., (1.907, 20.6], (1.907, 20.6], (20.6, 39.2], (20.6, 39.2], (20.6, 39.2]]
Length: 16
Categories (5, interval[float64]): [(1.907, 20.6] &lt; (20.6, 39.2] &lt; (39.2, 57.8] &lt; (57.8, 76.4] &lt; (76.4, 95.0]]
</code></pre>
<p>ç”±ä¸Šå¯ä»¥çœ‹åˆ°ç”¨cut()æ–¹æ³•å°†æ•°æ®å¹³åˆ†æˆäº†5ä¸ªåŒºé—´ï¼Œä¸”åŒºé—´ä¸¤è¾¹éƒ½æœ‰æ‰©å±•ä»¥åŒ…å«<strong>æœ€å¤§å€¼å’Œæœ€å°å€¼</strong>ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™æ¯ä¸€ä¸ªåŒºé—´åŠ ä¸Šæ ‡è®°</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">ages</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="sa">u</span><span class="s2">&#34;å©´å„¿&#34;</span><span class="p">,</span><span class="sa">u</span><span class="s2">&#34;å°‘å¹´&#34;</span><span class="p">,</span><span class="sa">u</span><span class="s2">&#34;é’å¹´&#34;</span><span class="p">,</span><span class="sa">u</span><span class="s2">&#34;ä¸­å¹´&#34;</span><span class="p">,</span><span class="sa">u</span><span class="s2">&#34;è€å¹´&#34;</span><span class="p">])</span>
</code></pre></div><pre><code>['å©´å„¿', 'å©´å„¿', 'å©´å„¿', 'é’å¹´', 'å°‘å¹´', ..., 'å©´å„¿', 'å©´å„¿', 'å°‘å¹´', 'å°‘å¹´', 'å°‘å¹´']
Length: 16
Categories (5, object): ['å©´å„¿' &lt; 'å°‘å¹´' &lt; 'é’å¹´' &lt; 'ä¸­å¹´' &lt; 'è€å¹´']
</code></pre>
<p>è€Œå¯¹äºqcut()æ–¹æ³•æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šåŒºé—´æ¥è¿›è¡Œåˆ†ç»„ï¼Œä¾‹å¦‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">pd</span><span class="o">.</span><span class="n">qcut</span><span class="p">(</span><span class="n">ages</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;å°æœ‹å‹&#39;</span><span class="p">,</span><span class="s1">&#39;å¤§å­©å­&#39;</span><span class="p">])</span>
</code></pre></div><pre><code>['å°æœ‹å‹', 'å°æœ‹å‹', 'å°æœ‹å‹', 'å¤§å­©å­', 'å¤§å­©å­', ..., 'å°æœ‹å‹', 'å°æœ‹å‹', 'å°æœ‹å‹', 'å°æœ‹å‹', 'å°æœ‹å‹']
Length: 16
Categories (2, object): ['å°æœ‹å‹' &lt; 'å¤§å­©å­']
</code></pre>
<p>è¿™é‡Œå°†å¹´é¾„è¿™ç»„æ•°æ®åˆ†æˆä¸¤éƒ¨åˆ†[0, 0.5, 1]ï¼Œä¸€ç»„æ˜¯æ ‡ä¸Šæ ‡è®°å°æœ‹å‹ï¼Œå¦ä¸€ç»„æ˜¯å¤§å­©å­ï¼Œä¸è¿‡é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç”¨çš„cut()æ–¹æ³•æ¯”è¾ƒå¤š</p>
<p><br><br></p>
<h2 id="å¼•ç”¨å‡½æ•°">å¼•ç”¨å‡½æ•°</h2>
<p>è¦æ˜¯åœ¨è¡¨æ ¼å½“ä¸­å¼•ç”¨å…¶ä»–çš„æ–¹æ³•ï¼Œæˆ–è€…æ˜¯è‡ªå»ºçš„å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨é€šè¿‡pandaså½“ä¸­çš„ä»¥ä¸‹è¿™å‡ ä¸ªæ–¹æ³•</p>
<ul>
<li>pipe()</li>
<li>apply()å’Œapplymap()</li>
<li>agg()å’Œtransform()</li>
</ul>
<br>
<h2 id="pipeæ–¹æ³•">pipe()æ–¹æ³•</h2>
<p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹pipe()è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å°†è‡ªå·±å®šä¹‰å¥½çš„å‡½æ•°ï¼Œä»¥é“¾è·¯çš„å½¢å¼ä¸€ä¸ªæ¥ç€ä¸€ä¸ªä¼ ç»™æˆ‘ä»¬è¦å¤„ç†çš„æ•°æ®é›†ä¸Š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">extract_city_name</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&#34;state_name&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&#34;state_and_code&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;,&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df</span>

<span class="k">def</span> <span class="nf">add_country_name</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">country_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&#34;state_and_country&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&#34;state_name&#34;</span><span class="p">]</span> <span class="o">+</span> <span class="n">country_name</span>
    <span class="k">return</span> <span class="n">df</span>
</code></pre></div><p>ç„¶åæˆ‘ä»¬ç”¨pip()è¿™ä¸ªæ–¹æ³•æ¥å°†ä¸Šé¢æˆ‘ä»¬å®šä¹‰çš„å‡½æ•°ä¸²è”èµ·æ¥</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df_p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&#34;city_and_code&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;Arizona, AZ&#34;</span><span class="p">]})</span>
<span class="n">df_p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&#34;state_and_code&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;Arizona, AZ&#34;</span><span class="p">]})</span>
<span class="n">df_p</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">extract_city_name</span><span class="p">)</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">add_country_name</span><span class="p">,</span> <span class="n">country_name</span><span class="o">=</span><span class="s2">&#34;_USA&#34;</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">|    | state_and_code   | state_name   | state_and_country   |
|---:|:-----------------|:-------------|:--------------------|
|  0 | Arizona, AZ      | Arizona      | Arizona_USA         |
</code></pre></div><br>
<h2 id="applyæ–¹æ³•å’Œapplymapæ–¹æ³•">apply()æ–¹æ³•å’Œapplymap()æ–¹æ³•</h2>
<p>apply()æ–¹æ³•å¯ä»¥å¯¹è¡¨æ ¼ä¸­çš„æ•°æ®æŒ‰ç…§è¡Œæˆ–è€…æ˜¯åˆ—æ–¹å‘è¿›è¡Œå¤„ç†ï¼Œé»˜è®¤æ˜¯æŒ‰ç…§åˆ—æ–¹å‘ï¼Œå¦‚ä¸‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">A   -0.101751
B   -0.360288
C   -0.637433
dtype: float64
</code></pre></div><p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡axiså‚æ•°æ¥è¿›è¡Œè°ƒèŠ‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">0   -0.803675
1   -0.179640
2   -1.200973
3    0.156888
4    0.381631
5    0.049274
6    1.174923
7    0.612591
dtype: float64
</code></pre></div><p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨åŒ¿åå‡½æ•°lambdaçš„å½¢å¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">())</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">A    1.922863
B    2.874672
C    1.943930
dtype: float64
</code></pre></div><p>ä¹Ÿå¯ä»¥è°ƒç”¨è‡ªå·±å®šä¹‰çš„å‡½æ•°æ–¹æ³•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&#34;A&#34;</span><span class="p">,</span> <span class="s2">&#34;B&#34;</span><span class="p">,</span> <span class="s2">&#34;C&#34;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">normalize</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span> <span class="o">/</span> <span class="n">x</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
</code></pre></div><p>æˆ‘ä»¬ç”¨ä¸Šapply()æ–¹æ³•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">normalize</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">          A         B         C
0  1.149795  0.390263 -0.813770
1  0.805843 -0.532374  0.859627
2  0.047824 -0.085334 -0.067179
3 -0.903319 -1.215023  1.149538
4 -1.100144  1.442467 -1.128216
</code></pre></div><p>apply()æ–¹æ³•ä½œç”¨äºæ•°æ®é›†å½“ä¸­çš„æ¯ä¸ªè¡Œæˆ–è€…æ˜¯åˆ—ï¼Œè€Œapplymap()æ–¹æ³•åˆ™æ˜¯å¯¹æ•°æ®é›†å½“ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½è¿›è¡Œå¤„ç†</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;key1&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">],</span>
                   <span class="s1">&#39;key2&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">],</span>
                   <span class="s1">&#39;data1&#39;</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
                   <span class="s1">&#39;data2&#39;</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">15</span><span class="p">)})</span>
<span class="n">df</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">  key1   key2  data1  data2
0    a    one      1     10
1    c    two      2     11
2    b  three      3     12
3    b   four      4     13
4    d   five      5     14
</code></pre></div><p>æˆ‘ä»¬æ¥è‡ªå®šä¹‰ä¸€ä¸ªå‡½æ•°</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python">
<span class="k">def</span> <span class="nf">add_A</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&#34;A&#34;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    
<span class="n">df</span><span class="o">.</span><span class="n">applymap</span><span class="p">(</span><span class="n">add_A</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">  key1    key2 data1 data2
0   Aa    Aone    A1   A10
1   Ac    Atwo    A2   A11
2   Ab  Athree    A3   A12
3   Ab   Afour    A4   A13
4   Ad   Afive    A5   A14
</code></pre></div><p>æˆ‘ä»¬ç„¶åä¹Ÿå¯ä»¥é€šè¿‡lambda()è‡ªå®šä¹‰å‡½æ•°æ–¹æ³•ï¼Œç„¶åæ¥å»é™¤æ‰è¿™ä¸ªA</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="o">.</span><span class="n">applymap</span><span class="p">(</span><span class="n">add_A</span><span class="p">)</span><span class="o">.</span><span class="n">applymap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;A&#34;</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">  key1   key2 data1 data2
0    a    one     1    10
1    c    two     2    11
2    b  three     3    12
3    b   four     4    13
4    d   five     5    14
</code></pre></div><br>
<h2 id="aggæ–¹æ³•å’Œtransformæ–¹æ³•">agg()æ–¹æ³•å’Œtransform()æ–¹æ³•</h2>
<p>agg()æ–¹æ³•æœ¬æ„ä¸Šæ˜¯èšåˆå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç”¨äºç»Ÿè®¡åˆ†æçš„ä¸€ç³»åˆ—æ–¹æ³•éƒ½æ”¾ç½®å…¶ä¸­ï¼Œå¹¶ä¸”æ”¾ç½®å¤šä¸ª</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> 
                  <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&#34;A&#34;</span><span class="p">,</span> <span class="s2">&#34;B&#34;</span><span class="p">,</span> <span class="s2">&#34;C&#34;</span><span class="p">])</span>
<span class="n">df</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">)</span>
</code></pre></div><pre><code>A    2.042573
B    2.189269
C   -1.066976
dtype: float64
</code></pre>
<p>å½“ç„¶ï¼Œå½“ä¸­çš„np.suméƒ¨åˆ†ä¹Ÿå¯ä»¥ç”¨å­—ç¬¦ä¸²æ¥è¡¨ç¤ºï¼Œä¾‹å¦‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python">
<span class="n">df</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s2">&#34;sum&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>A    2.042573
B    2.189269
C   -1.066976
dtype: float64
</code></pre>
<p>æˆ‘ä»¬å°è¯•åœ¨å½“ä¸­æ”¾ç½®å¤šä¸ªç»Ÿè®¡åˆ†æçš„å‡½æ•°æ–¹æ³•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s2">&#34;sum&#34;</span><span class="p">,</span> <span class="s2">&#34;mean&#34;</span><span class="p">,</span> <span class="s2">&#34;median&#34;</span><span class="p">])</span>
</code></pre></div><p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å’ŒlambdaåŒ¿åå‡½æ•°æ··åˆç€æ­é…</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s2">&#34;sum&#34;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">mean</span><span class="p">()])</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">                 A         B         C
sum      -0.066486 -1.288341 -1.236244
&lt;lambda&gt; -0.013297 -0.257668 -0.247249
</code></pre></div><p>æˆ–è€…å’Œè‡ªå·±å®šä¹‰çš„å‡½æ•°æ–¹æ³•æ··åˆç€ç”¨</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">my_mean</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    
<span class="n">df</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s2">&#34;sum&#34;</span><span class="p">,</span> <span class="n">my_mean</span><span class="p">])</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">                A         B         C
sum     -4.850201 -1.544773  0.429007
my_mean -0.970040 -0.308955  0.085801
</code></pre></div><p>ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬åœ¨agg()æ–¹æ³•ä¸­æ·»åŠ å­—å…¸ï¼Œå®ç°ä¸åŒçš„åˆ—ä½¿ç”¨ä¸åŒçš„å‡½æ•°æ–¹æ³•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s2">&#34;A&#34;</span><span class="p">:</span> <span class="s2">&#34;sum&#34;</span><span class="p">,</span> <span class="s2">&#34;B&#34;</span><span class="p">:</span> <span class="s2">&#34;mean&#34;</span><span class="p">})</span>

</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">A   -0.801753
B    0.097550
dtype: float64
</code></pre></div><br>
<h2 id="ç´¢å¼•å’Œåˆ—åçš„é‡å‘½å">ç´¢å¼•å’Œåˆ—åçš„é‡å‘½å</h2>
<p>é’ˆå¯¹ç´¢å¼•å’Œåˆ—åçš„é‡å‘½åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡pandaså½“ä¸­çš„rename()æ–¹æ³•æ¥å®ç°ï¼Œä¾‹å¦‚æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªæ•°æ®é›†</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> 
                   <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&#34;A&#34;</span><span class="p">,</span> <span class="s2">&#34;B&#34;</span><span class="p">,</span> <span class="s2">&#34;C&#34;</span><span class="p">],</span>
                   <span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;a&#34;</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">,</span> <span class="s2">&#34;c&#34;</span><span class="p">,</span> <span class="s2">&#34;d&#34;</span><span class="p">,</span> <span class="s2">&#34;e&#34;</span><span class="p">])</span>
<span class="n">df1</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">          A         B         C
a  0.343690  0.869984 -1.929814
b  1.025613  0.470155 -0.242463
c -0.400908 -0.362684  0.226857
d -1.339706 -0.302005 -1.784452
e -0.957026 -0.813600  0.215098
</code></pre></div><p>æˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥æ“ä½œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df1</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&#34;A&#34;</span><span class="p">:</span> <span class="s2">&#34;one&#34;</span><span class="p">,</span> <span class="s2">&#34;B&#34;</span><span class="p">:</span> <span class="s2">&#34;two&#34;</span><span class="p">,</span> <span class="s2">&#34;C&#34;</span><span class="p">:</span> <span class="s2">&#34;three&#34;</span><span class="p">},</span>
           <span class="n">index</span><span class="o">=</span><span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="s2">&#34;apple&#34;</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">:</span> <span class="s2">&#34;banana&#34;</span><span class="p">,</span> <span class="s2">&#34;c&#34;</span><span class="p">:</span> <span class="s2">&#34;cat&#34;</span><span class="p">})</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">             one       two     three
apple   0.383813  0.588964 -0.162386
banana -0.462068 -2.938896  0.935492
cat    -0.059807 -1.987281  0.095432
d      -0.085230  2.013733 -1.324039
e      -0.678352  0.306776  0.808697
</code></pre></div><p>å½“ç„¶æˆ‘ä»¬å¯ä»¥æ‹†å¼€æ¥ï¼Œå•ç‹¬å¯¹è¡Œæˆ–è€…æ˜¯åˆ—è¿›è¡Œé‡å‘½åï¼Œå¯¹åˆ—çš„é‡å‘½åå¯ä»¥è¿™ä¹ˆæ¥åš</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df1</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s2">&#34;A&#34;</span><span class="p">:</span> <span class="s2">&#34;one&#34;</span><span class="p">,</span> <span class="s2">&#34;B&#34;</span><span class="p">:</span> <span class="s2">&#34;two&#34;</span><span class="p">,</span> <span class="s2">&#34;C&#34;</span><span class="p">:</span> <span class="s2">&#34;three&#34;</span><span class="p">},</span> 
           <span class="n">axis</span> <span class="o">=</span> <span class="s2">&#34;columns&#34;</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">        one       two     three
a -0.997108 -1.383011  0.474298
b  1.009910  0.286303  1.120783
c  1.130700 -0.566922  1.841451
d -0.350438 -0.171079 -0.079804
e  0.988050 -0.524604  0.653306
</code></pre></div><br>
<h2 id="æ’åº">æ’åº</h2>
<p>åœ¨pandaså½“ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é’ˆå¯¹æ•°æ®é›†å½“ä¸­çš„å€¼æ¥è¿›è¡Œæ’åº</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">{</span><span class="s2">&#34;one&#34;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> 
     <span class="s2">&#34;two&#34;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> 
     <span class="s2">&#34;three&#34;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]}</span>
<span class="p">)</span>

<span class="n">df1</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">   one  two  three
0    2    1      5
1    1    3      4
2    1    2      3
3    1    4      2
</code></pre></div><p>æˆ‘ä»¬æŒ‰ç…§â€œthreeâ€è¿™ä¸€åˆ—å½“ä¸­çš„æ•°å€¼æ¥è¿›è¡Œæ’åº</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df1</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span> <span class="o">=</span> <span class="s2">&#34;three&#34;</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">   one  two  three
3    1    4      2
2    1    2      3
1    1    3      4
0    2    1      5
</code></pre></div><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¾ç…§å¤šåˆ—è¿›è¡Œæ’åº</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df1</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;one&#34;</span><span class="p">,</span> <span class="s2">&#34;two&#34;</span><span class="p">])</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">   one  two  three
2    1    2      3
1    1    3      4
3    1    4      2
0    2    1      5
</code></pre></div><p>åœ¨â€œoneâ€è¿™ä¸€åˆ—ç›¸ç­‰çš„æ—¶å€™ï¼Œæ¯”è¾ƒâ€œtwoâ€è¿™ä¸€åˆ—æ•°å€¼çš„å¤§å°ï¼Œåœ¨æ’åºçš„è¿‡ç¨‹å½“ä¸­ï¼Œé»˜è®¤é‡‡ç”¨çš„éƒ½æ˜¯å‡åºï¼Œæˆ‘ä»¬å¯ä»¥æ”¹æˆé™åºæ¥è¿›è¡Œç¼–æ’</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df1</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&#34;two&#34;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">   one  two  three
3    1    4      2
1    1    3      4
2    1    2      3
0    2    1      5
</code></pre></div><br>
<h2 id="æ•°æ®ç±»å‹çš„è½¬æ¢">æ•°æ®ç±»å‹çš„è½¬æ¢</h2>
<p>æœ€åæ¶‰åŠåˆ°çš„æ˜¯æ•°æ®ç±»å‹çš„è½¬æ¢ï¼Œåœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå¾—çŸ¥é“å¦‚ä½•æ¥æŸ¥çœ‹æ•°æ®çš„ç±»å‹ï¼Œpandaså½“ä¸­æœ‰ç›¸åº”çš„æ–¹æ³•å¯ä»¥å¤„ç†</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s2">&#34;A&#34;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&#34;float16&#34;</span><span class="p">),</span>
        <span class="s2">&#34;B&#34;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">)),</span>
        <span class="s2">&#34;C&#34;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&#34;uint8&#34;</span><span class="p">)),</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="n">df2</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">          A         B    C
0 -0.498779 -0.501512    0
1 -0.055817 -0.528227  254
2 -0.914551  0.763298    1
3 -0.916016  1.366833    0
4  1.993164  1.834457    0
</code></pre></div><p>æˆ‘ä»¬é€šè¿‡dtypeså±æ€§æ¥æŸ¥çœ‹æ•°æ®çš„ç±»å‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">A    float16
B    float64
C      uint8
dtype: object
</code></pre></div><p>è€Œé€šè¿‡astype()æ–¹æ³•æ¥å®ç°æ•°æ®ç±»å‹çš„è½¬æ¢</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df2</span><span class="p">[</span><span class="s2">&#34;B&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">&#34;int64&#34;</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">0    0
1    0
2    0
3    2
4    1
Name: B, dtype: int64
</code></pre></div><br>
<h2 id="æ ¹æ®æ•°æ®ç±»å‹æ¥ç­›é€‰">æ ¹æ®æ•°æ®ç±»å‹æ¥ç­›é€‰</h2>
<p>ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®ç›¸å¯¹åº”çš„æ•°æ®ç±»å‹æ¥è¿›è¡Œç­›é€‰ï¼Œè¿ç”¨pandaså½“ä¸­çš„select_dtypesæ–¹æ³•ï¼Œæˆ‘ä»¬å…ˆæ¥åˆ›å»ºä¸€ä¸ªæ•°æ®é›†åŒ…å«äº†å„ç§æ•°æ®ç±»å‹çš„</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s2">&#34;string_1&#34;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s2">&#34;abcde&#34;</span><span class="p">),</span>
        <span class="s2">&#34;int64_1&#34;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)),</span>
        <span class="s2">&#34;uint8_1&#34;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">&#34;u1&#34;</span><span class="p">),</span>
        <span class="s2">&#34;float64_1&#34;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">),</span>
        <span class="s2">&#34;bool1&#34;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
        <span class="s2">&#34;bool2&#34;</span><span class="p">:</span> <span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span>
        <span class="s2">&#34;dates_1&#34;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&#34;now&#34;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
        <span class="s2">&#34;category_1&#34;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s2">&#34;ABCDE&#34;</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">&#34;category&#34;</span><span class="p">),</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="n">df</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">  string_1  int64_1  uint8_1  ...  bool2                      dates_1  category_1
0      a      1      3  ...  False 2021-11-10 10:43:05.957685         A
1      b      2      4  ...   True 2021-11-11 10:43:05.957685         B
2      c      3      5  ...  False 2021-11-12 10:43:05.957685         C
3      d      4      6  ...  False 2021-11-13 10:43:05.957685         D
4      e      5      7  ...   True 2021-11-14 10:43:05.957685         E
</code></pre></div><p>æˆ‘ä»¬å…ˆæ¥æŸ¥çœ‹ä¸€ä¸‹å„ä¸ªåˆ—çš„æ•°æ®ç±»å‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python">
<span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>

</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">string_1              object
int64_1                int64
uint8_1                uint8
float64_1            float64
bool1                   bool
bool2                   bool
dates_1       datetime64[ns]
category_1          category
dtype: object
</code></pre></div><p>æˆ‘ä»¬ç­›é€‰ç±»å‹ä¸ºå¸ƒå°”å€¼çš„æ•°æ®</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="nb">bool</span><span class="p">])</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">   bool1  bool2
0   True  False
1  False   True
2   True  False
3   True  False
4  False   True
</code></pre></div><p>ç­›é€‰å‡ºæ•°æ®ç±»å‹ä¸ºæ•´å‹çš„æ•°æ®</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;int64&#39;</span><span class="p">])</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">   int64_1
0      1
1      2
2      3
3      4
4      5
</code></pre></div><br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>DataShare | 6000&#43;ä¸ªè‚¡ç¥¨çš„æ¯æ—¥è´¢ç»æ–°é—»</title>
      <link>https://hidadeng.github.io/blog/daily_financial_news_for_6000_stocks/</link>
      <pubDate>Mon, 20 Sep 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/daily_financial_news_for_6000_stocks/</guid>
      <description>è´¢ç»æ•°æ®é›†å¯ä¸‹è½½</description>
      <content:encoded><![CDATA[<br>
<blockquote>
<p>ä½œè€… bot_developer</p>
<p>æ¬è¿è‡ª</p>
<ul>
<li><a href="https://www.kaggle.com/miguelaenlle/massive-stock-news-analysis-db-for-nlpbacktests">https://www.kaggle.com/miguelaenlle/massive-stock-news-analysis-db-for-nlpbacktests</a></li>
<li><a href="https://github.com/bot-developer3/Scraping-Tools-Benzinga">https://github.com/bot-developer3/Scraping-Tools-Benzinga</a>.</li>
</ul>
</blockquote>
<br>
<h2 id="èƒŒæ™¯">èƒŒæ™¯</h2>
<ul>
<li>è·å¾—é«˜è´¨é‡ï¼ˆå†å²ï¼‰è‚¡å¸‚æ–°é—»æ•°æ®æ—¢å›°éš¾åˆæ˜‚è´µï¼›</li>
<li>è®¢é˜…å†å²æ–°é—»æ•°æ®æä¾›å•†æœåŠ¡å¯èƒ½éœ€è¦èŠ±è´¹æ•°åƒç¾å…ƒã€‚</li>
</ul>
<p><br><br></p>
<h2 id="æ•°æ®é›†">æ•°æ®é›†</h2>
<p>é‡‡é›†äº†<strong>6000</strong>åªè‚¡ç¥¨<strong>2009-2020</strong>å¹´é—´çš„<strong>4</strong>ä¸‡æ¡æ–°é—»æ–‡ç« </p>
<p>æ•°æ®é“¾æ¥:https://pan.baidu.com/s/1rMo4Ek2bxvVLmeyxskVCAg  å¯†ç :paen</p>
<h3 id="raw_analyst_ratingscsv">raw_analyst_ratings.csv</h3>
<p>ç›´æ¥æŠ“å–åˆ†æå¸ˆè¯„çº§æ•°æ®ï¼Œæœ‰<strong>1034</strong>ä½åˆ†æå¸ˆå¯¹<strong>6204</strong>åªè‚¡ç¥¨è¿›è¡Œäº†è‚¡ç¥¨åˆ†æï¼Œåˆ†æè®°å½•ç´¯ç§¯<strong>1407328</strong>æ¡, å­—æ®µåŒ…æ‹¬ï¼š<strong>ç´¢å¼•ã€æ ‡é¢˜ã€URLã€æ–‡ç« ä½œè€…ï¼ˆå‡ºç‰ˆå•†æ€»æ˜¯benzingaï¼‰ã€å‡ºç‰ˆæ—¶é—´æˆ³ã€è‚¡ç¥¨ä»£ç </strong>ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œæ­¤ CSV æ–‡ä»¶ä¸­çš„æ‰€æœ‰æ—¥æœŸå‡ä¸åŒ…å«ç²¾ç¡®çš„æ—¶åˆ†ç§’ä¿¡æ¯ã€‚ å¦‚æœæ‚¨æ‰“ç®—ä½¿ç”¨æ­¤æ–‡ä»¶è¿›è¡Œå›æµ‹ï¼ˆanalyst_ratings_processed.csv æ›´å¥½ï¼‰ï¼Œè¯·å‡è®¾æ–‡ç« æ˜¯åœ¨ç¬¬äºŒå¤©è€Œä¸æ˜¯å½“å‰æ–‡ç« ä¸­æ˜¾ç¤ºçš„æ—¥æœŸå‘å¸ƒçš„ã€‚</p>
<br>
<h3 id="raw_partner_headlinescsv">raw_partner_headlines.csv</h3>
<p>ç›´æ¥æŠ“å–åŸå§‹æ–°é—»æ ‡é¢˜ï¼Œå…±æœ‰<strong>1845559</strong>æ¡è®°å½•, å­—æ®µåŒ…æ‹¬ï¼š<strong>ç´¢å¼•ã€æ ‡é¢˜ã€URLã€å‡ºç‰ˆå•†ï¼ˆä¸æ˜¯ benzingaï¼‰ã€æ—¥æœŸã€è‚¡ç¥¨è¡Œæƒ…</strong>ã€‚</p>
<br>
<h3 id="analyst_ratings_processedcsv">analyst_ratings_processed.csv</h3>
<p>å¤„ç†è¿‡çš„åˆ†æå¸ˆè¯„çº§æ•°æ®ï¼Œ å…±æœ‰<strong>1400469</strong>æ¡è®°å½•ï¼Œ å­—æ®µåŒ…æ‹¬ï¼š<strong>æ–‡ç« æ ‡é¢˜ï¼Œæ—¥æœŸï¼Œè‚¡ç¥¨</strong></p>
<p>æ—¶åŒºä¸º UTC-4ã€‚ è¿™ä¸ raw_analys_theadlines ä¹‹é—´çš„åŒºåˆ«åœ¨äºï¼Œå®ƒå…·æœ‰ç²¾ç¡®åˆ°åˆ†é’Ÿçš„æ—¥æœŸï¼Œè€Œ raw_analys_tratings åªæ˜¯æ²¡æœ‰å°æ—¶æˆ–åˆ†é’Ÿçš„é‚£ä¸€å¤©ã€‚</p>
<p><br><br></p>
<h2 id="æ³¨æ„">æ³¨æ„</h2>
<ul>
<li>æ•°æ®çˆ¬è‡ªbenzinga.comï¼Œæ–°é—»å†…å®¹ç‰ˆæƒå½’Benzingaæ‰€æœ‰ã€‚</li>
</ul>
<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>ä¸­æ–‡é‡‘èæƒ…æ„Ÿè¯å…¸</title>
      <link>https://hidadeng.github.io/blog/chinese_financial_dictionary/</link>
      <pubDate>Tue, 13 Jul 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/chinese_financial_dictionary/</guid>
      <description>åŸºäº å§šåŠ æƒï¼Œå†¯ç»ªï¼Œç‹èµé’§ï¼Œçºªè£åµ˜ï¼Œå¼ ç»´. è¯­è°ƒã€æƒ…ç»ªåŠå¸‚åœºå½±å“ï¼šåŸºäºé‡‘èæƒ…ç»ªè¯å…¸. ç®¡ç†ç§‘å­¦å­¦æŠ¥ å¼€å‘äº†ä¸­æ–‡çš„é‡‘èæƒ…æ„Ÿè¯å…¸ç¬¬ä¸€ä¸ªæƒå¨çš„ä¸­æ–‡æƒ…æ„Ÿè¯å…¸|é…åˆcnsentiä½¿ç”¨</description>
      <content:encoded><![CDATA[<p>å¯ä»¥ä½¿ç”¨cnsentiåº“ä¸­çš„è‡ªå®šä¹‰æ–¹æ³•ï¼Œè®¡ç®—å¹´æŠ¥æˆ–è´¢ç»ç±»ç¤¾äº¤åª’ä½“çš„æ–‡æœ¬æƒ…ç»ªã€‚</p>
<blockquote>
<p>å§šåŠ æƒï¼Œå†¯ç»ªï¼Œç‹èµé’§ï¼Œçºªè£åµ˜ï¼Œå¼ ç»´. è¯­è°ƒã€æƒ…ç»ªåŠå¸‚åœºå½±å“ï¼šåŸºäºé‡‘èæƒ…ç»ªè¯å…¸. ç®¡ç†ç§‘å­¦å­¦æŠ¥ï¼Œ2021. 24(5), 26-46.</p>
</blockquote>
<p>è¯¥è®ºæ–‡å¼€å‘äº†ä¸­æ–‡çš„é‡‘èæƒ…æ„Ÿè¯å…¸ï¼Œå·²æœ‰çš„ä¸­æ–‡é‡‘èæƒ…æ„Ÿè¯å…¸æœ‰ä»¥ä¸‹ä¸è¶³ï¼š</p>
<ul>
<li>å¤§å¤šé‡‡ç”¨å½¢å®¹æƒ…ç»ªè¯ï¼Œå¯¹äºé‡‘èåœºæ™¯é€‚ç”¨æ€§å·®</li>
<li>å°†LMè‹±æ–‡è¯å…¸æœ¬åœŸåŒ–ï¼Œåˆ¶ä½œä¸­æ–‡é‡‘èæƒ…ç»ªè¯å…¸</li>
<li>è¯å…¸æ„å»ºæ–¹æ³•å¤šä¸ºäººå·¥</li>
</ul>
<p>è¯¥è®ºæ–‡å¼€å‘ä¸­æ–‡æƒ…ç»ªè¯å…¸ï¼Œä»å¹´æŠ¥å’Œç¤¾äº¤åª’ä½“ä¸¤ä¸ªæ•°æ®æºå‡ºå‘ï¼Œå€ŸåŠ©æ•°æ®æŒ–æ˜å’Œæ·±åº¦å­¦ä¹ ç®—æ³•ï¼Œæ„å»ºäº†æ­£å¼ç”¨è¯­ å’Œ éæ­£å¼ç”¨äºä¸¤å¤§ç±»æƒ…æ„Ÿè¯å…¸ã€‚</p>
<h2 id="æ ‡æ³¨æ€è·¯">æ ‡æ³¨æ€è·¯</h2>
<p>ä¸€èˆ¬æ„å»ºè¯å…¸è¦ä¹ˆç”¨å¤šä¸ªè¯å…¸èåˆï¼Œè¦ä¹ˆäººå·¥æ ‡å‡†è®­ç»ƒã€‚è¯¥è®ºæ–‡é‡‡ç”¨äº†ä¸€å®šçš„æŠ€å·§ï¼Œä¸éœ€è¦äººå·¥æ ‡æ³¨å³å¯å®ç°è¿‘ä¹äººå·¥æ ‡æ³¨çš„æ•ˆæœã€‚</p>
<h3 id="æ­£å¼è¯å…¸æ ‡æ³¨æ€è·¯">æ­£å¼è¯å…¸æ ‡æ³¨æ€è·¯</h3>
<p>æ­£å¼ç”¨è¯­æƒ…æ„Ÿè¯å…¸ï¼Œé€šè¿‡å¹´æŠ¥å…¬å¸ƒå3ä¸ªäº¤æ˜“æ—¥ç´¯ç§¯æ­£è´Ÿæ”¶ç›Šç‡ä¸ºæ ‡å‡†ï¼Œå°†å¹´æŠ¥æ ‡è®°ä¸ºæ­£è´Ÿé¢æƒ…ç»ªä¸¤ç±»ã€‚</p>
<h3 id="éæ­£å¼è¯å…¸æ ‡æ³¨æ€è·¯">éæ­£å¼è¯å…¸æ ‡æ³¨æ€è·¯</h3>
<p>ä½¿ç”¨æ‰€æœ‰ä¸­å›½ä¸Šå¸‚å…¬å¸åœ¨é›ªçƒè®ºå›å’Œä¸œæ–¹è´¢å¯Œè‚¡å§å†…ç›¸å…³å¸–å­ï¼Œå…±8130ä¸‡æ¡ã€‚</p>
<p>åœ¨ç½‘ç»œè‚¡ç¥¨è®ºå›ï¼Œç”¨æˆ·å‘è¡¨è‡ªå·±çš„æ„è§æ—¶ï¼Œç»å¸¸å¸¦æœ‰è¡¨æƒ…ç¬¦å·ï¼Œä»è€Œä½¿å¾—å¸–å­å¸¦æœ‰æ˜æ˜¾çš„æƒ…ç»ªæŒ‡æ ‡ã€‚ è¿™ç§å«æœ‰ç‰¹æ®ŠæŒ‡æ ‡çš„å¸–å­ï¼Œçœå»äº†äººå·¥æ ‡æ³¨æ–‡æœ¬æƒ…ç»ªçš„å·¥ä½œã€‚</p>
<br>
<p>å…·ä½“æ„å»ºè¯å…¸çš„æ­¥éª¤ï¼Œå¤§å®¶å¯ä»¥é˜…è¯»è®ºæ–‡åŸæ–‡ã€‚è®ºæ–‡å·²ç»å…¬å¼€äº†ä¸­æ–‡æƒ…æ„Ÿè¯å…¸ï¼Œæˆ‘å·²å°†å…¶æ•´ç†ä¸º4ä¸ªtxtæ–‡ä»¶</p>
<ul>
<li>formal_pos.txt  æ­£å¼ç”¨è¯­<strong>æ­£é¢</strong>æƒ…ç»ªè¯å…¸</li>
<li>formal_neg.txt  æ­£å¼ç”¨è¯­<strong>è´Ÿé¢</strong>æƒ…ç»ªè¯å…¸</li>
<li>unformal_pos.txt  éæ­£å¼ç”¨è¯­<strong>æ­£é¢</strong>æƒ…ç»ªè¯å…¸</li>
<li>unformal_neg.txt  éæ­£å¼ç”¨è¯­<strong>è´Ÿé¢</strong>æƒ…ç»ªè¯å…¸</li>
</ul>
<br>
<h2 id="ä¸­æ–‡é‡‘èè¯å…¸ä½¿ç”¨æ–¹æ³•">ä¸­æ–‡é‡‘èè¯å…¸ä½¿ç”¨æ–¹æ³•</h2>
<p>cnsentiå®ç°äº†è‡ªå®šä¹‰è¯å…¸åŠŸèƒ½ï¼Œå¯¼å…¥ä¸åŒçš„txtè¯å…¸æ–‡ä»¶ï¼Œå³å¯å®ç°ä¸åŒæ–¹é¢çš„æƒ…ç»ªè¯ç»Ÿè®¡ã€‚</p>
<h3 id="å¹´æŠ¥æ­£å¼ç”¨è¯­è¯å…¸">å¹´æŠ¥æ­£å¼ç”¨è¯­è¯å…¸</h3>
<ul>
<li>dict/formal_pos.txt   æ­£å¼ç”¨è¯­<strong>æ­£é¢</strong>æƒ…ç»ªè¯å…¸</li>
<li>dict/formal_neg.txt    æ­£å¼ç”¨è¯­<strong>è´Ÿé¢</strong>æƒ…ç»ªè¯å…¸</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">cnsenti</span> <span class="kn">import</span> <span class="n">Sentiment</span>

<span class="n">senti</span> <span class="o">=</span> <span class="n">Sentiment</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="s1">&#39;dict/formal_pos.txt&#39;</span><span class="p">,</span>  <span class="c1">#æ­£é¢è¯å…¸txtæ–‡ä»¶ç›¸å¯¹è·¯å¾„</span>
                  <span class="n">neg</span><span class="o">=</span><span class="s1">&#39;dict/formal_neg.txt&#39;</span><span class="p">,</span>  <span class="c1">#è´Ÿé¢è¯å…¸txtæ–‡ä»¶ç›¸å¯¹è·¯å¾„</span>
                  <span class="n">merge</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>             <span class="c1">#æ˜¯å¦å°†cnsentiè‡ªå¸¦è¯å…¸å’Œç”¨æˆ·å¯¼å…¥çš„è‡ªå®šä¹‰è¯å…¸èåˆ</span>
                  <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>      <span class="c1">#ä¸¤txtå‡ä¸ºutf-8ç¼–ç </span>

<span class="n">test_text</span> <span class="o">=</span> <span class="s1">&#39;è¿™å®¶å…¬å¸æ˜¯è¡Œä¸šçš„å¼•é¢†è€…ï¼Œæ˜¯ä¸­æµç ¥æŸ±ã€‚ä»Šå¹´çš„ä¸šç»©éå¸¸å¥½ã€‚&#39;</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">senti</span><span class="o">.</span><span class="n">sentiment_count</span><span class="p">(</span><span class="n">test_text</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;sentiment_count&#39;</span><span class="p">,</span><span class="n">result</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">sentiment_count {&#39;words&#39;: 16, &#39;sentences&#39;: 2, &#39;pos&#39;: 3, &#39;neg&#39;: 0}
</code></pre></div><br>
<h3 id="è´¢ç»ç¤¾äº¤åª’ä½“éæ­£å¼ç”¨è¯­è¯å…¸">è´¢ç»ç¤¾äº¤åª’ä½“éæ­£å¼ç”¨è¯­è¯å…¸</h3>
<ul>
<li>dict/unformal_pos.txt   éæ­£å¼ç”¨è¯­<strong>æ­£é¢</strong>æƒ…ç»ªè¯å…¸</li>
<li>dict/unformal_neg.txt    éæ­£å¼ç”¨è¯­<strong>è´Ÿé¢</strong>æƒ…ç»ªè¯å…¸</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">cnsenti</span> <span class="kn">import</span> <span class="n">Sentiment</span>

<span class="n">senti</span> <span class="o">=</span> <span class="n">Sentiment</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="s1">&#39;dict/unformal_pos.txt&#39;</span><span class="p">,</span>  <span class="c1">#æ­£é¢è¯å…¸txtæ–‡ä»¶ç›¸å¯¹è·¯å¾„</span>
                  <span class="n">neg</span><span class="o">=</span><span class="s1">&#39;dict/unformal_neg.txt&#39;</span><span class="p">,</span>  <span class="c1">#è´Ÿé¢è¯å…¸txtæ–‡ä»¶ç›¸å¯¹è·¯å¾„</span>
                  <span class="n">merge</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>             <span class="c1">#èåˆcnsentiè‡ªå¸¦è¯å…¸å’Œç”¨æˆ·å¯¼å…¥çš„è‡ªå®šä¹‰è¯å…¸</span>
                  <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>      <span class="c1">#ä¸¤txtå‡ä¸ºutf-8ç¼–ç </span>

<span class="n">test_text</span> <span class="o">=</span> <span class="s1">&#39;è¿™ä¸ªè‚¡ç¥¨å‰æœŸèµ°åŠ¿æ‰¿å‹ï¼Œç°åœ¨é˜´è·Œï¼Œæ•£æˆ·åªèƒ½å‰²è‚‰ç¦»åœºï¼Œè¿™è‚¡ç¥¨çœŸåƒåœ¾&#39;</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">senti</span><span class="o">.</span><span class="n">sentiment_count</span><span class="p">(</span><span class="n">test_text</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;sentiment_count&#39;</span><span class="p">,</span><span class="n">result</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">sentiment_count {&#39;words&#39;: 18, &#39;sentences&#39;: 1, &#39;pos&#39;: 0, &#39;neg&#39;: 2}
</code></pre></div><br>
<h2 id="è¯´æ˜">è¯´æ˜</h2>
<p>è¯»è€…å¦‚éœ€ä½¿ç”¨æœ¬é¡¹ç›®è¯å…¸ï¼Œè¯·å¼•ç”¨å¦‚ä¸‹å‚è€ƒæ–‡çŒ®ï¼š</p>
<blockquote>
<p>å§šåŠ æƒï¼Œå†¯ç»ªï¼Œç‹èµé’§ï¼Œçºªè£åµ˜ï¼Œå¼ ç»´. è¯­è°ƒã€æƒ…ç»ªåŠå¸‚åœºå½±å“ï¼šåŸºäºé‡‘èæƒ…ç»ªè¯å…¸. ç®¡ç†ç§‘å­¦å­¦æŠ¥ï¼Œ2021. 24(5), 26-46.</p>
</blockquote>
<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Pandaså°æ¡ˆä¾‹ | å¯¹æŸå…¬å¸åŒå¹´çš„æŸæŒ‡æ ‡æ‰¹é‡æ±‡æ€»</title>
      <link>https://hidadeng.github.io/blog/pandas_example_company_analysis/</link>
      <pubDate>Thu, 20 May 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/pandas_example_company_analysis/</guid>
      <description>å­¦ä¼špandasåŒ…ï¼Œèµ°åˆ°å“ªé‡Œéƒ½ä¸æ€•</description>
      <content:encoded><![CDATA[<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="%E4%BB%A3%E7%A0%81.zip">ç‚¹å‡»æ­¤å¤„ä¸‹è½½ä»£ç </a></p>
<br>
<h2 id="é—®é¢˜">é—®é¢˜</h2>
<p>å¦‚ä½•å°†æ•°æ®ä¸­ï¼ŒåŒä¸€è‚¡ç¥¨ä»£ç åŒä¸€å¹´çš„æŸä¸ªå­—æ®µåŠ æ€»æˆä¸€æ¡ï¼Ÿ</p>
<p>æˆ‘æƒ³æŠŠæŸå…¬å¸åŒä¸€å¹´çš„æ•°æ®varåŠ æ€»åˆ°ä¸€èµ·</p>
<h2 id="æ€è·¯">æ€è·¯</h2>
<p>å¯ä»¥é€šè¿‡pandasåº“å®ç°è¿™ä¸ªéœ€æ±‚</p>
<ol>
<li>è·å–å…¬å¸è‚¡ç¥¨ä»£ç åˆ—è¡¨</li>
<li>è·å–æŸå…¬å¸å¹´ä»½åˆ—è¡¨</li>
<li>å¯¹æŸä¸ªå…¬å¸åŒå¹´çš„varè¿›è¡ŒåŠ æ€»  (varä»£æŒ‡ä¸€ä¸ªå­—æ®µæˆ–å˜é‡)</li>
<li>forå¾ªç¯å¯¹æ‰€æœ‰çš„å…¬å¸é‡å¤2-3æ“ä½œ</li>
</ol>
<br>
<h2 id="å‡†å¤‡æ•°æ®">å‡†å¤‡æ•°æ®</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1">#å¼ºåˆ¶è‚¡ç¥¨ä»£ç è½¬ä¸ºstrç±»å‹</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;data.xlsx&#39;</span><span class="p">,</span> <span class="n">converters</span><span class="o">=</span><span class="p">{</span><span class="s2">&#34;code&#34;</span><span class="p">:</span> <span class="nb">str</span><span class="p">})</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="img/df1.png" width="800" />
    
    
</figure>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<br>
<h2 id="å®éªŒä»£ç ">å®éªŒä»£ç </h2>
<h3 id="1-è·å–å…¬å¸è‚¡ç¥¨ä»£ç åˆ—è¡¨">1. è·å–å…¬å¸è‚¡ç¥¨ä»£ç åˆ—è¡¨</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">codes</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="n">codes</span>
</code></pre></div><pre><code>array(['000001', '000002', '000004', '000005', '000006'], dtype=object)
</code></pre>
<h3 id="2-è·å–æŸå…¬å¸å¹´ä»½åˆ—è¡¨">2. è·å–æŸå…¬å¸å¹´ä»½åˆ—è¡¨</h3>
<p>ä»¥000001ä¸ºä¾‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">years</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;000001&#39;</span><span class="p">][</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">years</span>
</code></pre></div><pre><code>{2000, 2002, 2007, 2008, 2010, 2013, 2019}
</code></pre>
<h3 id="3-å¯¹æŸä¸ªå…¬å¸åŒå¹´çš„baladdedè¿›è¡ŒåŠ æ€»">3. å¯¹æŸä¸ªå…¬å¸åŒå¹´çš„baladdedè¿›è¡ŒåŠ æ€»</h3>
<p>ä»¥000001å…¬å¸2000å¹´ä¸ºä¾‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">ndf</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;000001&#39;</span><span class="p">]</span>
<span class="n">ndf</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="img/df2.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">ndf</span><span class="p">[</span><span class="n">ndf</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">2000</span><span class="p">]</span>
</code></pre></div>
<figure >
    
        <img src="img/df3.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">ndf</span><span class="p">[</span><span class="n">ndf</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">2000</span><span class="p">][</span><span class="s1">&#39;baladded&#39;</span><span class="p">]</span>
</code></pre></div><pre><code>0   -65856130.0
1   -65856130.0
Name: baladded, dtype: float64
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">ndf</span><span class="p">[</span><span class="n">ndf</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">2000</span><span class="p">][</span><span class="s1">&#39;baladded&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</code></pre></div><pre><code>-131712260.0
</code></pre>
<h3 id="forå¾ªç¯å¯¹æ‰€æœ‰çš„å…¬å¸é‡å¤2-3æ“ä½œ">forå¾ªç¯å¯¹æ‰€æœ‰çš„å…¬å¸é‡å¤2-3æ“ä½œ</h3>
<p>æ±‡æ€»ä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">codes</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="k">for</span> <span class="n">code</span> <span class="ow">in</span> <span class="n">codes</span><span class="p">:</span>
    <span class="n">years</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">code</span><span class="p">][</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">years</span><span class="p">:</span>
        <span class="n">ndf</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">code</span><span class="p">]</span>
        <span class="n">baladded_sum</span> <span class="o">=</span> <span class="n">ndf</span><span class="p">[</span><span class="n">ndf</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">year</span><span class="p">][</span><span class="s1">&#39;baladded&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">baladded_sum</span><span class="p">)</span>
        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        
<span class="n">result_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;baladded_sum&#39;</span><span class="p">])</span>
<span class="n">result_df</span>
</code></pre></div>
<figure >
    
        <img src="img/df4.png" width="800" />
    
    
</figure>

<p>ä¿å­˜ç»“æœ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">result_df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s1">&#39;result.xlsx&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div><br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Jaalåº“~è½»æ¾ç»˜åˆ¶åŠ¨æ€ç¤¾äº¤ç½‘ç»œå…³ç³»å›¾</title>
      <link>https://hidadeng.github.io/blog/jaal_social_network_visualization/</link>
      <pubDate>Sat, 08 May 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/jaal_social_network_visualization/</guid>
      <description>æœ€ç®€å•å¥½ç”¨çš„ç¤¾äº¤ç½‘ç»œå¯è§†åŒ–åŒ…</description>
      <content:encoded><![CDATA[<p>Jaalæ˜¯åŸºäºDashå’ŒVisdccæ„å»ºçš„å¯äº¤äº’çš„Pythonç¤¾äº¤ç½‘ç»œåº“ã€‚ç”±äºåº•å±‚ä½¿ç”¨äº†dashï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¤ä¸ºjaalæ›´åƒæ˜¯ä¸€ä¸ªä»ªè¡¨ç›˜ã€‚åŸºäºæ­¤ï¼Œjaalä¹Ÿæä¾›äº†å¤šç§å¤„ç†ç½‘ç»œæ•°æ®çš„å¯é€‰é¡¹ï¼Œä¾‹å¦‚æœç´¢ã€è¿‡æ»¤ã€ç»™èŠ‚ç‚¹ï¼ˆè¾¹ï¼‰ä¸Šè‰²ç­‰ã€‚æ‰€æœ‰çš„æ“ä½œï¼Œä¸¤ä¸‰è¡Œä»£ç å³å¯æå®šã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">jaal</span>
</code></pre></div><br>
<h2 id="ä¸€å¿«é€Ÿä¸Šæ‰‹">ä¸€ã€å¿«é€Ÿä¸Šæ‰‹</h2>
<p>æœ¬æ–‡å‡†å¤‡äº†ã€Šæƒåˆ©çš„æ¸¸æˆã€‹çš„èŠ‚ç‚¹nodes.csvå’Œè¾¹edges.csvæ•°æ®ï¼Œ å¯ä»¥ä½¿ç”¨jaalçš„plot()å‡½æ•°ç»˜åˆ¶ã€Šæƒåˆ©çš„æ¸¸æˆã€‹å…³ç³»ç½‘ç»œå›¾ã€‚ å¿…é¡»æœ‰çš„å­—æ®µï¼Œè¿™é‡ŒåŠ ç²—äº†
nodes.csvæ•°æ®å«</p>
<ul>
<li><strong>from</strong>: èŠ‚ç‚¹</li>
<li><strong>to</strong>:  èŠ‚ç‚¹</li>
<li>weight: è¾¹æƒé‡</li>
<li>strenth:</li>
</ul>
<p>edges.csvæ•°æ®</p>
<ul>
<li><strong>id</strong> èŠ‚ç‚¹idï¼Œå§“å</li>
<li>gender èŠ‚ç‚¹çš„æ€§åˆ«</li>
</ul>

<figure >
    
        <img src="img/%e6%9d%83%e5%88%a9%e7%9a%84%e6%b8%b8%e6%88%8f.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">jaal</span> <span class="kn">import</span> <span class="n">Jaal</span>

<span class="n">edge_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;edges.csv&#39;</span><span class="p">)</span>
<span class="n">node_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;nodes.csv&#39;</span><span class="p">)</span>
<span class="n">Jaal</span><span class="p">(</span><span class="n">edge_df</span><span class="p">,</span> <span class="n">node_df</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</code></pre></div><p>è¿è¡Œä»£ç åï¼Œä¼šç”Ÿæˆä¸€ä¸ªæœ¬åœ°æœåŠ¡é“¾æ¥ï¼Œä¾‹å¦‚ http://127.0.0.1:8050/ ï¼Œ ç‚¹å‡»é“¾æ¥ï¼Œæµè§ˆå™¨å°±èƒ½çœ‹åˆ°</p>

<figure >
    
        <img src="img/%e7%bd%91%e7%bb%9c%e5%9b%be.png" width="800" />
    
    
</figure>

<br>
<h2 id="äºŒjaalåŠŸèƒ½">äºŒã€JaalåŠŸèƒ½</h2>
<ul>
<li><strong>è®¾ç½®é¢æ¿</strong>  Jaalè¿è¡Œäº§ç”Ÿçš„æµè§ˆå™¨ç•Œé¢å·¦ä¾§ä¼šæœ‰ä¸€ä¸ªè®¾ç½®é¢æ¿ï¼Œå¯ä»¥å¯¹æ•°æ®è¿›è¡Œæœç´¢ã€ç­›é€‰ã€ä¸Šè‰²ã€‚</li>
<li><strong>æœç´¢</strong> å¯ä»¥é«˜äº®æœç´¢åˆ°çš„èŠ‚ç‚¹</li>
<li><strong>è¿‡æ»¤</strong> æ”¯æŒpandasçš„queryè¯­æ³•</li>
<li><strong>ä¸Šè‰²</strong> åŸºäºç±»åˆ«ï¼Œå¯¹èŠ‚ç‚¹ã€è¾¹è¿›è¡Œä¸Šè‰²ã€‚èƒ½æœ€å¤šæ”¯æŒ20ä¸ªç±»åˆ«ï¼Œå³èŠ‚ç‚¹ã€è¾¹æ•°æ®å…è®¸æœ‰20ç§å±æ€§</li>
</ul>
<br>
<h2 id="ä¸‰-æ¡ˆä¾‹">ä¸‰ã€ æ¡ˆä¾‹</h2>
<h4 id="31-æœç´¢">3.1 æœç´¢</h4>
<p>ç¬¬ä¸€ä¸ªé€‰é¡¹æ˜¯æœç´¢ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­æœç´¢å›¾ä¸­çš„ç‰¹å®šèŠ‚ç‚¹ã€‚ å®ƒæ”¯æŒåœ¨èŠ‚ç‚¹æ ‡ç­¾ä¸Šé€å­—ç¬¦æœç´¢ã€‚ ä»¥ä¸‹æ˜¯æˆ‘ä»¬å°è¯•æœç´¢â€œ Aryaâ€çš„ç¤ºä¾‹</p>

<figure >
    
        <img src="img/search.gif" width="800" />
    
    
</figure>

<h4 id="32-è¿‡æ»¤">3.2 è¿‡æ»¤</h4>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¿›è¡Œè¿‡æ»¤ã€‚ Jaalæ”¯æŒåœ¨èŠ‚ç‚¹å’Œè¾¹è¦ç´ ä¸Šéƒ½è¿›è¡Œè¿‡æ»¤çš„é€‰é¡¹ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬æä¾›äº†å•ç‹¬çš„æ–‡æœ¬åŒºåŸŸã€‚ ä¸‹é¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°èŠ‚ç‚¹å’Œè¾¹ç¼˜è¿‡æ»¤æŸ¥è¯¢çš„å®æ—¶æ•ˆæœã€‚</p>

<figure >
    
        <img src="img/filter.gif" width="800" />
    
    
</figure>

<h4 id="33-æŸ“è‰²">3.3 æŸ“è‰²</h4>
<p>æœ€åï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›æŸ¥çœ‹ä»»ä½•åŠŸèƒ½çš„æ•´ä½“åˆ†å¸ƒï¼Œè€Œä¸æ˜¯è¿›è¡Œè¿‡æ»¤ã€‚ ç›®å‰ï¼ŒJaalé€šè¿‡æä¾›æ ¹æ®ä»»ä½•åˆ†ç±»ç‰¹å¾ä¸ºèŠ‚ç‚¹æˆ–è¾¹ç¼˜ç€è‰²çš„é€‰é¡¹æ¥è§£å†³æ­¤é—®é¢˜ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨ä¸‹é¢çœ‹åˆ°ä¸€ä¸ªçœŸå®çš„ä¾‹å­ã€‚</p>

<figure >
    
        <img src="img/color.gif" width="800" />
    
    
</figure>

<br>
<h2 id="å››-ä»£ç è·å–">å››ã€ ä»£ç è·å–</h2>
<ol>
<li><a href="%E4%BB%A3%E7%A0%81%E6%95%B0%E6%8D%AE.zip"><strong>ç›´æ¥ä¸‹è½½</strong></a></li>
<li><a href="https://github.com/thunderhit/DaDengAndHisPython">githubæ›´å¤šä»£ç </a></li>
</ol>
<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Kaggleæ•°æ®æŒ–æ˜æœ€ä½³å®è·µ</title>
      <link>https://hidadeng.github.io/blog/kaggle_best_practice_of_data_mining/</link>
      <pubDate>Thu, 06 May 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/kaggle_best_practice_of_data_mining/</guid>
      <description>è®©æ•°æ®æŒ–æ˜æ›´ä¼˜é›…</description>
      <content:encoded><![CDATA[<h2 id="ä»£ç è·å–">ä»£ç è·å–</h2>
<ol>
<li><a href="%E4%BB%A3%E7%A0%81%E6%95%B0%E6%8D%AE.zip"><strong>ç›´æ¥ä¸‹è½½</strong></a></li>
<li><a href="https://github.com/thunderhit/DaDengAndHisPython">githubæ›´å¤šä»£ç </a></li>
</ol>
<br>
<p>Kaggleæ˜¯ä¸ªå¾ˆæ£’çš„åœ°æ–¹,å¯¹äºæ•°æ®ç§‘å­¦å®¶å’Œæœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆæ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªçŸ¥è¯†çš„é‡‘çŸ¿ã€‚å¯ä»¥åœ¨åŒä¸€åœ°ç‚¹æ‰¾åˆ°ç”±æœ¬é¢†åŸŸä¸“å®¶å¸¦æ¥çš„é«˜è´¨é‡ï¼Œé«˜æ•ˆï¼Œå¯é‡ç°ï¼Œå¾ˆæ£’çš„ä»£ç ã€‚è‡ªæ¨å‡ºä»¥æ¥ï¼Œå®ƒå·²ç»ä¸¾åŠäº†164åœºæ¯”èµ›ã€‚è¿™äº›æ¯”èµ›å¸å¼•äº†æ¥è‡ªä¸–ç•Œå„åœ°çš„ä¸“å®¶å’Œä¸“å®¶åŠ å…¥è¯¥å¹³å°ã€‚ç»“æœï¼Œæ¯åœºæ¯”èµ›ä»¥åŠKaggleæä¾›çš„å¤§é‡å¼€æºæ•°æ®é›†éƒ½æœ‰è®¸å¤šé«˜è´¨é‡çš„ç¬”è®°æœ¬å’Œè„šæœ¬ã€‚</p>
<p>åœ¨æ•°æ®ç§‘å­¦ä¹‹æ—…çš„å¼€å§‹ï¼Œæˆ‘å°†å»KaggleæŸ¥æ‰¾æ•°æ®é›†ä»¥ç»ƒä¹ æˆ‘çš„æŠ€èƒ½ã€‚æ¯å½“æˆ‘æŸ¥çœ‹å…¶ä»–å†…æ ¸æ—¶ï¼Œæˆ‘éƒ½ä¼šå¯¹ä»£ç çš„å¤æ‚æ€§æ„Ÿåˆ°ä¸çŸ¥æ‰€æªï¼Œç„¶åé©¬ä¸Šå›é¿ã€‚</p>
<p>ä½†æ˜¯ç°åœ¨ï¼Œæˆ‘å‘ç°è‡ªå·±èŠ±è´¹äº†å¤§é‡æ—¶é—´é˜…è¯»å…¶ä»–ç¬”è®°æœ¬å¹¶æäº¤ç«èµ›æ–‡ä»¶ã€‚æœ‰æ—¶å€™ï¼Œæœ‰äº›ä¸œè¥¿å€¼å¾—æ‚¨åº¦è¿‡æ•´ä¸ªå‘¨æœ«ã€‚æœ‰æ—¶ï¼Œæˆ‘ä¼šå‘ç°ç®€å•ä½†è‡´å‘½çš„æœ‰æ•ˆä»£ç æŠ€å·§å’Œæœ€ä½³å®è·µï¼Œè¿™äº›æŠ€å·§å’Œæœ€ä½³å®è·µåªèƒ½é€šè¿‡è§‚å¯Ÿå…¶ä»–ä¸“å®¶æ¥å­¦ä¹ ã€‚</p>
<p>åœ¨æ•´ä¸ªç³»åˆ—ä¸­ï¼Œæ‚¨ä¼šå‘ç°æˆ‘åœ¨å…¸å‹çš„æ•°æ®ç§‘å­¦å·¥ä½œæµç¨‹ä¸­å¯èƒ½æœ‰ç”¨çš„ä»»ä½•å†…å®¹ï¼ŒåŒ…æ‹¬ä¸é€šç”¨åº“ç›¸å…³çš„ä»£ç å¿«æ·æ–¹å¼ï¼ŒKaggleçš„é¡¶çº§è¡Œä¸šä¸“å®¶éµå¾ªçš„æœ€ä½³å®è·µç­‰ï¼Œè¿™äº›éƒ½æ˜¯æˆ‘åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­å­¦åˆ°çš„ã€‚</p>
<h2 id="1-åªç»˜åˆ¶ç›¸å…³ç³»æ•°çŸ©é˜µçš„ä¸‹ä¸‰è§’éƒ¨åˆ†">1. åªç»˜åˆ¶ç›¸å…³ç³»æ•°çŸ©é˜µçš„ä¸‹ä¸‰è§’éƒ¨åˆ†</h2>
<p>å¥½çš„ç›¸å…³çŸ©é˜µå¯ä»¥è¯´æ˜æ•°æ®é›†ä¸­ç›®æ ‡å˜é‡ä¹‹é—´çš„ç›¸å…³æ€§</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/melbourne_housing_raw.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="img/df1.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>

<span class="n">cmap</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">diverging_palette</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">75</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span>
                             <span class="n">n</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="s2">&#34;light&#34;</span><span class="p">,</span> <span class="n">as_cmap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">corr</span><span class="p">(),</span> <span class="n">center</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
             <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;.2f&#39;</span><span class="p">,</span> <span class="n">square</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="img/cor1.png" width="800" />
    
    
</figure>

<p>ä½†ä¸Šå›¾ä¸­ï¼Œæ•°æ®é›†ä¸­å­˜åœ¨å¤§é‡çš„ç‰¹å¾ï¼Œå¯¼è‡´ç›¸ä¼¼çŸ©é˜µè¿‡äºåºå¤§ï¼Œè®©äººçœ‹èµ·æ¥ä¸çŸ¥æ‰€æªã€‚</p>
<p>ç›¸å…³çŸ©é˜µå¤§éƒ¨åˆ†æ²¿ä¸»å¯¹è§’çº¿å¯¹ç§°ï¼Œå› æ­¤å®ƒä»¬åŒ…å«é‡å¤æ•°æ®ã€‚ åŒæ ·ï¼Œå¯¹è§’çº¿æœ¬èº«ä¹Ÿæ²¡æœ‰ç”¨ã€‚ è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åªç»˜åˆ¶æœ‰ç”¨çš„ä¸€åŠï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># è®¡ç®—ç›¸å…³ç³»æ•°</span>
<span class="n">matrix</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>

<span class="c1"># åˆ›å»ºé®ç½©ï¼ˆä¸ºäº†åªæ˜¾ç¤ºä¸‹ä¸‰è§’ï¼‰</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">triu</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones_like</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">))</span>

<span class="c1"># å®šåˆ¶è°ƒè‰²æ¿</span>
<span class="n">cmap</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">diverging_palette</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">75</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span>
                             <span class="n">n</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="s2">&#34;light&#34;</span><span class="p">,</span> <span class="n">as_cmap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># è®¾å®šå›¾ç‰‡å°ºå¯¸</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>

<span class="c1"># ç»˜åˆ¶ç›¸ä¼¼çŸ©é˜µçƒ­åŠ›å›¾</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
             <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;.2f&#39;</span><span class="p">,</span> <span class="n">square</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="img/cor2.png" width="800" />
    
    
</figure>

<p>ç”±æ­¤äº§ç”Ÿçš„å¯è§†åŒ–å›¾æ›´å®¹æ˜“è§£é‡Šå¹¶ä¸”æ²¡æœ‰è§†è§‰å¹²æ‰°å¹²æ‰°ã€‚</p>
<ul>
<li>é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨DataFrameçš„.corræ–¹æ³•æ„å»ºç›¸å…³çŸ©é˜µã€‚</li>
<li>ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨dtypeè®¾ç½®ä¸ºboolçš„np.ones_likeå‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªTrueçŸ©é˜µï¼Œå…¶å½¢çŠ¶ä¸DataFrameç›¸åŒï¼š</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
</code></pre></div><pre><code>array([[1., 1., 1., 1., 1.],
       [1., 1., 1., 1., 1.],
       [1., 1., 1., 1., 1.],
       [1., 1., 1., 1., 1.],
       [1., 1., 1., 1., 1.]])
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">np</span><span class="o">.</span><span class="n">ones_like</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
</code></pre></div><pre><code>array([[ True,  True,  True,  True],
       [ True,  True,  True,  True],
       [ True,  True,  True,  True],
       [ True,  True,  True,  True]])
</code></pre>
<p>å°†å¸ƒå°”æ–¹é˜µä¼ é€’ç»™Numpyçš„.triuå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†è¿”å›ä¸€ä¸ªäºŒç»´å¸ƒå°”è’™ç‰ˆï¼Œå…¶ä¸­åŒ…å«çŸ©é˜µä¸‹ä¸‰è§’çš„Falseå€¼ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">np</span><span class="o">.</span><span class="n">triu</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones_like</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">))</span>
</code></pre></div><pre><code>array([[ True,  True,  True,  True],
       [False,  True,  True,  True],
       [False, False,  True,  True],
       [False, False, False,  True]])
</code></pre>
<p>ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶ä¼ é€’ç»™Seabornçš„heatmapå‡½æ•°ï¼Œä»¥æ ¹æ®æ­¤è’™ç‰ˆå¯¹çŸ©é˜µè¿›è¡Œå¯è§†åŒ–</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">ns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
               <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;.2f&#39;</span><span class="p">,</span> <span class="n">square</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
</code></pre></div><br>
<h2 id="2-value_countsè€ƒè™‘ç¼ºå¤±å€¼">2. value_countsè€ƒè™‘ç¼ºå¤±å€¼</h2>
<p>ä½¿ç”¨value_countsæ—¶ï¼Œå¯å°†dropnaè®¾ç½®ä¸ºFalseæ¥æŸ¥çœ‹ä»»ä½•åˆ—ä¸­ç¼ºå¤±å€¼çš„æ¯”ä¾‹ã€‚é€šè¿‡ç¡®å®šç¼ºå¤±å€¼çš„æ¯”ä¾‹ï¼Œå¯ä»¥å†³å®šæ˜¯å¦ä¸¢å¼ƒå«æœ‰ç¼ºå¤±å€¼çš„è®°å½•ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#å­—æ®µCouncilAreaçš„æ•°æ®åˆ†å¸ƒæƒ…å†µ</span>
<span class="n">df</span><span class="o">.</span><span class="n">CouncilArea</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">dropna</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><pre><code>Boroondara City Council    0.105431
Darebin City Council       0.081791
Moreland City Council      0.060877
Glen Eira City Council     0.057549
Melbourne City Council     0.056000
Name: CouncilArea, dtype: float64
</code></pre>
<p>ä½†æ˜¯ï¼Œå¦‚æœè¦æŸ¥çœ‹<strong>æ‰€æœ‰åˆ—</strong>ä¸­ç¼ºå¤±å€¼çš„æ¯”ä¾‹ï¼Œåˆ™value_countsä¸æ˜¯æœ€ä½³é€‰æ‹©ã€‚ ç›¸åï¼Œæ‚¨å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ol>
<li>
<p>é¦–å…ˆï¼Œé€šè¿‡å°†ç¼ºå¤±å€¼çš„æ•°é‡é™¤ä»¥DataFrameçš„é•¿åº¦æ¥æ‰¾åˆ°æ¯”ä¾‹ã€‚</p>
</li>
<li>
<p>ç„¶åï¼Œæ‚¨å¯ä»¥è¿‡æ»¤æ‰0ï¼…çš„åˆ—ï¼Œå³iã€‚ eã€‚ åªé€‰æ‹©ç¼ºå°‘å€¼çš„åˆ—ã€‚</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">missing_props</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="n">missing_props</span><span class="p">[</span><span class="n">missing_props</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div><pre><code>BuildingArea     0.605761
YearBuilt        0.553863
Landsize         0.338813
Car              0.250394
Bathroom         0.235993
Bedroom2         0.235735
Longtitude       0.228821
Lattitude        0.228821
Price            0.218321
Propertycount    0.000086
Regionname       0.000086
CouncilArea      0.000086
Postcode         0.000029
Distance         0.000029
dtype: float64
</code></pre>
<br>
<h2 id="3-ä½¿ç”¨pandasçš„styler">3. ä½¿ç”¨Pandasçš„Styler</h2>
<p>æˆ‘ä»¬ä¸­çš„è®¸å¤šäººä»æœªæ„è¯†åˆ°pandasçš„å·¨å¤§æ½œåŠ›ã€‚pandasçš„ä¸€ä¸ªè¢«ä½ä¼°ä¸”ç»å¸¸è¢«å¿½è§†çš„åŠŸèƒ½æ˜¯å…¶<strong>å¯¹DataFramesè¿›è¡Œæ ·å¼è®¾ç½®</strong>çš„èƒ½åŠ›ã€‚ ä½¿ç”¨pandas DataFramesçš„.styleå±æ€§ï¼Œå¯ä»¥å°†æ¡ä»¶è®¾è®¡å’Œæ ·å¼åº”ç”¨äºå®ƒä»¬ã€‚</p>
<p>ä½œä¸ºç¬¬ä¸€ä¸ªç¤ºä¾‹ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•æ ¹æ®æ¯ä¸ªå•å…ƒæ ¼çš„å€¼æ¥æ›´æ”¹èƒŒæ™¯é¢œè‰²ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">diamonds</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/diamonds.csv&#39;</span><span class="p">)</span>
<span class="n">diamonds</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="img/diamonds.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">diamonds</span><span class="o">.</span><span class="n">cut</span><span class="p">,</span> <span class="n">diamonds</span><span class="o">.</span><span class="n">clarity</span><span class="p">)</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;rocket_r&#39;</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/heat1.png" width="800" />
    
    
</figure>

<p>å‡ ä¹æ²¡æœ‰ä½¿ç”¨Seabornçš„çƒ­å›¾åŠŸèƒ½çš„çƒ­å›¾ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨pd.crosstabå¯¹é’»çŸ³åˆ‡å‰²(cut)å’Œå‡€åº¦(clarity)çš„æ¯ç§ç»„åˆè¿›è¡Œè®¡æ•°ã€‚</p>
<p>å°†.style.background_gradientä¸è°ƒè‰²æ¿é…åˆä½¿ç”¨ï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°å‘ç°å“ªç§ç»„åˆå‡ºç°å¾—æœ€å¤šã€‚ ä»…ä»ä¸Šé¢çš„DataFrameä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¤§å¤šæ•°é’»çŸ³éƒ½æ˜¯â€œ VS2â€å‡€åº¦ç±»å‹ã€‚</p>
<p>æˆ‘ä»¬ç”šè‡³å¯ä»¥é€šè¿‡åœ¨äº¤å‰è¡¨ä¸­æ‰¾åˆ°æ¯ç§é’»çŸ³åˆ‡å‰²cutå’Œå‡€åº¦clarityç»„åˆçš„<strong>å¹³å‡ä»·æ ¼</strong>æ¥è¿›ä¸€æ­¥åšåˆ°è¿™ä¸€ç‚¹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">diamonds</span><span class="o">.</span><span class="n">cut</span><span class="p">,</span> <span class="n">diamonds</span><span class="o">.</span><span class="n">clarity</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">diamonds</span><span class="o">.</span><span class="n">price</span><span class="p">)</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;rocket_r&#39;</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/heat2.png" width="800" />
    
    
</figure>

<p>é€šè¿‡å°†.formatæ–¹æ³•ä¸æ ¼å¼å­—ç¬¦ä¸²{ï¼š.2f}é“¾æ¥èµ·æ¥ï¼Œæˆ‘ä»¬æŒ‡å®šäº†2ä¸ªæµ®ç‚¹æ•°çš„ç²¾åº¦ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">agg_prices</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">diamonds</span><span class="o">.</span><span class="n">cut</span><span class="p">,</span> <span class="n">diamonds</span><span class="o">.</span><span class="n">clarity</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">diamonds</span><span class="o">.</span><span class="n">price</span><span class="p">)</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;rocket_r&#39;</span><span class="p">)</span>

<span class="n">agg_prices</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.2f}</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/heat3.png" width="800" />
    
    
</figure>

<br>
<h2 id="4-matplotlibé»˜è®¤å…¨å±€è®¾ç½®">4. matplotlibé»˜è®¤å…¨å±€è®¾ç½®</h2>
<p>åœ¨è¿›è¡Œ<strong>æ¢ç´¢æ€§æ•°æ®åˆ†æ</strong>æ—¶ï¼Œæ‚¨å¯èƒ½æƒ³å¯¹æ‰€æœ‰ç»˜å›¾åº”ç”¨è‡ªå®šä¹‰è°ƒè‰²æ¿ï¼Œå¯¹åˆ»åº¦æ ‡ç­¾ä½¿ç”¨æ›´å¤§çš„å­—ä½“ï¼Œæ›´æ”¹å›¾ä¾‹çš„ä½ç½®ï¼Œä½¿ç”¨å›ºå®šçš„å›¾å½¢å¤§å°ç­‰ã€‚</p>
<p>å¯¹ç»˜å›¾è‡ªå®šä¹‰å‚æ•°çš„æ›´æ”¹æ˜¯ä¸€é¡¹éå¸¸æ— èŠï¼Œé‡å¤ä¸”è€—æ—¶çš„ä»»åŠ¡ã€‚ å¹¸è¿çš„æ˜¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨Matplotlibçš„rcParamsä¸ºç»˜å›¾è®¾ç½®å…¨å±€é…ç½®ã€‚</p>
<p>rcParamsåªæ˜¯ä¸€ä¸ªæ™®é€šçš„Pythonå­—å…¸ï¼Œå…¶ä¸­åŒ…å«Matplotlibçš„é»˜è®¤è®¾ç½®ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">rcParams</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>

<span class="n">rcParams</span>
</code></pre></div><pre><code>RcParams({'_internal.classic_mode': False,
          'agg.path.chunksize': 0,
          'animation.avconv_args': [],
          'animation.avconv_path': 'avconv',
          'animation.bitrate': -1,
          'animation.codec': 'h264',
          'animation.convert_args': [],
          'animation.convert_path': 'convert',
          'animation.embed_limit': 20.0,
          'animation.ffmpeg_args': [],
          'animation.ffmpeg_path': 'ffmpeg',
          'animation.frame_format': 'png',
          'animation.html': 'none',
          'animation.html_args': [],
          'animation.writer': 'ffmpeg',
          'axes.autolimit_mode': 'data',
          'axes.axisbelow': 'line',
          'axes.edgecolor': 'black',
          'axes.facecolor': 'white',
          'axes.formatter.limits': [-7, 7],
          'axes.formatter.min_exponent': 0,
          'axes.formatter.offset_threshold': 4,
          'axes.formatter.use_locale': False,
          'axes.formatter.use_mathtext': False,
          'axes.formatter.useoffset': True,
          'axes.grid': False,
          'axes.grid.axis': 'both',
          'axes.grid.which': 'major',
          'axes.labelcolor': 'black',
          'axes.labelpad': 4.0,
          'axes.labelsize': 'medium',
          'axes.labelweight': 'normal',
          'axes.linewidth': 0.8,
          'axes.prop_cycle': cycler('color', ['#1f77b4', '#ff7f0e', '#2ca02c', '#d62728', '#9467bd', '#8c564b', '#e377c2', '#7f7f7f', '#bcbd22', '#17becf']),
          'axes.spines.bottom': True,
          'axes.spines.left': True,
          'axes.spines.right': True,
          'axes.spines.top': True,
          'axes.titlepad': 6.0,
          'axes.titlesize': 'large',
          'axes.titleweight': 'normal',
          'axes.unicode_minus': True,
          'axes.xmargin': 0.05,
          'axes.ymargin': 0.05,
          'axes3d.grid': True,
          'backend': 'module://ipykernel.pylab.backend_inline',
          'backend_fallback': True,
          'boxplot.bootstrap': None,
          'boxplot.boxprops.color': 'black',
          'boxplot.boxprops.linestyle': '-',
          'boxplot.boxprops.linewidth': 1.0,
          'boxplot.capprops.color': 'black',
          'boxplot.capprops.linestyle': '-',
          'boxplot.capprops.linewidth': 1.0,
          'boxplot.flierprops.color': 'black',
          'boxplot.flierprops.linestyle': 'none',
          'boxplot.flierprops.linewidth': 1.0,
          'boxplot.flierprops.marker': 'o',
          'boxplot.flierprops.markeredgecolor': 'black',
          'boxplot.flierprops.markeredgewidth': 1.0,
          'boxplot.flierprops.markerfacecolor': 'none',
          'boxplot.flierprops.markersize': 6.0,
          'boxplot.meanline': False,
          'boxplot.meanprops.color': 'C2',
          'boxplot.meanprops.linestyle': '--',
          'boxplot.meanprops.linewidth': 1.0,
          'boxplot.meanprops.marker': '^',
          'boxplot.meanprops.markeredgecolor': 'C2',
          'boxplot.meanprops.markerfacecolor': 'C2',
          'boxplot.meanprops.markersize': 6.0,
          'boxplot.medianprops.color': 'C1',
          'boxplot.medianprops.linestyle': '-',
          'boxplot.medianprops.linewidth': 1.0,
          'boxplot.notch': False,
          'boxplot.patchartist': False,
          'boxplot.showbox': True,
          'boxplot.showcaps': True,
          'boxplot.showfliers': True,
          'boxplot.showmeans': False,
          'boxplot.vertical': True,
          'boxplot.whiskerprops.color': 'black',
          'boxplot.whiskerprops.linestyle': '-',
          'boxplot.whiskerprops.linewidth': 1.0,
          'boxplot.whiskers': 1.5,
          'contour.corner_mask': True,
          'contour.negative_linestyle': 'dashed',
          'datapath': '/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/matplotlib/mpl-data',
          'date.autoformatter.day': '%Y-%m-%d',
          'date.autoformatter.hour': '%m-%d %H',
          'date.autoformatter.microsecond': '%M:%S.%f',
          'date.autoformatter.minute': '%d %H:%M',
          'date.autoformatter.month': '%Y-%m',
          'date.autoformatter.second': '%H:%M:%S',
          'date.autoformatter.year': '%Y',
          'docstring.hardcopy': False,
          'errorbar.capsize': 0.0,
          'examples.directory': '',
          'figure.autolayout': False,
          'figure.constrained_layout.h_pad': 0.04167,
          'figure.constrained_layout.hspace': 0.02,
          'figure.constrained_layout.use': False,
          'figure.constrained_layout.w_pad': 0.04167,
          'figure.constrained_layout.wspace': 0.02,
          'figure.dpi': 72.0,
          'figure.edgecolor': (1, 1, 1, 0),
          'figure.facecolor': (1, 1, 1, 0),
          'figure.figsize': [6.0, 4.0],
          'figure.frameon': True,
          'figure.max_open_warning': 20,
          'figure.subplot.bottom': 0.125,
          'figure.subplot.hspace': 0.2,
          'figure.subplot.left': 0.125,
          'figure.subplot.right': 0.9,
          'figure.subplot.top': 0.88,
          'figure.subplot.wspace': 0.2,
          'figure.titlesize': 'large',
          'figure.titleweight': 'normal',
          'font.cursive': ['Apple Chancery',
                           'Textile',
                           'Zapf Chancery',
                           'Sand',
                           'Script MT',
                           'Felipa',
                           'cursive'],
          'font.family': ['sans-serif'],
          'font.fantasy': ['Comic Sans MS',
                           'Chicago',
                           'Charcoal',
                           'Impact',
                           'Western',
                           'Humor Sans',
                           'xkcd',
                           'fantasy'],
          'font.monospace': ['DejaVu Sans Mono',
                             'Bitstream Vera Sans Mono',
                             'Computer Modern Typewriter',
                             'Andale Mono',
                             'Nimbus Mono L',
                             'Courier New',
                             'Courier',
                             'Fixed',
                             'Terminal',
                             'monospace'],
          'font.sans-serif': ['DejaVu Sans',
                              'Bitstream Vera Sans',
                              'Computer Modern Sans Serif',
                              'Lucida Grande',
                              'Verdana',
                              'Geneva',
                              'Lucid',
                              'Arial',
                              'Helvetica',
                              'Avant Garde',
                              'sans-serif'],
          'font.serif': ['DejaVu Serif',
                         'Bitstream Vera Serif',
                         'Computer Modern Roman',
                         'New Century Schoolbook',
                         'Century Schoolbook L',
                         'Utopia',
                         'ITC Bookman',
                         'Bookman',
                         'Nimbus Roman No9 L',
                         'Times New Roman',
                         'Times',
                         'Palatino',
                         'Charter',
                         'serif'],
          'font.size': 10.0,
          'font.stretch': 'normal',
          'font.style': 'normal',
          'font.variant': 'normal',
          'font.weight': 'normal',
          'grid.alpha': 1.0,
          'grid.color': '#b0b0b0',
          'grid.linestyle': '-',
          'grid.linewidth': 0.8,
          'hatch.color': 'black',
          'hatch.linewidth': 1.0,
          'hist.bins': 10,
          'image.aspect': 'equal',
          'image.cmap': 'viridis',
          'image.composite_image': True,
          'image.interpolation': 'nearest',
          'image.lut': 256,
          'image.origin': 'upper',
          'image.resample': True,
          'interactive': True,
          'keymap.all_axes': ['a'],
          'keymap.back': ['left', 'c', 'backspace', 'MouseButton.BACK'],
          'keymap.copy': ['ctrl+c', 'cmd+c'],
          'keymap.forward': ['right', 'v', 'MouseButton.FORWARD'],
          'keymap.fullscreen': ['f', 'ctrl+f'],
          'keymap.grid': ['g'],
          'keymap.grid_minor': ['G'],
          'keymap.help': ['f1'],
          'keymap.home': ['h', 'r', 'home'],
          'keymap.pan': ['p'],
          'keymap.quit': ['ctrl+w', 'cmd+w', 'q'],
          'keymap.quit_all': ['W', 'cmd+W', 'Q'],
          'keymap.save': ['s', 'ctrl+s'],
          'keymap.xscale': ['k', 'L'],
          'keymap.yscale': ['l'],
          'keymap.zoom': ['o'],
          'legend.borderaxespad': 0.5,
          'legend.borderpad': 0.4,
          'legend.columnspacing': 2.0,
          'legend.edgecolor': '0.8',
          'legend.facecolor': 'inherit',
          'legend.fancybox': True,
          'legend.fontsize': 'medium',
          'legend.framealpha': 0.8,
          'legend.frameon': True,
          'legend.handleheight': 0.7,
          'legend.handlelength': 2.0,
          'legend.handletextpad': 0.8,
          'legend.labelspacing': 0.5,
          'legend.loc': 'best',
          'legend.markerscale': 1.0,
          'legend.numpoints': 1,
          'legend.scatterpoints': 1,
          'legend.shadow': False,
          'legend.title_fontsize': None,
          'lines.antialiased': True,
          'lines.color': 'C0',
          'lines.dash_capstyle': 'butt',
          'lines.dash_joinstyle': 'round',
          'lines.dashdot_pattern': [6.4, 1.6, 1.0, 1.6],
          'lines.dashed_pattern': [3.7, 1.6],
          'lines.dotted_pattern': [1.0, 1.65],
          'lines.linestyle': '-',
          'lines.linewidth': 1.5,
          'lines.marker': 'None',
          'lines.markeredgecolor': 'auto',
          'lines.markeredgewidth': 1.0,
          'lines.markerfacecolor': 'auto',
          'lines.markersize': 6.0,
          'lines.scale_dashes': True,
          'lines.solid_capstyle': 'projecting',
          'lines.solid_joinstyle': 'round',
          'markers.fillstyle': 'full',
          'mathtext.bf': 'sans:bold',
          'mathtext.cal': 'cursive',
          'mathtext.default': 'it',
          'mathtext.fallback_to_cm': True,
          'mathtext.fontset': 'dejavusans',
          'mathtext.it': 'sans:italic',
          'mathtext.rm': 'sans',
          'mathtext.sf': 'sans',
          'mathtext.tt': 'monospace',
          'patch.antialiased': True,
          'patch.edgecolor': 'black',
          'patch.facecolor': 'C0',
          'patch.force_edgecolor': False,
          'patch.linewidth': 1.0,
          'path.effects': [],
          'path.simplify': True,
          'path.simplify_threshold': 0.1111111111111111,
          'path.sketch': None,
          'path.snap': True,
          'pdf.compression': 6,
          'pdf.fonttype': 3,
          'pdf.inheritcolor': False,
          'pdf.use14corefonts': False,
          'pgf.preamble': '',
          'pgf.rcfonts': True,
          'pgf.texsystem': 'xelatex',
          'polaraxes.grid': True,
          'ps.distiller.res': 6000,
          'ps.fonttype': 3,
          'ps.papersize': 'letter',
          'ps.useafm': False,
          'ps.usedistiller': False,
          'savefig.bbox': None,
          'savefig.directory': '~',
          'savefig.dpi': 'figure',
          'savefig.edgecolor': 'white',
          'savefig.facecolor': 'white',
          'savefig.format': 'png',
          'savefig.frameon': True,
          'savefig.jpeg_quality': 95,
          'savefig.orientation': 'portrait',
          'savefig.pad_inches': 0.1,
          'savefig.transparent': False,
          'scatter.edgecolors': 'face',
          'scatter.marker': 'o',
          'svg.fonttype': 'path',
          'svg.hashsalt': None,
          'svg.image_inline': True,
          'text.antialiased': True,
          'text.color': 'black',
          'text.hinting': 'auto',
          'text.hinting_factor': 8,
          'text.latex.preamble': '',
          'text.latex.preview': False,
          'text.latex.unicode': True,
          'text.usetex': False,
          'timezone': 'UTC',
          'tk.window_focus': False,
          'toolbar': 'toolbar2',
          'verbose.fileo': 'sys.stdout',
          'verbose.level': 'silent',
          'webagg.address': '127.0.0.1',
          'webagg.open_in_browser': True,
          'webagg.port': 8988,
          'webagg.port_retries': 50,
          'xtick.alignment': 'center',
          'xtick.bottom': True,
          'xtick.color': 'black',
          'xtick.direction': 'out',
          'xtick.labelbottom': True,
          'xtick.labelsize': 'medium',
          'xtick.labeltop': False,
          'xtick.major.bottom': True,
          'xtick.major.pad': 3.5,
          'xtick.major.size': 3.5,
          'xtick.major.top': True,
          'xtick.major.width': 0.8,
          'xtick.minor.bottom': True,
          'xtick.minor.pad': 3.4,
          'xtick.minor.size': 2.0,
          'xtick.minor.top': True,
          'xtick.minor.visible': False,
          'xtick.minor.width': 0.6,
          'xtick.top': False,
          'ytick.alignment': 'center_baseline',
          'ytick.color': 'black',
          'ytick.direction': 'out',
          'ytick.labelleft': True,
          'ytick.labelright': False,
          'ytick.labelsize': 'medium',
          'ytick.left': True,
          'ytick.major.left': True,
          'ytick.major.pad': 3.5,
          'ytick.major.right': True,
          'ytick.major.size': 3.5,
          'ytick.major.width': 0.8,
          'ytick.minor.left': True,
          'ytick.minor.pad': 3.4,
          'ytick.minor.right': True,
          'ytick.minor.size': 2.0,
          'ytick.minor.visible': False,
          'ytick.minor.width': 0.6,
          'ytick.right': False})
</code></pre>
<p>æ‚¨å¯ä»¥è°ƒæ•´æ¯ä¸ªå›¾çš„ä»»æ„å‚æ•°è®¾ç½®ï¼Œä¸€èˆ¬çš„å›¾åƒè®¾ç½®å¦‚å›ºå®šå›¾å½¢å¤§å°ï¼Œåˆ»åº¦æ ‡ç­¾å­—ä½“å¤§å°ä»¥åŠå…¶ä»–ä¸€äº›å‚æ•°ã€‚</p>
<p>é€šè¿‡è¿™ç§è®¾ç½®ï¼Œå¯ä»¥å‡å°‘å¾ˆå¤šé‡å¤çš„ä»£ç é‡</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># å»æ‰é¡¶éƒ¨å’Œå³ä¾§çš„çº¿æ¡Remove top and right spines</span>
<span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.spines.top&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.spines.right&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

<span class="c1"># è®¾ç½®å›¾çš„å°ºå¯¸Set fixed figure size</span>
<span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>

<span class="c1"># è®¾ç½®å›¾ç‰‡åƒç´ æ¸…æ™°åº¦ Set dots per inch to 300, very high quality images</span>
<span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.dpi&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">300</span>

<span class="c1"># è®¾ç½®è‡ªåŠ¨è°ƒæ•´å¸ƒå±€Enable autolayout</span>
<span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.autolayout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

<span class="c1"># è®¾ç½®å…¨å±€å­—å·Set global fontsize</span>
<span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;font.style&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">16</span>

<span class="c1"># åˆ»åº¦å­—å·Fontsize of ticklabels</span>
<span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.labelsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.labelsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
</code></pre></div><br>
<h2 id="5-pandaså…¨å±€è®¾ç½®">5. Pandaså…¨å±€è®¾ç½®</h2>
<p>å°±åƒMatplotlibä¸€æ ·ï¼Œpandaså…·æœ‰å¯ä»¥ä½¿ç”¨çš„å…¨å±€è®¾ç½®ã€‚ å½“ç„¶ï¼Œå®ƒä»¬å¤§å¤šæ•°ä¸æ˜¾ç¤ºé€‰é¡¹æœ‰å…³ã€‚</p>
<ul>
<li><strong>get_option()</strong> -  è·å–pandaså•ä¸ªé€‰é¡¹</li>
<li><strong>set_option()</strong> â€” è®¾ç½®pandaså•ä¸ªé€‰é¡¹</li>
<li><strong>reset_option()</strong> â€” é‡ç½®pandasé€‰é¡¹å€¼</li>
</ul>
<p>æˆ‘æ›´å–œæ¬¢æ˜¾ç¤ºæ‰€æœ‰çš„åˆ—ï¼Œlets go</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="%20img/df1.png" width="800" />
    
    
</figure>

<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://hidadeng.github.io/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>causalinferenceåº“ | ä½¿ç”¨Pythonåšå› æœæ¨æ–­</title>
      <link>https://hidadeng.github.io/blog/causal_inference/</link>
      <pubDate>Sun, 09 Feb 2020 10:43:10 +0600</pubDate>
      
      <guid>/blog/causal_inference/</guid>
      <description>ä½¿ç”¨Pythonåšå› æœæ¨æ–­</description>
      <content:encoded><![CDATA[<p>pythonè™½ç„¶ä¸Rä¸€æ ·éƒ½å¯ä»¥åšæ•°æ®åˆ†æï¼Œä½†æ˜¯åœ¨è®¡é‡æ–¹é¢è¾ƒä¸ºè–„å¼±ï¼Œpythonæ›´åƒæ˜¯å¹²è„æ´»ï¼Œæ¸…æ´—æ•°æ®ç”¨çš„ã€‚ç°åœ¨æ…¢æ…¢çš„pythonä¹Ÿæœ‰ä¸€äº›åœ¨è®¡é‡çš„åŒ…ï¼Œæ¯”å¦‚causalinferenceï¼Œè¿™ä¸ªåŒ…å¯ä»¥åšå› æœæ¨æ–­åˆ†æã€‚</p>
<h2 id="ä¸‹è½½">ä¸‹è½½</h2>
<p><a href="causal_inference.zip">click to download the code</a></p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">causalinference</span>
</code></pre></div><br>
<h2 id="æ•°æ®å¯¼å…¥">æ•°æ®å¯¼å…¥</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data.csv&#39;</span><span class="p">)</span>
<span class="n">df</span>
</code></pre></div><p>Run</p>
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">y</th>
<th style="text-align:right">istreatment</th>
<th style="text-align:right">x1</th>
<th style="text-align:right">x2</th>
<th style="text-align:right">x3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">4.63639</td>
<td style="text-align:right">1</td>
<td style="text-align:right">-0.355052</td>
<td style="text-align:right">0.441348</td>
<td style="text-align:right">0.908629</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">-1.96549</td>
<td style="text-align:right">0</td>
<td style="text-align:right">-0.81926</td>
<td style="text-align:right">-0.712998</td>
<td style="text-align:right">0.0375631</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">0.581781</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1.39134</td>
<td style="text-align:right">-0.0172917</td>
<td style="text-align:right">-0.804188</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">-2.06729</td>
<td style="text-align:right">0</td>
<td style="text-align:right">-0.831021</td>
<td style="text-align:right">0.49786</td>
<td style="text-align:right">0.349555</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">9.54683</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1.68232</td>
<td style="text-align:right">0.608986</td>
<td style="text-align:right">0.937725</td>
</tr>
</tbody>
</table>
<p>æ•°æ®æè¿°</p>
<ul>
<li>x1ï¼Œx2ï¼Œx3 åå˜é‡(æ§åˆ¶å˜é‡)</li>
<li>y å› å˜é‡</li>
<li>istreatment å¤„ç½®å˜é‡Dï¼Œæ ‡æ³¨æ¯æ¡æ•°æ®éš¶å±äºtreatmentæˆ–controlç»„ã€‚1ä¸ºtreatmentï¼Œ 0ä¸ºcontrolã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">causalinference</span> <span class="kn">import</span> <span class="n">CausalModel</span>

<span class="n">Y</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="n">D</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;istreatment&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;x1&#39;</span><span class="p">,</span> <span class="s1">&#39;x2&#39;</span><span class="p">,</span> <span class="s1">&#39;x3&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>

<span class="c1">#CausalModelå‚æ•°ä¾æ¬¡ä¸ºYï¼Œ Dï¼Œ Xã€‚å…¶ä¸­Yä¸ºå› å˜é‡</span>
<span class="n">causal</span> <span class="o">=</span> <span class="n">CausalModel</span><span class="p">(</span><span class="n">Y</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span>
<span class="n">causal</span>
</code></pre></div><p>Run</p>
<pre><code>&lt;causalinference.causal.CausalModel at 0x7fd3ad0edee0&gt;
</code></pre>
<br>
<h2 id="æè¿°æ€§ç»Ÿè®¡åˆ†æ">æè¿°æ€§ç»Ÿè®¡åˆ†æ</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="nb">print</span><span class="p">(</span><span class="n">causal</span><span class="o">.</span><span class="n">summary_stats</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<pre><code>Summary Statistics

                      Controls (N_c=2509)        Treated (N_t=2491)             
       Variable         Mean         S.d.         Mean         S.d.     Raw-diff
--------------------------------------------------------------------------------
              Y       -1.012        1.742        4.978        3.068        5.989

                      Controls (N_c=2509)        Treated (N_t=2491)             
       Variable         Mean         S.d.         Mean         S.d.     Nor-diff
--------------------------------------------------------------------------------
             X0       -0.343        0.940        0.336        0.961        0.714
             X1       -0.347        0.936        0.345        0.958        0.730
             X2       -0.313        0.940        0.306        0.963        0.650
</code></pre>
<p>causal.summary_statså«æœ‰çš„æŒ‡æ ‡å­—æ®µå</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">causal</span><span class="o">.</span><span class="n">summary_stats</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<pre><code>dict_keys(['N', 'K', 'N_c', 'N_t', 'Y_c_mean', 'Y_t_mean', 'Y_c_sd', 'Y_t_sd', 'rdiff', 'X_c_mean', 'X_t_mean', 'X_c_sd', 'X_t_sd', 'ndiff'])
</code></pre>
<br>
<h2 id="ä½¿ç”¨olsä¼°è®¡å¤„ç½®æ•ˆåº”">ä½¿ç”¨OLSä¼°è®¡å¤„ç½®æ•ˆåº”</h2>
<p>ä¼°è®¡å¤„ç½®æ•ˆåº”æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨OLSæ–¹æ³•ï¼Œ</p>
<p><img loading="lazy" src="img/ols.png" alt=""  />
</p>
<p>CausalModel.est_via_ols(adj)</p>
<p>è¯¥æ–¹æ³•æœ‰ä¸€ä¸ªå‚æ•°adj</p>
<ul>
<li>adj=0  æ¨¡å‹æœªä½¿ç”¨X(åå˜é‡ï¼‰</li>
<li>adj=1  æ¨¡å‹ä½¿ç”¨äº†D(æ˜¯å¦ä¸ºå¤„ç½®ç»„)å’ŒXï¼ˆåå˜é‡ï¼‰ã€‚</li>
<li>adj=2  æ¨¡å‹ä½¿ç”¨äº†D(æ˜¯å¦ä¸ºå¤„ç½®ç»„)ã€Xï¼ˆåå˜é‡ï¼‰ã€Dä¸Xçš„äº¤äº’</li>
<li>adjé»˜è®¤ä¸º2</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">causal</span><span class="o">.</span><span class="n">est_via_ols</span><span class="p">(</span><span class="n">adj</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">causal</span><span class="o">.</span><span class="n">estimates</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<pre><code>Treatment Effect Estimates: OLS

                     Est.       S.e.          z      P&gt;|z|      [95% Conf. int.]
--------------------------------------------------------------------------------
           ATE      3.017      0.034     88.740      0.000      2.950      3.083
           ATC      2.031      0.040     51.183      0.000      1.953      2.108
           ATT      4.010      0.039    103.964      0.000      3.934      4.086
</code></pre>
<p>å‚æ•°è§£è¯»</p>
<ul>
<li>ATE  å¹³å‡å¤„ç½®æ•ˆåº”(average treatment eï¬€ect)</li>
<li>ATC  æ§åˆ¶ç»„çš„å¹³å‡å¤„ç½®æ•ˆåº”(average treatment eï¬€ect for the controls)</li>
<li>ATT  å¤„ç½®ç»„çš„å¹³å‡å¤„ç½®æ•ˆåº”(average treatment eï¬€ect for the treated)</li>
</ul>
<p>ä½ ä»¬å†è¯•è¯•adjè®¾ç½®ä¸º0å’Œ1åˆ†åˆ«è¿è¡Œå‡ºä»€ä¹ˆç»“æœ</p>
<br>
<h2 id="å€¾å‘å¾—åˆ†ä¼°è®¡">å€¾å‘å¾—åˆ†ä¼°è®¡</h2>
<p>æˆ‘ä»¬ä¼°è®¡å¤„ç½®æ•ˆåº”æ—¶ï¼Œå¾ˆå¸Œæœ›å¤„ç½®ç»„å’Œæ§åˆ¶ç»„å¾ˆç±»ä¼¼ã€‚æ¯”å¦‚ç ”ç©¶å—æ•™è‚²æ°´å¹³å¯¹ä¸ªäººæ”¶å…¥çš„å½±å“ï¼Œå…¶ä»–å˜é‡å¦‚å®¶åº­èƒŒæ™¯ã€å¹´é¾„ã€åœ°åŒºç­‰åå˜é‡å­˜åœ¨å·®å¼‚ï¼Œæˆ‘ä»¬å¸Œæœ›æ§åˆ¶ç»„å’Œå¤„ç½®ç»„çš„ä¹‹é—´çš„åå˜é‡å¹³è¡¡æ€§å°½å¯èƒ½çš„å¥½ï¼Œè¿™æ ·ä¸¤ä¸ªç»„å°±ä¼šå¾ˆåƒï¼Œå½“å¯¹è¿™ä¸¤ä¸ªç»„çš„å—æ•™è‚²æ°´å¹³è¿›è¡Œæ“ä½œæ—¶ï¼Œä¸¤ä¸ªç»„çš„æ”¶å…¥å·®å¼‚å¯ä»¥è®¤ä¸ºæ˜¯å—æ•™è‚²æ°´å¹³å¸¦æ¥çš„ã€‚</p>
<p>è®©ä¸¤ä¸ªç»„å¾ˆåƒï¼Œè¿™é‡Œå°±ç”¨åˆ°å€¾å‘å¾—åˆ†ä¼°è®¡ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">causal</span><span class="o">.</span><span class="n">est_propensity_s</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">causal</span><span class="o">.</span><span class="n">propensity</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<pre><code>Estimated Parameters of Propensity Score

                    Coef.       S.e.          z      P&gt;|z|      [95% Conf. int.]
--------------------------------------------------------------------------------
     Intercept      0.005      0.035      0.145      0.885     -0.063      0.073
            X1      0.999      0.041     24.495      0.000      0.919      1.079
            X0      1.000      0.041     24.543      0.000      0.920      1.080
            X2      0.933      0.040     23.181      0.000      0.855      1.012
</code></pre>
<br>
<h2 id="åˆ†å±‚æ–¹æ³•ä¼°è®¡å¤„ç½®æ•ˆåº”">åˆ†å±‚æ–¹æ³•ä¼°è®¡å¤„ç½®æ•ˆåº”</h2>
<p>å€¾å‘å¾—åˆ†ä¼°è®¡ï¼Œè®©ä¸¤ä¸ªç»„å°½é‡ç›¸ä¼¼ï¼Œä½†å®é™…ä¸Šè¿™ä¸ªç›¸ä¼¼å€¼èŒƒå›´æœ‰ç‚¹å¤§ã€‚æ¯”å¦‚å‡è®¾å—æ•™è‚²æ°´å¹³å¯¹ä¸ªäººæ”¶å…¥çš„å½±å“ï¼Œèº«é«˜ã€ä½“é‡ç­‰é¢œå€¼ä¿¡æ¯ï¼ˆåå˜é‡ï¼‰å…¶å®å¯¹æ”¶å…¥ä¹Ÿæ˜¯æœ‰å½±å“çš„ï¼Œé‚£ä¹ˆå°±åº”è¯¥å¯¹äººç¾¤è¿›è¡Œåˆ†å±‚ï¼Œä¸åŒé¢œå€¼æ°´å¹³ä¸‹å—æ•™è‚²æ°´å¹³å¯¹ä¸ªäººæ”¶å…¥çš„å½±å“ã€‚</p>
<p>åˆ†å±‚æ–¹æ³•ä¼°è®¡CausalModel.stratify_s è‡ªåŠ¨é€‰æ‹©åå˜é‡</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">causal</span><span class="o">.</span><span class="n">stratify_s</span><span class="p">()</span>  
<span class="nb">print</span><span class="p">(</span><span class="n">causal</span><span class="o">.</span><span class="n">strata</span><span class="p">)</span> 
</code></pre></div><p>Run</p>
<pre><code>Stratification Summary

              Propensity Score         Sample Size     Ave. Propensity   Outcome
   Stratum      Min.      Max.  Controls   Treated  Controls   Treated  Raw-diff
--------------------------------------------------------------------------------
         1     0.001     0.043       153         5     0.024     0.029    -0.049
         2     0.043     0.069       148         8     0.056     0.059     0.142
         3     0.070     0.118       283        29     0.093     0.092     0.953
         4     0.119     0.178       268        45     0.147     0.147     1.154
         5     0.178     0.240       247        65     0.208     0.210     1.728
         6     0.240     0.361       451       174     0.299     0.300     2.093
         7     0.361     0.427       196       117     0.393     0.395     2.406
         8     0.427     0.499       153       159     0.465     0.464     2.868
         9     0.499     0.532        82        75     0.515     0.515     2.973
        10     0.532     0.568        65        91     0.551     0.553     3.259
        11     0.568     0.630       114       198     0.600     0.601     3.456
        12     0.630     0.758       180       445     0.693     0.696     3.918
        13     0.758     0.818        77       236     0.787     0.789     4.503
        14     0.818     0.876        57       255     0.845     0.849     4.937
        15     0.876     0.933        23       289     0.904     0.904     5.171
        16     0.933     0.998        12       300     0.957     0.963     6.822
</code></pre>
]]></content:encoded>
    </item>
    
  </channel>
</rss>
