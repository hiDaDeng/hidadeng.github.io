<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>ç¬¬ä¸‰æ–¹åŒ… on å¤§é‚“å’Œä»–çš„PYTHON</title>
    <link>/tags/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85/</link>
    <description>Recent content in ç¬¬ä¸‰æ–¹åŒ… on å¤§é‚“å’Œä»–çš„PYTHON</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Thu, 09 Feb 2023 00:00:00 +0000</lastBuildDate><atom:link href="/tags/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>pynimateåº“ | ç»˜åˆ¶åŠ¨æ€å¯è§†åŒ–å›¾</title>
      <link>https://hidadeng.github.io/blog/2023-02-11-pyanimate-create-vis-video/</link>
      <pubDate>Thu, 09 Feb 2023 00:00:00 +0000</pubDate>
      
      <guid>/blog/2023-02-11-pyanimate-create-vis-video/</guid>
      <description>pynimate åˆ›å»ºæ¡å½¢æ•°æ®åŠ¨ç”»ã€‚</description>
      <content:encoded><![CDATA[<p>æ•°æ®å¯è§†åŒ–åŠ¨ç”»è¿˜åœ¨ç”¨Excelåšï¼Ÿ</p>
<p>ç°åœ¨ä¸€ä¸ªç®€å•çš„PythonåŒ…å°±èƒ½åˆ†åˆ†é’Ÿæå®šï¼</p>
<p>è€Œä¸”ç”Ÿæˆçš„åŠ¨ç”»ä¹Ÿè¶³å¤Ÿä¸æ»‘ï¼Œæ•ˆæœæ˜¯é…±ç´«çš„ï¼š</p>
<p><img loading="lazy" src="img/example3.gif" alt=""  />
</p>
<p>è¿™æ˜¯ä¸€ä½ä¸“æ”»Pythonè¯­è¨€çš„ç¨‹åºå‘˜å¼€å‘çš„å®‰è£…åŒ…ï¼Œåå« <strong>pynimate</strong>ã€‚</p>
<p>ç›®å‰å¯ä»¥ç›´æ¥é€šè¿‡PyPIå®‰è£…ä½¿ç”¨ã€‚</p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip install pynimate
</code></pre></div><h2 id="ä½¿ç”¨æŒ‡å—">ä½¿ç”¨æŒ‡å—</h2>
<p>æƒ³è¦ä½¿ç”¨Pynimateï¼Œç›´æ¥importä¸€ä¸‹å°±è¡Œã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pynimate</span> <span class="k">as</span> <span class="nn">nim</span>
</code></pre></div><p>è¾“å…¥æ•°æ®åï¼ŒPynimateå°†ä½¿ç”¨å‡½æ•°Barplotï¼ˆï¼‰æ¥åˆ›å»ºæ¡å½¢æ•°æ®åŠ¨ç”»ã€‚
è€Œåˆ›å»ºè¿™ç§åŠ¨ç”»ï¼Œè¾“å…¥çš„æ•°æ®å¿…é¡»æ˜¯pandasæ•°æ®ç»“æ„ï¼ˆå¦‚ä¸‹ï¼‰ï¼Œå…¶ä¸­å°†æ—¶é—´åˆ—è®¾ç½®ä¸ºç´¢å¼•ï¼Œæ¢å¥è¯è¯´ç´¢å¼•ä»£è¡¨çš„æ˜¯è‡ªå˜é‡ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">time, col1, col2, col3
2012   1     2     1
2013   1     1     2
2014   2     1.5   3
2015   2.5   2     3.5
</code></pre></div><p>å…·ä½“çš„ä»£ç å½¢å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="n">csv</span><span class="s1">&#39;).set_index(&#39;</span><span class="n">time</span><span class="s1">&#39;)</span>
</code></pre></div><p>æ¯”å¦‚è¦å¤„ç†å…·ä½“çš„æ•°æ®ï¼Œå†™æˆä»£ç åº”è¯¥æ˜¯è¿™æ ·å­çš„ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s2">&#34;time&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;1960-01-01&#34;</span><span class="p">,</span> <span class="s2">&#34;1961-01-01&#34;</span><span class="p">,</span> <span class="s2">&#34;1962-01-01&#34;</span><span class="p">],</span>
        <span class="s2">&#34;Afghanistan&#34;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
        <span class="s2">&#34;Angola&#34;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
        <span class="s2">&#34;Albania&#34;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
        <span class="s2">&#34;USA&#34;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
        <span class="s2">&#34;Argentina&#34;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
    <span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&#34;time&#34;</span><span class="p">)</span>
</code></pre></div><p>æ­¤å¤–ï¼Œè¦åˆ¶ä½œæ¡å½¢æ•°æ®åŠ¨ç”»ï¼ŒBarplotè¿˜æœ‰ä¸‰ä¸ªå¿…éœ€çš„å‚æ•°å¾—æ³¨æ„ï¼šdataã€time_formatå’Œip_freqï¼ˆInterpolation frequencyï¼‰ã€‚</p>
<p>dataå°±æ˜¯è¡¨æ ¼çš„æ•°æ®ï¼Œè¿™é‡Œä¹Ÿå°±ä¸å†èµ˜è¿°ã€‚</p>
<p>time_formatæ˜¯æŒ‡æ•°æ®ç´¢å¼•çš„æ—¶é—´æ—¥æœŸæ ¼å¼ï¼Œä¸€èˆ¬ä¸ºï¼šâ€%Y-%m-%dâ€ã€‚</p>
<p>æœ€åæ˜¯ip_freqï¼Œå®ƒæ˜¯åˆ¶ä½œåŠ¨ç”»ä¸­æ¯”è¾ƒå…³é”®çš„ä¸€æ­¥ï¼Œé€šè¿‡çº¿æ€§æ’å€¼ä½¿åŠ¨ç”»æ›´åŠ æµç•…ä¸æ»‘ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„åŸå§‹æ•°æ®éƒ½é€‚åˆåšæˆåŠ¨ç”»ï¼Œç°åœ¨ä¸€ä¸ªå…¸å‹çš„è§†é¢‘æ˜¯24fpsï¼Œå³æ¯ç§’æœ‰24å¸§ã€‚</p>
<p>ä¸¾ä¸ªæ —å­ğŸŒ°ï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼ä¸­çš„æ•°æ®åªæœ‰ä¸‰ä¸ªæ—¶é—´ç‚¹ï¼ŒæŒ‰ç†è¯´åªèƒ½ç”Ÿæˆ3å¸§è§†é¢‘ï¼Œæœ€ç»ˆåŠ¨ç”»ä¹Ÿåªæœ‰3/24ç§’ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">time, col1, col2
2012   1     3  
2013   2     2   
2014   3     1
</code></pre></div><p>è¿™æ—¶å€™ï¼Œip_freqæ’å€¼ï¼ˆçº¿æ€§ï¼‰å°±å¼€å§‹å‘æŒ¥ä½œç”¨äº†ï¼Œå¦‚æœæ’å€¼æ˜¯ä¸€ä¸ªå­£åº¦ï¼Œåˆ™å¾—å‡ºçš„æ•°æ®å°±å˜æˆäº†è¿™æ ·ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">time     col1  col2
2012-01-01  1.00  3.00
2012-04-01  1.25  2.75
2012-07-01  1.50  2.50
2012-10-01  1.75  2.25
2013-01-01  2.00  2.00
2013-04-01  2.25  1.75
2013-07-01  2.50  1.50
2013-10-01  2.75  1.25
2014-01-01  3.00  1.00
</code></pre></div><p>å…·ä½“çš„æ’å€¼æ—¶é—´é—´éš”ä¸ºå¤šä¹…ï¼Œåˆ™è¦è§†å…·ä½“çš„æ•°æ®è€Œå®šï¼Œä¸€èˆ¬ç»˜åˆ¶å¤§æ•°æ®æ—¶ï¼Œè®¾ç½®ä¸ºip_freq = Noneã€‚</p>
<p>è‡³æ­¤ï¼Œå°±èƒ½ç”Ÿæˆæ•°æ®åŠ¨ç”»äº†ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">pynimate</span> <span class="k">as</span> <span class="nn">nim</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s2">&#34;time&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;1960-01-01&#34;</span><span class="p">,</span> <span class="s2">&#34;1961-01-01&#34;</span><span class="p">,</span> <span class="s2">&#34;1962-01-01&#34;</span><span class="p">],</span>
        <span class="s2">&#34;Afghanistan&#34;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
        <span class="s2">&#34;Angola&#34;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
        <span class="s2">&#34;Albania&#34;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
        <span class="s2">&#34;USA&#34;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
        <span class="s2">&#34;Argentina&#34;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
    <span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&#34;time&#34;</span><span class="p">)</span>

<span class="n">cnv</span> <span class="o">=</span> <span class="n">nim</span><span class="o">.</span><span class="n">Canvas</span><span class="p">()</span>
<span class="n">bar</span> <span class="o">=</span> <span class="n">nim</span><span class="o">.</span><span class="n">Barplot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&#34;%Y-%m-</span><span class="si">%d</span><span class="s2">&#34;</span><span class="p">,</span> <span class="s2">&#34;2d&#34;</span><span class="p">)</span>
<span class="n">bar</span><span class="o">.</span><span class="n">set_time</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="k">lambda</span> <span class="n">i</span><span class="p">,</span> <span class="n">datafier</span><span class="p">:</span> <span class="n">datafier</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>
<span class="n">cnv</span><span class="o">.</span><span class="n">add_plot</span><span class="p">(</span><span class="n">bar</span><span class="p">)</span>
<span class="n">cnv</span><span class="o">.</span><span class="n">animate</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div><p>è¿™æ˜¯æ’å€¼ä¸ºä¸¤å¤©ï¼Œç”Ÿæˆçš„åŠ¨ç”»æ•ˆæœã€‚</p>
<p>æœ€åè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯ä¿å­˜åŠ¨ç”»ï¼Œæœ‰ä¸¤ä¸ªæ ¼å¼å¯ä»¥é€‰æ‹©ï¼šgifæˆ–è€…mp4ã€‚</p>
<p>ä¿å­˜ä¸ºåŠ¨å›¾ä¸€èˆ¬ä½¿ç”¨ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">cnv</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&#34;file&#34;</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="s2">&#34;gif&#34;</span><span class="p">)</span>
</code></pre></div><p>è‹¥è¦ä¿å­˜ä¸ºmp4çš„è¯ï¼Œffmpegæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œå®ƒæ˜¯ä¿å­˜ä¸ºmp4çš„æ ‡å‡†ç¼–å†™å™¨ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip install ffmpeg-python
conda install ffmpeg
</code></pre></div><p>å½“ç„¶ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥ä½¿ç”¨Canvas.save()æ¥ä¿å­˜ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">cnv</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&#34;file&#34;</span><span class="p">,</span> <span class="mi">24</span> <span class="p">,</span><span class="s2">&#34;mp4&#34;</span><span class="p">)</span>
</code></pre></div><br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>5ä¸ªä½ æˆ–è®¸ä¸çŸ¥é“çš„pandasæ•°æ®å¯¼å…¥æŠ€å·§</title>
      <link>https://hidadeng.github.io/blog/2023-01-08-pandas-5-trips-you-may-or-not-may-know/</link>
      <pubDate>Sun, 08 Jan 2023 00:00:00 +0000</pubDate>
      
      <guid>/blog/2023-01-08-pandas-5-trips-you-may-or-not-may-know/</guid>
      <description>è™½ç„¶æ‚¨å¯èƒ½ç†Ÿæ‚‰ä½¿ç”¨ pandas è¯»å–å’Œå†™å…¥æ•°æ®çš„è®¸å¤šä¸åŒæ–¹æ³•ï¼Œä½†æ‚¨å¯èƒ½æ²¡æœ‰æ„è¯†åˆ°ä¸€äº›å¯èƒ½å¹¶ä¸åƒæ‚¨æƒ³è±¡çš„é‚£ä¹ˆæ˜æ˜¾çš„å¿«æ·æ–¹å¼/æŠ€å·§ã€‚ è¿™å¯ä»¥ä½¿å¯¼å…¥æ•°æ®å˜å¾—æ›´åŠ å®¹æ˜“å’Œå¿«é€Ÿã€‚è¿™ç¯‡åšæ–‡ä»…æ¢è®¨äº†å…¶ä¸­çš„äº”ç§æŠ€æœ¯.</description>
      <content:encoded><![CDATA[<p>å¦‚æœæ‚¨ä»¥å‰æ›¾åœ¨ Python ä¸­ä½¿ç”¨è¿‡ Pandasï¼Œæ‚¨å°±ä¼šçŸ¥é“å¯ä»¥é€šè¿‡å¤šç§ä¸åŒçš„æ–¹å¼å¯¼å…¥è¡¨æ ¼æ•°æ®ã€‚</p>
<p>Pandas å¯èƒ½æ˜¯ä½¿ç”¨æœ€å¹¿æ³›çš„ç”¨äºåŠ è½½ã€æ“ä½œå’Œå¯¼å‡ºæ•°æ®çš„ Python åŒ…ä¹‹ä¸€ã€‚</p>
<p>è™½ç„¶æ‚¨å¯èƒ½ç†Ÿæ‚‰ä½¿ç”¨ pandas è¯»å–å’Œå†™å…¥æ•°æ®çš„è®¸å¤šä¸åŒæ–¹æ³•ï¼Œä½†æ‚¨å¯èƒ½æ²¡æœ‰æ„è¯†åˆ°ä¸€äº›å¯èƒ½å¹¶ä¸åƒæ‚¨æƒ³è±¡çš„é‚£ä¹ˆæ˜æ˜¾çš„å¿«æ·æ–¹å¼/æŠ€å·§ã€‚ è¿™å¯ä»¥ä½¿å¯¼å…¥æ•°æ®å˜å¾—æ›´åŠ å®¹æ˜“å’Œå¿«é€Ÿã€‚è¿™ç¯‡åšæ–‡ä»…æ¢è®¨äº†å…¶ä¸­çš„äº”ç§æŠ€æœ¯.</p>
<br>
<h2 id="1-ä»urlå¯¼å…¥csv">1. ä»urlå¯¼å…¥csv</h2>
<p>æ‚¨å¯èƒ½éå¸¸ç†Ÿæ‚‰ pd.read_csv() æ–¹æ³•å¯ä»¥å¯¼å…¥csvæ–‡ä»¶çš„ï¼Œ å…¶å®taè¿˜å¯ä»¥é€šè¿‡ HTTP ä» URL è¯»å–æ•°æ®ã€‚</p>
<p>ç½‘ç»œè®¿é—® CSV æ–‡ä»¶ï¼Œè€Œä¸æ˜¯åœ¨æœ¬åœ°å­˜å‚¨æ‰€æœ‰æ–‡ä»¶ï¼Œ å¯ä»¥çœå»æ‰‹åŠ¨ä¸‹è½½å†…å®¹çš„éº»çƒ¦ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;csvæ–‡ä»¶çš„ç½‘ç»œè¿æ¥&#39;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre></div><br>
<h2 id="2-å¯¼å…¥htmlç½‘é¡µä¸­çš„è¡¨æ ¼">2. å¯¼å…¥htmlç½‘é¡µä¸­çš„è¡¨æ ¼</h2>
<p>å¦‚æœæ‚¨æ›¾ç»é˜…è¯»è¿‡ pandas æ–‡æ¡£ï¼Œæ‚¨å¯èƒ½ä¼šé‡åˆ° pd.read_html() æ–¹æ³•ã€‚ ä¸ pd.read_csv() éå¸¸ç›¸ä¼¼ï¼Œå®ƒä¹Ÿå…·æœ‰ä» URL å¯¼å‡ºæ•°æ®çš„é™„åŠ åŠŸèƒ½ã€‚ è®©è¿™æ›´é…·çš„æ˜¯ï¼Œæ‚¨å¯ä»¥æä¾›ä¸€ä¸ªåŒ…å«è®¸å¤šè¡¨æ ¼çš„ç½‘ç«™çš„ URLï¼Œå®ƒä¼šæŠ“å–æ‰€æœ‰è¡¨æ ¼ã€‚</p>
<p>ä¾‹å¦‚ï¼Œè€ƒè™‘ç»´åŸºç™¾ç§‘æ–‡ç« â€œè‹±å›½ç»æµâ€ã€‚ è¿™ç¯‡æ–‡ç« å¯ä»¥è¢«æŠ“å–å¦‚ä¸‹ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://en.wikipedia.org/wiki/Economy_of_the_United_Kingdom&#39;</span>

<span class="n">df_tables</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre></div><br>
<h2 id="3-jsonè§„èŒƒåŒ–">3. JSONè§„èŒƒåŒ–</h2>
<p>æœ‰æ—¶ï¼Œå½“æ‚¨å¤„ç† JSON æ•°æ®æ—¶ï¼Œ JSON å†…å¾€å¾€åŒ…å«å¤šå±‚åµŒå¥—ã€‚ å¯¹äºè¦è½¬æ¢ä¸ºè¡¨æ ¼æ•°æ®çš„ JSON å¯¹è±¡ï¼Œå®ƒä»¬éœ€è¦è¢«å±•å¹³ï¼ˆåµŒå¥—æ·±åº¦ä¸º 1ï¼‰ã€‚</p>
<p>pandas æä¾›äº†ä¸€ç§ä½¿ç”¨ pd.json_normalize() æ–¹æ³•æ¥æ‰§è¡Œæ­¤æ“ä½œçš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ä»¥ä¸‹ JSON å¯¹è±¡ï¼ˆåœ¨ pandas æ–‡æ¡£ä¸­ç”¨ä½œç¤ºä¾‹ï¼‰</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&#34;id&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Cole Volk&#34;</span><span class="p">,</span>
        <span class="s2">&#34;fitness&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;height&#34;</span><span class="p">:</span> <span class="mi">130</span><span class="p">,</span> <span class="s2">&#34;weight&#34;</span><span class="p">:</span> <span class="mi">60</span><span class="p">},</span>
    <span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Mark Reg&#34;</span><span class="p">,</span> <span class="s2">&#34;fitness&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;height&#34;</span><span class="p">:</span> <span class="mi">130</span><span class="p">,</span> <span class="s2">&#34;weight&#34;</span><span class="p">:</span> <span class="mi">60</span><span class="p">}},</span>
    <span class="p">{</span>
        <span class="s2">&#34;id&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Faye Raker&#34;</span><span class="p">,</span>
        <span class="s2">&#34;fitness&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;height&#34;</span><span class="p">:</span> <span class="mi">130</span><span class="p">,</span> <span class="s2">&#34;weight&#34;</span><span class="p">:</span> <span class="mi">60</span><span class="p">},</span>
    <span class="p">},</span>
<span class="p">]</span>

<span class="n">data</span>
</code></pre></div><p>Run</p>
<pre><code>[{'id': 1, 'name': 'Cole Volk', 'fitness': {'height': 130, 'weight': 60}},
 {'name': 'Mark Reg', 'fitness': {'height': 130, 'weight': 60}},
 {'id': 2, 'name': 'Faye Raker', 'fitness': {'height': 130, 'weight': 60}}]
</code></pre>
<p>dataåŒ…å«å¤šå±‚åµŒå¥—å¯¹è±¡çš„å±æ€§ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸ºâ€œå¥èº«â€ï¼‰ã€‚ ä½¿ç”¨ pd.json_normalize() å¯ä»¥æŠ˜å æˆè¡¨æ ¼ã€‚</p>
<p>æ³¨æ„ï¼šå¯ä»¥æ·»åŠ å¯é€‰å‚æ•° max_level ä»¥æŒ‡å®šè¦æŠ˜å çš„æœ€å¤§åµŒå¥—çº§åˆ«æ•°ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒå°†æ ‡å‡†åŒ–æ‰€æœ‰çº§åˆ«ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">json_normalize</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">df</span>
</code></pre></div><p>Run</p>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>name</th>
      <th>fitness.height</th>
      <th>fitness.weight</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1.0</td>
      <td>Cole Volk</td>
      <td>130</td>
      <td>60</td>
    </tr>
    <tr>
      <th>1</th>
      <td>NaN</td>
      <td>Mark Reg</td>
      <td>130</td>
      <td>60</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2.0</td>
      <td>Faye Raker</td>
      <td>130</td>
      <td>60</td>
    </tr>
  </tbody>
</table>
</div>
<br>
<h2 id="4-ä»å‰ªè´´æ¿å¯¼å…¥">4. ä»å‰ªè´´æ¿å¯¼å…¥</h2>
<p>pd.read_clipboard() æ–¹æ³•å¯ç”¨äºæ•è·å­˜å‚¨åœ¨å‰ªè´´æ¿ä¸Šçš„ä»»ä½•æ•°æ®ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤æ–¹æ³•æ¥å—æ­£åˆ™è¡¨è¾¾å¼ \s+ ä½œä¸ºåˆ†éš”å€¼çš„åˆ†éš”ç¬¦ã€‚ æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è‡ªå·±çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_clipboard</span><span class="p">(</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">s+&#39;</span><span class="p">)</span>
</code></pre></div><br>
<h2 id="5-ä»excelå¯¼å…¥">5. ä»Excelå¯¼å…¥</h2>
<p>å‡è®¾æœ‰äººå‘æ‚¨å‘é€äº†ä¸€äº›å­˜å‚¨åœ¨ excel ç”µå­è¡¨æ ¼ä¸­çš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ pd.read_excel() æ–¹æ³•è¯»å–æ•°æ®ï¼Œå°±å¥½åƒå®ƒæ˜¯ä¸€ä¸ªç®€å•çš„ CSV æ–‡ä»¶ä¸€æ ·ã€‚</p>
<p>è¦è®°ä½çš„ä¸€ä»¶äº‹æ˜¯ï¼Œç”µå­è¡¨æ ¼è½¯ä»¶å…è®¸ç”¨æˆ·ä½¿ç”¨å•ä¸ªæ–‡ä»¶ä¸­çš„å·¥ä½œè¡¨æ¥åˆ†å‰²å¤šä¸ªç”µå­è¡¨æ ¼ã€‚ ä½¿ç”¨ sheet_name å‚æ•°å¯ä»¥å®ç°ä» <strong>ç‰¹å®šå·¥ä½œè¡¨</strong> è®¿é—®æ•°æ®ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;my_spreadsheet.xlsx&#39;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Sheet 1&#39;</span><span class="p">)</span>
</code></pre></div><br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">æ”¯æŒå¼€ç¥¨ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>å¯è§†åŒ– | ç»˜åˆ¶ã€Šä¸‰ä½“ã€‹äººç‰©å…³ç³»ç½‘ç»œå›¾</title>
      <link>https://hidadeng.github.io/blog/2022-11-29-santi-relationship-visualization-with-pyecharts/</link>
      <pubDate>Tue, 29 Nov 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-11-29-santi-relationship-visualization-with-pyecharts/</guid>
      <description>å¯è§†åŒ– | ç»˜åˆ¶ã€Šä¸‰ä½“ã€‹äººç‰©å…³ç³»ç½‘ç»œå›¾</description>
      <content:encoded><![CDATA[<p>ä»Šå¤©é€›Bç«™ï¼Œçœ‹åˆ°ã€Šä¸‰ä½“ã€‹ä¸‰éƒ¨æ›²å…¨éƒ¨äººç‰©å…³ç³»æ•°æ®å¯è§†åŒ–è§†é¢‘</p>
<iframe
    src="//player.bilibili.com/player.html?bvid=BV1z5411W7ED&page=1"
    scrolling="no"
    height="500px"
    width="800px"
    frameborder="no"
    framespacing="0"
    allowfullscreen="true"
>
</iframe>

<p>äºæ˜¯åŠ¨æ‰‹å†™äº†ä»Šå¤©çš„æŠ€æœ¯æ–‡ã€‚ç»˜åˆ¶äººç‰©ç½‘ç»œå…³ç³»å›¾ï¼Œéœ€è¦æœ‰</p>
<ul>
<li>èŠ‚ç‚¹æ•°æ®ï¼› èŠ‚ç‚¹åã€èŠ‚ç‚¹å±æ€§</li>
<li>è¾¹æ•°æ®ï¼› sourceã€targetã€weight</li>
<li>å¯è§†åŒ–å·¥å…·(Gephiè½¯ä»¶æˆ–Pythonçš„å¯è§†åŒ–åŒ…)</li>
</ul>
<br>
<h2 id="æœ¬æ–‡ä»£ç ">æœ¬æ–‡ä»£ç </h2>
<p><a href="%E4%B8%89%E4%BD%93%E5%B0%8F%E8%AF%B4-%E4%BA%BA%E7%89%A9%E5%85%B3%E7%B3%BB%E7%BD%91%E7%BB%9C%E5%9B%BE%E5%8F%AF%E8%A7%86%E5%8C%96.zip">ç‚¹å‡»ä¸‹è½½</a></p>
<p><br><br></p>
<h2 id="èŠ‚ç‚¹-äººç‰©æ•°æ®">èŠ‚ç‚¹-äººç‰©æ•°æ®</h2>
<p>ç»˜åˆ¶äººç‰©å…³ç³»ç½‘ç»œå›¾ï¼Œé¦–å…ˆéœ€è¦æœ‰ç½‘ç»œèŠ‚ç‚¹æ•°æ®</p>
<ul>
<li>name äººç‰©åç§°</li>
<li>desc äººç‰©ç®€ä»‹</li>
<li>stage äººç‰©å‡ºç°åœ¨ä¸‰ä½“å°è¯´çš„å“ªä¸ªé˜¶æ®µ</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">nodes_info_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;data/ä¸‰ä½“äººç‰©.xlsx&#39;</span><span class="p">)</span>
<span class="n">nodes_info_df</span>
</code></pre></div><p>Run</p>
<p><img loading="lazy" src="img/df1.png" alt=""  />
</p>
<p><br><br></p>
<h2 id="è¾¹-äººç‰©å…³ç³»æ•°æ®">è¾¹-äººç‰©å…³ç³»æ•°æ®</h2>
<p>å°†èŠ‚ç‚¹æ•°æ®ä¾æ¬¡åœ¨ä¸‰ä½“å°è¯´æ–‡æœ¬ä¸­æŒ‰è¡Œè¿›è¡Œæ£€ç´¢ï¼Œå¦‚æœæ¯è¡ŒåŒæ—¶å‡ºç°ä¸¤ä¸ªäººç‰©ï¼Œä¸¤ä¸ªäººç‰©ä¼šæ„å»ºä¸€ä¸ªè¾¹ã€‚äººç‰©å…³ç³»ç½‘ç»œå›¾å¯ä»¥ç”¨gephiè½¯ä»¶è¿›è¡Œç»˜åˆ¶ï¼Œ ç»˜åˆ¶éœ€è¦ä¸¤ä¸ªcsvæ–‡ä»¶ï¼Œå³</p>
<ul>
<li>ä¸‰ä½“_nodes.csv</li>
<li>ä¸‰ä½“_edges.csv</li>
</ul>
<p>å®ç°ä»£ç å¦‚ä¸‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">jieba</span>
<span class="kn">import</span> <span class="nn">codecs</span>
<span class="kn">import</span> <span class="nn">csv</span>

<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">():</span>
    <span class="n">jieba</span><span class="o">.</span><span class="n">add_word</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

<span class="n">nodes</span> <span class="o">=</span> <span class="p">{}</span>			<span class="c1"># å§“åå­—å…¸ï¼Œä¿å­˜äººç‰©ï¼Œè¯¥å­—å…¸çš„é”®ä¸ºäººç‰©åç§°ï¼Œå€¼ä¸ºè¯¥äººç‰©åœ¨å…¨æ–‡ä¸­å‡ºç°çš„æ¬¡æ•°</span>
<span class="n">relationships</span> <span class="o">=</span> <span class="p">{}</span>	<span class="c1"># å…³ç³»å­—å…¸ï¼Œä¿å­˜äººç‰©å…³ç³»çš„æœ‰å‘è¾¹ï¼Œè¯¥å­—å…¸çš„é”®ä¸ºæœ‰å‘è¾¹çš„èµ·ç‚¹ï¼Œå€¼ä¸ºä¸€ä¸ªå­—å…¸edgeï¼Œedgeçš„é”®æ˜¯æœ‰å‘è¾¹çš„ç»ˆç‚¹ï¼Œå€¼æ˜¯æœ‰å‘è¾¹çš„æƒå€¼ï¼Œä»£è¡¨ä¸¤ä¸ªäººç‰©ä¹‹é—´è”ç³»çš„ç´§å¯†ç¨‹åº¦</span>
<span class="n">lineNodes</span> <span class="o">=</span> <span class="p">[]</span>		<span class="c1"># æ¯æ®µå†…äººç‰©å…³ç³»ï¼Œæ˜¯ä¸€ä¸ªç¼“å­˜å˜é‡ï¼Œä¿å­˜å¯¹æ¯ä¸€æ®µåˆ†è¯å¾—åˆ°å½“å‰æ®µä¸­å‡ºç°çš„äººç‰©åç§°ï¼ŒlineName[i]æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨ä¸­å­˜å‚¨ç¬¬iæ®µä¸­å‡ºç°è¿‡çš„äººç‰©</span>


<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;data/ä¸‰ä½“.txt&#34;</span><span class="p">,</span> <span class="s2">&#34;r&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
	<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
		<span class="n">words</span> <span class="o">=</span> <span class="n">jieba</span><span class="o">.</span><span class="n">lcut</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>		<span class="c1"># åˆ†è¯å¹¶è¿”å›è¯¥è¯è¯æ€§</span>
		<span class="n">lineNodes</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>		<span class="c1"># ä¸ºæ–°è¯»å…¥çš„ä¸€æ®µæ·»åŠ äººç‰©åç§°åˆ—è¡¨</span>
		<span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">():</span>
				<span class="n">lineNodes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>		<span class="c1"># ä¸ºå½“å‰æ®µçš„ç¯å¢ƒå¢åŠ ä¸€ä¸ªäººç‰©</span>
				<span class="k">if</span> <span class="n">nodes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
					<span class="n">nodes</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
				<span class="n">relationships</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
				<span class="n">nodes</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>					<span class="c1"># è¯¥äººç‰©å‡ºç°æ¬¡æ•°åŠ  1</span>
                

<span class="c1"># explore relationships   å¯¹äº lineNames ä¸­æ¯ä¸€è¡Œï¼Œæˆ‘ä»¬ä¸ºè¯¥è¡Œä¸­å‡ºç°çš„æ‰€æœ‰äººç‰©ä¸¤ä¸¤ç›¸è¿ã€‚å¦‚æœä¸¤ä¸ªäººç‰©ä¹‹é—´å°šæœªæœ‰è¾¹å»ºç«‹ï¼Œåˆ™å°†æ–°å»ºçš„è¾¹æƒå€¼è®¾ä¸º 1ï¼Œå¦åˆ™å°†å·²å­˜åœ¨çš„è¾¹çš„æƒå€¼åŠ  1ã€‚è¿™ç§æ–¹æ³•å°†äº§ç”Ÿå¾ˆå¤šçš„å†—ä½™è¾¹ï¼Œè¿™äº›å†—ä½™è¾¹å°†åœ¨æœ€åå¤„ç†ã€‚</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lineNodes</span><span class="p">:</span>					<span class="c1"># å¯¹äºæ¯ä¸€æ®µ</span>
	<span class="k">for</span> <span class="n">node1</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>					
		<span class="k">for</span> <span class="n">node2</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>				<span class="c1"># æ¯æ®µä¸­çš„ä»»æ„ä¸¤ä¸ªäºº</span>
			<span class="k">if</span> <span class="n">node1</span> <span class="o">==</span> <span class="n">node2</span><span class="p">:</span>
				<span class="k">continue</span>
			<span class="k">if</span> <span class="n">relationships</span><span class="p">[</span><span class="n">node1</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">node2</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>		<span class="c1"># è‹¥ä¸¤äººå°šæœªåŒæ—¶å‡ºç°åˆ™æ–°å»ºé¡¹</span>
				<span class="n">relationships</span><span class="p">[</span><span class="n">node1</span><span class="p">][</span><span class="n">node2</span><span class="p">]</span><span class="o">=</span> <span class="mi">1</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">relationships</span><span class="p">[</span><span class="n">node1</span><span class="p">][</span><span class="n">node2</span><span class="p">]</span> <span class="o">=</span> <span class="n">relationships</span><span class="p">[</span><span class="n">node1</span><span class="p">][</span><span class="n">node2</span><span class="p">]</span><span class="o">+</span> <span class="mi">1</span>		<span class="c1"># ä¸¤äººå…±åŒå‡ºç°æ¬¡æ•°åŠ  1</span>


<span class="c1"># output   å°†å·²ç»å»ºå¥½çš„ names å’Œ relationships è¾“å‡ºåˆ°æ–‡æœ¬ï¼Œä»¥æ–¹ä¾¿ gephi å¯è§†åŒ–å¤„ç†ã€‚è¾“å‡ºè¾¹çš„è¿‡ç¨‹ä¸­å¯ä»¥è¿‡æ»¤å¯èƒ½æ˜¯å†—ä½™çš„è¾¹ï¼Œè¿™é‡Œå‡è®¾å…±åŒå‡ºç°æ¬¡æ•°å°‘äº 3 æ¬¡çš„æ˜¯å†—ä½™è¾¹ï¼Œåˆ™åœ¨è¾“å‡ºæ—¶è·³è¿‡è¿™æ ·çš„è¾¹ã€‚è¾“å‡ºçš„èŠ‚ç‚¹é›†åˆä¿å­˜ä¸º busan_node.txt ï¼Œè¾¹é›†åˆä¿å­˜ä¸º busan_edge.node ã€‚</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;output/ä¸‰ä½“_nodes.csv&#34;</span><span class="p">,</span> <span class="s2">&#34;w&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvf1</span><span class="p">:</span>
	<span class="n">writer1</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">csvf1</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="s1">&#39;weight&#39;</span><span class="p">])</span>
	<span class="n">writer1</span><span class="o">.</span><span class="n">writeheader</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">node</span><span class="p">,</span> <span class="n">times</span> <span class="ow">in</span> <span class="n">nodes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
		<span class="n">line</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">node</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">node</span><span class="p">,</span> <span class="s1">&#39;weight&#39;</span><span class="p">:</span> <span class="n">times</span><span class="p">}</span>
		<span class="n">writer1</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>



<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;output/ä¸‰ä½“_edges.csv&#34;</span><span class="p">,</span> <span class="s2">&#34;w&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvf2</span><span class="p">:</span>
	<span class="n">writer2</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">csvf2</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="s1">&#39;target&#39;</span><span class="p">,</span> <span class="s1">&#39;weight&#39;</span><span class="p">])</span>
	<span class="n">writer2</span><span class="o">.</span><span class="n">writeheader</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">node</span><span class="p">,</span> <span class="n">edges</span> <span class="ow">in</span> <span class="n">relationships</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
		<span class="k">for</span> <span class="n">target</span><span class="p">,</span> <span class="n">weight</span> <span class="ow">in</span> <span class="n">edges</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="k">if</span> <span class="n">weight</span><span class="o">&gt;</span><span class="mi">3</span><span class="p">:</span>
				<span class="n">line</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;source&#39;</span><span class="p">:</span> <span class="n">node</span><span class="p">,</span> <span class="s1">&#39;target&#39;</span><span class="p">:</span><span class="n">target</span><span class="p">,</span> <span class="s1">&#39;weight&#39;</span><span class="p">:</span><span class="n">w</span><span class="p">}</span>
				<span class="n">writer2</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</code></pre></div><br>
<p>æŸ¥çœ‹ ä¸‰ä½“_nodes.csv æ–‡ä»¶æ ·å¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">nodes_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;output/ä¸‰ä½“_nodes.csv&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
<span class="n">nodes_df</span>
</code></pre></div><p>Run</p>
<p><img loading="lazy" src="img/df2.png" alt=""  />
</p>
<br>
<p>æŸ¥çœ‹ ä¸‰ä½“_edges.csv æ–‡ä»¶æ ·å¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">edges_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;output/ä¸‰ä½“_edges.csv&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
<span class="n">edges_df</span>
</code></pre></div><p>Run</p>
<p><img loading="lazy" src="img/df3.png" alt=""  />
</p>
<p><br><br></p>
<h2 id="ç»˜åˆ¶å…³ç³»å›¾">ç»˜åˆ¶å…³ç³»å›¾</h2>
<p>æœ¬æ–‡ä¸è®²è§£gephiï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å»Bç«™æœgephiä½¿ç”¨æ–¹æ³•ã€‚ å®ç°å¯è§†åŒ–ï¼Œé™¤äº†gephiï¼Œ ä¹Ÿå¯ä»¥ä½¿ç”¨pyechartåº“å®ç°ä¸é”™çš„å¯è§†åŒ–æ•ˆæœã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">pyecharts</span> <span class="kn">import</span> <span class="n">options</span> <span class="k">as</span> <span class="n">opts</span>
<span class="kn">from</span> <span class="nn">pyecharts.charts</span> <span class="kn">import</span> <span class="n">Graph</span>
<span class="kn">from</span> <span class="nn">pyecharts.globals</span> <span class="kn">import</span> <span class="n">CurrentConfig</span><span class="p">,</span> <span class="n">NotebookType</span>
<span class="n">CurrentConfig</span><span class="o">.</span><span class="n">NOTEBOOK_TYPE</span> <span class="o">=</span> <span class="n">NotebookType</span><span class="o">.</span><span class="n">JUPYTER_NOTEBOOK</span>


<span class="n">nodes_data</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">edges_data</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">categories_data</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">node</span><span class="p">,</span> <span class="n">weight</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">nodes_df</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="n">nodes_df</span><span class="o">.</span><span class="n">weight</span><span class="p">):</span>
    <span class="n">category</span> <span class="o">=</span> <span class="n">nodes_info_df</span><span class="p">[</span><span class="n">nodes_info_df</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">node</span><span class="p">][</span><span class="s1">&#39;stage&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1">##ä½¿ç”¨weightä½œä¸ºåœ†ç‚¹çš„å€¼ï¼Œé™¤ä»¥10ï¼Œé˜²æ­¢åœ†ç‚¹å¤ªå¤§å æ»¡æ•´ä¸ªå±å¹•.</span>
    <span class="n">node_info</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">node</span><span class="p">),</span> <span class="s2">&#34;symbolSize&#34;</span><span class="p">:</span> <span class="n">weight</span><span class="o">/</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span><span class="p">:</span> <span class="n">category</span><span class="p">,</span> <span class="s2">&#34;value&#34;</span><span class="p">:</span> <span class="n">weight</span><span class="o">/</span><span class="mi">10</span><span class="p">}</span>
    <span class="n">nodes_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node_info</span><span class="p">)</span>

<span class="k">for</span> <span class="n">ix</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">edges_df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">edges_df</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">edges_df</span><span class="o">.</span><span class="n">target</span><span class="p">):</span>
    <span class="n">edges_data</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&#34;id&#34;</span><span class="p">:</span> <span class="n">ix</span><span class="p">,</span> <span class="s2">&#34;source&#34;</span><span class="p">:</span> <span class="n">source</span><span class="p">,</span> <span class="s2">&#34;target&#34;</span><span class="p">:</span> <span class="n">target</span><span class="p">})</span>

<span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;stage&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()):</span> 
    <span class="n">categories_data</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">category</span><span class="p">})</span>


<span class="n">c</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">Graph</span><span class="p">(</span><span class="n">init_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">InitOpts</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&#34;1000px&#34;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s2">&#34;600px&#34;</span><span class="p">))</span>
    <span class="o">.</span><span class="n">add</span><span class="p">(</span>
        <span class="s2">&#34;&#34;</span><span class="p">,</span>
        <span class="n">nodes</span><span class="o">=</span><span class="n">nodes_data</span><span class="p">,</span>
        <span class="n">links</span><span class="o">=</span><span class="n">edges_data</span><span class="p">,</span>
        <span class="n">categories</span><span class="o">=</span><span class="n">categories_data</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="s2">&#34;circular&#34;</span><span class="p">,</span>
        <span class="n">is_rotate_label</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">linestyle_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">LineStyleOpts</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&#34;source&#34;</span><span class="p">,</span> <span class="n">curve</span><span class="o">=</span><span class="mf">0.3</span><span class="p">),</span>
        <span class="n">label_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">LabelOpts</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s2">&#34;right&#34;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">set_global_opts</span><span class="p">(</span>
        <span class="n">title_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">TitleOpts</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&#34;ä¸‰ä½“äººç‰©å…³ç³»å›¾&#34;</span><span class="p">),</span>
        <span class="n">legend_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">LegendOpts</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&#34;vertical&#34;</span><span class="p">,</span> <span class="n">pos_left</span><span class="o">=</span><span class="s2">&#34;2%&#34;</span><span class="p">,</span> <span class="n">pos_top</span><span class="o">=</span><span class="s2">&#34;20%&#34;</span><span class="p">),</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">c</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s1">&#39;output/ä¸‰ä½“_graph.html&#39;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">render_notebook</span><span class="p">()</span>
</code></pre></div><p>Run</p>


<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Awesome-pyecharts</title>
            <script type="text/javascript" src="https://assets.pyecharts.org/assets/echarts.min.js"></script>

</head>
<body>
    <div id="e97ab300531a4c0ca1574681e578906a" class="chart-container" style="width:1000px; height:600px;"></div>
    <script>
        var chart_e97ab300531a4c0ca1574681e578906a = echarts.init(
            document.getElementById('e97ab300531a4c0ca1574681e578906a'), 'white', {renderer: 'canvas'});
        var option_e97ab300531a4c0ca1574681e578906a = {
    "animation": true,
    "animationThreshold": 2000,
    "animationDuration": 1000,
    "animationEasing": "cubicOut",
    "animationDelay": 0,
    "animationDurationUpdate": 300,
    "animationEasingUpdate": "cubicOut",
    "animationDelayUpdate": 0,
    "color": [
        "#c23531",
        "#2f4554",
        "#61a0a8",
        "#d48265",
        "#749f83",
        "#ca8622",
        "#bda29a",
        "#6e7074",
        "#546570",
        "#c4ccd3",
        "#f05b72",
        "#ef5b9c",
        "#f47920",
        "#905a3d",
        "#fab27b",
        "#2a5caa",
        "#444693",
        "#726930",
        "#b2d235",
        "#6d8346",
        "#ac6767",
        "#1d953f",
        "#6950a1",
        "#918597"
    ],
    "series": [
        {
            "type": "graph",
            "layout": "circular",
            "symbolSize": 10,
            "circular": {
                "rotateLabel": true
            },
            "force": {
                "repulsion": 50,
                "edgeLength": 50,
                "gravity": 0.2
            },
            "label": {
                "show": true,
                "position": "right",
                "margin": 8
            },
            "lineStyle": {
                "show": true,
                "width": 1,
                "opacity": 1,
                "curveness": 0.3,
                "type": "solid",
                "color": "source"
            },
            "roam": true,
            "draggable": false,
            "focusNodeAdjacency": true,
            "data": [
                {
                    "name": "\u6c6a\u6dfc",
                    "symbolSize": 64.1,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 64.1
                },
                {
                    "name": "\u53f2\u5f3a",
                    "symbolSize": 24.7,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 24.7
                },
                {
                    "name": "\u5e38\u4f1f\u601d",
                    "symbolSize": 9.4,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 9.4
                },
                {
                    "name": "\u6768\u51ac",
                    "symbolSize": 6.5,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 6.5
                },
                {
                    "name": "\u4e01\u4eea",
                    "symbolSize": 17.2,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 17.2
                },
                {
                    "name": "\u7533\u7389\u83f2",
                    "symbolSize": 4.9,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 4.9
                },
                {
                    "name": "\u8c46\u8c46",
                    "symbolSize": 0.3,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 0.3
                },
                {
                    "name": "\u9b4f\u6210",
                    "symbolSize": 3.0,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 3.0
                },
                {
                    "name": "\u6f58\u5bd2",
                    "symbolSize": 4.7,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 4.7
                },
                {
                    "name": "\u674e\u7476",
                    "symbolSize": 0.2,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 0.2
                },
                {
                    "name": "\u53f6\u6587\u6d01",
                    "symbolSize": 47.2,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 47.2
                },
                {
                    "name": "\u6960\u6960",
                    "symbolSize": 0.3,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 0.3
                },
                {
                    "name": "\u6d0b\u6d0b",
                    "symbolSize": 0.1,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 0.1
                },
                {
                    "name": "\u54aa\u54aa",
                    "symbolSize": 0.1,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 0.1
                },
                {
                    "name": "\u6c99\u745e\u5c71",
                    "symbolSize": 2.5,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 2.5
                },
                {
                    "name": "\u53f6\u54f2\u6cf0",
                    "symbolSize": 3.0,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 3.0
                },
                {
                    "name": "\u767d\u6c90\u9716",
                    "symbolSize": 2.9,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 2.9
                },
                {
                    "name": "\u9a6c\u94a2",
                    "symbolSize": 0.5,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 0.5
                },
                {
                    "name": "\u7a0b\u4e3d\u534e",
                    "symbolSize": 0.9,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 0.9
                },
                {
                    "name": "\u53f6\u6587\u96ea",
                    "symbolSize": 0.4,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 0.4
                },
                {
                    "name": "\u96f7\u5fd7\u6210",
                    "symbolSize": 3.5,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 3.5
                },
                {
                    "name": "\u6768\u536b\u5b81",
                    "symbolSize": 7.8,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 7.8
                },
                {
                    "name": "\u5a01\u5c14\u900a",
                    "symbolSize": 0.4,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 0.4
                },
                {
                    "name": "\u58a8\u5b50",
                    "symbolSize": 3.1,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 3.1
                },
                {
                    "name": "\u5f90\u51b0\u51b0",
                    "symbolSize": 0.7,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 0.7
                },
                {
                    "name": "\u4f0a\u6587\u65af",
                    "symbolSize": 8.8,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 8.8
                },
                {
                    "name": "\u62c9\u83f2\u5c14",
                    "symbolSize": 0.1,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 0.1
                },
                {
                    "name": "\u6838\u5f39\u5973\u5b69",
                    "symbolSize": 0.3,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 0.3
                },
                {
                    "name": "\u9f50\u730e\u5934",
                    "symbolSize": 0.5,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 0.5
                },
                {
                    "name": "\u5927\u51e4",
                    "symbolSize": 1.1,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 1.1
                },
                {
                    "name": "\u9ea6\u514b",
                    "symbolSize": 0.8,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 0.8
                },
                {
                    "name": "\u65af\u5766\u987f",
                    "symbolSize": 2.3,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 2.3
                },
                {
                    "name": "1379\u53f7\u76d1\u542c\u5458",
                    "symbolSize": 0.5,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 0.5
                },
                {
                    "name": "\u5143\u9996",
                    "symbolSize": 7.9,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 7.9
                },
                {
                    "name": "\u667a\u5b50",
                    "symbolSize": 46.4,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 46.4
                },
                {
                    "name": "\u6797\u4e91",
                    "symbolSize": 0.1,
                    "category": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                    "value": 0.1
                },
                {
                    "name": "\u7f57\u8f91",
                    "symbolSize": 129.4,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 129.4
                },
                {
                    "name": "\u5434\u5cb3",
                    "symbolSize": 6.1,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 6.1
                },
                {
                    "name": "\u7ae0\u5317\u6d77",
                    "symbolSize": 31.6,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 31.6
                },
                {
                    "name": "\u96f7\u5fb7\u5c14",
                    "symbolSize": 1.0,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 1.0
                },
                {
                    "name": "\u743c\u65af",
                    "symbolSize": 0.9,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 0.9
                },
                {
                    "name": "\u6590\u5179\u7f57\u5c06\u519b",
                    "symbolSize": 0.7,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 0.7
                },
                {
                    "name": "\u5f20\u63f4\u671d",
                    "symbolSize": 4.3,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 4.3
                },
                {
                    "name": "\u6768\u664b\u6587",
                    "symbolSize": 3.4,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 3.4
                },
                {
                    "name": "\u82d7\u798f\u5168",
                    "symbolSize": 2.0,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 2.0
                },
                {
                    "name": "\u53f2\u6653\u660e",
                    "symbolSize": 3.5,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 3.5
                },
                {
                    "name": "\u4f3d\u5c14\u8bfa\u592b",
                    "symbolSize": 0.1,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 0.1
                },
                {
                    "name": "\u767d\u84c9",
                    "symbolSize": 2.4,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 2.4
                },
                {
                    "name": "\u574e\u7279",
                    "symbolSize": 7.6,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 7.6
                },
                {
                    "name": "\u8428\u4f0a",
                    "symbolSize": 5.3,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 5.3
                },
                {
                    "name": "\u5c71\u6749\u60e0\u5b50",
                    "symbolSize": 6.4,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 6.4
                },
                {
                    "name": "\u6797\u683c",
                    "symbolSize": 4.8,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 4.8
                },
                {
                    "name": "\u4f3d\u5c14\u5b81",
                    "symbolSize": 3.5,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 3.5
                },
                {
                    "name": "\u827e\u4f26",
                    "symbolSize": 2.1,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 2.1
                },
                {
                    "name": "\u4e95\u4e0a\u5b8f\u4e00",
                    "symbolSize": 0.6,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 0.6
                },
                {
                    "name": "\u5e84\u989c",
                    "symbolSize": 12.5,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 12.5
                },
                {
                    "name": "\u54c8\u91cc\u65af",
                    "symbolSize": 0.3,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 0.3
                },
                {
                    "name": "\u5f20\u7fd4",
                    "symbolSize": 1.1,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 1.1
                },
                {
                    "name": "\u5f20\u5ef6",
                    "symbolSize": 0.5,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 0.5
                },
                {
                    "name": "\u6653\u8679",
                    "symbolSize": 0.1,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 0.1
                },
                {
                    "name": "\u51ef\u745f\u7433",
                    "symbolSize": 0.1,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 0.1
                },
                {
                    "name": "\u718a\u6587",
                    "symbolSize": 1.5,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 1.5
                },
                {
                    "name": "\u90ed\u6b63\u660e",
                    "symbolSize": 0.3,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 0.3
                },
                {
                    "name": "\u4e1c\u65b9\u5ef6\u7eea",
                    "symbolSize": 8.4,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 8.4
                },
                {
                    "name": "\u80af\u535a\u58eb",
                    "symbolSize": 0.4,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 0.4
                },
                {
                    "name": "\u7f57\u5bbe\u900a\u5c06\u519b",
                    "symbolSize": 0.3,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 0.3
                },
                {
                    "name": "\u5217\u6587",
                    "symbolSize": 0.8,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 0.8
                },
                {
                    "name": "\u4e95\u4e0a\u660e",
                    "symbolSize": 1.1,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 1.1
                },
                {
                    "name": "\u897f\u5b50",
                    "symbolSize": 2.9,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 2.9
                },
                {
                    "name": "\u8d75\u946b",
                    "symbolSize": 2.1,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 2.1
                },
                {
                    "name": "\u674e\u7ef4",
                    "symbolSize": 2.0,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 2.0
                },
                {
                    "name": "\u84dd\u897f",
                    "symbolSize": 3.0,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 3.0
                },
                {
                    "name": "\u65af\u79d1\u7279",
                    "symbolSize": 2.3,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 2.3
                },
                {
                    "name": "\u6cd5\u624e\u5170",
                    "symbolSize": 3.1,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 3.1
                },
                {
                    "name": "\u72c4\u5965\u4f26\u5a1c",
                    "symbolSize": 5.2,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 5.2
                },
                {
                    "name": "\u4e91\u5929\u660e",
                    "symbolSize": 31.6,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 31.6
                },
                {
                    "name": "\u5f20\u533b\u751f",
                    "symbolSize": 1.6,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 1.6
                },
                {
                    "name": "\u8001\u674e",
                    "symbolSize": 2.4,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 2.4
                },
                {
                    "name": "\u80e1\u6587",
                    "symbolSize": 2.3,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 2.3
                },
                {
                    "name": "\u7a0b\u5fc3",
                    "symbolSize": 151.7,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 151.7
                },
                {
                    "name": "\u4f55\u535a\u58eb",
                    "symbolSize": 2.1,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 2.1
                },
                {
                    "name": "\u4e8e\u7ef4\u6c11",
                    "symbolSize": 0.4,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 0.4
                },
                {
                    "name": "\u67ef\u66fc\u7433",
                    "symbolSize": 1.0,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 1.0
                },
                {
                    "name": "\u4e54\u4f9d\u5a1c",
                    "symbolSize": 0.3,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 0.3
                },
                {
                    "name": "\u516c\u5143\u4eba",
                    "symbolSize": 1.6,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 1.6
                },
                {
                    "name": "\u6bd5\u4e91\u5cf0",
                    "symbolSize": 2.4,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 2.4
                },
                {
                    "name": "\u66f9\u5f6c",
                    "symbolSize": 8.8,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 8.8
                },
                {
                    "name": "\u4f0a\u4e07",
                    "symbolSize": 0.5,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 0.5
                },
                {
                    "name": "\u5b89\u4e1c\u8bfa\u592b",
                    "symbolSize": 0.4,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 0.4
                },
                {
                    "name": "\u97e6\u65af\u7279",
                    "symbolSize": 2.8,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 2.8
                },
                {
                    "name": "\u6234\u6587",
                    "symbolSize": 1.1,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 1.1
                },
                {
                    "name": "\u6734\u4e49\u541b",
                    "symbolSize": 0.7,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 0.7
                },
                {
                    "name": "\u827e\u514b",
                    "symbolSize": 2.5,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 2.5
                },
                {
                    "name": "\u8587\u62c9",
                    "symbolSize": 1.9,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 1.9
                },
                {
                    "name": "\u5218\u6653\u660e",
                    "symbolSize": 0.2,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 0.2
                },
                {
                    "name": "\u5173\u4e00\u5e06",
                    "symbolSize": 26.2,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 26.2
                },
                {
                    "name": "\u5f17\u96f7\u65af",
                    "symbolSize": 3.8,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 3.8
                },
                {
                    "name": "\u79cb\u539f\u73b2\u5b50",
                    "symbolSize": 0.2,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 0.2
                },
                {
                    "name": "\u891a\u5ca9",
                    "symbolSize": 0.5,
                    "category": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                    "value": 0.5
                },
                {
                    "name": "\u5353\u6587",
                    "symbolSize": 1.0,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 1.0
                },
                {
                    "name": "\u6df1\u6c34\u738b\u5b50",
                    "symbolSize": 3.4,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 3.4
                },
                {
                    "name": "\u9732\u73e0\u516c\u4e3b",
                    "symbolSize": 3.1,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 3.1
                },
                {
                    "name": "\u7a7a\u7075\u753b\u5e08",
                    "symbolSize": 2.4,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 2.4
                },
                {
                    "name": "\u9488\u773c\u753b\u5e08",
                    "symbolSize": 3.1,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 3.1
                },
                {
                    "name": "\u957f\u5e06",
                    "symbolSize": 2.3,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 2.3
                },
                {
                    "name": "\u5df4\u52d2\u83ab",
                    "symbolSize": 0.8,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 0.8
                },
                {
                    "name": "\u6770\u68ee",
                    "symbolSize": 2.4,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 2.4
                },
                {
                    "name": "\u5a01\u7eb3\u5c14",
                    "symbolSize": 1.3,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 1.3
                },
                {
                    "name": "\u9ad8way",
                    "symbolSize": 2.1,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 2.1
                },
                {
                    "name": "\u5e03\u83b1\u5c14",
                    "symbolSize": 0.2,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 0.2
                },
                {
                    "name": "\u6b4c\u8005",
                    "symbolSize": 4.9,
                    "category": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f",
                    "value": 4.9
                }
            ],
            "categories": [
                {
                    "name": "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b"
                },
                {
                    "name": "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797"
                },
                {
                    "name": "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f"
                }
            ],
            "edgeLabel": {
                "show": false,
                "position": "top",
                "margin": 8
            },
            "edgeSymbol": [
                null,
                null
            ],
            "edgeSymbolSize": 10,
            "links": [
                {
                    "id": 0,
                    "source": "\u6c6a\u6dfc",
                    "target": "\u53f2\u5f3a"
                },
                {
                    "id": 1,
                    "source": "\u6c6a\u6dfc",
                    "target": "\u5e38\u4f1f\u601d"
                },
                {
                    "id": 2,
                    "source": "\u6c6a\u6dfc",
                    "target": "\u6768\u51ac"
                },
                {
                    "id": 3,
                    "source": "\u6c6a\u6dfc",
                    "target": "\u4e01\u4eea"
                },
                {
                    "id": 4,
                    "source": "\u6c6a\u6dfc",
                    "target": "\u7533\u7389\u83f2"
                },
                {
                    "id": 5,
                    "source": "\u6c6a\u6dfc",
                    "target": "\u9b4f\u6210"
                },
                {
                    "id": 6,
                    "source": "\u6c6a\u6dfc",
                    "target": "\u6f58\u5bd2"
                },
                {
                    "id": 7,
                    "source": "\u6c6a\u6dfc",
                    "target": "\u53f6\u6587\u6d01"
                },
                {
                    "id": 8,
                    "source": "\u6c6a\u6dfc",
                    "target": "\u6c99\u745e\u5c71"
                },
                {
                    "id": 9,
                    "source": "\u6c6a\u6dfc",
                    "target": "\u58a8\u5b50"
                },
                {
                    "id": 10,
                    "source": "\u6c6a\u6dfc",
                    "target": "\u6768\u536b\u5b81"
                },
                {
                    "id": 11,
                    "source": "\u6c6a\u6dfc",
                    "target": "\u5f90\u51b0\u51b0"
                },
                {
                    "id": 12,
                    "source": "\u6c6a\u6dfc",
                    "target": "\u65af\u5766\u987f"
                },
                {
                    "id": 13,
                    "source": "\u53f2\u5f3a",
                    "target": "\u6c6a\u6dfc"
                },
                {
                    "id": 14,
                    "source": "\u53f2\u5f3a",
                    "target": "\u5e38\u4f1f\u601d"
                },
                {
                    "id": 15,
                    "source": "\u53f2\u5f3a",
                    "target": "\u65af\u5766\u987f"
                },
                {
                    "id": 16,
                    "source": "\u53f2\u5f3a",
                    "target": "\u7f57\u8f91"
                },
                {
                    "id": 17,
                    "source": "\u53f2\u5f3a",
                    "target": "\u574e\u7279"
                },
                {
                    "id": 18,
                    "source": "\u53f2\u5f3a",
                    "target": "\u53f2\u6653\u660e"
                },
                {
                    "id": 19,
                    "source": "\u5e38\u4f1f\u601d",
                    "target": "\u53f2\u5f3a"
                },
                {
                    "id": 20,
                    "source": "\u5e38\u4f1f\u601d",
                    "target": "\u6c6a\u6dfc"
                },
                {
                    "id": 21,
                    "source": "\u5e38\u4f1f\u601d",
                    "target": "\u7ae0\u5317\u6d77"
                },
                {
                    "id": 22,
                    "source": "\u6768\u51ac",
                    "target": "\u6c6a\u6dfc"
                },
                {
                    "id": 23,
                    "source": "\u6768\u51ac",
                    "target": "\u4e01\u4eea"
                },
                {
                    "id": 24,
                    "source": "\u6768\u51ac",
                    "target": "\u53f6\u6587\u6d01"
                },
                {
                    "id": 25,
                    "source": "\u6768\u51ac",
                    "target": "\u9f50\u730e\u5934"
                },
                {
                    "id": 26,
                    "source": "\u6768\u51ac",
                    "target": "\u7f57\u8f91"
                },
                {
                    "id": 27,
                    "source": "\u4e01\u4eea",
                    "target": "\u6768\u51ac"
                },
                {
                    "id": 28,
                    "source": "\u4e01\u4eea",
                    "target": "\u6c6a\u6dfc"
                },
                {
                    "id": 29,
                    "source": "\u4e01\u4eea",
                    "target": "\u667a\u5b50"
                },
                {
                    "id": 30,
                    "source": "\u4e01\u4eea",
                    "target": "\u7ae0\u5317\u6d77"
                },
                {
                    "id": 31,
                    "source": "\u4e01\u4eea",
                    "target": "\u897f\u5b50"
                },
                {
                    "id": 32,
                    "source": "\u7533\u7389\u83f2",
                    "target": "\u6c6a\u6dfc"
                },
                {
                    "id": 33,
                    "source": "\u7533\u7389\u83f2",
                    "target": "\u9b4f\u6210"
                },
                {
                    "id": 34,
                    "source": "\u7533\u7389\u83f2",
                    "target": "\u6f58\u5bd2"
                },
                {
                    "id": 35,
                    "source": "\u9b4f\u6210",
                    "target": "\u6c6a\u6dfc"
                },
                {
                    "id": 36,
                    "source": "\u9b4f\u6210",
                    "target": "\u7533\u7389\u83f2"
                },
                {
                    "id": 37,
                    "source": "\u6f58\u5bd2",
                    "target": "\u7533\u7389\u83f2"
                },
                {
                    "id": 38,
                    "source": "\u6f58\u5bd2",
                    "target": "\u6c6a\u6dfc"
                },
                {
                    "id": 39,
                    "source": "\u6f58\u5bd2",
                    "target": "\u53f6\u6587\u6d01"
                },
                {
                    "id": 40,
                    "source": "\u53f6\u6587\u6d01",
                    "target": "\u6c6a\u6dfc"
                },
                {
                    "id": 41,
                    "source": "\u53f6\u6587\u6d01",
                    "target": "\u6768\u51ac"
                },
                {
                    "id": 42,
                    "source": "\u53f6\u6587\u6d01",
                    "target": "\u6c99\u745e\u5c71"
                },
                {
                    "id": 43,
                    "source": "\u53f6\u6587\u6d01",
                    "target": "\u53f6\u54f2\u6cf0"
                },
                {
                    "id": 44,
                    "source": "\u53f6\u6587\u6d01",
                    "target": "\u767d\u6c90\u9716"
                },
                {
                    "id": 45,
                    "source": "\u53f6\u6587\u6d01",
                    "target": "\u7a0b\u4e3d\u534e"
                },
                {
                    "id": 46,
                    "source": "\u53f6\u6587\u6d01",
                    "target": "\u53f6\u6587\u96ea"
                },
                {
                    "id": 47,
                    "source": "\u53f6\u6587\u6d01",
                    "target": "\u6768\u536b\u5b81"
                },
                {
                    "id": 48,
                    "source": "\u53f6\u6587\u6d01",
                    "target": "\u96f7\u5fd7\u6210"
                },
                {
                    "id": 49,
                    "source": "\u53f6\u6587\u6d01",
                    "target": "\u6f58\u5bd2"
                },
                {
                    "id": 50,
                    "source": "\u53f6\u6587\u6d01",
                    "target": "\u4f0a\u6587\u65af"
                },
                {
                    "id": 51,
                    "source": "\u53f6\u6587\u6d01",
                    "target": "\u9f50\u730e\u5934"
                },
                {
                    "id": 52,
                    "source": "\u53f6\u6587\u6d01",
                    "target": "\u5927\u51e4"
                },
                {
                    "id": 53,
                    "source": "\u53f6\u6587\u6d01",
                    "target": "\u667a\u5b50"
                },
                {
                    "id": 54,
                    "source": "\u53f6\u6587\u6d01",
                    "target": "\u7f57\u8f91"
                },
                {
                    "id": 55,
                    "source": "\u53f6\u6587\u6d01",
                    "target": "\u8428\u4f0a"
                },
                {
                    "id": 56,
                    "source": "\u53f6\u6587\u6d01",
                    "target": "\u5e84\u989c"
                },
                {
                    "id": 57,
                    "source": "\u6c99\u745e\u5c71",
                    "target": "\u53f6\u6587\u6d01"
                },
                {
                    "id": 58,
                    "source": "\u6c99\u745e\u5c71",
                    "target": "\u6c6a\u6dfc"
                },
                {
                    "id": 59,
                    "source": "\u53f6\u54f2\u6cf0",
                    "target": "\u53f6\u6587\u6d01"
                },
                {
                    "id": 60,
                    "source": "\u53f6\u54f2\u6cf0",
                    "target": "\u6768\u536b\u5b81"
                },
                {
                    "id": 61,
                    "source": "\u767d\u6c90\u9716",
                    "target": "\u53f6\u6587\u6d01"
                },
                {
                    "id": 62,
                    "source": "\u7a0b\u4e3d\u534e",
                    "target": "\u53f6\u6587\u6d01"
                },
                {
                    "id": 63,
                    "source": "\u53f6\u6587\u96ea",
                    "target": "\u53f6\u6587\u6d01"
                },
                {
                    "id": 64,
                    "source": "\u96f7\u5fd7\u6210",
                    "target": "\u6768\u536b\u5b81"
                },
                {
                    "id": 65,
                    "source": "\u96f7\u5fd7\u6210",
                    "target": "\u53f6\u6587\u6d01"
                },
                {
                    "id": 66,
                    "source": "\u6768\u536b\u5b81",
                    "target": "\u96f7\u5fd7\u6210"
                },
                {
                    "id": 67,
                    "source": "\u6768\u536b\u5b81",
                    "target": "\u53f6\u6587\u6d01"
                },
                {
                    "id": 68,
                    "source": "\u6768\u536b\u5b81",
                    "target": "\u53f6\u54f2\u6cf0"
                },
                {
                    "id": 69,
                    "source": "\u6768\u536b\u5b81",
                    "target": "\u6c6a\u6dfc"
                },
                {
                    "id": 70,
                    "source": "\u58a8\u5b50",
                    "target": "\u6c6a\u6dfc"
                },
                {
                    "id": 71,
                    "source": "\u5f90\u51b0\u51b0",
                    "target": "\u6c6a\u6dfc"
                },
                {
                    "id": 72,
                    "source": "\u4f0a\u6587\u65af",
                    "target": "\u53f6\u6587\u6d01"
                },
                {
                    "id": 73,
                    "source": "\u4f0a\u6587\u65af",
                    "target": "\u9ea6\u514b"
                },
                {
                    "id": 74,
                    "source": "\u4f0a\u6587\u65af",
                    "target": "\u667a\u5b50"
                },
                {
                    "id": 75,
                    "source": "\u9f50\u730e\u5934",
                    "target": "\u53f6\u6587\u6d01"
                },
                {
                    "id": 76,
                    "source": "\u9f50\u730e\u5934",
                    "target": "\u6768\u51ac"
                },
                {
                    "id": 77,
                    "source": "\u9f50\u730e\u5934",
                    "target": "\u5927\u51e4"
                },
                {
                    "id": 78,
                    "source": "\u5927\u51e4",
                    "target": "\u53f6\u6587\u6d01"
                },
                {
                    "id": 79,
                    "source": "\u5927\u51e4",
                    "target": "\u9f50\u730e\u5934"
                },
                {
                    "id": 80,
                    "source": "\u9ea6\u514b",
                    "target": "\u4f0a\u6587\u65af"
                },
                {
                    "id": 81,
                    "source": "\u65af\u5766\u987f",
                    "target": "\u53f2\u5f3a"
                },
                {
                    "id": 82,
                    "source": "\u65af\u5766\u987f",
                    "target": "\u6c6a\u6dfc"
                },
                {
                    "id": 83,
                    "source": "\u5143\u9996",
                    "target": "\u667a\u5b50"
                },
                {
                    "id": 84,
                    "source": "\u667a\u5b50",
                    "target": "\u5143\u9996"
                },
                {
                    "id": 85,
                    "source": "\u667a\u5b50",
                    "target": "\u53f6\u6587\u6d01"
                },
                {
                    "id": 86,
                    "source": "\u667a\u5b50",
                    "target": "\u4e01\u4eea"
                },
                {
                    "id": 87,
                    "source": "\u667a\u5b50",
                    "target": "\u4f0a\u6587\u65af"
                },
                {
                    "id": 88,
                    "source": "\u667a\u5b50",
                    "target": "\u7f57\u8f91"
                },
                {
                    "id": 89,
                    "source": "\u667a\u5b50",
                    "target": "\u7a0b\u5fc3"
                },
                {
                    "id": 90,
                    "source": "\u667a\u5b50",
                    "target": "\u6234\u6587"
                },
                {
                    "id": 91,
                    "source": "\u667a\u5b50",
                    "target": "\u5f17\u96f7\u65af"
                },
                {
                    "id": 92,
                    "source": "\u667a\u5b50",
                    "target": "\u4e91\u5929\u660e"
                },
                {
                    "id": 93,
                    "source": "\u667a\u5b50",
                    "target": "\u5173\u4e00\u5e06"
                },
                {
                    "id": 94,
                    "source": "\u7f57\u8f91",
                    "target": "\u6768\u51ac"
                },
                {
                    "id": 95,
                    "source": "\u7f57\u8f91",
                    "target": "\u53f2\u5f3a"
                },
                {
                    "id": 96,
                    "source": "\u7f57\u8f91",
                    "target": "\u7ae0\u5317\u6d77"
                },
                {
                    "id": 97,
                    "source": "\u7f57\u8f91",
                    "target": "\u767d\u84c9"
                },
                {
                    "id": 98,
                    "source": "\u7f57\u8f91",
                    "target": "\u574e\u7279"
                },
                {
                    "id": 99,
                    "source": "\u7f57\u8f91",
                    "target": "\u8428\u4f0a"
                },
                {
                    "id": 100,
                    "source": "\u7f57\u8f91",
                    "target": "\u4f3d\u5c14\u5b81"
                },
                {
                    "id": 101,
                    "source": "\u7f57\u8f91",
                    "target": "\u5e84\u989c"
                },
                {
                    "id": 102,
                    "source": "\u7f57\u8f91",
                    "target": "\u667a\u5b50"
                },
                {
                    "id": 103,
                    "source": "\u7f57\u8f91",
                    "target": "\u53f6\u6587\u6d01"
                },
                {
                    "id": 104,
                    "source": "\u7f57\u8f91",
                    "target": "\u6797\u683c"
                },
                {
                    "id": 105,
                    "source": "\u7f57\u8f91",
                    "target": "\u5f20\u7fd4"
                },
                {
                    "id": 106,
                    "source": "\u7f57\u8f91",
                    "target": "\u5c71\u6749\u60e0\u5b50"
                },
                {
                    "id": 107,
                    "source": "\u7f57\u8f91",
                    "target": "\u718a\u6587"
                },
                {
                    "id": 108,
                    "source": "\u7f57\u8f91",
                    "target": "\u53f2\u6653\u660e"
                },
                {
                    "id": 109,
                    "source": "\u7f57\u8f91",
                    "target": "\u7a0b\u5fc3"
                },
                {
                    "id": 110,
                    "source": "\u7f57\u8f91",
                    "target": "\u5f17\u96f7\u65af"
                },
                {
                    "id": 111,
                    "source": "\u5434\u5cb3",
                    "target": "\u7ae0\u5317\u6d77"
                },
                {
                    "id": 112,
                    "source": "\u7ae0\u5317\u6d77",
                    "target": "\u5434\u5cb3"
                },
                {
                    "id": 113,
                    "source": "\u7ae0\u5317\u6d77",
                    "target": "\u7f57\u8f91"
                },
                {
                    "id": 114,
                    "source": "\u7ae0\u5317\u6d77",
                    "target": "\u5e38\u4f1f\u601d"
                },
                {
                    "id": 115,
                    "source": "\u7ae0\u5317\u6d77",
                    "target": "\u4e01\u4eea"
                },
                {
                    "id": 116,
                    "source": "\u7ae0\u5317\u6d77",
                    "target": "\u4e1c\u65b9\u5ef6\u7eea"
                },
                {
                    "id": 117,
                    "source": "\u7ae0\u5317\u6d77",
                    "target": "\u84dd\u897f"
                },
                {
                    "id": 118,
                    "source": "\u6590\u5179\u7f57\u5c06\u519b",
                    "target": "\u6797\u683c"
                },
                {
                    "id": 119,
                    "source": "\u5f20\u63f4\u671d",
                    "target": "\u6768\u664b\u6587"
                },
                {
                    "id": 120,
                    "source": "\u5f20\u63f4\u671d",
                    "target": "\u82d7\u798f\u5168"
                },
                {
                    "id": 121,
                    "source": "\u5f20\u63f4\u671d",
                    "target": "\u53f2\u6653\u660e"
                },
                {
                    "id": 122,
                    "source": "\u6768\u664b\u6587",
                    "target": "\u5f20\u63f4\u671d"
                },
                {
                    "id": 123,
                    "source": "\u6768\u664b\u6587",
                    "target": "\u82d7\u798f\u5168"
                },
                {
                    "id": 124,
                    "source": "\u82d7\u798f\u5168",
                    "target": "\u5f20\u63f4\u671d"
                },
                {
                    "id": 125,
                    "source": "\u82d7\u798f\u5168",
                    "target": "\u6768\u664b\u6587"
                },
                {
                    "id": 126,
                    "source": "\u53f2\u6653\u660e",
                    "target": "\u5f20\u63f4\u671d"
                },
                {
                    "id": 127,
                    "source": "\u53f2\u6653\u660e",
                    "target": "\u53f2\u5f3a"
                },
                {
                    "id": 128,
                    "source": "\u53f2\u6653\u660e",
                    "target": "\u7f57\u8f91"
                },
                {
                    "id": 129,
                    "source": "\u767d\u84c9",
                    "target": "\u7f57\u8f91"
                },
                {
                    "id": 130,
                    "source": "\u574e\u7279",
                    "target": "\u7f57\u8f91"
                },
                {
                    "id": 131,
                    "source": "\u574e\u7279",
                    "target": "\u53f2\u5f3a"
                },
                {
                    "id": 132,
                    "source": "\u574e\u7279",
                    "target": "\u5f20\u7fd4"
                },
                {
                    "id": 133,
                    "source": "\u8428\u4f0a",
                    "target": "\u7f57\u8f91"
                },
                {
                    "id": 134,
                    "source": "\u8428\u4f0a",
                    "target": "\u53f6\u6587\u6d01"
                },
                {
                    "id": 135,
                    "source": "\u8428\u4f0a",
                    "target": "\u7a0b\u5fc3"
                },
                {
                    "id": 136,
                    "source": "\u5c71\u6749\u60e0\u5b50",
                    "target": "\u7f57\u8f91"
                },
                {
                    "id": 137,
                    "source": "\u6797\u683c",
                    "target": "\u6590\u5179\u7f57\u5c06\u519b"
                },
                {
                    "id": 138,
                    "source": "\u6797\u683c",
                    "target": "\u7f57\u8f91"
                },
                {
                    "id": 139,
                    "source": "\u6797\u683c",
                    "target": "\u80af\u535a\u58eb"
                },
                {
                    "id": 140,
                    "source": "\u4f3d\u5c14\u5b81",
                    "target": "\u7f57\u8f91"
                },
                {
                    "id": 141,
                    "source": "\u5e84\u989c",
                    "target": "\u7f57\u8f91"
                },
                {
                    "id": 142,
                    "source": "\u5e84\u989c",
                    "target": "\u53f6\u6587\u6d01"
                },
                {
                    "id": 143,
                    "source": "\u5f20\u7fd4",
                    "target": "\u7f57\u8f91"
                },
                {
                    "id": 144,
                    "source": "\u5f20\u7fd4",
                    "target": "\u574e\u7279"
                },
                {
                    "id": 145,
                    "source": "\u718a\u6587",
                    "target": "\u7f57\u8f91"
                },
                {
                    "id": 146,
                    "source": "\u4e1c\u65b9\u5ef6\u7eea",
                    "target": "\u7ae0\u5317\u6d77"
                },
                {
                    "id": 147,
                    "source": "\u4e1c\u65b9\u5ef6\u7eea",
                    "target": "\u84dd\u897f"
                },
                {
                    "id": 148,
                    "source": "\u80af\u535a\u58eb",
                    "target": "\u6797\u683c"
                },
                {
                    "id": 149,
                    "source": "\u5217\u6587",
                    "target": "\u4e95\u4e0a\u660e"
                },
                {
                    "id": 150,
                    "source": "\u4e95\u4e0a\u660e",
                    "target": "\u5217\u6587"
                },
                {
                    "id": 151,
                    "source": "\u897f\u5b50",
                    "target": "\u4e01\u4eea"
                },
                {
                    "id": 152,
                    "source": "\u8d75\u946b",
                    "target": "\u674e\u7ef4"
                },
                {
                    "id": 153,
                    "source": "\u674e\u7ef4",
                    "target": "\u8d75\u946b"
                },
                {
                    "id": 154,
                    "source": "\u84dd\u897f",
                    "target": "\u7ae0\u5317\u6d77"
                },
                {
                    "id": 155,
                    "source": "\u84dd\u897f",
                    "target": "\u4e1c\u65b9\u5ef6\u7eea"
                },
                {
                    "id": 156,
                    "source": "\u84dd\u897f",
                    "target": "\u65af\u79d1\u7279"
                },
                {
                    "id": 157,
                    "source": "\u65af\u79d1\u7279",
                    "target": "\u84dd\u897f"
                },
                {
                    "id": 158,
                    "source": "\u6cd5\u624e\u5170",
                    "target": "\u72c4\u5965\u4f26\u5a1c"
                },
                {
                    "id": 159,
                    "source": "\u72c4\u5965\u4f26\u5a1c",
                    "target": "\u6cd5\u624e\u5170"
                },
                {
                    "id": 160,
                    "source": "\u4e91\u5929\u660e",
                    "target": "\u5f20\u533b\u751f"
                },
                {
                    "id": 161,
                    "source": "\u4e91\u5929\u660e",
                    "target": "\u8001\u674e"
                },
                {
                    "id": 162,
                    "source": "\u4e91\u5929\u660e",
                    "target": "\u80e1\u6587"
                },
                {
                    "id": 163,
                    "source": "\u4e91\u5929\u660e",
                    "target": "\u7a0b\u5fc3"
                },
                {
                    "id": 164,
                    "source": "\u4e91\u5929\u660e",
                    "target": "\u4f55\u535a\u58eb"
                },
                {
                    "id": 165,
                    "source": "\u4e91\u5929\u660e",
                    "target": "\u4e8e\u7ef4\u6c11"
                },
                {
                    "id": 166,
                    "source": "\u4e91\u5929\u660e",
                    "target": "\u667a\u5b50"
                },
                {
                    "id": 167,
                    "source": "\u4e91\u5929\u660e",
                    "target": "\u6df1\u6c34\u738b\u5b50"
                },
                {
                    "id": 168,
                    "source": "\u4e91\u5929\u660e",
                    "target": "\u7a7a\u7075\u753b\u5e08"
                },
                {
                    "id": 169,
                    "source": "\u4e91\u5929\u660e",
                    "target": "\u957f\u5e06"
                },
                {
                    "id": 170,
                    "source": "\u4e91\u5929\u660e",
                    "target": "\u5173\u4e00\u5e06"
                },
                {
                    "id": 171,
                    "source": "\u5f20\u533b\u751f",
                    "target": "\u4e91\u5929\u660e"
                },
                {
                    "id": 172,
                    "source": "\u5f20\u533b\u751f",
                    "target": "\u8001\u674e"
                },
                {
                    "id": 173,
                    "source": "\u8001\u674e",
                    "target": "\u4e91\u5929\u660e"
                },
                {
                    "id": 174,
                    "source": "\u8001\u674e",
                    "target": "\u5f20\u533b\u751f"
                },
                {
                    "id": 175,
                    "source": "\u80e1\u6587",
                    "target": "\u4e91\u5929\u660e"
                },
                {
                    "id": 176,
                    "source": "\u80e1\u6587",
                    "target": "\u7a0b\u5fc3"
                },
                {
                    "id": 177,
                    "source": "\u7a0b\u5fc3",
                    "target": "\u4e91\u5929\u660e"
                },
                {
                    "id": 178,
                    "source": "\u7a0b\u5fc3",
                    "target": "\u80e1\u6587"
                },
                {
                    "id": 179,
                    "source": "\u7a0b\u5fc3",
                    "target": "\u4f55\u535a\u58eb"
                },
                {
                    "id": 180,
                    "source": "\u7a0b\u5fc3",
                    "target": "\u4e8e\u7ef4\u6c11"
                },
                {
                    "id": 181,
                    "source": "\u7a0b\u5fc3",
                    "target": "\u67ef\u66fc\u7433"
                },
                {
                    "id": 182,
                    "source": "\u7a0b\u5fc3",
                    "target": "\u8428\u4f0a"
                },
                {
                    "id": 183,
                    "source": "\u7a0b\u5fc3",
                    "target": "\u516c\u5143\u4eba"
                },
                {
                    "id": 184,
                    "source": "\u7a0b\u5fc3",
                    "target": "\u667a\u5b50"
                },
                {
                    "id": 185,
                    "source": "\u7a0b\u5fc3",
                    "target": "\u6bd5\u4e91\u5cf0"
                },
                {
                    "id": 186,
                    "source": "\u7a0b\u5fc3",
                    "target": "\u7f57\u8f91"
                },
                {
                    "id": 187,
                    "source": "\u7a0b\u5fc3",
                    "target": "\u5f17\u96f7\u65af"
                },
                {
                    "id": 188,
                    "source": "\u7a0b\u5fc3",
                    "target": "\u66f9\u5f6c"
                },
                {
                    "id": 189,
                    "source": "\u7a0b\u5fc3",
                    "target": "\u6770\u68ee"
                },
                {
                    "id": 190,
                    "source": "\u7a0b\u5fc3",
                    "target": "\u5173\u4e00\u5e06"
                },
                {
                    "id": 191,
                    "source": "\u4f55\u535a\u58eb",
                    "target": "\u4e91\u5929\u660e"
                },
                {
                    "id": 192,
                    "source": "\u4f55\u535a\u58eb",
                    "target": "\u7a0b\u5fc3"
                },
                {
                    "id": 193,
                    "source": "\u4e8e\u7ef4\u6c11",
                    "target": "\u7a0b\u5fc3"
                },
                {
                    "id": 194,
                    "source": "\u4e8e\u7ef4\u6c11",
                    "target": "\u4e91\u5929\u660e"
                },
                {
                    "id": 195,
                    "source": "\u67ef\u66fc\u7433",
                    "target": "\u7a0b\u5fc3"
                },
                {
                    "id": 196,
                    "source": "\u516c\u5143\u4eba",
                    "target": "\u7a0b\u5fc3"
                },
                {
                    "id": 197,
                    "source": "\u6bd5\u4e91\u5cf0",
                    "target": "\u7a0b\u5fc3"
                },
                {
                    "id": 198,
                    "source": "\u6bd5\u4e91\u5cf0",
                    "target": "\u66f9\u5f6c"
                },
                {
                    "id": 199,
                    "source": "\u66f9\u5f6c",
                    "target": "\u6bd5\u4e91\u5cf0"
                },
                {
                    "id": 200,
                    "source": "\u66f9\u5f6c",
                    "target": "\u7a0b\u5fc3"
                },
                {
                    "id": 201,
                    "source": "\u97e6\u65af\u7279",
                    "target": "\u6234\u6587"
                },
                {
                    "id": 202,
                    "source": "\u97e6\u65af\u7279",
                    "target": "\u5173\u4e00\u5e06"
                },
                {
                    "id": 203,
                    "source": "\u97e6\u65af\u7279",
                    "target": "\u5353\u6587"
                },
                {
                    "id": 204,
                    "source": "\u6234\u6587",
                    "target": "\u97e6\u65af\u7279"
                },
                {
                    "id": 205,
                    "source": "\u6234\u6587",
                    "target": "\u667a\u5b50"
                },
                {
                    "id": 206,
                    "source": "\u827e\u514b",
                    "target": "\u8587\u62c9"
                },
                {
                    "id": 207,
                    "source": "\u8587\u62c9",
                    "target": "\u827e\u514b"
                },
                {
                    "id": 208,
                    "source": "\u5173\u4e00\u5e06",
                    "target": "\u97e6\u65af\u7279"
                },
                {
                    "id": 209,
                    "source": "\u5173\u4e00\u5e06",
                    "target": "\u5353\u6587"
                },
                {
                    "id": 210,
                    "source": "\u5173\u4e00\u5e06",
                    "target": "\u7a0b\u5fc3"
                },
                {
                    "id": 211,
                    "source": "\u5173\u4e00\u5e06",
                    "target": "\u4e91\u5929\u660e"
                },
                {
                    "id": 212,
                    "source": "\u5173\u4e00\u5e06",
                    "target": "\u667a\u5b50"
                },
                {
                    "id": 213,
                    "source": "\u5f17\u96f7\u65af",
                    "target": "\u7a0b\u5fc3"
                },
                {
                    "id": 214,
                    "source": "\u5f17\u96f7\u65af",
                    "target": "\u667a\u5b50"
                },
                {
                    "id": 215,
                    "source": "\u5f17\u96f7\u65af",
                    "target": "\u7f57\u8f91"
                },
                {
                    "id": 216,
                    "source": "\u5353\u6587",
                    "target": "\u5173\u4e00\u5e06"
                },
                {
                    "id": 217,
                    "source": "\u5353\u6587",
                    "target": "\u97e6\u65af\u7279"
                },
                {
                    "id": 218,
                    "source": "\u6df1\u6c34\u738b\u5b50",
                    "target": "\u4e91\u5929\u660e"
                },
                {
                    "id": 219,
                    "source": "\u6df1\u6c34\u738b\u5b50",
                    "target": "\u9732\u73e0\u516c\u4e3b"
                },
                {
                    "id": 220,
                    "source": "\u9732\u73e0\u516c\u4e3b",
                    "target": "\u6df1\u6c34\u738b\u5b50"
                },
                {
                    "id": 221,
                    "source": "\u9732\u73e0\u516c\u4e3b",
                    "target": "\u957f\u5e06"
                },
                {
                    "id": 222,
                    "source": "\u7a7a\u7075\u753b\u5e08",
                    "target": "\u4e91\u5929\u660e"
                },
                {
                    "id": 223,
                    "source": "\u7a7a\u7075\u753b\u5e08",
                    "target": "\u957f\u5e06"
                },
                {
                    "id": 224,
                    "source": "\u957f\u5e06",
                    "target": "\u9732\u73e0\u516c\u4e3b"
                },
                {
                    "id": 225,
                    "source": "\u957f\u5e06",
                    "target": "\u4e91\u5929\u660e"
                },
                {
                    "id": 226,
                    "source": "\u957f\u5e06",
                    "target": "\u7a7a\u7075\u753b\u5e08"
                },
                {
                    "id": 227,
                    "source": "\u6770\u68ee",
                    "target": "\u7a0b\u5fc3"
                }
            ]
        }
    ],
    "legend": [
        {
            "data": [
                "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b",
                "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797",
                "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f"
            ],
            "selected": {
                "\u4e09\u4f531-\u5730\u7403\u5f80\u4e8b": true,
                "\u4e09\u4f532-\u9ed1\u6697\u68ee\u6797": true,
                "\u4e09\u4f533-\u6b7b\u795e\u6c38\u751f": true
            },
            "show": true,
            "left": "2%",
            "top": "20%",
            "orient": "vertical",
            "padding": 5,
            "itemGap": 10,
            "itemWidth": 25,
            "itemHeight": 14
        }
    ],
    "tooltip": {
        "show": true,
        "trigger": "item",
        "triggerOn": "mousemove|click",
        "axisPointer": {
            "type": "line"
        },
        "showContent": true,
        "alwaysShowContent": false,
        "showDelay": 0,
        "hideDelay": 100,
        "textStyle": {
            "fontSize": 14
        },
        "borderWidth": 0,
        "padding": 5
    },
    "title": [
        {
            "text": "\u4e09\u4f53\u4eba\u7269\u5173\u7cfb\u56fe",
            "padding": 5,
            "itemGap": 10
        }
    ]
};
        chart_e97ab300531a4c0ca1574681e578906a.setOption(option_e97ab300531a4c0ca1574681e578906a);
    </script>
</body>
</html>

<p><br><br></p>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>è®­ç»ƒ&amp;ä½¿ç”¨Gloveè¯­è¨€æ¨¡å‹ï¼Œ å¯åº¦é‡åˆ»æ¿å°è±¡ç­‰</title>
      <link>https://hidadeng.github.io/blog/2022-11-22-glove-embeddings-model/</link>
      <pubDate>Tue, 22 Nov 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-11-22-glove-embeddings-model/</guid>
      <description>è®­ç»ƒ&amp;amp;ä½¿ç”¨Gloveè¯­è¨€æ¨¡å‹ï¼Œ å¯åº¦é‡åˆ»æ¿å°è±¡ç­‰</description>
      <content:encoded><![CDATA[<p>Gloveå¯ä»¥æ•æ‰åˆ°è¯è¯­åœ¨è¯­æ–™åº“ä¸­çš„å…¨å±€è¯­ä¹‰ä¿¡æ¯å’Œç±»æ¯”ä¿¡æ¯ï¼Œ æ®æ­¤åŸºäºè¯­ä¹‰å‘é‡è®¡ç®—åˆ»æ¿å°è±¡ã€æ–‡åŒ–å˜è¿ç­‰ï¼ŒGloveæ¨¡å‹åœ¨è®¡ç®—ç¤¾ä¼šç§‘å­¦ä¸­æ‹¥æœ‰å¾ˆå¤§çš„åº”ç”¨æ½œåŠ›ã€‚</p>
<p><img loading="lazy" src="img/wordpaths.png" alt=""  />
</p>
<p>è®­ç»ƒGloveæ¨¡å‹æœ‰ä¸¤ç§å®ç°æ–¹å¼</p>
<ol>
<li>Cè¯­è¨€ï¼›  <a href="https://nlp.stanford.edu/projects/glove/">https://nlp.stanford.edu/projects/glove/</a></li>
<li>Pythonè¯­è¨€ï¼›mittensã€glove-python</li>
</ol>
<p><img loading="lazy" src="img/stanford%e8%ae%ad%e7%bb%83Glove.png" alt=""  />
</p>
<h2 id="æ–¹æ³•æ¯”è¾ƒ">æ–¹æ³•æ¯”è¾ƒ</h2>
<table>
<thead>
<tr>
<th style="text-align:left">æ–¹æ³•</th>
<th style="text-align:left">ä¼˜ç‚¹</th>
<th style="text-align:left">ç¼ºç‚¹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Cè¯­è¨€</td>
<td style="text-align:left">é€Ÿåº¦å¿«ï¼Œç°æˆçš„ä»£ç å·¥å…·</td>
<td style="text-align:left">æºä»£ç ä»…æ”¯æŒè‹±æ–‡, éœ€è¦ä»˜å‡ºè¾ƒé«˜çš„å­¦ä¹ æˆæœ¬æ‰èƒ½æ”¹åŠ¨æ”¯æŒä¸­æ–‡ã€‚ å¯¹æ–‡ç§‘ç”Ÿå°ç™½è€Œè¨€ï¼Œé—¨æ§›é«˜</td>
</tr>
<tr>
<td style="text-align:left">Pythonè¯­è¨€</td>
<td style="text-align:left">mittensã€glove-pythonç­‰åŒ…è¯­æ³•ç®€æ´, æ˜“ä¸Šæ‰‹</td>
<td style="text-align:left">å¯¹æ–‡ç§‘ç”Ÿè¿˜æ˜¯æœ‰ä¸€å®šçš„é—¨æ§›ï¼Œä»£ç è¿è¡Œé€Ÿåº¦æ…¢</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td></td>
</tr>
</tbody>
</table>
<br>
<p>ä¸è€ƒè™‘æ€§èƒ½çº¦æŸæ¡ä»¶ï¼Œæ›´å¤šåœ°è€ƒè™‘æ˜“ç”¨æ€§ï¼Œå¤§é‚“ç®€åŒ–äº†Pythonä»£ç ï¼Œå°†å…¶å†…ç½®åˆ°äº†cntextåº“ã€‚</p>
<p>å¯¹è¯å‘é‡ã€è¯åµŒå…¥æ„Ÿå…´è¶£çš„ç«¥é‹ï¼Œå¯ä»¥é˜…è¯»ä¸‹åˆ—ç›¸å…³èµ„æ–™</p>
<ul>
<li><a href="https://textdata.cn/blog/wordembeddingsinsocialscience/">è½¬è½½ | å¤§æ•°æ®æ—¶ä»£ä¸‹ç¤¾ä¼šç§‘å­¦ç ”ç©¶æ–¹æ³•çš„æ‹“å±•â€”â€”åŸºäºè¯åµŒå…¥æŠ€æœ¯çš„æ–‡æœ¬åˆ†æçš„åº”ç”¨</a></li>
<li><a href="https://textdata.cn/blog/from_sysbol_to_embeddings_in_computational_social_science/">è½¬è½½ | ä»ç¬¦å·åˆ°åµŒå…¥ï¼šè®¡ç®—ç¤¾ä¼šç§‘å­¦çš„ä¸¤ç§æ–‡æœ¬è¡¨ç¤º</a></li>
</ul>
<br>
<h2 id="gloveä»£ç ">GloVeä»£ç </h2>
<p>cntextæ”¯æŒä¸­è‹±æ–‡ï¼Œ åªéœ€è¦7è¡Œä»£ç ï¼Œå¯å®Œæˆå¯¼å…¥æ•°æ®ã€è®­ç»ƒæ¨¡å‹ã€ä¿å­˜ç»“æœã€‚ è¿™é‡Œä»¥ä¸‰ä½“å°è¯´æ•°æ®ä¸ºä¾‹ï¼Œ ä½¿ç”¨ <a href="santi.txt"><strong>data/santi.txt</strong></a> ã€‚</p>
<p><strong>éœ€è¦æ³¨æ„ï¼Œ santi.txtæ–‡ä»¶å†…æ–‡æœ¬æ˜¯å·²ç»åˆ†è¯å¤„ç†è¿‡çš„</strong>ã€‚è¿™æ ·å¯ä»¥åœ¨englishè¿™ç±»è¥¿æ–¹è¯­è¨€æ¨¡å¼ä¸‹ä½¿ç”¨ç©ºæ ¼æ¥åŒºåˆ†è¯è¯­çš„è¾¹ç•Œã€‚</p>
<blockquote>
<p>å¦‚æœä½¿ç”¨è‹±æ–‡æ•°æ®ï¼Œä¸‹é¢ä»£ç åªéœ€è¦æ›´æ”¹æ•°æ®æ–‡ä»¶çš„è·¯å¾„å³å¯ã€‚</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1">#è®¾ç½®è¯­è¨€å’Œé¡¹ç›®æ–‡ä»¶å¤¹è·¯å¾„</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">Glove</span><span class="p">(</span><span class="n">cwd</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>
<span class="c1">#å¯¼å…¥è¯­æ–™</span>
<span class="n">model</span><span class="o">.</span><span class="n">create_vocab</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s1">&#39;data/santi.txt&#39;</span><span class="p">,</span> <span class="n">min_count</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="c1">#æ„å»ºè¯è¯­å…±ç°çŸ©é˜µ</span>
<span class="n">model</span><span class="o">.</span><span class="n">cooccurrence_matrix</span><span class="p">()</span>
<span class="c1">#è®¾ç½®è¯åµŒå…¥æ¨¡å‹çš„å‘é‡ç»´åº¦ã€è¿­ä»£æ•°</span>
<span class="n">model</span><span class="o">.</span><span class="n">train_embeddings</span><span class="p">(</span><span class="n">vector_size</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">max_iter</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
<span class="c1">#å­˜å‚¨æ¨¡å‹</span>
<span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_name</span><span class="o">=</span><span class="s1">&#39;santi_glove_model&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Building prefix dict from the default dictionary ...
Step 1/4: ...Create vocabulary for Glove.

Dumping model to file cache C:\Users\Deng\AppData\Local\Temp\jieba.cache
Loading model cost 0.628 seconds.

Prefix dict has been built successfully.

Step 2/4: ...Create cooccurrence matrix.
Step 3/4: ...Train glove embeddings. 
             Note, this part takes a long time to run

Iteration 20: error 64925132.71550
Step 3/4: ... Finish! Use 316.91 s

Step 4/4: ... Save the glove embeddings to a txt file
</code></pre></div><br>
<h2 id="å¯¼å…¥gloveé¢„è®­ç»ƒæ¨¡å‹">å¯¼å…¥GloVeé¢„è®­ç»ƒæ¨¡å‹</h2>
<p>è®­ç»ƒå¥½çš„GloVeæ¨¡å‹æ˜¯txtæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨gensimå¯¼å…¥ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">gensim.models</span> <span class="kn">import</span> <span class="n">KeyedVectors</span>

<span class="c1"># å¯¼å…¥GloVeæ¨¡å‹æ–‡ä»¶</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">KeyedVectors</span><span class="o">.</span><span class="n">load_word2vec_format</span><span class="p">(</span><span class="s1">&#39;output/Glove/santi_glove_model.txt&#39;</span><span class="p">,</span>  <span class="n">no_header</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1">#æŸ¥çœ‹æŸè¯çš„è¯å‘é‡</span>
<span class="n">model</span><span class="o">.</span><span class="n">get_vector</span><span class="p">(</span><span class="s1">&#39;å®‡å®™&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">array([ 0.6618259 ,  0.60663235,  0.9849417 , -1.028956  ,  1.0711069 ,
       -0.8875306 , -0.52833366, -1.0125595 , -0.9628481 ,  1.0356479 ,
        0.8595257 ,  0.7454354 , -1.0468111 , -0.26285014, -1.0310447 ,
        0.9906805 ,  0.05825566, -0.85581344, -0.9932533 , -1.020438  ,
        1.0495061 , -0.6973389 ,  0.49099424, -0.80775315,  0.64256483,
        1.0157642 ,  1.0135043 , -1.0131834 ,  0.17376372,  0.89585054,
        0.30890268,  0.798895  ,  0.6653925 ,  0.908629  , -1.048273  ,
       -0.35683677,  0.06306187, -1.0267074 , -1.0494691 ,  0.42172813,
        0.24005401,  0.5934993 , -0.0696691 , -1.0360557 , -0.9797269 ,
        1.0205714 , -0.376359  , -1.0501183 ,  1.0415571 , -0.9312968 ],
      dtype=float32)
</code></pre></div><br>
<h2 id="æ¨¡å‹çš„ä½¿ç”¨">æ¨¡å‹çš„ä½¿ç”¨</h2>
<p>è¯­æ–™ä¸­æ‰€æœ‰çš„è¯è¯­éƒ½æ˜¯ç»´åº¦ç›¸åŒçš„å‘é‡ï¼Œå¯ä»¥æ ¹æ®å‘é‡è®¡ç®—æ‰¾è¿‘ä¹‰è¯ã€åä¹‰è¯ã€‚å¯å‚è€ƒ ä¹‹å‰åˆ†äº«çš„   <a href="https://textdata.cn/blog/douban_w2v/">è±†ç“£å½±è¯„ | æ¢ç´¢è¯å‘é‡å¦™å¤„</a></p>
<br>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<ul>
<li>å†‰é›…ç’‡,æå¿—å¼º,åˆ˜ä½³å¦®,å¼ é€¸çŸ³.å¤§æ•°æ®æ—¶ä»£ä¸‹ç¤¾ä¼šç§‘å­¦ç ”ç©¶æ–¹æ³•çš„æ‹“å±•â€”â€”åŸºäºè¯åµŒå…¥æŠ€æœ¯çš„æ–‡æœ¬åˆ†æçš„åº”ç”¨[J].å—å¼€ç®¡ç†è¯„è®º:1-27.</li>
<li>William L. Hamilton, Jure Leskovec, and Dan Jurafsky. ACL 2016. Diachronic Word Embeddings Reveal Statistical Laws of Semantic Change.</li>
<li>Jeffrey Pennington, Richard Socher, and Christopher D. Manning. 2014. GloVe: Global Vectors for Word Representation.
<ul>
<li><a href="https://nlp.stanford.edu/projects/glove/">https://nlp.stanford.edu/projects/glove/</a></li>
</ul>
</li>
<li><a href="https://github.com/hiDaDeng/cntext">https://github.com/hiDaDeng/cntext</a></li>
</ul>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>FinBERT | é‡‘èæ–‡æœ¬BERTæ¨¡å‹ï¼Œå¯æƒ…æ„Ÿåˆ†æã€è¯†åˆ«ESGå’ŒFLSç±»å‹</title>
      <link>https://hidadeng.github.io/blog/2022-11-17-finbert-finance-bert-model/</link>
      <pubDate>Wed, 16 Nov 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-11-17-finbert-finance-bert-model/</guid>
      <description>é‡‘èè¯­è¨€æ¨¡å‹</description>
      <content:encoded><![CDATA[<h2 id="finbertä»‹ç»">FinBERTä»‹ç»</h2>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/uj4hm7Lr2Wo" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<br>
<p>FinBERTï¼Œ æ˜¯ä½¿ç”¨49äº¿è¯çš„è‹±æ–‡é‡‘èè¯­æ–™åº“æ•°æ®ï¼Œç”Ÿæˆçš„BERTé¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ã€‚è¯­æ–™åº“ä¸Šå¤§å°ä¸º 49äº¿ä¸ªè¯ã€‚</p>
<ul>
<li>å…¬å¸æŠ¥å‘Š 10-K å’Œ 10-Qï¼š25äº¿ä¸ªè¯</li>
<li>ç”µè¯ä¼šè®®è®°å½•ï¼š13äº¿ä¸ªè¯</li>
<li>åˆ†æå¸ˆæŠ¥å‘Šï¼š11äº¿ä¸ªè¯</li>
</ul>
<p>FinBERTå¼€å‘è€…åœ¨å¤šä¸ªé‡‘è NLP ä»»åŠ¡ä¸Šå¯¹ FinBERT é¢„è®­ç»ƒæ¨¡å‹è¿›è¡Œäº†å¾®è°ƒï¼Œå‡ä¼˜äºä¼ ç»Ÿæœºå™¨å­¦ä¹ æ¨¡å‹ã€æ·±åº¦å­¦ä¹ æ¨¡å‹å’Œå¾®è°ƒ BERT æ¨¡å‹ã€‚ æ‰€æœ‰ç»è¿‡å¾®è°ƒçš„ FinBERT æ¨¡å‹éƒ½å…¬å¼€æ‰˜ç®¡åœ¨ Huggingface ğŸ¤—ã€‚  ç›®å‰æ”¯æŒåŒ…æ‹¬<strong>æƒ…ç»ªåˆ†æã€ESG åˆ†ç±»ã€å‰ç»æ€§é™ˆè¿° (FLS) åˆ†ç±»</strong>ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Huang, Allen H., Hui Wang, and Yi Yang. &#34;FinBERT: A large language model for extracting information from financial text.&#34; Contemporary Accounting Research (2022).

æ‘˜è¦ï¼ˆç¿»è¯‘ï¼‰: æˆ‘ä»¬å¼€å‘äº† FinBERTï¼Œè¿™æ˜¯ä¸€ç§é€‚ç”¨äºé‡‘èé¢†åŸŸçš„æœ€å…ˆè¿›çš„å¤§å‹è¯­è¨€æ¨¡å‹ã€‚æˆ‘ä»¬è¡¨æ˜ï¼ŒFinBERT ç»“åˆäº†é‡‘èçŸ¥è¯†ï¼Œå¯ä»¥æ›´å¥½åœ°æ€»ç»“é‡‘èæ–‡æœ¬ä¸­çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚ä½¿ç”¨åˆ†ææŠ¥å‘Šä¸­ç ”ç©¶äººå‘˜æ ‡è®°çš„å¥å­æ ·æœ¬ï¼Œæˆ‘ä»¬è¯æ˜ FinBERT å¤§å¤§ä¼˜äº Loughran å’Œ McDonald è¯å…¸ä»¥åŠå…¶ä»–æœºå™¨å­¦ä¹ ç®—æ³•ï¼ŒåŒ…æ‹¬æœ´ç´ è´å¶æ–¯ã€æ”¯æŒå‘é‡æœºã€éšæœºæ£®æ—ã€å·ç§¯ç¥ç»ç½‘ç»œå’Œé•¿çŸ­æœŸè®°å¿†ï¼Œåœ¨æƒ…æ„Ÿåˆ†ç±»ä¸­ã€‚æˆ‘ä»¬çš„ç»“æœè¡¨æ˜ï¼ŒFinBERT æ“…é•¿è¯†åˆ«å…¶ä»–ç®—æ³•é”™è¯¯æ ‡è®°ä¸ºä¸­æ€§çš„å¥å­çš„æ­£é¢æˆ–è´Ÿé¢æƒ…ç»ªï¼Œè¿™å¯èƒ½æ˜¯å› ä¸ºå®ƒä½¿ç”¨äº†é‡‘èæ–‡æœ¬ä¸­çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚æˆ‘ä»¬å‘ç°ï¼ŒFinBERT ä¼˜äºå…¶ä»–ç®—æ³•ï¼Œä»¥åŠ Google çš„åŸå§‹åŒå‘ç¼–ç å™¨è¡¨ç¤ºå½¢å¼æ¥è‡ª transformers (BERT) æ¨¡å‹ï¼Œå½“è®­ç»ƒæ ·æœ¬é‡è¾ƒå°ä¸”æ–‡æœ¬ä¸­åŒ…å«ä¸€èˆ¬æ–‡æœ¬ä¸­ä¸å¸¸ç”¨çš„é‡‘èè¯æ—¶ï¼Œè¿™ç§ä¼˜åŠ¿å°¤ä¸ºçªå‡ºã€‚ FinBERT åœ¨è¯†åˆ«ä¸ç¯å¢ƒã€ç¤¾ä¼šå’Œæ²»ç†é—®é¢˜ç›¸å…³çš„è®¨è®ºæ–¹é¢ä¹Ÿä¼˜äºå…¶ä»–æ¨¡å‹ã€‚æœ€åï¼Œæˆ‘ä»¬è¡¨æ˜ï¼Œä¸ FinBERT ç›¸æ¯”ï¼Œå…¶ä»–æ–¹æ³•ä½ä¼°äº†æ”¶ç›Šç”µè¯ä¼šè®®çš„æ–‡æœ¬ä¿¡æ¯é‡è‡³å°‘ 18%ã€‚æˆ‘ä»¬çš„ç»“æœå¯¹å­¦æœ¯ç ”ç©¶äººå‘˜ã€æŠ•èµ„ä¸“ä¸šäººå£«å’Œé‡‘èå¸‚åœºç›‘ç®¡æœºæ„å…·æœ‰é‡è¦æ„ä¹‰ã€‚
</code></pre></div><br>
<h3 id="finbertåŠŸèƒ½">FinBERTåŠŸèƒ½</h3>
<p>å…·ä½“æ¥è¯´ï¼ŒFinBERTæœ‰ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li><a href="https://huggingface.co/yiyanghkust/finbert-pretrain">FinBERT-Pretrained</a>ï¼š é’ˆå¯¹å¤§è§„æ¨¡é‡‘èæ–‡æœ¬çš„é¢„è®­ç»ƒ FinBERT æ¨¡å‹ã€‚</li>
<li><a href="https://huggingface.co/yiyanghkust/finbert-tone">FinBERT-Sentiment</a>ï¼š ç”¨äºæƒ…æ„Ÿåˆ†ç±»ä»»åŠ¡ã€‚</li>
<li><a href="https://huggingface.co/yiyanghkust/finbert-esg">FinBERT-ESG</a>ï¼š ç”¨äº ESG åˆ†ç±»ä»»åŠ¡ã€‚</li>
<li><a href="https://huggingface.co/yiyanghkust/finbert-fls">FinBERT-FLS</a>ï¼š ç”¨äºå‰ç»æ€§é™ˆè¿°ï¼ˆFLSï¼‰åˆ†ç±»ä»»åŠ¡ã€‚</li>
</ul>
<br>
<h3 id="ç¯å¢ƒé…ç½®">ç¯å¢ƒé…ç½®</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip install transformers==4.18.0
</code></pre></div><p>æœ¬æ¬¡å®éªŒä½¿ç”¨çš„transformersç‰ˆæœ¬ä¸º</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">import transformers
transformers.__version__
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">4.18.0
</code></pre></div><br>
<h3 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h3>
<p><a href="FinBERT.ipynb">ç‚¹å‡»ä¸‹è½½</a></p>
<p><br><br></p>
<h2 id="ä¸€æƒ…æ„Ÿåˆ†æ">ä¸€ã€æƒ…æ„Ÿåˆ†æ</h2>
<p>é‡‘èæ–‡æœ¬æƒ…ç»ªå¯ä»¥è°ƒåŠ¨ç®¡ç†è€…ã€ä¿¡æ¯ä¸­ä»‹å’ŒæŠ•èµ„è€…çš„è§‚ç‚¹å’Œæ„è§, å› æ­¤åˆ†æé‡‘èæ–‡æœ¬æƒ…æ„Ÿ(æƒ…ç»ª)æ˜¯æœ‰ä»·å€¼çš„ã€‚ FinBERT-Sentiment æ˜¯ä¸€ä¸ª FinBERT æ¨¡å‹ï¼Œå®ƒæ ¹æ®æ ‡å‡†æ™®å°” 500 å®¶å…¬å¸çš„åˆ†æå¸ˆæŠ¥å‘Šä¸­çš„ 10,000 ä¸ªæ‰‹åŠ¨æ³¨é‡Šçš„å¥å­è¿›è¡Œäº†Fine-tune(å¾®è°ƒ)ã€‚</p>
<blockquote>
<p>Fine-Tuneå¾®è°ƒ æ˜¯ æ·±åº¦å­¦ä¹ çš„ä¸€ç§è¯­è¨€å¤„ç†æŠ€æœ¯ï¼Œå¯ä»¥åœ¨å‰äººï¼ˆå·²æœ‰ï¼‰çš„è¯­è¨€æ¨¡å‹æ–‡ä»¶åŸºç¡€ä¸ŠåŠ å…¥å°‘é‡æ–°åœºæ™¯çš„æ–‡æœ¬æ•°æ®è¿›è¡Œæ›´æ–°è®­ç»ƒï¼Œç”Ÿæˆå‡ºæ–°åœºæ™¯çš„è¯­è¨€æ¨¡å‹ã€‚</p>
</blockquote>
<ul>
<li><strong>è¾“å…¥</strong>ï¼šé‡‘èæ–‡æœ¬ã€‚</li>
<li><strong>è¾“å‡º</strong>ï¼šPositive, Neutral or Negative.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">transformers</span> <span class="kn">import</span> <span class="n">BertTokenizer</span><span class="p">,</span> <span class="n">BertForSequenceClassification</span><span class="p">,</span> <span class="n">pipeline</span>

<span class="c1">#é¦–æ¬¡è¿è¡Œï¼Œå› ä¸ºä¼šä¸‹è½½FinBERTæ¨¡å‹ï¼Œè€—æ—¶ä¼šæ¯”è¾ƒä¹…</span>
<span class="n">senti_finbert</span> <span class="o">=</span> <span class="n">BertForSequenceClassification</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s1">&#39;yiyanghkust/finbert-tone&#39;</span><span class="p">,</span><span class="n">num_labels</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">senti_tokenizer</span> <span class="o">=</span> <span class="n">BertTokenizer</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s1">&#39;yiyanghkust/finbert-tone&#39;</span><span class="p">)</span>
<span class="n">senti_nlp</span> <span class="o">=</span> <span class="n">pipeline</span><span class="p">(</span><span class="s2">&#34;text-classification&#34;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">senti_finbert</span><span class="p">,</span> <span class="n">tokenizer</span><span class="o">=</span><span class="n">senti_tokenizer</span><span class="p">)</span>
</code></pre></div><p><br>ä½¿ç”¨3æ¡æµ‹è¯•æ–‡æœ¬è¿›è¡Œæµ‹è¯•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># å¾…åˆ†æçš„æ–‡æœ¬æ•°æ®</span>
<span class="n">senti_results</span> <span class="o">=</span> <span class="n">senti_nlp</span><span class="p">([</span><span class="s1">&#39;growth is strong and we have plenty of liquidity.&#39;</span><span class="p">,</span> 
                           <span class="s1">&#39;there is a shortage of capital, and we need extra financing.&#39;</span><span class="p">,</span>
                           <span class="s1">&#39;formulation patents might protect Vasotec to a limited extent.&#39;</span><span class="p">])</span>
<span class="n">senti_results</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">    [{&#39;label&#39;: &#39;Positive&#39;, &#39;score&#39;: 1.0},
     {&#39;label&#39;: &#39;Negative&#39;, &#39;score&#39;: 0.9952379465103149},
     {&#39;label&#39;: &#39;Neutral&#39;, &#39;score&#39;: 0.9979718327522278}]
</code></pre></div><p><br><br></p>
<h2 id="äºŒesgåˆ†ç±»">äºŒã€ESGåˆ†ç±»</h2>
<p>ESG åˆ†æå¯ä»¥å¸®åŠ©æŠ•èµ„è€…ç¡®å®šä¼ä¸šçš„é•¿æœŸå¯æŒç»­æ€§å¹¶è¯†åˆ«ç›¸å…³é£é™©ã€‚ FinBERT-ESG æ˜¯ä¸€ä¸ª FinBERT æ¨¡å‹ï¼Œæ ¹æ®æ¥è‡ªå…¬å¸ ESG æŠ¥å‘Šå’Œå¹´åº¦æŠ¥å‘Šçš„ 2,000 ä¸ªæ‰‹åŠ¨æ³¨é‡Šå¥å­è¿›è¡Œå¾®è°ƒã€‚</p>
<ul>
<li><strong>è¾“å…¥</strong>ï¼šé‡‘èæ–‡æœ¬ã€‚</li>
<li><strong>è¾“å‡º</strong>ï¼šEnvironmental, Social, Governance or None.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">transformers</span> <span class="kn">import</span> <span class="n">BertTokenizer</span><span class="p">,</span> <span class="n">BertForSequenceClassification</span><span class="p">,</span> <span class="n">pipeline</span>

<span class="n">esg_finbert</span> <span class="o">=</span> <span class="n">BertForSequenceClassification</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s1">&#39;yiyanghkust/finbert-esg&#39;</span><span class="p">,</span><span class="n">num_labels</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">esg_tokenizer</span> <span class="o">=</span> <span class="n">BertTokenizer</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s1">&#39;yiyanghkust/finbert-esg&#39;</span><span class="p">)</span>
<span class="n">esg_nlp</span> <span class="o">=</span> <span class="n">pipeline</span><span class="p">(</span><span class="s2">&#34;text-classification&#34;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">esg_finbert</span><span class="p">,</span> <span class="n">tokenizer</span><span class="o">=</span><span class="n">esg_tokenizer</span><span class="p">)</span>
</code></pre></div><p><br>ä½¿ç”¨3æ¡æµ‹è¯•æ–‡æœ¬è¿›è¡Œæµ‹è¯•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">esg_results</span> <span class="o">=</span> <span class="n">esg_nlp</span><span class="p">([</span><span class="s1">&#39;Managing and working to mitigate the impact our operations have on the environment is a core element of our business.&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;Rhonda has been volunteering for several years for a variety of charitable community programs.&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;Cabot</span><span class="se">\&#39;</span><span class="s1">s annual statements are audited annually by an independent registered public accounting firm.&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;As of December 31, 2012, the 2011 Term Loan had a principal balance of $492.5 million.&#39;</span><span class="p">])</span>

<span class="n">esg_results</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">    [{&#39;label&#39;: &#39;Environmental&#39;, &#39;score&#39;: 0.9805498719215393},
     {&#39;label&#39;: &#39;Social&#39;, &#39;score&#39;: 0.9906041026115417},
     {&#39;label&#39;: &#39;Governance&#39;, &#39;score&#39;: 0.6738430857658386},
     {&#39;label&#39;: &#39;None&#39;, &#39;score&#39;: 0.9960240125656128}]
</code></pre></div><p><br><br></p>
<h2 id="ä¸‰flsè¯†åˆ«">ä¸‰ã€FLSè¯†åˆ«</h2>
<p><strong>å‰ç»æ€§é™ˆè¿° (FLS)</strong> å‘ŠçŸ¥æŠ•èµ„è€…ç»ç†äººå¯¹å…¬å¸æœªæ¥äº‹ä»¶æˆ–ç»“æœçš„ä¿¡å¿µå’Œæ„è§ã€‚ ä»å…¬å¸æŠ¥å‘Šä¸­è¯†åˆ«å‰ç»æ€§é™ˆè¿°å¯ä»¥å¸®åŠ©æŠ•èµ„è€…è¿›è¡Œè´¢åŠ¡åˆ†æã€‚ FinBERT-FLS æ˜¯ä¸€ä¸ª FinBERT æ¨¡å‹ï¼Œå®ƒåŸºäºç½—ç´  3000 å®¶å…¬å¸å¹´æŠ¥çš„ç®¡ç†è®¨è®ºå’Œåˆ†æéƒ¨åˆ†çš„ 3,500 ä¸ªæ‰‹åŠ¨æ³¨é‡Šçš„å¥å­è¿›è¡Œäº†å¾®è°ƒã€‚</p>
<ul>
<li><strong>è¾“å…¥</strong>ï¼šé‡‘èæ–‡æœ¬ã€‚</li>
<li><strong>è¾“å‡º</strong>ï¼šSpecific-FLS(ç‰¹å®š FLS) , Non-specific FLS(éç‰¹å®š FLS),  Not-FLS(é FLS)ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">transformers</span> <span class="kn">import</span> <span class="n">BertTokenizer</span><span class="p">,</span> <span class="n">BertForSequenceClassification</span><span class="p">,</span> <span class="n">pipeline</span>

<span class="n">fls_finbert</span> <span class="o">=</span> <span class="n">BertForSequenceClassification</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s1">&#39;yiyanghkust/finbert-fls&#39;</span><span class="p">,</span><span class="n">num_labels</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">fls_tokenizer</span> <span class="o">=</span> <span class="n">BertTokenizer</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s1">&#39;yiyanghkust/finbert-fls&#39;</span><span class="p">)</span>

<span class="n">fls_nlp</span> <span class="o">=</span> <span class="n">pipeline</span><span class="p">(</span><span class="s2">&#34;text-classification&#34;</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">fls_finbert</span><span class="p">,</span> <span class="n">tokenizer</span><span class="o">=</span><span class="n">fls_tokenizer</span><span class="p">)</span>
</code></pre></div><p><br> ä½¿ç”¨3æ¡æµ‹è¯•æ–‡æœ¬è¿›è¡Œæµ‹è¯•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">fls_results</span> <span class="o">=</span> <span class="n">fls_nlp</span><span class="p">([</span><span class="s1">&#39;we expect the age of our fleet to enhance availability and reliability due to reduced downtime for repairs.&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;on an equivalent unit of production basis, general and administrative expenses declined 24 percent from 1994 to $.67 per boe.&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;we will continue to assess the need for a valuation allowance against deferred tax assets considering all available evidence obtained in future reporting periods.&#39;</span><span class="p">])</span>


<span class="n">fls_results</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">    [{&#39;label&#39;: &#39;Specific FLS&#39;, &#39;score&#39;: 0.7727874517440796},
     {&#39;label&#39;: &#39;Not FLS&#39;, &#39;score&#39;: 0.9905241131782532},
     {&#39;label&#39;: &#39;Non-specific FLS&#39;, &#39;score&#39;: 0.975904107093811}]
</code></pre></div><p><br><br></p>
<h2 id="æ–‡æ¡£åŠå¼•ç”¨è¯´æ˜">æ–‡æ¡£åŠå¼•ç”¨è¯´æ˜</h2>
<ul>
<li>
<p>æ–‡æ¡£githubåœ°å€ <a href="https://github.com/yya518/FinBERT">https://github.com/yya518/FinBERT</a></p>
</li>
<li>
<p>ä½œè€…åšå®¢: <a href="https://yya518.github.io/research">https://yya518.github.io/research</a></p>
</li>
</ul>
<br>
<p>Huang, Allen H., Hui Wang, and Yi Yang. &ldquo;FinBERT: A large language model for extracting information from financial text.&rdquo; <strong>Contemporary Accounting Research (2022)</strong>.</p>
<p><br><br></p>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>PNAS | ä½¿ç”¨è¯­ä¹‰è·ç¦»æµ‹é‡ä¸€ä¸ªäººçš„åˆ›æ–°åŠ›(å‘æ•£æ€ç»´)å¾—åˆ†</title>
      <link>https://hidadeng.github.io/blog/2022-11-14-pnas_naming_unrelated_words_predicts_creativity/</link>
      <pubDate>Mon, 14 Nov 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-11-14-pnas_naming_unrelated_words_predicts_creativity/</guid>
      <description>ä½¿ç”¨è¯­ä¹‰è·ç¦»æµ‹é‡ä¸€ä¸ªäººçš„åˆ›æ–°åŠ›(å‘æ•£æ€ç»´)å¾—åˆ†</description>
      <content:encoded><![CDATA[<br>
<p>ä¼ ç»Ÿæµ‹é‡ <strong>è¢«è¯•è€…åˆ›é€ åŠ›</strong> å­˜åœ¨è€—è´¹æ—¶é—´ã€ä¸»è§‚æ€§å¤ªå¼ºã€ç¼ºä¹å®¢è§‚æ€§ï¼Œä¸”æ‰€å¾—åˆ°çš„åˆ†å€¼æ˜¯ä¸ç¨³å®šçš„ï¼Œæ— æ³•è·¨æ—¶é—´ã€æ–‡åŒ–ã€ç¾¤ä½“è¿›è¡Œåˆ†å€¼æ¯”è¾ƒã€‚è¯¥ç ”ç©¶åˆ†æäº†åˆ›æ–°åŠ›çš„ä¸¤å¤§ç†è®ºï¼Œå³è”ç³»ç†è®ºå’Œæ‰§è¡Œç†è®ºï¼Œå³åˆ›æ–°åŠ›æ˜¯åŒ…å«æ€ç»´çš„å¹¿åº¦å’Œæ·±åº¦ä¸¤æ–¹é¢ã€‚</p>
<ul>
<li><strong>è”ç³»ç†è®º(å¹¿åº¦)</strong> è´Ÿè´£æœå¯»æ‰€æœ‰å¯èƒ½æ–¹æ¡ˆçš„é›†åˆï¼Œå¢åŠ é›†åˆçš„è§„æ¨¡ï¼Œä½“ç°æ€ç»´çš„å¹¿åº¦ã€‚</li>
<li><strong>æ‰§è¡Œç†è®º(æ·±åº¦)</strong> è´Ÿè´£å¯»æ‰¾æœ€ä½³æ–¹æ¡ˆï¼Œå¹¶å°†æ–¹æ¡ˆè½å®æ‰§è¡Œï¼Œä½“ç°æ€ç»´çš„æ·±åº¦ã€‚</li>
</ul>
<p>ç»“åˆGloveè¯åµŒå…¥æŠ€æœ¯ï¼Œå°†æ¯ä¸ªè¯ç†è§£ä¸ºä¸€ä¸ªæŠ€æœ¯æˆ–çŸ¥è¯†ï¼Œä¸¤è¯è¯­è¯­ä¹‰è¶Šç›¸ä¼¼ï¼Œå‘æ•£æ€§è¶Šä½ã€‚</p>
<p>æ–‡ä¸­è®©è¢«è¯•æŒ‰ç…§ä¸€å®šè§„åˆ™ï¼Œéšæ„å¡«å†™10ä¸ªåè¯ï¼Œä½¿ç”¨å…¶ä¸­7ä¸ªæœ‰æ•ˆè¯è¯­æµ‹é‡è¢«è¯•çš„åˆ›æ–°åŠ›(å‘æ•£æ€§)æ€ç»´ã€‚å¯ä»¥ç®€å•çš„æŠŠ7ä¸ªè¯ç†è§£ä¸ºçŸ¥è¯†æˆ–è€…æŠ€æœ¯ï¼Œ7ä¸ªè¯è¯­ä¼šå½¢æˆ21ç§è¯è¯­å¯¹(ç»„åˆ)ã€‚æœ€åæ±‚å‡å€¼å¯ä»¥æµ‹é‡å‡ºè¢«è¯•è¯è¯­å¯¹çš„è¯­ä¹‰è·ç¦»ä½“ç°åˆ›æ–°å‘æ•£æ€§çš„å¼ºåº¦ã€‚<strong>æ–‡æœ«å«æ¡ˆä¾‹ä»£ç </strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Olson, J.A., Nahas, J., Chmoulevitch, D., Cropper, S.J. and Webb, M.E., 2021. Naming unrelated words predicts creativity. Proceedings of the National Academy of Sciences, 118(25), p.e2022340118.
</code></pre></div><p><br><br></p>
<h2 id="ä¸€æ‘˜è¦">ä¸€ã€æ‘˜è¦</h2>
<p><strong>ä¸€äº›ç†è®ºè®¤ä¸ºï¼Œæœ‰ åˆ›é€ åŠ› çš„äººèƒ½å¤Ÿäº§ç”Ÿæ›´å¤š å‘æ•£æ€§ çš„æƒ³æ³•ã€‚å¦‚æœè¿™æ˜¯æ­£ç¡®çš„ï¼Œç®€å•åœ°è®©è¢«è¯•å†™ N ä¸ªä¸ç›¸å…³çš„å•è¯ï¼Œç„¶åæµ‹é‡è¿™Nä¸ªè¯çš„è¯­ä¹‰è·ç¦»ï¼Œ ä½œä¸º #å‘æ•£æ€ç»´ çš„å®¢è§‚è¡¡é‡æ ‡å‡†</strong>ã€‚ä¸ºäº†éªŒè¯è¿™ä¸€å‡è®¾ï¼Œæˆ‘ä»¬è¦æ±‚ 8,914 åå‚ä¸è€…è¯´å‡º 10 ä¸ªå½¼æ­¤å°½å¯èƒ½ä¸åŒçš„å•è¯ã€‚</p>
<p>ç„¶åè®¡ç®—ç®—æ³•ä¼°è®¡å•è¯ä¹‹é—´çš„å¹³å‡è¯­ä¹‰è·ç¦»ï¼›<strong>ç›¸å…³è¯ï¼ˆä¾‹å¦‚ cat å’Œ dogï¼‰æ¯”ä¸ç›¸å…³è¯ï¼ˆä¾‹å¦‚ cat å’Œ thimbleï¼‰çš„è·ç¦»æ›´çŸ­ã€‚æˆ‘ä»¬é¢„æµ‹ï¼Œäº§ç”Ÿæ›´å¤§è¯­ä¹‰è·ç¦»çš„äººä¹Ÿä¼šåœ¨ä¼ ç»Ÿçš„åˆ›é€ åŠ›æµ‹é‡ä¸­å¾—åˆ†æ›´é«˜</strong>ã€‚</p>
<p>åœ¨ç ”ç©¶ 1 ä¸­ï¼Œæˆ‘ä»¬å‘ç°è¯­ä¹‰è·ç¦»ä¸ä¸¤ä¸ªå¹¿æ³›ä½¿ç”¨çš„åˆ›é€ åŠ›æµ‹é‡ï¼ˆæ›¿ä»£ç”¨é€”ä»»åŠ¡å’Œæ¡¥æ¥å…³è”å·®è·ä»»åŠ¡ï¼‰ä¹‹é—´å­˜åœ¨ä¸­åº¦è‡³å¼ºç›¸å…³æ€§ã€‚åœ¨ç ”ç©¶ 2 ä¸­ï¼Œå‚ä¸è€…æ¥è‡ª 98 ä¸ªå›½å®¶ï¼Œè¯­ä¹‰è·ç¦»ä»…å› åŸºæœ¬äººå£å˜é‡è€Œç•¥æœ‰ä¸åŒã€‚åœ¨ä¸€ç³»åˆ—å·²çŸ¥å¯é¢„æµ‹åˆ›é€ åŠ›çš„é—®é¢˜ä¸Šï¼Œè¯­ä¹‰è·ç¦»ä¸è¡¨ç°ä¹‹é—´ä¹Ÿå­˜åœ¨æ­£ç›¸å…³å…³ç³»ã€‚</p>
<p>æ€»ä½“è€Œè¨€ï¼Œ <strong>è¯­ä¹‰è·ç¦»</strong> ä¸å·²å»ºç«‹çš„ åˆ›é€ åŠ›æµ‹é‡ çš„ç›¸å…³æ€§è‡³å°‘ä¸è¿™äº›æµ‹é‡å½¼æ­¤ä¹‹é—´çš„ç›¸å…³æ€§ä¸€æ ·å¼ºã€‚ å› æ­¤ï¼Œåœ¨æˆ‘ä»¬æ‰€è¯´çš„å‘æ•£å…³è”ä»»åŠ¡ä¸­å‘½åä¸ç›¸å…³çš„è¯å¯ä»¥ä½œä¸ºå‘æ•£æ€ç»´çš„ç®€çŸ­ã€å¯é å’Œå®¢è§‚çš„è¡¡é‡æ ‡å‡†ã€‚</p>
<br>
<h2 id="äºŒåˆ›æ–°åŠ›ç†è®º">äºŒã€åˆ›æ–°åŠ›ç†è®º</h2>
<p>æƒ³å‡º 3 ä¸ªå°½å¯èƒ½ä¸åŒçš„è¯ã€‚æ ¹æ®ä¸¤ç§ä¸»è¦çš„åˆ›é€ åŠ›ç†è®º (1, 2)ï¼Œé€‰æ‹©è¿™äº›è¯ä¾èµ–äºäº§ç”Ÿ #è¿œç¨‹è”æƒ³ ï¼ŒåŒæ—¶æŠ‘åˆ¶ #å¸¸è§è”æƒ³ ã€‚</p>
<p>#è”æƒ³ç†è®º (Associative Theory)è®¤ä¸ºï¼Œæœ‰åˆ›é€ åŠ›çš„äººå…·æœ‰è¯­ä¹‰è®°å¿†ç»“æ„ï¼Œå¯ä»¥æ›´å®¹æ˜“åœ°é“¾æ¥è¿œç¨‹å…ƒç´  (3-6)ã€‚</p>
<p>#æ‰§è¡Œç†è®º (Executive Theory) ä¾§é‡äºè‡ªä¸Šè€Œä¸‹çš„æ³¨æ„åŠ›æ§åˆ¶ï¼›åˆ›é€ æ€§çš„è§£å†³æ–¹æ¡ˆæ¥è‡ªäºç›‘æµ‹å’ŒæŠ‘åˆ¶å…±åŒçš„è”æƒ³ (2, 7)ã€‚</p>
<p>åŸºäºè¿™äº›ç†è®ºï¼Œæˆ‘ä»¬å‡è®¾ <strong>å¡«å†™nä¸ªæ— å…³å•è¯çš„ä»»åŠ¡</strong> å¯ä»¥å¯é åœ°è¡¡é‡ #è¯­è¨€åˆ›é€ åŠ› ã€‚ <strong>åˆ›é€ åŠ›æœ‰ä¸¤ä¸ªä¸»è¦çš„å¿ƒç†æˆåˆ†ï¼Œ æ”¶æ•›æ€ç»´å’Œå‘æ•£æ€ç»´ï¼Œå®ƒä»¬åœ¨äº§ç”Ÿåˆ›æ„è¾“å‡ºæ—¶ååŒå·¥ä½œ</strong>ã€‚æ”¶æ•›æ€§æ€ç»´ä»»åŠ¡è¡¡é‡è¯„ä¼°å¤šç§åˆºæ¿€å¹¶å¾—å‡ºæœ€é€‚å½“å“åº”çš„èƒ½åŠ›ï¼Œä¾‹å¦‚é—®é¢˜çš„æœ€ä½³è§£å†³æ–¹æ¡ˆ (3, 8-10)ã€‚è¿™äº›ä»»åŠ¡å¾€å¾€æ›´å®¹æ˜“å¾—åˆ†ï¼Œå› ä¸ºåªæœ‰ä¸€å°éƒ¨åˆ†æ­£ç¡®ç­”æ¡ˆã€‚<strong>ç›¸æ¯”ä¹‹ä¸‹ï¼Œå‘æ•£æ€ç»´ä»»åŠ¡é€šå¸¸ä½¿ç”¨å¼€æ”¾å¼é—®é¢˜æ¥è¡¡é‡ä¸€ä¸ªäººäº§ç”Ÿå„ç§è§£å†³æ–¹æ¡ˆçš„èƒ½åŠ›</strong> (11-13)ã€‚å®ƒä»¬é€šå¸¸éœ€è¦æ›´é•¿çš„å›ç­”(æ–‡æœ¬)ï¼Œå› æ­¤æ›´éš¾å®¢è§‚è¯„åˆ†ã€‚</p>
<br>
<h2 id="ä¸‰åˆ›æ–°åŠ›æµ‹é‡">ä¸‰ã€åˆ›æ–°åŠ›æµ‹é‡</h2>
<h3 id="31--æ›¿ä»£ç”¨é€”ä»»åŠ¡">3.1  æ›¿ä»£ç”¨é€”ä»»åŠ¡</h3>
<p>æœ€å¸¸è§çš„å‘æ•£æ€ç»´æµ‹é‡æ˜¯ <strong>æ›¿ä»£ç”¨é€”ä»»åŠ¡</strong> Alternative Uses Task (14, 15)ï¼Œåœ¨è¯¥ä»»åŠ¡ä¸­ï¼Œå‚ä¸è€…ç”Ÿæˆå¸¸è§ç‰©ä½“çš„ç”¨é€”ï¼Œä¾‹å¦‚å›å½¢é’ˆæˆ–é‹å­ã€‚ä½¿ç”¨å¸¸ç”¨çš„è¯„åˆ†æ–¹æ³• (16)ï¼Œè¯„åˆ†è€…ç„¶åæ ¹æ®ä¸‰ä¸ªç»„æˆéƒ¨åˆ†æ¥åˆ¤æ–­å›ç­”ï¼š</p>
<ul>
<li>çµæ´»æ€§ï¼Œäº§ç”Ÿçš„ä¸åŒç”¨é€”ç±»åˆ«çš„æ•°é‡ï¼›</li>
<li>ç‹¬åˆ›æ€§ï¼Œæ¯æ¬¡ä½¿ç”¨ç›¸å¯¹äºæ ·æœ¬çš„å…¶ä½™éƒ¨åˆ†çš„ç¨€æœ‰ç¨‹åº¦ï¼Œè¿™å¯¹åˆ›é€ åŠ›ç‰¹åˆ«é‡è¦ï¼ˆ17ã€18ï¼‰ï¼›å’Œ</li>
<li>æµç•…åº¦ï¼Œä¸€å…±äº§ç”Ÿäº†å¤šå°‘æ¬¡ä½¿ç”¨ã€‚</li>
</ul>
<br>
<h3 id="32-ç¦»æ•£è”ç³»ä»»åŠ¡">3.2 ç¦»æ•£è”ç³»ä»»åŠ¡</h3>
<p>æœ¬ç ”ç©¶ä½œè€…å¼€å‘äº† <strong>ç¦»æ•£è”ç³»ä»»åŠ¡</strong> (Divergent Association Taskï¼Œ DAT) çš„ç½‘ç«™ï¼Œ <strong>å¡«å†™ä½ æƒ³åˆ°çš„10ä¸ªä¸ç›¸å…³è¯è¯­ï¼Œ åˆ›é€ åŠ›è¶Šä¸°å¯Œçš„äººï¼Œå¡«å†™çš„è¯è¯­è¯­ä¹‰è·ç¦»å¾€å¾€ä¼šæ›´è¿œ</strong>ã€‚</p>
<p><a href="https://www.datcreativity.com/">https://www.datcreativity.com/</a></p>
<p><img loading="lazy" src="img/1_pnas_divergent_association_task_mainpage.png" alt=""  />
</p>
<h3 id="è¢«è¯•å¡«å†™10ä¸ªå•è¯çš„è§„åˆ™">è¢«è¯•å¡«å†™10ä¸ªå•è¯çš„è§„åˆ™</h3>
<ol>
<li>åªèƒ½å¡«å†™è‹±æ–‡å•è¯</li>
<li>åªèƒ½æ˜¯åè¯(å¦‚äº‹æƒ…ã€ç‰©ä½“ã€æ¦‚å¿µ)</li>
<li>ä¸èƒ½å¡« ä¸“æœ‰åè¯ï¼ˆä¾‹å¦‚ï¼Œç‰¹å®šçš„äººæˆ–åœ°ç‚¹ï¼‰</li>
<li>ä¸èƒ½å¡«å†™ ä¸“ä¸šè¯ï¼ˆæ¯”å¦‚æŠ€æœ¯è¯ï¼‰</li>
<li>è‡ªå·±æ€è€ƒè¿™äº›è¯ï¼Œä¸è¦åªçœ‹å‘¨å›´ç¯å¢ƒçš„ç‰©ä½“ã€‚</li>
</ol>
<h3 id="datç®—æ³•å®ç°">DATç®—æ³•å®ç°</h3>
<ol>
<li>ä½¿ç”¨Gloveé¢„è®­ç»ƒæ¨¡å‹</li>
<li>é€‰å‰7ä¸ªè¯(ä¸€å…±10ä¸ªè¯)ï¼Œ å­˜åœ¨ 21ä¸ªè¯å¯¹ï¼ˆç»„åˆï¼‰</li>
<li>å¯¹21è¯å¯¹ï¼Œ åˆ†åˆ«è®¡ç®—è¯å‘é‡çš„ä½™å¼¦è·ç¦»ï¼Œåˆ†åˆ«ä¹˜ä»¥100ã€‚æœ€ç»ˆæ±‚å‡å€¼å¾—åˆ°DATå¾—åˆ†ã€‚</li>
</ol>
<blockquote>
<p>ä¸‹å›¾æ˜¯å¤§é‚“ç¬¬äºŒæ¬¡å¡«å†™å¾—åˆ°çš„DATå¾—åˆ†ï¼Œç¬¬ä¸€æ¬¡åªè¶…è¿‡äº†6%çš„äººï¼Œè¿™æ–¹æ³•ç¬¬ä¸€æ¬¡å‡†ï¼Œå†æµ‹å°±çŸ¥é“å¦‚ä½•æé«˜DATå¾—åˆ†ã€‚</p>
</blockquote>
<p><img loading="lazy" src="img/2_pnas_divergent_association_task_result.png" alt=""  />
</p>
<p>DATå¾—åˆ†èŒƒå›´0-200ï¼Œ å¾—åˆ†ä¸º0å¯èƒ½æ˜¯7ä¸ªæœ‰æ•ˆè¯ä¹‹é—´è¯­ä¹‰ç›¸åŒï¼Œè€Œå¾—åˆ†200å¯èƒ½æ˜¯æœ‰æ•ˆè¯ä¹‹é—´å½¼æ­¤è¯­ä¹‰å®Œå…¨ä¸ç›¸åŒã€‚å®è·µä¸­ï¼Œå¾—åˆ†å¤§å¤šå¤„äº65~90ä¹‹é—´ï¼Œä¸”å¾ˆå°‘è¶…è¿‡100ã€‚</p>
<p><img loading="lazy" src="img/pnas_dat_score_low_median_high.jpg" alt=""  />
</p>
<blockquote>
<p>è¯åµŒå…¥æŠ€æœ¯å¯ä»¥æŠŠæ¯ä¸ªè¯è½¬åŒ–ä¸ºç­‰é•¿çš„å‘é‡ï¼Œè€Œä¸åŒè¯è¯­å…±å¤„äºç›¸åŒçš„è¯­ä¹‰ç©ºé—´ä¸­ã€‚å¸¸è§çš„è¯åµŒå…¥æŠ€æœ¯æœ‰word2vecã€Gloveã€flastTextç­‰ï¼Œå› ä¸ºæœ€è¿‘æœ‰å­¦è€…åœ¨ <strong>æ›¿ä»£ç”¨é€”ä»»åŠ¡</strong>(Alternative Uses Taskï¼‰ä¸­ç”¨è¿‡Gloveç®—æ³•ï¼Œæœ¬æ–‡é‡‡ç”¨Gloveç®—æ³•ã€‚æœ¬ç ”ç©¶ä½¿ç”¨çš„Gloveé¢„è®­ç»ƒæ¨¡å‹æ¥è‡ªCommon Crawl Corpusé¡¹ç›®ï¼Œè¯¥é¡¹ç›®æ‹¥æœ‰æ•°åäº¿ç½‘é¡µæ–‡æœ¬æ•°æ®ã€‚</p>
<p>ä¸ºäº†æä¾›å†—ä½™ï¼Œ åªé‡‡ç”¨ è¢«è¯•è€… å¡«å†™çš„å‰7ä¸ªè¯ä½œä¸ºæœ‰æ•ˆå•è¯(DATçš„è¢«è¯•éœ€è¦å¡«å†™10ä¸ªè¯)ã€‚DATå¾—åˆ†æ˜¯è¿™äº›è¯ä¹‹é—´çš„è¯­ä¹‰è·ç¦»çš„å¹³å‡å€¼ï¼Œå…·ä½“è®¡ç®—æ–¹æ³•ï¼Œ 7ä¸ªè¯ä¸¤ä¸¤ç›¸å…³çš„ç»„åˆæœ‰ 42ç§ç»„åˆï¼Œ é€‰æ‹©å…¶ä¸­æœ€æœ‰å¯èƒ½çš„ 21 ä¸ªè¯­ä¹‰ç»„åˆã€‚</p>
</blockquote>
<br>
<h2 id="å››å®éªŒ">å››ã€å®éªŒ</h2>
<p>è¿™ç§å‘æ•£æ€ç»´çš„æ“ä½œåŒ–æ˜¯åŸºäºåˆ›é€ åŠ›çš„è”æƒ³å’Œæ‰§è¡Œæ§åˆ¶ç†è®ºã€‚ æ›´é«˜çš„åˆ†æ•°å°†æ˜¾ç¤ºå‡ºæ›´å¤§çš„èƒ½åŠ›æ¥åˆ©ç”¨æ›´è¿œç¨‹çš„å…³è” (3-5) æˆ–æŠ‘åˆ¶è¿‡åº¦ç›¸å…³çš„å…³è” (2, 7)ã€‚</p>
<p>åœ¨ç ”ç©¶ 1 ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å°† DAT ä¸å…¶ä»–ä¸¤ç§åˆ›é€ åŠ›æµ‹é‡æ–¹æ³•è¿›è¡Œæ¯”è¾ƒæ¥æ£€éªŒè¿™ä¸€å‡è®¾ï¼šæ›¿ä»£ç”¨é€”ä»»åŠ¡ (15) å’Œæ¡¥æ¥å…³è”å·®è·ä»»åŠ¡ (36)ã€‚
<img loading="lazy" src="img/pnas_dat_aut_algo_valid_num.jpg" alt=""  />
</p>
<p>åœ¨ç ”ç©¶ 2 ä¸­ï¼Œæˆ‘ä»¬æµ‹è¯•äº†è¿™äº›åˆ†æ•°å¦‚ä½•éšäººå£ç»Ÿè®¡è€Œå˜åŒ–ï¼Œä»¥åŠå®ƒä»¬æ˜¯å¦ä¸æ›´å¤§æ•°æ®é›†ä¸­ä¸å‘æ•£æ€§æ€ç»´ç›¸å…³çš„å…¶ä»–æµ‹é‡å€¼ç›¸å…³ (9, 37)ã€‚ è¿™äº›ç ”ç©¶è¯„ä¼°äº†è¯­ä¹‰è·ç¦»æ˜¯å¦å¯ä»¥ä½œä¸ºå‘æ•£æ€ç»´çš„å¯é æŒ‡æ ‡ã€‚
<img loading="lazy" src="img/pnas_dat_gender_age.jpg" alt=""  />
</p>
<br>
<h2 id="äº”è®¨è®º">äº”ã€è®¨è®º</h2>
<p>ç ”ç©¶ç»“æœè¡¨é¢ï¼Œ è®©è¢«è¯•ç®€å•çš„å¡«å†™10ä¸ªä¸æƒ³ç®¡å•è¯çš„ä»»åŠ¡å¯ä»¥ä½œä¸º æµ‹é‡å‘æ•£æ€ç»´ çš„å¯é è¡¡é‡æ ‡å‡†ã€‚åœ¨ç ”ç©¶ä¸­ï¼Œ å°†è¿™é¡¹ä»»åŠ¡çš„è¡¨ç°ä¸å·²æœ‰çš„ä¸¤ç§åˆ›é€ åŠ›é‡è¡¨åšäº†æ¯”è¾ƒï¼Œå…·æœ‰å¾ˆé«˜çš„ç›¸å…³æ€§ã€‚</p>
<p>æ€»ä½“è€Œè¨€æ”¯æŒäº†è¯­ä¹‰å‘æ•£æ€§ï¼Œå°½ç®¡è¿™ç§è”ç³»èƒŒåçš„ç¡®åˆ‡æœºåˆ¶å°šä¸æ¸…æ¥šï¼Œä½†åœ¨åˆ›æ–°åŠ›æœ€ä¸»è¦çš„ä¸¤ä¸ªç†è®ºï¼Œå³è”æƒ³ç†è®ºæˆ–æ‰§è¡Œç†è®º çš„è”ç³»ç½‘ç»œä¸­è¡¡é‡ç½‘ç»œçš„èŒƒå›´æˆ–æ•ˆç‡ã€‚</p>
<p><strong>DATç®—æ³•è¡¨ç°ç¨³å®šï¼Œæ–¹å·®ä¸éšäººå£ç»Ÿè®¡ç‰¹å¾å˜åŒ–å‡ºç°æ˜¾è‘—æ€§å˜åŒ–ï¼ˆç ”ç©¶2ï¼‰ï¼Œå¯ä»¥åœ¨è·¨å¹´é¾„ã€è·¨æ€§åˆ«çš„æƒ…å†µä¸‹åº”ç”¨</strong>ã€‚</p>
<br>
<h3 id="51-datçš„ä¼˜ç‚¹">5.1 DATçš„ä¼˜ç‚¹</h3>
<ul>
<li>æ“ä½œç®€å•ï¼Œå¿«æ·ï¼Œå®¢è§‚ï¼ŒèŠ‚çº¦äº†å¤§é‡çš„äººåŠ›æ—¶é—´ï¼Œåˆèƒ½ä¿è¯å®¢è§‚æ€§ã€‚</li>
<li>å¾—åˆ†ç»å¯¹ï¼Œå¯æ¯”è¾ƒï¼Œå¯ä»¥ç”¨äºæµ‹é‡ä¸åŒç¾¤ä½“(ç§æ—ã€æ–‡åŒ–ã€æ€§åˆ«ã€å¹´é¾„)çš„åˆ›é€ åŠ›å¾—åˆ†ã€‚</li>
<li>å¯¹è¢«è¯•å‹å¥½ï¼Œä¸€èˆ¬ä¸€ä¸¤åˆ†é’Ÿå³å¯å®Œæˆã€‚</li>
</ul>
<h3 id="52-datçš„ä¸è¶³">5.2 DATçš„ä¸è¶³</h3>
<ul>
<li>åˆ›é€ åŠ›æœ‰å‘æ•£æ€§å’Œæ‰§è¡ŒåŠ›ï¼Œå‘æ•£æ€§è´Ÿè´£æœé€‰æ‰€æœ‰æ–¹æ¡ˆé›†åˆçš„è§„æ¨¡ï¼Œè€Œæ‰§è¡ŒåŠ›æ˜¯ä»æ–¹æ¡ˆé›†ä¸­é€‰å‡ºæœ€ä¼˜æ–¹æ¡ˆå¹¶å°†å…¶æ‰§è¡Œã€‚DATæµ‹é‡çš„ä»…ä»…æ˜¯å‘æ•£æ€§æ€ç»´ã€‚</li>
<li>è¢«è¯•å¯èƒ½é€šè¿‡å¡«å†™ç¨€å¥‡çš„è¯è¯­æé«˜DATå¾—åˆ†ã€‚</li>
<li>åªæœ‰çŸ­çŸ­å‡ åˆ†é’Ÿï¼Œè¢«è¯•å¯èƒ½å¾ˆéš¾çŸ­æ—¶é—´å†…äº†è§£å®éªŒè§„åˆ™ã€‚</li>
</ul>
<h3 id="53-æœªæ¥å±•æœ›">5.3 æœªæ¥å±•æœ›</h3>
<p>DATå¾—åˆ†å–å†³äºGloveæ¨¡å‹ã€è¯­æ–™åº“(æ•°æ®é›†), æ›´æ–°è¯æ¨¡å‹æˆ–è¯­æ–™åº“ï¼Œè¢«è¯•çš„DATå¾—åˆ†ä¼šå‘ç”Ÿå˜åŒ–ã€‚ä¸ºç®€å•èµ·è§ï¼Œæœ¬ç ”ç©¶ä½¿ç”¨å…è´¹çš„é¢„è®­ç»ƒæ¨¡å‹ï¼Œ é€šè¿‡ä¸€äº›åŠªåŠ›ï¼Œæœªæ¥ç ”ç©¶è€…å¯ä»¥å¯¹ä¸åŒæ—¶æœŸï¼Œä¸åŒå›½å®¶çš„è¯­æ–™åº“æ¥è®­ç»ƒGloveæ¨¡å‹ã€‚éšç€ç‰¹å®šå•è¯å…³è”æˆ–å¤šæˆ–å°‘çš„è”ç³»ï¼Œ æ›´æ–°çš„æ¨¡å‹å°†ä¼šè‡ªåŠ¨è€ƒè™‘è¿™äº›å˜åŒ–ï¼Œè¿™å°†å…è®¸DATå¾—åˆ†è·¨è¶Šæ–‡åŒ–è·¨è¶Šæ—¶ä»£ï¼Œè¿›è¡Œåˆ›æ–°åŠ›çš„æ¯”è¾ƒã€‚</p>
<p><br><br></p>
<h2 id="ä»£ç ">ä»£ç </h2>
<p>ä»£ç çš„æ–‡æ¡£è¯´æ˜è¯·ç‚¹å‡» githubä»“åº“åœ°å€ <a href="https://github.com/jayolson/divergent-association-task">https://github.com/jayolson/divergent-association-task</a> æŸ¥çœ‹ã€‚è¿™é‡Œä»…ç²˜è´´ä½œè€…æºä»£ç ï¼Œæºä»£ç éœ€è¦é…ç½®å¥½æ‰å¯è¿è¡Œã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">dat</span>

<span class="c1">## ä» https://nlp.stanford.edu/projects/glove/ ä¸‹è½½Gloveæ¨¡å‹</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">dat</span><span class="o">.</span><span class="n">Model</span><span class="p">(</span><span class="s2">&#34;glove.840B.300d.txt&#34;</span><span class="p">,</span> <span class="s2">&#34;words.txt&#34;</span><span class="p">)</span>

<span class="c1"># éªŒè¯è¯è¯­ï¼Œå¦‚è¾“å…¥çš„æ˜¯è¯ç»„ï¼Œä»£ç ä¼šå°†å…¶è½¬ä¸ºè¿çº¿å½¢å¼çš„å•è¯</span>
<span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="s2">&#34;cul de sac&#34;</span><span class="p">))</span> 
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">cul-de-sac
</code></pre></div><br>
<p>è®¡ç®—ä¸¤ä¸ªè¯è¯­ä¹‹é—´çš„è¯­ä¹‰è·ç¦»</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="s2">&#34;cat&#34;</span><span class="p">,</span> <span class="s2">&#34;dog&#34;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="s2">&#34;cat&#34;</span><span class="p">,</span> <span class="s2">&#34;thimble&#34;</span><span class="p">))</span> 
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">0.1983
0.8787
</code></pre></div><br>
<p>è®¡ç®—è¯å¯¹çš„DATå¾—åˆ†ï¼ˆè¯­ä¹‰cosineè·ç¦»*100ï¼‰</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">dat</span><span class="p">([</span><span class="s2">&#34;cat&#34;</span><span class="p">,</span> <span class="s2">&#34;dog&#34;</span><span class="p">],</span> <span class="mi">2</span><span class="p">))</span> 
<span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">dat</span><span class="p">([</span><span class="s2">&#34;cat&#34;</span><span class="p">,</span> <span class="s2">&#34;thimble&#34;</span><span class="p">],</span> <span class="mi">2</span><span class="p">))</span> 
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">19.83
87.87
</code></pre></div><br>
<p>å‡è®¾æœ‰ä¸‰ä¸ªäººåˆ†åˆ«éƒ½å¡«å†™10ä¸ªè¯ï¼Œé€‰å…¶å‰7ä¸ªè¯ä½œä¸ºæœ‰æ•ˆè¯ã€‚æœ‰æ•ˆè¯å¦‚ä¸‹ï¼Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">low</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;arm&#34;</span><span class="p">,</span> <span class="s2">&#34;eyes&#34;</span><span class="p">,</span> <span class="s2">&#34;feet&#34;</span><span class="p">,</span> <span class="s2">&#34;hand&#34;</span><span class="p">,</span> <span class="s2">&#34;head&#34;</span><span class="p">,</span> <span class="s2">&#34;leg&#34;</span><span class="p">,</span> <span class="s2">&#34;body&#34;</span><span class="p">]</span>
<span class="n">average</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;bag&#34;</span><span class="p">,</span> <span class="s2">&#34;bee&#34;</span><span class="p">,</span> <span class="s2">&#34;burger&#34;</span><span class="p">,</span> <span class="s2">&#34;feast&#34;</span><span class="p">,</span> <span class="s2">&#34;office&#34;</span><span class="p">,</span> <span class="s2">&#34;shoes&#34;</span><span class="p">,</span> <span class="s2">&#34;tree&#34;</span><span class="p">]</span>
<span class="n">high</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;hippo&#34;</span><span class="p">,</span> <span class="s2">&#34;jumper&#34;</span><span class="p">,</span> <span class="s2">&#34;machinery&#34;</span><span class="p">,</span> <span class="s2">&#34;prickle&#34;</span><span class="p">,</span> <span class="s2">&#34;tickets&#34;</span><span class="p">,</span> <span class="s2">&#34;tomato&#34;</span><span class="p">,</span> <span class="s2">&#34;violin&#34;</span><span class="p">]</span>

<span class="c1"># Compute the DAT score (transformed average cosine distance of first 7 valid words)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">dat</span><span class="p">(</span><span class="n">low</span><span class="p">))</span> <span class="c1"># 50</span>
<span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">dat</span><span class="p">(</span><span class="n">average</span><span class="p">))</span> <span class="c1"># 78</span>
<span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">dat</span><span class="p">(</span><span class="n">high</span><span class="p">))</span> <span class="c1"># 95</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">50
78
95
</code></pre></div><p>éœ€è¦æ³¨æ„pnasä½œè€…å…¬å¼€çš„ä»£ç åªèƒ½ç”¨åœ¨è‹±æ–‡ï¼Œä¸”æ— æ³•è‡ªå·±è®­ç»ƒGloveæ¨¡å‹ã€‚å¦‚æœæƒ³åŸºäºè‡ªæœ‰æ•°æ®é›†ï¼ˆä¸­æ–‡ã€è‹±æ–‡ï¼‰ï¼Œè®­ç»ƒè‡ªæœ‰Gloveæ¨¡å‹ï¼Œéœ€è¦å­¦ä¹ </p>
<ul>
<li>å¦‚ä½•è®­ç»ƒGloveæ¨¡å‹</li>
<li>å¦‚ä½•å¯¼å…¥è®­ç»ƒå¥½çš„Gloveæ¨¡å‹</li>
<li>å¦‚ä½•è®¡ç®—ä¸­è‹±æ–‡datå¾—åˆ†</li>
</ul>
<p>ç›¸å…³çŸ¥è¯†ç‚¹å·²æ›´æ–°è‡³æˆ‘çš„å½•æ’­è¯¾è¯¾ç¨‹ <a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></p>
<p><br><br></p>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>é­”æ­ | ä¸­æ–‡AIæ¨¡å‹å¼€æºç¤¾åŒº</title>
      <link>https://hidadeng.github.io/blog/2022-11-09-chinese-modelscope-open-source/</link>
      <pubDate>Wed, 09 Nov 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-11-09-chinese-modelscope-open-source/</guid>
      <description>ModelScopeç¤¾åŒºæˆç«‹äº2022 å¹´6æœˆï¼Œæ˜¯ä¸€ä¸ªæ¨¡å‹å¼€æºç¤¾åŒºåŠåˆ›æ–°å¹³å°ï¼Œç”±é˜¿é‡Œå·´å·´è¾¾æ‘©é™¢ï¼Œè”åˆCCFå¼€æºå‘å±•å§”å‘˜ä¼šï¼Œå…±åŒä½œä¸ºé¡¹ç›®å‘èµ·æ–¹ã€‚ç¤¾åŒºè”åˆå›½å†…AIé¢†åŸŸåˆä½œä¼™ä¼´ä¸é«˜æ ¡æœºæ„ï¼Œè‡´åŠ›äºé€šè¿‡å¼€æ”¾çš„ç¤¾åŒºåˆä½œï¼Œæ„å»ºæ·±åº¦å­¦ä¹ ç›¸å…³çš„æ¨¡å‹å¼€æºï¼Œå¹¶å¼€æºç›¸å…³æ¨¡å‹æœåŠ¡åˆ›æ–°æŠ€æœ¯ï¼Œæ¨åŠ¨æ¨¡å‹åº”ç”¨ç”Ÿæ€çš„ç¹è£å‘å±•ã€‚</description>
      <content:encoded><![CDATA[<h2 id="å…³äºmodelscope">å…³äºModelScope</h2>
<p>ModelScopeç¤¾åŒºæˆç«‹äº 2022 å¹´ 6 æœˆï¼Œæ˜¯ä¸€ä¸ªæ¨¡å‹å¼€æºç¤¾åŒºåŠåˆ›æ–°å¹³å°ï¼Œç”±é˜¿é‡Œå·´å·´è¾¾æ‘©é™¢ï¼Œè”åˆCCFå¼€æºå‘å±•å§”å‘˜ä¼šï¼Œå…±åŒä½œä¸ºé¡¹ç›®å‘èµ·æ–¹ã€‚</p>
<blockquote>
<p>ç¤¾åŒºè”åˆå›½å†…AIé¢†åŸŸåˆä½œä¼™ä¼´ä¸é«˜æ ¡æœºæ„ï¼Œè‡´åŠ›äºé€šè¿‡å¼€æ”¾çš„ç¤¾åŒºåˆä½œï¼Œæ„å»ºæ·±åº¦å­¦ä¹ ç›¸å…³çš„æ¨¡å‹å¼€æºï¼Œå¹¶å¼€æºç›¸å…³æ¨¡å‹æœåŠ¡åˆ›æ–°æŠ€æœ¯ï¼Œæ¨åŠ¨æ¨¡å‹åº”ç”¨ç”Ÿæ€çš„ç¹è£å‘å±•ã€‚</p>
</blockquote>
<p>æœŸå¾…ModelScopeä¼šæœ‰ä¸ä¸€æ ·çš„è¡¨ç°ã€‚</p>
<p>ä¸ModelScopeç±»ä¼¼çš„ç½‘ç«™æœ‰</p>
<ul>
<li>å›½é™… huggingfaceæ˜¯è¾ƒæ—©å°†AIæ¨¡å‹å¼€æºçš„ç½‘ç«™ï¼Œç”¨æˆ·ç¾¤ä½“åºå¤§ï¼Œç¤¾åŒºå†…æœ‰ä¸°å¯Œçš„æ•°æ®é›†ã€æ¨¡å‹ï¼Œæ–‡æ¡£è¯¦å®ã€‚</li>
<li>å›½å†… ç™¾åº¦é£æ¡¨æ˜¯å›½å†…AIæ¨¡å‹å¼€æºè¾ƒå¥½çš„ç½‘ç«™ï¼Œç”¨æˆ·ç¾¤ä½“è¾ƒå¤§ï¼Œæ›´æ–°æ´»è·ƒï¼Œä½†æ˜¯æ–‡æ¡£è´¨é‡ã€‚ã€‚ã€‚</li>
</ul>
<p>ç›®å‰ModelScopeåˆšåˆšä¸Šçº¿ä¸ä¹…ï¼Œæ¨¡å‹å’Œæ•°æ®é›†éƒ½ä¸æ€ä¹ˆå¤š</p>
<p><img loading="lazy" src="img/model_scope_homepage.png" alt=""  />
</p>
<br>
<h2 id="heading"></h2>
<h1 id="åè¯è§£é‡Š"><strong>åè¯è§£é‡Š</strong></h1>
<p>ModelScopeå¹³å°æ˜¯ä»¥æ¨¡å‹ä¸ºä¸­å¿ƒçš„æ¨¡å‹å¼€æºç¤¾åŒºï¼Œä¸æ¨¡å‹çš„ä½¿ç”¨ç›¸å…³ï¼Œæ‚¨éœ€è¦å…ˆäº†è§£å¦‚ä¸‹æ¦‚å¿µã€‚</p>
<table>
<thead>
<tr>
<th><strong>åŸºç¡€æ¦‚å¿µ</strong></th>
<th><strong>å®šä¹‰</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>ä»»åŠ¡</td>
<td>ä»»åŠ¡ï¼ˆTaskï¼‰æŒ‡æŸä¸€é¢†åŸŸå…·ä½“çš„åº”ç”¨ï¼Œä»¥ç”¨äºå®Œæˆç‰¹å®šåœºæ™¯çš„ä»»åŠ¡ã€‚ä¾‹å¦‚å›¾åƒåˆ†ç±»ã€æ–‡æœ¬ç”Ÿæˆã€è¯­éŸ³è¯†åˆ«ç­‰ï¼Œæ‚¨å¯æ ¹æ®ä»»åŠ¡çš„è¾“å…¥è¾“å‡ºæ‰¾åˆ°é€‚åˆæ‚¨çš„åº”ç”¨åœºæ™¯çš„ä»»åŠ¡ç±»å‹ï¼Œé€šè¿‡ä»»åŠ¡çš„ç­›é€‰æ¥æŸ¥æ‰¾æ‚¨æ‰€éœ€çš„æ¨¡å‹ã€‚</td>
</tr>
<tr>
<td>æ¨¡å‹</td>
<td>æ¨¡å‹ï¼ˆModelï¼‰æ˜¯æŒ‡ä¸€ä¸ªå…·ä½“çš„æ¨¡å‹å®ä¾‹ï¼ŒåŒ…æ‹¬æ¨¡å‹ç½‘ç»œç»“æ„å’Œç›¸åº”å‚æ•°ã€‚ModelScopeå¹³å°æä¾›ä¸°å¯Œçš„æ¨¡å‹ä¿¡æ¯ä¾›ç”¨æˆ·ä½“éªŒä¸ä½¿ç”¨ã€‚</td>
</tr>
<tr>
<td>æ¨¡å‹åº“</td>
<td>æ¨¡å‹åº“ï¼ˆModelhubï¼‰æ˜¯æŒ‡å¯¹æ¨¡å‹è¿›è¡Œå­˜å‚¨ã€ç‰ˆæœ¬ç®¡ç†å’Œç›¸å…³æ“ä½œçš„æ¨¡å‹æœåŠ¡ï¼Œç”¨æˆ·ä¸Šä¼ å’Œå…±äº«çš„æ¨¡å‹å°†å­˜å‚¨è‡³ModelScopeçš„æ¨¡å‹åº“ä¸­ï¼ŒåŒæ—¶ç”¨æˆ·ä¹Ÿå¯åœ¨Model hubä¸­åˆ›å»ºå±äºè‡ªå·±çš„æ¨¡å‹å­˜å‚¨åº“ï¼Œå¹¶æ²¿ç”¨å¹³å°æä¾›çš„æ¨¡å‹åº“ç®¡ç†åŠŸèƒ½è¿›è¡Œæ¨¡å‹ç®¡ç†ã€‚</td>
</tr>
<tr>
<td>æ•°æ®é›†</td>
<td>æ•°æ®é›†ï¼ˆDatasetï¼‰æ˜¯æ–¹ä¾¿å…±äº«åŠè®¿é—®çš„æ•°æ®é›†åˆï¼Œå¯ç”¨äºç®—æ³•è®­ç»ƒã€æµ‹è¯•ã€éªŒè¯ï¼Œé€šå¸¸ä»¥è¡¨æ ¼å½¢å¼å‡ºç°ã€‚æŒ‰ç…§æ¨¡æ€å¯åˆ’åˆ†ä¸ºæ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ã€å¤šæ¨¡æ€ç­‰ã€‚</td>
</tr>
<tr>
<td>æ•°æ®é›†åº“</td>
<td>æ•°æ®é›†åº“ï¼ˆDatasethubï¼‰ç”¨äºé›†ä¸­ç®¡ç†æ•°æ®ï¼Œæ”¯æŒæ¨¡å‹è¿›è¡Œè®­ç»ƒã€é¢„æµ‹ç­‰ï¼Œä½¿å„ç±»å‹æ•°æ®å…·å¤‡æ˜“è®¿é—®ã€æ˜“ç®¡ç†ã€æ˜“å…±äº«çš„ç‰¹ç‚¹ã€‚</td>
</tr>
<tr>
<td>ModelScope Library</td>
<td>ModelScope Libraryæ˜¯ModelScopeå¹³å°è‡ªç ”çš„ä¸€å¥—Python Libraryæ¡†æ¶ï¼Œé€šè¿‡è°ƒç”¨ç‰¹å®šçš„æ–¹æ³•ï¼Œç”¨æˆ·å¯ä»¥åªå†™çŸ­çŸ­çš„å‡ è¡Œä»£ç ï¼Œå°±å¯ä»¥å®Œæˆæ¨¡å‹çš„æ¨ç†ã€è®­ç»ƒå’Œè¯„ä¼°ç­‰ä»»åŠ¡ï¼Œä¹Ÿå¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šå¿«é€Ÿè¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œå®ç°è‡ªå·±çš„åˆ›æ–°æƒ³æ³•ã€‚</td>
</tr>
</tbody>
</table>
<br>
<h2 id="ä¸€æ¨¡å‹æ¢ç´¢">ä¸€ã€æ¨¡å‹æ¢ç´¢</h2>
<p>é¦–å…ˆè®¿é—®å¹³å°ç½‘å€https://www.modelscope.cn/modelsï¼Œ æ‚¨å°†çœ‹è§å¹³å°ä¸Šå·²æœ‰çš„æ‰€æœ‰å…¬å¼€æ¨¡å‹ï¼Œæ ¹æ®ä»»åŠ¡ç­›é€‰æˆ–è€…å…³é”®è¯æœç´¢å¯æŸ¥æ‰¾æ‚¨æ„Ÿå…´è¶£çš„æ¨¡å‹ã€‚</p>
<p><img loading="lazy" src="img/1-model_explore.png" alt=""  />
</p>
<br>
<h2 id="äºŒç¯å¢ƒå‡†å¤‡">äºŒã€ç¯å¢ƒå‡†å¤‡</h2>
<h3 id="21-æœ¬åœ°å¼€å‘ç¯å¢ƒ">2.1 æœ¬åœ°å¼€å‘ç¯å¢ƒ</h3>
<p>å¦‚æœæ‚¨éœ€è¦åœ¨æœ¬åœ°è¿è¡Œæ¨¡å‹ï¼Œéœ€è¦è¿›è¡Œç›¸åº”çš„ç¯å¢ƒå®‰è£…å‡†å¤‡ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>å®‰è£…pythonç¯å¢ƒ</strong>ã€‚æ”¯æŒpython3ï¼Œä¸æ”¯æŒpython2ï¼Œå»ºè®®3.7ç‰ˆæœ¬åŠä»¥ä¸Šã€‚æˆ‘ä»¬æ¨èæ‚¨ä½¿ç”¨Anacondaè¿›è¡Œå®‰è£…ã€‚</li>
<li><strong>å®‰è£…æ·±åº¦å­¦ä¹ æ¡†æ¶</strong>ã€‚ModelScope Libraryç›®å‰æ”¯æŒTensorflowï¼ŒPytorchä¸¤å¤§æ·±åº¦å­¦ä¹ æ¡†æ¶è¿›è¡Œæ¨¡å‹è®­ç»ƒã€æ¨ç†ã€‚æ‚¨å¯æ ¹æ®æ¨¡å‹æ‰€éœ€çš„æ¡†æ¶é€‰æ‹©é€‚åˆçš„æ¡†æ¶è¿›è¡Œå®‰è£…ã€‚</li>
<li><strong>å®‰è£…ModelScope Library</strong>ã€‚æˆ‘ä»¬æä¾›ä¸¤ç§å®‰è£…æ–¹å¼ï¼Œæ‚¨å¯é€‰æ‹©é€‚åˆçš„æ–¹å¼è¿›è¡Œå®‰è£…ã€‚
<ul>
<li>pipå®‰è£…ã€‚ModelScopeæä¾›äº†æ ¹æ®ä¸åŒé¢†åŸŸçš„å®‰è£…åŒ…ï¼Œæ‚¨å¯æ ¹æ®å¯¹åº”çš„æ¨¡å‹é€‰æ‹©æ‰€éœ€çš„å®‰è£…åŒ…ã€‚</li>
<li>ä½¿ç”¨æºç å®‰è£…ã€‚</li>
<li>æ›´å®Œæ•´çš„å®‰è£…ä¿¡æ¯å‚è€ƒï¼šç¯å¢ƒå®‰è£…æŒ‡å—ã€‚</li>
</ul>
</li>
</ul>
<h3 id="22-åœ¨çº¿notebook">2.2 åœ¨çº¿Notebook</h3>
<p>è‹¥æ‚¨è§‰å¾—æœ¬åœ°å®‰è£…è¾ƒä¸ºå¤æ‚ï¼Œ ModelScopeå¹³å°ä¹Ÿæä¾›åœ¨çº¿çš„è¿è¡Œç¯å¢ƒï¼Œæ‚¨å¯ç›´æ¥åœ¨Notebookä¸­è¿è¡Œï¼ŒNotebookä¸­æä¾›å®˜æ–¹é•œåƒæ— éœ€è‡ªä¸»è¿›è¡Œç¯å¢ƒå®‰è£…ï¼Œæ›´åŠ æ–¹ä¾¿å¿«æ·ï¼Œæ¨èå¤§å®¶ä½¿ç”¨ï¼</p>
<p>æ³¨æ„ï¼šè¯¥åŠŸèƒ½éœ€è¦æ‚¨ç™»å½•åä½¿ç”¨ï¼Œæ–°ç”¨æˆ·æ³¨å†ŒModelScopeè´¦å·å¹¶å®Œæˆé˜¿é‡Œäº‘è´¦å·ç»‘å®šåå³å¯è·å¾—å…è´¹ç®—åŠ›èµ„æºï¼Œè¯¦æƒ…è¯·å‚é˜…å…è´¹é¢åº¦è¯´æ˜ ã€‚</p>
<p><img loading="lazy" src="img/model_scode_free_online_notebook.png" alt=""  />
</p>
<p><img loading="lazy" src="img/model_scode_free_online_notebook-2.png" alt=""  />
</p>
<br>
<h2 id="ä¸‰2åˆ†é’Ÿè·‘é€šæ¨¡å‹æ¨ç†">ä¸‰ã€2åˆ†é’Ÿè·‘é€šæ¨¡å‹æ¨ç†</h2>
<p>è‹¥æ‚¨å‡†å¤‡å¥½æœ¬åœ°ç¯å¢ƒæˆ–è€…å·²ç»æ‰“å¼€ä¸€ä¸ªNotebookçš„é¢„è£…ç¯å¢ƒå®ä¾‹ï¼Œåˆ™æ ¹æ®ä¸‹è¿°ä»£ç å¯å¯¹è¯¥æ¨¡å‹è¿›è¡Œæ¨ç†ã€‚ ä½¿ç”¨modelscope pipelineæ¥å£åªéœ€è¦ä¸¤æ­¥ï¼ŒåŒæ ·ä»¥ä¸Šè¿°ä¸­æ–‡åˆ†è¯æ¨¡å‹ï¼ˆdamo/nlp_structbert_word-segmentation_chinese-baseï¼‰ä¸ºä¾‹ç®€å•è¯´æ˜ï¼š</p>
<p>é¦–å…ˆæ ¹æ®taskå®ä¾‹åŒ–ä¸€ä¸ªpipelineå¯¹è±¡</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">modelscope.pipelines</span> <span class="kn">import</span> <span class="n">pipeline</span>
<span class="n">word_segmentation</span> <span class="o">=</span> <span class="n">pipeline</span><span class="p">(</span><span class="s1">&#39;word-segmentation&#39;</span><span class="p">,</span><span class="n">model</span><span class="o">=</span><span class="s1">&#39;damo/nlp_structbert_word-segmentation_chinese-base&#39;</span><span class="p">)</span>
</code></pre></div><p>è¾“å…¥æ•°æ®ï¼Œæ‹¿åˆ°ç»“æœ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">input_str</span> <span class="o">=</span> <span class="s1">&#39;ä»Šå¤©å¤©æ°”ä¸é”™ï¼Œé€‚åˆå‡ºå»æ¸¸ç©&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">word_segmentation</span><span class="p">(</span><span class="n">input_str</span><span class="p">))</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">{&#39;output&#39;: &#39;ä»Šå¤© å¤©æ°” ä¸é”™ ï¼Œ é€‚åˆ å‡ºå» æ¸¸ç©&#39;}
</code></pre></div><br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>gdownåº“ |  ä»googleDriverä¸‹è½½å¤§ä½“ç§¯æ–‡ä»¶</title>
      <link>https://hidadeng.github.io/blog/2022-10-31-gdown-googledriver/</link>
      <pubDate>Mon, 31 Oct 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-10-31-gdown-googledriver/</guid>
      <description>å¦‚ä½•ä½¿ç”¨pythonä¸‹è½½googledriverå†…çš„å¤§å°ºå¯¸æ–‡ä»¶</description>
      <content:encoded><![CDATA[<p>ç†Ÿæ‚‰ITçš„åŒå­¦çŸ¥é“ï¼Œä¸‹è½½å·¥å…·æœ‰curlå’Œwgetã€‚ä½†æ˜¯è¿™ç±»å·¥å…·å¾ˆéš¾æˆåŠŸä¸‹è½½å¤§ä½“ç§¯çš„æ–‡ä»¶ï¼Œä»Šå¤©åˆ†äº«çš„gdownå¯ä»¥å¸®æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä¸è¿‡ä½¿ç”¨è¯¥å·¥å…·çš„å…¶é‚£é¢˜æ˜¯ï¼Œ ç”µè„‘å¯ä»¥ç§‘å­¦åœ°ä¸Šç½‘ã€‚</p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip3 install gdown
</code></pre></div><br>
<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>
<p>gdownå®‰è£…åæœ‰ä¸¤ç§ä½¿ç”¨æ–¹æ³•</p>
<ul>
<li>å‘½ä»¤è¡Œæ¨¡å¼</li>
<li>ä»£ç æ¨¡å¼</li>
</ul>
<br>
<h3 id="å‘½ä»¤è¡Œæ¨¡å¼">å‘½ä»¤è¡Œæ¨¡å¼</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ gdown --help
usage: gdown [-h] [-V] [-O OUTPUT] [-q] [--fuzzy] [--id] [--proxy PROXY]
             [--speed SPEED] [--no-cookies] [--no-check-certificate]
             [--continue] [--folder] [--remaining-ok]
             url_or_id
...

$ # å¤§æ–‡ä»¶ (~500MB)
$ gdown https://drive.google.com/uc?id=1l_5RK28JRL19wpT22B-DY9We3TVXnnQQ
$ md5sum fcn8s_from_caffe.npz
256c2a8235c1c65e62e48d3284fbd384
</code></pre></div><br>
<h3 id="ä»£ç æ¨¡å¼">ä»£ç æ¨¡å¼</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">gdown</span>

<span class="c1"># ä¸‹è½½ ç½‘ç›˜æ–‡ä»¶</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">&#34;https://drive.google.com/uc?id=1l_5RK28JRL19wpT22B-DY9We3TVXnnQQ&#34;</span>
<span class="n">output</span> <span class="o">=</span> <span class="s2">&#34;fcn8s_from_caffe.npz&#34;</span>
<span class="n">gdown</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># ä½¿ç”¨æ–‡ä»¶IDä½œä¸ºæ–‡ä»¶å</span>
<span class="nb">id</span> <span class="o">=</span> <span class="s2">&#34;0B9P1L--7Wd2vNm9zMTJWOGxobkU&#34;</span>
<span class="n">gdown</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="n">output</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># same as the above, and you can copy-and-paste a URL from Google Drive with fuzzy=True</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">&#34;https://drive.google.com/file/d/0B9P1L--7Wd2vNm9zMTJWOGxobkU/view?usp=sharing&#34;</span>
<span class="n">gdown</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="n">output</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fuzzy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="c1"># ä¸‹è½½ ç½‘ç›˜æ–‡ä»¶å¤¹</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">&#34;https://drive.google.com/drive/folders/15uNXeRBIhVvZJIhL4yTw4IsStMhUaaxl&#34;</span>
<span class="n">gdown</span><span class="o">.</span><span class="n">download_folder</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">use_cookies</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># ä½¿ç”¨æ–‡ä»¶å¤¹IDä½œä¸ºæ–‡ä»¶å¤¹å</span>
<span class="nb">id</span> <span class="o">=</span> <span class="s2">&#34;15uNXeRBIhVvZJIhL4yTw4IsStMhUaaxl&#34;</span>
<span class="n">gdown</span><span class="o">.</span><span class="n">download_folder</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">use_cookies</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div><br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Rè¯­è¨€ | ä½¿ç”¨word2vecè¯å‘é‡æ¨¡å‹</title>
      <link>https://hidadeng.github.io/blog/2022-10-12-r-word2vec/</link>
      <pubDate>Wed, 12 Oct 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-10-12-r-word2vec/</guid>
      <description>Rè¯­è¨€è®­ç»ƒå’Œä½¿ç”¨è¯å‘é‡word2vecæ¨¡å‹</description>
      <content:encoded><![CDATA[


<p>Pythonçš„gensimåº“å¯ä»¥è®­ç»ƒå’Œä½¿ç”¨word2vecæ¨¡å‹ï¼ŒRè¯­è¨€ä¸­ä¹Ÿæœ‰ä¸ä¹‹å¯¹åº”çš„<code>word2vecåŒ…</code>ã€‚word2vecæ˜¯è¯åµŒå…¥æŠ€æœ¯ä¸­æœ€å¸¸ç”¨çš„ä¸€ç§æŠ€æœ¯ï¼Œå¦‚æœå¯¹è¯åµŒå…¥ä¸å¤ªäº†è§£ï¼Œå¯ä»¥é˜…è¯»å‰æ–‡</p>
<ul>
<li><a href="https://textdata.cn/blog/wordembeddingsinsocialscience/">è½¬è½½ | å¤§æ•°æ®æ—¶ä»£ä¸‹ç¤¾ä¼šç§‘å­¦ç ”ç©¶æ–¹æ³•çš„æ‹“å±•â€”â€”åŸºäºè¯åµŒå…¥æŠ€æœ¯çš„æ–‡æœ¬åˆ†æçš„åº”ç”¨</a></li>
<li><a href="https://textdata.cn/blog/from_sysbol_to_embeddings_in_computational_social_science/">è½¬è½½ | ä»ç¬¦å·åˆ°åµŒå…¥ï¼šè®¡ç®—ç¤¾ä¼šç§‘å­¦çš„ä¸¤ç§æ–‡æœ¬è¡¨ç¤º</a></li>
</ul>
<p>æœ¬æ–‡éœ€è¦çš„RåŒ…</p>
<pre><code>install.packages(c(&quot;word2vec&quot;, &quot;jiebaR&quot;, &quot;tidyverse&quot;, &quot;readtext&quot;))</code></pre>
<p><br></p>
<div id="word2vecåŒ…å¸¸ç”¨å‡½æ•°" class="section level2">
<h2>word2vecåŒ…å¸¸ç”¨å‡½æ•°</h2>
<ul>
<li>word2vec ä½¿ç”¨æ–‡æœ¬æ•°æ®è®­ç»ƒword2vecæ¨¡å‹</li>
<li>as.matrix è·å–è¯å‘é‡</li>
<li>doc2vec è·å–æ–‡æ¡£å‘é‡</li>
<li>predict è·å–</li>
<li>write.word2vec ä¿å­˜word2vecæ¨¡å‹è‡³æ–‡ä»¶</li>
<li>read.word2vec è¯»å–word2vecæ¨¡å‹æ–‡ä»¶</li>
</ul>
<p><br></p>
</div>
<div id="å‡†å¤‡æ•°æ®" class="section level2">
<h2>å‡†å¤‡æ•°æ®</h2>
<p>åŸå§‹æ•°æ®æ˜¯ä»ç½‘ç«™ä¸‹è½½çš„ <code>ä¸‰ä½“.txt</code>, æœªåˆ†è¯å¤„ç†ï¼Œç°åœ¨éœ€è¦</p>
<ol style="list-style-type: decimal">
<li>è¯»ä¸­æ–‡å–txtæ•°æ®</li>
<li>ä¿ç•™æ ‡ç‚¹ç¬¦å·ï¼Œè¿›è¡Œåˆ†è¯å¤„ç†</li>
<li>åˆ†è¯ç»“æœé‡æ–°æ•´ç†ä¸ºç±»ä¼¼è‹±æ–‡(ç©ºæ ¼é—´éš”è¯è¯­çš„å½¢å¼)å­—ç¬¦ä¸²</li>
<li>ç»“æœå­˜å…¥æ–°çš„txt</li>
</ol>
<pre class="r"><code>library(jiebaR)
library(tidyverse)
library(word2vec)


#å¯¼å…¥æ•°æ®
tri_body &lt;- readtext::readtext(&#39;data/ä¸‰ä½“.txt&#39;)$text 

#åˆ†è¯ï¼ˆä¿ç•™æ ‡ç‚¹ç¬¦å·ï¼‰
tokenizer &lt;- worker(symbol=T)
tri_words &lt;- segment(tri_body, tokenizer)

# æ•´ç†ä¸ºè‹±æ–‡æ ¼å¼ï¼ˆè¯è¯­ä¹‹é—´åŠ ç©ºæ ¼ï¼‰
segmented_text &lt;- stringr::str_c(tri_words, collapse = &quot; &quot;) %&gt;% c()

#å†™å…¥txt
readr::write_file(segmented_text, file=&#39;data/santi.txt&#39;)</code></pre>
<p><br></p>
</div>
<div id="è®­ç»ƒword2vecæ¨¡å‹" class="section level2">
<h2>è®­ç»ƒword2vecæ¨¡å‹</h2>
<pre><code>word2vec(
  x,
  type = c(&quot;cbow&quot;, &quot;skip-gram&quot;),
  dim = 50,
  window = ifelse(type == &quot;cbow&quot;, 5L, 10L),
  iter = 5L,
  lr = 0.05,
  min_count = 5L,
  split = c(&quot; \n,.-!?:;/\&quot;#$%&amp;&#39;()*+&lt;=&gt;@[]\\^_`{|}~\t\v\f\r&quot;, &quot;.\n?!&quot;),
  stopwords = character(),
  threads = 1L,
  ...
)</code></pre>
<ul>
<li>x è‹±æ–‡æ–‡æœ¬æ•°æ®txtæ–‡ä»¶(ä¸­æ–‡æ•°æ®txtæ–‡ä»¶æ˜¯åˆ†è¯åçš„txtæ–‡ä»¶ï¼Œç©ºæ ¼é—´éš”è¯è¯­)</li>
<li>type è®­ç»ƒæ–¹å¼ï¼Œé»˜è®¤CBOW</li>
<li>dim è¯å‘é‡ç»´åº¦ï¼Œé»˜è®¤50ç»´</li>
<li>window è¯å‘é‡çª—å£ï¼Œé»˜è®¤5</li>
<li>iter è®­ç»ƒè¿­ä»£æ¬¡æ•°ï¼Œé»˜è®¤5</li>
<li>split åˆ†è¯ã€åˆ†å¥å¯¹åº”çš„åˆ†éš”ç¬¦ã€‚</li>
<li>lr å­¦ä¹ ç‡ï¼Œé»˜è®¤0.05</li>
<li>min_count è¯è¯­åœ¨è¯­æ–™ä¸­è‡³å°‘è¦å‡ºç°5æ¬¡(ä½äº5æ¬¡çš„è¯è¯­ï¼Œè®­ç»ƒå¥½çš„ç»“æœä¸­æ²¡æœ‰è¯¥è¯è¯­ï¼‰</li>
<li>stopwords åœç”¨è¯è¡¨ï¼Œé»˜è®¤ç©ºå­—ç¬¦é›†</li>
<li>threads å¹¶è¡ŒåŠ é€Ÿï¼Œcpuæ ¸æ•°ï¼Œé»˜è®¤1ã€‚ä¸ºäº†åŠ é€Ÿè®­ç»ƒè¿‡ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨ <code>parallel::detectCores()</code> è·å¾—æœ¬ç”µè„‘çš„æ ¸æ•°</li>
</ul>
<pre class="r"><code>#è®­ç»ƒ10ç»´çš„è¯å‘é‡æ¨¡å‹
model &lt;- word2vec(x = &#39;data/santi.txt&#39;, 
                  dim = 10,  
                  iter = 20, 
                  split = c(&quot; &quot;,  &quot;ã€‚ï¼Ÿï¼ï¼›&quot;),
                  threads = parallel::detectCores()) #å¹¶è¡Œï¼Œä½¿ç”¨cpuå¤šæ ¸åŠ é€Ÿ

emb &lt;- as.matrix(model)

#æ˜¾ç¤º6ä¸ªè¯
head(emb)</code></pre>
<pre><code>##             [,1]       [,2]        [,3]        [,4]      [,5]        [,6]
## ç…®   -1.02566934 -0.9271542 -0.42417252 -0.54280633 1.8847700  0.41640753
## æŠ¥   -0.83992052  1.9440031  0.09093992  0.83522910 1.7909089  0.72149992
## æ‚¬ç©º -0.06369513 -1.3519955 -2.13137460 -0.06198586 0.6096401  1.32933748
## ç•¥    1.74687469 -0.4278547 -0.33822438  1.08505321 2.0168977 -0.07693915
## ä¼   -0.68947995 -1.4147453 -1.95522511 -0.39963767 0.5269030  0.30352208
## çŸ³æŸ± -0.40561640 -1.3643234  0.30329546 -0.94012892 2.1579018  0.79654717
##            [,7]       [,8]       [,9]      [,10]
## ç…®   -1.1708908 -0.7624418 -0.6275516  1.2417521
## æŠ¥    0.5235919  0.8448864 -0.2960095 -0.0773837
## æ‚¬ç©º  0.1527163 -0.1337370 -0.1646384  1.1892601
## ç•¥   -0.3246748 -0.9813624  0.5045205  0.2771466
## ä¼    0.3166684 -1.4238008 -1.0167172 -0.0976937
## çŸ³æŸ±  0.2237919  0.6933151  0.7412233 -0.7918702</code></pre>
<p><br></p>
</div>
<div id="æŸ¥çœ‹æŸè¯çš„vector" class="section level2">
<h2>æŸ¥çœ‹æŸè¯çš„vector</h2>
<p>æŸ¥çœ‹è¯è¯­ <code>æ±ªæ·¼</code> çš„vector</p>
<pre class="r"><code>emb[&quot;æ±ªæ·¼&quot;,]</code></pre>
<pre><code>##  [1] -0.77559733 -0.90021265  0.66555792 -0.10277803  1.89924443 -0.88817298
##  [7] -1.32665634 -0.75938725 -0.09628224  1.18008399</code></pre>
<p>æŸ¥çœ‹è¯è¯­ <code>åœ°çƒ</code> çš„vector</p>
<pre class="r"><code>emb[&quot;åœ°çƒ&quot;,]</code></pre>
<pre><code>##  [1]  0.29645494 -0.61688840  0.91209215 -0.64530188  0.62816381 -0.72807491
##  [7]  0.50655973  2.38137436  1.19238114 -0.09610342</code></pre>
<p><br></p>
</div>
<div id="predict" class="section level2">
<h2>predict()</h2>
<p>æ‰¾åˆ°è¯­æ–™ä¸­ï¼Œè¯è¯­ <code>ç½—è¾‘</code> æœ€ç›¸ä¼¼çš„ 20ä¸ªè¯</p>
<pre class="r"><code>predict(model, &#39;ç½—è¾‘&#39;, type=&#39;nearest&#39;, top_n = 20)</code></pre>
<pre><code>## $ç½—è¾‘
##    term1    term2 similarity rank
## 1   ç½—è¾‘     èƒ¡æ–‡  0.9744400    1
## 2   ç½—è¾‘   ç”³ç‰è²  0.9678891    2
## 3   ç½—è¾‘   ç“¦å­£å§†  0.9550550    3
## 4   ç½—è¾‘ ç‹„å¥¥ä¼¦å¨œ  0.9518393    4
## 5   ç½—è¾‘     è“è¥¿  0.9472395    5
## 6   ç½—è¾‘     æŠ¤å£«  0.9471439    6
## 7   ç½—è¾‘   æ³•æ‰å…°  0.9458703    7
## 8   ç½—è¾‘   ç™½è‰¾æ€  0.9451101    8
## 9   ç½—è¾‘     åç‰¹  0.9396626    9
## 10  ç½—è¾‘     ç™½è“‰  0.9387447   10
## 11  ç½—è¾‘   å‚è°‹é•¿  0.9377206   11
## 12  ç½—è¾‘   å¼—é›·æ–¯  0.9369408   12
## 13  ç½—è¾‘   ç¬¬ä¸€çœ¼  0.9357565   13
## 14  ç½—è¾‘     çˆ¶äº²  0.9350463   14
## 15  ç½—è¾‘   å¤šå°‘æ¬¡  0.9314436   15
## 16  ç½—è¾‘     é—¨å»  0.9291503   16
## 17  ç½—è¾‘     ç»´å¾·  0.9267251   17
## 18  ç½—è¾‘     è¤èš  0.9203902   18
## 19  ç½—è¾‘       åˆš  0.9200501   19
## 20  ç½—è¾‘     å´å²³  0.9191605   20</code></pre>
<p>æŸ¥çœ‹å‡å€¼å‘é‡ï¼ˆå¤šä¸ªè¯å‘é‡ä¸­å¿ƒçš„ï¼‰çš„10ä¸ªè¿‘ä¹‰è¯</p>
<pre class="r"><code>vectors &lt;- emb[c(&quot;æ±ªæ·¼&quot;, &quot;ç½—è¾‘&quot;, &quot;å¶æ–‡æ´&quot;), ]
centroid_vector &lt;- colMeans(vectors)

predict(model, centroid_vector, type = &quot;nearest&quot;, top_n = 10)</code></pre>
<pre><code>##        term similarity rank
## 1      ç½—è¾‘  0.9185568    1
## 2  ç‹„å¥¥ä¼¦å¨œ  0.9104245    2
## 3      æ–‡æ´  0.9088279    3
## 4      æ±ªæ·¼  0.9054156    4
## 5    ç™½è‰¾æ€  0.9046930    5
## 6      å¼ ç¿”  0.9026827    6
## 7      å°´å°¬  0.8952187    7
## 8      åº„é¢œ  0.8952166    8
## 9      çš‡å¸  0.8949283    9
## 10     çˆ¶äº²  0.8915347   10</code></pre>
<p><br></p>
</div>
<div id="doc2vec" class="section level2">
<h2>doc2vec()</h2>
<ul>
<li>doc2vec(object, newdata, split = â€ â€œ)
<ul>
<li>object word2vecæ¨¡å‹å¯¹è±¡</li>
<li>newdata æ–‡æ¡£åˆ—è¡¨(ç”¨ç©ºæ ¼é—´éš”çš„å­—ç¬¦ä¸²åˆ—è¡¨)</li>
<li>split é»˜è®¤åˆ†éš”ç¬¦æ˜¯ç©ºæ ¼</li>
</ul></li>
</ul>
<p>å°†æ–‡æ¡£è½¬ä¸ºå‘é‡</p>
<pre class="r"><code>docs &lt;- c(&quot;å“¦ ï¼Œ å¯¹ä¸èµ· ï¼Œ æ±ª æ•™æˆ ã€‚ è¿™æ˜¯ æˆ‘ä»¬ å²å¼º é˜Ÿé•¿ ã€‚&quot;, 
          &quot; ä¸ä»ª åšå£« ï¼Œ æ‚¨ èƒ½å¦ æŠŠ æ¨å†¬ çš„ é—ä¹¦ ç»™ æ±ª æ•™æˆ çœ‹ ä¸€ä¸‹ ï¼Ÿ &quot;)

doc2vec(object=model, newdata = docs, split=&#39; &#39;)</code></pre>
<pre><code>##            [,1]       [,2]       [,3]     [,4]      [,5]       [,6]       [,7]
## [1,] -1.1769752 -0.1065619  0.1983950 1.734068 0.5478012 -0.8320528 -0.2387014
## [2,] -0.4827189  0.0664595 -0.2119484 1.895074 0.6729840 -0.3008853 -0.6857539
##            [,8]      [,9]      [,10]
## [1,] -0.5519856 -2.007002  0.4182127
## [2,] -0.5976922 -2.130454 -0.4653725</code></pre>
<p><br></p>
</div>
<div id="ä¿å­˜word2vecæ¨¡å‹" class="section level2">
<h2>ä¿å­˜word2vecæ¨¡å‹</h2>
<p>ä¿å­˜æ¨¡å‹ï¼Œä¸€èˆ¬æœ‰ä¸¤ä¸ªç›®çš„</p>
<ul>
<li>ä¸ºäº†åˆ†äº«word2vecæ¨¡å‹</li>
<li>é¿å…åå¤è®­ç»ƒæ¨¡å‹ï¼ŒèŠ‚çº¦æ•°æ®åˆ†ææ—¶é—´</li>
</ul>
<pre class="r"><code>word2vec::write.word2vec(x = model, 
                         #æ–°å»ºoutputæ–‡ä»¶å¤¹ï¼Œå°†æ¨¡å‹å­˜å…¥outputæ–‡ä»¶å¤¹å†…
                         file = &quot;output/santi_word2vec.bin&quot;)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p><br></p>
</div>
<div id="å¯¼å…¥é¢„è®­ç»ƒæ¨¡å‹" class="section level2">
<h2>å¯¼å…¥é¢„è®­ç»ƒæ¨¡å‹</h2>
<p>å¯¼å…¥ <code>output/santi_word2vec.bin</code> çš„é¢„è®­ç»ƒword2vecæ¨¡å‹</p>
<pre class="r"><code>pre_trained_model &lt;- word2vec::read.word2vec(file = &quot;output/santi_word2vec.bin&quot;)
pre_trained_emb &lt;- as.matrix(pre_trained_model)
head(pre_trained_emb)</code></pre>
<pre><code>##              [,1]       [,2]       [,3]       [,4]       [,5]        [,6]
## å›è¡   -1.9563367 -0.3099073 -1.2969902 -0.5719763  1.1507142 -0.05515177
## å¬è¯ä¼š  0.2756990  1.3702289 -1.3303705 -0.1827691  0.6622804 -1.92008448
## çº²é¢†    0.4495552  1.9311246 -0.5812275 -0.1470096 -0.2678985 -0.01694358
## å¾ˆäº®    0.3621844 -1.0048453  0.7036168 -2.0917876  0.6459805  1.18436253
## ç§’      1.9033701  1.6510324 -0.2616904  0.3671210  1.0618066  0.06588747
## æ°æ£®   -1.2904713 -1.2501229  0.3380587  0.8590797  1.6798494 -0.58775252
##              [,7]       [,8]       [,9]      [,10]
## å›è¡    1.1082711 -0.2064489 -0.9264346 -0.7816723
## å¬è¯ä¼š -1.0952694  0.6120903 -0.1326561  0.7252344
## çº²é¢†   -0.6097277  2.1051276 -0.2405726 -0.8808851
## å¾ˆäº®    0.1964065 -1.3926132 -0.4042619 -0.1645472
## ç§’     -0.8347995  0.2591044  0.3594093  1.1929117
## æ°æ£®    0.4941484 -1.1393189 -0.4687541  0.9951217</code></pre>
</div>
]]></content:encoded>
    </item>
    
    <item>
      <title>Maigretåº“ | æŸ¥è¯¢æŸç”¨æˆ·ååœ¨å„å¹³å°ç½‘ç«™çš„ä½¿ç”¨æƒ…å†µ</title>
      <link>https://hidadeng.github.io/blog/2022-10-08-find-sns-account-information-with-maigret/</link>
      <pubDate>Sat, 08 Oct 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-10-08-find-sns-account-information-with-maigret/</guid>
      <description>Maigret èƒ½æ£€æŸ¥å„ç½‘ç«™(åº”ç”¨) æŸ **ç”¨æˆ·å** æ˜¯å¦æ³¨å†Œï¼Œå¹¶ä»ç½‘é¡µæ”¶é›†æ‰€æœ‰å¯ç”¨ä¿¡æ¯,  è¿è¡Œè¿‡ç¨‹ä¸éœ€è¦ API å¯†é’¥ã€‚ç›®å‰æ”¯æŒè¶…è¿‡ 2500 ä¸ªç«™ç‚¹æ£€ç´¢ï¼ˆå®Œæ•´åˆ—è¡¨ï¼‰ï¼Œé»˜è®¤é’ˆå¯¹ 500 ä¸ªçƒ­é—¨ç«™ç‚¹æŒ‰å—æ¬¢è¿ç¨‹åº¦é™åºå¯åŠ¨æœç´¢ã€‚</description>
      <content:encoded><![CDATA[<p>Maigret èƒ½æ£€æŸ¥å„ç½‘ç«™(åº”ç”¨) æŸ <strong>ç”¨æˆ·å</strong> æ˜¯å¦æ³¨å†Œï¼Œå¹¶ä»ç½‘é¡µæ”¶é›†æ‰€æœ‰å¯ç”¨ä¿¡æ¯,  è¿è¡Œè¿‡ç¨‹ä¸éœ€è¦ API å¯†é’¥ã€‚ç›®å‰æ”¯æŒè¶…è¿‡ 2500 ä¸ªç«™ç‚¹æ£€ç´¢ï¼ˆå®Œæ•´åˆ—è¡¨ï¼‰ï¼Œé»˜è®¤é’ˆå¯¹ 500 ä¸ªçƒ­é—¨ç«™ç‚¹æŒ‰å—æ¬¢è¿ç¨‹åº¦é™åºå¯åŠ¨æœç´¢ã€‚</p>
<br>
<h2 id="ä¸»è¦åŠŸèƒ½">ä¸»è¦åŠŸèƒ½</h2>
<ul>
<li>ä¸ªäººèµ„æ–™é¡µé¢è§£æ</li>
<li>ä¸ªäººä¿¡æ¯æå–</li>
<li>å…¶ä»–ä¸ªäººèµ„æ–™é“¾æ¥ç­‰ã€‚</li>
<li>é€šè¿‡æ–°ç”¨æˆ·åå’Œæ‰¾åˆ°çš„å…¶ä»– id è¿›è¡Œé€’å½’æœç´¢</li>
<li>æŒ‰æ ‡ç­¾æœç´¢ï¼ˆç½‘ç«™ç±»åˆ«ã€å›½å®¶/åœ°åŒºï¼‰</li>
</ul>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<p>å‘½ä»¤è¡Œä¸­å®‰è£…maigretåŒ…</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip3 install maigret
</code></pre></div><br>
<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>
<p>æˆ‘è‡ªå·±æœ‰ä¸ªè´¦å·åæ˜¯hidadengï¼Œå°±ç”¨hidadengè¯•è¯•ã€‚</p>
<p>ä¸ºäº†è§£ç”¨æˆ·åhidadengä½¿ç”¨æƒ…å†µï¼ŒæŠ¥å‘Šç»“æœå­˜å‚¨äºhtmlå’Œpdfã€‚ åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">maigret hidadeng --html --pdf
</code></pre></div><p>å‘½ä»¤è¡Œè¿è¡Œè¿‡ç¨‹</p>
<p><img loading="lazy" src="img/hidadeng-cmd.png" alt=""  />
</p>
<br>
<h2 id="æŠ¥å‘Š">æŠ¥å‘Š</h2>
<p>maigretæŸ¥è¯¢ç”¨æˆ·åhidadengçš„ä½¿ç”¨æƒ…å†µã€å…´è¶£ç­‰ç»“æœå¯ä»¥ç»˜åˆ¶æˆæŠ¥å‘Šã€‚</p>
<p><a href="report_hidadeng_plain.html">ç‚¹å‡»æŸ¥çœ‹hidadengæŠ¥å‘Š</a></p>
<p><img loading="lazy" src="img/hidadeng-report-1.png" alt=""  />
</p>
<p><img loading="lazy" src="img/hidadeng-report-2.png" alt=""  />
</p>
<p>æ•ˆæœæŒºå‡†çš„ï¼Œå¯¹hidadengè¿™ä¸ªç”¨æˆ·å…´è¶£(codingã€shopping)æ‹¿æçš„ä¹ŸæŒºä¸é”™ã€‚</p>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Rè¯­è¨€ | ä½¿ç”¨shinyçš„reactiveè¡¨è¾¾å¼å†™åº”ç”¨ç¨‹åº</title>
      <link>https://hidadeng.github.io/blog/2022-10-07-r-shiny-reactive/</link>
      <pubDate>Fri, 07 Oct 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-10-07-r-shiny-reactive/</guid>
      <description>ä½¿ç”¨shinyçš„reactiveè¡¨è¾¾å¼å†™åº”ç”¨ç¨‹åº</description>
      <content:encoded><![CDATA[<blockquote>
<p>ä½œè€…: çŒ«å“¥</p>
<p>æ³¢æ©å¤§å­¦ç»æµå­¦ä¸“ä¸šï¼Œ è®¡é‡ç»æµå­¦æ–¹å‘</p>
</blockquote>
<p>åœ¨ä¹‹å‰çš„æ¨æ–‡ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•åœ¨Rè¯­è¨€ä¸­ï¼Œç”¨ShinyåŒ…ç¼–å†™åº”ç”¨ç¨‹åºAppã€‚åœ¨è¿™ç¯‡æ¨æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†è¦ä»‹ç»ShinyåŒ…ä¸­ä¸€ç±»ç‹¬ç‰¹ä¸”é‡è¦çš„è¡¨è¾¾å¼ï¼šreactive expressionsã€‚</p>
<p>åœ¨è®¾è®¡Appæ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›Appèƒ½å¤Ÿæœ‰è¾ƒå¿«çš„å“åº”é€Ÿåº¦ã€‚ä½†æ˜¯ï¼Œå¦‚æœAppçš„serverå‡½æ•°ä¸­åŒ…å«å¾ˆå¤šè€—æ—¶è¾ƒé•¿çš„è¿ç®—ï¼Œé‚£ä¹ˆåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæ­¤æ—¶ï¼Œå°±éœ€è¦ç”¨åˆ°Reactiveè¡¨è¾¾å¼ã€‚å®ƒèƒ½å¤Ÿæ§åˆ¶ç¨‹åºä¸­å“ªäº›éƒ¨åˆ†éœ€è¦æ›´æ–°è¿ç®—ï¼Œè€Œå“ªäº›éƒ¨åˆ†ä¸éœ€è¦æ›´æ–°ï¼Œä»è€ŒèŠ‚çœè¿ç®—æ—¶é—´ã€‚</p>
<br>
<h2 id="æ¡ˆä¾‹stockvis">æ¡ˆä¾‹ï¼šstockVis</h2>
<p>æ­¤å¤„ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¥è®²è§£reactiveè¡¨è¾¾å¼ã€‚ä¸‹å›¾æ˜¯stockVisçš„Appç•Œé¢ï¼Œè¿™ä¸ªAppèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·æç»˜ç›¸åº”è‚¡ç¥¨çš„ä»·æ ¼å˜åŠ¨ã€‚æ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥æ ¹æ®<a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson6/">æ­¤å¤„</a>çš„æç¤ºä¸‹è½½è¯¥Appã€‚</p>
<p><img loading="lazy" src="img/%e5%9b%be1.png" alt=""  />
</p>
<p>æ ¹æ®ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œç”¨æˆ·éœ€è¦é¦–å…ˆé€‰æ‹©è‚¡ç¥¨ï¼ˆSymbolï¼‰ï¼Œç„¶åé€‰æ‹©è§‚å¯Ÿæ—¶æœŸ(Data range)ï¼Œå†é€‰æ‹©ç»˜åˆ¶åŸè‚¡ç¥¨ä»·æ ¼è¿˜æ˜¯å¯¹æ•°åŒ–åçš„è‚¡ç¥¨ä»·æ ¼ï¼Œæœ€åå†é€‰æ‹©æ˜¯å¦è‚¡ä»·ä¸­çš„é€šèƒ€è¿›è¡ŒçŸ«æ­£ã€‚</p>
<p>åœ¨å¯¹è¿™äº›é€‰é¡¹è¿›è¡Œäº†é€‰æ‹©ä¹‹åï¼ŒstockVisé¦–å…ˆç”¨<code>getSymbols</code>å‡½æ•°ä»è¯¸å¦‚<a href="https://consent.yahoo.com/v2/collectConsent?sessionId=3_cc-session_b4231433-d1e7-4b31-8341-a7d413ea7922">Yahoo finance</a>å’Œ<a href="https://fred.stlouisfed.org">Federal Reserve Bank of St. Louis</a>è¿™æ ·çš„ç½‘ç«™ä¸­ä¸‹è½½é‡‘èæ•°æ®åˆ°Rï¼Œç„¶åå†ç”¨<code>chartSeries</code>å°†è‚¡ä»·æç»˜å‡ºæ¥ã€‚</p>
<p>serverå‡½æ•°ä¸­ï¼Œç”¨æ¥ç”Ÿæˆå›¾å½¢çš„ç¨‹åºå¦‚ä¸‹ã€‚åœ¨åˆ†æäº†è¯¥ç¨‹åºä¹‹åï¼Œæˆ‘ä»¬ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ã€‚æ¯”å¦‚ï¼Œå½“æˆ‘ä»¬é‡æ–°é€‰ä¸­â€œPlot y axis on the log scaleâ€ï¼Œé‚£ä¹ˆ<code>input$log</code>çš„å€¼å°±ä¼šå˜åŒ–ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´æ•´ä¸ª<code>renderPlot</code>é‡æ–°è¿›è¡Œè¿ç®—ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="n">output</span><span class="o">$</span><span class="n">plot</span> <span class="o">&lt;-</span> <span class="nf">renderPlot</span><span class="p">({</span>
  <span class="n">data</span> <span class="o">&lt;-</span> <span class="nf">getSymbols</span><span class="p">(</span><span class="n">input</span><span class="o">$</span><span class="n">symb</span><span class="p">,</span> <span class="n">src</span> <span class="o">=</span> <span class="s">&#34;yahoo&#34;</span><span class="p">,</span>
                     <span class="n">from</span> <span class="o">=</span> <span class="n">input</span><span class="o">$</span><span class="n">dates[1]</span><span class="p">,</span>
                     <span class="n">to</span> <span class="o">=</span> <span class="n">input</span><span class="o">$</span><span class="n">dates[2]</span><span class="p">,</span>
                     <span class="n">auto.assign</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>

  <span class="nf">chartSeries</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">theme</span> <span class="o">=</span> <span class="nf">chartTheme</span><span class="p">(</span><span class="s">&#34;white&#34;</span><span class="p">),</span>
              <span class="n">type</span> <span class="o">=</span> <span class="s">&#34;line&#34;</span><span class="p">,</span> <span class="n">log.scale</span> <span class="o">=</span> <span class="n">input</span><span class="o">$</span><span class="n">log</span><span class="p">,</span> <span class="n">TA</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div><p>è€Œ<code>renderPlot</code>æ¯æ¬¡é‡æ–°è¿ç®—æ—¶ï¼Œé¦–å…ˆä¼šé‡æ–°ç”¨<code>getSymbols</code>æŠ“å»æ•°æ®ï¼Œç„¶åç”¨<code>chartSeries</code>é‡æ–°ç”»å›¾ã€‚ç„¶è€Œï¼Œç”¨<code>getSymbols</code>ä»Yahooç­‰ç½‘ç«™æŠ“å–æ•°æ®æ‰€èŠ±è´¹çš„æ—¶é—´å¹¶ä¸æ˜¯å¯ä»¥å¿½ç•¥ä¸è®¡çš„ã€‚å¦å¤–ï¼Œå¦‚æœæŠ“å–çš„è¿‡äºé¢‘ç¹ï¼Œæˆ‘ä»¬çš„IPåœ°å€ä¼šè¢«å±è”½ï¼Œè¿™æ˜¯ç½‘ç«™å°†æˆ‘ä»¬é”™åˆ¤ä¸ºæœºå™¨äººï¼Œä¹Ÿæ˜¯ç½‘ç«™åº”å¯¹çˆ¬è™«çš„å¸¸ç”¨åšæ³•ã€‚æœ€å…³é”®çš„æ˜¯ï¼Œå½“æˆ‘ä»¬åªæ˜¯é‡æ–°é€‰æ‹©â€œPlot y axis on the log scaleâ€ï¼Œæˆ‘ä»¬å¹¶ä¸å¸Œæœ›é‡æ–°æŠ“å–æ•°æ®ï¼Œè€Œæ˜¯å¸Œæœ›åœ¨åŸæœ‰æ•°æ®çš„åŸºç¡€ä¸Šå¯¹æ•°åŒ–å³å¯ã€‚</p>
<br>
<h2 id="reactiveè¡¨è¾¾å¼">Reactiveè¡¨è¾¾å¼</h2>
<p>åœ¨é‡åˆ°ä¸Šè¿°é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°reactiveè¡¨è¾¾å¼ã€‚reactiveè¡¨è¾¾å¼ä»¥uiå‡½æ•°é‡Œå„ç§inputå˜é‡ä½œä¸ºè¾“å…¥ã€‚å¦‚ä¸‹ï¼Œreactiveè¡¨è¾¾å¼çš„è¾“å…¥åˆ™æ˜¯<code>input$symb</code>å’Œ<code>input$dates</code>ã€‚å½“<code>input$symb</code>å’Œ<code>input$dates</code>çš„å€¼å˜åŒ–æ—¶ï¼Œæ­¤å¤„reactiveè¡¨è¾¾å¼çš„è¾“å‡ºç»“æœæ‰ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè€Œä¸å—<code>input$log</code>çš„å½±å“ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="n">dataInput</span> <span class="o">&lt;-</span> <span class="nf">reactive</span><span class="p">({</span>
  <span class="nf">getSymbols</span><span class="p">(</span><span class="n">input</span><span class="o">$</span><span class="n">symb</span><span class="p">,</span> <span class="n">src</span> <span class="o">=</span> <span class="s">&#34;yahoo&#34;</span><span class="p">,</span>
    <span class="n">from</span> <span class="o">=</span> <span class="n">input</span><span class="o">$</span><span class="n">dates[1]</span><span class="p">,</span>
    <span class="n">to</span> <span class="o">=</span> <span class="n">input</span><span class="o">$</span><span class="n">dates[2]</span><span class="p">,</span>
    <span class="n">auto.assign</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬ç°åœ¨ç”¨ä¸Šé¢çš„reactiveè¡¨è¾¾å¼æ›´æ–°åŸå…ˆçš„ç¨‹åºï¼Œå¾—åˆ°å¦‚ä¸‹ç¨‹åºã€‚<code>dataInput()</code>å‘½ä»¤åˆ™æ˜¯è¿è¡Œå¦‚ä¸Šçš„reactiveè¡¨è¾¾å¼ã€‚æ­¤æ—¶ï¼Œå¦‚æœæˆ‘ä»¬åªé‡æ–°é€‰æ‹©&quot;Plot y axis on the log scale&quot;ï¼Œé‚£ä¹ˆreactiveè¡¨è¾¾å¼é‡Œçš„æ•°æ®æŠ“å–è¿‡ç¨‹å¹¶ä¸ä¼šæ›´æ–°ï¼Œè€Œåªæœ‰<code>renderPlot</code>é‡Œçš„<code>log.scale</code>å‚æ•°ä¼šæ›´æ–°ï¼Œè¿™å°†èŠ‚çœç¨‹åºè¿è¡Œæ—¶é—´ï¼Œè€Œä¸”å‡å°‘æ•°æ®æŠ“å–æ¬¡æ•°ï¼Œé˜²æ­¢IPåœ°å€è¢«å°ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="n">output</span><span class="o">$</span><span class="n">plot</span> <span class="o">&lt;-</span> <span class="nf">renderPlot</span><span class="p">({</span>    
  <span class="nf">chartSeries</span><span class="p">(</span><span class="nf">dataInput</span><span class="p">(),</span> <span class="n">theme</span> <span class="o">=</span> <span class="nf">chartTheme</span><span class="p">(</span><span class="s">&#34;white&#34;</span><span class="p">),</span>
    <span class="n">type</span> <span class="o">=</span> <span class="s">&#34;line&#34;</span><span class="p">,</span> <span class="n">log.scale</span> <span class="o">=</span> <span class="n">input</span><span class="o">$</span><span class="n">log</span><span class="p">,</span> <span class="n">TA</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div><p>reactiveè¡¨è¾¾å¼ä¸æ­¢<code>reactive()</code>ï¼Œè¿˜åŒ…æ‹¬<code>observe()</code>, <code>observeEvent()</code>å’Œ<code>eventReactive()</code>ç­‰ç­‰ï¼Œè¯¦è§<a href="https://shiny.rstudio.com/reference/shiny/1.6.0/">æ­¤å¤„</a>ã€‚å¦å¤–ï¼Œreactiveè¡¨è¾¾å¼åªèƒ½åŒ…è£…åœ¨ç‰¹å®šçš„ã€å…è®¸reactiveè¡¨è¾¾å¼çš„å‡½æ•°ä¸­ï¼Œå¦‚æ­¤å¤„çš„<code>renderPlot</code>ï¼Œè€Œä¸èƒ½è¢«åŒ…è£…åœ¨<code>plot</code>å‡½æ•°ä¸­ã€‚<code>render*</code>ç±»å‡½æ•°éƒ½å…è®¸reactiveè¡¨è¾¾å¼ã€‚</p>
<br>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>Reactiveè¡¨è¾¾å¼çš„åŠŸèƒ½å¯è¢«ç®€å•åœ°æ€»ç»“ä¸ºä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ul>
<li>å½“ä½ ç¬¬ä¸€æ¬¡è¿è¡Œç¨‹åºæ—¶ï¼Œreactiveè¡¨è¾¾å¼ä¼šç¼“å­˜è¿è¡Œç»“æœã€‚</li>
<li>å½“ä½ ä¸‹ä¸€æ¬¡è¿è¡Œç¨‹åºæ—¶ï¼Œreactiveè¡¨è¾¾å¼ä¼šè‡ªåŠ¨æ£€æµ‹è¾“å…¥å€¼æ˜¯å¦æ˜¯æœ€æ–°çš„ã€‚åœ¨ä¸Šä¾‹ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´è¾“å…¥çš„<code>input$symb</code>å’Œ<code>input$dates</code>æ˜¯å¦æœ‰å˜åŒ–ã€‚</li>
<li>å¦‚æœæœ‰å˜åŒ–ï¼Œåˆ™reactiveä¼šæ ¹æ®æ–°è¾“å…¥å€¼æ›´æ–°ç»“æœã€‚</li>
<li>å¦‚æœæ²¡å˜åŒ–ï¼Œåˆ™reactiveä¼šç›´æ¥ä½¿ç”¨ç¼“å­˜ä¸­çš„å€¼ã€‚</li>
</ul>
<br>
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<p><a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson6/">https://shiny.rstudio.com/tutorial/written-tutorial/lesson6/</a></p>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Rè¯­è¨€ | ä½¿ç”¨stargazeråŒ…è¾“å‡ºæ ¼å¼åŒ–å›å½’ç»“æœ</title>
      <link>https://hidadeng.github.io/blog/2022-10-07-r-stargazer/</link>
      <pubDate>Fri, 07 Oct 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-10-07-r-stargazer/</guid>
      <description>ä½¿ç”¨stargazeråŒ…è¾“å‡ºæ ¼å¼åŒ–å›å½’ç»“æœ</description>
      <content:encoded><![CDATA[<blockquote>
<p>ä½œè€…: çŒ«å“¥</p>
<p>æ³¢æ©å¤§å­¦ç»æµå­¦ä¸“ä¸šï¼Œ è®¡é‡ç»æµå­¦æ–¹å‘</p>
</blockquote>
<p>åœ¨å®è¯åˆ†æè¿‡ç¨‹ä¸­ï¼Œå„ç§å›å½’æ¨¡å‹ååˆ†å¸¸ç”¨ï¼Œç‰¹åˆ«æ˜¯å‚æ•°æ¨¡å‹ã€‚è€Œä¸”æˆ‘ä»¬å¸¸å¸¸éœ€è¦è¿è¡Œå¤šç§å‚æ•°å›å½’æ¨¡å‹ï¼Œå¹¶å¯¹å‚æ•°ä¼°è®¡å€¼ã€æ˜¾è‘—æ€§ç­‰ç»Ÿè®¡æ€§è´¨è¿›è¡Œæ¯”è¾ƒã€‚æ­¤æ—¶ï¼Œå¦‚æœç”¨copy pasteæˆ–è€…æ‰‹åŠ¨è¾“å…¥ï¼Œé‚£ä¹ˆåˆ™è€—æ—¶è€—åŠ›ï¼Œä¸”æœ‰ä¸€å®šé”™è¯¯ç‡ã€‚å¦‚æœä½ ä¹Ÿæœ‰ç›¸åŒçƒ¦æ¼ï¼Œé‚£ä¹ˆstargazeråŒ…å¯ä»¥å®Œç¾åœ°è§£å†³ä½ çš„çƒ¦æ¼ã€‚ä»–å¯ä»¥å¿«é€Ÿã€å‡†ç¡®ã€æ¸…æ™°åœ°è¾“å‡ºå›å½’ç»“æœã€‚</p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<p>ä¸å…¶å®ƒRåŒ…çš„å®‰è£…æ–¹å¼æ— å¼‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>install.packages()</code>å’Œ<code>library()</code>å‡½æ•°æ¥ä¸‹è½½å’Œå¯¼å…¥stargazeråŒ…ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">install.packages</span><span class="p">(</span><span class="s">&#34;stargazer&#34;</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">stargazer</span><span class="p">)</span>
</code></pre></div><br>
<h2 id="æè¿°æ€§ç»Ÿè®¡å€¼">æè¿°æ€§ç»Ÿè®¡å€¼</h2>
<p>åœ¨ä¼°è®¡å›å½’æ¨¡å‹ä¹‹å‰ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¹Ÿéœ€è¦å¯¹æ•°æ®çš„æè¿°æ€§ç»Ÿè®¡æ€§è´¨è¿›è¡Œåˆ†æï¼Œä»¥ä¾¿äº†è§£å˜é‡çš„åˆ†å¸ƒå’Œå˜é‡é—´çš„è”åˆåˆ†å¸ƒï¼Œè¿™å¯¹åç»­çš„å›å½’æ¨¡å‹è®¾å®šå…·æœ‰é‡è¦æ„ä¹‰ã€‚stargazeråŒ…èƒ½ä½¿æˆ‘ä»¬æ–¹ä¾¿åœ°åˆ†ææè¿°æ€§ç»Ÿè®¡å€¼ã€‚æˆ‘ä»¬æ­¤å¤„ä»¥Rå†…è‡ªå¸¦æ•°æ®é›†attitudeä¸ºä¾‹ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">stargazer</span><span class="p">(</span><span class="n">attitude</span><span class="p">,</span> <span class="n">type</span> <span class="o">=</span> <span class="s">&#34;text&#34;</span><span class="p">)</span>
</code></pre></div><p>è¿è¡Œä¸Šè¿°ç¨‹åºåï¼Œæˆ‘ä»¬å°±ä¼šå¾—åˆ°ä¸‹è¡¨ã€‚</p>
<p><img loading="lazy" src="img/%e5%9b%be1.png" alt=""  />
</p>
<p>å¦‚æœéœ€è¦è¾“å‡ºlatexæˆ–è€…htmlæ ¼å¼ï¼Œé‚£ä¹ˆæŒ‡å®š<code>type=&quot;latex&quot;</code>æˆ–è€…<code>type=&quot;html&quot;</code>å³å¯ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜æœ‰å…¶ä»–ä¸€äº›é‡è¦çš„å‚æ•°ã€‚</p>
<ul>
<li><code>title</code>: å®šä¹‰è¡¨æ ¼çš„æ ‡é¢˜</li>
<li><code>out</code>: 	å®šä¹‰å¯¼å‡ºæ–‡ä»¶çš„è·¯å¾„ï¼Œæ–‡ä»¶ç±»å‹å¯ä»¥æ˜¯<code>.tex</code>, <code>.txt</code>, <code>.htm</code>æˆ–è€…<code>.html</code>ã€‚</li>
<li><code>flip</code>: é»˜è®¤ä¸ºFALSEã€‚å½“å®šä¹‰ä¸ºTRUEæ—¶ï¼Œåˆ™è¡¨ç¤ºè½¬ç½®ï¼Œå³å„å˜é‡æŒ‰åˆ—æ’åˆ—ã€‚</li>
<li><code>digits</code>: å®šä¹‰è¾“å‡ºæ•°å€¼çš„å°æ•°ä½æ•°ã€‚</li>
</ul>
<br>
<h2 id="å‚æ•°å›å½’æ¨¡å‹ç»“æœ">å‚æ•°å›å½’æ¨¡å‹ç»“æœ</h2>
<p>æ­¤å¤„ï¼Œæˆ‘ä»¬ä¾ç„¶ä½¿ç”¨attitudeæ•°æ®åŒ…ï¼Œä»¥<code>rating</code>ä½œä¸ºå› å˜é‡ï¼Œå…¶ä»–å„å˜é‡ä½œä¸ºåå˜é‡ï¼Œç”¨ä¸¤ä¸ªçº¿æ€§æ¨¡å‹å’Œä¸€ä¸ªProbitæ¨¡å‹è¿›è¡Œå‚æ•°ä¼°è®¡ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="c1">##  2 OLS models</span>
<span class="n">linear.1</span> <span class="o">&lt;-</span> <span class="nf">lm</span><span class="p">(</span><span class="n">rating</span> <span class="o">~</span> <span class="n">complaints</span> <span class="o">+</span> <span class="n">privileges</span> <span class="o">+</span> <span class="n">learning</span> 
                        <span class="o">+</span> <span class="n">raises</span> <span class="o">+</span> <span class="n">critical</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">attitude</span><span class="p">)</span>

<span class="n">linear.2</span> <span class="o">&lt;-</span> <span class="nf">lm</span><span class="p">(</span><span class="n">rating</span> <span class="o">~</span> <span class="n">complaints</span> <span class="o">+</span> <span class="n">privileges</span> <span class="o">+</span> <span class="n">learning</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">attitude</span><span class="p">)</span>

<span class="c1">## create an indicator dependent variable, and run a probit model</span>
 
<span class="n">attitude</span><span class="o">$</span><span class="n">high.rating</span> <span class="o">&lt;-</span> <span class="p">(</span><span class="n">attitude</span><span class="o">$</span><span class="n">rating</span> <span class="o">&gt;</span> <span class="m">70</span><span class="p">)</span>
<span class="n">probit.model</span> <span class="o">&lt;-</span> <span class="nf">glm</span><span class="p">(</span><span class="n">high.rating</span> <span class="o">~</span> <span class="n">learning</span> <span class="o">+</span> <span class="n">critical</span> <span class="o">+</span> <span class="n">advance</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">attitude</span><span class="p">,</span>
                    <span class="n">family</span> <span class="o">=</span> <span class="nf">binomial</span><span class="p">(</span><span class="n">link</span> <span class="o">=</span> <span class="s">&#34;probit&#34;</span><span class="p">))</span>
</code></pre></div><p>åœ¨å¾—åˆ°å„æ¨¡å‹åï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œä»¥ä¸‹ç¨‹åºæ±‡æ€»å’Œè¾“å‡ºä¸‰ä¸ªæ¨¡å‹çš„ç»“æœã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">stargazer</span><span class="p">(</span><span class="n">linear.1</span><span class="p">,</span> <span class="n">linear.2</span><span class="p">,</span> <span class="n">probit.model</span><span class="p">,</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">&#34;Regression Results&#34;</span><span class="p">)</span>
</code></pre></div><p>æ±‡æ€»å’Œè¾“å‡ºç»“æœå¦‚ä¸‹è¡¨ã€‚</p>
<p><img loading="lazy" src="img/%e5%9b%be2.png" alt=""  />
</p>
<p>åœ¨è¾“å‡ºå›å½’ç»“æœæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰ä¸€äº›é‡è¦çš„å‚æ•°ã€‚</p>
<ul>
<li><code>single.row</code>: é»˜è®¤å€¼ä¸ºFALSEã€‚å½“å–å€¼ä¸ºTRUEï¼Œè¡¨ç¤ºå°†å‚æ•°å’Œtç»Ÿè®¡å€¼æˆ–å…¶å®ƒå‚æ•°ç»Ÿè®¡å€¼æ”¾åœ¨ä¸€è¡Œï¼Œè€Œä¸æ˜¯åˆ†ä¸Šä¸‹æ”¾ç½®ã€‚</li>
<li><code>ci</code>: é»˜è®¤ä¸ºFALSEã€‚å½“å–å€¼ä¸ºTRUEæ—¶ï¼Œè¡¨ç¤ºå°†åœ¨å‚æ•°ä¼°è®¡å€¼åæŠ¥å‘Šç½®ä¿¡åŒºé—´ï¼Œè€Œä¸æ˜¯tç»Ÿè®¡å€¼ã€‚</li>
<li><code>ci.level</code>: å®šä¹‰ç½®ä¿¡åº¦æ°´å¹³ã€‚</li>
<li><code>omit.stat</code>: å®šä¹‰ä¸éœ€è¦æŠ¥å‘Šçš„ç»Ÿè®¡å€¼ã€‚ä¾‹å¦‚ï¼Œ<code>omit.stat=c(&quot;f&quot;.&quot;ser&quot;)</code>ï¼Œè¡¨ç¤ºä¸éœ€è¦æŠ¥å‘Šæ¨¡å‹çš„Fç»Ÿè®¡å€¼å’ŒResidual Std. Errorï¼Œå³æ®‹å·®çš„æ ‡å‡†è¯¯ã€‚</li>
<li><code>keep.stat</code>: å®šä¹‰éœ€è¦æŠ¥å‘Šçš„ç»Ÿè®¡å€¼ã€‚é»˜è®¤æ˜¯æŠ¥å‘Šæ‰€æœ‰çš„åå˜é‡ã€‚ä¾‹å¦‚ï¼Œ<code>keep.stat=&quot;n&quot;</code>ï¼Œè¡¨ç¤ºåªéœ€è¦æŠ¥å‘Šæ ·æœ¬é‡ã€‚</li>
<li><code>keep</code>: å®šä¹‰éœ€è¦åŒ…å«åœ¨è¾“å‡ºç»“æœä¸­çš„å˜é‡ã€‚å½“æ¨¡å‹åå˜é‡æ•°ç›®å¾ˆå¤šï¼Œè€Œæˆ‘ä»¬åˆåªå…³æ³¨ä¸ªåˆ«å˜é‡çš„ç³»æ•°æ—¶ï¼Œè¿™ä¸ªå‚æ•°åˆ™èƒ½å¤Ÿèµ·åˆ°ä½œç”¨ã€‚ä¾‹å¦‚ï¼Œ<code>keep=c(&quot;complaints&quot;,&quot;learning&quot;,&quot;raises&quot;,&quot;critical&quot;)</code>ã€‚</li>
<li><code>order</code>: å®šä¹‰è¾“å‡ºç»“æœä¸­å˜é‡çš„é¡ºåºã€‚ä¾‹å¦‚ï¼Œ<code>order=c(&quot;learning&quot;, &quot;raises&quot;)</code>ã€‚</li>
</ul>
<br>
<h2 id="ç›¸å…³ç³»æ•°è¡¨">ç›¸å…³ç³»æ•°è¡¨</h2>
<p>stargazeråŒ…è¿˜èƒ½æ±‡æ€»æ•´ç†ç›¸å…³ç³»æ•°è¡¨ã€‚ä»¥attitudeæ•°æ®é›†ä¸ºä¾‹ï¼Œè¿è¡Œä»¥ä¸‹ç¨‹åºå³å¯è·å¾—ç›¸å…³ç³»æ•°è¡¨ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="n">correlation.matrix</span> <span class="o">&lt;-</span> <span class="nf">cor</span><span class="p">(</span><span class="n">attitude</span><span class="p">)</span>
<span class="nf">stargazer</span><span class="p">(</span><span class="n">correlation.matrix</span><span class="p">,</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="p">)</span>
</code></pre></div><p><img loading="lazy" src="img/%e5%9b%be3.png" alt=""  />
</p>
<br>
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<p>Hlavac, Marek (2018). stargazer: Well-Formatted Regression and Summary Statistics Tables. R package version 5.2.2. <a href="https://CRAN.R-project.org/package=stargazer">https://CRAN.R-project.org/package=stargazer</a></p>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Rè¯­è¨€ | renderthisåŒ…åˆ¶ä½œè®²è§£åŠ¨ç”»ã€è§†é¢‘</title>
      <link>https://hidadeng.github.io/blog/2022-09-27-r-renderthis/</link>
      <pubDate>Tue, 27 Sep 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-09-27-r-renderthis/</guid>
      <description>descriptionç”¨äºSEOä¼˜åŒ–</description>
      <content:encoded><![CDATA[


]]></content:encoded>
    </item>
    
    <item>
      <title>Rè¯­è¨€ | è®©ç»Ÿè®¡æ›´easyçš„easystatsé›†åˆåŒ…</title>
      <link>https://hidadeng.github.io/blog/2022-09-21-r-easystats/</link>
      <pubDate>Wed, 21 Sep 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-09-21-r-easystats/</guid>
      <description>æ¨¡æ¿ç»Ÿè®¡æŠ¥å‘Šç”¨</description>
      <content:encoded><![CDATA[<p><a href="https://easystats.github.io/easystats/index.html">easystats</a> æ˜¯ R åŒ…é›†åˆï¼Œå¯æä¾›ç»Ÿä¸€ä¸”easyçš„ä»£ç è¿›è¡Œ ç»Ÿè®¡åˆ†æã€‚</p>
<br>
<h2 id="ä¸-tidyverse-æœ‰ä½•ä¸åŒ">ä¸ tidyverse æœ‰ä½•ä¸åŒï¼Ÿ</h2>
<p>tidyverseåŒ…é›†åˆï¼Œæ˜¯ Rè¯­è¨€ ä¸­éå¸¸æµè¡Œçš„è½¯ä»¶åŒ…é›†åˆï¼ˆggplotã€dplyrã€tidyr&hellip;&hellip;ï¼‰ï¼Œå®ƒä¹Ÿä½¿ R çš„ä½¿ç”¨æ›´åŠ å®¹æ˜“ã€‚é‚£ä¹ˆï¼Œæ‚¨åº”è¯¥é€‰æ‹© tidyverse è¿˜æ˜¯ easystatsï¼Ÿ</p>
<p><strong>ä¸¤ä¸ªéƒ½é€‰ï¼</strong></p>
<p>äº‹å®ä¸Šï¼Œè¿™ä¸¤ä¸ªç”Ÿæ€ç³»ç»Ÿçš„è®¾è®¡è€ƒè™‘äº†éå¸¸ä¸åŒçš„ç›®æ ‡ã€‚ tidyverse åŒ…ä¸»è¦ç”¨äº <code>æ•°æ®æ“ä½œå’Œæ¢ç´¢</code>ã€‚è€Œ easystats æ›´å…³æ³¨åˆ†æçš„æœ€åé˜¶æ®µï¼š<code>ç†è§£å’Œè§£é‡Šæ‚¨çš„ç»“æœï¼Œå¹¶åœ¨æ‰‹ç¨¿æˆ–æŠ¥å‘Šä¸­æŠ¥å‘Šå®ƒä»¬</code>ã€‚æ‚¨ç»å¯¹å¯ä»¥åœ¨ tidyverse å·¥ä½œæµç¨‹ä¸­ä½¿ç”¨ easystats åŠŸèƒ½ï¼</p>
<p>easystats + tidyverse = â¤ï¸</p>
<br>
<h2 id="easystatsç”Ÿæ€åœˆ">easystatsç”Ÿæ€åœˆ</h2>
<p>æ¯ä¸ª easystats åŒ…éƒ½æœ‰ä¸åŒçš„èŒƒå›´å’Œç”¨é€”ã€‚è¿™æ„å‘³ç€æ‚¨æœ€å¥½çš„å¼€å§‹æ–¹å¼æ˜¯æ¢ç´¢å¹¶é€‰æ‹©æ‚¨è®¤ä¸ºå¯èƒ½å¯¹æ‚¨æœ‰ç”¨çš„é‚£äº›ã€‚ä½†æ˜¯ï¼Œç”±äºå®ƒä»¬çš„æ„å»ºè€ƒè™‘äº†&quot;æ›´å¤§çš„å›¾æ™¯&quot;ï¼Œæ‚¨ä¼šæ„è¯†åˆ°ä½¿ç”¨æ›´å¤šå®ƒä»¬ä¼šåˆ›å»ºä¸€ä¸ªæµç•…çš„å·¥ä½œæµç¨‹ï¼Œå› ä¸ºè¿™äº›åŒ…æ—¨åœ¨ååŒå·¥ä½œã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œè¿™äº›è½¯ä»¶åŒ…å¯ä»¥ååŒå·¥ä½œï¼Œæ¶µç›–ç»Ÿè®¡åˆ†æå’Œæ•°æ®å¯è§†åŒ–çš„æ‰€æœ‰æ–¹é¢ã€‚</p>
<ul>
<li><a href="https://easystats.github.io/report/">report</a>ï¼šğŸ“œ ğŸ‰ ç”Ÿæˆè‡ªåŠ¨ç»Ÿè®¡æŠ¥å‘Š</li>
<li><a href="https://easystats.github.io/correlation/">correlation</a>ï¼šğŸ”— ç›¸å…³æ€§çš„å¤šåˆä¸€åŒ…</li>
<li><a href="https://easystats.github.io/modelbased/">modelbased</a>ï¼šğŸ“ˆ åŸºäºç»Ÿè®¡æ¨¡å‹ä¼°è®¡æ•ˆæœã€ç»„å¹³å‡å€¼å’Œç»„é—´å¯¹æ¯”</li>
<li><a href="https://easystats.github.io/bayestestR/">bayestestR</a>ï¼šğŸ‘» éå¸¸é€‚åˆè´å¶æ–¯ç»Ÿè®¡çš„åˆå­¦è€…æˆ–ä¸“å®¶</li>
<li><a href="https://easystats.github.io/effectsize/">effectize</a>: ğŸ‰ è®¡ç®—ã€è½¬æ¢ã€è§£é‡Šå’Œä½¿ç”¨æ•ˆæœå¤§å°å’Œæ ‡å‡†åŒ–å‚æ•°çš„ç´¢å¼•</li>
<li><a href="https://easystats.github.io/see/">see</a> ï¼šğŸ¨ åˆ›å»ºæ¼‚äº®ç»“æœå¯è§†åŒ–çš„ç»˜å›¾</li>
<li><a href="https://easystats.github.io/parameters/">parameters</a>ï¼šğŸ“Š è·å–æœ‰å…³æ¨¡å‹åŒ…å«å‚æ•°æ‰€æœ‰ä¿¡æ¯çš„è¡¨æ ¼</li>
<li><a href="https://easystats.github.io/performance/">performance</a>ï¼šğŸ’ªæ¨¡å‹çš„è´¨é‡å’Œæ€§èƒ½æŒ‡æ ‡ï¼ˆR2ã€ICCã€LOOã€AICã€BFã€&hellip;ï¼‰</li>
<li><a href="https://easystats.github.io/insight/">insight</a>ï¼šğŸ”® å¯¹äºå¼€å‘äººå‘˜æ¥è¯´ï¼Œä¸€ä¸ªåŒ…å¯ä»¥å¸®åŠ©æ‚¨ä½¿ç”¨ä¸åŒçš„æ¨¡å‹å’ŒåŒ…</li>
<li><a href="https://easystats.github.io/datawizard/">datawizard</a>ï¼šğŸ§™ æ¸…ç†å’Œè½¬æ¢æ•°æ®çš„é­”æ³•è¯æ°´</li>
</ul>
<p>æˆªæ­¢2022-09-21ï¼Œ easystatsç”Ÿæ€ä¸­å„ä¸ªåŒ…çš„ä¸‹è½½æƒ…å†µ</p>
<table>
<thead>
<tr>
<th style="text-align:left">Total</th>
<th style="text-align:left">insight</th>
<th style="text-align:left">bayestestR</th>
<th style="text-align:left">parameters</th>
<th style="text-align:left">performance</th>
<th style="text-align:left">datawizard</th>
<th style="text-align:left">effectsize</th>
<th style="text-align:left">correlation</th>
<th style="text-align:left">see</th>
<th style="text-align:left">modelbased</th>
<th style="text-align:left">report</th>
<th style="text-align:left">easystats</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">10,001,095</td>
<td style="text-align:left">3,085,739</td>
<td style="text-align:left">1,373,379</td>
<td style="text-align:left">1,363,678</td>
<td style="text-align:left">1,285,506</td>
<td style="text-align:left">1,159,097</td>
<td style="text-align:left">1,060,079</td>
<td style="text-align:left">277,541</td>
<td style="text-align:left">251,038</td>
<td style="text-align:left">94,089</td>
<td style="text-align:left">48,876</td>
<td style="text-align:left">2,073</td>
</tr>
</tbody>
</table>
<p><img loading="lazy" src="easystats-trend.png" alt=""  />
</p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">install.packages(&#34;easystats&#34;)
</code></pre></div><br>
<h2 id="ç‚«ä¸€ä¸‹">ç‚«ä¸€ä¸‹</h2>
<p>easystatsåˆ°åº•å¦‚ä½•å¥½ç”¨ï¼Œä»Šå¤©åªå®éªŒreportåŒ…ï¼Œè¯¥åŒ…å·ç§° â€œä» R åˆ°ä½ çš„æ‰‹ç¨¿â€</p>
<p>æŠ¥å‘Šçš„ä¸»è¦ç›®æ ‡æ˜¯å¼¥åˆ R çš„è¾“å‡ºä¸æ‰‹ç¨¿ä¸­åŒ…å«çš„æ ¼å¼åŒ–ç»“æœä¹‹é—´çš„å·®è·ã€‚ å®ƒæ ¹æ®æœ€ä½³å®è·µæŒ‡å—ï¼ˆä¾‹å¦‚ APA æœŸåˆŠé£æ ¼ï¼‰è‡ªåŠ¨ç”Ÿæˆæ¨¡å‹å’Œæ•°æ®æ¡†æ¶çš„æŠ¥å‘Šï¼Œç¡®ä¿ç»“æœæŠ¥å‘Šçš„æ ‡å‡†åŒ–å’Œè´¨é‡ã€‚</p>
<p>ç”Ÿæˆirisæ•°æ®é›†æè¿°æ€§ç»Ÿè®¡ä¿¡æ¯çš„è‹±æ–‡æŠ¥å‘Š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">report(iris)
</code></pre></div><br>
<p>ç”Ÿæˆçº¿æ€§å›å½’æ¨¡å‹çš„æŠ¥å‘Š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">library(report)

model &lt;- lm(Sepal.Length ~ Species, data = iris)
report(model)
</code></pre></div><p>æ›´å¤šå†…å®¹è¯·é˜…è¯» <a href="https://easystats.github.io/report/">reportåŒ…</a> çš„æ–‡æ¡£ã€‚</p>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Rè¯­è¨€ |  ä½¿ç”¨officedownåŒ…åœ¨Rmarkdownä¸­åˆ¶ä½œPPT</title>
      <link>https://hidadeng.github.io/blog/2022-09-04-officedown-pptdocx/</link>
      <pubDate>Sat, 03 Sep 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-09-04-officedown-pptdocx/</guid>
      <description>ä½¿ç”¨officedownåŒ…åœ¨Rmarkdownä¸­åˆ¶ä½œPPT</description>
      <content:encoded><![CDATA[


<p>ä½¿ç”¨officedownåœ¨Rmarkdownä¸­å†™PPT/Wordã€‚æœ¬æ–‡åªä»¥PPTä¸ºä¾‹ç®€å•æ¼”ç¤ºï¼Œä¸åšç»†èŠ‚è®²è§£ã€‚</p>
<div id="å®‰è£…" class="section level2">
<h2>å®‰è£…</h2>
<pre class="r"><code>install.packages(c(&quot;officedown&quot;, &quot;rvg&quot;))</code></pre>
<p><br></p>
</div>
<div id="æ–°å»ºrmd" class="section level2">
<h2>æ–°å»ºRmd</h2>
<p>æŒ‰ç…§æˆªå›¾ï¼Œ
<img src="img/1.png" />
<img src="img/2.png" /></p>
<p>ä¼šè‡ªåŠ¨æ–°å»ºä¸€ä¸ªRmdæ¨¡æ¿ã€‚
<img src="img/3.png" /></p>
<p>å¦‚æœä½ è‡ªå·±æƒ³æ”¹åŠ¨æ·»åŠ å†…å®¹ï¼Œè‡ªå·±æ”¹å°±è¡Œä¸ç”¨æ€•ï¼Œå¤§ä¸äº†é‡æ–°æ–°å»ºä¸€ä¸ªç©ºç™½æ¨¡æ¿ã€‚</p>
<p><br></p>
</div>
<div id="æ¸²æŸ“" class="section level2">
<h2>æ¸²æŸ“</h2>
<p>å†…å®¹Okayåï¼Œç‚¹å‡»æ¸²æŸ“</p>
<p><img src="img/4.png" /></p>
<p>æ¸²æŸ“æ—¶ä¼šè‡ªåŠ¨å¼¹å¼€MS PowerPoint</p>
<p><img src="img/5.png" /></p>
<p><br></p>
</div>
<div id="ç›¸å…³èµ„æ–™" class="section level2">
<h2>ç›¸å…³èµ„æ–™</h2>
<ul>
<li><a href="https://www.miriamheiss.com/posts/graphing-with-ggplot/" class="uri">https://www.miriamheiss.com/posts/graphing-with-ggplot/</a></li>
<li><a href="https://ardata-fr.github.io/officeverse/index.html" class="uri">https://ardata-fr.github.io/officeverse/index.html</a></li>
</ul>
<p><br></p>
</div>
<div id="å¹¿è€Œå‘Šä¹‹" class="section level2">
<h2>å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
</div>
]]></content:encoded>
    </item>
    
    <item>
      <title>Rè¯­è¨€ |  ä½¿ç”¨posterdownåŒ…åˆ¶ä½œå­¦æœ¯ä¼šè®®æµ·æŠ¥</title>
      <link>https://hidadeng.github.io/blog/2022-09-04-posterdown/</link>
      <pubDate>Sat, 03 Sep 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-09-04-posterdown/</guid>
      <description>ä½¿ç”¨posterdownåŒ…åˆ¶ä½œå­¦æœ¯æµ·æŠ¥</description>
      <content:encoded><![CDATA[


<blockquote>
<p>åŸæ–‡: <a href="https://shilaan.rbind.io/post/academic-conference-posters-using-posterdown/" class="uri">https://shilaan.rbind.io/post/academic-conference-posters-using-posterdown/</a></p>
</blockquote>
<p>å¦‚æœä½ è®¤è¯†æˆ‘ï¼Œä½ å°±ä¼šçŸ¥é“æˆ‘å–œæ¬¢ç”¨ Rè¯­è¨€ åšä»»ä½•äº‹æƒ…ã€‚ å½“éœ€è¦åˆ›å»ºæˆ‘çš„ç¬¬ä¸€ä¸ªå­¦æœ¯ä¼šè®®æµ·æŠ¥æ—¶ï¼Œæˆ‘çŸ¥é“æˆ‘ä¸æƒ³æµªè´¹ä»»ä½•æ—¶é—´åœ¨ä¸åŒçš„è½¯ä»¶ç¯å¢ƒä¹‹é—´ç§»åŠ¨æˆ–å¤åˆ¶ç²˜è´´å’Œæ‰‹åŠ¨æ ¼å¼åŒ–æ–‡æœ¬ã€è¡¨æ ¼ã€å›¾å½¢å’Œç»“æœã€‚</p>
<p>ç›¸åï¼Œæˆ‘æƒ³ä½¿ç”¨ RMarkdown ç”Ÿæˆä¸€ä¸ªå®Œå…¨å¯å¤åˆ¶ä¸”æ ¼å¼ç²¾ç¾çš„ä¼šè®®æµ·æŠ¥ã€‚ åŸæ¥; R åŒ… <a href="https://github.com/brentthorne/posterdown">posterdown</a> ä½¿è¿™å˜å¾—éå¸¸ç®€å•ï¼ åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†ç®€è¦å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨ posterdown åŒ…åˆ›å»ºè‡ªå·±çš„æµ·æŠ¥ã€‚</p>
<p>è¦å…ˆç¹ä¸ºå¿«ï¼Œæ‚¨å¯ä»¥åœ¨æ­¤å¤„æ‰¾åˆ°æˆ‘çš„ç¬¬ä¸€ä¸ª posterdown åˆ›å»ºçš„ <a href="https://sjdm.org/presentations/2021-Poster-Alzahawi-Shilaan-crowds-variability-credibility~.pdf">æµ·æŠ¥</a> ä»¥åŠæ­¤å¤„çš„<a href="https://github.com/shilaan/Many-Analysts/blob/main/poster/GSPA_Poster.Rmd">åŸºç¡€ä»£ç </a>ã€‚</p>
<p><br></p>
<div id="å®‰è£…" class="section level2">
<h2>å®‰è£…</h2>
<pre class="r"><code>install.packages(&quot;posterdown&quot;)</code></pre>
<p><br></p>
</div>
<div id="æ–°å»ºrmd" class="section level2">
<h2>æ–°å»ºRmd</h2>
<p>æŒ‰ç…§ä¸‹é¢æ­¥éª¤ç‚¹å‡»ä»æ¨¡æ¿æ–°å»ºRmarkdown
<code>File -&gt; Net File -&gt; R Markdown -&gt; From Template</code></p>
<p><img src="img/posterdown_tem.png" /></p>
<p>ä»ä¸­é€‰æ‹©posterdownæ¨¡æ¿ï¼Œæœ‰ä¸‰ç§å¯ä¾›é€‰æ‹©çš„å­æ¨¡æ¿ï¼Œå³
- Posterdown HTML
- Posterdown betterland
- Posterdown Betterport</p>
<p>å¤§è‡´çš„æ ·å¼å¦‚ä¸‹</p>
<p><img src="img/posterdown_templates.png" /></p>
<p>è™½ç„¶ HTML æ¨¡æ¿çœ‹èµ·æ¥æ›´åƒæ˜¯ç»å…¸çš„ç§‘å­¦æµ·æŠ¥ï¼Œä½† Betterland å’Œ Betterport æ¨¡æ¿åˆ›å»ºçš„æµ·æŠ¥å…·æœ‰å¤§é‡ç©ºé—´ï¼Œä¸“é—¨ç”¨äºå‘ˆç°é«˜ä¼ é€’æ€§çš„(take-away)ä¿¡æ¯ã€‚
åä¸¤è€…çš„åŒºåˆ«åœ¨äºï¼ŒBetterland æ˜¯æ¨ªå‘çš„ï¼Œè€Œ Betterport æ˜¯çºµå‘çš„ã€‚</p>
<p><br></p>
</div>
<div id="ä¸ªæ€§åŒ–" class="section level2">
<h2>ä¸ªæ€§åŒ–</h2>
<p>å½“é€‰æ‹©äº†æ¨¡æ¿ï¼Œå°±å¯ä»¥åœ¨Rmdæ–‡ä»¶å†…ä¿®æ”¹å†…å®¹ã€‚å¦‚æœå¯¹å­—å·ã€å­—ä½“ç­‰ä¸å¤ªæ»¡æ„ï¼Œè¿˜å¯ä»¥åœ¨ä¿®æ”¹yamléƒ¨åˆ†å‚æ•°ã€‚</p>
<p><img src="img/code.png" /></p>
<p>æœ€åç‚¹å‡»Knitå³å¯æ¸²æŸ“å‡ºå­¦æœ¯ä¼šè®®æµ·æŠ¥</p>
<p><br></p>
</div>
<div id="å‚è€ƒèµ„æ–™" class="section level2">
<h2>å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://shilaan.rbind.io/post/academic-conference-posters-using-posterdown" class="uri">https://shilaan.rbind.io/post/academic-conference-posters-using-posterdown</a></li>
<li><a href="https://github.com/brentthorne/posterdown" class="uri">https://github.com/brentthorne/posterdown</a></li>
</ul>
<p><br></p>
</div>
<div id="å¹¿è€Œå‘Šä¹‹" class="section level2">
<h2>å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
</div>
]]></content:encoded>
    </item>
    
    <item>
      <title>Rè¯­è¨€ | ç»˜åˆ¶ä¸­å›½åœ°å›¾</title>
      <link>https://hidadeng.github.io/blog/2022-09-04-geospatial-plotting/</link>
      <pubDate>Sat, 03 Sep 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/2022-09-04-geospatial-plotting/</guid>
      <description>ä½¿ç”¨ggplot2, leaflet, sf, terraåŒ…ç»˜åˆ¶ä¸­å›½åœ°å›¾</description>
      <content:encoded><![CDATA[


<p><br></p>
<div id="å¹¿è€Œå‘Šä¹‹" class="section level2">
<h2>å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
</div>
]]></content:encoded>
    </item>
    
    <item>
      <title>ymlthisåŒ… | ä¸ºRmarkdownæ–‡ä»¶è½»æ¾è®¾ç½®YMAL</title>
      <link>https://hidadeng.github.io/blog/ymlthis_rmarkdown_ymal/</link>
      <pubDate>Sat, 27 Aug 2022 00:00:00 +0000</pubDate>
      
      <guid>/blog/ymlthis_rmarkdown_ymal/</guid>
      <description>Rmarkdownæ˜¯Rè¯­è¨€çš„ä»£ç æ–‡ä»¶ç±»å‹ï¼Œèƒ½æ¸²æŸ“æˆhtmlã€pdfã€docç­‰æ–‡ä»¶ã€‚ä½†éœ€è¦ç”¨åˆ°å¤æ‚çš„YAMLè¿›è¡Œå‚æ•°è®¾ç½®ï¼Œå¤ªéš¾è®°ä½äº†ã€‚ä¸è¿‡æœ‰äº†ymlthisåŒ…ï¼Œ éš¾åº¦å¤§å¤§é™ä½ã€‚</description>
      <content:encoded><![CDATA[<p><img loading="lazy" src="img/rmarkdown_function.png" alt=""  />
</p>
<p>Rmarkdownæ˜¯Rè¯­è¨€çš„ä»£ç æ–‡ä»¶ç±»å‹ï¼Œèƒ½æ¸²æŸ“æˆhtmlã€pdfã€docç­‰æ–‡ä»¶ã€‚ä½†éœ€è¦ç”¨åˆ°å¤æ‚çš„YAMLè¿›è¡Œå‚æ•°è®¾ç½®ï¼Œå¤ªéš¾è®°ä½äº†ã€‚ä¸è¿‡æœ‰äº†ymlthisåŒ…ï¼Œ éš¾åº¦å¤§å¤§é™ä½ã€‚</p>
<br>
<h2 id="å®‰è£…ymlthis">å®‰è£…ymlthis</h2>
<p>knitæ¸²æŸ“æ•ˆæœä¸€èˆ¬ç”±Rmarkdownå¼€å¤´çš„YAMLè®¾ç½®ã€‚å½¢å¦‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">title: &#34;Rmarkdownç”¨æ³•&#34;
author: &#34;å¤§é‚“&#34;
date: &#34;2022-07-21&#34;
output: 
  html_document:         #è¾“å‡ºhtml
    toc: true            #ç”Ÿæˆç›®å½•
    toc_float: true      #ç›®å½•æµ®åŠ¨
    theme: readable      #readableä¸»é¢˜
    number_sections: yes #ç« èŠ‚è‡ªåŠ¨æ’åºå·
    df_print: paged      #htmlä¸­çš„data.frameæ•°æ®èƒ½ç¿»é¡µ
</code></pre></div><p>yamlæ¯”è¾ƒéš¾è®°ä½ï¼Œå¾ˆå®¹æ˜“è®¾ç½®é”™è¯¯ï¼Œå¯ä»¥å®‰è£… <code>ymlthisåŒ…</code>ï¼Œè¯¥åŒ…å¯ä»¥å¸®æˆ‘ä»¬çœå»è®°å¿†ä¹‹è‹¦ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">install.packages(&#34;ymlthis&#34;)
</code></pre></div><br>
<h2 id="é…ç½®yaml">é…ç½®YAML</h2>
<p><a href="https://ymlthis.r-lib.org/index.html">ymlthis</a>å®‰è£…æˆåŠŸåï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥å¿«æ·å·¥å…·ã€‚åœ¨å·¥å…·æ ç‚¹å‡» <code>Addins</code></p>
<p><img loading="lazy" src="img/add_in_thisyml_1.jpg" alt=""  />
</p>
<p>æ‰¾åˆ° <code>Write New R Markdown or YAML File</code></p>
<p><img loading="lazy" src="img/add_in_thisyml_2.gif" alt=""  />
</p>
<p>å¤æ‚çš„ <a href="https://bookdown.org/yihui/rmarkdown/html-document.html">htmlæ¸²æŸ“</a>å‚æ•°è®¾ç½®ï¼Œå¦‚æ ‡é¢˜ã€ä½œè€…ã€æ¸²æŸ“æ•ˆæœã€ç›®å½•ã€ä¸»é¢˜ç­‰ï¼Œç¬é—´å˜çš„ç®€å•èµ·æ¥ã€‚</p>
<p>æœ€åï¼Œ.Rmdæ–‡ä»¶æ¸²æŸ“ä¸ºhtmlæ–‡ä»¶çš„æ“ä½œæ–¹æ³•ã€‚</p>
<p><img loading="lazy" src="img/knit_to_html.png" alt=""  />
</p>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><strong>ä»˜è´¹è§†é¢‘è¯¾ç¨‹ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</strong></li>
<li>å¤§é‚“æ¯å¹´ä¼šæœ‰4åœºç›´æ’­ï¼Œäº”ä¸€ã€åä¸€ã€å¯’ã€æš‘å‡ï¼Œå¦‚æœæ—¶é—´ç‚¹æ¥è¿‘ï¼Œå¯è€ƒè™‘æŠ¥åå‚ä¸<a href="https://textdata.cn/blog/2022-05-workshop/7-Python.html">ç›´æ’­è¯¾</a>ã€‚</li>
<li>å¦‚æœåªæ„æ€§ä»·æ¯”ï¼Œä¸”å·²è¿«ä¸åŠå¾…æƒ³å­¦ï¼Œå¯ä»¥è€ƒè™‘ç›´æ¥æŠ¥åå¤§é‚“çš„<a href="https://textdata.cn/blog/management_python_course">å½•æ’­è¯¾</a>ã€‚</li>
<li>å¦‚æœä¸æƒ³å­¦ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘å¤–åŒ…ã€‚æ›´å»ºè®®æ‰¾æ·˜å®ï¼Œå¦‚æœæ‰¾æˆ‘å’¨è¯¢ï¼Œè¯·å…ˆé˜…è¯»<a href="https://textdata.cn/blog/paid_for_service">æœ‰å¿è¯´æ˜</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Asentåº“ | è‹±æ–‡æ–‡æœ¬æ•°æ®æƒ…æ„Ÿåˆ†æ</title>
      <link>https://hidadeng.github.io/blog/asent_sentiment_analysis/</link>
      <pubDate>Sun, 10 Jul 2022 09:40:10 +0600</pubDate>
      
      <guid>/blog/asent_sentiment_analysis/</guid>
      <description>ä½¿ç”¨Pythonåšè‹±æ–‡æƒ…æ„Ÿåˆ†æï¼Œè€ƒè™‘å¦å®šè¯ã€ç¨‹åº¦å‰¯è¯å¯¹æƒ…æ„Ÿè¯çš„ä¿®é¥°ä½œç”¨ã€‚</description>
      <content:encoded><![CDATA[<p>Asent æ˜¯ä¸€ä¸ªæ–°çš„Pythonæƒ…æ„Ÿåˆ†æåº“ï¼Œ ä¾æ®æƒ…æ„Ÿè¯å…¸ï¼ŒæŒ‰ç…§ä¸€å®šçš„è§„åˆ™ï¼Œå¯ç”¨äºè¯„åˆ¤è¯è¯­ã€å¥å­ã€æ–‡æ¡£çš„æƒ…æ„Ÿä¿¡æ¯(æ­£ã€è´Ÿ)ã€‚</p>
<p>ç›®å‰ä¸æƒ…æ„Ÿæœ‰å…³çš„è§„åˆ™æœ‰</p>
<ul>
<li>å¦å®šï¼ˆå³â€œä¸é«˜å…´â€ï¼‰</li>
<li>åŠ å¼ºè¯ï¼ˆâ€œéå¸¸é«˜å…´â€ï¼‰</li>
<li>å¯¹æ¯”å…±è½­ï¼ˆå³â€œä½†æ˜¯â€ï¼‰</li>
<li>å…¶ä»–å¼ºè°ƒæ ‡è®°ï¼Œå¦‚æ„Ÿå¹å·ã€å¤§å°å†™å’Œé—®å·ã€‚</li>
</ul>
<p>Asentç›®å‰ä»…æ”¯æŒ<code>è‹±è¯­ã€ä¸¹éº¦ã€æŒªå¨ã€ç‘å…¸4ç§è¯­è¨€</code>ã€‚</p>
<br>
<h2 id="å®‰è£…é…ç½®">å®‰è£…é…ç½®</h2>
<p>å­¦ä¹ è¯¾ç¨‹ä¹‹å‰ï¼Œéœ€è¦å…ˆä¸‹è½½å¹¶é…ç½®spacyæ¨¡å‹ï¼Œ <a href="https://github.com/explosion/spacy-models/releases">https://github.com/explosion/spacy-models/releases</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">pip3</span> <span class="n">install</span> <span class="n">spacy</span><span class="o">==</span><span class="mf">3.2.0</span>
<span class="n">pip3</span> <span class="n">install</span> <span class="n">asent</span><span class="o">==</span><span class="mf">0.4.2</span>

<span class="c1">#ä¸‹è½½en_core_web_lg-3.3.0-py3-none-any.whlåˆ°æ¡Œé¢</span>
<span class="c1">#ä¸‹è½½é“¾æ¥: https://pan.baidu.com/s/13hFWFjy9uRxzC-9lqrp7SQ æå–ç : em8l </span>

<span class="c1">#ç„¶åä½¿ç”¨å¦‚ä¸‹å®‰è£…å‘½ä»¤</span>
<span class="n">pip3</span> <span class="n">install</span> <span class="n">Desktop</span><span class="o">/</span><span class="n">en_core_web_lg</span><span class="o">-</span><span class="mf">3.2.0</span><span class="o">-</span><span class="n">py3</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="nb">any</span><span class="o">.</span><span class="n">whl</span>
</code></pre></div><br>
<h2 id="å¿«é€Ÿä¸Šæ‰‹">å¿«é€Ÿä¸Šæ‰‹</h2>
<p>ä»¥ä¸‹å°†å¸¦æ‚¨é€æ­¥äº†è§£æƒ…ç»ªæ˜¯å¦‚ä½•è®¡ç®—çš„ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª spaCy ç®¡é“ï¼Œå¹¶ä¸”æˆ‘ä»¬éœ€è¦å‘å…¶ä¸­æ·»åŠ  asent ç®¡é“ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">asent</span>
<span class="kn">import</span> <span class="nn">spacy</span>

<span class="c1"># load spacy pipeline</span>
<span class="n">nlp</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&#34;en_core_web_lg&#34;</span><span class="p">)</span>

<span class="c1"># add the rule-based sentiment model</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s2">&#34;asent_en_v1&#34;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<pre><code>&lt;asent.component.Asent at 0x7fd6b3243130&gt;
</code></pre>
<br>
<h2 id="æ•ˆä»·å’Œææ€§">æ•ˆä»·å’Œææ€§</h2>
<p>å¦‚ä¸‹æ‰€ç¤ºï¼Œ tokençš„æ•ˆä»·ä¿¡æ¯æ¥è‡ªäºäººå·¥æ ‡æ³¨çš„è¯å…¸ã€‚ä¾‹å¦‚<code>I am not very happy</code>ä¸­è¯è¯­<code>happy</code>çš„äººç±»æƒ…æ„Ÿè¯„åˆ†æ˜¯2.7ã€‚</p>
<p><img loading="lazy" src="img/token_polarity.png" alt=""  />
</p>
<p>é¦–å…ˆæˆ‘ä»¬æŸ¥çœ‹æ¯ä¸ªè¯è¯­å¯¹åº”çš„æ•ˆä»·ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">doc</span> <span class="o">=</span> <span class="n">nlp</span><span class="p">(</span><span class="s2">&#34;I am not very happy.&#34;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="s2">&#34;</span><span class="se">\t</span><span class="s2">&#34;</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">valence</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<pre><code>I 	 0.0
am 	 0.0
not 	 0.0
very 	 0.0
happy 	 2.7
. 	 0.0
</code></pre>
<p>åœ¨è¯¥è¯­å¢ƒä¸­ï¼Œ <code>happy</code>å‰é¢æœ‰å¦å®šè¯notä¿®é¥°ï¼Œæ‰€ä»¥æƒ…æ„Ÿææ€§æ–¹é¢åº”è¯¥è¢«çœ‹åšæ¶ˆæçš„ã€‚ä¸€èˆ¬å¦å®šè¯å’Œå‰¯è¯å¯ä»¥å°†å½¢å®¹è¯çš„æƒ…æ„Ÿè¿›è¡Œåè½¬å’Œæ”¾å¤§(ç¼©å°)ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">polarity</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<pre><code>polarity=0.0 token=I span=I
polarity=0.0 token=am span=am
polarity=0.0 token=not span=not
polarity=0.0 token=very span=very
polarity=-2.215 token=happy span=not very happy
polarity=0.0 token=. span=.
</code></pre>
<p>æ³¨æ„åˆ°ï¼Œ è¯è¯­åœ¨<code>happy</code>æ‹¥æœ‰-2.215çš„ææ€§åˆ†ï¼Œè¯¥åˆ†æ˜¯ç”±<code>not very happy</code>ç¡®å®šçš„ã€‚</p>
<br>
<h2 id="å¯è§†åŒ–">å¯è§†åŒ–</h2>
<p>asentæ‹¥æœ‰å¤šç§æƒ…æ„Ÿææ€§å¯è§†åŒ–çš„æ–¹æ³•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">asent</span><span class="o">.</span><span class="n">visualize</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&#34;prediction&#34;</span><span class="p">)</span>
</code></pre></div><p><img loading="lazy" src="img/fig1.png" alt=""  />
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">asent</span><span class="o">.</span><span class="n">visualize</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&#34;analysis&#34;</span><span class="p">)</span>
</code></pre></div><p><img loading="lazy" src="img/fig2.png" alt=""  />
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">doc</span><span class="o">.</span><span class="n">sents</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sentence</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">polarity</span><span class="p">)</span>
</code></pre></div><pre><code>neg=0.391 neu=0.609 pos=0.0 compound=-0.4964 span=I am not very happy.
</code></pre>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">polarity</span>
</code></pre></div><pre><code>DocPolarityOutput(neg=0.391, neu=0.609, pos=0.0, compound=-0.4964)
</code></pre>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">doc2</span> <span class="o">=</span> <span class="n">nlp</span><span class="p">(</span><span class="s2">&#34;I am not very happy.I am very very happy.It is awesome!!&#34;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;doc2æƒ…æ„Ÿææ€§ä¿¡æ¯: &#39;</span><span class="p">,</span> <span class="n">doc2</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">polarity</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;doc2æƒ…æ„Ÿå¾—åˆ†:&#39;</span><span class="p">,</span> <span class="n">doc2</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">polarity</span><span class="o">.</span><span class="n">compound</span><span class="p">)</span>
</code></pre></div><pre><code>doc2æƒ…æ„Ÿææ€§ä¿¡æ¯:  neg=0.13 neu=0.536 pos=0.333 compound=0.2794

doc2æƒ…æ„Ÿå¾—åˆ†: 0.279353567721562
</code></pre>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#æ¯ä¸ªå¥å­çš„æƒ…æ„Ÿææ€§ä¿¡æ¯</span>
<span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">doc2</span><span class="o">.</span><span class="n">sents</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sentence</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">polarity</span><span class="p">)</span>
</code></pre></div><pre><code>neg=0.391 neu=0.609 pos=0.0 compound=-0.4964 span=I am not very happy.
neg=0.0 neu=0.539 pos=0.461 compound=0.6453 span=I am very very happy.
neg=0.0 neu=0.461 pos=0.539 compound=0.6892 span=It is awesome!!
</code></pre>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#æ¯ä¸ªå¥å­çš„æƒ…æ„Ÿå¾—åˆ†</span>
<span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">doc2</span><span class="o">.</span><span class="n">sents</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sentence</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">polarity</span><span class="o">.</span><span class="n">compound</span><span class="p">)</span>
</code></pre></div><pre><code>-0.4964238981617178
0.6452764659402158
0.689208135386188
</code></pre>
<br>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>cntextåº“ | å…³äºDUTIRè¢«æ±¡æŸ“è§£å†³åŠæ³•</title>
      <link>https://hidadeng.github.io/blog/fixed_dutir_bug/</link>
      <pubDate>Mon, 20 Jun 2022 12:40:10 +0600</pubDate>
      
      <guid>/blog/fixed_dutir_bug/</guid>
      <description>å®åœ¨æŠ±æ­‰ï¼Œå¤§é‚“çš„ç²—å¿ƒå¯¼è‡´è¯å…¸DUTIRè¢«æ±¡æŸ“ã€‚å¤§å®¶å¦‚æœä½¿ç”¨cntextä¸­çš„DUTIRï¼Œéº»çƒ¦æ›´æ–°è‡³1.7.2ç‰ˆæœ¬ã€‚</description>
      <content:encoded><![CDATA[<p><img loading="lazy" src="img/dutir%e9%97%ae%e9%a2%98.png" alt=""  />
</p>
<h2 id="æœ¬æ–‡èµ„æ–™">æœ¬æ–‡èµ„æ–™</h2>
<p><a href="DUTIR%E9%97%AE%E9%A2%98.zip">ç‚¹å‡»ä¸‹è½½æœ¬æ–‡èµ„æ–™</a></p>
<br>
<h2 id="è¯å…¸æ±¡æŸ“äº†">è¯å…¸æ±¡æŸ“äº†</h2>
<p>å®åœ¨æŠ±æ­‰ï¼Œå¤§é‚“çš„ç²—å¿ƒå¯¼è‡´è¯å…¸DUTIRè¢«æ±¡æŸ“ã€‚å¤§å®¶å¦‚æœä½¿ç”¨cntextä¸­çš„DUTIRï¼Œéº»çƒ¦æ›´æ–°è‡³1.7.2ç‰ˆæœ¬ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="nb">print</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
<span class="n">dutir</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;DUTIR.pkl&#39;</span><span class="p">)</span>
<span class="n">dutir</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">1.7.1

{&#39;DUTIR&#39;: {&#39;å“€&#39;: [&#39;æ€€æƒ³&#39;, &#39;æ²»ä¸è€Œæ£¼&#39;, &#39;ä¼¤å®³&#39;,...],
           &#39;å¥½&#39;: [&#39;è¿›è´¤é»œå¥¸&#39;, &#39;æ¸…é†‡&#39;, &#39;æ”¾è¾¾&#39;, ...],
           &#39;æƒŠ&#39;: [&#39;æƒŠå¥‡ä¸å·²&#39;, &#39;é­‚æƒŠé­„æƒ•&#39;, &#39;æµ·å¤–å¥‡è°ˆ&#39;,...],
           &#39;æƒ§&#39;: [&#39;å¿¸å¿¸æ€©æ€©&#39;, &#39;è°ˆè™è‰²å˜&#39;, &#39;æ‰‹å¿™è„šä¹±&#39;,...],
           &#39;ä¹&#39;: [&#39;ç™¾é¾„çœ‰å¯¿&#39;, &#39;å¨±å¿ƒ&#39;, &#39;å¦‚æ„&#39;,...],
           &#39;æ€’&#39;: [&#39;é¥®æ¨åå£°&#39;, &#39;æ‰¬çœ‰ç¬ç›®&#39;,...],   
           &#39;æ¶&#39;: [&#39;å‡ºé€ƒ&#39;, &#39;é±¼è‚‰ç™¾å§“&#39;, &#39;ç§»å¤©æ˜“æ—¥&#39;,...]},

 &#39;Desc&#39;: &#39;å¤§è¿ç†å·¥å¤§å­¦æƒ…æ„Ÿæœ¬ä½“åº“ï¼Œç»†ç²’åº¦æƒ…æ„Ÿè¯å…¸ã€‚å«ä¸ƒå¤§ç±»æƒ…ç»ªï¼Œä¾æ¬¡æ˜¯å“€, å¥½, æƒŠ, æƒ§, ä¹, æ€’, æ¶&#39;,

 &#39;Referer&#39;: &#39;å¾ç³å®,æ—é¸¿é£,æ½˜å®‡,ç­‰.æƒ…æ„Ÿè¯æ±‡æœ¬ä½“çš„æ„é€ [J]. æƒ…æŠ¥å­¦æŠ¥, 2008, 27(2): 180-185.&#39;}
</code></pre></div><p>ä¸ƒå¤§ç±»æƒ…ç»ªæœ‰:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">dutir</span><span class="p">[</span><span class="s1">&#39;DUTIR&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">    dict_keys([&#39;å“€&#39;, &#39;å¥½&#39;, &#39;æƒŠ&#39;, &#39;æƒ§&#39;, &#39;ä¹&#39;, &#39;æ€’&#39;, &#39;æ¶&#39;])
</code></pre></div><p>ä¸‹é¢æ˜¯Bug!</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">dutir</span><span class="p">[</span><span class="s1">&#39;DUTIR&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="k">if</span> <span class="s1">&#39;å¼€å¿ƒ&#39;</span> <span class="ow">in</span> <span class="n">dutir</span><span class="p">[</span><span class="s1">&#39;DUTIR&#39;</span><span class="p">][</span><span class="n">key</span><span class="p">]:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ã€Œå¼€å¿ƒã€å‡ºç°åœ¨æƒ…ç»ªã€</span><span class="si">{}</span><span class="s1">ã€‘è¯è¡¨ä¸­&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">    ã€Œå¼€å¿ƒã€å‡ºç°åœ¨æƒ…ç»ªã€ä¹ã€‘è¯è¡¨ä¸­
    ã€Œå¼€å¿ƒã€å‡ºç°åœ¨æƒ…ç»ªã€æ¶ã€‘è¯è¡¨ä¸­
</code></pre></div><p>è¯è¯­ã€Œå¼€å¿ƒã€åŒæ—¶å‡ºç°åœ¨æƒ…ç»ªã€ä¹ã€‘å’Œã€æ¶ã€‘</p>
<br>
<h2 id="dutirè¯å…¸">DUTIRè¯å…¸</h2>
<p>åœ¨ç½‘ä¸Šæ‰¾åˆ°å¤§è¿ç†å·¥å¤§å­¦æƒ…æ„Ÿæœ¬ä½“æ–‡çŒ®ã€è¯å…¸xlsxæ–‡ä»¶ã€‚</p>
<p><img loading="lazy" src="img/dutir%e8%b5%84%e6%96%99.png" alt=""  />
</p>
<p>åˆ¶ä½œæ–¹æ³•ï¼ŒæŠŠ 21 ç§å°æƒ…ç»ªæ±‡æ€»åˆ°å–œæ€’å“€ä¹ç­‰ä¸ƒå¤§ç±»æƒ…ç»ªä¸­ã€‚è¯å…¸è¢«æ±¡æŸ“ï¼Œå¾ˆå¯èƒ½æ˜¯æˆ‘æ±‡æ€»è¿‡ç¨‹ä¸­å‡ºçš„é—®é¢˜ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;å¤§è¿ç†å·¥å¤§å­¦ä¸­æ–‡æƒ…æ„Ÿè¯æ±‡æœ¬ä½“.xlsx&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>è¯è¯­</th>
      <th>è¯æ€§ç§ç±»</th>
      <th>è¯ä¹‰æ•°</th>
      <th>è¯ä¹‰åºå·</th>
      <th>æƒ…æ„Ÿåˆ†ç±»</th>
      <th>å¼ºåº¦</th>
      <th>ææ€§</th>
      <th>è¾…åŠ©æƒ…æ„Ÿåˆ†ç±»</th>
      <th>å¼ºåº¦.1</th>
      <th>ææ€§.1</th>
      <th>Unnamed: 10</th>
      <th>Unnamed: 11</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>è„ä¹±</td>
      <td>adj</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>NN</td>
      <td>7</td>
      <td>2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ç³ŸæŠ¥</td>
      <td>adj</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>NN</td>
      <td>5</td>
      <td>2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>æ—©è¡°</td>
      <td>adj</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>NE</td>
      <td>5</td>
      <td>2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>è´£å¤‡</td>
      <td>verb</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>NN</td>
      <td>5</td>
      <td>2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>è´¼çœ¼</td>
      <td>noun</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>NN</td>
      <td>5</td>
      <td>2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
<br>
<h2 id="æ±‡æ€»ä¸ƒç±»æƒ…ç»ª">æ±‡æ€»ä¸ƒç±»æƒ…ç»ª</h2>
<p><img loading="lazy" src="img/dutir%e4%b8%83%e5%a4%a7%e7%b1%bb.png" alt=""  />
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#ä¹</span>
<span class="n">le_cates</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;PA&#39;</span><span class="p">,</span> <span class="s1">&#39;PE&#39;</span><span class="p">]</span>
<span class="c1">#å¥½</span>
<span class="n">hao_cates</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;PD&#39;</span><span class="p">,</span> <span class="s1">&#39;PH&#39;</span><span class="p">,</span> <span class="s1">&#39;PG&#39;</span><span class="p">,</span> <span class="s1">&#39;PB&#39;</span><span class="p">,</span> <span class="s1">&#39;PK&#39;</span><span class="p">]</span>
<span class="c1"># æ€’</span>
<span class="n">nu_cates</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;NA&#39;</span><span class="p">]</span>
<span class="c1">#å“€</span>
<span class="n">ai_cates</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;NB&#39;</span><span class="p">,</span> <span class="s1">&#39;NJ&#39;</span><span class="p">,</span> <span class="s1">&#39;NH&#39;</span><span class="p">,</span> <span class="s1">&#39;PF&#39;</span><span class="p">]</span>
<span class="c1"># æƒ§</span>
<span class="n">ju_cates</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;NI&#39;</span><span class="p">,</span> <span class="s1">&#39;NC&#39;</span><span class="p">,</span> <span class="s1">&#39;NG&#39;</span><span class="p">]</span>
<span class="c1"># æ¶</span>
<span class="n">wu_cates</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;NE&#39;</span><span class="p">,</span> <span class="s1">&#39;ND&#39;</span><span class="p">,</span> <span class="s1">&#39;NN&#39;</span><span class="p">,</span> <span class="s1">&#39;NK&#39;</span><span class="p">,</span> <span class="s1">&#39;NL&#39;</span><span class="p">]</span>
<span class="c1"># æƒŠ</span>
<span class="n">jing_cates</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;PC&#39;</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">emotion</span><span class="p">(</span><span class="n">cates</span><span class="p">):</span>
    <span class="n">dfs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">cate</span> <span class="ow">in</span> <span class="n">cates</span><span class="p">:</span>
        <span class="n">sdf</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;æƒ…æ„Ÿåˆ†ç±»&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">cate</span><span class="p">]</span>
        <span class="n">dfs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sdf</span><span class="p">)</span>
    <span class="n">res_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">dfs</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">res_df</span><span class="p">[</span><span class="s1">&#39;è¯è¯­&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># æƒ…ç»ªã€ä¹ã€‘çš„è¯è¯­æœ‰ï¼š</span>
<span class="n">le_words</span> <span class="o">=</span> <span class="n">emotion</span><span class="p">(</span><span class="n">cates</span><span class="o">=</span><span class="n">le_cates</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">le_words</span><span class="p">[:</span><span class="mi">10</span><span class="p">])</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">    [&#39;ç‘é›ª&#39;, &#39;ç¥é‡‡&#39;, &#39;å–œäºº&#39;, &#39;æ€¡æ‚¦&#39;, &#39;è¿›ç›Š&#39;, &#39;å¥å‡¯&#39;, &#39;é¸¾å‡¤å’Œé¸£&#39;, &#39;ç‰¹ç­‰&#39;, &#39;æ¬¢å¿«&#39;, &#39;å¦‚æ„&#39;]
</code></pre></div><br>
<h2 id="åˆ¶ä½œdutirpkl">åˆ¶ä½œDUTIR.pkl</h2>
<p>å°†DUTIRä»‹ç»ã€æ–‡çŒ®å‡ºå¤„ã€å¯¹åº”çš„è¯å…¸æ±‡æ€»åˆ°å­—å…¸ï¼Œå¹¶åˆ¶ä½œç”ŸæˆDUTIR.pklæ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">dutir</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

<span class="n">dutir</span><span class="p">[</span><span class="s1">&#39;ä¹&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">senti</span><span class="p">(</span><span class="n">cates</span><span class="o">=</span><span class="n">ju_cates</span><span class="p">)</span>
<span class="n">dutir</span><span class="p">[</span><span class="s1">&#39;å¥½&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">senti</span><span class="p">(</span><span class="n">cates</span><span class="o">=</span><span class="n">hao_cates</span><span class="p">)</span>
<span class="n">dutir</span><span class="p">[</span><span class="s1">&#39;æ€’&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">senti</span><span class="p">(</span><span class="n">cates</span><span class="o">=</span><span class="n">nu_cates</span><span class="p">)</span>
<span class="n">dutir</span><span class="p">[</span><span class="s1">&#39;å“€&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">senti</span><span class="p">(</span><span class="n">cates</span><span class="o">=</span><span class="n">ai_cates</span><span class="p">)</span>
<span class="n">dutir</span><span class="p">[</span><span class="s1">&#39;æƒ§&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">senti</span><span class="p">(</span><span class="n">cates</span><span class="o">=</span><span class="n">ju_cates</span><span class="p">)</span>
<span class="n">dutir</span><span class="p">[</span><span class="s1">&#39;æ¶&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">senti</span><span class="p">(</span><span class="n">cates</span><span class="o">=</span><span class="n">e_cates</span><span class="p">)</span>
<span class="n">dutir</span><span class="p">[</span><span class="s1">&#39;æƒŠ&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">senti</span><span class="p">(</span><span class="n">cates</span><span class="o">=</span><span class="n">jing_cates</span><span class="p">)</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;DUTIR&#39;</span><span class="p">:</span> <span class="n">dutir</span><span class="p">,</span>
        <span class="s1">&#39;Desc&#39;</span><span class="p">:</span> <span class="s1">&#39;å¤§è¿ç†å·¥å¤§å­¦æƒ…æ„Ÿæœ¬ä½“åº“ï¼Œç»†ç²’åº¦æƒ…æ„Ÿè¯å…¸ã€‚å«ä¸ƒå¤§ç±»æƒ…ç»ªï¼Œä¾æ¬¡æ˜¯å“€, å¥½, æƒŠ, æƒ§, ä¹, æ€’, æ¶&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Referer&#39;</span><span class="p">:</span> <span class="s1">&#39;å¾ç³å®,æ—é¸¿é£,æ½˜å®‡,ç­‰.æƒ…æ„Ÿè¯æ±‡æœ¬ä½“çš„æ„é€ [J]. æƒ…æŠ¥å­¦æŠ¥, 2008, 27(2): 180-185.&#39;</span><span class="p">}</span>


<span class="kn">import</span> <span class="nn">pickle</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;DUTIR.pkl&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</code></pre></div><br>
<h2 id="æ›´æ–°cntext">æ›´æ–°cntext</h2>
<p>è§£å†³DUTIRè¯å…¸é—®é¢˜ï¼Œ éœ€æ›´æ–°è‡³1.7.9ç‰ˆæœ¬ã€‚</p>
<p><strong>pip3 install cntext==1.7.9</strong></p>
<p>ç°åœ¨æˆ‘ä»¬æ£€æŸ¥ä¸‹åˆšåˆšçš„é—®é¢˜</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="nb">print</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>

<span class="n">dutir</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;DUTIR.pkl&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">dutir</span><span class="p">[</span><span class="s1">&#39;DUTIR&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="k">if</span> <span class="s1">&#39;å¼€å¿ƒ&#39;</span> <span class="ow">in</span> <span class="n">dutir</span><span class="p">[</span><span class="s1">&#39;DUTIR&#39;</span><span class="p">][</span><span class="n">key</span><span class="p">]:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ã€Œå¼€å¿ƒã€åªå‡ºç°åœ¨æƒ…ç»ªã€</span><span class="si">{}</span><span class="s1">ã€‘è¯è¡¨ä¸­&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">    1.7.9
    ã€Œå¼€å¿ƒã€åªå‡ºç°åœ¨æƒ…ç»ªã€æ¶ã€‘è¯è¡¨ä¸­
</code></pre></div><p><br><br></p>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>sklearnexåº“ | è®©ä½ çš„scikit-learnä»£ç åŠ é€Ÿç™¾å€</title>
      <link>https://hidadeng.github.io/blog/speed_up_sklearn_code_with_sklearnex/</link>
      <pubDate>Sat, 18 Jun 2022 16:40:10 +0600</pubDate>
      
      <guid>/blog/speed_up_sklearn_code_with_sklearnex/</guid>
      <description>ã€Œscikit-learnã€ä½œä¸ºç»å…¸çš„æœºå™¨å­¦ä¹ æ¡†æ¶ï¼Œå…¶è¿ç®—é€Ÿåº¦ä¸€ç›´å¹¿å—ç”¨æˆ·çš„è¯Ÿç—…ã€‚ä»Šå¤©åˆ†äº«ä¸€ä¸ªæ–°åŒ… ã€Œsklearnexã€ï¼Œå¯ä»¥åœ¨ä¸æ”¹å˜åŸæœ‰ä»£ç çš„åŸºç¡€ä¸Šï¼Œè·å¾—æ•°åå€ç”šè‡³ä¸Šåƒå€çš„æ•ˆç‡æå‡ã€‚</description>
      <content:encoded><![CDATA[<p>ã€Œscikit-learnã€ä½œä¸ºç»å…¸çš„æœºå™¨å­¦ä¹ æ¡†æ¶ï¼Œå…¶è¿ç®—é€Ÿåº¦ä¸€ç›´å¹¿å—ç”¨æˆ·çš„è¯Ÿç—…ã€‚ä»Šå¤©åˆ†äº«ä¸€ä¸ªæ–°åŒ… ã€Œsklearnexã€ï¼Œå¯ä»¥åœ¨ä¸æ”¹å˜åŸæœ‰ä»£ç çš„åŸºç¡€ä¸Šï¼Œè·å¾—æ•°åå€ç”šè‡³ä¸Šåƒå€çš„æ•ˆç‡æå‡ã€‚</p>
<br>
<h2 id="sklearnexç®€ä»‹">sklearnexç®€ä»‹</h2>
<p>å€ŸåŠ©è‹±ç‰¹å°”Â® Extension for Scikit-learnï¼Œæ‚¨å¯ä»¥åŠ é€Ÿæ‚¨çš„ Scikit-learn åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”ä¸éœ€ä¿®æ”¹ Scikit-LearnåŸæœ‰ä»£ç ç»“æ„ã€‚ è‹±ç‰¹å°”Â® Extension for Scikit-learnæ˜¯ä¸€æ¬¾å…è´¹è½¯ä»¶ AI åŠ é€Ÿå™¨ï¼Œå¯å¸¦æ¥è¶…è¿‡ 10-100 å€çš„åŠ é€Ÿã€‚</p>
<br>
<h2 id="å®‰è£…sklearnex">å®‰è£…sklearnex</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip3 install notebook scikit-learn-intelex
</code></pre></div><p><br><br></p>
<h2 id="å¿«é€Ÿä¸Šæ‰‹">å¿«é€Ÿä¸Šæ‰‹</h2>
<h3 id="scikit-learnåŸä»£ç ">scikit-learnåŸä»£ç </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">sklearn.cluster</span> <span class="kn">import</span> <span class="n">KMeans</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">],</span>
              <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>

<span class="n">kmeans</span> <span class="o">=</span> <span class="n">KMeans</span><span class="p">(</span><span class="n">n_clusters</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;kmeans.labels_ = </span><span class="si">{</span><span class="n">kmeans</span><span class="o">.</span><span class="n">labels_</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">kmeans.labels_ = [1 1 1 0 0 0]
</code></pre></div><br>
<h3 id="åŠ é€Ÿä»£ç ">åŠ é€Ÿä»£ç </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">sklearnex</span> <span class="kn">import</span> <span class="n">patch_sklearn</span>
<span class="n">patch_sklearn</span><span class="p">()</span> <span class="c1">#å¯åŠ¨åŠ é€Ÿè¡¥ä¸</span>

<span class="c1"># åŠ é€Ÿè¡¥ä¸æ”¾ç½®äºsklearnä¹‹å‰</span>
<span class="kn">from</span> <span class="nn">sklearn.cluster</span> <span class="kn">import</span> <span class="n">KMeans</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">],</span>
              <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="n">kmeans</span> <span class="o">=</span> <span class="n">KMeans</span><span class="p">(</span><span class="n">n_clusters</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;kmeans.labels_ = </span><span class="si">{</span><span class="n">kmeans</span><span class="o">.</span><span class="n">labels_</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">kmeans.labels_ = [1 1 1 0 0 0]
</code></pre></div><br>
<h3 id="å»æ‰åŠ é€Ÿ">å»æ‰åŠ é€Ÿ</h3>
<p>ä¸€èˆ¬ä½¿ç”¨sklearnçš„ç¯å¢ƒæ˜¯jupyterå†…ï¼Œå¦‚æœä½¿ç”¨äº†sklearnexçš„åŠ é€ŸåŠŸèƒ½ï¼Œé‚£ä¹ˆæ•´ä¸ªjupyteræ–‡ä»¶éƒ½æ˜¯åŠ é€Ÿç¯å¢ƒã€‚å¦‚æœæƒ³å›åˆ°å¸¸è§„é€Ÿåº¦ï¼Œå¯ä»¥åœ¨æœºå™¨å­¦ä¹ ç®—æ³•ä¹‹å‰ä½¿ç”¨unpatch_sklearn()å›åˆ°sklearnæ­£å¸¸é€Ÿåº¦</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">sklearnex</span> <span class="kn">import</span> <span class="n">unpatch_sklearn</span>

<span class="n">unpatch_sklearn</span><span class="p">()</span>

<span class="c1"># Re-import scikit-learn algorithms after the unpatch:</span>
<span class="kn">from</span> <span class="nn">sklearn.cluster</span> <span class="kn">import</span> <span class="n">KMeans</span>
</code></pre></div><p><br><br></p>
<h2 id="æ•ˆç‡å¯¹æ¯”">æ•ˆç‡å¯¹æ¯”</h2>
<p>æŒ‰ç…§å®˜æ–¹è¯´æ³•ï¼Œè¶Šå¼ºåŠ²çš„CPUå¯ä»¥è·å¾—çš„æ€§èƒ½æå‡æ¯”ä¾‹ä¹Ÿä¼šæ›´é«˜ï¼Œä¸‹å›¾æ˜¯å®˜æ–¹åœ¨<code>Intel Xeon Platinum 8275CL</code>å¤„ç†å™¨ä¸‹æµ‹è¯•äº†ä¸€ç³»åˆ—ç®—æ³•åå¾—å‡ºçš„æ€§èƒ½æå‡ç»“æœï¼Œä¸ä»…å¯ä»¥æå‡è®­ç»ƒé€Ÿåº¦ï¼Œè¿˜å¯ä»¥æå‡æ¨¡å‹æ¨ç†é¢„æµ‹é€Ÿåº¦ï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹ç”šè‡³è¾¾åˆ°æ•°åƒå€çš„æ€§èƒ½æå‡ã€‚</p>
<p><img loading="lazy" src="scikit-learn-acceleration-compare.png" alt=""  />
</p>
<br>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Wordify | å‘ç°å’ŒåŒºåˆ†æ¶ˆè´¹è€…è¯æ±‡çš„å·¥å…·</title>
      <link>https://hidadeng.github.io/blog/jcr_wordify/</link>
      <pubDate>Sun, 15 May 2022 10:43:10 +0600</pubDate>
      
      <guid>/blog/jcr_wordify/</guid>
      <description>å·¥å…·ä»‹ç»ï¼› åœ¨ä¸åŒä¸Šä¸‹æ–‡ä¸­ï¼Œæ¶ˆè´¹è€…çš„å•è¯ä½¿ç”¨å¦‚ä½•å˜åŒ–</description>
      <content:encoded><![CDATA[<p>JCR2021ä¸€ç¯‡è½¯ä»¶ä»‹ç»ï¼Œæ”¯æŒä¸­è‹±æ–‡åœ¨å†…çš„å¤šç§è¯­è¨€ã€‚</p>
<blockquote>
<p>Hovy, D., Melumad, S. and Inman, J.J., 2021. Wordify: a tool for discovering and differentiating consumer vocabularies. <em>Journal of Consumer Research</em>, <em>48</em>(3), pp.394-414.</p>
</blockquote>
<br>
<h2 id="æ‘˜è¦">æ‘˜è¦:</h2>
<p>è¿™é¡¹å·¥ä½œä»‹ç»äº†ä¸€ä¸ªå…è´¹æ˜“ç”¨çš„åœ¨çº¿æ–‡æœ¬åˆ†æå·¥å…·<strong>Wordify</strong>ï¼Œç”¨äºäº†è§£â€<strong>åœ¨ä¸åŒä¸Šä¸‹æ–‡ä¸­ï¼Œæ¶ˆè´¹è€…çš„å•è¯ä½¿ç”¨å¦‚ä½•å˜åŒ–</strong>â€œã€‚Wordify ä½¿ç”¨éšæœºé€»è¾‘å›å½’ (RLR) æ¥è¯†åˆ«æœ€èƒ½åŒºåˆ†æ¥è‡ªä¸åŒé¢„åˆ†ç±»æ–‡æœ¬çš„ç”¨è¯å·®å¼‚ï¼Œä¾‹å¦‚ç”·æ€§ä¸å¥³æ€§æ’°å†™çš„å¸–å­ç”¨è¯å·®å¼‚ï¼Œæˆ–å¥½è¯„ä¸å·®è¯„çš„ç”¨è¯å·®å¼‚ã€‚æˆ‘ä»¬æä¾›äº†è¯´æ˜æ€§ç¤ºä¾‹ï¼Œä»¥å±•ç¤ºè¯¥å·¥å…·å¦‚ä½•ç”¨äºå¤šç§ç”¨é€”ï¼Œä¾‹å¦‚ (1) æ­ç¤ºæ¶ˆè´¹è€…åœ¨æ™ºèƒ½æ‰‹æœºå’Œ PC ä¸Šæ’°å†™è¯„è®ºæ—¶ä½¿ç”¨çš„ç‹¬ç‰¹è¯æ±‡ï¼Œ(2) å‘ç°æ¨æ–‡ä¸­ä½¿ç”¨çš„è¯è¯­åœ¨å‡å®šçš„æ”¯æŒè€…å’Œåå¯¹æœ‰äº‰è®®çš„å¹¿å‘Šï¼Œä»¥åŠ (3) æ‰©å±•åŸºäºå­—å…¸çš„æƒ…ç»ªæµ‹é‡å·¥å…·çš„å­—å…¸ã€‚æˆ‘ä»¬å‡­ç»éªŒè¡¨æ˜ï¼ŒWordify çš„ RLR ç®—æ³•åœ¨åŒºåˆ†è¯æ±‡æ–¹é¢æ¯”æ”¯æŒå‘é‡æœºå’Œå¡æ–¹é€‰æ‹©å™¨è¡¨ç°æ›´å¥½ï¼ŒåŒæ—¶åœ¨è®¡ç®—æ—¶é—´ä¸Šå…·æœ‰æ˜¾ç€ä¼˜åŠ¿ã€‚è¿˜è®¨è®ºäº† Wordify ä¸å…¶ä»–æ–‡æœ¬åˆ†æå·¥å…·çš„ç»“åˆä½¿ç”¨ï¼Œä¾‹å¦‚æ¦‚ç‡ä¸»é¢˜å»ºæ¨¡å’Œæƒ…æ„Ÿåˆ†æï¼Œä»¥æ›´æ·±å…¥åœ°äº†è§£è¯­è¨€åœ¨æ¶ˆè´¹è€…è¡Œä¸ºä¸­çš„ä½œç”¨ã€‚</p>
<p><strong>å…³é”®è¯</strong>ï¼šæ–‡æœ¬åˆ†æï¼Œè‡ªç„¶è¯­è¨€å¤„ç†ï¼Œè¯­è¨€ï¼Œæƒ…æ„Ÿåˆ†æ</p>
<br>
<h2 id="æœ¬åœ°wordifyé…ç½®">æœ¬åœ°wordifyé…ç½®</h2>
<p>ä½œè€…åœ¨githubå…¬å¼€äº†wordifyçš„ä»£ç ï¼Œä»“åº“åœ°å€ <a href="https://github.com/MilaNLProc/wordify-webapp-streamlit">https://github.com/MilaNLProc/wordify-webapp-streamlit</a></p>
<p>å¤§è‡´çš„ä½¿ç”¨æ­¥éª¤</p>
<ol>
<li>wordifyè¦é…ç½®spacyè¯­è¨€æ¨¡å‹ï¼Œé…ç½®æ–¹æ³•å‚ç…§ä»¥å‰åˆ†äº«çš„<a href="https://textdata.cn/blog/spacy_industry_application/">spacyäº§ä¸šçº§è‡ªç„¶è¯­è¨€å¤„ç†åŒ…</a></li>
<li>åˆ°githubä»“åº“ä¸‹è½½ä»£ç ï¼Œè§£å‹è‡³æ¡Œé¢</li>
<li>æ‰“å¼€å‘½ä»¤è¡Œ, æ‰§è¡Œå‘½ä»¤<code>cd desktop/wordify-webapp-streamlit-main</code></li>
<li>å‘½ä»¤è¡Œæ‰§è¡Œ<code>pip3 install -r requirements.txt</code></li>
<li>å‘½ä»¤è¡Œæ‰§è¡Œ<code>streamlit run app.py</code>ï¼Œ æ­¤æ—¶å‘½ä»¤è¡Œä¸­å‡ºç°æœ¬åœ°æœåŠ¡åœ°å€(ç±»ä¼¼äºç½‘ç«™)ï¼Œæµè§ˆå™¨æ‰“å¼€è¿™ä¸ªåœ°å€å³å¯</li>
</ol>
<p><strong>æœ¬åœ°é…ç½®æ¯”è¾ƒæœ‰éš¾åº¦ï¼Œå»ºè®®ä½¿ç”¨åœ¨çº¿ç‰ˆhttps://wordify.unibocconi.it/</strong></p>
<br>
<h2 id="åœ¨çº¿å±•ç¤ºç½‘ç«™">åœ¨çº¿å±•ç¤ºç½‘ç«™</h2>
<h3 id="ç½‘å€">ç½‘å€</h3>
<p><a href="https://wordify.unibocconi.it/">https://wordify.unibocconi.it/</a></p>
<p><img loading="lazy" src="img/wordify_streamilit_website.png" alt=""  />
</p>
<h3 id="ä½¿ç”¨æ–¹æ³•">ä½¿ç”¨æ–¹æ³•</h3>
<ul>
<li>
<p>è¡¨æ ¼æ–‡ä»¶éœ€å«ä¸¤ä¸ªå­—æ®µåï¼Œåˆ†åˆ«ä¸º<strong>text</strong>å’Œ<strong>label</strong>, ä¸­æ–‡æ•°æ®éœ€è¦å…ˆä¸ºç”¨ç©ºæ ¼é—´éš”è¯è¯­çš„æ–‡æœ¬æ ·å¼ã€‚<a href="test_chinese.xlsx">ä¸­æ–‡æ ·ä¾‹æ–‡ä»¶</a></p>
</li>
<li>
<p>è¡¨æ ¼æ–‡ä»¶æ”¯æŒcsvã€xlsxã€tsvã€parquetï¼Œ10Mä»¥å†…ã€‚æ•°æ®ä¸Šä¼ æˆåŠŸåï¼Œé¡µé¢ä¼šå‘ç”Ÿå˜åŒ–</p>
</li>
<li>
<p>åœ¨çº¿é¡µé¢åœ¨è¿è¡Œæ—¶ä¸€å®šä¸è¦åˆ·æ–°ï¼Œè¿™æ ·ä¼šä¸­æ–­æ•°æ®åˆ†æçš„è¿‡ç¨‹</p>
</li>
<li>
<p>Wordify çš„æ€§èƒ½å–å†³äºæ–‡ä»¶ä¸­å„ä¸ªæ–‡æœ¬çš„é•¿åº¦ã€‚</p>
</li>
</ul>
<p><img loading="lazy" src="img/wordify_chinese_process.png" alt=""  />
</p>
<br>
<h2 id="ç‚¹è¯„">ç‚¹è¯„</h2>
<p>ä»¥å¾€çš„æ–‡æœ¬åˆ†ææ€è·¯ï¼Œå¤§å¤šæ— è§†<strong>æ··æ‚æ•ˆåº”Confound</strong>ï¼Œä¸»è¦ä»æ–‡æœ¬ä¸­æŠ½å–ä¸€äº›å˜é‡ï¼Œå¦‚æƒ…æ„Ÿå€¼ï¼Œç”¨äºåæœŸè®¡é‡å»ºæ¨¡ï¼Œè¯•å›¾æŒ–æ˜<strong>æ–‡æœ¬æŒ‡æ ‡(å¦‚æƒ…æ„Ÿå€¼)<strong>ä¸</strong>Outcome</strong>ä¹‹é—´çš„å› æœå…³ç³»ã€‚</p>
<blockquote>
<p>æ··æ‚æ•ˆåº”ï¼Œä¾‹å¦‚ç ”ç©¶æ¨æ–‡æ­£è´Ÿé¢æƒ…æ„Ÿå¯¹ç½‘å‹ç‚¹å‡»è¡Œä¸ºçš„å½±å“ã€‚</p>
<p>ç ”ç©¶çš„æœºåˆ¶å¯ä»¥ç®€åŒ–ä¸º<strong>ä¸åŒçš„æ–‡æœ¬æƒ…æ„Ÿ&ndash;&gt;äº§ç”Ÿä¸åŒçš„ç½‘å‹ç‚¹å‡»</strong></p>
<p>ä½†æ˜¯æœ‰å¯èƒ½ä¸å…¨æ˜¯æƒ…æ„Ÿå½±å“äº†ç½‘å‹çš„ç‚¹å‡»ï¼Œä½œè€…å­˜åœ¨æ€§åˆ«å·®å¼‚ï¼Œå¥³æ€§æ¯”ç”·æ€§æ›´å®¹æ˜“è¡¨è¾¾ç§¯ææ–‡æœ¬ä¿¡æ¯ï¼Œè€Œä¸”åœ¨äº’è”ç½‘ä¸–ç•Œå¥³æ€§æ¯”ç”·æ€§å¯èƒ½æ›´æœ‰å¸å¼•åŠ›ã€‚</p>
</blockquote>
<p>è®ºæ–‡ä¸­æ²¡æåŠConfoundæ•ˆåº”ï¼Œä½†ç²—ç•¥æµè§ˆä¸‹ï¼Œwordifyåˆ›æ–°åœ°è€ƒè™‘äº†confoundåœºæ™¯ï¼Œé€šè¿‡æ–‡æœ¬åˆ†æï¼Œçœ‹çœ‹ä¸åŒç¾¤ä½“ç”¨è¯çš„å·®å¼‚ã€‚</p>
<p>wordifyçš„ç¼ºç‚¹æœ¬åœ°ç‰ˆé…ç½®å¤ªéš¾ï¼Œç½‘é¡µç‰ˆè¿è¡Œå¤ªæ…¢ã€‚0.6Mçš„ä¸­æ–‡æ•°æ®ï¼Œæˆ‘ç­‰äº†20minï¼Œè¿˜æ˜¯æ²¡æœ‰è·‘å‡ºç»“æœï¼Œæœæ–­å…³é—­åœ¨çº¿ç½‘é¡µã€‚æ€»ä¹‹æ„Ÿè§‰æ²¡æœ‰æ–‡ä¸­è¯´çš„é‚£ä¹ˆæ˜“ç”¨ï¼Œé—¨æ§›è¿˜æ˜¯å¤ªé«˜äº†ã€‚æœ‰è€å¿ƒçš„æœ‹å‹ï¼Œå¦‚æœæ„Ÿå…´è¶£ï¼Œå¯ä»¥å»è¯•è¯•ã€‚</p>
<p>å¦‚æœç ”ç©¶è€ƒè™‘æ–‡æœ¬çš„confoundæ•ˆåº”ï¼Œå¯ä»¥å‚è€ƒ<strong>causalnlpåŒ…</strong>ï¼Œè™½ç„¶é…ç½®éš¾ï¼Œä½†æ˜¯è¿è¡Œé€Ÿåº¦è¿˜æ˜¯æœ‰ä¿è¯ã€‚</p>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>karateclubåº“ | è®¡ç®—ç¤¾äº¤ç½‘ç»œä¸­èŠ‚ç‚¹çš„å‘é‡</title>
      <link>https://hidadeng.github.io/blog/karateclub_tutorial/</link>
      <pubDate>Tue, 10 May 2022 09:40:10 +0600</pubDate>
      
      <guid>/blog/karateclub_tutorial/</guid>
      <description>ä½¿ç”¨karateclubè®¡ç®—ç¤¾äº¤ç½‘ç»œä¸­èŠ‚ç‚¹çš„å‘é‡ï¼Œæœ‰äº†èŠ‚ç‚¹çš„å‘é‡ï¼Œå°±å¯ä»¥åŸºäºå‘é‡æ€ç»´æ¯”è¾ƒèŠ‚ç‚¹å¼‚åŒ</description>
      <content:encoded><![CDATA[<p><a href="https://karateclub.readthedocs.io/en/latest">karateclub</a>æ˜¯å°è§„æ¨¡å›¾æŒ–æ˜ç ”ç©¶çš„ä¸€æŠŠç‘å£«å†›åˆ€ï¼Œ å¯ä»¥å¯¹å›¾å½¢ç»“æ„åŒ–æ•°æ®è¿›è¡Œæ— ç›‘ç£å­¦ä¹ ã€‚</p>
<ul>
<li>é¦–å…ˆï¼Œå¯ä»¥è®¡ç®—å‡ºèŠ‚ç‚¹ã€å›¾çš„ç‰¹å¾å‘é‡</li>
<li>å…¶æ¬¡ï¼Œå®ƒåŒ…æ‹¬å¤šç§é‡å å’Œéé‡å çš„ç¤¾åŒºå‘ç°æ–¹æ³•ã€‚</li>
</ul>
<br>
<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="karateclub_example_code.zip">click to download</a></p>
<br>
<h2 id="æ•°æ®æ ¼å¼">æ•°æ®æ ¼å¼</h2>
<p>karateclubå‡è®¾ç”¨æˆ·æä¾›çš„ç”¨äº<strong>èŠ‚ç‚¹åµŒå…¥</strong>å’Œ<strong>ç¤¾åŒºæ£€æµ‹</strong>çš„ NetworkX å›¾å…·æœ‰ä»¥ä¸‹é‡è¦å±æ€§ï¼š</p>
<ul>
<li>èŠ‚ç‚¹ç”¨æ•´æ•°ç´¢å¼•</li>
<li>èŠ‚ç‚¹ç´¢å¼•ä»é›¶å¼€å§‹ï¼Œç´¢å¼•æ˜¯è¿ç»­çš„</li>
</ul>
<p><strong>èŠ‚ç‚¹çš„å±æ€§çŸ©é˜µ</strong>å¯ä»¥æä¾›ä¸º scipy sparse å’Œ numpy æ•°ç»„ã€‚è¿”å›çš„ç¤¾åŒºæˆå‘˜å­—å…¸å’ŒåµŒå…¥çŸ©é˜µä½¿ç”¨ç›¸åŒçš„æ•°å­—è¿ç»­ç´¢å¼•ã€‚</p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">pip3</span> <span class="n">install</span> <span class="n">karateclub</span>
</code></pre></div><br>
<h2 id="å‡†å¤‡æ•°æ®">å‡†å¤‡æ•°æ®</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;karate_club_graph.csv&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>

<span class="nb">print</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">to_markdown</span><span class="p">())</span>

<span class="nb">print</span><span class="p">()</span>

<span class="n">edges</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;src&#39;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;tgt&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">edges</span><span class="p">)</span>

</code></pre></div><p>Run</p>
<pre><code>Index(['src', 'tgt'], dtype='object')

|    |   src |   tgt |
|---:|------:|------:|
|  0 |     0 |     1 |
|  1 |     0 |     2 |
|  2 |     0 |     3 |
|  3 |     0 |     4 |
|  4 |     0 |     5 |

[(0, 1), (0, 2), (0, 3), (0, 4), (0, 5), (0, 6), (0, 7), (0, 8), (0, 10), (0, 11), (0, 12), (0, 13), (0, 17), (0, 19), (0, 21), (0, 31), (1, 2), (1, 3), (1, 7), (1, 13), (1, 17), (1, 19), (1, 21), (1, 30), (2, 3), (2, 7), (2, 8), (2, 9), (2, 13), (2, 27), (2, 28), (2, 32), (3, 7), (3, 12), (3, 13), (4, 6), (4, 10), (5, 6), (5, 10), (5, 16), (6, 16), (8, 30), (8, 32), (8, 33), (9, 33), (13, 33), (14, 32), (14, 33), (15, 32), (15, 33), (18, 32), (18, 33), (19, 33), (20, 32), (20, 33), (22, 32), (22, 33), (23, 25), (23, 27), (23, 29), (23, 32), (23, 33), (24, 25), (24, 27), (24, 31), (25, 31), (26, 29), (26, 33), (27, 33), (28, 31), (28, 33), (29, 32), (29, 33), (30, 32), (30, 33), (31, 32), (31, 33), (32, 33)]
</code></pre>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>

<span class="n">graph</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
<span class="n">graph</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span><span class="n">edges</span><span class="p">)</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<p>â€‹ <br>
<img loading="lazy" src="output_4_0.png" alt="png"  />

â€‹</p>
<br>
<h2 id="ç¤¾åŒºå‘ç°">ç¤¾åŒºå‘ç°</h2>
<p>ç°åœ¨è®©æˆ‘ä»¬ä½¿ç”¨LabelPropagationç®—æ³•æ¥å‘ç°ç½‘ç»œä¸­çš„ç¤¾åŒºç»“æ„ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">karateclub</span> <span class="kn">import</span> <span class="n">LabelPropagation</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">LabelPropagation</span><span class="p">()</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
<span class="n">cluster_membership</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_memberships</span><span class="p">()</span>
<span class="n">cluster_membership</span>
</code></pre></div><p>Run</p>
<pre><code>{23: 8,
 33: 8,
 5: 10,
 7: 1,
 28: 31,
 4: 10,
 3: 1,
 31: 31,
 20: 8,
 19: 1,
 6: 10,
 32: 8,
 29: 8,
 9: 1,
 14: 8,
 2: 1,
 0: 1,
 17: 1,
 25: 31,
 22: 8,
 11: 1,
 13: 1,
 1: 1,
 24: 31,
 15: 8,
 18: 8,
 26: 8,
 27: 8,
 16: 10,
 12: 1,
 30: 8,
 21: 1,
 8: 8,
 10: 10}
</code></pre>
<p>åœ¨æœ‰34ä¸ªèŠ‚ç‚¹çš„å›¾ä¸­ï¼Œå‘ç°äº†4ä¸ªç¤¾åŒºï¼Œåˆ†åˆ«æ˜¯1ã€8ã€10ã€31ã€‚</p>
<br>
<h2 id="node-embeddings">Node embeddings</h2>
<p>è®¡ç®—èŠ‚ç‚¹çš„å‘é‡ã€‚â€‹ä½¿ç”¨ Diff2vec æ‹Ÿåˆæ•°æ®çš„èŠ‚ç‚¹åµŒå…¥(å‘é‡)ï¼Œå…·æœ‰å°‘é‡ç»´åº¦ã€æ¯ä¸ªæºèŠ‚ç‚¹çš„æ‰©æ•£å’ŒçŸ­æ¬§æ‹‰æ¸¸èµ°ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">karateclub</span> <span class="kn">import</span> <span class="n">Diff2Vec</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">Diff2Vec</span><span class="p">(</span><span class="n">diffusion_number</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> 
                 <span class="n">diffusion_cover</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> 
                 <span class="n">dimensions</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_embedding</span><span class="p">()</span>
<span class="n">X</span><span class="o">.</span><span class="n">shape</span>
</code></pre></div><p>Run</p>
<pre><code>(34, 5)
</code></pre>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">X</span>
</code></pre></div><p>Run</p>
<pre><code>array([[ 1.3687179 , -0.33502993, -0.3294797 ,  0.40154558,  1.0270709 ],
       [ 0.88167036, -0.3201618 , -0.34293872,  0.41519755,  0.71964073],
       [ 0.8756805 , -0.21934716, -0.33261183,  0.33785722,  0.51631075],
       [ 0.9768452 , -0.39260587, -0.39460638,  0.28851682,  0.8665034 ],
       [ 0.4809215 , -0.28729865, -0.19276802,  0.22588767,  0.07305563],
       [ 0.5580538 , -0.28137547, -0.1947159 ,  0.23712516,  0.49257705],
       [ 0.23477663,  0.04262228,  0.07154325,  0.02909669,  0.33999097],
       [ 1.1882199 , -0.21742308, -0.26985615,  0.44171503,  0.6679048 ],
       [ 1.0287609 , -0.27409104, -0.04119629,  0.30143994,  0.704676  ],
       [ 0.5700088 , -0.26341844,  0.01560158, -0.08039217,  0.41796318],
       [ 0.5753763 , -0.2242508 , -0.1795436 ,  0.0705331 ,  0.46571913],
       [ 0.46763912, -0.17108741, -0.22459361,  0.03058788,  0.05998428],
       [ 0.5500626 , -0.12745889, -0.28661036,  0.16889155,  0.48200938],
       [ 0.6217582 , -0.10251168, -0.0713837 ,  0.13550574,  0.60422456],
       [ 0.9797377 , -0.46282482, -0.09380057,  0.2749968 ,  0.7020155 ],
       [ 0.38830167, -0.30841848, -0.20950563, -0.02130592,  0.0836651 ],
       [ 0.57225037, -0.04150235, -0.1246101 ,  0.06918757,  0.23083903],
       [ 0.6431406 , -0.04898892, -0.05708801,  0.1311793 ,  0.46377632],
       [ 0.541667  , -0.16031542, -0.33119023,  0.10385639,  0.39525154],
       [ 0.65543544, -0.27534947, -0.28757   ,  0.2080029 ,  0.5288213 ],
       [ 0.46381798, -0.07729273, -0.09209982,  0.11292508,  0.36836028],
       [ 0.53826964, -0.09915172, -0.09243581,  0.15036733,  0.5449071 ],
       [ 0.31599265, -0.22078821, -0.02872767,  0.07436654,  0.28573534],
       [ 1.0706906 , -0.27783617, -0.16653039,  0.2631594 ,  0.6408689 ],
       [ 0.67875004, -0.34441757, -0.10262538,  0.2588695 ,  0.38405937],
       [ 0.41786563, -0.10344986, -0.19508548,  0.19657765,  0.22006002],
       [ 0.7855942 , -0.27200857,  0.02204541,  0.09168041,  0.42220354],
       [ 0.7773458 , -0.11727296, -0.24145149,  0.04537854,  0.5737133 ],
       [ 0.75732976, -0.314953  , -0.15383345,  0.02065313,  0.51843405],
       [ 0.7226543 , -0.31919608, -0.18878649,  0.15413427,  0.42012522],
       [ 0.43411565, -0.17342259, -0.28042233,  0.26853496,  0.49947587],
       [ 1.1565564 , -0.36802933, -0.12613232,  0.32381424,  0.75113887],
       [ 1.1192797 , -0.162529  , -0.17195942,  0.39265418,  0.83656436],
       [ 1.2231556 , -0.5336606 , -0.14015286,  0.14054438,  0.5695296 ]],
      dtype=float32)
</code></pre>
<p><br><br></p>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>cntextåº“ |  Pythonæ–‡æœ¬åˆ†æåŒ…æ›´æ–°</title>
      <link>https://hidadeng.github.io/blog/cntext_tutorial/</link>
      <pubDate>Mon, 09 May 2022 09:40:10 +0600</pubDate>
      
      <guid>/blog/cntext_tutorial/</guid>
      <description>æ‰©å±•è¯å…¸ã€æƒ…æ„Ÿåˆ†æã€å¯é˜…è¯»æ€§ï¼Œå†…ç½®9ç§æƒ…æ„Ÿè¯å…¸ï¼Œæ¶µç›–ä¸­è‹±æ–‡</description>
      <content:encoded><![CDATA[<p><a href="https://github.com/hidadeng/cntext"><img loading="lazy" src="https://img.shields.io/badge/cntext-%e4%b8%ad%e6%96%87%e6%96%87%e6%9c%ac%e5%88%86%e6%9e%90%e5%ba%93-orange?style=for-the-badge&amp;logo=appveyor" alt=""  />
</a></p>
<p><a href="version1.2.md">æ—§ç‰ˆcntextå…¥å£</a></p>
<p>ä¸­æ–‡æ–‡æœ¬åˆ†æåº“ï¼Œå¯å¯¹æ–‡æœ¬è¿›è¡Œè¯é¢‘ç»Ÿè®¡ã€è¯å…¸æ‰©å……ã€æƒ…ç»ªåˆ†æã€ç›¸ä¼¼åº¦ã€å¯è¯»æ€§ç­‰</p>
<ul>
<li><a href="https://github.com/hidadeng/cntext">githubåœ°å€</a> <code>https://github.com/hidadeng/cntext</code></li>
<li><a href="https://pypi.org/project/cntext/">pypiåœ°å€</a>  <code>https://pypi.org/project/cntext/</code></li>
<li><a href="https://ke.qq.com/course/482241?tuin=163164df">è§†é¢‘è¯¾-<strong>Pythonç½‘ç»œçˆ¬è™«ä¸æ–‡æœ¬æ•°æ®åˆ†æ</strong></a></li>
</ul>
<p>åŠŸèƒ½æ¨¡å—å«</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> <strong>stats</strong>  æ–‡æœ¬ç»Ÿè®¡æŒ‡æ ‡
<ul>
<li><input checked="" disabled="" type="checkbox"> è¯é¢‘ç»Ÿè®¡</li>
<li><input checked="" disabled="" type="checkbox"> å¯è¯»æ€§</li>
<li><input checked="" disabled="" type="checkbox"> å†…ç½®pklè¯å…¸</li>
<li><input checked="" disabled="" type="checkbox"> <strong>æƒ…æ„Ÿåˆ†æ</strong></li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> <strong>dictionary</strong> æ„å»ºè¯è¡¨(å…¸)
<ul>
<li><input checked="" disabled="" type="checkbox"> Sopmi äº’ä¿¡æ¯æ‰©å……è¯å…¸æ³•</li>
<li><input checked="" disabled="" type="checkbox"> W2Vmodels è¯å‘é‡æ‰©å……è¯å…¸æ³•</li>
<li><input checked="" disabled="" type="checkbox"> Glove Gloveè¯åµŒå…¥æ¨¡å‹</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> <strong>similarity</strong>   æ–‡æœ¬ç›¸ä¼¼åº¦
<ul>
<li><input checked="" disabled="" type="checkbox"> cosç›¸ä¼¼åº¦</li>
<li><input checked="" disabled="" type="checkbox"> jaccardç›¸ä¼¼åº¦</li>
<li><input checked="" disabled="" type="checkbox"> ç¼–è¾‘è·ç¦»ç›¸ä¼¼åº¦</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> <strong>mind.py</strong> è®¡ç®—æ–‡æœ¬ä¸­çš„è®¤çŸ¥æ–¹å‘ï¼ˆæ€åº¦ã€åè§ï¼‰</li>
</ul>
<br>
<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="cntext_examples.zip">click to download</a></p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip install cntext
</code></pre></div><br>
<h2 id="quickstart">QuickStart</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="n">help</span><span class="p">(</span><span class="n">ct</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">Help</span> <span class="nx">on</span> <span class="kn">package</span> <span class="nx">cntext</span><span class="p">:</span>

<span class="nx">NAME</span>
    <span class="nx">cntext</span>

<span class="nx">PACKAGE</span> <span class="nx">CONTENTS</span>
    <span class="nx">mind</span>
    <span class="nx">dictionary</span>
    <span class="nx">similarity</span>
    <span class="nx">stats</span>
</code></pre></div><br>
<h2 id="ä¸€stats">ä¸€ã€stats</h2>
<p>ç›®å‰statså†…ç½®çš„å‡½æ•°æœ‰</p>
<ul>
<li><strong>readability</strong>  æ–‡æœ¬å¯è¯»æ€§</li>
<li><strong>term_freq</strong> è¯é¢‘ç»Ÿè®¡å‡½æ•°</li>
<li><strong>dict_pkl_list</strong>  è·å–cntextå†…ç½®è¯å…¸åˆ—è¡¨(pklæ ¼å¼)</li>
<li><strong>load_pkl_dict</strong> å¯¼å…¥pklè¯å…¸æ–‡ä»¶</li>
<li><strong>sentiment</strong> æƒ…æ„Ÿåˆ†æ</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;å¦‚ä½•çœ‹å¾…ä¸€ç½‘æ–‡ä½œè€…è¢«é»‘å®¢å¤§ä½¬ç›—å·æ”¹æ–‡ï¼Œå› ä¸‡åˆ†æƒ­æ„§è€Œåœæ›´ã€‚&#39;</span>

<span class="n">ct</span><span class="o">.</span><span class="n">term_freq</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Counter({&#39;çœ‹å¾…&#39;: 1,
         &#39;ç½‘æ–‡&#39;: 1,
         &#39;ä½œè€…&#39;: 1,
         &#39;é»‘å®¢&#39;: 1,
         &#39;å¤§ä½¬&#39;: 1,
         &#39;ç›—å·&#39;: 1,
         &#39;æ”¹æ–‡å› &#39;: 1,
         &#39;ä¸‡åˆ†&#39;: 1,
         &#39;æƒ­æ„§&#39;: 1,
         &#39;åœ&#39;: 1})
</code></pre></div><br>
<h3 id="11--readability">1.1  readability</h3>
<p>æ–‡æœ¬å¯è¯»æ€§ï¼ŒæŒ‡æ ‡è¶Šå¤§ï¼Œæ–‡ç« å¤æ‚åº¦è¶Šé«˜ï¼Œå¯è¯»æ€§è¶Šå·®ã€‚</p>
<p>readability(text, lang=&lsquo;chinese&rsquo;)</p>
<ul>
<li>text: æ–‡æœ¬å­—ç¬¦ä¸²æ•°æ®</li>
<li>lang: è¯­è¨€ç±»å‹ï¼Œ&ldquo;chinese&quot;æˆ–&quot;english&rdquo;ï¼Œé»˜è®¤&quot;chinese&quot;</li>
</ul>
<p><strong>ä¸­æ–‡å¯è¯»æ€§</strong> ç®—æ³•å‚è€ƒè‡ª</p>
<blockquote>
<p>å¾å·,å§šæŒ¯æ™”,é™ˆå†¬å.ä¸­æ–‡å¹´æŠ¥å¯è¯»æ€§ï¼šè¡¡é‡ä¸æ£€éªŒ[J].ä¼šè®¡ç ”ç©¶,2021(03):28-44.</p>
<ul>
<li>readability1 &mdash;æ¯ä¸ªåˆ†å¥ä¸­çš„å¹³å‡å­—æ•°</li>
<li>readability2  &mdash;æ¯ä¸ªå¥å­ä¸­å‰¯è¯å’Œè¿è¯æ‰€å çš„æ¯”ä¾‹</li>
<li>readability3  &mdash;å‚è€ƒFog Indexï¼Œ readability3=(readability1+readability2)Ã—0.5</li>
</ul>
</blockquote>
<p>â€‹</p>
<p>ä»¥ä¸Šä¸‰ä¸ªæŒ‡æ ‡è¶Šå¤§ï¼Œéƒ½è¯´æ˜æ–‡æœ¬çš„å¤æ‚ç¨‹åº¦è¶Šé«˜ï¼Œå¯è¯»æ€§è¶Šå·®ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">text1</span> <span class="o">=</span> <span class="s1">&#39;å¦‚ä½•çœ‹å¾…ä¸€ç½‘æ–‡ä½œè€…è¢«é»‘å®¢å¤§ä½¬ç›—å·æ”¹æ–‡ï¼Œå› ä¸‡åˆ†æƒ­æ„§è€Œåœæ›´ã€‚&#39;</span>


<span class="n">ct</span><span class="o">.</span><span class="n">readability</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">{&#39;readability1&#39;: 28.0,
 &#39;readability2&#39;: 0.15789473684210525,
 &#39;readability3&#39;: 14.078947368421053}
</code></pre></div><br>
<p>å¥å­ä¸­çš„ç¬¦å·å˜æ›´ä¼šå½±å“ç»“æœ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">text2</span> <span class="o">=</span> <span class="s1">&#39;å¦‚ä½•çœ‹å¾…ä¸€ç½‘æ–‡ä½œè€…è¢«é»‘å®¢å¤§ä½¬ç›—å·æ”¹æ–‡ï¼Œå› ä¸‡åˆ†æƒ­æ„§è€Œåœæ›´ã€‚&#39;</span>
<span class="n">ct</span><span class="o">.</span><span class="n">readability</span><span class="p">(</span><span class="n">text2</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">{&#39;readability1&#39;: 27.0,
 &#39;readability2&#39;: 0.16666666666666666,
 &#39;readability3&#39;: 13.583333333333334}
</code></pre></div><p><br><br></p>
<h3 id="12--term_freq">1.2  term_freq</h3>
<p>è¯é¢‘ç»Ÿè®¡å‡½æ•°ï¼Œè¿”å›Counterç±»å‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span> 

<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;å¦‚ä½•çœ‹å¾…ä¸€ç½‘æ–‡ä½œè€…è¢«é»‘å®¢å¤§ä½¬ç›—å·æ”¹æ–‡ï¼Œå› ä¸‡åˆ†æƒ­æ„§è€Œåœæ›´ã€‚&#39;</span>

<span class="n">ct</span><span class="o">.</span><span class="n">term_freq</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Counter({&#39;çœ‹å¾…&#39;: 1,
         &#39;ç½‘æ–‡&#39;: 1,
         &#39;ä½œè€…&#39;: 1,
         &#39;é»‘å®¢&#39;: 1,
         &#39;å¤§ä½¬&#39;: 1,
         &#39;ç›—å·&#39;: 1,
         &#39;æ”¹æ–‡å› &#39;: 1,
         &#39;ä¸‡åˆ†&#39;: 1,
         &#39;æƒ­æ„§&#39;: 1,
         &#39;åœ&#39;: 1})
</code></pre></div><br>
<h3 id="13-dict_pkl_list">1.3 dict_pkl_list</h3>
<p>è·å–cntextå†…ç½®è¯å…¸åˆ—è¡¨(pklæ ¼å¼)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="c1"># è·å–cntextå†…ç½®è¯å…¸åˆ—è¡¨(pklæ ¼å¼)</span>
<span class="n">ct</span><span class="o">.</span><span class="n">dict_pkl_list</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[&#39;DUTIR.pkl&#39;,
 &#39;HOWNET.pkl&#39;,
 &#39;sentiws.pkl&#39;,
 &#39;ChineseFinancialFormalUnformalSentiment.pkl&#39;,
 &#39;ANEW.pkl&#39;,
 &#39;LSD2015.pkl&#39;,
 &#39;NRC.pkl&#39;,
 &#39;geninqposneg.pkl&#39;,
 &#39;HuLiu.pkl&#39;,
 &#39;AFINN.pkl&#39;,
 &#39;ADV_CONJ.pkl&#39;,
 &#39;LoughranMcDonald.pkl&#39;,
 &#39;STOPWORDS.pkl&#39;, 
 &#39;concreteness.pkl&#39;]
</code></pre></div><p>è¯å…¸å¯¹åº”å…³ç³», éƒ¨åˆ†æƒ…æ„Ÿè¯å…¸èµ„æ–™æ•´ç†è‡ª <a href="https://github.com/quanteda/quanteda.sentiment">quanteda.sentiment</a></p>
<table>
<thead>
<tr>
<th>pklæ–‡ä»¶</th>
<th>è¯å…¸</th>
<th>è¯­è¨€</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td>DUTIR.pkl</td>
<td>å¤§è¿ç†å·¥å¤§å­¦æƒ…æ„Ÿæœ¬ä½“åº“</td>
<td>ä¸­æ–‡</td>
<td>ä¸ƒå¤§ç±»æƒ…ç»ªï¼Œ<code>å“€, å¥½, æƒŠ, æƒ§, ä¹, æ€’, æ¶</code></td>
</tr>
<tr>
<td>HOWNET.pkl</td>
<td>çŸ¥ç½‘Hownetè¯å…¸</td>
<td>ä¸­æ–‡</td>
<td>æ­£é¢è¯ã€è´Ÿé¢è¯</td>
</tr>
<tr>
<td>sentiws.pkl</td>
<td>SentimentWortschatz (SentiWS)</td>
<td>è‹±æ–‡</td>
<td>æ­£é¢è¯ã€è´Ÿé¢è¯ï¼›<br>æ•ˆä»·</td>
</tr>
<tr>
<td>ChineseFinancialFormalUnformalSentiment.pkl</td>
<td>é‡‘èé¢†åŸŸæ­£å¼ã€éæ­£å¼ï¼›ç§¯ææ¶ˆæ</td>
<td>ä¸­æ–‡</td>
<td>formal-posã€<br>formal-negï¼›<br>unformal-posã€<br>unformal-neg</td>
</tr>
<tr>
<td>ANEW.pkl</td>
<td>è‹±è¯­å•è¯çš„æƒ…æ„Ÿè§„èŒƒAffective Norms for English Words (ANEW)</td>
<td>è‹±æ–‡</td>
<td>è¯è¯­æ•ˆä»·ä¿¡æ¯</td>
</tr>
<tr>
<td>LSD2015.pkl</td>
<td>Lexicoder Sentiment Dictionary (2015)</td>
<td>è‹±æ–‡</td>
<td>æ­£é¢è¯ã€è´Ÿé¢è¯</td>
</tr>
<tr>
<td>NRC.pkl</td>
<td>NRC Word-Emotion Association Lexicon</td>
<td>è‹±æ–‡</td>
<td>ç»†ç²’åº¦æƒ…ç»ªè¯ï¼›</td>
</tr>
<tr>
<td>geninqposneg.pkl</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>HuLiu.pkl</td>
<td>Hu&amp;Liu (2004)æ­£ã€è´Ÿæƒ…æ„Ÿè¯å…¸</td>
<td>è‹±æ–‡</td>
<td>æ­£é¢è¯ã€è´Ÿé¢è¯</td>
</tr>
<tr>
<td>AFINN.pkl</td>
<td>å°¼å°”æ£® (2011) çš„â€œæ–° ANEWâ€æ•ˆä»·è¯è¡¨</td>
<td>è‹±æ–‡</td>
<td>æƒ…æ„Ÿæ•ˆä»·ä¿¡æ¯valence</td>
</tr>
<tr>
<td>LoughranMcDonald.pkl</td>
<td>ä¼šè®¡é‡‘èLMè¯å…¸</td>
<td>è‹±æ–‡</td>
<td>é‡‘èé¢†åŸŸæ­£ã€è´Ÿé¢æƒ…æ„Ÿè¯</td>
</tr>
<tr>
<td>ADV_CONJ.pkl</td>
<td>å‰¯è¯è¿è¯</td>
<td>ä¸­æ–‡</td>
<td></td>
</tr>
<tr>
<td>STOPWORDS.pkl</td>
<td></td>
<td>ä¸­ã€è‹±</td>
<td>åœç”¨è¯</td>
</tr>
<tr>
<td>concreteness.pkl</td>
<td>Brysbaert, M., Warriner, A. B., &amp; Kuperman, V. (2014). Concreteness ratings for 40 thousand generally known English word lemmas. Behavior Research Methods, 46, 904â€“911</td>
<td>English</td>
<td>word &amp; concreateness score</td>
</tr>
</tbody>
</table>
<h3 id="æ³¨æ„">æ³¨æ„:</h3>
<ul>
<li>
<p>å¦‚æœç”¨æˆ·æƒ…ç»ªåˆ†ææ—¶ä½¿ç”¨DUTIRè¯å…¸å‘è¡¨è®ºæ–‡ï¼Œè¯·åœ¨è®ºæ–‡ä¸­æ·»åŠ è¯¸å¦‚â€œä½¿ç”¨äº†å¤§è¿ç†å·¥å¤§å­¦ä¿¡æ¯æ£€ç´¢ç ”ç©¶å®¤çš„æƒ…æ„Ÿè¯æ±‡æœ¬ä½“â€ å­—æ ·åŠ ä»¥å£°æ˜ã€‚å‚è€ƒæ–‡çŒ®ä¸­åŠ å…¥å¼•æ–‡â€œå¾ç³å®,æ—é¸¿é£,æ½˜å®‡,ç­‰.æƒ…æ„Ÿè¯æ±‡æœ¬ä½“çš„æ„é€ [J]. æƒ…æŠ¥å­¦æŠ¥, 2008, 27(2): 180-185.â€</p>
</li>
<li>
<p>å¦‚æœå¤§å®¶æœ‰åˆ¶ä½œçš„è¯å…¸ï¼Œå¯ä»¥ä¸Šä¼ è‡³ç™¾åº¦ç½‘ç›˜ï¼Œå¹¶åœ¨issueä¸­ç•™ä¸‹è¯å…¸çš„ç½‘ç›˜é“¾æ¥ã€‚å¦‚è¯å…¸éœ€è¦ä½¿ç”¨å£°æ˜ï¼Œå¯è¿åŒæ–‡çŒ®å‡ºå¤„ä¸€èµ·issue</p>
</li>
</ul>
<br>
<h3 id="14-load_pkl_dict">1.4 load_pkl_dict</h3>
<p>å¯¼å…¥pklè¯å…¸æ–‡ä»¶ï¼Œè¿”å›å­—å…¸æ ·å¼æ•°æ®ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="c1"># å¯¼å…¥pklè¯å…¸æ–‡ä»¶,</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;DUTIR.pkl&#39;</span><span class="p">))</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">{&#39;DUTIR&#39;: {&#39;å“€&#39;: [&#39;æ€€æƒ³&#39;, &#39;æ²»ä¸è€Œæ£¼&#39;, ...],
           &#39;å¥½&#39;: [&#39;è¿›è´¤é»œå¥¸&#39;, &#39;æ¸…é†‡&#39;, &#39;æ”¾è¾¾&#39;, ...], 
           &#39;æƒŠ&#39;: [&#39;æƒŠå¥‡ä¸å·²&#39;, &#39;é­‚æƒŠé­„æƒ•&#39;, &#39;æµ·å¤–å¥‡è°ˆ&#39;,...],
           &#39;æƒ§&#39;: [&#39;å¿¸å¿¸æ€©æ€©&#39;, &#39;è°ˆè™è‰²å˜&#39;, &#39;æ‰‹å¿™è„šä¹±&#39;, &#39;åˆ¿ç›®æ€µå¿ƒ&#39;,...],
           &#39;ä¹&#39;: [&#39;ç™¾é¾„çœ‰å¯¿&#39;, &#39;å¨±å¿ƒ&#39;, &#39;å¦‚æ„&#39;, &#39;å–œç³–&#39;,...],
           &#39;æ€’&#39;: [&#39;é¥®æ¨åå£°&#39;, &#39;æ‰¬çœ‰ç¬ç›®&#39;,...],
           &#39;æ¶&#39;: [&#39;å‡ºé€ƒ&#39;, &#39;é±¼è‚‰ç™¾å§“&#39;, &#39;ç§»å¤©æ˜“æ—¥&#39;,]
           }
</code></pre></div><br>
<h3 id="15-sentiment">1.5 sentiment</h3>
<p>sentiment(text, diction, lang=&lsquo;chinese&rsquo;)
ä½¿ç”¨diyè¯å…¸è¿›è¡Œæƒ…æ„Ÿåˆ†æï¼Œè®¡ç®—å„ä¸ªæƒ…ç»ªè¯å‡ºç°æ¬¡æ•°; æœªè€ƒè™‘å¼ºåº¦å‰¯è¯ã€å¦å®šè¯å¯¹æƒ…æ„Ÿçš„å¤æ‚å½±å“ï¼Œ</p>
<ul>
<li>text:  å¾…åˆ†æä¸­æ–‡æ–‡æœ¬</li>
<li>diction:  æƒ…æ„Ÿè¯å­—å…¸ï¼›</li>
<li>lang: è¯­è¨€ç±»å‹ï¼Œ&ldquo;chinese&quot;æˆ–&quot;english&rdquo;ï¼Œé»˜è®¤&quot;chinese&quot;</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;æˆ‘ä»Šå¤©å¾—å¥–äº†ï¼Œå¾ˆé«˜å…´ï¼Œæˆ‘è¦å°†å¿«ä¹åˆ†äº«å¤§å®¶ã€‚&#39;</span>

<span class="n">ct</span><span class="o">.</span><span class="n">sentiment</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
             <span class="n">diction</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;DUTIR.pkl&#39;</span><span class="p">)[</span><span class="s1">&#39;DUTIR&#39;</span><span class="p">],</span>
             <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">{&#39;å“€_num&#39;: 0,
 &#39;å¥½_num&#39;: 0,
 &#39;æƒŠ_num&#39;: 0,
 &#39;æƒ§_num&#39;: 0,
 &#39;ä¹_num&#39;: 2,
 &#39;æ€’_num&#39;: 0,
 &#39;æ¶_num&#39;: 0,
 &#39;stopword_num&#39;: 8,
 &#39;word_num&#39;: 14,
 &#39;sentence_num&#39;: 1}
</code></pre></div><p>å¦‚æœä¸é€‚ç”¨pklè¯å…¸ï¼Œå¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„è¯å…¸ï¼Œä¾‹å¦‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">diction</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;pos&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;é«˜å…´&#39;</span><span class="p">,</span> <span class="s1">&#39;å¿«ä¹&#39;</span><span class="p">,</span> <span class="s1">&#39;åˆ†äº«&#39;</span><span class="p">],</span>
           <span class="s1">&#39;neg&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;éš¾è¿‡&#39;</span><span class="p">,</span> <span class="s1">&#39;æ‚²ä¼¤&#39;</span><span class="p">],</span>
           <span class="s1">&#39;adv&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;å¾ˆ&#39;</span><span class="p">,</span> <span class="s1">&#39;ç‰¹åˆ«&#39;</span><span class="p">]}</span>

<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;æˆ‘ä»Šå¤©å¾—å¥–äº†ï¼Œå¾ˆé«˜å…´ï¼Œæˆ‘è¦å°†å¿«ä¹åˆ†äº«å¤§å®¶ã€‚&#39;</span>
<span class="n">ct</span><span class="o">.</span><span class="n">sentiment</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> 
             <span class="n">diction</span><span class="o">=</span><span class="n">diction</span><span class="p">,</span> 
             <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">{&#39;pos_num&#39;: 3,
 &#39;neg_num&#39;: 0,
 &#39;adv_num&#39;: 1,
 &#39;stopword_num&#39;: 8,
 &#39;word_num&#39;: 14,
 &#39;sentence_num&#39;: 1}
</code></pre></div><br>
<h3 id="16-sentiment_by_valence">1.6 sentiment_by_valence</h3>
<p>sentimentå‡½æ•°é»˜è®¤æ‰€æœ‰æƒ…æ„Ÿè¯æƒé‡å‡ä¸º1ï¼Œåªéœ€è¦ç»Ÿè®¡æ–‡æœ¬ä¸­æƒ…æ„Ÿè¯çš„ä¸ªæ•°ï¼Œå³å¯å¾—åˆ°æ–‡æœ¬æƒ…æ„Ÿå¾—åˆ†ã€‚</p>
<p>sentiment_by_valence(text, diction, lang=&lsquo;english&rsquo;)å‡½æ•°è€ƒè™‘äº†è¯è¯­çš„æ•ˆä»·(valence)</p>
<ul>
<li>text å¾…è¾“å…¥æ–‡æœ¬</li>
<li>diction å¸¦æ•ˆä»·çš„è¯å…¸ï¼ŒDataFrameæ ¼å¼ã€‚</li>
<li>lang è¯­è¨€ç±»å‹&rsquo;chinese' æˆ– &lsquo;english&rsquo;ï¼Œé»˜è®¤&rsquo;english'</li>
</ul>
<p>è¿™é‡Œæˆ‘ä»¬ä»¥æ–‡æœ¬å…·ä½“æ€§åº¦é‡ä¸ºä¾‹ï¼Œ <strong>concreteness.pkl</strong> æ•´ç†è‡ª Brysbaert2014çš„æ–‡ç« ã€‚</p>
<blockquote>
<p>Brysbaert, M., Warriner, A. B., &amp; Kuperman, V. (2014). Concreteness ratings for 40 thousand generally known English word lemmas. Behavior Research Methods, 46, 904â€“911</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="c1"># load the concreteness.pkl dictionary file</span>
<span class="n">concreteness_df</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;concreteness.pkl&#39;</span><span class="p">)</span>
<span class="n">concreteness_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">word</th>
<th style="text-align:right">valence</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:left">roadsweeper</td>
<td style="text-align:right">4.85</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">traindriver</td>
<td style="text-align:right">4.54</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:left">tush</td>
<td style="text-align:right">4.45</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:left">hairdress</td>
<td style="text-align:right">3.93</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:left">pharmaceutics</td>
<td style="text-align:right">3.77</td>
</tr>
</tbody>
</table>
<br>
<p>å…ˆçœ‹ä¸€æ¡æ–‡æœ¬çš„å…·ä½“æ€§åº¦é‡</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">reply</span> <span class="o">=</span> <span class="s2">&#34;I&#39;ll go look for that&#34;</span>

<span class="n">score</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="n">sentiment_by_valence</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">reply</span><span class="p">,</span> 
                              <span class="n">diction</span><span class="o">=</span><span class="n">concreteness_df</span><span class="p">,</span> 
                              <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>
<span class="n">score</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">1.85
</code></pre></div><br>
<p>å¾ˆå¤šæ¡æ–‡æœ¬çš„å…·ä½“æ€§åº¦é‡</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">employee_replys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;I&#39;ll go look for that&#34;</span><span class="p">,</span>
                   <span class="s2">&#34;I&#39;ll go search for that&#34;</span><span class="p">,</span>
                   <span class="s2">&#34;I&#39;ll go search for that top&#34;</span><span class="p">,</span>
                   <span class="s2">&#34;I&#39;ll go search for that t-shirt&#34;</span><span class="p">,</span>
                   <span class="s2">&#34;I&#39;ll go look for that t-shirt in grey&#34;</span><span class="p">,</span>
                   <span class="s2">&#34;I&#39;ll go search for that t-shirt in grey&#34;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">reply</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">employee_replys</span><span class="p">):</span>
    <span class="n">score</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="n">sentiment_by_valence</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">reply</span><span class="p">,</span> 
                                  <span class="n">diction</span><span class="o">=</span><span class="n">concreteness_df</span><span class="p">,</span> 
                                  <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>
    
    <span class="n">template</span> <span class="o">=</span> <span class="s2">&#34;Concreteness Score: </span><span class="si">{score:.2f}</span><span class="s2"> | Example-</span><span class="si">{idx}</span><span class="s2">: </span><span class="si">{exmaple}</span><span class="s2">&#34;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">score</span><span class="o">=</span><span class="n">score</span><span class="p">,</span> 
                          <span class="n">idx</span><span class="o">=</span><span class="n">idx</span><span class="p">,</span> 
                          <span class="n">exmaple</span><span class="o">=</span><span class="n">reply</span><span class="p">))</span>
    
<span class="n">ct</span><span class="o">.</span><span class="n">sentiment_by_valence</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> <span class="n">diction</span><span class="o">=</span><span class="n">concreteness_df</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Concreteness Score: 1.55 | Example-0: I&#39;ll go look for that
Concreteness Score: 1.55 | Example-1: I&#39;ll go search for that
Concreteness Score: 1.89 | Example-2: I&#39;ll go search for that top
Concreteness Score: 2.04 | Example-3: I&#39;ll go search for that t-shirt
Concreteness Score: 2.37 | Example-4: I&#39;ll go look for that t-shirt in grey
Concreteness Score: 2.37 | Example-5: I&#39;ll go search for that t-shirt in grey
</code></pre></div><br>
<p><br><br></p>
<h2 id="äºŒdictionary">äºŒã€dictionary</h2>
<p>æœ¬æ¨¡å—ç”¨äºæ„å»ºè¯è¡¨(å…¸),å«</p>
<ul>
<li>SoPmi å…±ç°æ³•æ‰©å……è¯è¡¨(å…¸)</li>
<li>W2VModels è¯å‘é‡word2vecæ‰©å……è¯è¡¨(å…¸)</li>
</ul>
<h3 id="21-sopmi">2.1 SoPmi</h3>
<p>SoPmi å…±ç°æ³•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">sopmier</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">SoPmi</span><span class="p">(</span><span class="n">cwd</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span>
                   <span class="n">input_txt_file</span><span class="o">=</span><span class="s1">&#39;data/sopmi_corpus.txt&#39;</span><span class="p">,</span>  <span class="c1">#åŸå§‹æ•°æ®ï¼Œæ‚¨çš„è¯­æ–™</span>
                   <span class="n">seedword_txt_file</span><span class="o">=</span><span class="s1">&#39;data/sopmi_seed_words.txt&#39;</span><span class="p">,</span> <span class="c1">#äººå·¥æ ‡æ³¨çš„åˆå§‹ç§å­è¯</span>
                   <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span>
                   <span class="p">)</span>   

<span class="n">sopmier</span><span class="o">.</span><span class="n">sopmi</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Step 1/4:...Preprocess   Corpus ...
Step 2/4:...Collect co-occurrency information ...
Step 3/4:...Calculate   mutual information ...
Step 4/4:...Save    candidate words ...
Finish! used 44.49 s
</code></pre></div><br>
<h3 id="22-w2vmodels">2.2 W2VModels</h3>
<p>W2VModels è¯å‘é‡</p>
<p><strong>ç‰¹åˆ«è¦æ³¨æ„ä»£ç éœ€è¦è®¾å®šlangè¯­è¨€å‚æ•°</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1">#åˆå§‹åŒ–æ¨¡å‹,éœ€è¦è®¾ç½®langå‚æ•°ã€‚</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">W2VModels</span><span class="p">(</span><span class="n">cwd</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> 
                     <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>  <span class="c1">#è¯­æ–™æ•°æ® w2v_corpus.txt</span>
<span class="n">model</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">input_txt_file</span><span class="o">=</span><span class="s1">&#39;data/w2v_corpus.txt&#39;</span><span class="p">)</span>


<span class="c1">#æ ¹æ®ç§å­è¯ï¼Œç­›é€‰å‡ºæ²¡ç±»è¯æœ€ç›¸è¿‘çš„å‰100ä¸ªè¯</span>
<span class="n">model</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">seedword_txt_file</span><span class="o">=</span><span class="s1">&#39;data/w2v_seeds/integrity.txt&#39;</span><span class="p">,</span> 
           <span class="n">topn</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">seedword_txt_file</span><span class="o">=</span><span class="s1">&#39;data/w2v_seeds/innovation.txt&#39;</span><span class="p">,</span> 
           <span class="n">topn</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">seedword_txt_file</span><span class="o">=</span><span class="s1">&#39;data/w2v_seeds/quality.txt&#39;</span><span class="p">,</span> 
           <span class="n">topn</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">seedword_txt_file</span><span class="o">=</span><span class="s1">&#39;data/w2v_seeds/respect.txt&#39;</span><span class="p">,</span> 
           <span class="n">topn</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">seedword_txt_file</span><span class="o">=</span><span class="s1">&#39;data/w2v_seeds/teamwork.txt&#39;</span><span class="p">,</span> 
           <span class="n">topn</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Step 1/4:...Preprocess   corpus ...
Step 2/4:...Train  word2vec model
            used   174 s
Step 3/4:...Prepare similar candidates for each seed word in the word2vec model...
Step 4/4 Finish! Used 187 s
Step 3/4:...Prepare similar candidates for each seed word in the word2vec model...
Step 4/4 Finish! Used 187 s
Step 3/4:...Prepare similar candidates for each seed word in the word2vec model...
Step 4/4 Finish! Used 187 s
Step 3/4:...Prepare similar candidates for each seed word in the word2vec model...
Step 4/4 Finish! Used 187 s
Step 3/4:...Prepare similar candidates for each seed word in the word2vec model...
Step 4/4 Finish! Used 187 s

</code></pre></div><br>
<h3 id="éœ€è¦æ³¨æ„">éœ€è¦æ³¨æ„</h3>
<p>è®­ç»ƒå‡ºçš„w2væ¨¡å‹å¯ä»¥åç»­ä¸­ä½¿ç”¨ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">gensim.models</span> <span class="kn">import</span> <span class="n">KeyedVectors</span>

<span class="n">w2v_model</span> <span class="o">=</span> <span class="n">KeyedVectors</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">w2v</span><span class="o">.</span><span class="n">modelè·¯å¾„</span><span class="p">)</span>
<span class="c1">#æ‰¾å‡ºwordçš„è¯å‘é‡</span>
<span class="c1">#w2v_model.get_vector(word)</span>
<span class="c1">#æ›´å¤šw2_modelæ–¹æ³•æŸ¥çœ‹</span>
<span class="c1">#help(w2_model)</span>
</code></pre></div><p>ä¾‹å¦‚æœ¬ä»£ç ï¼Œè¿è¡Œç”Ÿæˆçš„ç»“æœè·¯å¾„<code>output/w2v_candi_words/w2v.model</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">gensim.models</span> <span class="kn">import</span> <span class="n">KeyedVectors</span>

<span class="n">w2v_model</span> <span class="o">=</span> <span class="n">KeyedVectors</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;output/w2v_candi_words/w2v.model&#39;</span><span class="p">)</span>
<span class="n">w2v_model</span><span class="o">.</span><span class="n">most_similar</span><span class="p">(</span><span class="s1">&#39;innovation&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[(&#39;technology&#39;, 0.689210832118988),
 (&#39;infrastructure&#39;, 0.669672966003418),
 (&#39;resources&#39;, 0.6695448160171509),
 (&#39;talent&#39;, 0.6627111434936523),
 (&#39;execution&#39;, 0.6549549102783203),
 (&#39;marketing&#39;, 0.6533523797988892),
 (&#39;merchandising&#39;, 0.6504817008972168),
 (&#39;diversification&#39;, 0.6479553580284119),
 (&#39;expertise&#39;, 0.6446896195411682),
 (&#39;digital&#39;, 0.6326863765716553)]
</code></pre></div><br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#è·å–è¯å‘é‡</span>
<span class="n">w2v_model</span><span class="o">.</span><span class="n">get_vector</span><span class="p">(</span><span class="s1">&#39;innovation&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">array([-0.45616838, -0.7799563 ,  0.56367606, -0.8570078 ,  0.600359  ,
       -0.6588043 ,  0.31116748, -0.11956959, -0.47599426,  0.21840936,
       -0.02268819,  0.1832016 ,  0.24452794,  0.01084935, -1.4213187 ,
        0.22840202,  0.46387577,  1.198386  , -0.621511  , -0.51598716,
        0.13352732,  0.04140598, -0.23470387,  0.6402956 ,  0.20394802,
        0.10799981,  0.24908689, -1.0117126 , -2.3168423 , -0.0402851 ,
        1.6886286 ,  0.5357047 ,  0.22932841, -0.6094084 ,  0.4515793 ,
       -0.5900931 ,  1.8684244 , -0.21056202,  0.29313338, -0.221067  ,
       -0.9535679 ,  0.07325   , -0.15823542,  1.1477109 ,  0.6716076 ,
       -1.0096023 ,  0.10605699,  1.4148282 ,  0.24576302,  0.5740349 ,
        0.19984631,  0.53964925,  0.41962907,  0.41497853, -1.0322098 ,
        0.01090925,  0.54345983,  0.806317  ,  0.31737605, -0.7965337 ,
        0.9282971 , -0.8775608 , -0.26852605, -0.06743863,  0.42815775,
       -0.11774074, -0.17956367,  0.88813037, -0.46279573, -1.0841943 ,
       -0.06798118,  0.4493006 ,  0.71962464, -0.02876493,  1.0282255 ,
       -1.1993176 , -0.38734904, -0.15875885, -0.81085825, -0.07678922,
       -0.16753489,  0.14065655, -1.8609751 ,  0.03587054,  1.2792674 ,
        1.2732009 , -0.74120265, -0.98000383,  0.4521185 , -0.26387128,
        0.37045383,  0.3680011 ,  0.7197629 , -0.3570571 ,  0.8016917 ,
        0.39243212, -0.5027844 , -1.2106236 ,  0.6412354 , -0.878307  ],
      dtype=float32)
</code></pre></div><p><br><br></p>
<h3 id="23-co_occurrence_matrix">2.3 co_occurrence_matrix</h3>
<p>è¯å…±ç°çŸ©é˜µ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="n">documents</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;I go to school every day by bus .&#34;</span><span class="p">,</span>
         <span class="s2">&#34;i go to theatre every night by bus&#34;</span><span class="p">]</span>

<span class="n">ct</span><span class="o">.</span><span class="n">co_occurrence_matrix</span><span class="p">(</span><span class="n">documents</span><span class="p">,</span> 
                        <span class="n">window_size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> 
                        <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>
</code></pre></div><p><img loading="lazy" src="/Users/thunderhit/Desktop/Coding/Python/diyPython/cntext/img/co_occurrence1.png" alt=""  />
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">documents2</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;ç¼–ç¨‹å¾ˆå¥½ç©&#34;</span><span class="p">,</span>
             <span class="s2">&#34;Pythonæ˜¯æœ€å¥½å­¦çš„ç¼–ç¨‹&#34;</span><span class="p">]</span>

<span class="n">ct</span><span class="o">.</span><span class="n">co_occurrence_matrix</span><span class="p">(</span><span class="n">documents2</span><span class="p">,</span> 
                        <span class="n">window_size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> 
                        <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
</code></pre></div><p><img loading="lazy" src="/Users/thunderhit/Desktop/Coding/Python/diyPython/cntext/img/co_occurrence2.png" alt=""  />
</p>
<p><br><br></p>
<h3 id="24--glove">2.4  Glove</h3>
<p>æ„å»ºGloveè¯åµŒå…¥æ¨¡å‹ï¼Œä½¿ç”¨è‹±æ–‡æ•°æ®<code>data/brown_corpus.txt</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">Glove</span><span class="p">(</span><span class="n">cwd</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">create_vocab</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s1">&#39;data/brown_corpus.txt&#39;</span><span class="p">,</span> <span class="n">min_count</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">cooccurrence_matrix</span><span class="p">()</span>
<span class="n">model</span><span class="o">.</span><span class="n">train_embeddings</span><span class="p">(</span><span class="n">vector_size</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">max_iter</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Step 1/4: ...Create vocabulary for Glove.
Step 2/4: ...Create cooccurrence matrix.
Step 3/4: ...Train glove embeddings. 
             Note, this part takes a long time to run
Step 3/4: ... Finish! Use 175.98 s
</code></pre></div><p>ç”Ÿæˆçš„Gloveè¯åµŒå…¥æ–‡ä»¶ä½äº<code>output/Glove</code> ã€‚</p>
<p><br><br></p>
<h2 id="ä¸‰similarity">ä¸‰ã€similarity</h2>
<p>å››ç§ç›¸ä¼¼åº¦è®¡ç®—å‡½æ•°</p>
<ul>
<li>cosine_sim(text1, text2)  cosä½™å¼¦ç›¸ä¼¼</li>
<li>jaccard_sim(text1, text2)     jaccardç›¸ä¼¼</li>
<li>minedit_sim(text1, text2)  æœ€å°ç¼–è¾‘è·ç¦»ç›¸ä¼¼åº¦ï¼›</li>
<li>simple_sim(text1, text2) æ›´æ”¹å˜åŠ¨ç®—æ³•</li>
</ul>
<p>ç®—æ³•å®ç°å‚è€ƒè‡ª <code>Cohen, Lauren, Christopher Malloy, and Quoc Nguyen. Lazy prices. No. w25084. National Bureau of Economic Research, 2018.</code></p>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span> 


<span class="n">text1</span> <span class="o">=</span> <span class="s1">&#39;ç¼–ç¨‹çœŸå¥½ç©ç¼–ç¨‹çœŸå¥½ç©&#39;</span>
<span class="n">text2</span> <span class="o">=</span> <span class="s1">&#39;æ¸¸æˆçœŸå¥½ç©ç¼–ç¨‹çœŸå¥½ç©å•Š&#39;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">cosine_sim</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">jaccard_sim</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">minedit_sim</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">simple_sim</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">))</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">0.82
0.67
2.00
0.87
</code></pre></div><p><br><br></p>
<h2 id="å››text2mind">å››ã€Text2Mind</h2>
<p>è¯åµŒå…¥ä¸­è•´å«ç€äººç±»çš„è®¤çŸ¥ä¿¡æ¯ï¼Œä»¥å¾€çš„è¯åµŒå…¥å¤§å¤šæ˜¯æ¯”è¾ƒä¸€ä¸ªæ¦‚å¿µä¸­ä¸¤ç»„åä¹‰è¯ä¸æŸå¯¹è±¡çš„è·ç¦»è®¡ç®—è®¤çŸ¥ä¿¡æ¯ã€‚</p>
<p>- <strong>å¤šä¸ªå¯¹è±¡åœ¨æŸæ¦‚å¿µçš„è¿œè¿‘</strong>ï¼ŒèŒä¸šä¸æ€§åˆ«ï¼ŒæŸä¸ªèŒä¸šæ˜¯å¦å­˜åœ¨äº²è¿‘ç”·æ€§ï¼Œè€Œæ’æ–¥å¥³æ€§</p>
<p>- å¤šä¸ªå¯¹è±¡åœ¨æŸ<strong>æ¦‚å¿µçš„åˆ†é‡(fenï¼Œä¸€å£°)çš„å¤šå°‘</strong>ï¼Œ äººç±»è¯­è¨€ä¸­ç•™å­˜ç€å¯¹ä¸åŒåŠ¨ç‰©ä½“ç§¯çš„è®¤çŸ¥è®°å¿†ï¼Œå¦‚å°é¼ å¤§è±¡ã€‚åŠ¨ç‰©è¯åœ¨è¯å‘é‡ç©ºé—´ä¸­æ˜¯å¦èƒ½ç•™å­˜ç€è¿™ç§å¤§å°çš„è®°å¿†</p>
<p>è¿™ä¸¤ç§è®¤çŸ¥åˆ†åˆ«å¯ä»¥ç”¨å‘é‡è·ç¦»ã€å‘é‡è¯­ä¹‰æŠ•å½±è®¡ç®—å¾—æ¥ã€‚</p>
<ul>
<li>tm.sematic_distance(words, c_words1, c_words2)  å‘é‡è·ç¦»</li>
<li>tm.sematic_projection(words, c_words1, c_words2)  å‘é‡è¯­ä¹‰æŠ•å½±</li>
</ul>
<h3 id="41-tmsematic_distancewords-c_words1-c_words2">4.1 tm.sematic_distance(words, c_words1, c_words2)</h3>
<p>åˆ†åˆ«è®¡ç®—wordsä¸c_words1ã€c_words2è¯­ä¹‰è·ç¦»ï¼Œè¿”å›è·ç¦»å·®å€¼ã€‚</p>
<p>ä¾‹å¦‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">male_concept = [&#39;male&#39;, &#39;man&#39;, &#39;he&#39;, &#39;him&#39;]
female_concept = [&#39;female&#39;, &#39;woman&#39;, &#39;she&#39;, &#39;her&#39;]
software_engineer_concept  = [&#39;engineer&#39;,  &#39;programming&#39;,  &#39;software&#39;]
d1 = distance(male_concept,  software_engineer_concept)
d2 = distance(female_concept,  software_engineer_concept)
</code></pre></div><p>å¦‚æœd1-d2&lt;0ï¼Œè¯´æ˜åœ¨è¯­ä¹‰ç©ºé—´ä¸­ï¼Œsoftware_engineer_conceptæ›´æ¥è¿‘male_conceptï¼Œæ›´è¿œç¦»female_conceptã€‚</p>
<p>æ¢è¨€ä¹‹ï¼Œåœ¨è¯¥è¯­æ–™ä¸­ï¼Œäººä»¬å¯¹è½¯ä»¶å·¥ç¨‹å¸ˆè¿™ä¸€ç±»å·¥ä½œï¼Œå¯¹å¥³æ€§å­˜åœ¨åˆ»æ¿å°è±¡(åè§)ã€‚</p>
<p><strong>ä¸‹è½½glove_w2v.6B.100d.txt</strong>é“¾æ¥: <a href="https://pan.baidu.com/s/1MMfQ7M0YCzL9Klp4zrlHBw">https://pan.baidu.com/s/1MMfQ7M0YCzL9Klp4zrlHBw</a> æå–ç : 72l0</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="c1">#Note: this is a word2vec format model</span>
<span class="n">tm</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">Text2Mind</span><span class="p">(</span><span class="n">w2v_model_path</span><span class="o">=</span><span class="s1">&#39;glove_w2v.6B.100d.txt&#39;</span><span class="p">)</span>

<span class="n">engineer</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;program&#39;</span><span class="p">,</span> <span class="s1">&#39;software&#39;</span><span class="p">,</span> <span class="s1">&#39;computer&#39;</span><span class="p">]</span>
<span class="n">mans</span> <span class="o">=</span>  <span class="p">[</span><span class="s2">&#34;man&#34;</span><span class="p">,</span> <span class="s2">&#34;he&#34;</span><span class="p">,</span> <span class="s2">&#34;him&#34;</span><span class="p">]</span>
<span class="n">womans</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;woman&#34;</span><span class="p">,</span> <span class="s2">&#34;she&#34;</span><span class="p">,</span> <span class="s2">&#34;her&#34;</span><span class="p">]</span>

<span class="c1">#åœ¨è¯­ä¹‰ç©ºé—´ä¸­ï¼Œå·¥ç¨‹å¸ˆæ›´æ¥è¿‘äºç”·äººï¼Œè€Œä¸æ˜¯å¥³äººã€‚</span>
<span class="c1">#in semantic space, engineer is closer to man, other than woman.</span>
<span class="n">tm</span><span class="o">.</span><span class="n">sematic_distance</span><span class="p">(</span><span class="n">words</span><span class="o">=</span><span class="n">animals</span><span class="p">,</span> 
                    <span class="n">c_words1</span><span class="o">=</span><span class="n">mans</span><span class="p">,</span> 
                    <span class="n">c_words2</span><span class="o">=</span><span class="n">womans</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">-0.38
</code></pre></div><p>-0.38 æ„å‘³ç€å·¥ç¨‹å¸ˆæ›´æ¥è¿‘äºç”·äººï¼Œè€Œä¸æ˜¯å¥³äººã€‚</p>
<br>
<h3 id="42-tmsematic_projectionwords-c_words1-c_words2">4.2 tm.sematic_projection(words, c_words1, c_words2)</h3>
<p><strong>è¯­ä¹‰æŠ•å½±</strong>ï¼Œæ ¹æ®ä¸¤ç»„åä¹‰è¯c_words1, c_words2æ„å»ºä¸€ä¸ªæ¦‚å¿µ(è®¤çŸ¥)å‘é‡, wordsä¸­çš„æ¯ä¸ªè¯å‘é‡åœ¨æ¦‚å¿µå‘é‡ä¸­æŠ•å½±ï¼Œå³å¯å¾—åˆ°è®¤çŸ¥ä¿¡æ¯ã€‚</p>
<p>åˆ†å€¼è¶Šå¤§ï¼Œwordè¶Šä½äºc_words2ä¸€ä¾§ã€‚</p>
<p>ä¸‹å›¾æ˜¯è¯­ä¹‰æŠ•å½±ç¤ºä¾‹å›¾ï¼Œæœ¬æ–‡ç®—æ³•å’Œå›¾ç‰‡å‡æ¥è‡ª &ldquo;Grand, G., Blank, I.A., Pereira, F. and Fedorenko, E., 2022. Semantic projection recovers rich human knowledge of multiple object features from word embeddings. <em>Nature Human Behaviour</em>, pp.1-13.&rdquo;</p>
<p><img loading="lazy" src="img/Nature_Semantic_projection_recovering_human_knowledge_of.png" alt=""  />
</p>
<p>ä¾‹å¦‚ï¼Œäººç±»çš„è¯­è¨€ä¸­ï¼Œå­˜åœ¨å°ºå¯¸ã€æ€§åˆ«ã€å¹´é¾„ã€æ”¿æ²»ã€é€Ÿåº¦ã€è´¢å¯Œç­‰ä¸åŒçš„æ¦‚å¿µã€‚æ¯ä¸ªæ¦‚å¿µå¯ä»¥ç”±ä¸¤ç»„åä¹‰è¯ç¡®å®šæ¦‚å¿µçš„å‘é‡æ–¹å‘ã€‚</p>
<p>ä»¥å°ºå¯¸ä¸ºä¾‹ï¼ŒåŠ¨ç‰©åœ¨äººç±»è®¤çŸ¥ä¸­å¯èƒ½å­˜åœ¨ä½“ç§¯å°ºå¯¸å¤§å°å·®å¼‚ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">animals</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;mouse&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="s1">&#39;horse&#39;</span><span class="p">,</span>  <span class="s1">&#39;pig&#39;</span><span class="p">,</span> <span class="s1">&#39;whale&#39;</span><span class="p">]</span>
<span class="n">smalls</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;small&#34;</span><span class="p">,</span> <span class="s2">&#34;little&#34;</span><span class="p">,</span> <span class="s2">&#34;tiny&#34;</span><span class="p">]</span>
<span class="n">bigs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;large&#34;</span><span class="p">,</span> <span class="s2">&#34;big&#34;</span><span class="p">,</span> <span class="s2">&#34;huge&#34;</span><span class="p">]</span>

<span class="c1"># In size conception, mouse is smallest, horse is biggest.</span>
<span class="c1"># åœ¨å¤§å°æ¦‚å¿µä¸Šï¼Œè€é¼ æœ€å°ï¼Œé©¬æ˜¯æœ€å¤§çš„ã€‚</span>
<span class="n">tm</span><span class="o">.</span><span class="n">sematic_projection</span><span class="p">(</span><span class="n">words</span><span class="o">=</span><span class="n">animals</span><span class="p">,</span> 
                      <span class="n">c_words1</span><span class="o">=</span><span class="n">smalls</span><span class="p">,</span> 
                      <span class="n">c_words2</span><span class="o">=</span><span class="n">bigs</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[(&#39;mouse&#39;, -1.68),
 (&#39;cat&#39;, -0.92),
 (&#39;pig&#39;, -0.46),
 (&#39;whale&#39;, -0.24),
 (&#39;horse&#39;, 0.4)]
</code></pre></div><p>åœ¨è¿™å‡ ä¸ªåŠ¨ç‰©å°ºå¯¸çš„æ„ŸçŸ¥ä¸Šï¼Œäººç±»è§‰å¾—è€é¼ ä½“å‹æ˜¯æœ€å°ï¼Œé©¬çš„ä½“å‹æ˜¯æœ€å¤§ã€‚</p>
<p><br><br></p>
<h2 id="å¼•ç”¨è¯´æ˜">å¼•ç”¨è¯´æ˜</h2>
<p>å¦‚æœç ”ç©¶ä¸­ä½¿ç”¨cntextï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹æ ¼å¼è¿›è¡Œå¼•ç”¨</p>
<h3 id="apalike">apalike</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Deng X., Nan P. (2022). cntext: a Python tool for text mining (version 1.7.9). DOI: 10.5281/zenodo.7063523 URL: https://github.com/hiDaDeng/cntext
</code></pre></div><h3 id="bibtex">bibtex</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">@misc{YourReferenceHere,
author = {Deng, Xudong and Nan, Peng},
doi = {10.5281/zenodo.7063523},
month = {9},
title = {cntext: a Python tool for text mining},
url = {https://github.com/hiDaDeng/cntext},
year = {2022}
}
</code></pre></div><h3 id="endnote">endnote</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">%0 Generic
%A Deng, Xudong
%A Nan, Peng
%D 2022
%K text mining
%K text analysi
%K social science
%K management science
%K semantic analysis
%R 10.5281/zenodo.7063523
%T cntext: a Python tool for text mining
%U https://github.com/hiDaDeng/cntext
</code></pre></div><br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>sentence-transformeråº“ | å¥å­è¯­ä¹‰å‘é‡åŒ–</title>
      <link>https://hidadeng.github.io/blog/sentence-transformer-tutorial/</link>
      <pubDate>Mon, 09 May 2022 09:40:10 +0600</pubDate>
      
      <guid>/blog/sentence-transformer-tutorial/</guid>
      <description>ä½¿ç”¨sentence-transformeråº“BERTæŠ€æœ¯ï¼Œå°†å¥å­è¯­ä¹‰å‘é‡åŒ–</description>
      <content:encoded><![CDATA[<blockquote>
<p>å†…å®¹æ‘˜è‡ª</p>
<p>åˆ˜ç„•å‹‡åšå®¢: <a href="https://liuhuanyong.github.io/">https://liuhuanyong.github.io/</a></p>
<p>åŸæ–‡åœ°å€: <a href="https://mp.weixin.qq.com/s/fkgk8l_Vd4YDU_K6G54F4Q">https://mp.weixin.qq.com/s/fkgk8l_Vd4YDU_K6G54F4Q</a></p>
<p>å…¬ä¼—å·: è€åˆ˜è¯´NLP</p>
</blockquote>
<p>word2vecã€gloveæ˜¯ä¸¤ç§é™æ€çš„è¯å‘é‡æ¨¡å‹ï¼Œå³æ¯ä¸ªè¯è¯­åªæœ‰ä¸€ä¸ªå›ºå®šçš„å‘é‡è¡¨ç¤ºã€‚ä½†åœ¨ä¸åŒè¯­å¢ƒä¸­ï¼Œè¯è¯­çš„è¯­ä¹‰ä¼šå‘ç”Ÿå˜åŒ–ï¼ŒæŒ‰é“ç†è¯å‘é‡ä¹Ÿåº”è¯¥åŠ¨æ€è°ƒæ•´ã€‚ç›¸æ¯”word2vecã€gloveç”Ÿæˆçš„é™æ€è¯å‘é‡ï¼Œ BERTæ˜¯ä¸€ç§åŠ¨æ€çš„æŠ€æœ¯ï¼Œå¯ä»¥æ ¹æ®ä¸Šä¸‹æ–‡æƒ…æ™¯ï¼Œå¾—åˆ°è¯­ä¹‰å˜åŒ–çš„è¯å‘é‡ã€‚</p>
<p>HuggingFaceç½‘ç«™æä¾›äº†ç®€æ˜“å¯ç”¨çš„æ•°æ®é›†ã€ä¸°å¯Œçš„é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ï¼Œ é€šè¿‡sentence-transformeråº“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨HuggingFaceå†…çš„é¢„è®­ç»ƒæ¨¡å‹ï¼Œå¾—åˆ°ä¸åŒæƒ…æ™¯çš„æ–‡æœ¬çš„è¯­ä¹‰å‘é‡ã€‚</p>
<p>HuggingFaceç½‘ç«™  <a href="https://huggingface.co/">https://huggingface.co/</a></p>
<p><img loading="lazy" src="img/HuggingFace.png" alt=""  />
</p>
<br>
<h2 id="åŠ¨æ€å¥å‘é‡">åŠ¨æ€å¥å‘é‡</h2>
<p>sentence-transformeræ¡†æ¶æä¾›äº†ä¸€ç§ç®€ä¾¿çš„æ–¹æ³•æ¥è®¡ç®—å¥å­å’Œæ®µè½çš„å‘é‡è¡¨ç¤ºï¼ˆä¹Ÿç§°ä¸ºå¥å­åµŒå…¥ï¼‰</p>
<p><img loading="lazy" src="img/sentence-transformer.png" alt=""  />
</p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">pip3</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">sentence</span><span class="o">-</span><span class="n">transformers</span>
</code></pre></div><br>
<h2 id="ä»£ç ">ä»£ç </h2>
<p><a href="sentence-transformer-tutorial.zip">click to download the code</a></p>
<p>ä½¿ç”¨huggingfaceä¸­çš„distiluse-base-multilingual-casedä¸è®­ç»ƒæ¨¡å‹ï¼Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">sentence_transformers</span> <span class="kn">import</span> <span class="n">SentenceTransformer</span><span class="p">,</span> <span class="n">util</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">SentenceTransformer</span><span class="p">(</span><span class="s1">&#39;distiluse-base-multilingual-cased&#39;</span><span class="p">)</span>
</code></pre></div><p>ç¬¬ä¸€æ¬¡è¿è¡Œä¸Šæ–¹çš„ä»£ç ï¼Œéœ€è¦è¿è¡Œä¸€å®šçš„æ—¶é—´ç”¨äºä¸‹è½½ã€‚ä¸‹è½½å®Œæˆåï¼Œæˆ‘ä»¬ä½¿ç”¨åŒç§è¯­ä¹‰çš„ä¸­è‹±æ–‡å¥å­ï¼Œåˆ†åˆ«è®¡ç®—å¾—åˆ°emb1å’Œemb2ä¸¤ä¸ªå¥å‘é‡</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">emb1 = model.encode(&#39;Natural language processing is a hard task for human&#39;)

emb2 = model.encode(&#39;è‡ªç„¶è¯­è¨€å¤„ç†å¯¹äºäººç±»æ¥è¯´æ˜¯ä¸ªå›°éš¾çš„ä»»åŠ¡&#39;)
emb1
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">array([ 2.58186590e-02,  4.65703346e-02,  4.25276496e-02, -1.67875513e-02,
        5.56012690e-02, -3.44308838e-02, -6.53978735e-02,  1.77450478e-02,
       -3.47155109e-02,  2.86140274e-02,  2.48657260e-02,  7.94188876e-04,
        5.09755425e-02, -1.76107027e-02, -1.04308855e-02,  7.61642214e-03,
        ...
        4.28482369e-02,  1.76657233e-02, -5.83355911e-02,  1.92921527e-03,
        2.81221420e-02,  5.24400780e-03,  2.10703332e-02,  7.96715263e-03,
       -6.80630878e-02, -2.05304120e-02, -2.43293475e-02, -1.87458862e-02],
      dtype=float32)
</code></pre></div><p>åœ¨distiluse-base-multilingual-casedè¿™ç§æ¨¡å‹ä¸­ï¼Œ ä¸åŒè¯­è¨€çš„åŒä¹‰å¥åº”è¯¥å…·æœ‰ç±»ä¼¼çš„è¯­ä¹‰ï¼Œé‚£ä¹ˆcosç›¸ä¼¼åº¦åº”è¯¥æ˜¯å¾ˆå¤§çš„ã€‚è¶Šæ¥è¿‘äº1è¶Šç›¸ä¼¼ï¼›è¶Šæ¥è¿‘äº0ï¼Œè¶Šä¸ç›¸ä¼¼ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">cos_sim</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">pytorch_cos_sim</span><span class="p">(</span><span class="n">emb1</span><span class="p">,</span> <span class="n">emb2</span><span class="p">)</span>
<span class="n">cos_sim</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">tensor([[0.8960]])
</code></pre></div><p><br><br></p>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>PyEchartsåº“ | ç»˜åˆ¶ç¤¾äº¤å…³ç³»ç½‘ç»œå›¾</title>
      <link>https://hidadeng.github.io/blog/pyecharts_graph_vis/</link>
      <pubDate>Sat, 07 May 2022 10:40:10 +0600</pubDate>
      
      <guid>/blog/pyecharts_graph_vis/</guid>
      <description>ä½¿ç”¨pyechartsç»˜åˆ¶ç¤¾äº¤å…³ç³»ç½‘ç»œå›¾</description>
      <content:encoded><![CDATA[<p>ä½¿ç”¨pyechartsç»˜åˆ¶ç¤¾äº¤ç½‘ç»œå…³ç³»å›¾ï¼Œç›´æ¥ä¸Šä»£ç ã€‚</p>
<h2 id="ä»£ç ">ä»£ç </h2>
<p><a href="pyecharts_graph_vis_code.zip">ç‚¹å‡»ä¸‹è½½ä»£ç </a></p>
<br>
<h2 id="base">base</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pyecharts</span> <span class="kn">import</span> <span class="n">options</span> <span class="k">as</span> <span class="n">opts</span>
<span class="kn">from</span> <span class="nn">pyecharts.charts</span> <span class="kn">import</span> <span class="n">Graph</span>

<span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;ç»“ç‚¹1&#34;</span><span class="p">,</span> <span class="s2">&#34;symbolSize&#34;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;ç»“ç‚¹2&#34;</span><span class="p">,</span> <span class="s2">&#34;symbolSize&#34;</span><span class="p">:</span> <span class="mi">20</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;ç»“ç‚¹3&#34;</span><span class="p">,</span> <span class="s2">&#34;symbolSize&#34;</span><span class="p">:</span> <span class="mi">30</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;ç»“ç‚¹4&#34;</span><span class="p">,</span> <span class="s2">&#34;symbolSize&#34;</span><span class="p">:</span> <span class="mi">40</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;ç»“ç‚¹5&#34;</span><span class="p">,</span> <span class="s2">&#34;symbolSize&#34;</span><span class="p">:</span> <span class="mi">50</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;ç»“ç‚¹6&#34;</span><span class="p">,</span> <span class="s2">&#34;symbolSize&#34;</span><span class="p">:</span> <span class="mi">40</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;ç»“ç‚¹7&#34;</span><span class="p">,</span> <span class="s2">&#34;symbolSize&#34;</span><span class="p">:</span> <span class="mi">30</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;ç»“ç‚¹8&#34;</span><span class="p">,</span> <span class="s2">&#34;symbolSize&#34;</span><span class="p">:</span> <span class="mi">20</span><span class="p">},</span>
<span class="p">]</span>
<span class="n">links</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
        <span class="n">links</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&#34;source&#34;</span><span class="p">:</span> <span class="n">i</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;name&#34;</span><span class="p">),</span> <span class="s2">&#34;target&#34;</span><span class="p">:</span> <span class="n">j</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;name&#34;</span><span class="p">)})</span>

        
<span class="p">(</span>
    <span class="n">Graph</span><span class="p">()</span>
    <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="n">nodes</span><span class="p">,</span> <span class="n">links</span><span class="p">,</span> <span class="n">repulsion</span><span class="o">=</span><span class="mi">8000</span><span class="p">)</span>
    <span class="o">.</span><span class="n">set_global_opts</span><span class="p">(</span><span class="n">title_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">TitleOpts</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&#34;Graph-åŸºæœ¬ç¤ºä¾‹&#34;</span><span class="p">))</span>
    <span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&#34;graph_base.html&#34;</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div><p>Run</p>
<p><a href="graph_base.html">graph_base</a></p>
<p><img loading="lazy" src="img/base.png" alt=""  />
</p>
<br>
<h2 id="weibo">weibo</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">pyecharts</span> <span class="kn">import</span> <span class="n">options</span> <span class="k">as</span> <span class="n">opts</span>
<span class="kn">from</span> <span class="nn">pyecharts.charts</span> <span class="kn">import</span> <span class="n">Graph</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;data/weibo.json&#34;</span><span class="p">,</span> <span class="s2">&#34;r&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">j</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="n">nodes</span><span class="p">,</span> <span class="n">links</span><span class="p">,</span> <span class="n">categories</span><span class="p">,</span> <span class="n">cont</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">userl</span> <span class="o">=</span> <span class="n">j</span>


<span class="p">(</span>
    <span class="n">Graph</span><span class="p">()</span>
    <span class="o">.</span><span class="n">add</span><span class="p">(</span>
        <span class="s2">&#34;&#34;</span><span class="p">,</span>
        <span class="n">nodes</span><span class="p">,</span>
        <span class="n">links</span><span class="p">,</span>
        <span class="n">categories</span><span class="p">,</span>
        <span class="n">repulsion</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
        <span class="n">linestyle_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">LineStyleOpts</span><span class="p">(</span><span class="n">curve</span><span class="o">=</span><span class="mf">0.2</span><span class="p">),</span>
        <span class="n">label_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">LabelOpts</span><span class="p">(</span><span class="n">is_show</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">set_global_opts</span><span class="p">(</span>
        <span class="n">legend_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">LegendOpts</span><span class="p">(</span><span class="n">is_show</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
        <span class="n">title_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">TitleOpts</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&#34;Graph-å¾®åšè½¬å‘å…³ç³»å›¾&#34;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&#34;graph_weibo.html&#34;</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div><p>Run</p>
<p><a href="graph_weibo.html">graph_weibo</a></p>
<p><img loading="lazy" src="img/weibo.png" alt=""  />
</p>
<br>
<h2 id="npm">npm</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pyecharts.options</span> <span class="k">as</span> <span class="nn">opts</span>
<span class="kn">from</span> <span class="nn">pyecharts.charts</span> <span class="kn">import</span> <span class="n">Graph</span>

<span class="s2">&#34;&#34;&#34;
</span><span class="s2">Gallery ä½¿ç”¨ pyecharts 1.1.0
</span><span class="s2">å‚è€ƒåœ°å€: https://echarts.apache.org/examples/editor.html?c=graph-npm
</span><span class="s2">
</span><span class="s2">ç›®å‰æ— æ³•å®ç°çš„åŠŸèƒ½:
</span><span class="s2">
</span><span class="s2">1ã€æš‚æ— 
</span><span class="s2">&#34;&#34;&#34;</span>




<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;data/npmdepgraph.min10.json&#34;</span><span class="p">,</span> <span class="s2">&#34;r&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    
<span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&#34;x&#34;</span><span class="p">:</span> <span class="n">node</span><span class="p">[</span><span class="s2">&#34;x&#34;</span><span class="p">],</span>
        <span class="s2">&#34;y&#34;</span><span class="p">:</span> <span class="n">node</span><span class="p">[</span><span class="s2">&#34;y&#34;</span><span class="p">],</span>
        <span class="s2">&#34;id&#34;</span><span class="p">:</span> <span class="n">node</span><span class="p">[</span><span class="s2">&#34;id&#34;</span><span class="p">],</span>
        <span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="n">node</span><span class="p">[</span><span class="s2">&#34;label&#34;</span><span class="p">],</span>
        <span class="s2">&#34;symbolSize&#34;</span><span class="p">:</span> <span class="n">node</span><span class="p">[</span><span class="s2">&#34;size&#34;</span><span class="p">],</span>
        <span class="s2">&#34;itemStyle&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;normal&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;color&#34;</span><span class="p">:</span> <span class="n">node</span><span class="p">[</span><span class="s2">&#34;color&#34;</span><span class="p">]}},</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&#34;nodes&#34;</span><span class="p">]</span>
<span class="p">]</span>

<span class="n">edges</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&#34;source&#34;</span><span class="p">:</span> <span class="n">edge</span><span class="p">[</span><span class="s2">&#34;sourceID&#34;</span><span class="p">],</span> <span class="s2">&#34;target&#34;</span><span class="p">:</span> <span class="n">edge</span><span class="p">[</span><span class="s2">&#34;targetID&#34;</span><span class="p">]}</span> <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&#34;edges&#34;</span><span class="p">]</span>
<span class="p">]</span>



<span class="p">(</span>
    <span class="n">Graph</span><span class="p">(</span><span class="n">init_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">InitOpts</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&#34;1600px&#34;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s2">&#34;800px&#34;</span><span class="p">))</span>
    <span class="o">.</span><span class="n">add</span><span class="p">(</span>
        <span class="n">series_name</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="p">,</span>
        <span class="n">nodes</span><span class="o">=</span><span class="n">nodes</span><span class="p">,</span>
        <span class="n">links</span><span class="o">=</span><span class="n">edges</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="s2">&#34;none&#34;</span><span class="p">,</span>
        <span class="n">is_roam</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">is_focusnode</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">label_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">LabelOpts</span><span class="p">(</span><span class="n">is_show</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
        <span class="n">linestyle_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">LineStyleOpts</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">curve</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">0.7</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="o">.</span><span class="n">set_global_opts</span><span class="p">(</span><span class="n">title_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">TitleOpts</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&#34;NPM Dependencies&#34;</span><span class="p">))</span>
    <span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s2">&#34;npm_dependencies.html&#34;</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div><p>Run</p>
<p><a href="npm_dependencies.html">npm_dependencies</a></p>
<p><img loading="lazy" src="img/npm.png" alt=""  />
</p>
<br>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>SimpleTransformersåº“ | ä½¿ç”¨BERTå®ç°æ–‡æœ¬å‘é‡åŒ–</title>
      <link>https://hidadeng.github.io/blog/simple_transformer/</link>
      <pubDate>Thu, 05 May 2022 10:40:10 +0600</pubDate>
      
      <guid>/blog/simple_transformer/</guid>
      <description>åŸºäºBERTé¢„è®­ç»ƒæ¨¡å‹ï¼Œå¯¹æ–‡æœ¬è¿›è¡Œå‘é‡åŒ–</description>
      <content:encoded><![CDATA[<p><code>Simple Transformers</code> åº“åŸºäº HuggingFace çš„ <a href="https://github.com/huggingface/transformers">Transformers</a> åº“ï¼Œå¯è®©æ‚¨å¿«é€Ÿè®­ç»ƒå’Œè¯„ä¼° Transformer æ¨¡å‹ï¼Œ <strong>åˆå§‹åŒ–</strong>ã€<strong>è®­ç»ƒ</strong>å’Œ<strong>è¯„ä¼°</strong>æ¨¡å‹åªéœ€è¦ 3 è¡Œä»£ç ã€‚</p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip3 install simpletransformers
</code></pre></div><p><strong>Simple Transformer</strong> æ¨¡å‹åœ¨æ„å»ºæ—¶è€ƒè™‘äº†ç‰¹å®šçš„è‡ªç„¶è¯­è¨€å¤„ç† (NLP) ä»»åŠ¡ã€‚ æ¯ä¸ªè¿™æ ·çš„æ¨¡å‹éƒ½é…å¤‡äº†æ—¨åœ¨æœ€é€‚åˆå®ƒä»¬æ‰“ç®—æ‰§è¡Œçš„ä»»åŠ¡çš„ç‰¹æ€§å’ŒåŠŸèƒ½ã€‚ ä½¿ç”¨ Simple Transformers æ¨¡å‹çš„é«˜çº§è¿‡ç¨‹éµå¾ªç›¸åŒçš„æ¨¡å¼ã€‚</p>
<ol>
<li>åˆå§‹åŒ–ä¸€ä¸ªç‰¹å®šäºä»»åŠ¡çš„æ¨¡å‹
2.ç”¨<code>train_model()</code>è®­ç»ƒæ¨¡å‹</li>
<li>ä½¿ç”¨ <code>eval_model()</code> è¯„ä¼°æ¨¡å‹</li>
<li>ä½¿ç”¨ <code>predict()</code> å¯¹ï¼ˆæœªæ ‡è®°çš„ï¼‰æ•°æ®è¿›è¡Œé¢„æµ‹</li>
</ol>
<p>ä½†æ˜¯ï¼Œä¸åŒæ¨¡å‹ä¹‹é—´å­˜åœ¨å¿…è¦çš„å·®å¼‚ï¼Œä»¥ç¡®ä¿å®ƒä»¬éå¸¸é€‚åˆå…¶é¢„æœŸä»»åŠ¡ã€‚ å…³é”®å·®å¼‚é€šå¸¸æ˜¯è¾“å…¥/è¾“å‡ºæ•°æ®æ ¼å¼å’Œä»»ä½•ä»»åŠ¡ç‰¹å®šåŠŸèƒ½/é…ç½®é€‰é¡¹çš„å·®å¼‚ã€‚ è¿™äº›éƒ½å¯ä»¥åœ¨æ¯ä¸ªä»»åŠ¡çš„æ–‡æ¡£éƒ¨åˆ†ä¸­æ‰¾åˆ°ã€‚</p>
<p>å½“å‰å®ç°çš„ç‰¹å®šäºä»»åŠ¡çš„â€œSimple Transformerâ€æ¨¡å‹åŠå…¶ä»»åŠ¡å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<table>
<thead>
<tr>
<th>Task</th>
<th>Model</th>
</tr>
</thead>
<tbody>
<tr>
<td>Binary and multi-class text classificationæ–‡æœ¬äºŒåˆ†ç±»ã€å¤šåˆ†ç±»</td>
<td><code>ClassificationModel</code></td>
</tr>
<tr>
<td>Conversational AI (chatbot training)å¯¹è¯æœºå™¨äººè®­ç»ƒ</td>
<td><code>ConvAIModel</code></td>
</tr>
<tr>
<td>Language generationè¯­è¨€ç”Ÿæˆ</td>
<td><code>LanguageGenerationModel</code></td>
</tr>
<tr>
<td>Language model training/fine-tuningè¯­è¨€æ¨¡å‹è®­ç»ƒã€å¾®è°ƒ</td>
<td><code>LanguageModelingModel</code></td>
</tr>
<tr>
<td>Multi-label text classificationå¤šç±»åˆ«æ–‡æœ¬åˆ†ç±»</td>
<td><code>MultiLabelClassificationModel</code></td>
</tr>
<tr>
<td>Multi-modal classification (text and image data combined)å¤šæ¨¡æ€åˆ†ç±»</td>
<td><code>MultiModalClassificationModel</code></td>
</tr>
<tr>
<td>Named entity recognitionå‘½åå®ä½“è¯†åˆ«</td>
<td><code>NERModel</code></td>
</tr>
<tr>
<td>Question answeringé—®ç­”</td>
<td><code>QuestionAnsweringModel</code></td>
</tr>
<tr>
<td>Regressionå›å½’</td>
<td><code>ClassificationModel</code></td>
</tr>
<tr>
<td>Sentence-pair classificationå¥å¯¹åˆ†ç±»</td>
<td><code>ClassificationModel</code></td>
</tr>
<tr>
<td><strong>Text Representation Generationæ–‡æœ¬è¡¨å¾ç”Ÿæˆ</strong></td>
<td><strong>RepresentationModel</strong></td>
</tr>
<tr>
<td>Document Retrievalæ–‡æ¡£æŠ½å–</td>
<td><code>RetrievalModel</code></td>
</tr>
</tbody>
</table>
<ul>
<li><strong>æœ‰å…³å¦‚ä½•ä½¿ç”¨è¿™äº›æ¨¡å‹çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="https://simpletransformers.ai/">docs</a> ä¸­çš„ç›¸å…³éƒ¨åˆ†ã€‚</strong></li>
<li>ç¤ºä¾‹è„šæœ¬å¯ä»¥åœ¨ <a href="https://github.com/ThilinaRajapakse/simpletransformers/tree/master/examples">examples</a> ç›®å½•ä¸­æ‰¾åˆ°ã€‚</li>
<li>æœ‰å…³é¡¹ç›®çš„æœ€æ–°æ›´æ”¹ï¼Œè¯·å‚é˜… <a href="https://github.com/ThilinaRajapakse/simpletransformers/blob/master/CHANGELOG.md">Changelog</a>ã€‚</li>
</ul>
<h2 id="ç”Ÿæˆå¥å­åµŒå…¥">ç”Ÿæˆå¥å­åµŒå…¥</h2>
<p>ä½¿ç”¨huggingfaceç½‘ç«™https://huggingface.co/ æä¾›çš„æ¨¡å‹</p>
<ul>
<li>è‹±æ–‡æ¨¡å‹ bert-base-uncased</li>
<li>ä¸­æ–‡æ¨¡å‹ bert-base-chinese</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">simpletransformers.language_representation</span> <span class="kn">import</span> <span class="n">RepresentationModel</span>
<span class="n">sentences</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;Machine Learning and Deep Learning are part of AI&#34;</span><span class="p">,</span> 
             <span class="s2">&#34;Data Science will excel in future&#34;</span><span class="p">]</span> <span class="c1">#it should always be a list</span>


<span class="n">model</span> <span class="o">=</span> <span class="n">RepresentationModel</span><span class="p">(</span>
        <span class="n">model_type</span><span class="o">=</span><span class="s2">&#34;bert&#34;</span><span class="p">,</span>
        <span class="n">model_name</span><span class="o">=</span><span class="s2">&#34;bert-base-uncased&#34;</span><span class="p">,</span> <span class="c1">#è‹±æ–‡æ¨¡å‹</span>
        <span class="n">use_cuda</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">sentence_vectors</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">encode_sentences</span><span class="p">(</span><span class="n">sentences</span><span class="p">,</span> <span class="n">combine_strategy</span><span class="o">=</span><span class="s2">&#34;mean&#34;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sentence_vectors</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sentence_vectors</span><span class="p">)</span>

</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">(2, 768)

array([[-0.10800573,  0.19615649, -0.10756102, ..., -0.26362818,
         0.56403756, -0.30985302],
       [ 0.0201617 , -0.19381572,  0.4360792 , ..., -0.2979438 ,
         0.04984972, -0.702381  ]], dtype=float32)
</code></pre></div><br>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>geopyåº“ | åœ°ç†ç¼–ç è®¡ç®—è·ç¦»</title>
      <link>https://hidadeng.github.io/blog/geopy_distance_calculate/</link>
      <pubDate>Thu, 28 Apr 2022 10:40:10 +0600</pubDate>
      
      <guid>/blog/geopy_distance_calculate/</guid>
      <description>åœ°ç†ä¿¡æ¯æ•°æ®åˆ†æï¼Œç»çº¬åº¦è·ç¦»è®¡ç®—</description>
      <content:encoded><![CDATA[<h1 id="geopy">geopy</h1>
<p>geopy æ˜¯å‡ ä¸ªæµè¡Œçš„åœ°ç†ç¼–ç ç½‘ç»œæœåŠ¡çš„ Python å®¢æˆ·ç«¯ã€‚</p>
<p>geopy ä½¿ Python å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åœ°ç†ç¼–ç å™¨å’Œå…¶ä»–æ•°æ®æºè½»æ¾å®šä½å…¨çƒåœ°å€ã€åŸå¸‚ã€å›½å®¶å’Œåœ°æ ‡çš„åæ ‡ã€‚</p>
<p>geopy åŒ…æ‹¬ç”¨äº <a href="https://nominatim.org/">OpenStreetMap Nominatim</a>ã€<a href="https://developers.google.com/maps/documentation/geocoding/">Google Geocoding API (V3)</a> çš„åœ°ç†ç¼–ç å™¨ç±»å’Œè®¸å¤š å…¶ä»–åœ°ç†ç¼–ç æœåŠ¡ã€‚ å®Œæ•´åˆ—è¡¨å¯åœ¨ <a href="https://geopy.readthedocs.io/en/latest/#geocoders">Geocoders æ–‡æ¡£éƒ¨åˆ†</a> ä¸Šæ‰¾åˆ°ã€‚ åœ°ç†ç¼–ç å™¨ç±»ä½äº <a href="https://github.com/geopy/geopy/tree/master/geopy/geocoders">geopy.geocoders</a>ã€‚</p>
<p>geopy é’ˆå¯¹ CPythonï¼ˆç‰ˆæœ¬ 3.5ã€3.6ã€3.7ã€3.8ã€3.9ï¼‰å’Œ PyPy3 è¿›è¡Œäº†æµ‹è¯•ã€‚ geopy 1.x ç³»åˆ—è¿˜æ”¯æŒ CPython 2.7ã€3.4 å’Œ PyPy2ã€‚</p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip3 install geopy
</code></pre></div><h2 id="geocoding">Geocoding</h2>
<p>è¦å°†æŸ¥è¯¢åœ°ç†å®šä½åˆ°åœ°å€å’Œåæ ‡ï¼š</p>
<p>é¦–å…ˆéœ€è¦åœ¨https://www.openstreetmap.org/æ³¨å†Œè´¦å·ï¼Œæ³¨å†Œä¸€ä¸ªappåã€‚æ³¨å†Œå¥½çš„appåç”¨äºå¡«å……user_agent</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">geopy.geocoders</span> <span class="kn">import</span> <span class="n">Nominatim</span>

<span class="n">geolocator</span> <span class="o">=</span> <span class="n">Nominatim</span><span class="p">(</span><span class="n">user_agent</span><span class="o">=</span><span class="s2">&#34;specify_your_app_name_here&#34;</span><span class="p">)</span>
<span class="n">location</span> <span class="o">=</span> <span class="n">geolocator</span><span class="o">.</span><span class="n">geocode</span><span class="p">(</span><span class="s2">&#34;175 5th Avenue NYC&#34;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">location</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
<span class="nb">print</span><span class="p">((</span><span class="n">location</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span> <span class="n">location</span><span class="o">.</span><span class="n">longitude</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">location</span><span class="o">.</span><span class="n">raw</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Flatiron Building, 175, 5th Avenue, Flatiron, New York, NYC, New York, ...
(40.7410861, -73.9896297241625)
{&#39;place_id&#39;: &#39;9167009604&#39;, &#39;type&#39;: &#39;attraction&#39;, ...}
</code></pre></div><p><br><br></p>
<p>ä¸ºäº†æ‰¾åˆ°åœ°å€å¯¹åº”çš„ç»çº¬åº¦</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">geopy.geocoders</span> <span class="kn">import</span> <span class="n">Nominatim</span>

<span class="n">geolocator</span> <span class="o">=</span> <span class="n">Nominatim</span><span class="p">(</span><span class="n">user_agent</span><span class="o">=</span><span class="s2">&#34;specify_your_app_name_here&#34;</span><span class="p">)</span>
<span class="n">location</span> <span class="o">=</span> <span class="n">geolocator</span><span class="o">.</span><span class="n">reverse</span><span class="p">(</span><span class="s2">&#34;52.509669, 13.376294&#34;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">location</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
<span class="nb">print</span><span class="p">((</span><span class="n">location</span><span class="o">.</span><span class="n">latitude</span><span class="p">,</span> <span class="n">location</span><span class="o">.</span><span class="n">longitude</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">location</span><span class="o">.</span><span class="n">raw</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Potsdamer Platz, Mitte, Berlin, 10117, Deutschland, European Union
(52.5094982, 13.3765983)
{&#39;place_id&#39;: &#39;654513&#39;, &#39;osm_type&#39;: &#39;node&#39;, ...}
</code></pre></div><p><br><br></p>
<h2 id="æµ‹é‡è·ç¦»">æµ‹é‡è·ç¦»</h2>
<p>Geopy å¯ä»¥ä½¿ç”¨ <a href="https://en.wikipedia.org/wiki/Geodesics_on_an_ellipsoid">geodesic distance</a> æˆ– <a href="https://en.wikipedia.org/wiki/">great-circle distance</a> è®¡ç®—ä¸¤ç‚¹ä¹‹é—´çš„æµ‹åœ°çº¿è·ç¦» Great-circle_distanceï¼‰ï¼Œé»˜è®¤çš„æµ‹åœ°çº¿è·ç¦»å¯ç”¨ä½œå‡½æ•° geopy.distance.distanceã€‚</p>
<p>è¿™æ˜¯æµ‹åœ°çº¿è·ç¦»çš„ç¤ºä¾‹ç”¨æ³•ï¼Œé‡‡ç”¨ä¸€å¯¹ <code>(lat, lon)</code> å…ƒç»„ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">geopy.distance</span> <span class="kn">import</span> <span class="n">geodesic</span>
<span class="n">newport_ri</span> <span class="o">=</span> <span class="p">(</span><span class="mf">41.49008</span><span class="p">,</span> <span class="o">-</span><span class="mf">71.312796</span><span class="p">)</span>
<span class="n">cleveland_oh</span> <span class="o">=</span> <span class="p">(</span><span class="mf">41.499498</span><span class="p">,</span> <span class="o">-</span><span class="mf">81.695391</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">geodesic</span><span class="p">(</span><span class="n">newport_ri</span><span class="p">,</span> <span class="n">cleveland_oh</span><span class="p">)</span><span class="o">.</span><span class="n">miles</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">538.390445368
</code></pre></div><br>
<p>ä½¿ç”¨great-cricleè·ç¦»ç®—æ³•ï¼ŒåŒæ—¶é‡‡ç”¨ä¸€å¯¹ <code>(lat, lon)</code> å…ƒç»„ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">geopy.distance</span> <span class="kn">import</span> <span class="n">great_circle</span>
<span class="n">newport_ri</span> <span class="o">=</span> <span class="p">(</span><span class="mf">41.49008</span><span class="p">,</span> <span class="o">-</span><span class="mf">71.312796</span><span class="p">)</span>
<span class="n">cleveland_oh</span> <span class="o">=</span> <span class="p">(</span><span class="mf">41.499498</span><span class="p">,</span> <span class="o">-</span><span class="mf">81.695391</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">great_circle</span><span class="p">(</span><span class="n">newport_ri</span><span class="p">,</span> <span class="n">cleveland_oh</span><span class="p">)</span><span class="o">.</span><span class="n">miles</span><span class="p">)</span>

</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">536.997990696
</code></pre></div><br>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>TransBigDataåº“ | å‡ºç§Ÿè½¦GPSæ•°æ®å¤„ç†</title>
      <link>https://hidadeng.github.io/blog/trans_big_data_examples_taxi_data/</link>
      <pubDate>Thu, 28 Apr 2022 10:40:10 +0600</pubDate>
      
      <guid>/blog/trans_big_data_examples_taxi_data/</guid>
      <description>åœ°ç†ä¿¡æ¯æ•°æ®å¤„ç†åŒ…TransBigData</description>
      <content:encoded><![CDATA[<h2 id="taxi-gpsæ•°æ®å¤„ç†">Taxi GPSæ•°æ®å¤„ç†</h2>
<p>Bç«™-åŒæµå°æ—­å­¦é•¿</p>
<iframe
    src="//player.bilibili.com/player.html?bvid=BV1na411i7sd&page=3"
    scrolling="no"
    height="500px"
    width="800px"
    frameborder="no"
    framespacing="0"
    allowfullscreen="true"
>
</iframe>

<br>
<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="taxi_code_trans_big_data.zip">download the code</a></p>
<br>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ TransBigData åŒ…æ¥é«˜æ•ˆå¤„ç† Taxi GPS æ•°æ®ã€‚é¦–å…ˆï¼Œå¯¼å…¥ TransBigData å¹¶ä½¿ç”¨ pandas è¯»å–æ•°æ®</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">mapclassify</span><span class="o">==</span><span class="mf">2.4.3</span>
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">transbigdata</span><span class="o">==</span><span class="mf">0.4.7</span>
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">keplergl</span><span class="o">==</span><span class="mf">0.3.2</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">transbigdata</span> <span class="k">as</span> <span class="nn">tbd</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>

<span class="c1"># Read data</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/TaxiData-Sample.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;VehicleNum&#39;</span><span class="p">,</span> <span class="s1">&#39;Time&#39;</span><span class="p">,</span> <span class="s1">&#39;Lng&#39;</span><span class="p">,</span> <span class="s1">&#39;Lat&#39;</span><span class="p">,</span> <span class="s1">&#39;OpenStatus&#39;</span><span class="p">,</span> <span class="s1">&#39;Speed&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p><img loading="lazy" src="img/df1.png" alt="png"  />
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Read the GeoDataFrame of the study area</span>
<span class="n">sz</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;data/sz.json&#39;</span><span class="p">)</span>
<span class="n">sz</span><span class="o">.</span><span class="n">crs</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">sz</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p><img loading="lazy" src="img/df2.png" alt="png"  />
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">150</span><span class="p">)</span> 
<span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">sz</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">([],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">);</span>
</code></pre></div><p><img loading="lazy" src="img/output_4_0.png" alt="png"  />
</p>
<br>
<h2 id="æ•°æ®é¢„å¤„ç†">æ•°æ®é¢„å¤„ç†</h2>
<p>TransBigData é›†æˆäº†å‡ ç§å¸¸ç”¨çš„æ•°æ®é¢„å¤„ç†æ–¹æ³•ã€‚ ä½¿ç”¨<code>tbd.clean_outofshape</code>æ–¹æ³•ï¼Œç»™å®šç ”ç©¶åŒºåŸŸçš„æ•°æ®å’ŒGeoDataFrameï¼Œå¯ä»¥åˆ é™¤ç ”ç©¶åŒºåŸŸå¤–çš„æ•°æ®ã€‚ <code>tbd.clean_taxi_status</code> æ–¹æ³•å¯ä»¥è¿‡æ»¤æ‰ä¹˜å®¢çŠ¶æ€ï¼ˆOpenStatusï¼‰ç¬æ—¶å˜åŒ–çš„æ•°æ®ã€‚ ä½¿ç”¨é¢„å¤„ç†æ–¹å¼æ—¶ï¼Œéœ€è¦å°†å¯¹åº”çš„åˆ—åä½œä¸ºå‚æ•°ä¼ å…¥ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Data Preprocessing</span>
<span class="c1"># Delete the data outside of the study area</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">tbd</span><span class="o">.</span><span class="n">clean_outofshape</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">sz</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Lng&#39;</span><span class="p">,</span> <span class="s1">&#39;Lat&#39;</span><span class="p">],</span> <span class="n">accuracy</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>

<span class="c1"># Delete the data with instantaneous changes in passenger status</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">tbd</span><span class="o">.</span><span class="n">clean_taxi_status</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;VehicleNum&#39;</span><span class="p">,</span> <span class="s1">&#39;Time&#39;</span><span class="p">,</span> <span class="s1">&#39;OpenStatus&#39;</span><span class="p">])</span>
</code></pre></div><br>
<h2 id="æ•°æ®ç½‘æ ¼åŒ–">æ•°æ®ç½‘æ ¼åŒ–</h2>
<p>æ•°æ®åˆ†å¸ƒæœ€åŸºæœ¬çš„è¡¨è¾¾æ–¹å¼æ˜¯åœ°ç†ç½‘æ ¼çš„å½¢å¼ï¼›</p>
<p>æ•°æ®ç½‘æ ¼åŒ–åï¼Œæ¯ä¸ª GPS æ•°æ®ç‚¹æ˜ å°„åˆ°ç›¸åº”çš„ç½‘æ ¼ã€‚ å¯¹äºæ•°æ®ç½‘æ ¼åŒ–ï¼Œé¦–å…ˆéœ€è¦ç¡®å®šç½‘æ ¼åŒ–å‚æ•°ï¼ˆå¯ä»¥ç†è§£ä¸ºå®šä¹‰ä¸€ä¸ªç½‘æ ¼åæ ‡ç³»ï¼‰ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># æ•°æ®ç½‘æ ¼åŒ–</span>
<span class="c1"># å®šä¹‰è¾¹ç•Œå¹¶ç”Ÿæˆç½‘æ ¼å‚æ•°ï¼ˆç»çº¬åº¦ï¼‰</span>
<span class="n">bounds</span> <span class="o">=</span> <span class="p">[</span><span class="mf">113.6</span><span class="p">,</span> <span class="mf">22.4</span><span class="p">,</span> <span class="mf">114.8</span><span class="p">,</span> <span class="mf">22.9</span><span class="p">]</span>
<span class="n">params</span> <span class="o">=</span> <span class="n">tbd</span><span class="o">.</span><span class="n">area_to_params</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span> <span class="n">accuracy</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
</code></pre></div><pre><code>{'slon': 113.6, 'slat': 22.4, 'deltalon': 0.004872390756896538, 'deltalat': 0.004496605206422906, 'theta': 0, 'method': 'rect', 'gridsize': 500}
</code></pre>
<p>è·å¾—ç½‘æ ¼åŒ–å‚æ•°åï¼Œä¸‹ä¸€æ­¥å°±æ˜¯å°† GPS æ˜ å°„åˆ°å…¶å¯¹åº”çš„ç½‘æ ¼ä¸Šã€‚</p>
<p>ä½¿ç”¨ <code>tbd.GPS_to_grids</code>ï¼Œå®ƒå°†ç”Ÿæˆ <code>LONCOL</code> åˆ—å’Œ <code>LATCOL</code> åˆ—ã€‚ ä¸¤åˆ—ä¸€èµ·å¯ä»¥æŒ‡å®šä¸€ä¸ªç½‘æ ¼ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Mapping GPS data to grids</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;LONCOL&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;LATCOL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tbd</span><span class="o">.</span><span class="n">GPS_to_grid</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Lng&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Lat&#39;</span><span class="p">],</span> <span class="n">params</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p><img loading="lazy" src="img/df3.png" alt="png"  />
</p>
<p>è®¡ç®—æ¯ä¸ªç½‘æ ¼ä¸­çš„æ•°æ®é‡ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Aggregate data into grids</span>
<span class="n">datatest</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;LONCOL&#39;</span><span class="p">,</span> <span class="s1">&#39;LATCOL&#39;</span><span class="p">])[</span><span class="s1">&#39;VehicleNum&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">datatest</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p><img loading="lazy" src="img/df4.png" alt="png"  />
</p>
<p>å°†ç”Ÿæˆç½‘æ ¼çš„geometryå¹¶å°†å…¶è½¬æ¢ä¸º GeoDataFrame</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Generate the geometry for grids</span>
<span class="n">datatest</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tbd</span><span class="o">.</span><span class="n">grid_to_polygon</span><span class="p">([</span><span class="n">datatest</span><span class="p">[</span><span class="s1">&#39;LONCOL&#39;</span><span class="p">],</span> <span class="n">datatest</span><span class="p">[</span><span class="s1">&#39;LATCOL&#39;</span><span class="p">]],</span> <span class="n">params</span><span class="p">)</span>

<span class="c1"># Change it into GeoDataFrame</span>
<span class="c1"># import geopandas as gpd</span>
<span class="n">datatest</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">datatest</span><span class="p">)</span>
<span class="n">datatest</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p><img loading="lazy" src="img/df5.png" alt="png"  />
</p>
<p>ç»˜åˆ¶ç”Ÿæˆçš„ç½‘æ ¼ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Plot the grids</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span> 
<span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>

<span class="c1"># tbd.plot_map(plt, bounds, zoom=10, style=4)</span>
<span class="n">datatest</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="s1">&#39;VehicleNum&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">([],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Counting of Taxi GPS Trajectory Points&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">);</span>
</code></pre></div><p>â€‹ <br>
<img loading="lazy" src="img/output_16_0.png" alt="png"  />

â€‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Plot the grids</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span> <span class="c1"># ç¡®å®šå›¾å½¢é«˜ä¸º6ï¼Œå®½ä¸º8ï¼›å›¾å½¢æ¸…æ™°åº¦</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">datatest</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="s1">&#39;VehicleNum&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;quantiles&#39;</span><span class="p">)</span>
<span class="c1"># plt.legend(fontsize=10)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">([],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Counting of Taxi GPS Trajectory Points&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">);</span>
</code></pre></div><p>â€‹ <br>
<img loading="lazy" src="img/output_17_0.png" alt="png"  />

â€‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Plot the grids</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">150</span><span class="p">)</span> <span class="c1"># ç¡®å®šå›¾å½¢é«˜ä¸º6ï¼Œå®½ä¸º8ï¼›å›¾å½¢æ¸…æ™°åº¦</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">datatest</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="s1">&#39;VehicleNum&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;OrRd&#39;</span><span class="p">,</span> <span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;quantiles&#39;</span><span class="p">)</span>
<span class="c1"># plt.legend(fontsize=10)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">([],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Counting of Taxi GPS Trajectory Points&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">);</span>
</code></pre></div><p>â€‹ <br>
<img loading="lazy" src="img/output_18_0.png" alt="png"  />

â€‹</p>
<br>
<h2 id="origin-destinationod-æå–å’Œæ±‡æ€»å‡ºç§Ÿè½¦è¡Œç¨‹">Origin-destination(OD) æå–å’Œæ±‡æ€»å‡ºç§Ÿè½¦è¡Œç¨‹</h2>
<p>ä½¿ç”¨ <code>tbd.taxigps_to_od</code> æ–¹æ³•å¹¶ä¼ å…¥å¯¹åº”çš„åˆ—åæ¥æå–å‡ºç§Ÿè½¦è¡Œç¨‹ ODï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Extract taxi OD from GPS data</span>
<span class="n">oddata</span> <span class="o">=</span> <span class="n">tbd</span><span class="o">.</span><span class="n">taxigps_to_od</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">col</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;VehicleNum&#39;</span><span class="p">,</span> <span class="s1">&#39;Time&#39;</span><span class="p">,</span> <span class="s1">&#39;Lng&#39;</span><span class="p">,</span> <span class="s1">&#39;Lat&#39;</span><span class="p">,</span> <span class="s1">&#39;OpenStatus&#39;</span><span class="p">])</span>
<span class="n">oddata</span>
</code></pre></div><p><img loading="lazy" src="img/df6.png" alt="png"  />
</p>
<p>èšåˆæå–çš„ OD å¹¶ç”Ÿæˆ LineString GeoDataFrame</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Gridding and aggragate data</span>
<span class="n">od_gdf</span> <span class="o">=</span> <span class="n">tbd</span><span class="o">.</span><span class="n">odagg_grid</span><span class="p">(</span><span class="n">oddata</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
<span class="n">od_gdf</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p><img loading="lazy" src="img/df7.png" alt="png"  />
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Plot the grids</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">150</span><span class="p">)</span> <span class="c1"># ç¡®å®šå›¾å½¢é«˜ä¸º6ï¼Œå®½ä¸º8ï¼›å›¾å½¢æ¸…æ™°åº¦</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="c1"># data_grid_count.plot(ax=ax1, column=&#39;VehicleNum&#39;, legend=True, cmap=&#39;OrRd&#39;, scheme=&#39;quantiles&#39;)</span>

<span class="n">od_gdf</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;quantiles&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">([],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;OD Trips&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">);</span>
</code></pre></div><p>â€‹ <br>
<img loading="lazy" src="img/output_23_0.png" alt="png"  />

â€‹</p>
<br>
<h2 id="å°†-od-èšåˆæˆå¤šè¾¹å½¢">å°† OD èšåˆæˆå¤šè¾¹å½¢</h2>
<p><code>TransBigData</code> è¿˜æä¾›äº†å°† OD èšåˆæˆå¤šè¾¹å½¢çš„æ–¹æ³•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Aggragate OD data to polygons </span>
<span class="c1"># without passing gridding parameters, the algorithm will map the data </span>
<span class="c1"># to polygons directly using their coordinates</span>
<span class="n">od_gdf</span> <span class="o">=</span> <span class="n">tbd</span><span class="o">.</span><span class="n">odagg_shape</span><span class="p">(</span><span class="n">oddata</span><span class="p">,</span> <span class="n">sz</span><span class="p">,</span> <span class="n">round_accuracy</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">150</span><span class="p">)</span> <span class="c1"># ç¡®å®šå›¾å½¢é«˜ä¸º6ï¼Œå®½ä¸º8ï¼›å›¾å½¢æ¸…æ™°åº¦</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">od_gdf</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">([],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;OD Trips&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">);</span>
</code></pre></div><p><img loading="lazy" src="img/output_25_0.png" alt="png"  />
</p>
<br>
<h2 id="åŸºäº-matplotlib-çš„åœ°å›¾ç»˜åˆ¶">åŸºäº Matplotlib çš„åœ°å›¾ç»˜åˆ¶</h2>
<p><code>TransBigData</code> è¿˜åœ¨ matplotlib ä¸­æä¾›åº•å›¾åŠ è½½ã€‚ åœ¨ä½¿ç”¨æ­¤æ–¹æ³•ä¹‹å‰ï¼Œæ‚¨éœ€è¦è®¾ç½®æ‚¨çš„ mapboxtoken å’Œåº•å›¾çš„å­˜å‚¨ä½ç½®ï¼Œè¯·å‚è§ï¼š<a href="https://transbigdata.readthedocs.io/en/latest/plot_map.html">æ­¤é“¾æ¥</a>ã€‚<code>tbd.plot_map</code> æ·»åŠ åº•å›¾å’Œ tbd.plotscale ä»¥æ·»åŠ æ¯”ä¾‹å’ŒæŒ‡å—é’ˆï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Create figure</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">sca</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>

<span class="c1"># Load basemap</span>
<span class="n">tbd</span><span class="o">.</span><span class="n">plot_map</span><span class="p">(</span><span class="n">plt</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="c1"># Define an ax for colorbar</span>
<span class="n">cax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">([</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.33</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;OD</span><span class="se">\n</span><span class="s1">Matrix&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">sca</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>

<span class="c1"># Plot the OD</span>
<span class="n">od_gdf</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cax</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Plot the polygons</span>
<span class="n">sz</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">facecolor</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">),</span> <span class="n">linewidths</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="c1"># Add compass and scale</span>
<span class="n">tbd</span><span class="o">.</span><span class="n">plotscale</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">textsize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">compasssize</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">accuracy</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span> <span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mf">0.06</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">],</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div><p>â€‹ <br>
<img loading="lazy" src="img/output_27_0.png" alt="png"  />

â€‹</p>
<br>
## æå–å‡ºç§Ÿè½¦è½¨è¿¹
ä½¿ç”¨`the.taxigps_traj_point`æ–¹æ³•ï¼Œè¾“å…¥GPSæ•°æ®å’ŒODæ•°æ®ï¼Œå¯ä»¥æå–è½¨è¿¹ç‚¹
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">data_deliver</span><span class="p">,</span> <span class="n">data_idle</span> <span class="o">=</span> <span class="n">tbd</span><span class="o">.</span><span class="n">taxigps_traj_point</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">oddata</span><span class="p">,</span><span class="n">col</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;VehicleNum&#39;</span><span class="p">,</span> 
                                                                  <span class="s1">&#39;Time&#39;</span><span class="p">,</span> 
                                                                  <span class="s1">&#39;Lng&#39;</span><span class="p">,</span> 
                                                                  <span class="s1">&#39;Lat&#39;</span><span class="p">,</span> 
                                                                  <span class="s1">&#39;OpenStatus&#39;</span><span class="p">])</span>
<span class="n">data_deliver</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p><img loading="lazy" src="img/df8.png" alt="png"  />
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">data_idle</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p><img loading="lazy" src="img/df9.png" alt="png"  />
</p>
<p>ç”Ÿæˆè½¨è¿¹å›¾</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">traj_deliver</span> <span class="o">=</span> <span class="n">tbd</span><span class="o">.</span><span class="n">points_to_traj</span><span class="p">(</span><span class="n">data_deliver</span><span class="p">)</span>
<span class="n">traj_deliver</span><span class="o">.</span><span class="n">plot</span><span class="p">();</span>
</code></pre></div><p>â€‹ <br>
<img loading="lazy" src="img/output_33_0.png" alt="png"  />

â€‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">traj_idle</span> <span class="o">=</span> <span class="n">tbd</span><span class="o">.</span><span class="n">points_to_traj</span><span class="p">(</span><span class="n">data_idle</span><span class="p">[</span><span class="n">data_idle</span><span class="p">[</span><span class="s1">&#39;OpenStatus&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">traj_idle</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</code></pre></div><p>â€‹ <br>
<img loading="lazy" src="img/output_34_1.png" alt="png"  />

â€‹</p>
<br>
<h2 id="è½¨è¿¹å¯è§†åŒ–trajectories-visualization">è½¨è¿¹å¯è§†åŒ–Trajectories visualization</h2>
<p><code>TransBigData</code> çš„å†…ç½®å¯è§†åŒ–åŠŸèƒ½åˆ©ç”¨äº†å¯è§†åŒ–åŒ… <code>keplergl</code> ï¼Œä½¿ç”¨ç®€å•ä»£ç å³å¯åœ¨ Jupyter notebook ä¸Šäº¤äº’å¼åœ°æ˜¾ç¤ºè½¨è¿¹æ•°æ®ã€‚</p>
<p>è¦ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œè¯·ä¸º python å®‰è£… <code>keplergl</code> åŒ…ï¼š</p>
<blockquote>
<p>pip3 install keplergl</p>
</blockquote>
<p>å®‰è£…åï¼Œéœ€è¦æŒ‰ç…§ <a href="https://transbigdata.readthedocs.io/en/latest/visualization.html">link</a> é…ç½®jupyter notebook</p>
<p>Visualization of trajectory data:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">tbd</span><span class="o">.</span><span class="n">visualization_trip</span><span class="p">(</span><span class="n">data_deliver</span><span class="p">)</span>
</code></pre></div><pre><code>Processing trajectory data...
Generate visualization...
User Guide: https://docs.kepler.gl/docs/keplergl-jupyter
</code></pre>
<p><img loading="lazy" src="img/trajec.png" alt=""  />
</p>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>ä¸­æ–‡è¯å‘é‡èµ„æºæ±‡æ€» &amp; ä½¿ç”¨æ–¹æ³•</title>
      <link>https://hidadeng.github.io/blog/embeddings_resource_usage_method/</link>
      <pubDate>Thu, 21 Apr 2022 15:40:10 +0600</pubDate>
      
      <guid>/blog/embeddings_resource_usage_method/</guid>
      <description>æ•°åç§ä¸­æ–‡è¯å‘é‡æ¨¡å‹èµ„æºä¸‹è½½&amp;amp;ä½¿ç”¨æ–¹æ³•ã€‚Dozens of Chinese word vector model resource downloads &amp;amp; usage methods</description>
      <content:encoded><![CDATA[<br>
<h2 id="é¡¹ç›®åœ°å€">é¡¹ç›®åœ°å€</h2>
<p><a href="https://github.com/Embedding/Chinese-Word-Vectors">https://github.com/Embedding/Chinese-Word-Vectors</a></p>
<p>Chinese-Word-Vectorsé¡¹ç›®æä¾›è¶…è¿‡100ç§ä¸­æ–‡è¯å‘é‡ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸åŒçš„è¡¨ç¤ºæ–¹å¼ï¼ˆç¨ å¯†SGNSå’Œç¨€ç–PPMIï¼‰ã€ä¸åŒçš„ä¸Šä¸‹æ–‡ç‰¹å¾ï¼ˆè¯ã€Nå…ƒç»„ã€å­—ç­‰ç­‰ï¼‰ã€ä»¥åŠä¸åŒçš„è®­ç»ƒè¯­æ–™ã€‚è·å–é¢„è®­ç»ƒè¯å‘é‡éå¸¸æ–¹ä¾¿ï¼Œä¸‹è½½åå³å¯ç”¨äºä¸‹æ¸¸ä»»åŠ¡ã€‚</p>
<br>
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<p>å¦‚æœä½¿ç”¨äº†æœ¬é¡¹ç›®çš„è¯å‘é‡å’ŒCA8æ•°æ®é›†è¯·è¿›è¡Œå¦‚ä¸‹å¼•ç”¨ï¼š</p>
<p>Shen Li, Zhe Zhao, Renfen Hu, Wensi Li, Tao Liu, Xiaoyong Du, <a href="http://aclweb.org/anthology/P18-2023"><em>Analogical Reasoning on Chinese Morphological and Semantic Relations</em></a>, ACL 2018.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">@InProceedings{P18-2023,
  author =  &#34;Li, Shen
    and Zhao, Zhe
    and Hu, Renfen
    and Li, Wensi
    and Liu, Tao
    and Du, Xiaoyong&#34;,
  title =   &#34;Analogical Reasoning on Chinese Morphological and Semantic Relations&#34;,
  booktitle =   &#34;Proceedings of the 56th Annual Meeting of the Association for Computational Linguistics (Volume 2: Short Papers)&#34;,
  year =  &#34;2018&#34;,
  publisher =   &#34;Association for Computational Linguistics&#34;,
  pages =   &#34;138--143&#34;,
  location =  &#34;Melbourne, Australia&#34;,
  url =   &#34;http://aclweb.org/anthology/P18-2023&#34;
}
</code></pre></div><br>
<h3 id="ä¸åŒé¢†åŸŸ">ä¸åŒé¢†åŸŸ</h3>
<p>ä¸‹åˆ—è¯å‘é‡åŸºäºä¸åŒçš„è¡¨ç¤ºæ–¹å¼ã€ä¸åŒçš„ä¸Šä¸‹æ–‡ç‰¹å¾ä»¥åŠä¸åŒé¢†åŸŸçš„è¯­æ–™è®­ç»ƒè€Œæˆã€‚</p>
<table align="center">
    <tr align="center">
        <td colspan="5"><b>Word2vec / Skip-Gram with Negative Sampling (SGNS)</b></td>
    </tr>
    <tr align="center">
        <td rowspan="2">è¯­æ–™</td>
        <td colspan="4">ä¸Šä¸‹æ–‡ç‰¹å¾</td>
    </tr>
    <tr  align="center">
      <td>è¯</td>
      <td>è¯ + Nå…ƒç»„</td>
      <td>è¯ + å­—</td>
      <td>è¯ + å­— + Nå…ƒç»„</td>
    </tr>
    <tr  align="center">
      <td>Baidu Encyclopedia ç™¾åº¦ç™¾ç§‘</td>
      <td><a href="https://pan.baidu.com/s/1Rn7LtTH0n7SHyHPfjRHbkg">300d</a></td>
      <td><a href="https://pan.baidu.com/s/1XEmP_0FkQwOjipCjI2OPEw">300d</a></td>
      <td><a href="https://pan.baidu.com/s/1eeCS7uD3e_qVN8rPwmXhAw">300d</a></td>
      <td><a href="https://pan.baidu.com/s/1IiIbQGJ_AooTj5s8aZYcvA">300d</a> / PWD: 5555</td>
    </tr>
    <tr  align="center">
      <td>Wikipedia_zh ä¸­æ–‡ç»´åŸºç™¾ç§‘</td>
      <td><a href="https://pan.baidu.com/s/1AmXYWVgkxrG4GokevPtNgA">300d</a></td>
      <td><a href="https://pan.baidu.com/s/1ZKePwxwsDdzNrfkc6WKdGQ">300d</a></td>
      <td><a href="https://pan.baidu.com/s/1ZBVVD4mUSUuXOxlZ3V71ZA">300d</a></td>
      <td><a href="https://pan.baidu.com/s/19wQrclyynOnco3JBvnI5pA">300d</td>
    </tr>
    <tr  align="center">
      <td>People's Daily News äººæ°‘æ—¥æŠ¥</td>
      <td><a href="https://pan.baidu.com/s/19sqMz-JAhhxh3o6ecvQxQw">300d</a></td>
      <td><a href="https://pan.baidu.com/s/1upPkA8KJnxTZBfjuNDtaeQ">300d</a></td>
      <td><a href="https://pan.baidu.com/s/1BvKk2QjbtQMch7EISppW2A">300d</a></td>
      <td><a href="https://pan.baidu.com/s/19Vso_k79FZb5OZCWQPAnFQ">300d</a></td>
    </tr>
    <tr  align="center">
      <td>Sogou News æœç‹—æ–°é—»</td>
      <td><a href="https://pan.baidu.com/s/1tUghuTno5yOvOx4LXA9-wg">300d</a></td>
      <td><a href="https://pan.baidu.com/s/13yVrXeGYkxdGW3P6juiQmA">300d</a></td>
      <td><a href="https://pan.baidu.com/s/1pUqyn7mnPcUmzxT64gGpSw">300d</a></td>
      <td><a href="https://pan.baidu.com/s/1svFOwFBKnnlsqrF1t99Lnw">300d</a></td>
    </tr>
    <tr  align="center">
      <td>Financial News é‡‘èæ–°é—»</td>
      <td><a href="https://pan.baidu.com/s/1EhtsbDa3ekzZPODWNLHcXA">300d</a></td>
      <td><a href="https://pan.baidu.com/s/1FcPHv7S4vUgnL7WeWf4_PA">300d</a></td>
      <td><a href="https://pan.baidu.com/s/13CAxY5ffRFuOcHZu8VmArw">300d</a></td>
      <td><a href="https://pan.baidu.com/s/1sqvrUtGBAZ7YWEsGz41DRQ">300d</a></td>
    </tr>
    <tr  align="center">
      <td>Zhihu_QA çŸ¥ä¹é—®ç­” </td>
      <td><a href="https://pan.baidu.com/s/1VGOs0RH7DXE5vRrtw6boQA">300d</a></td>
      <td><a href="https://pan.baidu.com/s/1OQ6fQLCgqT43WTwh5fh_lg">300d</a></td>
      <td><a href="https://pan.baidu.com/s/1_xogqF9kJT6tmQHSAYrYeg">300d</a></td>
      <td><a href="https://pan.baidu.com/s/1Fo27Lv_0nz8FXg-xbOz14Q">300d</a></td>
    </tr>
    <tr  align="center">
      <td>Weibo å¾®åš</td>
      <td><a href="https://pan.baidu.com/s/1zbuUJEEEpZRNHxZ7Gezzmw">300d</a></td>
      <td><a href="https://pan.baidu.com/s/11PWBcvruXEDvKf2TiIXntg">300d</a></td>
      <td><a href="https://pan.baidu.com/s/10bhJpaXMCUK02nHvRAttqA">300d</a></td>
      <td><a href="https://pan.baidu.com/s/1FHl_bQkYucvVk-j2KG4dxA">300d</a></td>
    </tr>
    <tr  align="center">
      <td>Literature æ–‡å­¦ä½œå“</td>
      <td><a href="https://pan.baidu.com/s/1ciq8iXtcrHpu3ir_VhK0zg">300d</a></td>
      <td><a href="https://pan.baidu.com/s/1Oa4CkPd8o2xd6LEAaa4gmg">300d</a> / PWD: z5b4</td>
      <td><a href="https://pan.baidu.com/s/1IG8IxNp2s7vVklz-vyZR9A">300d</a></td>
      <td><a href="https://pan.baidu.com/s/1SEOKrJYS14HpqIaQT462kA">300d</a> / PWD: yenb</td>
    </tr>
    <tr  align="center">
      <td>Complete Library in Four Sections<br />å››åº“å…¨ä¹¦<sup>*</sup></td>
      <td><a href="https://pan.baidu.com/s/1vPSeUsSiWYXEWAuokLR0qQ">300d</a></td>
      <td><a href="https://pan.baidu.com/s/1sS9E7sclvS_UZcBgHN7xLQ">300d</a></td>
      <td>NAN</td>
      <td>NAN</td>
    </tr>
    <tr  align="center">
      <td>Mixed-large ç»¼åˆ<br>Baidu Netdisk / Google Drive</td>
      <td>
        <a href="https://pan.baidu.com/s/1luy-GlTdqqvJ3j-A4FcIOw">300d</a><br>
        <a href="https://drive.google.com/open?id=1Zh9ZCEu8_eSQ-qkYVQufQDNKPC4mtEKR">300d</a>
      </td>
      <td>
        <a href="https://pan.baidu.com/s/1oJol-GaRMk4-8Ejpzxo6Gw">300d</a><br>
        <a href="https://drive.google.com/open?id=1WUU9LnoAjs--1E_WqcghLJ-Pp8bb38oS">300d</a>
      </td>
      <td>
        <a href="https://pan.baidu.com/s/1DjIGENlhRbsVyHW-caRePg">300d</a><br>
        <a href="https://drive.google.com/open?id=1aVAK0Z2E5DkdIH6-JHbiWSL5dbAcz6c3">300d</a>
      </td>
      <td>
        <a href="https://pan.baidu.com/s/14JP1gD7hcmsWdSpTvA3vKA">300d</a><br>
        <a href="https://drive.google.com/open?id=1kSAl4_AOg3_6ayU7KRM0Nk66uGdSZdnk">300d</a>
      </td>
    </tr>
</table>
<table align="center">
    <tr align="center">
        <td colspan="5"><b>Positive Pointwise Mutual Information (PPMI)</b></td>
    </tr>
    <tr align="center">
        <td rowspan="2">è¯­æ–™</td>
        <td colspan="4">ä¸Šä¸‹æ–‡ç‰¹å¾</td>
    </tr>
    <tr  align="center">
      <td>è¯</td>
      <td>è¯ + Nå…ƒç»„</td>
      <td>è¯ + å­—</td>
      <td>è¯ + å­— + Nå…ƒç»„</td>
    </tr>
    <tr  align="center">
      <td>Baidu Encyclopedia ç™¾åº¦ç™¾ç§‘</td>
      <td><a href="https://pan.baidu.com/s/1_itcjrQawCwcURa7WZLPOA">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1cEZzN1S2senwWSyHOnL7YQ">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1KcfFdyO0-kE9S9CwzIisfw">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1FXYM3CY161_4QMgiH8vasQ">Sparse</a></td>
    </tr>
    <tr  align="center">
      <td>Wikipedia_zh ä¸­æ–‡ç»´åŸºç™¾ç§‘</td>
      <td><a href="https://pan.baidu.com/s/1MGXRrc54nITPzQ7sfEUjMA">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1mtxZna8UJ7xBIxhBFntumQ">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1dDImpAx41V73Byl2julOGA">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1bsBQHXFpxMHGBexYof1_rw">Sparse</a></td>
    </tr>
    <tr  align="center">
      <td>People's Daily News äººæ°‘æ—¥æŠ¥</td>
      <td><a href="https://pan.baidu.com/s/1NLr1K7aapU2sYBvzbVny5g">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1LJl3Br0ccGDHP0XX2k3pVw">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1GQQXGMn1AHh-BlifT0JD2g">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1Xm9Ec3O3rJ6ayrwVwonC7g">Sparse</a></td>
    </tr>
    <tr  align="center">
      <td>Sogou News æœç‹—æ–°é—»</td>
      <td><a href="https://pan.baidu.com/s/1ECA51CZLp9_JB_me7YZ9-Q">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1FO39ZYy1mStERf_b53Y_yQ">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1lLBFBk8nn3spFAvKY9IJ6A">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1f-dLQZlZo_-B5ZKcPIc6rw">Sparse</a></td>
    </tr>
    <tr  align="center">
      <td>Financial News é‡‘èæ–°é—»</td>
      <td><a href="https://pan.baidu.com/s/10wtgdmrTsTrjpSDvI0KzOw">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1b6zjvhOIqTdACSSbriisVw">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1w24vCfgqcoJvPxsB5VrRvw">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1b9BPiDRhiEZ-6ybTcovrqQ">Sparse</a></td>
    </tr>
    <tr  align="center">
      <td>Zhihu_QA çŸ¥ä¹é—®ç­” </td>
      <td><a href="https://pan.baidu.com/s/1VaUP3YJC0IZKTbJ-1_8HZg">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1g39PKwT0kSmpneKOgXR5YQ">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1d8Bsuak0fyXxQOVUiNr-2w">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1D5fteBX0Vy4czEqpxXjlrQ">Sparse</a></td>
    </tr>
    <tr  align="center">
      <td>Weibo å¾®åš</td>
      <td><a href="https://pan.baidu.com/s/15O2EbToOzjNSkzJwAOk_Ug">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/11Dqywn0hfMhysto7bZS1Dw">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1wY-7mfV6nwDj_tru6W9h4Q">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1DMW-MgLApbQnWwDd-pT_qw">Sparse</a></td>
    </tr>
    <tr  align="center">
      <td>Literature æ–‡å­¦ä½œå“</td>
      <td><a href="https://pan.baidu.com/s/1HTHhlr8zvzhTwed7dO0sDg">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1jAuGJBxKqgapt__urGsBOQ">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/173AJfCoAV0ZA8Z31tKBdTA">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1dFCxke_Su3lLsuwZr7co3A">Sparse</a></td>
    </tr>
    <tr  align="center">
      <td>Complete Library in Four Sections<br />å››åº“å…¨ä¹¦<sup>*</sup></td>
      <td><a href="https://pan.baidu.com/s/1NJ1Gc99oE0-GV0QxBqy-qw">Sparse</a></td>
      <td><a href="https://pan.baidu.com/s/1YGEgyXIbw0O4NtoM1ohjdA">Sparse</a></td>
      <td>NAN</td>
      <td>NAN</td>
    </tr>
    </tr>
    <tr  align="center">
      <td>Mixed-large ç»¼åˆ</td>
      <td>Sparse</td>
      <td>Sparse</td>
      <td>Sparse</td>
      <td>Sparse</td>
    </tr>
</table>
<p><sup>*</sup>ç”±äºå¤æ±‰è¯­ä¸­ç»å¤§éƒ¨ä»½è¯å‡ä¸ºå•å­—è¯ï¼Œå› æ­¤åªéœ€å­—å‘é‡ã€‚</p>
<br>
<h2 id="è¯­æ–™">è¯­æ–™</h2>
<p>é¡¹ç›®èŠ±è´¹äº†å¤§é‡ç²¾åŠ›æ¥æ”¶é›†äº†æ¥è‡ªå¤šä¸ªé¢†åŸŸçš„è¯­æ–™ã€‚æ‰€æœ‰çš„æ–‡æœ¬æ•°æ®å‡ç§»é™¤äº†htmlå’Œxmlæ ‡è®°ï¼Œä»…ä¿ç•™äº†çº¯æ–‡æœ¬ã€‚ä¹‹åé‡‡ç”¨äº†<a href="https://github.com/hankcs/HanLP">HanLP(v_1.5.3)</a>å¯¹æ–‡æœ¬è¿›è¡Œäº†åˆ†è¯ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å°†ç¹ä½“ä¸­æ–‡ç”¨<a href="https://github.com/BYVoid/OpenCC">Open Chinese Convert (OpenCC)</a>è½¬æ¢ä¸ºäº†ç®€ä½“ä¸­æ–‡ã€‚æ›´è¯¦ç»†çš„è¯­æ–™ä¿¡æ¯å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<table align="center">
	<tr align="center">
		<td><b>è¯­æ–™</b></td>
		<td><b>å¤§å°</b></td>
		<td><b>è¯æ•°é‡</b></td>
		<td><b>è¯æ±‡é‡</b></td>
		<td><b>è¯¦æƒ…</b></td>
	</tr>
	<tr align="center">
		<td>Baidu Encyclopedia<br />ç™¾åº¦ç™¾ç§‘</td>
		<td>4.1G</td>
		<td>745M</td>
		<td>5422K</td>
		<td>ä¸­æ–‡ç™¾ç§‘<br />https://baike.baidu.com/</td>
	</tr>
	<tr align="center">
		<td>Wikipedia_zh<br />ä¸­æ–‡ç»´åŸºç™¾ç§‘</td>
		<td>1.3G</td>
		<td>223M</td>
		<td>2129K</td>
		<td>ä¸­æ–‡ç»´åŸºç™¾ç§‘<br />https://dumps.wikimedia.org/</td>
	</tr>
	<tr align="center">
		<td>People's Daily News<br />äººæ°‘æ—¥æŠ¥</td>
		<td>3.9G</td>
		<td>668M</td>
		<td>1664K</td>
		<td>äººæ°‘æ—¥æŠ¥æ–°é—»æ•°æ®(1946-2017)<br />http://data.people.com.cn/</td>
	</tr>
	<tr align="center">
		<td>Sogou News<br />æœç‹—æ–°é—»</td>
		<td>3.7G</td>
		<td>649M</td>
		<td>1226K</td>
		<td>Sogou labsçš„æ–°é—»æ•°æ®<br />http://www.sogou.com/labs/</td>
	</tr>
  <tr align="center">
    <td>Financial News<br />é‡‘èæ–°é—»</td>
    <td>6.2G</td>
    <td>1055M</td>
    <td>2785K</td>
    <td>ä»å¤šä¸ªç½‘ç«™æ”¶é›†åˆ°çš„é‡‘èæ–°é—»</td>
  </tr>
	<tr align="center">
		<td>Zhihu_QA<br />çŸ¥ä¹é—®ç­”</td>
		<td>2.1G</td>
		<td>384M</td>
		<td>1117K</td>
		<td>ä¸­æ–‡é—®ç­”æ•°æ®<br />https://www.zhihu.com/</td>
	</tr>
	<tr align="center">
		<td>Weibo<br />å¾®åš</td>
		<td>0.73G</td>
		<td>136M</td>
		<td>850K</td>
		<td>NLPIR Labæä¾›çš„å¾®åšæ•°æ®<br />http://www.nlpir.org/wordpress/download/weibo.7z</td>
	</tr>
	<tr align="center">
		<td>Literature<br />æ–‡å­¦ä½œå“</td>
		<td>0.93G</td>
		<td>177M</td>
		<td>702K</td>
		<td>8599ç¯‡ç°ä»£æ–‡å­¦ä½œå“</td>
	</tr>
	<tr align="center">
		<td>Mixed-large<br />ç»¼åˆ</td>
		<td>22.6G</td>
    <td>4037M</td>
    <td>10653K</td>
		<td>ä¸Šè¿°æ‰€æœ‰æ•°æ®çš„æ±‡æ€»</td>
	</tr>
  <tr align="center">
    <td>Complete Library in Four Sections<br />å››åº“å…¨ä¹¦</td>
    <td>1.5G</td>
    <td>714M</td>
    <td>21.8K</td>
    <td>ç›®å‰æœ€å¤§çš„å¤ä»£æ–‡çŒ®æ±‡æ€»</td>
  </tr>
</table>
ä¸Šè¿°ç»Ÿè®¡ç»“æœä¸­ï¼Œæ‰€æœ‰è¯éƒ½è¢«è®¡ç®—åœ¨å†…ï¼ŒåŒ…æ‹¬ä½é¢‘è¯ã€‚
<br>
<h2 id="å¯¼å…¥æ¨¡å‹ä»£ç ">å¯¼å…¥æ¨¡å‹(ä»£ç )</h2>
<p>ä¾‹å¦‚æˆ‘ä¸‹è½½äº†å¤šä¸ªè¯æ¨¡å‹ï¼Œä¸‹è½½å¾—åˆ°bz2ç»“å°¾çš„æ–‡ä»¶åï¼Œä¾‹å¦‚<code>sgns.financial.bigram.bz2</code>ã€‚</p>
<p><img loading="lazy" src="models.png" alt=""  />
</p>
<p>ä½¿ç”¨æ–¹å¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">gensim.models.keyedvectors</span> <span class="kn">import</span> <span class="n">KeyedVectors</span>

<span class="c1">#ä»¥é‡‘èsgns.financial.bigram.bz2ä¸ºä¾‹</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">KeyedVectors</span><span class="o">.</span><span class="n">load_word2vec_format</span><span class="p">(</span><span class="s1">&#39;embeddings/sgns.financial.bigram.bz2&#39;</span><span class="p">,</span> 
                                          <span class="n">binary</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
                                          <span class="n">unicode_errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>


<span class="n">model</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">&lt;gensim.models.keyedvectors.KeyedVectors at 0x7fe7fad79d60&gt;
</code></pre></div><br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">model</span><span class="o">.</span><span class="n">get_vector</span><span class="p">(</span><span class="s1">&#39;æŠ•èµ„&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">array([-0.084635,  0.890228, -0.23223 , -0.308985,  0.058241,  0.458777,
       -0.152547, -0.413471,  0.269701, -0.078043, -0.4155  ,  0.074735,
        0.35714 ,  0.103431,  0.601784, -0.390854,  0.814801, -0.122664,
       -1.076744,  0.516941, -0.293319, -0.310251, -0.407794,  0.003898,
       -0.210962,  0.378095, -0.345955, -0.223848,  0.700162,  0.207644,
        0.426249, -0.272832, -0.110305, -0.701062, -0.173407, -0.172121,
       -0.682592,  0.593414,  0.279591, -0.408284, -0.166693,  0.753402,
        0.037375,  0.141865, -0.246024, -0.108663, -0.225255, -0.856601,
        0.381026,  0.401248,  0.012108, -0.126305, -0.374255,  0.728795,
        0.219549, -0.354029, -0.353131,  0.064867,  0.49565 , -0.503267,
       -0.304075,  0.145036,  0.688948,  0.063382, -0.223243,  0.474251,
        0.80543 ,  0.683178,  0.118159,  0.408411, -0.020066,  0.009045,
       -0.135446, -0.069633,  0.206357,  0.482845, -0.075307,  0.06433 ,
       -0.112367,  0.011816,  0.87427 , -0.120287, -0.31036 ,  0.369985,
        0.560386, -0.215248,  0.389631,  0.042943, -0.319149,  0.951551,
       -0.335188,  0.642246, -0.55546 ,  0.322397,  0.659618, -0.213124,
        0.346696, -0.342239,  0.31479 ,  0.078533, -0.345148,  0.815577,
       -0.530134,  0.303419, -0.158916, -0.190564,  0.436046, -0.112251,
       -0.339966,  0.253645,  0.181076,  0.122875, -0.310951, -0.126253,
        1.641405,  0.357906,  0.165796,  0.398656, -0.330591,  0.20328 ,
       -0.077191, -0.421248, -0.078504, -0.734519,  0.146212,  0.535727,
        0.014134,  0.040322, -0.44809 , -0.758205, -0.151237,  0.248258,
       -0.319704,  0.656033, -0.518857,  0.932356, -1.01786 , -0.46354 ,
        0.160921, -0.243597,  0.106666, -0.03404 ,  0.010672,  0.260243,
        0.899813,  0.171735, -0.108209, -0.009843, -0.18113 ,  0.302494,
        0.187285,  0.064669, -0.502041, -0.724377, -0.294312, -0.522256,
        0.334543,  0.740455, -0.357653,  0.540747,  0.256146,  0.513839,
        1.116628, -0.626111,  0.505574,  0.089774, -0.381137, -0.282352,
       -0.457542,  0.198909,  0.313638,  0.560809,  0.25295 ,  0.878158,
       -0.289311, -0.629047,  0.011103,  0.041058, -0.291302, -0.014001,
       -0.027697, -0.445817, -0.070086,  0.159816, -0.120071,  1.280489,
       -0.108866,  0.01586 , -0.505574, -0.679772, -0.343165,  0.595633,
        0.438108, -0.364066, -0.393667,  0.442285,  0.24979 , -0.191607,
        0.425692,  0.535577, -0.480332, -0.737461,  0.588498, -0.380264,
        0.151292,  0.077519, -0.221384,  0.699436,  0.401642,  0.509026,
       -0.411141,  0.206719, -0.097051, -0.451834, -0.825617,  0.602984,
        0.2853  ,  0.46055 ,  0.96472 ,  0.322712, -0.373446,  0.207944,
        0.236688,  0.566523,  0.037644,  1.241091,  0.025682,  0.373211,
        0.097712, -0.195355,  0.264579, -0.072992, -0.121629,  0.041688,
        0.213666,  0.329652, -0.015182,  0.396307,  0.117955,  0.119577,
       -0.334761, -0.135917,  0.409983,  0.512367, -0.292204,  0.302897,
       -0.325733,  0.383173, -0.92419 , -0.377535, -0.059801, -0.606275,
       -0.240482,  0.054021, -0.581386, -0.555691,  0.158354,  0.103765,
        0.107681,  0.248877, -0.597925,  0.193332,  0.844085,  0.00584 ,
        0.041622, -0.111235,  0.617778,  0.234883, -0.09562 ,  0.408324,
       -0.107121,  0.717875,  0.674794,  0.127214, -0.178357,  0.331436,
        0.417898, -0.650833, -0.428309, -0.576132,  0.210533, -0.057879,
       -0.578397,  0.468586,  0.103365, -0.403216, -0.398776,  0.094514,
       -0.130387,  0.628187, -0.463082, -0.951649,  0.561544,  0.118903,
        0.448327, -0.171685, -0.672348,  0.069471,  0.556452, -0.335425],
      dtype=float32)
</code></pre></div><br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">model.similar_by_key(&#39;æŠ•èµ„&#39;)
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[(&#39;é•¿æœŸæŠ•èµ„&#39;, 0.5135656595230103),
 (&#39;æŠ•èµ„è§„æ¨¡&#39;, 0.5089880228042603),
 (&#39;æ™ºç™¾æ‰¬&#39;, 0.49565914273262024),
 (&#39;æŠ•èµ„æ€»é¢&#39;, 0.4955061078071594),
 (&#39;æ´›è¾‰&#39;, 0.489188551902771),
 (&#39;337409&#39;, 0.48917514085769653),
 (&#39;æ´›ç››&#39;, 0.4819018244743347),
 (&#39;æ´›è…¾&#39;, 0.4728960692882538),
 (&#39;394150&#39;, 0.4704836308956146),
 (&#39;æŠ•èµ„é¢&#39;, 0.4685181975364685)]
</code></pre></div><br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">model</span><span class="o">.</span><span class="n">similar_by_key</span><span class="p">(</span><span class="s1">&#39;é£é™©&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[(&#39;æç¤º&#39;, 0.6549968123435974),
 (&#39;ç»è¥é£é™©&#39;, 0.6316577792167664),
 (&#39;æ™¯æ°”è¡°é€€&#39;, 0.544153094291687),
 (&#39;é£é™©åˆ†æ&#39;, 0.5439289212226868),
 (&#39;é‡å®è§‚&#39;, 0.5435716509819031),
 (&#39;ä¿¡ç”¨é£é™©&#39;, 0.5345730185508728),
 (&#39;æ‰¿å—èƒ½åŠ›&#39;, 0.5291797518730164),
 (&#39;é˜²èŒƒ&#39;, 0.5271924138069153),
 (&#39;ç³»ç»Ÿæ€§&#39;, 0.5178108811378479),
 (&#39;ä¸ç¡®å®šæ€§&#39;, 0.5173759460449219)]
</code></pre></div><p>å‘é‡è¿è¡Œæ•ˆæœè¿˜è¡Œï¼Œæ„Ÿå…´è¶£çš„åŒå­¦ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„æ•°æ®è®­ç»ƒword2vecæ¨¡å‹ï¼Œè®­ç»ƒåŠä½¿ç”¨çš„åŠæ³•å‚ç…§æ–‡ç« </p>
<p><a href="https://textdata.cn/blog/douban_w2v/">è±†ç“£å½±è¯„ | æ¢ç´¢è¯å‘é‡å¦™å¤„</a></p>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>å°†å¹´æŠ¥æ•°æ®æ±‡æ€»è‡³xlsxæ–‡ä»¶ä¸­</title>
      <link>https://hidadeng.github.io/blog/sh_market/</link>
      <pubDate>Thu, 21 Apr 2022 10:40:10 +0600</pubDate>
      
      <guid>/blog/sh_market/</guid>
      <description>åˆ†æ•£åœ¨å„å¤„çš„pdfå¾ˆéš¾åˆ†æï¼Œå¦‚ä½•å°†pdfæ±‡æ€»è‡³excelã€‚æœ¬æ–‡å°†pdfæ±‡æ€»ä¸excelåˆ†æç»“åˆã€‚</description>
      <content:encoded><![CDATA[<h2 id="æ•´ç†åˆ°csvä¸­">æ•´ç†åˆ°csvä¸­</h2>
<p>å°†70Gå®šæœŸæŠ¥å‘ŠæŠ«éœ²æ•°æ®é›†ä¸‹è½½</p>
<p>é“¾æ¥: <a href="https://pan.baidu.com/s/1oboFUswiAMdA_Wn3xCh6YQ">https://pan.baidu.com/s/1oboFUswiAMdA_Wn3xCh6YQ</a> æå–ç : g7bd</p>
<p><img loading="lazy" src="img/sh_marketing.png" alt=""  />
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pdfdocx</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;\s&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>

<span class="c1">#æ–‡ä»¶å¤¹åˆ—è¡¨</span>
<span class="n">dirs</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s1">&#39;reports&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="s1">&#39;DS&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">d</span><span class="p">]</span>
<span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">dirs</span><span class="p">:</span>
    <span class="n">datas</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s1">&#39;reports/</span><span class="si">{d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="n">di</span><span class="p">))</span> <span class="k">if</span> <span class="s1">&#39;z&#39;</span> <span class="ow">in</span> <span class="n">f</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">file</span> <span class="o">=</span> <span class="s1">&#39;reports/</span><span class="si">{di}</span><span class="s1">/</span><span class="si">{f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">di</span><span class="o">=</span><span class="n">di</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="n">file</span><span class="p">)</span>
            <span class="n">code</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">year</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;_(\d</span><span class="si">{4}</span><span class="s1">)_&#39;</span><span class="p">,</span> <span class="n">file</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">clean</span><span class="p">(</span><span class="n">pdfdocx</span><span class="o">.</span><span class="n">read_pdf</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="n">code</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">:</span> <span class="n">text</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">:</span><span class="n">year</span><span class="p">}</span>
            <span class="n">datas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">datas</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">])</span>
    <span class="c1">#å°†æ¯å®¶å…¬å¸çš„å¹´æŠ¥å¯¼å‡ºåˆ°csvä¸­</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;data.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;a+&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
    
    
<span class="c1">#è¯»å–</span>
<span class="n">ndf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data.csv&#39;</span><span class="p">)</span>
<span class="c1">#å»é‡</span>
<span class="n">ndf</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">#æ¸…æ´—</span>
<span class="n">ndf</span> <span class="o">=</span> <span class="n">ndf</span><span class="p">[</span><span class="n">ndf</span><span class="o">.</span><span class="n">code</span><span class="o">=!=</span><span class="s1">&#39;code&#39;</span><span class="p">]</span>
<span class="c1">#å¯¼å‡ºåˆ°xlsx</span>
<span class="n">ndf</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s1">&#39;data.xlsx&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div><p><br><br></p>
<h2 id="å¯¼å…¥æ•°æ®">å¯¼å…¥æ•°æ®</h2>
<p>excelæ•°æ®ä¸‹è½½é“¾æ¥: <a href="https://pan.baidu.com/s/1r4YRyxb7bTsx-_ayT4GDKQ">https://pan.baidu.com/s/1r4YRyxb7bTsx-_ayT4GDKQ</a> æå–ç : ew4v</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;data.xlsx&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>code</th>
      <th>year</th>
      <th>text</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>603859</td>
      <td>2017</td>
      <td>2017å¹´åŠå¹´åº¦æŠ¥å‘Š1/116å…¬å¸ä»£ç ï¼š603859å…¬å¸ç®€ç§°ï¼šèƒ½ç§‘è‚¡ä»½èƒ½ç§‘èŠ‚èƒ½æŠ€æœ¯è‚¡ä»½æœ‰é™å…¬...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>603859</td>
      <td>2019</td>
      <td>2019å¹´åŠå¹´åº¦æŠ¥å‘Š1/141å…¬å¸ä»£ç ï¼š603859å…¬å¸ç®€ç§°ï¼šèƒ½ç§‘è‚¡ä»½èƒ½ç§‘ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸2...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>603859</td>
      <td>2018</td>
      <td>2018å¹´åŠå¹´åº¦æŠ¥å‘Š1/120å…¬å¸ä»£ç ï¼š603859å…¬å¸ç®€ç§°ï¼šèƒ½ç§‘è‚¡ä»½èƒ½ç§‘ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸2...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>601500</td>
      <td>2017</td>
      <td>2017å¹´åŠå¹´åº¦æŠ¥å‘Š1/114å…¬å¸ä»£ç ï¼š601500å…¬å¸ç®€ç§°ï¼šé€šç”¨è‚¡ä»½æ±Ÿè‹é€šç”¨ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>601500</td>
      <td>2019</td>
      <td>2019å¹´åŠå¹´åº¦æŠ¥å‘Š1/140å…¬å¸ä»£ç ï¼š601500å…¬å¸ç®€ç§°ï¼šé€šç”¨è‚¡ä»½æ±Ÿè‹é€šç”¨ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬...</td>
    </tr>
  </tbody>
</table>
</div>
<br>
<h3 id="æŸ¥çœ‹æ•°æ®é‡">æŸ¥çœ‹æ•°æ®é‡</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div><pre><code>16984
</code></pre>
<br>
<h3 id="å…¬å¸æ•°">å…¬å¸æ•°</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
</code></pre></div><pre><code>1476
</code></pre>
<br>
<h3 id="å«æœ‰çš„å¹´ä»½">å«æœ‰çš„å¹´ä»½</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="nb">sorted</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">year</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
</code></pre></div><pre><code>[2002,
 2003,
 2004,
 2005,
 2006,
 2007,
 2008,
 2009,
 2010,
 2011,
 2012,
 2013,
 2014,
 2015,
 2016,
 2017,
 2018,
 2019]
</code></pre>
<br>
<h3 id="æ¯å®¶å…¬å¸å¹´æŠ¥æ•°">æ¯å®¶å…¬å¸å¹´æŠ¥æ•°</h3>
<p>æ•°æ®é›†ä¸­ï¼Œå¹³å‡æ¯å®¶å…¬å¸çš„å¹´æŠ¥æ•°</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">avg</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">/</span><span class="n">df</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
<span class="nb">round</span><span class="p">(</span><span class="n">avg</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</code></pre></div><pre><code>11.51
</code></pre>
<br>
<h2 id="è¯´æ˜">è¯´æ˜</h2>
<p>æ•°æ®æ˜¯19å¹´è·å–çš„ï¼Œæ•°æ®ä¸å…¨ï¼Œä¸‹è½½è¿‡ç¨‹ä¸­æœ‰éƒ¨åˆ†pdfæ˜¯ç ´æŸçš„æ–‡ä»¶ã€‚</p>
<p>å¤§å®¶å¯ä»¥å°è¯•è¯¥æ•°æ®é›†è®­ç»ƒä¼šè®¡å¹´æŠ¥è¯å‘é‡ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰æœ‰è¶£çš„åº”ç”¨ã€‚</p>
<p>æœ¬æ•°æ®å¯ä½œæ¢ç´¢å®éªŒæ€§è´¨ï¼Œå¦‚æœæƒ³åœ¨ä¼šè®¡é¢†åŸŸæ·±å…¥æŒ–æ˜ï¼Œå»ºè®®æ‰¾æ›´å…¨æ›´ç²¾å‡†çš„æ•°æ®é›†ã€‚</p>
<p><br><br></p>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>è±†ç“£å½±è¯„ | æ¢ç´¢è¯å‘é‡å¦™å¤„</title>
      <link>https://hidadeng.github.io/blog/douban_w2v/</link>
      <pubDate>Thu, 21 Apr 2022 10:40:10 +0600</pubDate>
      
      <guid>/blog/douban_w2v/</guid>
      <description>ä½¿ç”¨cntextè®­ç»ƒã€ä½¿ç”¨è¯å‘é‡ã€‚</description>
      <content:encoded><![CDATA[<p>æœ¬æ–‡è¦ç‚¹</p>
<ul>
<li>è¯»å–csv</li>
<li>cntextè®­ç»ƒè¯å‘é‡æ¨¡å‹</li>
<li>cntextæ‰©å±•posã€negè¯å…¸</li>
<li>å¯¼å…¥è¯å‘é‡æ¨¡å‹</li>
<li>è¿ç”¨è¯å‘é‡æ¨¡å‹</li>
</ul>
<br>
<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p>é“¾æ¥: <a href="https://pan.baidu.com/s/1BFUb7myg6svTUZJfnvZfAg">https://pan.baidu.com/s/1BFUb7myg6svTUZJfnvZfAg</a> æå–ç : og9t</p>
<p><br><br></p>
<h2 id="ä¸€è¯»å–æ•°æ®">ä¸€ã€è¯»å–æ•°æ®</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;douban.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p><img loading="lazy" src="df.png" alt=""  />
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="nb">print</span><span class="p">(</span><span class="s2">&#34;ç”µå½±  : </span><span class="si">{}</span><span class="s2"> éƒ¨&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">Movie_Name_CN</span><span class="o">.</span><span class="n">nunique</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&#34;è¯„è®º  : </span><span class="si">{}</span><span class="s2"> æ¡&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)))</span>
</code></pre></div><pre><code>ç”µå½±  : 28 éƒ¨
è¯„è®º  : 2125056 æ¡
</code></pre>
<br>
<h2 id="äºŒè®­ç»ƒæ¨¡å‹">äºŒã€è®­ç»ƒæ¨¡å‹</h2>
<p>ä½¿ç”¨<a href="https://textdata.cn/blog/cntext_simplification/">cntextåº“</a>è®­ç»ƒè¯å‘é‡word2vecæ¨¡å‹,è¿™é‡Œæˆ‘æŠŠcsvæ•°æ®æ•´ç†ä¸ºtxt</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">cntext</span> <span class="kn">import</span> <span class="n">W2VModels</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1">#è®­ç»ƒword2vecæ¨¡å‹</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">W2VModels</span><span class="p">(</span><span class="n">cwd</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>  <span class="c1">#è¯­æ–™æ•°æ®</span>
<span class="n">model</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">input_txt_file</span><span class="o">=</span><span class="s1">&#39;douban.txt&#39;</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Step 1/4:...é¢„å¤„ç†    è¯­æ–™ ...
Step 2/4:...è®­ç»ƒ   word2vecæ¨¡å‹
            è€—æ—¶   2001 s
        
</code></pre></div><p>cntextå¯ä»¥ç”¨äºæ‰©å±•è¯å…¸</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">model</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">seedword_txt_file</span><span class="o">=</span><span class="s1">&#39;pos.txt&#39;</span><span class="p">,</span> 
           <span class="n">topn</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">seedword_txt_file</span><span class="o">=</span><span class="s1">&#39;neg.txt&#39;</span><span class="p">,</span> 
           <span class="n">topn</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Step 3/4:...å‡†å¤‡ æ¯ä¸ªseedåœ¨word2vecæ¨¡å‹ä¸­çš„ç›¸ä¼¼å€™é€‰è¯...
Step 4/4 å®Œæˆ! è€—æ—¶ 2302 s
Step 3/4:...å‡†å¤‡ æ¯ä¸ªseedåœ¨word2vecæ¨¡å‹ä¸­çš„ç›¸ä¼¼å€™é€‰è¯...
Step 4/4 å®Œæˆ! è€—æ—¶ 2303 s
</code></pre></div><p>åœ¨ä»£ç æ‰€åœ¨æ–‡ä»¶å¤¹å†…å¯ä»¥æ‰¾åˆ°</p>
<ul>
<li>output/w2v_candi_words/w2v.model</li>
<li>æ–°çš„  pos.txt</li>
<li>æ–°çš„  neg.txt</li>
</ul>
<p>æ–°çš„pos.txtæ˜¯å¯¹pos.txtè¯å…¸çš„æ‰©å±•ã€‚</p>
<br>
<br>
<h2 id="ä¸‰å¯¼å…¥w2væ¨¡å‹">ä¸‰ã€å¯¼å…¥w2væ¨¡å‹</h2>
<p>æœ‰çš„æ—¶å€™æ•°æ®é‡ç‰¹åˆ«å¤§ï¼Œæ¨¡å‹è®­ç»ƒååˆ†ä¸æ˜“ã€‚</p>
<p>è¿™æ—¶ï¼Œä¿å­˜å·²è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œä¸æ­¢ä¸‹æ¬¡ä¸ç”¨å†åŒæ ·çš„æ•°æ®å†æ¬¡è®­ç»ƒï¼Œä¹Ÿå¯åˆ†äº«ç»™å…¶ä»–äººä½¿ç”¨ã€‚</p>
<p>è®­ç»ƒç»“æŸåï¼Œåœ¨ä»£ç æ‰€åœ¨æ–‡ä»¶å¤¹å†…å¯ä»¥æ‰¾åˆ° <code>output/w2v_candi_words/w2v.model</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">gensim.models</span> <span class="kn">import</span> <span class="n">KeyedVectors</span>

<span class="n">w2v_model</span> <span class="o">=</span> <span class="n">KeyedVectors</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;output/w2v_candi_words/w2v.model&#39;</span><span class="p">)</span>
<span class="n">w2v_model</span>
</code></pre></div><pre><code>&lt;gensim.models.keyedvectors.KeyedVectors at 0x7face0574880&gt;
</code></pre>
<p>w2v_modelsæ•°æ®ç±»å‹ä¸ºKeyedVectorsï¼Œ åœ¨æœ¬æ–‡ä¸­ä½¿ç”¨w2v_modelsä»£æŒ‡KeyedVectors</p>
<br>
<h2 id="å››ç©è½¬è¯å‘é‡">å››ã€ç©è½¬è¯å‘é‡</h2>
<p>ç”¨æˆ·çº§çš„æ•°æ®(å¦‚åœ¨çº¿è¯„è®º)æ„Ÿè§‰ç”Ÿæˆçš„å‘é‡ä¼šå‡†ä¸€äº›ï¼Œ<strong>è¯å‘é‡çš„æ–¹å‘ï¼Œè¿‘ä¹‰åä¹‰åœ¨å‘é‡ä¸­éƒ½æœ‰ä½“ç°</strong>ã€‚</p>
<p><img loading="lazy" src="man-woman.png" alt=""  />
</p>
<p>ä¾‹å¦‚æœ¬æ–‡ä½¿ç”¨çš„æ˜¯28éƒ¨ç”µå½±çš„2125056æ¡å½±è¯„ï¼Œ ä¸€èˆ¬è¯„è®ºå†…å®¹åŒ…å«ç”µå½±ç›¸å…³ä¿¡æ¯ï¼Œå¦‚ç”µå½±é¢˜æã€æ˜¯å¦å€¼çš„è§‚å½±ç­‰ã€‚</p>
<p>è€Œåœ¨æˆ‘ä»¬è®­ç»ƒå‡ºæ¨¡å‹w2v_modelså­˜åœ¨ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•</p>
<ul>
<li><strong>w2v_model.get_vector(key)</strong> è·å–keyçš„è¯å‘é‡</li>
<li><strong>w2v_model.most_similar_to_given(key1, keys_list)</strong>  ä» keys_list ä¸­è·å–ä¸ key1 æœ€ç›¸ä¼¼çš„è¯</li>
<li><strong>w2v_model.n_similarity(ws1, ws2)</strong> ä¸¤ç»„è¯ws1, ws2 çš„ç›¸ä¼¼åº¦</li>
<li><strong>w2v_model.closer_than(key1, key2)</strong> æ›´æ¥è¿‘äºkey1çš„è¯å‘é‡(ç›¸æ¯”äºkey2)</li>
<li><strong>w2v_model.most_similar(positive, negative)</strong> æ‰¾å‡ºä¸positiveåŒæ–¹å‘ï¼Œä¸negativeåå‘ç›¸åçš„è¯ã€‚</li>
</ul>
<h3 id="41-get_vectorkey">4.1 get_vector(key)</h3>
<p>w2v_model.get_vector(key) è·å–keyçš„è¯å‘é‡</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#è·å–æŸè¯è¯­çš„å‘é‡</span>
<span class="n">w2v_model</span><span class="o">.</span><span class="n">get_vector</span><span class="p">(</span><span class="s1">&#39;ç»™åŠ›&#39;</span><span class="p">)</span>
</code></pre></div><pre><code>array([ 0.06488553,  0.74188954,  0.25468495,  0.89755714,  1.8139195 ,
       -0.6950082 ,  0.24339403, -1.2188634 ,  0.543618  , -0.9988698 ,
        0.27471313,  0.9325699 , -0.5860608 , -0.5081917 ,  1.6423215 ,
       -0.0490295 , -0.3927043 ,  0.659067  ,  0.03185922, -1.021391  ,
       -1.3214804 , -0.28208104, -0.7819419 , -0.30637202, -1.5944146 ,
       -0.12383854, -0.70463836,  0.45689437,  1.223081  , -1.9453759 ,
       -0.5538997 , -0.9750523 , -0.10031194, -0.9568689 ,  0.30341247,
        1.1102395 ,  0.667315  , -1.1600997 , -0.26674765, -0.55144155,
       -0.3246094 ,  0.82902473, -0.47339582, -0.9009957 ,  1.7722464 ,
        0.28959563, -0.03453476,  0.4786787 , -0.48074463, -0.23090109,
       -0.49390873,  0.71246386,  2.1557336 ,  2.4899387 , -0.51481706,
        0.5579966 , -0.6973235 , -1.1408254 ,  0.72495663, -1.0326954 ,
       -0.5455598 ,  0.98941576, -1.2155218 , -0.9088408 ,  1.9184568 ,
       -0.21800426, -1.2009395 ,  0.29684314,  1.3672423 , -2.269391  ,
        0.6188098 , -0.02714545, -0.44811317,  1.4397241 , -1.0594722 ,
       -0.08088647, -0.13015983, -0.99255013,  0.62044877,  2.5046496 ,
        0.4054545 , -0.38767585, -0.6956541 ,  0.22991426,  0.5928579 ,
       -0.12684819, -0.17408212,  0.25033692, -1.4419957 , -0.27390227,
        1.166638  , -0.00624323, -1.6046506 ,  2.1633575 , -0.395548  ,
       -1.1297956 , -3.1474566 ,  0.38729438, -2.0434535 , -1.5511289 ],
      dtype=float32)
</code></pre>
<br>
<h3 id="42-most_similar_to_givenkey1-keys_list">4.2 most_similar_to_given(key1, keys_list)</h3>
<p>ä» keys_list ä¸­è·å–ä¸ key1 æœ€ç›¸ä¼¼çš„è¯ã€‚ä¾‹å¦‚åœ¨212wå½±è¯„ä¸­ï¼Œä»<code>'çˆ±æƒ…', 'æ‚¬ç–‘', 'é£èˆ¹', 'å†å²', 'æˆ˜äº‰'</code>æ‰¾å‡ºæœ€æ¥è¿‘<code>'å¤ªç©º'</code>ï¼Œæœ€åè¿”å›<code>'é£èˆ¹'</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#ä» `keys_list` ä¸­è·å–ä¸ `key1` æœ€ç›¸ä¼¼çš„ `key`ã€‚</span>
<span class="n">w2v_model</span><span class="o">.</span><span class="n">most_similar_to_given</span><span class="p">(</span><span class="n">key1</span><span class="o">=</span><span class="s1">&#39;å¤ªç©º&#39;</span><span class="p">,</span> 
                                <span class="n">keys_list</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;çˆ±æƒ…&#39;</span><span class="p">,</span> <span class="s1">&#39;æ‚¬ç–‘&#39;</span><span class="p">,</span> <span class="s1">&#39;é£èˆ¹&#39;</span><span class="p">,</span> <span class="s1">&#39;å†å²&#39;</span><span class="p">,</span> <span class="s1">&#39;æˆ˜äº‰&#39;</span><span class="p">])</span>
</code></pre></div><pre><code>'é£èˆ¹'
</code></pre>
<br> 
<h3 id="43-w2v_modeln_similarityws1-ws2">4.3 w2v_model.n_similarity(ws1, ws2)</h3>
<p>ä¸¤ç»„è¯ws1, ws2 çš„ç›¸ä¼¼åº¦ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">sklearn.metrics.pairwise</span> <span class="kn">import</span> <span class="n">cosine_similarity</span>

<span class="n">cosine_similarity</span><span class="p">([</span><span class="n">w2v_model</span><span class="o">.</span><span class="n">get_vector</span><span class="p">(</span><span class="s1">&#39;ç†æƒ³&#39;</span><span class="p">)],</span>  
                  <span class="p">[</span><span class="n">w2v_model</span><span class="o">.</span><span class="n">get_vector</span><span class="p">(</span><span class="s1">&#39;ç°å®&#39;</span><span class="p">)])[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div><pre><code>0.5371934
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#cosineç®—æ³•</span>
<span class="n">w2v_model</span><span class="o">.</span><span class="n">n_similarity</span><span class="p">([</span><span class="s1">&#39;ç†æƒ³&#39;</span><span class="p">],</span> 
                       <span class="p">[</span><span class="s1">&#39;ç°å®&#39;</span><span class="p">])</span>
</code></pre></div><pre><code>0.5371934
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#è®¡ç®—ä¸¤ç»„é”®ä¹‹é—´çš„ä½™å¼¦ç›¸ä¼¼åº¦ã€‚</span>
<span class="n">w2v_model</span><span class="o">.</span><span class="n">n_similarity</span><span class="p">([</span><span class="s1">&#39;ç»™åŠ›&#39;</span><span class="p">,</span> <span class="s1">&#39;ç²¾å½©&#39;</span><span class="p">,</span> <span class="s1">&#39;èµ&#39;</span><span class="p">,</span> <span class="s1">&#39;æ¨è&#39;</span><span class="p">],</span> 
                       <span class="p">[</span><span class="s1">&#39;æ— èŠ&#39;</span><span class="p">,</span> <span class="s1">&#39;å°´å°¬&#39;</span><span class="p">,</span> <span class="s1">&#39;åƒåœ¾&#39;</span><span class="p">])</span>
</code></pre></div><pre><code>0.35008422
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">w2v_model</span><span class="o">.</span><span class="n">n_similarity</span><span class="p">([</span><span class="s1">&#39;ç†æƒ³&#39;</span><span class="p">,</span> <span class="s1">&#39;æ¢¦æƒ³&#39;</span><span class="p">],</span> 
                       <span class="p">[</span><span class="s1">&#39;ç°å®&#39;</span><span class="p">,</span> <span class="s1">&#39;ç”Ÿæ´»&#39;</span><span class="p">])</span>
</code></pre></div><pre><code>0.48020104
</code></pre>
<br>
<h3 id="44-w2v_modelcloser_thankey1-key2">4.4 w2v_model.closer_than(key1, key2)</h3>
<p>æ›´æ¥è¿‘äºkey1çš„è¯å‘é‡(ç›¸æ¯”äºkey2)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#è·å–æ‰€æœ‰æ›´æ¥è¿‘ `key1` çš„é”®ï¼Œè€Œä¸æ˜¯ `key2` ã€‚</span>
<span class="n">w2v_model</span><span class="o">.</span><span class="n">closer_than</span><span class="p">(</span><span class="n">key1</span><span class="o">=</span><span class="s1">&#39;ç†æƒ³&#39;</span><span class="p">,</span> 
                      <span class="n">key2</span><span class="o">=</span><span class="s1">&#39;ç°å®&#39;</span><span class="p">)</span>
</code></pre></div><pre><code>['æ¢¦æƒ³', 'å¦¥å', 'è¿½æ¢¦', 'æ„¿æœ›', 'éª¨æ„Ÿ']
</code></pre>
<br>
<h3 id="45-w2v_modelmost_similarpositive-negative">4.5 w2v_model.most_similar(positive, negative)</h3>
<p>æ‰¾å‡ºä¸positiveåŒæ–¹å‘ï¼Œä¸negativeåå‘ç›¸åçš„è¯ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">w2v_model</span><span class="o">.</span><span class="n">most_similar</span><span class="p">(</span><span class="n">positive</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ç»™åŠ›&#39;</span><span class="p">,</span> <span class="s1">&#39;ç²¾å½©&#39;</span><span class="p">,</span> <span class="s1">&#39;è¿‡ç˜¾&#39;</span><span class="p">],</span>
                       <span class="n">negative</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;åƒåœ¾&#39;</span><span class="p">],</span>
                       <span class="n">topn</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</code></pre></div><pre><code>[('æ¿€åŠ¨äººå¿ƒ', 0.6859163045883179),
 ('æƒŠå¿ƒåŠ¨é­„', 0.6767394542694092),
 ('å¸¦æ„Ÿ', 0.6723690032958984),
 ('æƒŠé™©åˆºæ¿€', 0.667783796787262),
 ('åˆºæ¿€', 0.6445038318634033),
 ('ç‡ƒ', 0.6429688930511475),
 ('çˆ½å¿«', 0.6287934184074402),
 ('å¸¦åŠ²', 0.6254130005836487),
 ('çˆ½', 0.624543309211731),
 ('é…£ç•…æ·‹æ¼“', 0.6140543818473816)]
</code></pre>
<br>
<h3 id="46-ç±»æ¯”king-manwomanqueen">4.6 ç±»æ¯”king-man+woman~queen</h3>
<p><img loading="lazy" src="kingqueenformular.png" alt=""  />
</p>
<p>æ¯ä¸ªè¯æ˜¯é«˜ç»´å‘é‡ç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹ï¼Œ ä¸¤ä¸ªç‚¹å¯ä»¥ç»„æˆæœ‰æ–¹å‘çš„å‘é‡ï¼Œè€Œå‘é‡å¯ä»¥æ¯”è¾ƒæ–¹å‘ã€‚</p>
<p>è¿™é‡Œæ˜¯æ¨ç†è¿‡ç¨‹ï¼Œå—é™äºæ•°æ®ï¼Œå…¬å¼ä¸ä¸€å®šå®Œå…¨æˆç«‹ï¼Œ ä½†æ˜¯æ€ç»´å¯ä»¥ç±»æ¯”ã€‚</p>
<p>è¿™ä¸¤ä¸ªè¯ç›¸å‡ï¼ŒæŒ‰æ„Ÿè§‰åº”è¯¥å¾—åˆ°çš„æ˜¯æ€§åˆ«æ–¹å‘ï¼Œé›„æ€§-&gt;é›Œæ€§ã€‚</p>
<p>gender_direction_1 = vector(man)-vector(woman)</p>
<p>gender_direction_2 = vector(king)-vector(queen)</p>
<p>é‚£ä¸¤ä¸ªæ€§åˆ«æ–¹å‘åº”è¯¥è¿‘ä¼¼ï¼Œå‡è®¾è¿™é‡Œå°†å…¶gender_direction_1=gender_direction_2ï¼Œåˆ™å¯¹äºå…¬å¼ä¸­ä»»æ„ä¸€ä¸ªè¯ï¼Œéƒ½å¯ä»¥ç”±ç­‰å¼ä¸­çš„å…¶ä»–ä¸‰ä¸ªè¯ç»è¿‡è¿ç®—å¾—åˆ°ã€‚ä¾‹å¦‚</p>
<p>vector(queen) =  vector(king)-vector(man)+vector(woman)</p>
<p>è¿™é‡Œæ„é€ äº†ä¸€ä¸ªæƒ…ç»ªçš„å…¬å¼ï¼Œè®¡ç®—å¦‚ä¸‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># å¼€å¿ƒ - éš¾è¿‡ ~=  äº«å— - d</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">w2v_model</span><span class="o">.</span><span class="n">get_vector</span><span class="p">(</span><span class="s1">&#39;å¼€å¿ƒ&#39;</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">w2v_model</span><span class="o">.</span><span class="n">get_vector</span><span class="p">(</span><span class="s1">&#39;éš¾è¿‡&#39;</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">w2v_model</span><span class="o">.</span><span class="n">get_vector</span><span class="p">(</span><span class="s1">&#39;äº«å—&#39;</span><span class="p">)</span>

<span class="c1">#d = a-b+c</span>
<span class="n">w2v_model</span><span class="o">.</span><span class="n">similar_by_vector</span><span class="p">(</span><span class="n">a</span><span class="o">-</span><span class="n">b</span><span class="o">+</span><span class="n">c</span><span class="p">)</span>
</code></pre></div><pre><code>[('äº«å—', 0.7833479046821594),
 ('å¼€å¿ƒ', 0.6825607419013977),
 ('æ„‰å¿«', 0.6298696994781494),
 ('å¨±ä¹', 0.6215130090713501),
 ('æ„Ÿå®˜', 0.6085000038146973),
 ('å›¾ä¸ª', 0.6052624583244324),
 ('å›¾ä¸€ä¹', 0.6039161682128906),
 ('ä¼‘é—²', 0.60273677110672),
 ('è§†è§‰äº«å—', 0.6006160378456116),
 ('è½»æ¾æ„‰å¿«', 0.5961319804191589)]
</code></pre>
<p>å¾ˆé—æ†¾ï¼Œdæ²¡æœ‰è¿ç®—å‡ºç…ç†¬ä¹‹ç±»çš„è¯è¯­ï¼Œä½†å¥½åœ¨éƒ½æ˜¯å½¢å®¹è¯ï¼Œè€Œä¸”æ˜¯å¿«ä¹å±…å¤šçš„å½¢å®¹è¯ï¼Œç±»åˆ«æ˜¯å¯¹çš„ï¼Œå°±æ˜¯æ–¹å‘æ˜¯åçš„ã€‚</p>
<br>
<h3 id="è¯å‘é‡æ€»ç»“">è¯å‘é‡æ€»ç»“</h3>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ç»å…¸çš„è¿ç®—king-man+woman~queenæ¥è‡ªgloveæ¨¡å‹ï¼Œè€Œä¸æ˜¯æœ¬æ–‡ä½¿ç”¨çš„word2vecæ¨¡å‹ã€‚ä¸¤è€…ç›¸åŒç‚¹ï¼Œgloveä¸word2vecå‡ä¸ºè¯åµŒå…¥embeddingsæŠ€æœ¯ã€‚åŒºåˆ«åœ¨äºgloveè·å–çš„è¯çš„å…¨å±€è¯­ä¹‰ç©ºé—´ï¼Œè€Œword2vecä¸€èˆ¬æ˜¯æŸä¸ªè¯å‰ånä¸ªè¯(ä¾‹å¦‚å‰å5ä¸ªè¯)èŒƒå›´å†…çš„è¯­ä¹‰ã€‚åšæ¦‚å¿µå››åˆ™è¿ç®—ï¼Œä»¥åå¦‚å¯èƒ½ï¼Œå»ºè®®ç”¨gloveã€‚</p>
<p>æ­¤å¤–ï¼Œå³æ—¶ä½¿ç”¨gloveï¼Œå°½é‡ä½¿ç”¨æ¦‚å¿µçš„è¯ç»„å‡å€¼å‘é‡ã€‚é¦–å…ˆè¦è®­ç»ƒæ•°æ®è¦å­˜åœ¨è¿™äº›äººç±»è®¤çŸ¥çš„çº¿ç´¢ã€‚å…¶æ¬¡ï¼Œè®¤çŸ¥æ¦‚å¿µå¾€å¾€ä¸æ˜¯ç”±ä¸€ä¸ªè¯å†³å®šçš„ï¼Œå¯èƒ½éœ€è¦ç›¸å…³çš„å¾ˆå¤šè¯ã€‚ä¾‹å¦‚äººç±»ç¤¾ä¼šä¸­çš„<code>é›„é›Œ(æ²¡æœ‰è´¬ä¹‰ï¼ŒåŒ…å«äº†ç”·å¥³åœ¨å†…çš„æ¦‚å¿µ)</code>ï¼Œ</p>
<ul>
<li>é›„æ€§æ¦‚å¿µè¯æœ‰<code>ä»–ã€ç”·äººã€ç”·å­©ã€çˆ¶äº²ã€çˆ·çˆ·ã€çˆ¸çˆ¸ã€å§¥çˆ·...</code></li>
<li>é›Œæ€§æ¦‚å¿µè¯æœ‰<code>å¥¹ã€å¥³äººã€å¥³å­©ã€æ¯äº²ã€å¥¶å¥¶ã€å¦ˆå¦ˆã€å§¥å§¥...</code></li>
<li>å›½ç‹æ¦‚å¿µè¯æœ‰<code>æŸ¥ç†nä¸–ã€ä¹”æ²»ã€è·¯æ˜“...</code></li>
<li>å¥³ç‹æ¦‚å¿µè¯æœ‰<code>ä¼Šä¸½èç™½nä¸–ã€ç»´å¤šåˆ©äºšå¥³ç‹ã€å¶å¡æ·ç³å¨œäºŒä¸–...</code></li>
</ul>
<p>æˆ–è®¸æ”¹æˆæ¦‚å¿µå‘é‡å››åˆ™è¿ç®—ï¼Œå…¬å¼å¯èƒ½æ›´å®¹æ˜“æˆç«‹ã€‚</p>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>PyPlutchikåº“ | å¯è§†åŒ–æ–‡æœ¬çš„æƒ…ç»ªè½®(æƒ…ç»ªæŒ‡çº¹)</title>
      <link>https://hidadeng.github.io/blog/pyplutchik_emotion_circle/</link>
      <pubDate>Sun, 03 Apr 2022 10:43:10 +0600</pubDate>
      
      <guid>/blog/pyplutchik_emotion_circle/</guid>
      <description>è¶Šæ¥è¶Šå¤šçš„ç¤¾äº¤ç½‘ç»œå­¦è€…ï¼Œ ä¸ºæµ‹é‡æƒ…ç»ªï¼Œ åŸºäº**å¿ƒç†å­¦å®¶ Robert Plutchik** æå‡ºçš„æ¨¡å‹ï¼ˆé€šå¸¸ç®€ç§°ä¸ºâ€œ**Plutchikè½®**â€ï¼Œäººç±»çš„æƒ…ç»ªä¸€å…±æœ‰8å¤§ç±»ï¼‰åˆ¶ä½œäº†å¤§é‡çš„æƒ…ç»ªå¯è§†åŒ–ä½œå“ã€‚åœ¨æŸç§ç¨‹åº¦ä¸Šï¼ŒPlutchikè½®å¯ä»¥çœ‹åšæƒ…ç»ªæŒ‡çº¹ï¼Œä¾‹å¦‚ä¸åŒçš„ç”µå½±é¢˜æåœ¨8ç±»æƒ…ç»ªçš„åˆ†å¸ƒæ˜¯ä¸ä¸€æ ·çš„ã€‚</description>
      <content:encoded><![CDATA[<p>è¶Šæ¥è¶Šå¤šçš„ç¤¾äº¤ç½‘ç»œå­¦è€…ï¼Œ ä¸ºæµ‹é‡æƒ…ç»ªï¼Œ åŸºäº<strong>å¿ƒç†å­¦å®¶ Robert Plutchik</strong> æå‡ºçš„æ¨¡å‹ï¼ˆé€šå¸¸ç®€ç§°ä¸ºâ€œ<strong>Plutchikè½®</strong>â€ï¼Œäººç±»çš„æƒ…ç»ªä¸€å…±æœ‰8å¤§ç±»ï¼‰åˆ¶ä½œäº†å¤§é‡çš„æƒ…ç»ªå¯è§†åŒ–ä½œå“ã€‚åœ¨æŸç§ç¨‹åº¦ä¸Šï¼ŒPlutchikè½®å¯ä»¥çœ‹åšæƒ…ç»ªæŒ‡çº¹ï¼Œä¾‹å¦‚ä¸åŒçš„ç”µå½±é¢˜æåœ¨8ç±»æƒ…ç»ªçš„åˆ†å¸ƒæ˜¯ä¸ä¸€æ ·çš„ã€‚</p>
<p><img loading="lazy" src="img/imdb_full.png" alt=""  />
</p>
<p>ä»Šå¤©ä»‹ç» <strong>PyPlutchik</strong>ï¼Œè¿™æ˜¯ä¸€ä¸ª Python åº“ï¼Œä¸“é—¨ç”¨äºåœ¨æ–‡æœ¬æˆ–è¯­æ–™åº“ä¸­å¯è§†åŒ– Plutchik çš„æƒ…ç»ªã€‚ PyPlutchik ç»˜åˆ¶ Plutchik çš„èŠ±æœµï¼Œæ¯ä¸ªæƒ…æ„ŸèŠ±ç“£çš„å¤§å°å–å†³äºè¯­æ–™åº“ä¸­æ£€æµ‹åˆ°æˆ–æ³¨é‡Šäº†å¤šå°‘æƒ…æ„Ÿï¼Œä¹Ÿä»£è¡¨æ¯ä¸ªæƒ…æ„ŸèŠ±ç“£çš„ä¸‰ä¸ªå¼ºåº¦ç¨‹åº¦ã€‚</p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip3 install pyplutchik
</code></pre></div><br>
<h2 id="usage">Usage</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pyplutchik</span> <span class="kn">import</span> <span class="n">plutchik</span>

<span class="n">emotions</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;joy&#39;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">,</span>
            <span class="s1">&#39;trust&#39;</span><span class="p">:</span> <span class="mf">0.4</span><span class="p">,</span>
            <span class="s1">&#39;fear&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
            <span class="s1">&#39;surprise&#39;</span><span class="p">:</span> <span class="mf">0.7</span><span class="p">,</span>
            <span class="s1">&#39;sadness&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
            <span class="s1">&#39;disgust&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
            <span class="s1">&#39;anger&#39;</span><span class="p">:</span> <span class="mf">0.4</span><span class="p">,</span>
            <span class="s1">&#39;anticipation&#39;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">}</span>
            
<span class="n">plutchik</span><span class="p">(</span><span class="n">emotions</span><span class="p">)</span>
</code></pre></div><br>
<h2 id="åŠŸèƒ½ç‰¹æ€§">åŠŸèƒ½ç‰¹æ€§</h2>
<p>PyPlutchik æä¾›äº†ä¸€ä¸ªå³æ’å³ç”¨çš„å·¥å…·ï¼Œç”¨äºåœ¨æ–‡æœ¬æˆ–è¯­æ–™åº“ä¸­å®šé‡è¡¨ç¤º Plutchik çš„æƒ…ç»ªã€‚ å®ƒå°Šé‡ Plutchik è½®ä¸­æ¯ä¸ªèŠ±ç“£çš„åŸå§‹é¢œè‰²å’Œç©ºé—´ä½ç§»ã€‚</p>
<p>åœ¨ Pyplutchik ä¸­ï¼Œç”¨æˆ·å¯ä»¥åªä¼ é€’ä¸€ä¸ªå­—å…¸ä½œä¸ºå”¯ä¸€å‚æ•°ï¼Œå…¶ä¸­å­—å…¸çš„é”®å¿…é¡»æ˜¯ 8 ç§åŸºæœ¬æƒ…ç»ªã€‚ æ¯ä¸ªå€¼å¿…é¡»æ˜¯ âˆˆ [0, 1]ã€‚</p>
<p><img loading="lazy" src="img/example01.png" alt=""  />
</p>
<br>
<p>æ¯ç±»æƒ…ç»ªå­˜åœ¨ä¸‰ç§å¼ºåº¦ï¼Œä¸‹è¡¨æ˜¯Pyplutchikçš„8å¤§ç±»æƒ…ç»ªä¸‰ç§å¼ºåº¦æ±‡æ€»ã€‚</p>
<p>ç”¨æˆ·è¿˜å¯ä»¥ç»™æ¯ä¸ªæƒ…ç»ªä¼ å…¥ä¸€ä¸ªé•¿åº¦æ˜¯3çš„åˆ—è¡¨ï¼Œä¾æ¬¡è¡¨ç¤ºæƒ…ç»ªåœ¨ä½ã€ä¸­ã€é«˜ä¸‰ç§å¼ºåº¦çš„ç¨‹åº¦ï¼Œæ•°å€¼0 å’Œ 1 ä¹‹é—´ã€‚</p>
<table>
<thead>
<tr>
<th>Lower intensity</th>
<th>Emotion</th>
<th>Higher intensity</th>
</tr>
</thead>
<tbody>
<tr>
<td>Annoyance</td>
<td>Anger</td>
<td>Rage</td>
</tr>
<tr>
<td>Interest</td>
<td>Anticipation</td>
<td>Vigilance</td>
</tr>
<tr>
<td>Serenity</td>
<td>Joy</td>
<td>Ecstasy</td>
</tr>
<tr>
<td>Acceptance</td>
<td>Trust</td>
<td>Admiration</td>
</tr>
<tr>
<td>Apprehension</td>
<td>Fear</td>
<td>Terror</td>
</tr>
<tr>
<td>Distraction</td>
<td>Surprise</td>
<td>Amazement</td>
</tr>
<tr>
<td>Pensiveness</td>
<td>Sadness</td>
<td>Grief</td>
</tr>
<tr>
<td>Boredom</td>
<td>Disgust</td>
<td>Loathing</td>
</tr>
</tbody>
</table>
<p><img loading="lazy" src="img/example02.png" alt=""  />
</p>
<br>
<p>PyPlutchik ä¹Ÿå¯è¡¨å¾ç”¨æˆ·æ•°æ®ä¸­çš„ä¸»è¦äºŒå…ƒã€æ¬¡è¦äºŒå…ƒã€äºŒå…ƒå’Œç›¸åçš„æƒ…ç»ªã€‚ å®ƒä¼šè‡ªåŠ¨ä»å­—å…¸çš„å…³é”®å­—ä¸­äº†è§£ç”¨æˆ·æƒ³è¦æ˜¾ç¤ºä»€ä¹ˆæ ·çš„äºŒå…ƒç»„ã€‚</p>
<p><img loading="lazy" src="img/example03.png" alt=""  />
</p>
<br>
<h2 id="ç»˜å›¾æŠ€å·§">ç»˜å›¾æŠ€å·§</h2>
<p>å¯ä»¥ä¸“æ³¨äºæƒ…ç»ªå­é›†ï¼Œä¸ä¼šå¿½è§†å…¶ä»–æƒ…ç»ªï¼Œå°†æƒ…ç»ªåˆ—è¡¨ä½œä¸ºå‚æ•°â€œ<strong>highlight_emotions</strong>â€çš„å€¼ä¼ é€’ï¼š</p>
<p><img loading="lazy" src="img/highlight_emotions.png" alt=""  />
</p>
<p>æˆ‘ä»¬å¯ä»¥æ¯”è¾ƒåŒä¸€äºšé©¬é€Šè¯­æ–™åº“çš„ä¸åŒå­ç»„ï¼Œå°†æˆ‘ä»¬çš„å¯è§†åŒ–å¹¶æ’æ”¾ç½®ï¼Œå¹¶ä»…çªå‡ºæ˜¾ç¤ºæ„¤æ€’ã€åŒæ¶å’Œææƒ§çš„èŠ±ç“£ï¼Œä»¥è½»æ¾å‘ç°è¿™äº›è´Ÿé¢æƒ…ç»ªåœ¨ 5 æ˜Ÿè¯„è®ºä¸­çš„è¡¨ç°å¦‚ä½•ä½äº 1 æ˜Ÿè¯„è®º .</p>
<p><img loading="lazy" src="img/amazon.png" alt=""  />
</p>
<br>
<p>æˆ–è€…å¯ä»¥éšè—åæ ‡ã€åˆ»åº¦å’Œæ ‡ç­¾ï¼Œåªç»˜åˆ¶èŠ±ç“£ï¼Œä½¿ç”¨å‚æ•° <code>show_coordinates = False</code> å’Œ <code>show_ticklabels = False</code>ã€‚ä¸‹å›¾æ˜¯imdbä¸åŒç”µå½±çš„æƒ…ç»ªè½®</p>
<p><img loading="lazy" src="img/imdb_full.png" alt=""  />
</p>
<br>
<h2 id="æŸ¥çœ‹æ–‡æ¡£">æŸ¥çœ‹æ–‡æ¡£</h2>
<p>æœ‰å…³æ‰€æœ‰å‚æ•°çš„æ–‡æ¡£å’Œç¤ºä¾‹åº“ï¼Œè¯·å‚è§<a href="Documentation.html">æ–‡æ¡£</a></p>
<p><a href="PyPlutchik.zip"><strong>æ–‡æ¡£ä¸‹è½½</strong></a></p>
<p>ğŸ”¥ PyPlutchik 2.0 å³å°†æ¨å‡ºï¼ æ–°åŠŸèƒ½åŒ…æ‹¬ä»æ–‡æœ¬ä¸­æå–æƒ…æ„Ÿå¹¶æ£€æŸ¥éä¸»é¢˜è¯å…¸ã€‚ æ•¬è¯·æœŸå¾…â€¦â€¦ğŸ”¥</p>
<br>
<h2 id="è¯´æ˜">è¯´æ˜</h2>
<p>å¦‚æœä½¿ç”¨PyPlutchikï¼Œè¯·åœ¨æ–‡çŒ®ä¸­è¯´æ˜ï¼Œæ ¼å¼å¦‚ä¸‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Semeraro A, Vilella S, Ruffo G (2021) PyPlutchik: Visualising and comparing emotion-annotated corpora PLOS ONE 16(9):e0256503.https://doi.org/10.1371/journal.pone.0256503
</code></pre></div><br>
<h2 id="semeraroçš„ç ”ç©¶">Semeraroçš„ç ”ç©¶</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Semeraro, Alfonso, Salvatore Vilella, Giancarlo Ruffo, and Massimo Stella. &#34;Writing about COVID-19 vaccines: Emotional profiling unravels how mainstream and alternative press framed AstraZeneca, Pfizer and vaccination campaigns.&#34; *arXiv preprint arXiv:2201.07538* (2022).
</code></pre></div><ul>
<li><strong>æ‘˜è¦</strong>: è‡ª 2020 å¹´ 11 æœˆå®£å¸ƒ COVID-19 ç–«è‹—ä»¥æ¥ï¼Œåª’ä½“å’Œç¤¾äº¤åª’ä½“å¯¹ COVID-19 ç–«è‹—è¿›è¡Œäº†å¤§é‡è¾©è®ºã€‚ç”±äºå¤§å¤šæ•°ç ”ç©¶éƒ½é›†ä¸­åœ¨ç¤¾äº¤åª’ä½“ä¸­çš„ COVID-19 è™šå‡ä¿¡æ¯ä¸Šï¼Œä¸å…¶ä»–æ¥æºç›¸æ¯”ï¼Œä¸»æµæ–°é—»åª’ä½“å¦‚ä½•æ„å»º COVID-19 å™è¿°å¾ˆå°‘å—åˆ°å…³æ³¨ã€‚ä¸ºäº†å¡«è¡¥è¿™ä¸€ç©ºç™½ï¼Œæˆ‘ä»¬ä½¿ç”¨è®¤çŸ¥ç½‘ç»œç§‘å­¦å’Œè‡ªç„¶è¯­è¨€å¤„ç†æ¥é‡å»º 5745 æ¡å…³äº COVID-19 ç–«è‹—çš„æ–°é—»çš„éšæ—¶é—´å˜åŒ–çš„è¯­ä¹‰å’Œæƒ…æ„Ÿæ¡†æ¶ã€‚æˆ‘ä»¬çš„æ•°æ®é›†æ¶µç›–äº† 8 ä¸ªæœˆå†…çš„ 17 ä¸ªç½‘ç‚¹ï¼Œå…¶ä¸­åŒ…æ‹¬åœ¨ Facebookï¼ˆ500 ä¸‡æ€»è‚¡æ•°ï¼‰å’Œ Twitterï¼ˆ20 ä¸‡è‚¡æ€»è‚¡æ•°ï¼‰ä¸Šå¤§é‡è½¬å‘çš„æ„å¤§åˆ©æ–°é—»æ–‡ç« ã€‚æˆ‘ä»¬å‘ç°ä¸»æµæ¶ˆæ¯æ¥æºæ„å»ºâ€œç–«è‹—/ç–«è‹—â€çš„æ€»ä½“æ¦‚å¿µçš„æ–¹å¼å§‹ç»ˆå…·æœ‰é«˜åº¦çš„ä¿¡ä»»/é¢„æœŸå’Œè¾ƒå°‘çš„åŒæ¶ã€‚åœ¨æ›¿ä»£æ¥æºæ„å»º COVID-19 ç–«è‹—çš„æ–¹å¼ä¸­ï¼Œè¿™äº›æƒ…ç»ªä¸¥é‡ç¼ºå¤±ã€‚åœ¨ç–«è‹—çš„ç‰¹å®šå®ä¾‹ä¸­å‘ç°äº†æ›´å¤šå·®å¼‚ã€‚å¦ç±»æ–°é—»åŒ…æ‹¬ä»¥å¼ºçƒˆçš„æ‚²ä¼¤æ¥æè¿°é˜¿æ–¯åˆ©åº·ç–«è‹—çš„æ ‡é¢˜ï¼Œè€Œä¸»æµæ ‡é¢˜ä¸­æ²¡æœ‰ã€‚ä¸â€œé˜¿æ–¯åˆ©åº·â€ç›¸æ¯”ï¼Œä¸»æµæ–°é—»æœ€åˆå°†â€œè¾‰ç‘â€ä¸å‰¯ä½œç”¨ï¼ˆä¾‹å¦‚â€œè¿‡æ•â€ã€â€œååº”â€ã€â€œå‘çƒ§â€ï¼‰ç›¸å…³è”æ›´å¤šã€‚éšç€åä¸€ç§ç–«è‹—çš„æš‚åœï¼Œåœ¨ 2021 å¹´ 3 æœˆ 15 æ—¥ï¼Œæˆ‘ä»¬å‘ç°äº†ä¸€ç§è¯­ä¹‰/æƒ…æ„Ÿè½¬å˜ï¼šå³ä½¿æ˜¯ä¸»æµæ–‡ç« æ ‡é¢˜éƒ½å°†â€œé˜¿æ–¯åˆ©åº·â€æ¡†å®šä¸ºåœ¨è¯­ä¹‰ä¸Šæ›´ä¸°å¯Œä¸å‰¯ä½œç”¨çš„è´Ÿé¢å…³è”ï¼Œè€Œâ€œè¾‰ç‘â€åˆ™ç»å†äº†ç§¯æçš„æ•ˆä»·è½¬å˜ï¼Œä¸»è¦ä¸å…¶æ›´é«˜çš„æ•ˆç‡æœ‰å…³ã€‚è¡€æ “å½¢æˆä¸å¯æ€•çš„æ¦‚å¿µè”æƒ³ä¸€èµ·è¿›å…¥äº†ç–«è‹—çš„æ¡†æ¶ï¼Œè€Œæ­»äº¡è¿™ä¸ªè¯ç»å†äº†æƒ…æ„Ÿè½¬å˜ï¼Œåœ¨æ›¿ä»£æ ‡é¢˜ä¸­è½¬å‘ææƒ§ï¼Œåœ¨ä¸»æµæ ‡é¢˜ä¸­å¤±å»äº†å¸Œæœ›çš„å†…æ¶µï¼Œç¼ºä¹é¢„æœŸã€‚æˆ‘ä»¬çš„å‘ç°æ­ç¤ºäº†åª’ä½“é‡‡ç”¨çš„å›´ç»• COVID-19 ç–«è‹—çš„æƒ…æ„Ÿå™è¿°çš„å…³é”®æ–¹é¢ï¼Œå¼ºè°ƒäº†äº†è§£æ›¿ä»£åª’ä½“å’Œä¸»æµåª’ä½“å¦‚ä½•æŠ¥é“ç–«è‹—æ¥ç§æ–°é—»çš„å¿…è¦æ€§ã€‚</li>
<li><strong>Keywords</strong>: natural language processing, text analysis, complex networks, cognitive network science, COVID-19, COVID-19 vaccines
<img loading="lazy" src="img/figure2.png" alt=""  />

<img loading="lazy" src="img/figure3.png" alt=""  />

<img loading="lazy" src="img/figure4.png" alt=""  />
</li>
</ul>
<br>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>whatliesåº“ | å¯è§†åŒ–è¯å‘é‡</title>
      <link>https://hidadeng.github.io/blog/whatlies_word2vec/</link>
      <pubDate>Sat, 02 Apr 2022 16:40:10 +0600</pubDate>
      
      <guid>/blog/whatlies_word2vec/</guid>
      <description>è¯è¯­ä¹‹é—´å¯ä»¥æ¯”è¾ƒäº²ç–è¿œè¿‘</description>
      <content:encoded><![CDATA[<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<blockquote>
<p>é“¾æ¥:https://pan.baidu.com/s/1vJohEJ0pc6t4PBK04PiZbg  å¯†ç :t7a6</p>
</blockquote>
<br>
<h2 id="whatlies">whatlies</h2>
<p>å¯ä»¥ä¸spacyè¯­è¨€æ¨¡å‹ç»“åˆï¼Œå¯è§†åŒ–è¯å‘é‡ã€‚å®‰è£…zh_core_web_mdã€en_core_web_mdå’Œwhatliesã€‚å…·ä½“æ–‡æ¡£å¯ä»¥æŸ¥çœ‹https://github.com/RasaHQ/whatlies</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">zh_core_web_md</span><span class="o">-</span><span class="mf">3.0.0</span><span class="o">-</span><span class="n">py3</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="nb">any</span><span class="o">.</span><span class="n">whl</span>
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">en_core_web_md</span><span class="o">-</span><span class="mf">3.0.0</span><span class="o">-</span><span class="n">py3</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="nb">any</span><span class="o">.</span><span class="n">whl</span>
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">whatlies</span>
</code></pre></div><br>
<h2 id="å¿«é€Ÿä¸Šæ‰‹">å¿«é€Ÿä¸Šæ‰‹</h2>
<p>spacyæ¨¡å‹ä¸­çš„è¯å‘é‡å‡ä¸ºå‡ åä¸Šç™¾ç»´åº¦çš„è¯å‘é‡ï¼Œé€šè¿‡å‹ç¼©æ˜ å°„è‡³äºŒç»´ç©ºé—´åï¼Œæ¨ªåæ ‡manï¼Œçºµåæ ‡womanï¼Œå°±å¯ä»¥å°†è¯è¯­çš„æ€§åˆ«å€¾å‘å¯è§†åŒ–å‡ºæ¥ã€‚</p>
<p>è¯å‘é‡è¯­è¨€æ¨¡å‹ä¼šå­¦ä¹ åˆ°äººç±»çš„<strong>åˆ»æ¿å°è±¡</strong>ï¼Œ</p>
<p><a href="https://textdata.cn/blog/wordembeddingsinsocialscience/">å¤§æ•°æ®æ—¶ä»£ä¸‹ç¤¾ä¼šç§‘å­¦ç ”ç©¶æ–¹æ³•çš„æ‹“å±•â€”åŸºäºè¯åµŒå…¥æŠ€æœ¯çš„æ–‡æœ¬åˆ†æçš„åº”ç”¨</a></p>
<p><a href="https://textdata.cn/blog/embeddingsandattitude/">è¯åµŒå…¥æµ‹é‡ä¸åŒç¾¤ä½“å¯¹æŸæ¦‚å¿µçš„æ€åº¦(åè§)</a></p>
<p>ä¾‹å¦‚nurseæ˜¯å¥³æ€§ï¼Œdoctoræ˜¯ç”·æ€§ã€‚</p>
<p>åˆ¶ä½œä¸¤ç»´åº¦ç”»è½´ï¼Œå…¶ä¸­ä»¥womanä½œçºµè½´ï¼Œmanä½œæ¨ªè½´ã€‚ nurseã€queenä¸€èˆ¬æ›´å¤šçš„æ˜¯å¥³æ€§ä»ä¸šè€…ï¼Œå› æ­¤æ›´æ¥è¿‘yè½´ã€‚ kingå›½ç‹å¤šä¸ºç”·æ€§ï¼Œæ‰€ä»¥æ›´æ¥è¿‘xè½´ã€‚</p>
<p>è‡³äºåŠ¨ç‰©ï¼Œå¥³æ€§å–œæ¬¢å…»çŒ«ï¼Œç”·æ€§å–œæ¬¢å…»ç‹—ï¼Œæ‰€ä»¥ä¹Ÿèƒ½ä½“ç°å‡ºè¯è¯­çš„æ€§åˆ«å€¾å‘ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">whatlies</span> <span class="kn">import</span> <span class="n">EmbeddingSet</span>
<span class="kn">from</span> <span class="nn">whatlies.language</span> <span class="kn">import</span> <span class="n">SpacyLanguage</span>

<span class="n">lang</span> <span class="o">=</span> <span class="n">SpacyLanguage</span><span class="p">(</span><span class="s2">&#34;en_core_web_md&#34;</span><span class="p">)</span>

<span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;cat&#34;</span><span class="p">,</span> <span class="s2">&#34;dog&#34;</span><span class="p">,</span> <span class="s2">&#34;fish&#34;</span><span class="p">,</span> <span class="s2">&#34;kitten&#34;</span><span class="p">,</span> <span class="s2">&#34;man&#34;</span><span class="p">,</span> <span class="s2">&#34;woman&#34;</span><span class="p">,</span>
         <span class="s2">&#34;king&#34;</span><span class="p">,</span> <span class="s2">&#34;queen&#34;</span><span class="p">,</span> <span class="s2">&#34;doctor&#34;</span><span class="p">,</span> <span class="s2">&#34;nurse&#34;</span><span class="p">]</span>

<span class="n">emb</span> <span class="o">=</span> <span class="n">EmbeddingSet</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="n">lang</span><span class="p">[</span><span class="n">w</span><span class="p">]</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span><span class="p">])</span>
<span class="n">emb</span><span class="o">.</span><span class="n">plot_interactive</span><span class="p">(</span><span class="n">x_axis</span><span class="o">=</span><span class="n">emb</span><span class="p">[</span><span class="s2">&#34;man&#34;</span><span class="p">],</span> <span class="n">y_axis</span><span class="o">=</span><span class="n">emb</span><span class="p">[</span><span class="s2">&#34;woman&#34;</span><span class="p">])</span>
</code></pre></div>
<figure >
    
        <img src="img/gif-zero.gif" width="100%" />
    
    
</figure>

<p>whatliesä¹Ÿå¯ä»¥å¯¹ä¸­æ–‡è¿›è¡Œæ“ä½œã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">whatlies</span> <span class="kn">import</span> <span class="n">EmbeddingSet</span>
<span class="kn">from</span> <span class="nn">whatlies.language</span> <span class="kn">import</span> <span class="n">SpacyLanguage</span>

<span class="n">zh_lang</span> <span class="o">=</span> <span class="n">SpacyLanguage</span><span class="p">(</span><span class="s2">&#34;zh_core_web_md&#34;</span><span class="p">)</span>

<span class="n">zh_words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;çŒ«&#34;</span><span class="p">,</span> <span class="s2">&#34;ç‹—&#34;</span><span class="p">,</span> <span class="s2">&#34;é±¼&#34;</span><span class="p">,</span> <span class="s2">&#34;é²¤é±¼&#34;</span><span class="p">,</span> <span class="s2">&#34;ç”·äºº&#34;</span><span class="p">,</span> <span class="s2">&#34;å¥³äºº&#34;</span><span class="p">,</span>
         <span class="s2">&#34;å›½ç‹&#34;</span><span class="p">,</span> <span class="s2">&#34;ç‹å&#34;</span><span class="p">,</span> <span class="s2">&#34;åŒ»ç”Ÿ&#34;</span><span class="p">,</span> <span class="s2">&#34;æŠ¤å£«&#34;</span><span class="p">]</span>

<span class="n">zh_emb</span> <span class="o">=</span> <span class="n">EmbeddingSet</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="n">zh_lang</span><span class="p">[</span><span class="n">w</span><span class="p">]</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">zh_words</span><span class="p">])</span>
<span class="n">zh_emb</span><span class="o">.</span><span class="n">plot_interactive</span><span class="p">(</span><span class="n">x_axis</span><span class="o">=</span><span class="n">zh_emb</span><span class="p">[</span><span class="s2">&#34;ç”·äºº&#34;</span><span class="p">],</span> <span class="n">y_axis</span><span class="o">=</span><span class="n">zh_emb</span><span class="p">[</span><span class="s2">&#34;å¥³äºº&#34;</span><span class="p">])</span>
</code></pre></div>
<figure >
    
        <img src="img/chinese.png" width="100%" />
    
    
</figure>

<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>BloxsåŒ… | å¯åœ¨notebookä¸­ä½¿ç”¨çš„äº¤äº’å¯è§†åŒ–åŒ…</title>
      <link>https://hidadeng.github.io/blog/bloxs_interactive_visualization/</link>
      <pubDate>Fri, 01 Apr 2022 10:43:10 +0600</pubDate>
      
      <guid>/blog/bloxs_interactive_visualization/</guid>
      <description>Bloxsæ˜¯ä¸€ä¸ªç®€å•çš„ python å¯äº¤äº’çš„å¯è§†åŒ–åŒ…ï¼Œå¯ä»¥å¸®åŠ©æ‚¨ä»¥ä¸€ç§æœ‰å¸å¼•åŠ›çš„æ–¹å¼ï¼ˆä»¥å—å½¢å¼ï¼‰æ˜¾ç¤ºä¿¡æ¯ã€‚ éå¸¸é€‚åˆåœ¨ç¬”è®°æœ¬ä¸­æ„å»ºä»ªè¡¨æ¿ã€æŠ¥å‘Šå’Œåº”ç”¨ç¨‹åºã€‚</description>
      <content:encoded><![CDATA[<p>Bloxsæ˜¯ä¸€ä¸ªç®€å•çš„ python å¯äº¤äº’çš„å¯è§†åŒ–åŒ…ï¼Œå¯ä»¥å¸®åŠ©æ‚¨ä»¥ä¸€ç§æœ‰å¸å¼•åŠ›çš„æ–¹å¼ï¼ˆä»¥å—å½¢å¼ï¼‰æ˜¾ç¤ºä¿¡æ¯ã€‚ éå¸¸é€‚åˆåœ¨ç¬”è®°æœ¬ä¸­æ„å»ºä»ªè¡¨æ¿ã€æŠ¥å‘Šå’Œåº”ç”¨ç¨‹åºã€‚</p>
<p>å®ƒé€‚ç”¨äºï¼šJupyter Notebookã€Google Colabã€Deepnoteã€Kaggle Notebookã€<a href="https://github.com/mljar/mercury">Mercury</a>ã€‚</p>
<p><img loading="lazy" src="img/bloxs_demo.gif" alt=""  />
</p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip3 install bloxs
</code></pre></div><br>
<h2 id="å¿«é€Ÿä¸Šæ‰‹">å¿«é€Ÿä¸Šæ‰‹</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">from bloxs import B
B(1234, &#34;Bloxs in notebook!&#34;)
</code></pre></div><p><img loading="lazy" src="img/test_bloxs.png" alt=""  />
</p>
<br>
<h2 id="æ¡ˆä¾‹">æ¡ˆä¾‹</h2>
<table>
<thead>
<tr>
<th>Bloxs</th>
<th>Code</th>
</tr>
</thead>
<tbody>
<tr>
<td><img loading="lazy" src="img/number.png" alt=""  />
</td>
<td><code>B(1234, &quot;Bloxs in notebook!&quot;)</code></td>
</tr>
<tr>
<td><img loading="lazy" src="img/percent.png" alt=""  />
</td>
<td><code>B(1999, &quot;Percent change!&quot;, percent_change=10)</code></td>
</tr>
<tr>
<td><img loading="lazy" src="img/emojis.png" alt=""  />
</td>
<td><code>B(&quot;ğŸ‰ğŸ‰ğŸ‰&quot;, &quot;Works with emojis&quot;)</code></td>
</tr>
<tr>
<td><img loading="lazy" src="img/progress.png" alt=""  />
</td>
<td><code>B(&quot;68%&quot;, &quot;Loading progress&quot;, progress=68)</code></td>
</tr>
<tr>
<td><img loading="lazy" src="img/progress_color.png" alt=""  />
</td>
<td><code>B(&quot;68%&quot;, &quot;Loading progress&quot;, progress=68, color=&quot;green&quot;)</code> é¢œè‰²colorå‚æ•°å¯ä»¥è®¾ä¸º&quot;blue&quot;, &ldquo;red&rdquo;, &ldquo;green&rdquo; æˆ–åå…­è¿›åˆ¶è¡¨ç¤º (ä¾‹å¦‚&quot;#fa33fa&quot;)</td>
</tr>
<tr>
<td><img loading="lazy" src="img/line_chart.png" alt=""  />
</td>
<td><code>B(&quot;123&quot;, &quot;Display line chart&quot;, points=[1,4,2,3,5,6])</code></td>
</tr>
<tr>
<td><img loading="lazy" src="img/line_chart_color.png" alt=""  />
</td>
<td><code>B(&quot;123&quot;, &quot;Display line chart&quot;, points=[1,4,2,3,5,6], color=&quot;red&quot;)</code></td>
</tr>
<tr>
<td><img loading="lazy" src="img/stepped.png" alt=""  />
</td>
<td><code>B(&quot;123&quot;, &quot;Display stepped chart&quot;, points=[1,4,2,3,5,6], chart_type=&quot;stepped&quot;)</code></td>
</tr>
<tr>
<td><img loading="lazy" src="img/bar_chart.png" alt=""  />
</td>
<td><code>B(&quot;123&quot;, &quot;Display bar chart&quot;, points=[1,4,2,3,5,6], chart_type=&quot;bar&quot;)</code></td>
</tr>
<tr>
<td><img loading="lazy" src="img/bar_chart_color.png" alt=""  />
</td>
<td><code>B(&quot;123&quot;, &quot;Display bar chart&quot;, points=[1,4,2,3,5,6], chart_type=&quot;bar&quot;, color=&quot;green&quot;)</code></td>
</tr>
</tbody>
</table>
<br>
<p>å¯ä»¥åœ¨ä¸€è¡Œå†…æ•´åˆå¤šä¸ªå›¾</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">B([
    B(1999, &#34;Percent change!&#34;, percent_change=10),
    B(&#34;ğŸ‰ğŸ‰ğŸ‰&#34;, &#34;Works with emojis&#34;),
    B(&#34;68%&#34;, &#34;Loading progress&#34;, progress=68),
    B(1234, &#34;Bloxs in notebook!&#34;)
])
</code></pre></div><p><img loading="lazy" src="img/several_bloxs_2.png" alt=""  />
</p>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">B([
    B(&#34;786&#34;, &#34;Display bar chart&#34;, points=[1,4,2,3,5,6], chart_type=&#34;bar&#34;, color=&#34;green&#34;),
    B(&#34;123&#34;, &#34;Display line chart&#34;, points=[1,4,2,3,5,6], color=&#34;red&#34;),
    B(&#34;123&#34;, &#34;Display stepped chart&#34;, points=[1,4,2,3,5,6], chart_type=&#34;stepped&#34;)
])
</code></pre></div><p><img loading="lazy" src="img/several_bloxs.png" alt=""  />
</p>
<br>
<p>å¦‚æœæƒ³åœ¨è‡ªå·±ç”µè„‘ä¸­å®éªŒä¸Šè¿°ä»£ç ï¼Œå¯ä»¥ç‚¹å‡» <a href="https://deepnote.com/project/bloxs-ZNGnsap0R7ea8LeZY0uarQ/%2Fnotebook.ipynb">notebook</a> ä¸‹è½½ã€‚</p>
<br>
<h2 id="ç»“åˆmercuryç”¨bloxs">ç»“åˆMercuryç”¨Bloxs</h2>
<p><a href="https://github.com/mljar/mercury">Mercury</a> æ˜¯ä¸€ä¸ªç”¨äºå°†ç¬”è®°æœ¬è½¬æ¢ä¸ºäº¤äº’å¼ç½‘ç»œåº”ç”¨ç¨‹åºçš„æ¡†æ¶ã€‚ å®ƒåŸºäº YAML é…ç½®å°†å°éƒ¨ä»¶æ·»åŠ åˆ°ç¬”è®°æœ¬ä¸­ã€‚ ä¸‹é¢å±•ç¤ºäº†ä¸€ä¸ªå¸¦æœ‰ bloxs çš„ç¬”è®°æœ¬ï¼Œä»¥åŠä½œä¸º Mercury çš„ Web åº”ç”¨ç¨‹åºçš„åŒä¸€ç¬”è®°æœ¬ã€‚</p>
<p><img loading="lazy" src="img/bloxs_notebook.gif" alt=""  />
</p>
<br>
<h2 id="mercuryç½‘é¡µåº”ç”¨">Mercuryç½‘é¡µåº”ç”¨</h2>
<p><a href="https://mercury.mljar.com/app/5">Demo</a></p>
<p><img loading="lazy" src="img/bloxs_mercury.gif" alt=""  />
</p>
<br>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>cntextåº“ |  Pythonæ–‡æœ¬åˆ†æåŒ…æ›´æ–°</title>
      <link>https://hidadeng.github.io/blog/cntext_simplification/</link>
      <pubDate>Fri, 01 Apr 2022 09:40:10 +0600</pubDate>
      
      <guid>/blog/cntext_simplification/</guid>
      <description>æ‰©å±•è¯å…¸ã€æƒ…æ„Ÿåˆ†æã€å¯é˜…è¯»æ€§ï¼Œå†…ç½®9ç§æƒ…æ„Ÿè¯å…¸ï¼Œæ¶µç›–ä¸­è‹±æ–‡</description>
      <content:encoded><![CDATA[<p><a href="https://github.com/hidadeng/cntext"><img loading="lazy" src="https://img.shields.io/badge/cntext-%e4%b8%ad%e6%96%87%e6%96%87%e6%9c%ac%e5%88%86%e6%9e%90%e5%ba%93-orange?style=for-the-badge&amp;logo=appveyor" alt=""  />
</a></p>
<p><a href="version1.2.md">æ—§ç‰ˆcntextå…¥å£</a></p>
<p>ä¸­æ–‡æ–‡æœ¬åˆ†æåº“ï¼Œå¯å¯¹æ–‡æœ¬è¿›è¡Œè¯é¢‘ç»Ÿè®¡ã€è¯å…¸æ‰©å……ã€æƒ…ç»ªåˆ†æã€ç›¸ä¼¼åº¦ã€å¯è¯»æ€§ç­‰</p>
<ul>
<li><a href="https://github.com/hidadeng/cntext">githubåœ°å€</a> <code>https://github.com/hidadeng/cntext</code></li>
<li><a href="https://pypi.org/project/cntext/">pypiåœ°å€</a>  <code>https://pypi.org/project/cntext/</code></li>
<li><a href="https://ke.qq.com/course/482241?tuin=163164df">è§†é¢‘è¯¾-<strong>Pythonç½‘ç»œçˆ¬è™«ä¸æ–‡æœ¬æ•°æ®åˆ†æ</strong></a></li>
</ul>
<p>åŠŸèƒ½æ¨¡å—å«</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> <strong>stats</strong>  æ–‡æœ¬ç»Ÿè®¡æŒ‡æ ‡
<ul>
<li><input checked="" disabled="" type="checkbox"> è¯é¢‘ç»Ÿè®¡</li>
<li><input checked="" disabled="" type="checkbox"> å¯è¯»æ€§</li>
<li><input checked="" disabled="" type="checkbox"> å†…ç½®pklè¯å…¸</li>
<li><input checked="" disabled="" type="checkbox"> <strong>æƒ…æ„Ÿåˆ†æ</strong></li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> <strong>dictionary</strong> æ„å»ºè¯è¡¨(å…¸)
<ul>
<li><input checked="" disabled="" type="checkbox"> Sopmi äº’ä¿¡æ¯æ‰©å……è¯å…¸æ³•</li>
<li><input checked="" disabled="" type="checkbox"> W2Vmodels è¯å‘é‡æ‰©å……è¯å…¸æ³•</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> <strong>similarity</strong>   æ–‡æœ¬ç›¸ä¼¼åº¦
<ul>
<li><input checked="" disabled="" type="checkbox"> cosç›¸ä¼¼åº¦</li>
<li><input checked="" disabled="" type="checkbox"> jaccardç›¸ä¼¼åº¦</li>
<li><input checked="" disabled="" type="checkbox"> ç¼–è¾‘è·ç¦»ç›¸ä¼¼åº¦</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> <strong>mind.py</strong> è®¡ç®—æ–‡æœ¬ä¸­çš„è®¤çŸ¥æ–¹å‘ï¼ˆæ€åº¦ã€åè§ï¼‰</li>
</ul>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip install cntext
</code></pre></div><br>
<h2 id="quickstart">QuickStart</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="n">help</span><span class="p">(</span><span class="n">ct</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">Help</span> <span class="nx">on</span> <span class="kn">package</span> <span class="nx">cntext</span><span class="p">:</span>

<span class="nx">NAME</span>
    <span class="nx">cntext</span>

<span class="nx">PACKAGE</span> <span class="nx">CONTENTS</span>
    <span class="nx">mind</span>
    <span class="nx">dictionary</span>
    <span class="nx">similarity</span>
    <span class="nx">stats</span>
</code></pre></div><br>
<h2 id="ä¸€stats">ä¸€ã€stats</h2>
<p>ç›®å‰statså†…ç½®çš„å‡½æ•°æœ‰</p>
<ul>
<li><strong>readability</strong>  æ–‡æœ¬å¯è¯»æ€§</li>
<li><strong>term_freq</strong> è¯é¢‘ç»Ÿè®¡å‡½æ•°</li>
<li><strong>dict_pkl_list</strong>  è·å–cntextå†…ç½®è¯å…¸åˆ—è¡¨(pklæ ¼å¼)</li>
<li><strong>load_pkl_dict</strong> å¯¼å…¥pklè¯å…¸æ–‡ä»¶</li>
<li><strong>sentiment</strong> æƒ…æ„Ÿåˆ†æ</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;å¦‚ä½•çœ‹å¾…ä¸€ç½‘æ–‡ä½œè€…è¢«é»‘å®¢å¤§ä½¬ç›—å·æ”¹æ–‡ï¼Œå› ä¸‡åˆ†æƒ­æ„§è€Œåœæ›´ã€‚&#39;</span>

<span class="n">ct</span><span class="o">.</span><span class="n">term_freq</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Counter({&#39;çœ‹å¾…&#39;: 1,
         &#39;ç½‘æ–‡&#39;: 1,
         &#39;ä½œè€…&#39;: 1,
         &#39;é»‘å®¢&#39;: 1,
         &#39;å¤§ä½¬&#39;: 1,
         &#39;ç›—å·&#39;: 1,
         &#39;æ”¹æ–‡å› &#39;: 1,
         &#39;ä¸‡åˆ†&#39;: 1,
         &#39;æƒ­æ„§&#39;: 1,
         &#39;åœ&#39;: 1})
</code></pre></div><br>
<h3 id="11--readability">1.1  readability</h3>
<p>æ–‡æœ¬å¯è¯»æ€§ï¼ŒæŒ‡æ ‡è¶Šå¤§ï¼Œæ–‡ç« å¤æ‚åº¦è¶Šé«˜ï¼Œå¯è¯»æ€§è¶Šå·®ã€‚</p>
<p>readability(text, lang=&lsquo;chinese&rsquo;)</p>
<ul>
<li>text: æ–‡æœ¬å­—ç¬¦ä¸²æ•°æ®</li>
<li>lang: è¯­è¨€ç±»å‹ï¼Œ&ldquo;chinese&quot;æˆ–&quot;english&rdquo;ï¼Œé»˜è®¤&quot;chinese&quot;</li>
</ul>
<p>**ä¸­æ–‡å¯è¯»æ€§ ** ç®—æ³•å‚è€ƒè‡ª</p>
<blockquote>
<p>å¾å·,å§šæŒ¯æ™”,é™ˆå†¬å.ä¸­æ–‡å¹´æŠ¥å¯è¯»æ€§ï¼šè¡¡é‡ä¸æ£€éªŒ[J].ä¼šè®¡ç ”ç©¶,2021(03):28-44.</p>
<ul>
<li>readability1 &mdash;æ¯ä¸ªåˆ†å¥ä¸­çš„å¹³å‡å­—æ•°</li>
<li>readability2  &mdash;æ¯ä¸ªå¥å­ä¸­å‰¯è¯å’Œè¿è¯æ‰€å çš„æ¯”ä¾‹</li>
<li>readability3  &mdash;å‚è€ƒFog Indexï¼Œ readability3=(readability1+readability2)Ã—0.5</li>
</ul>
</blockquote>
<p>â€‹</p>
<p>ä»¥ä¸Šä¸‰ä¸ªæŒ‡æ ‡è¶Šå¤§ï¼Œéƒ½è¯´æ˜æ–‡æœ¬çš„å¤æ‚ç¨‹åº¦è¶Šé«˜ï¼Œå¯è¯»æ€§è¶Šå·®ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">text1</span> <span class="o">=</span> <span class="s1">&#39;å¦‚ä½•çœ‹å¾…ä¸€ç½‘æ–‡ä½œè€…è¢«é»‘å®¢å¤§ä½¬ç›—å·æ”¹æ–‡ï¼Œå› ä¸‡åˆ†æƒ­æ„§è€Œåœæ›´ã€‚&#39;</span>


<span class="n">ct</span><span class="o">.</span><span class="n">readability</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">{&#39;readability1&#39;: 28.0,
 &#39;readability2&#39;: 0.15789473684210525,
 &#39;readability3&#39;: 14.078947368421053}
</code></pre></div><br>
<p>å¥å­ä¸­çš„ç¬¦å·å˜æ›´ä¼šå½±å“ç»“æœ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">text2</span> <span class="o">=</span> <span class="s1">&#39;å¦‚ä½•çœ‹å¾…ä¸€ç½‘æ–‡ä½œè€…è¢«é»‘å®¢å¤§ä½¬ç›—å·æ”¹æ–‡ï¼Œå› ä¸‡åˆ†æƒ­æ„§è€Œåœæ›´ã€‚&#39;</span>
<span class="n">ct</span><span class="o">.</span><span class="n">readability</span><span class="p">(</span><span class="n">text2</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">{&#39;readability1&#39;: 27.0,
 &#39;readability2&#39;: 0.16666666666666666,
 &#39;readability3&#39;: 13.583333333333334}
</code></pre></div><p><br><br></p>
<h3 id="12--term_freq">1.2  term_freq</h3>
<p>è¯é¢‘ç»Ÿè®¡å‡½æ•°ï¼Œè¿”å›Counterç±»å‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span> 

<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;å¦‚ä½•çœ‹å¾…ä¸€ç½‘æ–‡ä½œè€…è¢«é»‘å®¢å¤§ä½¬ç›—å·æ”¹æ–‡ï¼Œå› ä¸‡åˆ†æƒ­æ„§è€Œåœæ›´ã€‚&#39;</span>

<span class="n">ct</span><span class="o">.</span><span class="n">term_freq</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Counter({&#39;çœ‹å¾…&#39;: 1,
         &#39;ç½‘æ–‡&#39;: 1,
         &#39;ä½œè€…&#39;: 1,
         &#39;é»‘å®¢&#39;: 1,
         &#39;å¤§ä½¬&#39;: 1,
         &#39;ç›—å·&#39;: 1,
         &#39;æ”¹æ–‡å› &#39;: 1,
         &#39;ä¸‡åˆ†&#39;: 1,
         &#39;æƒ­æ„§&#39;: 1,
         &#39;åœ&#39;: 1})
</code></pre></div><br>
<h3 id="13-dict_pkl_list">1.3 dict_pkl_list</h3>
<p>è·å–cntextå†…ç½®è¯å…¸åˆ—è¡¨(pklæ ¼å¼)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="c1"># è·å–cntextå†…ç½®è¯å…¸åˆ—è¡¨(pklæ ¼å¼)</span>
<span class="n">ct</span><span class="o">.</span><span class="n">dict_pkl_list</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[&#39;DUTIR.pkl&#39;,
 &#39;HOWNET.pkl&#39;,
 &#39;sentiws.pkl&#39;,
 &#39;ChineseFinancialFormalUnformalSentiment.pkl&#39;,
 &#39;ANEW.pkl&#39;,
 &#39;LSD2015.pkl&#39;,
 &#39;NRC.pkl&#39;,
 &#39;geninqposneg.pkl&#39;,
 &#39;HuLiu.pkl&#39;,
 &#39;AFINN.pkl&#39;,
 &#39;ADV_CONJ.pkl&#39;,
 &#39;LoughranMcDonald.pkl&#39;,
 &#39;STOPWORDS.pkl&#39;]
</code></pre></div><p>è¯å…¸å¯¹åº”å…³ç³», éƒ¨åˆ†æƒ…æ„Ÿè¯å…¸èµ„æ–™æ•´ç†è‡ª <a href="https://github.com/quanteda/quanteda.sentiment">quanteda.sentiment</a></p>
<table>
<thead>
<tr>
<th>pklæ–‡ä»¶</th>
<th>è¯å…¸</th>
<th>è¯­è¨€</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td>DUTIR.pkl</td>
<td>å¤§è¿ç†å·¥å¤§å­¦æƒ…æ„Ÿæœ¬ä½“åº“</td>
<td>ä¸­æ–‡</td>
<td>ä¸ƒå¤§ç±»æƒ…ç»ªï¼Œ<code>å“€, å¥½, æƒŠ, æƒ§, ä¹, æ€’, æ¶</code></td>
</tr>
<tr>
<td>HOWNET.pkl</td>
<td>çŸ¥ç½‘Hownetè¯å…¸</td>
<td>ä¸­æ–‡</td>
<td>æ­£é¢è¯ã€è´Ÿé¢è¯</td>
</tr>
<tr>
<td>sentiws.pkl</td>
<td>SentimentWortschatz (SentiWS)</td>
<td>è‹±æ–‡</td>
<td>æ­£é¢è¯ã€è´Ÿé¢è¯ï¼›<br>æ•ˆä»·</td>
</tr>
<tr>
<td>ChineseFinancialFormalUnformalSentiment.pkl</td>
<td>é‡‘èé¢†åŸŸæ­£å¼ã€éæ­£å¼ï¼›ç§¯ææ¶ˆæ</td>
<td>ä¸­æ–‡</td>
<td>formal-posã€<br>formal-negï¼›<br>unformal-posã€<br>unformal-neg</td>
</tr>
<tr>
<td>ANEW.pkl</td>
<td>è‹±è¯­å•è¯çš„æƒ…æ„Ÿè§„èŒƒAffective Norms for English Words (ANEW)</td>
<td>è‹±æ–‡</td>
<td>è¯è¯­æ•ˆä»·ä¿¡æ¯</td>
</tr>
<tr>
<td>LSD2015.pkl</td>
<td>Lexicoder Sentiment Dictionary (2015)</td>
<td>è‹±æ–‡</td>
<td>æ­£é¢è¯ã€è´Ÿé¢è¯</td>
</tr>
<tr>
<td>NRC.pkl</td>
<td>NRC Word-Emotion Association Lexicon</td>
<td>è‹±æ–‡</td>
<td>ç»†ç²’åº¦æƒ…ç»ªè¯ï¼›</td>
</tr>
<tr>
<td>geninqposneg.pkl</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>HuLiu.pkl</td>
<td>Hu&amp;Liu (2004)æ­£ã€è´Ÿæƒ…æ„Ÿè¯å…¸</td>
<td>è‹±æ–‡</td>
<td>æ­£é¢è¯ã€è´Ÿé¢è¯</td>
</tr>
<tr>
<td>AFINN.pkl</td>
<td>å°¼å°”æ£® (2011) çš„â€œæ–° ANEWâ€æ•ˆä»·è¯è¡¨</td>
<td>è‹±æ–‡</td>
<td>æƒ…æ„Ÿæ•ˆä»·ä¿¡æ¯valence</td>
</tr>
<tr>
<td>LoughranMcDonald.pkl</td>
<td>ä¼šè®¡é‡‘èLMè¯å…¸</td>
<td>è‹±æ–‡</td>
<td>é‡‘èé¢†åŸŸæ­£ã€è´Ÿé¢æƒ…æ„Ÿè¯</td>
</tr>
<tr>
<td>ADV_CONJ.pkl</td>
<td>å‰¯è¯è¿è¯</td>
<td>ä¸­æ–‡</td>
<td></td>
</tr>
<tr>
<td>STOPWORDS.pkl</td>
<td></td>
<td>ä¸­ã€è‹±</td>
<td>åœç”¨è¯</td>
</tr>
</tbody>
</table>
<h3 id="æ³¨æ„">æ³¨æ„:</h3>
<ul>
<li>
<p>å¦‚æœç”¨æˆ·æƒ…ç»ªåˆ†ææ—¶ä½¿ç”¨DUTIRè¯å…¸å‘è¡¨è®ºæ–‡ï¼Œè¯·åœ¨è®ºæ–‡ä¸­æ·»åŠ è¯¸å¦‚â€œä½¿ç”¨äº†å¤§è¿ç†å·¥å¤§å­¦ä¿¡æ¯æ£€ç´¢ç ”ç©¶å®¤çš„æƒ…æ„Ÿè¯æ±‡æœ¬ä½“â€ å­—æ ·åŠ ä»¥å£°æ˜ã€‚å‚è€ƒæ–‡çŒ®ä¸­åŠ å…¥å¼•æ–‡â€œå¾ç³å®,æ—é¸¿é£,æ½˜å®‡,ç­‰.æƒ…æ„Ÿè¯æ±‡æœ¬ä½“çš„æ„é€ [J]. æƒ…æŠ¥å­¦æŠ¥, 2008, 27(2): 180-185.â€</p>
</li>
<li>
<p>å¦‚æœå¤§å®¶æœ‰åˆ¶ä½œçš„è¯å…¸ï¼Œå¯ä»¥ä¸Šä¼ è‡³ç™¾åº¦ç½‘ç›˜ï¼Œå¹¶åœ¨issueä¸­ç•™ä¸‹è¯å…¸çš„ç½‘ç›˜é“¾æ¥ã€‚å¦‚è¯å…¸éœ€è¦ä½¿ç”¨å£°æ˜ï¼Œå¯è¿åŒæ–‡çŒ®å‡ºå¤„ä¸€èµ·issue</p>
</li>
</ul>
<br>
<h3 id="14-load_pkl_dict">1.4 load_pkl_dict</h3>
<p>å¯¼å…¥pklè¯å…¸æ–‡ä»¶ï¼Œè¿”å›å­—å…¸æ ·å¼æ•°æ®ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="c1"># å¯¼å…¥pklè¯å…¸æ–‡ä»¶,</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;DUTIR.pkl&#39;</span><span class="p">))</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">{&#39;DUTIR&#39;: {&#39;å“€&#39;: [&#39;æ€€æƒ³&#39;, &#39;æ²»ä¸è€Œæ£¼&#39;, ...],
           &#39;å¥½&#39;: [&#39;è¿›è´¤é»œå¥¸&#39;, &#39;æ¸…é†‡&#39;, &#39;æ”¾è¾¾&#39;, ...], 
           &#39;æƒŠ&#39;: [&#39;æƒŠå¥‡ä¸å·²&#39;, &#39;é­‚æƒŠé­„æƒ•&#39;, &#39;æµ·å¤–å¥‡è°ˆ&#39;,...],
           &#39;æƒ§&#39;: [&#39;å¿¸å¿¸æ€©æ€©&#39;, &#39;è°ˆè™è‰²å˜&#39;, &#39;æ‰‹å¿™è„šä¹±&#39;, &#39;åˆ¿ç›®æ€µå¿ƒ&#39;,...],
           &#39;ä¹&#39;: [&#39;ç™¾é¾„çœ‰å¯¿&#39;, &#39;å¨±å¿ƒ&#39;, &#39;å¦‚æ„&#39;, &#39;å–œç³–&#39;,...],
           &#39;æ€’&#39;: [&#39;é¥®æ¨åå£°&#39;, &#39;æ‰¬çœ‰ç¬ç›®&#39;,...],
           &#39;æ¶&#39;: [&#39;å‡ºé€ƒ&#39;, &#39;é±¼è‚‰ç™¾å§“&#39;, &#39;ç§»å¤©æ˜“æ—¥&#39;,]
           }
</code></pre></div><br>
<h3 id="15-sentiment">1.5 sentiment</h3>
<p>sentiment(text, diction, lang=&lsquo;chinese&rsquo;)
ä½¿ç”¨diyè¯å…¸è¿›è¡Œæƒ…æ„Ÿåˆ†æï¼Œè®¡ç®—å„ä¸ªæƒ…ç»ªè¯å‡ºç°æ¬¡æ•°; æœªè€ƒè™‘å¼ºåº¦å‰¯è¯ã€å¦å®šè¯å¯¹æƒ…æ„Ÿçš„å¤æ‚å½±å“ï¼Œ</p>
<ul>
<li>text:  å¾…åˆ†æä¸­æ–‡æ–‡æœ¬</li>
<li>diction:  æƒ…æ„Ÿè¯å­—å…¸ï¼›</li>
<li>lang: è¯­è¨€ç±»å‹ï¼Œ&ldquo;chinese&quot;æˆ–&quot;english&rdquo;ï¼Œé»˜è®¤&quot;chinese&quot;</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;æˆ‘ä»Šå¤©å¾—å¥–äº†ï¼Œå¾ˆé«˜å…´ï¼Œæˆ‘è¦å°†å¿«ä¹åˆ†äº«å¤§å®¶ã€‚&#39;</span>

<span class="n">ct</span><span class="o">.</span><span class="n">sentiment</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
             <span class="n">diction</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;DUTIR.pkl&#39;</span><span class="p">)[</span><span class="s1">&#39;DUTIR&#39;</span><span class="p">],</span>
             <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">{&#39;å“€_num&#39;: 0,
 &#39;å¥½_num&#39;: 0,
 &#39;æƒŠ_num&#39;: 0,
 &#39;æƒ§_num&#39;: 0,
 &#39;ä¹_num&#39;: 2,
 &#39;æ€’_num&#39;: 0,
 &#39;æ¶_num&#39;: 0,
 &#39;stopword_num&#39;: 8,
 &#39;word_num&#39;: 14,
 &#39;sentence_num&#39;: 1}
</code></pre></div><p>å¦‚æœä¸é€‚ç”¨pklè¯å…¸ï¼Œå¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„è¯å…¸ï¼Œä¾‹å¦‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">diction</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;pos&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;é«˜å…´&#39;</span><span class="p">,</span> <span class="s1">&#39;å¿«ä¹&#39;</span><span class="p">,</span> <span class="s1">&#39;åˆ†äº«&#39;</span><span class="p">],</span>
           <span class="s1">&#39;neg&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;éš¾è¿‡&#39;</span><span class="p">,</span> <span class="s1">&#39;æ‚²ä¼¤&#39;</span><span class="p">],</span>
           <span class="s1">&#39;adv&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;å¾ˆ&#39;</span><span class="p">,</span> <span class="s1">&#39;ç‰¹åˆ«&#39;</span><span class="p">]}</span>

<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;æˆ‘ä»Šå¤©å¾—å¥–äº†ï¼Œå¾ˆé«˜å…´ï¼Œæˆ‘è¦å°†å¿«ä¹åˆ†äº«å¤§å®¶ã€‚&#39;</span>
<span class="n">ct</span><span class="o">.</span><span class="n">sentiment</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> 
             <span class="n">diction</span><span class="o">=</span><span class="n">diction</span><span class="p">,</span> 
             <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">{&#39;pos_num&#39;: 3,
 &#39;neg_num&#39;: 0,
 &#39;adv_num&#39;: 1,
 &#39;stopword_num&#39;: 8,
 &#39;word_num&#39;: 14,
 &#39;sentence_num&#39;: 1}
</code></pre></div><p><br><br></p>
<h2 id="äºŒdictionary">äºŒã€dictionary</h2>
<p>æœ¬æ¨¡å—ç”¨äºæ„å»ºè¯è¡¨(å…¸),å«</p>
<ul>
<li>SoPmi å…±ç°æ³•æ‰©å……è¯è¡¨(å…¸)</li>
<li>W2VModels è¯å‘é‡word2vecæ‰©å……è¯è¡¨(å…¸)</li>
</ul>
<h3 id="21-sopmi-å…±ç°æ³•">2.1 SoPmi å…±ç°æ³•</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">sopmier</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">SoPmi</span><span class="p">(</span><span class="n">cwd</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span>
                   <span class="n">input_txt_file</span><span class="o">=</span><span class="s1">&#39;data/sopmi_corpus.txt&#39;</span><span class="p">,</span>  <span class="c1">#åŸå§‹æ•°æ®ï¼Œæ‚¨çš„è¯­æ–™</span>
                   <span class="n">seedword_txt_file</span><span class="o">=</span><span class="s1">&#39;data/sopmi_seed_words.txt&#39;</span><span class="p">,</span> <span class="c1">#äººå·¥æ ‡æ³¨çš„åˆå§‹ç§å­è¯</span>
                   <span class="p">)</span>   

<span class="n">sopmier</span><span class="o">.</span><span class="n">sopmi</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Step 1/4:...Preprocess   Corpus ...
Step 2/4:...Collect co-occurrency information ...
Step 3/4:...Calculate   mutual information ...
Step 4/4:...Save    candidate words ...
Finish! used 44.49 s
</code></pre></div><br>
<h3 id="22-w2vmodels-è¯å‘é‡">2.2 W2VModels è¯å‘é‡</h3>
<p><strong>ç‰¹åˆ«è¦æ³¨æ„ä»£ç éœ€è¦è®¾å®šlangè¯­è¨€å‚æ•°</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1">#åˆå§‹åŒ–æ¨¡å‹,éœ€è¦è®¾ç½®langå‚æ•°ã€‚</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">W2VModels</span><span class="p">(</span><span class="n">cwd</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> 
                     <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>  <span class="c1">#è¯­æ–™æ•°æ® w2v_corpus.txt</span>
<span class="n">model</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">input_txt_file</span><span class="o">=</span><span class="s1">&#39;data/w2v_corpus.txt&#39;</span><span class="p">)</span>


<span class="c1">#æ ¹æ®ç§å­è¯ï¼Œç­›é€‰å‡ºæ²¡ç±»è¯æœ€ç›¸è¿‘çš„å‰100ä¸ªè¯</span>
<span class="n">model</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">seedword_txt_file</span><span class="o">=</span><span class="s1">&#39;data/w2v_seeds/integrity.txt&#39;</span><span class="p">,</span> 
           <span class="n">topn</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">seedword_txt_file</span><span class="o">=</span><span class="s1">&#39;data/w2v_seeds/innovation.txt&#39;</span><span class="p">,</span> 
           <span class="n">topn</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">seedword_txt_file</span><span class="o">=</span><span class="s1">&#39;data/w2v_seeds/quality.txt&#39;</span><span class="p">,</span> 
           <span class="n">topn</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">seedword_txt_file</span><span class="o">=</span><span class="s1">&#39;data/w2v_seeds/respect.txt&#39;</span><span class="p">,</span> 
           <span class="n">topn</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">seedword_txt_file</span><span class="o">=</span><span class="s1">&#39;data/w2v_seeds/teamwork.txt&#39;</span><span class="p">,</span> 
           <span class="n">topn</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Step 1/4:...Preprocess   corpus ...
Step 2/4:...Train  word2vec model
            used   174 s
Step 3/4:...Prepare similar candidates for each seed word in the word2vec model...
Step 4/4 Finish! Used 187 s
Step 3/4:...Prepare similar candidates for each seed word in the word2vec model...
Step 4/4 Finish! Used 187 s
Step 3/4:...Prepare similar candidates for each seed word in the word2vec model...
Step 4/4 Finish! Used 187 s
Step 3/4:...Prepare similar candidates for each seed word in the word2vec model...
Step 4/4 Finish! Used 187 s
Step 3/4:...Prepare similar candidates for each seed word in the word2vec model...
Step 4/4 Finish! Used 187 s

</code></pre></div><br>
<h3 id="éœ€è¦æ³¨æ„">éœ€è¦æ³¨æ„</h3>
<p>è®­ç»ƒå‡ºçš„w2væ¨¡å‹å¯ä»¥åç»­ä¸­ä½¿ç”¨ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">gensim.models</span> <span class="kn">import</span> <span class="n">KeyedVectors</span>

<span class="n">w2v_model</span> <span class="o">=</span> <span class="n">KeyedVectors</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">w2v</span><span class="o">.</span><span class="n">modelè·¯å¾„</span><span class="p">)</span>
<span class="c1">#æ‰¾å‡ºwordçš„è¯å‘é‡</span>
<span class="c1">#w2v_model.get_vector(word)</span>
<span class="c1">#æ›´å¤šw2_modelæ–¹æ³•æŸ¥çœ‹</span>
<span class="c1">#help(w2_model)</span>
</code></pre></div><p>ä¾‹å¦‚æœ¬ä»£ç ï¼Œè¿è¡Œç”Ÿæˆçš„ç»“æœè·¯å¾„<code>output/w2v_candi_words/w2v.model</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">gensim.models</span> <span class="kn">import</span> <span class="n">KeyedVectors</span>

<span class="n">w2v_model</span> <span class="o">=</span> <span class="n">KeyedVectors</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;output/w2v_candi_words/w2v.model&#39;</span><span class="p">)</span>
<span class="n">w2v_model</span><span class="o">.</span><span class="n">most_similar</span><span class="p">(</span><span class="s1">&#39;innovation&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[(&#39;technology&#39;, 0.689210832118988),
 (&#39;infrastructure&#39;, 0.669672966003418),
 (&#39;resources&#39;, 0.6695448160171509),
 (&#39;talent&#39;, 0.6627111434936523),
 (&#39;execution&#39;, 0.6549549102783203),
 (&#39;marketing&#39;, 0.6533523797988892),
 (&#39;merchandising&#39;, 0.6504817008972168),
 (&#39;diversification&#39;, 0.6479553580284119),
 (&#39;expertise&#39;, 0.6446896195411682),
 (&#39;digital&#39;, 0.6326863765716553)]
</code></pre></div><br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#è·å–è¯å‘é‡</span>
<span class="n">w2v_model</span><span class="o">.</span><span class="n">get_vector</span><span class="p">(</span><span class="s1">&#39;innovation&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">array([-0.45616838, -0.7799563 ,  0.56367606, -0.8570078 ,  0.600359  ,
       -0.6588043 ,  0.31116748, -0.11956959, -0.47599426,  0.21840936,
       -0.02268819,  0.1832016 ,  0.24452794,  0.01084935, -1.4213187 ,
        0.22840202,  0.46387577,  1.198386  , -0.621511  , -0.51598716,
        0.13352732,  0.04140598, -0.23470387,  0.6402956 ,  0.20394802,
        0.10799981,  0.24908689, -1.0117126 , -2.3168423 , -0.0402851 ,
        1.6886286 ,  0.5357047 ,  0.22932841, -0.6094084 ,  0.4515793 ,
       -0.5900931 ,  1.8684244 , -0.21056202,  0.29313338, -0.221067  ,
       -0.9535679 ,  0.07325   , -0.15823542,  1.1477109 ,  0.6716076 ,
       -1.0096023 ,  0.10605699,  1.4148282 ,  0.24576302,  0.5740349 ,
        0.19984631,  0.53964925,  0.41962907,  0.41497853, -1.0322098 ,
        0.01090925,  0.54345983,  0.806317  ,  0.31737605, -0.7965337 ,
        0.9282971 , -0.8775608 , -0.26852605, -0.06743863,  0.42815775,
       -0.11774074, -0.17956367,  0.88813037, -0.46279573, -1.0841943 ,
       -0.06798118,  0.4493006 ,  0.71962464, -0.02876493,  1.0282255 ,
       -1.1993176 , -0.38734904, -0.15875885, -0.81085825, -0.07678922,
       -0.16753489,  0.14065655, -1.8609751 ,  0.03587054,  1.2792674 ,
        1.2732009 , -0.74120265, -0.98000383,  0.4521185 , -0.26387128,
        0.37045383,  0.3680011 ,  0.7197629 , -0.3570571 ,  0.8016917 ,
        0.39243212, -0.5027844 , -1.2106236 ,  0.6412354 , -0.878307  ],
      dtype=float32)
</code></pre></div><p><br><br></p>
<h2 id="23-co_occurrence_matrix">2.3 co_occurrence_matrix</h2>
<p>è¯å…±ç°çŸ©é˜µ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="n">documents</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;I go to school every day by bus .&#34;</span><span class="p">,</span>
         <span class="s2">&#34;i go to theatre every night by bus&#34;</span><span class="p">]</span>

<span class="n">ct</span><span class="o">.</span><span class="n">co_occurrence_matrix</span><span class="p">(</span><span class="n">documents</span><span class="p">,</span> 
                        <span class="n">window_size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> 
                        <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>
</code></pre></div><p><img loading="lazy" src="/Users/thunderhit/Desktop/Coding/Python/diyPython/cntext/img/co_occurrence1.png" alt=""  />
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">documents2</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;ç¼–ç¨‹å¾ˆå¥½ç©&#34;</span><span class="p">,</span>
             <span class="s2">&#34;Pythonæ˜¯æœ€å¥½å­¦çš„ç¼–ç¨‹&#34;</span><span class="p">]</span>

<span class="n">ct</span><span class="o">.</span><span class="n">co_occurrence_matrix</span><span class="p">(</span><span class="n">documents2</span><span class="p">,</span> 
                        <span class="n">window_size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> 
                        <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
</code></pre></div><p><img loading="lazy" src="/Users/thunderhit/Desktop/Coding/Python/diyPython/cntext/img/co_occurrence2.png" alt=""  />
</p>
<p><br><br></p>
<h2 id="ä¸‰similarity">ä¸‰ã€similarity</h2>
<p>å››ç§ç›¸ä¼¼åº¦è®¡ç®—å‡½æ•°</p>
<ul>
<li>cosine_sim(text1, text2)  cosä½™å¼¦ç›¸ä¼¼</li>
<li>jaccard_sim(text1, text2)     jaccardç›¸ä¼¼</li>
<li>minedit_sim(text1, text2)  æœ€å°ç¼–è¾‘è·ç¦»ç›¸ä¼¼åº¦ï¼›</li>
<li>simple_sim(text1, text2) æ›´æ”¹å˜åŠ¨ç®—æ³•</li>
</ul>
<p>ç®—æ³•å®ç°å‚è€ƒè‡ª <code>Cohen, Lauren, Christopher Malloy, and Quoc Nguyen. Lazy prices. No. w25084. National Bureau of Economic Research, 2018.</code></p>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span> 


<span class="n">text1</span> <span class="o">=</span> <span class="s1">&#39;ç¼–ç¨‹çœŸå¥½ç©ç¼–ç¨‹çœŸå¥½ç©&#39;</span>
<span class="n">text2</span> <span class="o">=</span> <span class="s1">&#39;æ¸¸æˆçœŸå¥½ç©ç¼–ç¨‹çœŸå¥½ç©å•Š&#39;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">cosine_sim</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">jaccard_sim</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">minedit_sim</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">simple_sim</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">))</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">0.82
0.67
2.00
0.87
</code></pre></div><p><br><br></p>
<h2 id="å››text2mind">å››ã€Text2Mind</h2>
<p>è¯åµŒå…¥ä¸­è•´å«ç€äººç±»çš„è®¤çŸ¥ä¿¡æ¯ï¼Œä»¥å¾€çš„è¯åµŒå…¥å¤§å¤šæ˜¯æ¯”è¾ƒä¸€ä¸ªæ¦‚å¿µä¸­ä¸¤ç»„åä¹‰è¯ä¸æŸå¯¹è±¡çš„è·ç¦»è®¡ç®—è®¤çŸ¥ä¿¡æ¯ã€‚</p>
<p>- <strong>å¤šä¸ªå¯¹è±¡åœ¨æŸæ¦‚å¿µçš„è¿œè¿‘</strong>ï¼ŒèŒä¸šä¸æ€§åˆ«ï¼ŒæŸä¸ªèŒä¸šæ˜¯å¦å­˜åœ¨äº²è¿‘ç”·æ€§ï¼Œè€Œæ’æ–¥å¥³æ€§</p>
<p>- å¤šä¸ªå¯¹è±¡åœ¨æŸ<strong>æ¦‚å¿µçš„åˆ†é‡(fenï¼Œä¸€å£°)çš„å¤šå°‘</strong>ï¼Œ äººç±»è¯­è¨€ä¸­ç•™å­˜ç€å¯¹ä¸åŒåŠ¨ç‰©ä½“ç§¯çš„è®¤çŸ¥è®°å¿†ï¼Œå¦‚å°é¼ å¤§è±¡ã€‚åŠ¨ç‰©è¯åœ¨è¯å‘é‡ç©ºé—´ä¸­æ˜¯å¦èƒ½ç•™å­˜ç€è¿™ç§å¤§å°çš„è®°å¿†</p>
<p>è¿™ä¸¤ç§è®¤çŸ¥åˆ†åˆ«å¯ä»¥ç”¨å‘é‡è·ç¦»ã€å‘é‡è¯­ä¹‰æŠ•å½±è®¡ç®—å¾—æ¥ã€‚</p>
<ul>
<li>tm.sematic_distance(words, c_words1, c_words2)  å‘é‡è·ç¦»</li>
<li>tm.sematic_projection(words, c_words1, c_words2)  å‘é‡è¯­ä¹‰æŠ•å½±</li>
</ul>
<h3 id="41-tmsematic_distancewords-c_words1-c_words2">4.1 tm.sematic_distance(words, c_words1, c_words2)</h3>
<p>åˆ†åˆ«è®¡ç®—wordsä¸c_words1ã€c_words2è¯­ä¹‰è·ç¦»ï¼Œè¿”å›è·ç¦»å·®å€¼ã€‚</p>
<p>ä¾‹å¦‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">male_concept = [&#39;male&#39;, &#39;man&#39;, &#39;he&#39;, &#39;him&#39;]
female_concept = [&#39;female&#39;, &#39;woman&#39;, &#39;she&#39;, &#39;her&#39;]
software_engineer_concept  = [&#39;engineer&#39;,  &#39;programming&#39;,  &#39;software&#39;]
d1 = distance(male_concept,  software_engineer_concept)
d2 = distance(female_concept,  software_engineer_concept)
</code></pre></div><p>å¦‚æœd1-d2&lt;0ï¼Œè¯´æ˜åœ¨è¯­ä¹‰ç©ºé—´ä¸­ï¼Œsoftware_engineer_conceptæ›´æ¥è¿‘male_conceptï¼Œæ›´è¿œç¦»female_conceptã€‚</p>
<p>æ¢è¨€ä¹‹ï¼Œåœ¨è¯¥è¯­æ–™ä¸­ï¼Œäººä»¬å¯¹è½¯ä»¶å·¥ç¨‹å¸ˆè¿™ä¸€ç±»å·¥ä½œï¼Œå¯¹å¥³æ€§å­˜åœ¨åˆ»æ¿å°è±¡(åè§)ã€‚</p>
<p><strong>ä¸‹è½½glove_w2v.6B.100d.txt</strong>é“¾æ¥: <a href="https://pan.baidu.com/s/1MMfQ7M0YCzL9Klp4zrlHBw">https://pan.baidu.com/s/1MMfQ7M0YCzL9Klp4zrlHBw</a> æå–ç : 72l0</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="c1">#Note: this is a word2vec format model</span>
<span class="n">tm</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">Text2Mind</span><span class="p">(</span><span class="n">w2v_model_path</span><span class="o">=</span><span class="s1">&#39;glove_w2v.6B.100d.txt&#39;</span><span class="p">)</span>

<span class="n">engineer</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;program&#39;</span><span class="p">,</span> <span class="s1">&#39;software&#39;</span><span class="p">,</span> <span class="s1">&#39;computer&#39;</span><span class="p">]</span>
<span class="n">mans</span> <span class="o">=</span>  <span class="p">[</span><span class="s2">&#34;man&#34;</span><span class="p">,</span> <span class="s2">&#34;he&#34;</span><span class="p">,</span> <span class="s2">&#34;him&#34;</span><span class="p">]</span>
<span class="n">womans</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;woman&#34;</span><span class="p">,</span> <span class="s2">&#34;she&#34;</span><span class="p">,</span> <span class="s2">&#34;her&#34;</span><span class="p">]</span>

<span class="c1">#åœ¨è¯­ä¹‰ç©ºé—´ä¸­ï¼Œå·¥ç¨‹å¸ˆæ›´æ¥è¿‘äºç”·äººï¼Œè€Œä¸æ˜¯å¥³äººã€‚</span>
<span class="c1">#in semantic space, engineer is closer to man, other than woman.</span>
<span class="n">tm</span><span class="o">.</span><span class="n">sematic_distance</span><span class="p">(</span><span class="n">words</span><span class="o">=</span><span class="n">animals</span><span class="p">,</span> 
                    <span class="n">c_words1</span><span class="o">=</span><span class="n">mans</span><span class="p">,</span> 
                    <span class="n">c_words2</span><span class="o">=</span><span class="n">womans</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">-0.38
</code></pre></div><br>
<h3 id="42-tmsematic_projectionwords-c_words1-c_words2">4.2 tm.sematic_projection(words, c_words1, c_words2)</h3>
<p><strong>è¯­ä¹‰æŠ•å½±</strong>ï¼Œæ ¹æ®ä¸¤ç»„åä¹‰è¯c_words1, c_words2æ„å»ºä¸€ä¸ªæ¦‚å¿µ(è®¤çŸ¥)å‘é‡, wordsä¸­çš„æ¯ä¸ªè¯å‘é‡åœ¨æ¦‚å¿µå‘é‡ä¸­æŠ•å½±ï¼Œå³å¯å¾—åˆ°è®¤çŸ¥ä¿¡æ¯ã€‚</p>
<p>åˆ†å€¼è¶Šå¤§ï¼Œwordè¶Šä½äºc_words2ä¸€ä¾§ã€‚</p>
<p>ä¸‹å›¾æ˜¯è¯­ä¹‰æŠ•å½±ç¤ºä¾‹å›¾ï¼Œæœ¬æ–‡ç®—æ³•å’Œå›¾ç‰‡å‡æ¥è‡ª &ldquo;Grand, G., Blank, I.A., Pereira, F. and Fedorenko, E., 2022. Semantic projection recovers rich human knowledge of multiple object features from word embeddings. <em>Nature Human Behaviour</em>, pp.1-13.&rdquo;</p>
<p><img loading="lazy" src="img/Nature_Semantic_projection_recovering_human_knowledge_of.png" alt=""  />
</p>
<p>ä¾‹å¦‚ï¼Œäººç±»çš„è¯­è¨€ä¸­ï¼Œå­˜åœ¨å°ºå¯¸ã€æ€§åˆ«ã€å¹´é¾„ã€æ”¿æ²»ã€é€Ÿåº¦ã€è´¢å¯Œç­‰ä¸åŒçš„æ¦‚å¿µã€‚æ¯ä¸ªæ¦‚å¿µå¯ä»¥ç”±ä¸¤ç»„åä¹‰è¯ç¡®å®šæ¦‚å¿µçš„å‘é‡æ–¹å‘ã€‚</p>
<p>ä»¥å°ºå¯¸ä¸ºä¾‹ï¼ŒåŠ¨ç‰©åœ¨äººç±»è®¤çŸ¥ä¸­å¯èƒ½å­˜åœ¨ä½“ç§¯å°ºå¯¸å¤§å°å·®å¼‚ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">animals</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;mouse&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="s1">&#39;horse&#39;</span><span class="p">,</span>  <span class="s1">&#39;pig&#39;</span><span class="p">,</span> <span class="s1">&#39;whale&#39;</span><span class="p">]</span>
<span class="n">smalls</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;small&#34;</span><span class="p">,</span> <span class="s2">&#34;little&#34;</span><span class="p">,</span> <span class="s2">&#34;tiny&#34;</span><span class="p">]</span>
<span class="n">bigs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;large&#34;</span><span class="p">,</span> <span class="s2">&#34;big&#34;</span><span class="p">,</span> <span class="s2">&#34;huge&#34;</span><span class="p">]</span>

<span class="c1"># In size conception, mouse is smallest, horse is biggest.</span>
<span class="c1"># åœ¨å¤§å°æ¦‚å¿µä¸Šï¼Œè€é¼ æœ€å°ï¼Œé©¬æ˜¯æœ€å¤§çš„ã€‚</span>
<span class="n">tm</span><span class="o">.</span><span class="n">sematic_projection</span><span class="p">(</span><span class="n">words</span><span class="o">=</span><span class="n">animals</span><span class="p">,</span> 
                      <span class="n">c_words1</span><span class="o">=</span><span class="n">smalls</span><span class="p">,</span> 
                      <span class="n">c_words2</span><span class="o">=</span><span class="n">bigs</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[(&#39;mouse&#39;, -1.68),
 (&#39;cat&#39;, -0.92),
 (&#39;pig&#39;, -0.46),
 (&#39;whale&#39;, -0.24),
 (&#39;horse&#39;, 0.4)]
</code></pre></div><p><br><br></p>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>streamlit|ä»»åŠ¡å‘¨æœŸè¡¨ç”Ÿæˆå™¨</title>
      <link>https://hidadeng.github.io/blog/periodic-table-creator/</link>
      <pubDate>Tue, 29 Mar 2022 10:43:10 +0600</pubDate>
      
      <guid>/blog/periodic-table-creator/</guid>
      <description>è¿™ä¸ªå‘¨æœŸè¡¨ç”Ÿæˆå™¨çš„æƒ³æ³•æ˜¯åˆ›å»ºä¸€ä¸ªå…³äº è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡å‘¨æœŸè¡¨çš„åšå®¢ã€‚ åœ¨ Streamlit çš„å¸®åŠ©ä¸‹å¹¶å—åˆ°æ­¤ Bokehçš„å¯å‘ï¼Œå®ƒæˆä¸ºäº†ä¸€ä¸ªåŠ¨æ€çš„åˆ›å»ºè€…ï¼Œå¯ä»¥æ ¹æ®æ‚¨çš„å…ƒç´ å‘¨æœŸè¡¨è¿›è¡Œå®šåˆ¶ ï¼</description>
      <content:encoded><![CDATA[<iframe
    src="//player.bilibili.com/player.html?bvid=BV1mu411i7Jv&page=1"
    scrolling="no"
    height="500px"
    width="800px"
    frameborder="no"
    framespacing="0"
    allowfullscreen="true"
>
</iframe>

<p>è¿™ä¸ª<strong>å‘¨æœŸè¡¨ç”Ÿæˆå™¨</strong>çš„æƒ³æ³•æ˜¯åˆ›å»ºä¸€ä¸ªå…³äº <a href="https://www.innerdoc.com/periodic-table-of-nlp-tasks/">è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡å‘¨æœŸè¡¨</a> çš„åšå®¢ã€‚ åœ¨ Streamlit çš„å¸®åŠ©ä¸‹å¹¶å—åˆ°æ­¤ Bokeh <a href="https://docs.bokeh.org/en/latest/docs/gallery/periodic.html">å›¾åº“ç¤ºä¾‹</a> çš„å¯å‘ï¼Œå®ƒæˆä¸ºäº†ä¸€ä¸ªåŠ¨æ€çš„åˆ›å»ºè€…ï¼Œå¯ä»¥æ ¹æ®æ‚¨çš„å…ƒç´ å‘¨æœŸè¡¨è¿›è¡Œå®šåˆ¶ ï¼</p>
<p>å¤§é‚“çš„ä½œç”¨ä»…ä»…æ˜¯å°†å…¶æ±‰åŒ–ï¼Œæ²¡æœ‰åšå¸ƒå±€ä¸Šçš„æ–°åˆ›æ–°ã€‚</p>
<br>
<h2 id="ä¸‹è½½">ä¸‹è½½</h2>
<p>ç‚¹å‡»ä¸‹è½½<a href="periodic-table-creator.zip"><strong>periodic-table-creator</strong></a>é¡¹ç›®å‹ç¼©æ–‡ä»¶å¤¹</p>
<br>
<p>ä¸‹é¢æ˜¯è‡ªå®šä¹‰çš„<strong>ä»»åŠ¡å‘¨æœŸè¡¨</strong>ç¤ºä¾‹ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼šå¯¹äºè‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ï¼</p>
<p><img loading="lazy" src="img/periodic-table-generator-customize-content.png" alt="alt text"  />
</p>
<br>
<h2 id="å®‰è£…è¿è¡Œ">å®‰è£…&amp;è¿è¡Œ</h2>
<p>æ‰“å¼€å‘½ä»¤è¡Œ(ç»ˆç«¯),</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip3 install streamlit==1.8.1
pip3 install bokeh==2.4.1


#åˆ‡æ¢è‡³é¡¹ç›®æ–‡ä»¶å¤¹periodic-table-creator
cd periodic-table-creator

#è¿è¡Œstreamlit
streamlit run periodic_table_creator.py
</code></pre></div><p>æ­¤æ—¶åœ¨å‘½ä»¤è¡Œä¸­ä¼šå‡ºç°</p>
<p><img loading="lazy" src="img/terminal.png" alt=""  />
</p>
<p>ç‚¹å‡»<strong>Local URL</strong>å¯¹åº”çš„é“¾æ¥ï¼Œæˆ–è€…å°†è¯¥é“¾æ¥å¤åˆ¶ç²˜è´´åˆ°æµè§ˆå™¨ï¼Œå³å¯è®¿é—®ã€‚</p>
<p><img loading="lazy" src="img/firstrun.png" alt=""  />
</p>
<br>
<h2 id="å¯¼å…¥æ•°æ®">å¯¼å…¥æ•°æ®</h2>
<p>åˆ›å»ºè‡ªå·±ç‰¹æœ‰çš„<strong>ä»»åŠ¡å‘¨æœŸè¡¨</strong>éœ€è¦å¯¼å…¥è‡ªç”±çš„csvæ•°æ®ã€‚å¯ä»¥[ç‚¹å‡»è¿™é‡Œ] (periodic-table-creator/periodic_nlp.csv) ä¸‹è½½å¹¶æŸ¥çœ‹æ•°æ®æ ¼å¼ï¼Œæˆ–è€…è¿è¡Œæ¡ˆä¾‹æ—¶ï¼Œ ç‚¹å‡»æŒ‰é’®&quot;Edit CSV text&quot; æŸ¥çœ‹ç¤ºä¾‹æ•°æ®æ ¼å¼ã€‚</p>
<ul>
<li>è¡¨çš„å­—ç¬¦å(åˆ—å): <code>atomicnumber;group;period;symbol;elementname;groupname;color;url;excerpt</code></li>
<li>csvæ–‡ä»¶çš„åˆ†éš”ç¬¦ä½¿ç”¨è‹±æ–‡æ ¼å¼ä¸‹çš„ <code>;</code>æˆ–<code>,</code></li>
<li>csvæ–‡ä»¶ä½¿ç”¨utf-8ç¼–ç </li>
</ul>
<p><img loading="lazy" src="img/periodic-table-generator-load-content.png" alt=""  />
</p>
<br>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://textdata.cn/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>doccano|ä¸ºæœºå™¨å­¦ä¹ å»ºæ¨¡åšæ•°æ®æ ‡æ³¨</title>
      <link>https://hidadeng.github.io/blog/doccano_text_anotation/</link>
      <pubDate>Mon, 28 Mar 2022 10:43:10 +0600</pubDate>
      
      <guid>/blog/doccano_text_anotation/</guid>
      <description>ä½¿ç”¨doccanoï¼Œä¸ºæœºå™¨å­¦ä¹ å»ºæ¨¡åšæ•°æ®æ ‡æ³¨</description>
      <content:encoded><![CDATA[<h2 id="doccano">doccano</h2>
<p>doccanoæ˜¯å¼€æºçš„æ•°æ®æ ‡æ³¨å·¥å…·ï¼Œå¯ä»¥ç®€åŒ–æ•°æ®æ ‡æ³¨çš„éš¾åº¦ã€‚éœ€è¦æ³¨æ„ï¼Œå¸‚é¢ä¸Šçš„æœºå™¨å­¦ä¹ è¯¾ç¨‹ä¸€èˆ¬éƒ½é»˜è®¤æ•°æ®å·²æ ‡æ³¨ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šè®²æœºå™¨å­¦ä¹ ã€‚</p>
<p><img loading="lazy" src="img/doccano.gif" alt=""  />
</p>
<p>æ‚¨è¿˜å¯ä»¥å°† doccano ä¸æ‚¨çš„è„šæœ¬é›†æˆï¼Œå› ä¸ºå®ƒå°†åŠŸèƒ½å…¬å¼€ä¸ºAPIã€‚ doccano APIæ˜¯åœ¨å±€åŸŸç½‘å†…çš„ç½‘å€é“¾æ¥ï¼Œå¤šå°è®¾å¤‡å¯æ‰“å¼€æµè§ˆã€æ ‡æ³¨ã€‚</p>
<br>
<h2 id="ä¸€æ ‡è®°æµç¨‹">ä¸€ã€æ ‡è®°æµç¨‹</h2>
<p>é€šè¿‡ä»¥ä¸‹æ­¥éª¤å¼€å§‹å’Œå®Œæˆä½¿ç”¨ doccano çš„æ ‡ç­¾é¡¹ç›®ï¼š</p>
<ol>
<li>å®‰è£…doccanoã€‚</li>
<li>è¿è¡Œdoccanoã€‚</li>
<li>è®¾ç½®æ ‡ç­¾é¡¹ç›®ã€‚ é€‰æ‹©æ ‡ç­¾é¡¹ç›®çš„ç±»å‹ï¼Œ é…ç½®é¡¹ç›®è®¾ç½®ã€‚</li>
<li>å¯¼å…¥æ•°æ®é›†ã€‚ æ‚¨è¿˜å¯ä»¥å¯¼å…¥å¸¦æ ‡ç­¾çš„æ•°æ®é›†ã€‚</li>
<li>ç»™é¡¹ç›®æ·»åŠ <strong>æ ‡æ³¨äººå‘˜</strong></li>
<li>ç»™æ ‡å¿—è€…å®šä¹‰æ ‡æ³¨å·¥ä½œæ–‡æ¡£è¯´æ˜</li>
<li>å¼€å§‹æ ‡è®°æ•°æ®ã€‚</li>
<li>å¯¼å‡ºæ ‡è®°çš„æ•°æ®é›†ã€‚</li>
</ol>
<br>
<h2 id="äºŒé…ç½®ç¯å¢ƒ">äºŒã€é…ç½®ç¯å¢ƒ</h2>
<h3 id="21-å®‰è£…">2.1 å®‰è£…</h3>
<p>æ‰“å¼€å‘½ä»¤è¡Œï¼ˆcmdã€terminalï¼‰æ‰§è¡Œå®‰è£…å‘½ä»¤</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip3 install doccano
</code></pre></div><br>
<h3 id="22-è¿è¡Œdoccano">2.2 è¿è¡Œdoccano</h3>
<p>åœ¨å‘½ä»¤è¡Œï¼ˆcmdã€terminalï¼‰å†…ä¾æ¬¡æ‰§è¡Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">#åœ¨ç”µè„‘ç¬¬ä¸€æ¬¡è¿è¡Œçš„æ—¶å€™åˆå§‹åŒ–doccano
#åªéœ€è®¾ç½®ä¸€æ¬¡ï¼Œä¹‹åä¸ç”¨å†è¿è¡Œè¯¥å‘½ä»¤
doccano init

#åˆ›å»ºç”¨æˆ·ååŠå¯†ç ï¼›ä¾‹å¦‚ç°åœ¨æœ‰ä¸€ä¸ªä¸»ç®¡adminï¼Œä¸¤ä¸ªæ ‡æ³¨å‘˜tomå’Œjack
#è®¾ç½®å¥½ç”¨æˆ·ï¼Œä¹‹åä¸ç”¨å†è¿è¡Œè¯¥å‘½ä»¤
doccano createuser --username admin --password pass
doccano createuser --username tom --password pass
doccano createuser --username jack --password pass

#å¼€å¯doccanoæœåŠ¡
doccano webserver
</code></pre></div><p>å®Œæˆä¸Šè¿°æ“ä½œåï¼Œå¦æ‰“å¼€ä¸€ä¸ªæ–°çš„å‘½ä»¤è¡Œï¼Œæ‰§è¡Œä¸‹åˆ—å‘½ä»¤</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">doccano task
</code></pre></div><br>
<h2 id="ä¸‰æ¡ˆä¾‹">ä¸‰ã€æ¡ˆä¾‹</h2>
<p>ä¸‹é¢æˆ‘ä»¬ä»¥å¤–å–è¯„è®ºæ•°æ®ä¸ºä¾‹ï¼Œå¯¹è¯„è®ºè¿›è¡Œåˆ¤æ–­ï¼Œæ ‡æ³¨ä¸ºæ­£ã€è´Ÿé¢æƒ…æ„Ÿã€‚<a href="data.csv">ç‚¹å‡»ä¸‹è½½data.csv</a></p>
<br>
<h3 id="31-åˆ›å»ºé¡¹ç›®">3.1 åˆ›å»ºé¡¹ç›®</h3>
<p>å…ˆç™»å½•ç”¨æˆ·åå’Œå¯†ç ï¼Œè¿™é‡Œçš„adminæ˜¯è¶…çº§ç”¨æˆ·(æƒé™æœ€å¤§)</p>
<p><img loading="lazy" src="img/signin.png" alt=""  />
</p>
<p>ä¸ºåˆ›å»ºé¡¹ç›®ï¼Œå¦‚å›¾ç‚¹å‡»<strong>Create</strong>æŒ‰é’®ã€‚ æ ¹æ®éœ€è¦é€‰æ‹©åˆé€‚çš„é¡¹ç›®ç±»åˆ«,è¿™é‡Œé€‰æ‹©çš„<strong>Text  Classificationï¼Œ</strong></p>
<p><strong>å¡«å†™é¡¹ç›®ä¿¡æ¯</strong>ï¼Œä¾‹å¦‚é¡¹ç›®åæƒ…æ„Ÿæ ‡æ³¨ï¼Œç®€ä»‹ã€æ ‡æ³¨ç±»å‹</p>
<p><img loading="lazy" src="img/create_project.png" alt=""  />
</p>
<p>æ ¹æ®éœ€è¦é€‰æ‹©é¡¹ç›®çš„åŠŸèƒ½éœ€æ±‚ï¼Œä¾‹å¦‚å…è®¸å•æ ‡ç­¾ï¼ŒæŠŠæ•°æ®æ‰“ä¹±éšæœºæ˜¾ç¤ºï¼Œ ç”¨æˆ·ä¹‹é—´å…±äº«æ ‡æ³¨</p>
<p><img loading="lazy" src="img/create_project2.png" alt=""  />
</p>
<br>
<h3 id="32-ä¸Šä¼ æ•°æ®">3.2 ä¸Šä¼ æ•°æ®</h3>
<p>åˆ›å»ºé¡¹ç›®åï¼Œç‚¹å‡»<strong>Dataset</strong>æŒ‰é’®ï¼Œç‚¹å‡»<strong>Import dataset</strong>å¯¼å…¥æ•°æ®ã€‚æˆ‘è¿™é‡Œå‡†å¤‡çš„æ˜¯csvæ–‡ä»¶ï¼Œæ‹¥æœ‰reviewå’Œlabelä¸¤ä¸ªå­—æ®µã€‚</p>
<p><img loading="lazy" src="img/import_dataset1.png" alt=""  />
</p>
<p><img loading="lazy" src="img/import_dataset2.png" alt=""  />
</p>
<p><img loading="lazy" src="img/import_dataset3.png" alt=""  />
</p>
<br>
<h3 id="33-å®šä¹‰æ ‡ç­¾">3.3 å®šä¹‰æ ‡ç­¾</h3>
<p>ç‚¹å‡»å·¦ä¾§èœå•ä¸­çš„â€œ<strong>Labels</strong>â€æŒ‰é’®æ¥å®šä¹‰æˆ‘ä»¬çš„æ ‡ç­¾ã€‚ æˆ‘ä»¬åº”è¯¥çœ‹åˆ°æ ‡ç­¾ç¼–è¾‘å™¨é¡µé¢ã€‚ åœ¨æ ‡ç­¾ç¼–è¾‘å™¨é¡µé¢ä¸­ï¼Œæ‚¨å¯ä»¥é€šè¿‡æŒ‡å®šæ ‡ç­¾æ–‡æœ¬ã€å¿«æ·é”®ã€èƒŒæ™¯é¢œè‰²å’Œæ–‡æœ¬é¢œè‰²æ¥åˆ›å»ºæ ‡ç­¾ã€‚</p>
<p><img loading="lazy" src="img/define_labels.png" alt=""  />
</p>
<p><img loading="lazy" src="img/define_labels1.png" alt=""  />
</p>
<p>åŒç†ï¼Œå¯ä»¥å®šä¹‰è´Ÿé¢negæ ‡ç­¾ã€‚ç°åœ¨æœ‰äº†poså’Œnegä¸¤ä¸ªæ ‡ç­¾ã€‚</p>
<p><img loading="lazy" src="img/define_labels3.png" alt=""  />
</p>
<br>
<h3 id="34-æ·»åŠ æˆå‘˜">3.4 æ·»åŠ æˆå‘˜</h3>
<p>ç‚¹å‡»å·¦ä¾§ç›®å½•ä¸­çš„ <code>Members</code> æŒ‰é’®ï¼Œ</p>
<p><img loading="lazy" src="img/select_members.png" alt=""  />
</p>
<p>ç„¶åï¼Œé€‰æ‹©â€œ<strong>Add</strong>â€æŒ‰é’®ä»¥æ˜¾ç¤ºè¡¨å•ã€‚ ä½¿ç”¨æ‚¨è¦æ·»åŠ åˆ°é¡¹ç›®ä¸­çš„ç”¨æˆ·åå’Œè§’è‰²å¡«å†™æ­¤è¡¨å•ã€‚ ç„¶åï¼Œé€‰æ‹©â€œ<strong>Save</strong>â€æŒ‰é’®ã€‚</p>
<p><img loading="lazy" src="img/select_user.png" alt=""  />
</p>
<p>å¦‚æœæ²¡æœ‰å¯ä¾›é€‰æ‹©çš„æˆå‘˜ï¼Œè®°å¾—åˆ›å»ºæˆå‘˜ã€‚å½¢å¦‚<code>doccano createuser --username tom --password pass</code></p>
<br>
<h3 id="35-å¼€å§‹æ ‡æ³¨">3.5 å¼€å§‹æ ‡æ³¨</h3>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å‡†å¤‡æ ‡æ³¨æ–‡æœ¬æ•°æ®ã€‚ åªéœ€ç‚¹å‡»å¯¼èˆªæ ä¸­çš„â€œ<strong>Start annotation</strong>â€æŒ‰é’®ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å¯¹æ–‡æ¡£è¿›è¡Œæ‰¹æ³¨äº†ã€‚</p>
<p><img loading="lazy" src="img/annotation.png" alt=""  />
</p>
<br>
<h3 id="36-å¯¼å‡ºæ•°æ®">3.6 å¯¼å‡ºæ•°æ®</h3>
<p>åœ¨æ³¨é‡Šæ­¥éª¤ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä¸‹è½½æ ‡æ³¨åçš„æ•°æ®ã€‚ è½¬åˆ°â€œ<strong>Dataset</strong>â€é¡µé¢ï¼Œç„¶åå•å‡»â€œæ“ä½œâ€èœå•ä¸­çš„â€œ<strong>Export dataset</strong>â€æŒ‰é’®ã€‚ é€‰æ‹©å¯¼å‡ºæ ¼å¼åï¼Œå•å‡»â€œ<strong>Export</strong>â€ã€‚ æ‚¨åº”è¯¥çœ‹åˆ°ä»¥ä¸‹å±å¹•ï¼š</p>
<p><img loading="lazy" src="img/export_dataset.png" alt=""  />
</p>
<p>åˆ°å‡ºçš„ç»“æœå¦‚ä¸‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;all.csv&#39;</span><span class="p">)</span>
<span class="n">df</span>
</code></pre></div><p><img loading="lazy" src="img/export_dataset2.png" alt=""  />
</p>
<br>
<h3 id="37-å¯¼å‡ºæ•°æ®">3.7 å¯¼å‡ºæ•°æ®</h3>
<p>å¯¹äº†ï¼Œå½“æ ‡æ³¨è¿‡ç¨‹ä¸åŒé˜¶æ®µï¼Œè¿˜çœ‹æŸ¥çœ‹æ ‡æ³¨å·¥ä½œé‡ç­‰å¯è§†åŒ–ä¿¡æ¯</p>
<p><img loading="lazy" src="img/vis.png" alt=""  />
</p>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Rembgåº“ | å¯ä»¥å»æ‰å›¾ç‰‡èƒŒæ™¯çš„</title>
      <link>https://hidadeng.github.io/blog/rembg_remove_background_from_image/</link>
      <pubDate>Wed, 23 Mar 2022 10:43:10 +0600</pubDate>
      
      <guid>/blog/rembg_remove_background_from_image/</guid>
      <description>æœ€è¿‘ä¸€å¹´å¤šï¼Œå¤§é‚“ä¹‹å‰ä¸€ç›´ä½¿ç”¨è‡ªå·±diyçš„æµè§ˆå™¨å¯åŠ¨é¡µ, æœ€åˆæ˜¯è¢«è¯¥å¯åŠ¨é¡µçš„å…³é”®è¯æœç´¢åŠŸèƒ½æ‰€æƒŠè‰³ã€‚ä½†ç”¨ä¹…äº†äººæ€»ä¼šå–œæ–°åŒæ—§ï¼Œä½†æ˜¯æ¯æ¬¡æ‰“å¼€æµè§ˆå™¨ï¼Œå‘ˆç°çš„ç½‘å€é“¾æ¥æ•ˆæœå¤ªç¹æ‚äº†ã€‚è€Œä¸”å¤§å¤šæ•°éƒ½æ˜¯åƒµå°¸é“¾æ¥ï¼Œå¹³å¸¸å¾ˆå°‘ç‚¹å‡»çš„ï¼Œåè€Œå¸¸ç”¨çš„é“¾æ¥éƒ½è®¾ç½®æˆäº†å¿«æ·é”®ã€‚</description>
      <content:encoded><![CDATA[<h2 id="rembg">Rembg</h2>
<p>Rembgå¯ä»¥å»æ‰å›¾ç‰‡ä¸­çš„èƒŒæ™¯ï¼Œæ•ˆæœå¦‚ä¸‹</p>
<p><img loading="lazy" src="clean_bg.png" alt=""  />
</p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<p>CPUç‰ˆ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">pip install rembg
</code></pre></div><p>GPUç‰ˆ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">pip install rembg<span class="o">[</span>gpu<span class="o">]</span>
</code></pre></div><br>
<h2 id="å¿«é€Ÿä¸Šæ‰‹">å¿«é€Ÿä¸Šæ‰‹</h2>
<p>å®‰è£…æˆåŠŸåï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è°ƒåŠ¨Rembgã€‚å¦‚æœåªå¯¹<strong>å•ä¸ªå›¾ç‰‡</strong>è¿›è¡Œå¤„ç†</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">rembg i path/to/input.png path/to/output.png
</code></pre></div><p>å¯¹å¤šä¸ªå›¾ç‰‡æ–‡ä»¶å¤„ç†(æ‰¹å¤„ç†)ï¼Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">rembg p path/to/input path/to/output
</code></pre></div><br>
<h3 id="åœ¨pythonä¸­ä½¿ç”¨">åœ¨Pythonä¸­ä½¿ç”¨</h3>
<p>æŠŠå›¾ç‰‡è¯»å–ä¸ºäºŒè¿›åˆ¶æ•°æ®</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">rembg</span> <span class="kn">import</span> <span class="n">remove</span>

<span class="c1">#å¾…å¤„ç†çš„å›¾ç‰‡è·¯å¾„</span>
<span class="n">input_path</span> <span class="o">=</span> <span class="s1">&#39;input.png&#39;</span>
<span class="c1">#å¤„ç†åå­˜å‚¨çš„å›¾ç‰‡è·¯å¾„</span>
<span class="n">output_path</span> <span class="o">=</span> <span class="s1">&#39;output.png&#39;</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">input_path</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">i</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_path</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">o</span><span class="p">:</span>
        <span class="nb">input</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">remove</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
        <span class="n">o</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</code></pre></div><br>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>ä½¿ç”¨Pythonè®¡ç®—åœ°å›¾ä¸­ä¸¤ç‚¹è·ç¦»åŠæ–¹ä½è§’</title>
      <link>https://hidadeng.github.io/blog/how_to_calculate_geo_distance_in_python/</link>
      <pubDate>Thu, 17 Mar 2022 20:43:10 +0600</pubDate>
      
      <guid>/blog/how_to_calculate_geo_distance_in_python/</guid>
      <description>ä½¿ç”¨Pythonçš„geographiclibåŒ…å¯ä»¥ç”¨æ¥è®¡ç®—åœ°ç†ä¿¡æ¯ï¼Œè¯¸å¦‚ä¸¤åŸå¸‚è·ç¦»ã€æ–¹ä½è§’ç­‰ä¿¡æ¯</description>
      <content:encoded><![CDATA[<p><img loading="lazy" src="img/earth.jpg" alt=""  />
</p>
<br>
<h2 id="ä¸‹è½½æœ¬æ–‡ä»£ç ä½¿ç”¨pythonè®¡ç®—åœ°å›¾ä¸­ä¸¤ç‚¹è·ç¦»åŠæ–¹ä½è§’ipynb"><a href="%E4%BD%BF%E7%94%A8Python%E8%AE%A1%E7%AE%97%E5%9C%B0%E5%9B%BE%E4%B8%AD%E4%B8%A4%E7%82%B9%E8%B7%9D%E7%A6%BB%E5%8F%8A%E6%96%B9%E4%BD%8D%E8%A7%92.ipynb">ä¸‹è½½æœ¬æ–‡ä»£ç </a></h2>
<br>
<h2 id="å¦‚ä½•è®¡ç®—åœ°å›¾ä¸­ä¸¤ç‚¹è·ç¦»åŠè§’åº¦">å¦‚ä½•è®¡ç®—åœ°å›¾ä¸­ä¸¤ç‚¹è·ç¦»åŠè§’åº¦</h2>
<p>ä¾‹å¦‚åŒ—äº¬å¸‚åŒ—çº¬40.1ï¼Œä¸œç»116.6ï¼› å“ˆå°”æ»¨å¸‚åŒ—çº¬45.7567, ä¸œç»126.6424</p>
<p>æ„Ÿå…´è¶£çš„ç«¥é‹ä¹Ÿå¯å»çœ‹é—®é¢˜å‡ºå¤„</p>
<blockquote>
<p><a href="https://stackoverflow.com/questions/3932502/calculate-angle-between-two-latitude-longitude-points/51415608">https://stackoverflow.com/questions/3932502/calculate-angle-between-two-latitude-longitude-points/51415608</a></p>
</blockquote>
<p>åœ¨å›ç­”ä¸­ï¼Œçœ‹åˆ°æœ‰åœ°ç†ä¿¡æ¯ç³»ç»ŸPythonåŒ…geographiclibï¼Œå¯ä»¥è®¡ç®—ä¸¤ç‚¹è·ç¦»å’Œè§’åº¦ã€‚</p>
<br>
<h2 id="å®‰è£…geographiclib">å®‰è£…geographiclib</h2>
<p><a href="https://geographiclib.sourceforge.io/1.52/python/">https://geographiclib.sourceforge.io/1.52/python/</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">geographiclib</span><span class="o">==</span><span class="mf">1.52</span>
</code></pre></div><br>
<h2 id="è®¡ç®—è·ç¦»">è®¡ç®—è·ç¦»</h2>
<p>æ³¨æ„ï¼Œåœ¨æ¥ä¸‹æ¥çš„è®¡ç®—ä¸­ï¼Œå°†åŒ—çº¬ã€ä¸œç»è¡¨ç¤ºä¸ºæ­£æ•°ã€‚å°†å—çº¬ã€è¥¿ç»è¡¨ç¤ºä¸ºè´Ÿæ•°ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">distance</span><span class="p">(</span><span class="n">beiwei1</span><span class="p">,</span> <span class="n">dongjing1</span><span class="p">,</span> <span class="n">beiwei2</span><span class="p">,</span> <span class="n">dongjing2</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    beiwei1: åœ°ç‚¹1çš„çº¬åº¦æ•°ï¼Œå¦‚æœåœ°ç‚¹åœ¨åŒ—åŠçƒï¼ŒåŒ—çº¬ä¸ºæ­£ï¼›åä¹‹ä¸ºè´Ÿã€‚
</span><span class="s2">    dongjing1: åœ°ç‚¹2çš„ç»åº¦æ•°ï¼Œ å¦‚æœä½äºä¸œåŠçƒï¼Œä¸œç»æ•°ä¸ºæ­£ï¼›åä¹‹ä¸ºè´Ÿ
</span><span class="s2">    beiwei2: åœ°ç‚¹2çš„çº¬åº¦æ•°
</span><span class="s2">    dongjing2: åœ°ç‚¹2çš„ç»åº¦æ•°
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="kn">from</span> <span class="nn">geographiclib.geodesic</span> <span class="kn">import</span> <span class="n">Geodesic</span>
    <span class="n">geod</span> <span class="o">=</span> <span class="n">Geodesic</span><span class="o">.</span><span class="n">WGS84</span>
    <span class="n">g</span> <span class="o">=</span> <span class="n">geod</span><span class="o">.</span><span class="n">Inverse</span><span class="p">(</span><span class="n">beiwei1</span><span class="p">,</span> <span class="n">dongjing1</span><span class="p">,</span> <span class="n">beiwei2</span><span class="p">,</span> <span class="n">dongjing2</span><span class="p">)</span>
    <span class="n">distance</span> <span class="o">=</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;s12&#39;</span><span class="p">]</span><span class="o">/</span><span class="mi">1000</span>
    <span class="k">return</span> <span class="n">distance</span>
    

<span class="c1">#åŒ—äº¬Beijingä¸å“ˆå°”æ»¨harbin</span>
<span class="n">distance</span><span class="p">(</span><span class="mf">40.1</span><span class="p">,</span> <span class="mf">116.6</span><span class="p">,</span> <span class="mf">45.7567</span><span class="p">,</span> <span class="mf">126.6424</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<pre><code>1031.617791888516
</code></pre>
<p><img loading="lazy" src="img/%e8%b7%9d%e7%a6%bb.png" alt=""  />
</p>
<br>
<h2 id="æ–¹ä½è§’azimuth">æ–¹ä½è§’azimuth</h2>
<p>ä¸¤ä¸ªåœ°ç‚¹åœ¨åœ°å›¾ä¸­æ‰€å¤„çš„ç›¸å¯¹ä½ç½®ï¼Œç§°ä¹‹ä¸ºæ–¹ä½è§’azimuthã€‚æ–¹ä½è§’æœ€å¤§åº¦æ•°360åº¦ï¼Œ</p>
<ul>
<li>0åº¦è¡¨ç¤ºæ­£åŒ—</li>
<li>90åº¦è¡¨ç¤ºæ­£è¥¿</li>
<li>180åº¦è¡¨ç¤ºæ­£å—</li>
<li>270åº¦è¡¨ç¤ºæ­£è¥¿</li>
<li>360åº¦è¡¨ç¤ºæ­£åŒ—</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">azimuth</span><span class="p">(</span><span class="n">beiwei1</span><span class="p">,</span> <span class="n">dongjing1</span><span class="p">,</span> <span class="n">beiwei2</span><span class="p">,</span> <span class="n">dongjing2</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    beiwei1: åœ°ç‚¹1çš„çº¬åº¦æ•°ï¼Œå¦‚æœåœ°ç‚¹åœ¨åŒ—åŠçƒï¼ŒåŒ—çº¬ä¸ºæ­£ï¼›åä¹‹ä¸ºè´Ÿã€‚
</span><span class="s2">    dongjing1: åœ°ç‚¹2çš„ç»åº¦æ•°ï¼Œ å¦‚æœä½äºä¸œåŠçƒï¼Œä¸œç»æ•°ä¸ºæ­£ï¼›åä¹‹ä¸ºè´Ÿ
</span><span class="s2">    beiwei2: åœ°ç‚¹2çš„çº¬åº¦æ•°
</span><span class="s2">    dongjing2: åœ°ç‚¹2çš„ç»åº¦æ•°
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="kn">from</span> <span class="nn">geographiclib.geodesic</span> <span class="kn">import</span> <span class="n">Geodesic</span>
    <span class="n">geod</span> <span class="o">=</span> <span class="n">Geodesic</span><span class="o">.</span><span class="n">WGS84</span>
    <span class="n">l</span> <span class="o">=</span> <span class="n">geod</span><span class="o">.</span><span class="n">InverseLine</span><span class="p">(</span><span class="n">beiwei1</span><span class="p">,</span> <span class="n">dongjing1</span><span class="p">,</span> <span class="n">beiwei2</span><span class="p">,</span> <span class="n">dongjing2</span><span class="p">)</span>
    <span class="n">s12</span> <span class="o">=</span> <span class="n">distance</span><span class="p">(</span><span class="n">beiwei1</span><span class="p">,</span> <span class="n">dongjing1</span><span class="p">,</span> <span class="n">beiwei2</span><span class="p">,</span> <span class="n">dongjing2</span><span class="p">)</span>
    <span class="n">g</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">Position</span><span class="p">(</span><span class="n">s12</span><span class="p">,</span> <span class="n">Geodesic</span><span class="o">.</span><span class="n">STANDARD</span> <span class="o">|</span> <span class="n">Geodesic</span><span class="o">.</span><span class="n">LONG_UNROLL</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;azi2&#39;</span><span class="p">]</span>

<span class="c1">#åŒ—äº¬ å“ˆå°”æ»¨</span>
<span class="n">azimuth</span><span class="p">(</span><span class="mf">40.1</span><span class="p">,</span> <span class="mf">116.6</span><span class="p">,</span> <span class="mf">45.7567</span><span class="p">,</span> <span class="mf">126.6424</span><span class="p">)</span>
</code></pre></div><pre><code>56.03961942267271
</code></pre>
<p>æŒ‰ç…§azimuthå®šä¹‰ï¼Œ56åº¦çš„è§£è¯»ä¸º å“ˆå°”æ»¨ä½äºåŒ—äº¬çš„ä¸œåŒ—æ–¹å‘ã€‚</p>
<p>åŒç†å¯ä»¥è®¡ç®—è¥¿å®‰ä¸æ­å·</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#è¥¿å®‰ï¼Œ æ­å·</span>
<span class="n">azimuth</span><span class="p">(</span><span class="mf">34.2658</span><span class="p">,</span> <span class="mf">108.9541</span><span class="p">,</span> <span class="mf">30.2741</span><span class="p">,</span> <span class="mf">120.1552</span><span class="p">)</span>
</code></pre></div><pre><code>115.1506923699206
</code></pre>
<p>æ­å·ä½äºè¥¿å®‰çš„115åº¦ï¼Œå³ä¸œå—æ–¹å‘</p>
<br>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>åœ¨Pythonä¸­ä½¿ç”¨Greppoæ„å»ºçš„åœ°ç†ç©ºé—´ä»ªè¡¨æ¿</title>
      <link>https://hidadeng.github.io/blog/geospatial_with_greppo/</link>
      <pubDate>Sat, 12 Mar 2022 20:43:10 +0600</pubDate>
      
      <guid>/blog/geospatial_with_greppo/</guid>
      <description>ç¼ºä¹å‰ç«¯ã€åç«¯å’Œç½‘ç»œå¼€å‘ç»éªŒå¯èƒ½ä¼šé™åˆ¶ä½¿ç”¨ Python åˆ¶ä½œç½‘ç»œåº”ç”¨ç¨‹åºã€‚ åœ¨Pythonä¸­ä½¿ç”¨ Greppoæ„å»ºçš„åœ°ç†ç©ºé—´ä»ªè¡¨æ¿</description>
      <content:encoded><![CDATA[<div style="text-align: center;">
<figure >
    <a href="vector-demo.zip">
        <img src="img/1.gif" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»æœ¬å›¾ä¸‹è½½æœ¬æ–‡é¡¹ç›®ä»£ç </i></small></figcaption>
</figure>
</div>
<h2 id="ä¸‹è½½é¡¹ç›®æ•°æ®ä»£ç vector-demozip"><a href="vector-demo.zip">ä¸‹è½½é¡¹ç›®æ•°æ®ä»£ç </a></h2>
<p><strong>åœ°ç†ç©ºé—´æ•°æ®åˆ†æ</strong>å·²æˆä¸ºæ•°æ®ç§‘å­¦ä¸­çš„ä¸€ä¸ªå¸¸è§é¢†åŸŸã€‚å¯¹äºåœ°ç†ç©ºé—´æ•°æ®ç§‘å­¦æ¥è¯´ä¹Ÿä¸ä¾‹å¤–ã€‚æ”¯æŒ GeoPandasã€Shapely å’Œ Rasterio ç­‰é¡¹ç›®çš„ç¤¾åŒºä½¿ Python æˆä¸ºåœ°ç†ç©ºé—´åˆ†æçš„é¦–é€‰ã€‚</p>
<br>
<h2 id="greppoå¿«é€Ÿç®€å•çš„åœ°ç†ç©ºé—´ä»ªè¡¨æ¿æ„å»ºæ–¹æ³•">Greppoï¼šå¿«é€Ÿç®€å•çš„åœ°ç†ç©ºé—´ä»ªè¡¨æ¿æ„å»ºæ–¹æ³•</h2>
<p>Greppo æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºåœ°ç†ç©ºé—´ç½‘ç»œåº”ç”¨ç¨‹åºçš„å¼€æº Python æ¡†æ¶ã€‚ å®ƒæä¾›äº†å¯éšæ—¶ä½¿ç”¨çš„å‰ç«¯å’Œåç«¯ç»„ä»¶ä½œä¸ºå‡½æ•°ï¼Œå……å½“å‰ç«¯äº¤äº’ç»„ä»¶å’Œç»‘å®šçš„åç«¯å˜é‡ä¹‹é—´çš„ APIã€‚ è¦äº†è§£æœ‰å…³å¿ƒæ™ºæ¨¡å‹çš„æ›´å¤šä¿¡æ¯ï¼Œ<a href="https://docs.greppo.io/mental-model.html">è¯·å‚é˜…æ­¤é¡µé¢</a>ã€‚</p>
<p>æ— éœ€å¤ªå¤šå‰ç«¯ã€åç«¯ã€Web å¼€å‘ç»éªŒï¼Œæ‚¨å°±å¯ä»¥åœ¨ 5 åˆ†é’Ÿå†…ä½¿ç”¨ Python æ„å»ºå’Œéƒ¨ç½²åŠŸèƒ½é½å…¨çš„ Web åº”ç”¨ç¨‹åºã€‚</p>
<ul>
<li>GitHubå­˜å‚¨åº“ï¼šhttps://github.com/greppo-io/greppo</li>
<li>æ–‡æ¡£ï¼šhttps://docs.greppo.io/</li>
<li>ç½‘ç«™ï¼šhttps://greppo.io/</li>
</ul>
<blockquote>
<p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Greppo åœ¨ Python ä¸­æ„å»ºåœ°ç†ç©ºé—´ä»ªè¡¨æ¿ã€‚ æˆ‘ä»¬å°†é€šè¿‡è®¾ç½®ç¯å¢ƒã€å®‰è£…ã€å¯¼å…¥æ•°æ®ã€ä¸ºæˆ‘ä»¬çš„ä»ªè¡¨æ¿æ”¾å…¥ç»„ä»¶å¹¶ä¸ºå…¶æä¾›æœåŠ¡æ¥å·¥ä½œã€‚ æ‚¨å°†éœ€è¦äº†è§£ Pythonã€GeoPandas å’Œåœ°ç†ç©ºé—´åˆ†æçš„åŸºç¡€çŸ¥è¯†ã€‚
å…¥é—¨â€¦</p>
</blockquote>
<p>é¦–å…ˆè¦åšçš„æ˜¯å®‰è£…æœ¬æ–‡éœ€è¦çš„ Python ç¬¬ä¸‰æ–¹åº“ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip install greppo geopandas
</code></pre></div><p>ä¸‹è½½æœ¬æ•™ç¨‹æ‰€éœ€çš„æ•°æ®é›†ã€‚ æœ¬æ•™ç¨‹çš„æ‰€æœ‰æ•°æ®å’Œä»£ç éƒ½å¯ä»¥åœ¨è¿™ä¸ª GitHub å­˜å‚¨åº“ä¸­æ‰¾åˆ°ï¼šgreppo-demo/vector-demoï¼ˆæ•°æ®æºï¼šhttps://github.com/openpolis/geojson-italyï¼‰</p>
<br>
<h2 id="ç¼–å†™ä»ªè¡¨æ¿è„šæœ¬">ç¼–å†™ä»ªè¡¨æ¿è„šæœ¬</h2>
<p>æˆ‘ä»¬é¦–å…ˆä¸ºé¡¹ç›®è®¾ç½®æ–‡ä»¶å¤¹ç»“æ„ã€‚ æˆ‘å°†ä½¿ç”¨ä»¥ä¸‹é¡¹ç›®æ–‡ä»¶å¤¹ç»“æ„ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">â””â”€â”€ vector-demo
    â”œâ”€â”€ app.py
    â”œâ”€â”€ cities.geojson
    â”œâ”€â”€ regions.geojson
    â””â”€â”€ roads.geojson
</code></pre></div><p>è¯¥åº”ç”¨ç¨‹åºçš„ä¸»æ§è„šæœ¬æ˜¯ app.pyã€‚</p>
<br>
<h2 id="step-0å¯åŠ¨æœåŠ¡å™¨">Step 0ï¼šå¯åŠ¨æœåŠ¡å™¨</h2>
<p>å¯åŠ¨æœåŠ¡å™¨ï¼Œè¯·æ‰“å¼€**ç»ˆç«¯ï¼ˆwindowså¯¹åº”çš„æ˜¯å‘½ä»¤è¡Œcmdï¼‰**å¹¶æŒ‰ç…§è¿™äº›è¯´æ˜è¿›è¡Œæ“ä½œã€‚</p>
<p>é¦–å…ˆï¼Œç»ˆç«¯ä¸­æ‰§è¡Œ<code>cd vector_demo</code>å°†å·¥ä½œç›®å½•åˆ‡æ¢ä¸º (cd) é¡¹ç›®æ–‡ä»¶å¤¹ <strong>vector_demo</strong>ã€‚</p>
<p>ç„¶åï¼Œç»ˆç«¯æ‰§è¡Œ<code>greppo serve app.py</code>, å¯åŠ¨æœåŠ¡å™¨ã€‚</p>
<div style="text-align: center;">
<figure >
    
        <img src="img/2.png" width="90%" />
    
    <figcaption><small><i>åœ¨å‘½ä»¤è¡Œä¸­å¯åŠ¨æœåŠ¡å™¨</i></small></figcaption>
</figure>
</div>
<p>ç„¶åï¼Œæ‚¨å°†çœ‹åˆ° Uvicorn æœåŠ¡å™¨åœ¨æŒ‡å®šä½ç½®ï¼ˆç±»ä¼¼äºé“¾æ¥ï¼‰è¿è¡Œã€‚ å¤åˆ¶ç½‘å€é“¾æ¥ï¼Œå¹¶å°†å…¶ç²˜è´´åˆ°æµè§ˆå™¨ä¸­ã€‚ ç„¶åå®ƒå°†åŠ è½½åº”ç”¨ç¨‹åºã€‚ å¦‚æœæ‚¨å¯¹ app.py è¿›è¡Œäº†ä»»ä½•æ›´æ”¹ï¼Œæ‚¨å°†åœ¨æµè§ˆå™¨é¡µé¢ä¸Šçœ‹åˆ°å¯¹æ‚¨çš„åº”ç”¨çš„æ›´æ–°æ›´æ”¹ã€‚</p>
<br>
<h2 id="step-1æ„å»ºåº”ç”¨ç¨‹åºçš„åŸºæœ¬è„šæ‰‹æ¶">Step 1ï¼šæ„å»ºåº”ç”¨ç¨‹åºçš„åŸºæœ¬è„šæ‰‹æ¶ã€‚</h2>
<p>å³å¯¼å…¥ greppo åŒ…ï¼Œå¹¶åœ¨åœ°å›¾ä¸­æ·»åŠ  base_layerã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python">
<span class="kn">from</span> <span class="nn">greppo</span> <span class="kn">import</span> <span class="n">app</span>

<span class="n">app</span><span class="o">.</span><span class="n">base_layer</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&#34;Open Street Map&#34;</span><span class="p">,</span>
    <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">url</span><span class="o">=</span><span class="s2">&#34;https://</span><span class="si">{s}</span><span class="s2">.tile.openstreetmap.org/</span><span class="si">{z}</span><span class="s2">/</span><span class="si">{x}</span><span class="s2">/</span><span class="si">{y}</span><span class="s2">.png&#34;</span><span class="p">,</span>
    <span class="n">subdomains</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">attribution</span><span class="o">=</span><span class="s1">&#39;(C) OpenStreetMap contributors&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">base_layer</span><span class="p">(</span><span class="n">provider</span><span class="o">=</span><span class="s2">&#34;CartoDB Positron&#34;</span><span class="p">)</span>
</code></pre></div><p>æ‚¨éœ€è¦å…ˆä» greppo å¯¼å…¥åº”ç”¨ç¨‹åºã€‚ æ­¤åº”ç”¨ç¨‹åºå¯¹è±¡å°†ç”¨ä½œæ‚¨çš„åº”ç”¨ç¨‹åºå‰ç«¯çš„æ¥å£ï¼Œå¹¶ä¸ºå‰ç«¯å’Œåç«¯ä¹‹é—´çš„ 2 è·¯é€šä¿¡æä¾› APIã€‚</p>
<div style="text-align: center;">
<figure >
    
        <img src="img/3.png" width="90%" />
    
    
</figure>
</div>
<p>è¦å°† base_layer æ·»åŠ åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºåœ°å›¾ï¼Œåªéœ€ä½¿ç”¨å¸¦æœ‰æ‰€éœ€å‚æ•°çš„åº”ç”¨ç¨‹åº API æ–¹æ³• app.base_layer()ã€‚ è¯·<a href="https://docs.greppo.io/">å‚é˜…æ–‡æ¡£</a>ä»¥äº†è§£ä»€ä¹ˆæ˜¯å¿…éœ€çš„å’Œä»€ä¹ˆæ˜¯å¯é€‰çš„ã€‚ base_layer æ–¹æ³•æä¾›äº†ä¸¤ç§æ–¹æ³•æ¥æŒ‡å®šåŸºæœ¬ç“¦ç‰‡å±‚ã€‚ ä¸€ç§æ˜¯ä½¿ç”¨ name å’Œ url å±æ€§ã€‚ å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨æä¾›è€…çš„åç§°ã€‚</p>
<br>
<h2 id="step-2å¯¼å…¥æ•°æ®é›†å¹¶å°†å…¶æ˜¾ç¤ºä¸ºå åŠ å±‚">Step 2ï¼šå¯¼å…¥æ•°æ®é›†å¹¶å°†å…¶æ˜¾ç¤ºä¸ºå åŠ å±‚ã€‚</h2>
<p>ä½¿ç”¨ geopandasï¼Œæˆ‘ä»¬å¯ä»¥å°†çŸ¢é‡æ•°æ®é›†ä½œä¸º GeoDataFrame å¯¼å…¥ã€‚ ç„¶åå¯ä»¥ä½¿ç”¨ app.vector_layer() æ–¹æ³•åœ¨ Web åº”ç”¨ç¨‹åºä¸Šçš„åœ°å›¾ä¸Šå¯¹å…¶è¿›è¡Œå¯è§†åŒ–ã€‚
åœ¨è¿™é‡Œï¼Œæˆ‘è¦å¯¼å…¥ä¸‰ä¸ªä¸åŒçš„æ•°æ®é›†ï¼Œæ¯ä¸ªæ•°æ®é›†éƒ½æœ‰å¤šè¾¹å½¢ï¼ˆæ„å¤§åˆ©ä¸åŒåœ°åŒºçš„è¾¹ç•Œï¼‰ã€çº¿ï¼ˆæ„å¤§åˆ©çš„ä¸»è¦é«˜é€Ÿå…¬è·¯ï¼‰å’Œç‚¹ï¼ˆæ„å¤§åˆ©çš„ä¸»è¦åŸå¸‚ï¼‰ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="kn">from</span> <span class="nn">greppo</span> <span class="kn">import</span> <span class="n">app</span>

<span class="n">regions</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&#34;./regions.geojson&#34;</span><span class="p">)</span>
<span class="n">roads</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&#34;./roads.geojson&#34;</span><span class="p">)</span>
<span class="n">cities</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&#34;./cities.geojson&#34;</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">vector_layer</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">regions</span><span class="p">,</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;Regions of Italy&#34;</span><span class="p">,</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&#34;Polygons showing the boundaries of regions of Italy.&#34;</span><span class="p">,</span>
    <span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;fillColor&#34;</span><span class="p">:</span> <span class="s2">&#34;#4daf4a&#34;</span><span class="p">},</span>
<span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">vector_layer</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">roads</span><span class="p">,</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;Highways in Italy&#34;</span><span class="p">,</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&#34;Lines showing the major highways in Italy.&#34;</span><span class="p">,</span>
    <span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;color&#34;</span><span class="p">:</span> <span class="s2">&#34;#377eb8&#34;</span><span class="p">},</span>
<span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">vector_layer</span><span class="p">(</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">cities</span><span class="p">,</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;Cities of Italy&#34;</span><span class="p">,</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&#34;Points showing the cities in Italy.&#34;</span><span class="p">,</span>
    <span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;color&#34;</span><span class="p">:</span> <span class="s2">&#34;#e41a1c&#34;</span><span class="p">},</span>
    <span class="n">visible</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div><p>ä½¿ç”¨æ–¹æ³• app.vector_layer() ä½œä¸ºå‰ç«¯çš„ APIï¼Œæˆ‘ä»¬å¯ä»¥æ˜¾ç¤ºçŸ¢é‡æ•°æ®ã€‚ æ‚¨éœ€è¦ä¼ å…¥åç§°ï¼Œå…¶ä»–å‚æ•°æ˜¯å¯é€‰çš„ã€‚ è™½ç„¶ï¼Œå°†é¢œè‰²æˆ–å¡«å……é¢œè‰²ä¼ é€’ç»™æ ·å¼æ˜¯åŒºåˆ†å’Œè¯†åˆ«æ¯ä¸€å±‚çš„å¥½ä¹ æƒ¯ã€‚ ç”±äºå‰ç«¯åŸºäº Leafletï¼Œæ‰€æœ‰æ ·å¼éƒ½ç¬¦åˆ Leaflet çš„è§„èŒƒï¼Œå¯ä»¥åœ¨æ–‡æ¡£ä¸­æ‰¾åˆ°ã€‚</p>
<div style="text-align: center;">
<figure >
    
        <img src="img/4.png" width="100%" />
    
    
</figure>
</div>
<p>æ‚¨å¯ä»¥åœ¨æ­¤å¤„æ‰¾åˆ° vector_layer å’Œæ ·å¼çš„æ‰€æœ‰ä¿¡æ¯ã€‚ æ³¨æ„ï¼šæ‚¨ä¹Ÿå¯ä»¥åˆ¶ä½œ Choropleth åœ°å›¾ã€‚ å¯ä»¥åœ¨æ­¤å¤„æ‰¾åˆ°å…¶æ–‡æ¡£ã€‚</p>
<br>
<h2 id="step-3æ˜¾ç¤ºåº”ç”¨å†…æ–‡æœ¬åº”ç”¨æ ‡é¢˜å’Œåº”ç”¨æè¿°">Step 3ï¼šæ˜¾ç¤ºåº”ç”¨å†…æ–‡æœ¬ã€åº”ç”¨æ ‡é¢˜å’Œåº”ç”¨æè¿°</h2>
<p>ä¸ºäº†ä½¿ Web åº”ç”¨ç¨‹åºæœ‰ç”¨ï¼Œå®ƒéœ€è¦æºå¸¦ä¸€äº›æ–‡æœ¬ä»¥å‘å…¶ç”¨æˆ·æä¾›ä¸€äº›æŒ‡å¯¼å’Œä¸Šä¸‹æ–‡ã€‚ è¿™äº›å¯ä»¥æ˜¾ç¤ºåœ¨ç»„ä»¶æ—è¾¹çš„ä¾§è¾¹æ ä¸Šã€‚ ä½¿ç”¨ app.display() æ–¹æ³•å¯ä»¥åœ¨ web-app ä¸Šæ˜¾ç¤ºé™ä»·æ–‡æœ¬ã€‚ ä½¿ç”¨ç›¸åŒçš„æ–¹æ³•ï¼Œå¯ä»¥è®¾ç½®åº”ç”¨ç¨‹åºçš„æ ‡é¢˜å’Œæè¿°ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">greppo</span> <span class="kn">import</span> <span class="n">app</span>

<span class="n">app</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;Vector demo&#39;</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;description&#39;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="s1">&#39;A Greppo demo app for vector data using GeoJSON data.&#39;</span><span class="p">)</span>

<span class="n">text_1</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;
</span><span class="s2">## About the web-app
</span><span class="s2">The dashboard shows the boundaries of the regions of Italy as polygons, 
</span><span class="s2">the major arterial higways as lines and the major cities of each region as points.
</span><span class="s2">&#34;&#34;&#34;</span>

<span class="n">app</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;text-1&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">text_1</span><span class="p">)</span>
</code></pre></div><p>app.display() æ¥å—ä¸¤ä¸ªå‚æ•° name å’Œ value ã€‚ è™½ç„¶ value æ‰¿è½½è¦æ˜¾ç¤ºçš„æ–‡æœ¬ï¼Œä½† name å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œå¹¶å¸¦æœ‰æ–‡æœ¬çš„æ ‡è¯†ç¬¦ã€‚ å¦‚æœ name=&lsquo;title&rsquo; ä¼ é€’çš„å€¼æ˜¯åº”ç”¨ç¨‹åºçš„æ ‡é¢˜ï¼Œå¦‚æœ name=&lsquo;description&rsquo; ä¼ é€’çš„å€¼æ˜¯åº”ç”¨ç¨‹åºçš„æè¿°ã€‚ å¦‚æœæ²¡æœ‰è¿™ä¸¤è€…ä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œè¯¥åº”ç”¨ç¨‹åºå°†å¸¦æœ‰å…¶é»˜è®¤æ ‡é¢˜å’Œæè¿°ã€‚ é¼“åŠ±è®¾ç½®åº”ç”¨ç¨‹åºçš„æ ‡é¢˜å’Œæè¿°ã€‚</p>
<div style="text-align: center;">
<figure >
    
        <img src="img/5.png" width="100%" />
    
    
</figure>
</div>
<br>
<h2 id="step-4å°†æ•°æ®æ˜¾ç¤ºä¸ºå›¾è¡¨">Step 4ï¼šå°†æ•°æ®æ˜¾ç¤ºä¸ºå›¾è¡¨</h2>
<p>æ•°æ®åº”ç”¨ç¨‹åºå‡ ä¹æ²¡æœ‰å°†æ•°æ®æ˜¾ç¤ºä¸ºå›¾è¡¨ã€‚ Greppo è¿˜å…è®¸æ‚¨å°†æ•°æ®æ˜¾ç¤ºä¸ºå›¾è¡¨ã€‚ å¯ä»¥åœ¨æ–‡æ¡£ä¸­æ‰¾åˆ°æœ‰å…³å›¾è¡¨åŠå…¶ç”¨æ³•çš„ä¿¡æ¯ã€‚ è¿™é‡Œï¼Œä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œå±•ç¤ºäº†ä¸€ä¸ªæ¡å½¢å›¾ï¼Œapp.bar_chart()ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">greppo</span> <span class="kn">import</span> <span class="n">app</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

<span class="n">regions</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&#34;./regions.geojson&#34;</span><span class="p">)</span>
<span class="n">roads</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&#34;./roads.geojson&#34;</span><span class="p">)</span>
<span class="n">cities</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&#34;./cities.geojson&#34;</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;text-2&#39;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="s1">&#39;The following displays the count of polygons, lines and points as a barchart.&#39;</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">bar_chart</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Geometry count&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;A bar-cart showing the count of each geometry-type in the datasets.&#39;</span><span class="p">,</span>
              <span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;polygons&#39;</span><span class="p">,</span> <span class="s1">&#39;lines&#39;</span><span class="p">,</span> <span class="s1">&#39;points&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">regions</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">roads</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">cities</span><span class="p">)],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#984ea3&#39;</span><span class="p">)</span>
</code></pre></div><p>å›¾è¡¨æ‰€éœ€çš„å‚æ•°æ˜¯åç§°ã€x å’Œ y å€¼ã€‚ å¯ä»¥æ·»åŠ æè¿°å’Œé¢œè‰²æ¥ä¸ºåº”ç”¨ç¨‹åºç”¨æˆ·æä¾›æ›´å¥½çš„ä¸Šä¸‹æ–‡ã€‚ åç§°å’Œæè¿°ä¸å›¾è¡¨ä¸€èµ·æ˜¾ç¤ºã€‚</p>
<div style="text-align: center;">
<figure >
    
        <img src="img/6.png" width="90%" />
    
    
</figure>
</div>
<br>
<h2 id="ç»“è®º">ç»“è®º</h2>
<p>è®©æˆ‘ä»¬å…¨é¢äº†è§£ä¸€ä¸‹æˆ‘ä»¬åœ¨è¿™é‡Œæ‰€åšçš„äº‹æƒ…ã€‚ æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä½¿ç”¨ Greppo åˆ›å»ºä¸€ä¸ªåœ°ç†ç©ºé—´ web åº”ç”¨ç¨‹åºï¼Œä»¥æ˜¾ç¤ºä¸€äº› GIS çŸ¢é‡æ•°æ®ï¼Œå¹¶æ·»åŠ ç»„ä»¶ä»¥ä¸ºåº”ç”¨ç¨‹åºçš„ç”¨æˆ·æä¾›æ›´å¥½çš„ä¸Šä¸‹æ–‡ã€‚ è¿™æ˜¯è¯¥åº”ç”¨ç¨‹åºçš„å®Œæ•´ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">greppo</span> <span class="kn">import</span> <span class="n">app</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

<span class="n">app</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;Vector demo&#39;</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;description&#39;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="s1">&#39;A Greppo demo app for vector data using GeoJSON data.&#39;</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">base_layer</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&#34;Open Street Map&#34;</span><span class="p">,</span>
    <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">url</span><span class="o">=</span><span class="s2">&#34;https://</span><span class="si">{s}</span><span class="s2">.tile.openstreetmap.org/</span><span class="si">{z}</span><span class="s2">/</span><span class="si">{x}</span><span class="s2">/</span><span class="si">{y}</span><span class="s2">.png&#34;</span><span class="p">,</span>
    <span class="n">subdomains</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">attribution</span><span class="o">=</span><span class="s1">&#39;(C) OpenStreetMap contributors&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">base_layer</span><span class="p">(</span>
    <span class="n">provider</span><span class="o">=</span><span class="s2">&#34;CartoDB Positron&#34;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">regions</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&#34;./regions.geojson&#34;</span><span class="p">)</span>
<span class="n">roads</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&#34;./roads.geojson&#34;</span><span class="p">)</span>
<span class="n">cities</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&#34;./cities.geojson&#34;</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">vector_layer</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">regions</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&#34;Regions of Italy&#34;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&#34;Polygons showing the boundaries of regions of Italy.&#34;</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">&#34;fillColor&#34;</span><span class="p">:</span> <span class="s2">&#34;#4daf4a&#34;</span><span class="p">},</span>
<span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">vector_layer</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">roads</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&#34;Highways in Italy&#34;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&#34;Lines showing the major highways in Italy.&#34;</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">&#34;color&#34;</span><span class="p">:</span> <span class="s2">&#34;#377eb8&#34;</span><span class="p">},</span>
<span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">vector_layer</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">cities</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&#34;Cities of Italy&#34;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&#34;Points showing the cities in Italy.&#34;</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">&#34;color&#34;</span><span class="p">:</span> <span class="s2">&#34;#e41a1c&#34;</span><span class="p">},</span>
    <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">text_1</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;
</span><span class="s2">## About the web-app
</span><span class="s2">
</span><span class="s2">The dashboard shows the boundaries of the regions of Italy as polygons, the 
</span><span class="s2">major arterial higways as lines and the major cities of each region as points.
</span><span class="s2">&#34;&#34;&#34;</span>

<span class="n">app</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;text-1&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">text_1</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;text-2&#39;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="s1">&#39;The following displays the count of polygons, lines and points as a barchart.&#39;</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">bar_chart</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Geometry count&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;A bar-cart showing the count of each geometry-type in the datasets.&#39;</span><span class="p">,</span>
              <span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;polygons&#39;</span><span class="p">,</span> <span class="s1">&#39;lines&#39;</span><span class="p">,</span> <span class="s1">&#39;points&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">regions</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">roads</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">cities</span><span class="p">)],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#984ea3&#39;</span><span class="p">)</span>
</code></pre></div><p>è¿è¡Œæ•ˆæœå¦‚ä¸‹</p>
<div style="text-align: center;">
<figure >
    <a href="vector-demo.zip">
        <img src="img/1.gif" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»æœ¬å›¾ä¸‹è½½æœ¬æ–‡é¡¹ç›®ä»£ç </i></small></figcaption>
</figure>
</div>
<h2 id="ä¸‹è½½é¡¹ç›®æ•°æ®ä»£ç vector-demozip-1"><a href="vector-demo.zip">ä¸‹è½½é¡¹ç›®æ•°æ®ä»£ç </a></h2>
<p><br><br></p>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://textdata.cn/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title></title>
      <link>https://hidadeng.github.io/blog/read_csv_fast_with_pandas/</link>
      <pubDate>Sat, 05 Feb 2022 20:43:10 +0600</pubDate>
      
      <guid>/blog/read_csv_fast_with_pandas/</guid>
      <description>å½“é‡åˆ°ç‰¹åˆ«å¤§çš„csvæ–‡ä»¶ï¼Œä¾‹å¦‚500Mï¼Œpandasè¯»å–ä¼šå¾ˆæ…¢ã€‚æœ¬æ–‡æä¾›äº†æ–°çš„è§£å†³åŠæ³•</description>
      <content:encoded><![CDATA[<h2 id="é—®é¢˜åœºæ™¯">é—®é¢˜åœºæ™¯</h2>
<p>å½“é‡åˆ°ç‰¹åˆ«å¤§çš„csvæ–‡ä»¶ï¼Œä¾‹å¦‚500Mï¼Œpandasè¯»å–ä¼šå¾ˆæ…¢ï¼Œåœ¨ä¹‹å‰æ•™ç¨‹ä¸­è¦ä½¿ç”¨å…¶ä»–åŒ…å¦ç±»çš„è¯­æ³•ã€‚ç°åœ¨åªéœ€æ›´æ–°pandasï¼ŒåŠ ä¸€ä¸ªå‚æ•°å³å¯ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»ï¼š</p>
<ul>
<li>Pandas çš„é»˜è®¤ CSVè¯»æ•°æ®ï¼Œ v1.4 ä¸­å¼•å…¥çš„æ›´å¿«ã€æ›´å¹¶è¡Œçš„ CSVè§£æå™¨ã€‚</li>
<li>ä¸€ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥ä½¿äº‹æƒ…å˜å¾—æ›´å¿«ã€‚</li>
<li>è¯»å– CSVï¼Œé»˜è®¤æ–¹å¼</li>
</ul>
<p>ç¢°å·§æœ‰ä¸€ä¸ª 850MB çš„ CSV æ–‡ä»¶ï¼Œè¿™æ˜¯ä½¿ç”¨ Pandas åŠ è½½å®ƒçš„é»˜è®¤æ–¹å¼ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">## æ›´æ–°pandas</span>
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pandas</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&#34;large.csv&#34;</span><span class="p">)</span>
</code></pre></div><p>ä¸‹é¢æ˜¯<strong>æ—§çš„pandasç‰ˆæœ¬</strong>ä»£ç è¯»æ•°æ®æ‰€æ¶ˆè€—æ—¶é—´</p>
<p>0m13.245s</p>
<br>
<h2 id="ä½¿ç”¨pyarrowè¯»csv">ä½¿ç”¨pyarrowè¯»csv</h2>
<p>2022å¹´1æœˆä»½ï¼Œåˆšåˆšå‘å¸ƒçš„pandas1.4ç‰ˆæœ¬å¢åŠ äº†arrowåº“çš„csvè§£æå™¨ã€‚å¯¹äº†ï¼Œè¯¥åŠŸèƒ½ä»ç„¶å¤„äºè¯•éªŒé˜¶æ®µï¼Œä¸æ˜¯é»˜è®¤è§£æå™¨ï¼Œä½†æ˜¯è¶³å¤Ÿå¿«ã€‚ä¸‹é¢æ˜¯æ–°ç‰ˆæœ¬ç”¨æ³•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&#34;large.csv&#34;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&#34;pyarrow&#34;</span><span class="p">)</span>
</code></pre></div><p>æ–°ç‰ˆæœ¬ä»£ç è¯»æ•°æ®æ‰€æ¶ˆè€—æ—¶é—´</p>
<p>0m6.507s</p>
<table>
<thead>
<tr>
<th>CSVè§£æå™¨</th>
<th>CPUè¿è¡Œæ—¶é—´</th>
</tr>
</thead>
<tbody>
<tr>
<td>é»˜è®¤C</td>
<td>13.2s</td>
</tr>
<tr>
<td>PyArrow</td>
<td>6.5s</td>
</tr>
</tbody>
</table>
<p>éœ€è¦æ³¨æ„ï¼Œå¦‚æœä½ çš„æ•°æ®åˆ†æé¡¹ç›®å·²ç»ä½¿ç”¨äº†å¹¶è¡ŒåŠ é€Ÿæ•°æ®çš„è¯»å–ï¼Œé‚£ä¹ˆä»Šå¤©çš„æ–°æ•™ç¨‹ï¼ˆpyarrowï¼‰å¹¶ä¸ä¼šç‰¹åˆ«æ˜¾è‘—æ”¹å–„ä»£ç è¿è¡Œé€Ÿåº¦ï¼ˆåå‡ å€åŠ é€Ÿï¼‰ï¼Œä½†è‡³å°‘å¯èƒ½æä¾›æœ‰æ„ä¹‰çš„åŠ é€Ÿï¼ˆä¸€å€å·¦å³ï¼‰ã€‚</p>
<br>
<h2 id="é‡æ–°æ€è€ƒ">é‡æ–°æ€è€ƒ</h2>
<p>åŠ è½½ CSV åŸºæœ¬ä¸Šæ˜¯ä¸€é¡¹ç¹é‡çš„å·¥ä½œï¼š</p>
<ul>
<li>éœ€è¦åˆ†æˆå‡ è¡Œã€‚</li>
<li>éœ€è¦ç”¨é€—å·åˆ†éš”æ¯ä¸€è¡Œã€‚</li>
<li>éœ€è¦å¤„ç†å­—ç¬¦ä¸²å¼•ç”¨ã€‚</li>
<li>éœ€è¦çŒœæµ‹ï¼ˆï¼ï¼‰åˆ—çš„ç±»å‹ï¼Œé™¤éæ‚¨æ˜ç¡®åœ°å°†å®ƒä»¬ä¼ é€’ç»™ Pandasã€‚</li>
<li>éœ€è¦å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°ã€æ—¥æœŸå’Œå…¶ä»–éå­—ç¬¦ä¸²ç±»å‹ã€‚</li>
</ul>
<p>æ‰€æœ‰è¿™äº›éƒ½éœ€è¦ CPU æ—¶é—´ã€‚</p>
<p>å¦‚æœæ‚¨ä»ç¬¬ä¸‰æ–¹è·å– CSVï¼Œå¹¶ä¸”åªå¤„ç†ä¸€æ¬¡ï¼Œé‚£ä¹ˆæ‚¨å¯¹æ­¤æ— èƒ½ä¸ºåŠ›ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨å¤šæ¬¡åŠ è½½åŒä¸€ä¸ª CSV æ–‡ä»¶æ€ä¹ˆåŠï¼Ÿæˆ–è€…ï¼Œå¦‚æœæ‚¨æ˜¯åœ¨æ•°æ®å¤„ç†ç®¡é“çš„å…¶ä»–éƒ¨åˆ†ç”Ÿæˆè¾“å…¥æ–‡ä»¶çš„äººï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ</p>
<p>æ‚¨å¯ä»¥è¯»å–å…¶ä»–ä¸€äº›å¤„ç†é€Ÿåº¦æ›´å¿«çš„æ–‡ä»¶æ ¼å¼ï¼Œè€Œä¸æ˜¯è¯»å– CSVã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼Œä½¿ç”¨ Parquet æ•°æ®æ ¼å¼ã€‚ Parquet æ–‡ä»¶æ—¨åœ¨å¿«é€Ÿè¯»å–ï¼šæ‚¨ä¸å¿…åƒä½¿ç”¨ CSV é‚£æ ·è¿›è¡Œå¤§é‡è§£æã€‚ä¸ CSV ä¸åŒï¼Œå…¶ä¸­åˆ—ç±»å‹åœ¨æ–‡ä»¶è¯»å–æ—¶æ— éœ€ç¼–ç ï¼Œåœ¨ Parquet ä¸­ï¼Œåˆ—çš„ç±»å‹å­˜å‚¨åœ¨å®é™…æ–‡ä»¶ä¸­ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å°† CSV æ–‡ä»¶è½¬æ¢ä¸º Parquet æ–‡ä»¶ï¼›æˆ‘ä»¬ç¦ç”¨å‹ç¼©ï¼Œå› æ­¤æˆ‘ä»¬æ­£åœ¨ä¸ CSV è¿›è¡Œæ›´å¤šçš„è‹¹æœå¯¹è‹¹æœçš„æ¯”è¾ƒã€‚å½“ç„¶ï¼Œå¦‚æœæ‚¨æ˜¯ç¬¬ä¸€ä¸ªç”Ÿæˆæ–‡ä»¶çš„äººï¼Œåˆ™ä¸éœ€è¦è½¬æ¢æ­¥éª¤ï¼Œæ‚¨å¯ä»¥ç›´æ¥å°†æ•°æ®å†™å…¥ Parquetã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&#34;large.csv&#34;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="s2">&#34;large.parquet&#34;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div><p>ç°åœ¨æˆ‘ä»¬çš„æ•°æ®å­˜åœ¨äºlarge.parquetä¸­ï¼Œå†è¯»å–large.parquetçœ‹çœ‹è¯»å–æ—¶é—´</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&#34;large.parquet&#34;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&#34;fastparquet&#34;</span><span class="p">)</span>
</code></pre></div><p>2.441s</p>
<table>
<thead>
<tr>
<th>CSVè§£æå™¨</th>
<th>CPUè¿è¡Œæ—¶é—´</th>
</tr>
</thead>
<tbody>
<tr>
<td>é»˜è®¤C</td>
<td>13.2s</td>
</tr>
<tr>
<td>PyArrow</td>
<td>6.5s</td>
</tr>
<tr>
<td>fastparquet</td>
<td>2.4s</td>
</tr>
</tbody>
</table>
<br>
<p>çº¯ç²¹ç”± CPU è¡¡é‡ï¼Œfastparquet æ˜¯è¿„ä»Šä¸ºæ­¢æœ€å¿«çš„ã€‚  è¿™åªæ˜¯ä¸€ä¸ªä¾‹å­ã€‚ ä½†æ˜¾ç„¶é˜…è¯» Parquet æ ¼å¼çš„æ•ˆç‡è¦é«˜å¾—å¤šã€‚</p>
<br>
<h2 id="æœ€å¥½çš„æ–‡ä»¶æ ¼å¼ä¸æ˜¯-csv">æœ€å¥½çš„æ–‡ä»¶æ ¼å¼ä¸æ˜¯ CSV</h2>
<p>CSV æ˜¯ä¸€ç§ç³Ÿç³•çš„æ ¼å¼ã€‚ é™¤äº†è§£ææ•ˆç‡ä½ä¸‹ä¹‹å¤–ï¼Œç¼ºå°‘ç±»å‹æ•°æ®æ„å‘³ç€è§£ææ€»æ˜¯æ¯”å…·æœ‰å®é™…åˆ—ç±»å‹çš„ç»“æ„åŒ–æ–‡ä»¶æ ¼å¼æ›´å®¹æ˜“å‡ºé”™å’Œæ¨¡æ£±ä¸¤å¯ã€‚ å› æ­¤ï¼Œå¦‚æœå¯ä»¥ï¼Œè¯·é¿å…ä½¿ç”¨ CSV å¹¶ä½¿ç”¨æ›´å¥½çš„æ ¼å¼ï¼Œå°½é‡é€‰æ‹©å…¶ä»–é«˜æ•ˆç±»å‹ï¼Œå¦‚ Parquetã€‚</p>
<p>å¦‚æœä½ è¢« CSV å¡ä½äº†ï¼Œè€ƒè™‘åœ¨ Pandas 1.4 ä¸­ä½¿ç”¨æ–°çš„ PyArrow CSV è§£æå™¨ï¼› ä½ ä¼šå¾—åˆ°å¾ˆå¥½çš„åŠ é€Ÿï¼Œç‰¹åˆ«æ˜¯å¦‚æœä½ çš„ç¨‹åºå½“å‰æ²¡æœ‰åˆ©ç”¨å¤šä¸ª CPUã€‚</p>
<br>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Hitomi|ä¸‹è½½å›¾åƒ/è§†é¢‘/éŸ³ä¹/æ–‡æœ¬ç­‰çš„æ¡Œé¢å®ç”¨ç¨‹åº</title>
      <link>https://hidadeng.github.io/blog/hitomi_downloader/</link>
      <pubDate>Sat, 15 Jan 2022 13:50:10 +0600</pubDate>
      
      <guid>/blog/hitomi_downloader/</guid>
      <description>ä»å„ç§ç½‘ç«™ä¸‹è½½å›¾åƒ/è§†é¢‘/éŸ³ä¹/æ–‡æœ¬ç­‰çš„æ¡Œé¢å®ç”¨ç¨‹åº</description>
      <content:encoded><![CDATA[<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="90%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<br>
<p>ç”¨äºä»å„ç§ç½‘ç«™ä¸‹è½½å›¾åƒ/è§†é¢‘/éŸ³ä¹/æ–‡æœ¬ç­‰çš„æ¡Œé¢å®ç”¨ç¨‹åºã€‚</p>
<p><img loading="lazy" src="img/card_crop.png" alt=""  />
</p>
<br>
<h2 id="ä¸‹è½½å®‰è£…">ä¸‹è½½å®‰è£…</h2>
<p><strong>Appç‰ˆ</strong>ï¼Œä»…æ”¯æŒWin</p>
<p><a href="https://github.com/KurtBestor/Hitomi-Downloader/releases/tag/v3.7h">https://github.com/KurtBestor/Hitomi-Downloader/releases/tag/v3.7h</a>
<br>
<strong>Chromeæµè§ˆå™¨æ’ä»¶</strong></p>
<p><a href="https://github.com/KurtBestor/Hitomi-Downloader/wiki/Chrome-Extension">https://github.com/KurtBestor/Hitomi-Downloader/wiki/Chrome-Extension</a></p>
<br>
<h2 id="æ“ä½œæ¼”ç¤º">æ“ä½œæ¼”ç¤º</h2>
<p><img loading="lazy" src="img/how_to_download.gif" alt=""  />
</p>
<br>
<h2 id="åŠŸèƒ½ç‰¹è‰²">åŠŸèƒ½ç‰¹è‰²</h2>
<ul>
<li>ğŸ° ç®€æ´ç”¨æˆ·æ¥å£</li>
<li>ğŸš€ åŠ é€Ÿä¸‹è½½</li>
<li>ğŸ“œ æ”¯æŒç”¨æˆ·diyè„šæœ¬</li>
<li>ğŸ§² æ”¯æŒBitTorrent &amp; Magnet</li>
<li>ğŸï¸ æ”¯æŒ M3U8 &amp; MPD æ ¼å¼è§†é¢‘ä¸‹è½½</li>
</ul>
<br>
<h2 id="æ”¯æŒçš„ç«™ç‚¹sites">æ”¯æŒçš„ç«™ç‚¹Sites</h2>
<table>
<thead>
<tr>
<th style="text-align:center">Site</th>
<th>URL</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>AfreecaTV</strong></td>
<td><a href="https://afreecatv.com">https://afreecatv.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>ArtStation</strong></td>
<td><a href="https://artstation.com">https://artstation.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>AsianSister</strong></td>
<td><a href="https://asiansister.com">https://asiansister.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>AsmHentai</strong></td>
<td><a href="https://asmhentai.com">https://asmhentai.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Avgle</strong></td>
<td><a href="https://avgle.com">https://avgle.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>baraag.net</strong></td>
<td><a href="https://baraag.net">https://baraag.net</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>åŠæ¬¡å…ƒ</strong></td>
<td><a href="https://bcy.net">https://bcy.net</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>BDSMlr</strong></td>
<td><a href="https://bdsmlr.com">https://bdsmlr.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>bilibili</strong></td>
<td><a href="https://bilibili.com">https://bilibili.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>ComicWalker</strong></td>
<td><a href="https://comic-walker.com">https://comic-walker.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Coub</strong></td>
<td><a href="https://coub.com">https://coub.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Danbooru</strong></td>
<td><a href="https://danbooru.donmai.us">https://danbooru.donmai.us</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Kakao Webtoon</strong></td>
<td><a href="http://webtoon.kakao.com">http://webtoon.kakao.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>DeviantArt</strong></td>
<td><a href="https://deviantart.com">https://deviantart.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>E(x)Hentai Galleries</strong></td>
<td><a href="https://e-hentai.org">https://e-hentai.org</a><br><a href="https://exhentai.org">https://exhentai.org</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Facebook</strong></td>
<td><a href="https://facebook.com">https://facebook.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>FC2 Video</strong></td>
<td><a href="https://video.fc2.com">https://video.fc2.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Flickr</strong></td>
<td><a href="https://flickr.com">https://flickr.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Gelbooru</strong></td>
<td><a href="https://gelbooru.com">https://gelbooru.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Hameln</strong></td>
<td><a href="https://syosetu.org">https://syosetu.org</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>hanime.tv</strong></td>
<td><a href="https://hanime.tv">https://hanime.tv</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Hentai Foundry</strong></td>
<td><a href="https://hentai-foundry.com">https://hentai-foundry.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Hitomi.la</strong></td>
<td><a href="https://hitomi.la">https://hitomi.la</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Hiyobi.me</strong></td>
<td><a href="https://hiyobi.me">https://hiyobi.me</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Imgur</strong></td>
<td><a href="https://imgur.com">https://imgur.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Instagram</strong></td>
<td><a href="https://instagram.com">https://instagram.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Iwara</strong></td>
<td><a href="https://iwara.tv">https://iwara.tv</a><br><a href="https://ecchi.iwara.tv">https://ecchi.iwara.tv</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Jmana</strong></td>
<td><a href="https://jmana.net">https://jmana.net</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>ã‚«ã‚¯ãƒ¨ãƒ </strong></td>
<td><a href="https://kakuyomu.jp">https://kakuyomu.jp</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>LHScan</strong></td>
<td><a href="https://loveheaven.net">https://loveheaven.net</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Likee</strong></td>
<td><a href="https://likee.video">https://likee.video</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Luscious</strong></td>
<td><a href="https://luscious.net">https://luscious.net</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>MyReadingManga</strong></td>
<td><a href="https://myreadingmanga.info">https://myreadingmanga.info</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Naver Blog</strong></td>
<td><a href="https://blog.naver.com">https://blog.naver.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Naver Post</strong></td>
<td><a href="https://post.naver.com">https://post.naver.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Naver Webtoon</strong></td>
<td><a href="https://comic.naver.com">https://comic.naver.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Naver TV</strong></td>
<td><a href="https://tv.naver.com">https://tv.naver.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>nhentai</strong></td>
<td><a href="https://nhentai.net">https://nhentai.net</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>nhentai.com</strong></td>
<td><a href="https://nhentai.com">https://nhentai.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Niconico</strong></td>
<td><a href="http://nicovideo.jp">http://nicovideo.jp</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>ãƒ‹ã‚¸ã‚¨</strong></td>
<td><a href="https://nijie.info">https://nijie.info</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Pawoo</strong></td>
<td><a href="https://pawoo.net">https://pawoo.net</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Pinterest</strong></td>
<td><a href="https://pinterest.com">https://pinterest.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Pixiv</strong></td>
<td><a href="https://pixiv.net">https://pixiv.net</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>pixivã‚³ãƒŸãƒƒã‚¯</strong></td>
<td><a href="https://comic.pixiv.net">https://comic.pixiv.net</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Pornhub</strong></td>
<td><a href="https://pornhub.com">https://pornhub.com</a><br><a href="https://pornhubpremium.com">https://pornhubpremium.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Rule34.xxx</strong></td>
<td><a href="https://rule34.xxx">https://rule34.xxx</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Sankaku Complex</strong></td>
<td><a href="https://www.sankakucomplex.com">https://www.sankakucomplex.com</a><br><a href="https://chan.sankakucomplex.com">https://chan.sankakucomplex.com</a><br><a href="https://idol.sankakucomplex.com">https://idol.sankakucomplex.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Soundcloud</strong></td>
<td><a href="https://soundcloud.com">https://soundcloud.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>å°èª¬å®¶ã«ãªã‚ã†</strong></td>
<td><a href="https://syosetu.com">https://syosetu.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>TOKYO Motion</strong></td>
<td><a href="https://tokyomotion.net">https://tokyomotion.net</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Tumblr</strong></td>
<td><a href="https://tumblr.com">https://tumblr.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Twitch</strong></td>
<td><a href="https://twitch.tv">https://twitch.tv</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Twitter</strong></td>
<td><a href="https://twitter.com">https://twitter.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Vimeo</strong></td>
<td><a href="https://vimeo.com">https://vimeo.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>V LIVE</strong></td>
<td><a href="https://vlive.tv">https://vlive.tv</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Weibo</strong></td>
<td><a href="https://weibo.com">https://weibo.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>WikiArt</strong></td>
<td><a href="https://www.wikiart.org">https://www.wikiart.org</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>xHamster</strong></td>
<td><a href="https://xhamster.com">https://xhamster.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>XNXX</strong></td>
<td><a href="https://xnxx.com">https://xnxx.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>XVideos</strong></td>
<td><a href="https://xvideos.com">https://xvideos.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Yande.re</strong></td>
<td><a href="https://yande.re">https://yande.re</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>Youku</strong></td>
<td><a href="https://youku.com">https://youku.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>YouTube</strong></td>
<td><a href="https://youtube.com">https://youtube.com</a></td>
</tr>
<tr>
<td style="text-align:center"><strong>and more&hellip;</strong></td>
<td>[Supported sites by youtube-dl](<a href="http://ytdl-org.github.io/youtube-dl/supportedsites.html">http://ytdl-org.github.io/youtube-dl/supportedsites.html</a></td>
</tr>
</tbody>
</table>
<br>
<h2 id="æ•°æ®æŒ–æ˜è¯¾">æ•°æ®æŒ–æ˜è¯¾</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://textdata.cn/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>pychorus | 3è¡Œä»£ç æå–éŸ³ä¹é«˜æ½®éƒ¨åˆ†</title>
      <link>https://hidadeng.github.io/blog/pychorus/</link>
      <pubDate>Thu, 13 Jan 2022 13:50:10 +0600</pubDate>
      
      <guid>/blog/pychorus/</guid>
      <description>æå–éŸ³ä¹é«˜æ½®éƒ¨åˆ†</description>
      <content:encoded><![CDATA[<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="90%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<br>
<blockquote>
<p>src: <a href="https://mp.weixin.qq.com/s/irYCS5gQVNu9vidqMy-WJA">https://mp.weixin.qq.com/s/irYCS5gQVNu9vidqMy-WJA</a></p>
</blockquote>
<p>æœ‰äº›æ—¶å€™ï¼Œä¸ºäº†è®¾å®šæ‰‹æœºé“ƒå£°æˆ–è€…å‘æŠ–éŸ³è§†é¢‘ï¼Œæˆ‘ä»¬ä¼šè€—è´¹å¤§é‡æ—¶é—´åœ¨å‰ªè¾‘éŸ³ä¹é«˜æ½®éƒ¨åˆ†ä¸Šã€‚é‚£ä¹ˆè¿™ä¸ªéŸ³ä¹é«˜æ½®çš„æå–èƒ½ä¸èƒ½è‡ªåŠ¨åŒ–å‘¢ï¼Ÿå½“ç„¶å¯ä»¥ã€‚</p>
<p>å…ˆæ¥å¬å¬æ•ˆæœï¼Œå­¤èŠ³è‡ªèµæå–é«˜æ½®åçš„éƒ¨åˆ†ï¼š</p>
<p>æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯è¿«ä¸åŠå¾…æƒ³å¾€ä¸‹è¯»äº†ï¼Ÿä¸è¦æ€¥ï¼Œè®©æˆ‘ä»¬ä»åŸç†å¼€å§‹æ…¢æ…¢è®²èµ·ã€‚</p>
<br>
<h2 id="åŸç†ç®€ä»‹">åŸç†ç®€ä»‹</h2>
<p>ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰è¿™æ ·çš„ä½“ä¼šï¼Œå¤§éƒ¨åˆ†æ—¶å€™ï¼Œæ­Œæ›²çš„é«˜æ½®éƒ¨åˆ†é€šå¸¸æ˜¯é‡å¤æ¬¡æ•°æœ€å¤šçš„éƒ¨åˆ†ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™ä¸€ä¸ªç‰¹å¾ï¼Œæå‡ºæˆ‘ä»¬çš„ç®—æ³•ï¼š</p>
<ol>
<li>éå†æ•´é¦–æ­Œæ›²ã€‚</li>
<li>å°†é€‰å®šé•¿åº¦çš„éƒ¨åˆ†ä¸å…¶ä»–éƒ¨åˆ†æ¯”è¾ƒå¹¶è®¡ç®—ç›¸ä¼¼åº¦ï¼Œä»¥æŸ¥çœ‹æ˜¯å¦é‡å¤ã€‚</li>
<li>å¯»æ‰¾é‡å¤æ¬¡æ•°è¾ƒå¤§ã€ä¸”é—´éš”é•¿çš„ç‰‡æ®µã€‚</li>
</ol>
<br>
<h2 id="ä»£ç ç¼–å†™">ä»£ç ç¼–å†™</h2>
<p>ä¸ºäº†é¿å…é€ è½®å­ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†åˆ«äººå·²ç»åšè¿‡çš„ç±»ä¼¼çš„é¡¹ç›®ï¼šhttps://github.com/vivjay30/pychorus</p>
<p>æˆ‘ä»¬åªéœ€è¦åˆ†æè¿™ä¸ªæºä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå³æ±‚ç›¸ä¼¼åŒºæ®µçš„æºä»£ç ï¼Œå°±èƒ½çŸ¥é“å®ƒæ˜¯ä¸æ˜¯ç¬¦åˆæˆ‘ä»¬çš„é¡¹ç›®éœ€æ±‚äº†ï¼š</p>
<p><img loading="lazy" src="img/pychorus.png" alt=""  />
</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™éƒ¨åˆ†ä»£ç å°±æ˜¯åšäº†æˆ‘ä»¬ç®—æ³•çš„ç¬¬äºŒæ­¥ï¼Œè¿›è¡Œäº†ç‰‡æ®µä¸ç‰‡æ®µä¹‹é—´çš„ç›¸ä¼¼åº¦è®¡ç®—ã€‚æ£€æµ‹æ—¶ç”¨åˆ°çš„ç›¸ä¼¼å‡½æ•°æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img loading="lazy" src="img/formula.png" alt=""  />
</p>
<p>è¿™ä¸»è¦æ˜¯å› ä¸ºæ­Œæ›²ç”±12ä¸ªåŸºæœ¬éŸ³ç¬¦çš„å¸§çš„é›†åˆè€Œç»„æˆï¼Œv1å’Œv2æ˜¯ä»»æ„ä¸¤æ®µéŸ³ä¹çš„éŸ³ç¬¦çŸ¢é‡ï¼Œå¦‚æœè¯´ä¸¤æ®µéŸ³ä¹éå¸¸ç›¸ä¼¼ï¼Œé‚£ä¹ˆå³è¾¹çš„å¼å­å°†æ¥è¿‘äº0. <strong>å¦‚æœè¯´ 1-å³è¾¹çš„å¼å­ å¾—åˆ†éå¸¸é«˜ï¼Œåˆ™è¯´æ˜ä¸¤æ®µéŸ³ä¹éå¸¸ç›¸ä¼¼</strong>ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹æ€ä¹ˆä½¿ç”¨è¿™ä¸ªé¡¹ç›®æ±‚éŸ³ä¹é«˜æ½®éƒ¨åˆ†ï¼Œå…¶å®éå¸¸ç®€å•ã€‚</p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip3 install pychorus
</code></pre></div><br>
<h2 id="ç¼–å†™ä»£ç ">ç¼–å†™ä»£ç </h2>
<p>å®é™…ä¸Šï¼Œè¿™ä¸ªåŒ…ç”¨èµ·æ¥å¯æ˜¯ç›¸å½“ç®€å•ï¼Œå¦‚æœæˆ‘ä»¬åªæ˜¯æƒ³å•çº¯æå–æ­Œæ›²é«˜æ½®éƒ¨åˆ†ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pychorus</span> <span class="kn">import</span> <span class="n">find_and_output_chorus</span>

<span class="n">chorus_start_sec</span> <span class="o">=</span> <span class="n">find_and_output_chorus</span><span class="p">(</span><span class="s2">&#34;ä½ çš„éŸ³ä¹æ–‡ä»¶&#34;</span><span class="p">,</span> <span class="s2">&#34;æå–ç»“æœçš„ç›®æ ‡è·¯å¾„&#34;</span><span class="p">,</span> <span class="n">è¦å¤šå°‘ç§’çš„é«˜æ½®éƒ¨åˆ†</span><span class="p">)</span>
</code></pre></div><p>æ²¡é”™ï¼Œä¸¤è¡Œä»£ç å°±è§£å†³äº†ã€‚å¦‚æœä½ æƒ³çŸ¥é“ä¸€äº›è¯¦ç»†çš„ç»†èŠ‚ï¼Œæ¯”å¦‚è¯´è¾“å‡ºç›¸ä¼¼çŸ©é˜µæˆ–è€…ç»“æœå¯è§†åŒ–ï¼Œå»ºè®®é˜…è¯»githubä¸­è¯¥é¡¹ç›®çš„æ“ä½œæŒ‡ä»¤ã€‚ä¸‹é¢è®©æˆ‘ä»¬æ£€éªŒä¸€ä¸‹æ•ˆæœã€‚</p>
<br>
<h2 id="æ•ˆæœæ£€éªŒ">æ•ˆæœæ£€éªŒ</h2>
<p>ä»¥ã€Šå­¤èŠ³è‡ªèµã€‹ ä¸ºä¾‹ï¼Œè®©æˆ‘ä»¬è¯•è¯•è¿™ä¸ªæå–å™¨çš„åŠŸåŠ›ã€‚</p>
<p>åŸæ›²ï¼š</p>
<p>ç¼–å†™ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># æå–éŸ³ä¹é«˜æ½®éƒ¨åˆ†</span>
<span class="kn">from</span> <span class="nn">pychorus</span> <span class="kn">import</span> <span class="n">find_and_output_chorus</span>

<span class="n">input_file</span> <span class="o">=</span> <span class="s2">&#34;å­¤èŠ³è‡ªèµ.mp3&#34;</span>
<span class="n">output_file</span> <span class="o">=</span> <span class="s2">&#34;å­¤èŠ³è‡ªèµ_high.wav&#34;</span>
<span class="n">clip_length</span><span class="o">=</span><span class="mi">40</span>
<span class="n">chorus_start_sec</span> <span class="o">=</span> <span class="n">find_and_output_chorus</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">clip_length</span><span class="p">)</span>
</code></pre></div><br>
<h2 id="æ•°æ®æŒ–æ˜è¯¾">æ•°æ®æŒ–æ˜è¯¾</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://textdata.cn/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Imageio | è¯»å–å’Œå†™å…¥å›¾åƒæ•°æ®çš„Pythonåº“</title>
      <link>https://hidadeng.github.io/blog/imageio/</link>
      <pubDate>Thu, 13 Jan 2022 12:50:10 +0600</pubDate>
      
      <guid>/blog/imageio/</guid>
      <description>ç”¨äºè¯»å–å’Œå†™å…¥å›¾åƒæ•°æ®çš„ Python åº“</description>
      <content:encoded><![CDATA[<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="90%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<br>
<p>ç”¨äºè¯»å–å’Œå†™å…¥å›¾åƒæ•°æ®çš„ Python åº“ï¼›</p>
<p>Imageio æä¾›äº†ä¸€ç³»åˆ— <a href="https://imageio.readthedocs.io/en/stable/getting_started/standardimages.html">example images</a>ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ &lsquo;&lsquo;imageio:chelsea.png&rsquo;&rsquo; ä¹‹ç±»çš„ URI æ¥ä½¿ç”¨ã€‚ å¦‚æœæ‚¨çš„ç³»ç»Ÿä¸Šå°šä¸å­˜åœ¨è¿™äº›å›¾åƒï¼Œåˆ™ä¼šè‡ªåŠ¨ä¸‹è½½è¿™äº›å›¾åƒã€‚ å› æ­¤ï¼Œä¸‹é¢çš„å¤§å¤šæ•°ç¤ºä¾‹åº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œã€‚</p>
<br>
<h2 id="è¯»å–å›¾ç‰‡">è¯»å–å›¾ç‰‡</h2>
<p>æœ€å¸¸ç”¨çš„è¯»å–å›¾ç‰‡åŠŸèƒ½</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">imageio</span> <span class="k">as</span> <span class="nn">iio</span>

<span class="n">im</span> <span class="o">=</span> <span class="n">iio</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;imageio:chelsea.png&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">im</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</code></pre></div><p>å¦‚æœå›¾ç‰‡æ–‡ä»¶æ˜¯gifåŠ¨å›¾(gifæ˜¯ç”±å¤šä¸ªé™æ€å›¾ç‰‡ç»„æˆçš„åŠ¨å›¾)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">imageio</span> <span class="k">as</span> <span class="nn">iio</span>

<span class="n">im</span> <span class="o">=</span> <span class="n">iio</span><span class="o">.</span><span class="n">get_reader</span><span class="p">(</span><span class="s1">&#39;cat.gif&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">frame</span> <span class="ow">in</span> <span class="n">im</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>  <span class="c1"># Each frame is a numpy matrix</span>
</code></pre></div><p>å¦‚æœgifå­˜å‚¨äºå†…å­˜ä¸­ï¼ˆäºŒè¿›åˆ¶æ•°ï¼‰</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">imageio</span> <span class="k">as</span> <span class="nn">iio</span>

<span class="c1">#image_bytesäºŒè¿›åˆ¶æ•°æ®</span>
<span class="n">im</span> <span class="o">=</span> <span class="n">iio</span><span class="o">.</span><span class="n">get_reader</span><span class="p">(</span><span class="n">image_bytes</span><span class="p">,</span> <span class="s1">&#39;.gif&#39;</span><span class="p">)</span>
</code></pre></div><h2 id="è¯»å–ç½‘å›¾">è¯»å–ç½‘å›¾</h2>
<p>Imageioå¯ä»¥ä»æ–‡ä»¶åã€æ–‡ä»¶å¯¹è±¡ã€zipå‹ç¼©æ–‡ä»¶å¤¹ã€å­—èŠ‚æµã€å›¾ç‰‡é“¾æ¥ä¸­è¯»å–å›¾ç‰‡</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">imageio</span> <span class="k">as</span> <span class="nn">iio</span>
<span class="kn">import</span> <span class="nn">visvis</span> <span class="k">as</span> <span class="nn">vv</span>

<span class="n">im</span> <span class="o">=</span> <span class="n">iio</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;http://upload.wikimedia.org/wikipedia/commons/d/de/Wikipedia_Logo_1.0.png&#39;</span><span class="p">)</span>
<span class="n">vv</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
</code></pre></div><blockquote>
<p>æ³¨æ„: æœ‰æ—¶å€™ä»£ç è¿è¡Œä¸å‡ºç»“æœï¼Œå¯ä»¥å°è¯• <code>imageio.imread(imageio.core.urlopen(url).read(), '.gif')</code>.</p>
</blockquote>
<br>
<h2 id="è¯»å–æ–‡ä»¶å¤¹ä¸­çš„å›¾ç‰‡">è¯»å–æ–‡ä»¶å¤¹ä¸­çš„å›¾ç‰‡</h2>
<p>ä¸€ç§å¸¸è§çš„æƒ…å†µæ˜¯æ‚¨æƒ³è¦è¯»å–æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰å›¾åƒï¼Œä¾‹å¦‚ è¿›è¡Œç§‘å­¦åˆ†æï¼Œæˆ–è€…å› ä¸ºè¿™äº›éƒ½æ˜¯æ‚¨çš„è®­ç»ƒç¤ºä¾‹ã€‚ å‡è®¾è¯¥æ–‡ä»¶å¤¹ä»…åŒ…å«å›¾åƒæ–‡ä»¶ï¼Œæ‚¨å¯ä»¥è¿™æ ·è¯»å–å®ƒ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">imageio</span> <span class="k">as</span> <span class="nn">iio</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="n">images</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&#34;path/to/folder&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">iterdir</span><span class="p">():</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">iio</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
    <span class="n">images</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
</code></pre></div><br>
<h2 id="è¿­ä»£è§†é¢‘ä¸­çš„å›¾ç‰‡">è¿­ä»£è§†é¢‘ä¸­çš„å›¾ç‰‡</h2>
<p>è§†é¢‘ä¹Ÿæ˜¯ç”±å›¾ç‰‡ç»„æˆçš„ï¼Œé€šè¿‡æ¯ç§’é’Ÿæ’­æ”¾å‡ åå¸§ï¼ˆè§†é¢‘ç”±å¾ˆå¤šå¼ å›¾ç‰‡ç»„æˆï¼‰ï¼Œé™æ€çš„å›¾å±•ç¤ºå‡ºè§†é¢‘æ•ˆæœã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">imageio</span> <span class="k">as</span> <span class="nn">iio</span>

<span class="n">reader</span> <span class="o">=</span> <span class="n">iio</span><span class="o">.</span><span class="n">get_reader</span><span class="p">(</span><span class="s1">&#39;imageio:cockatoo.mp4&#39;</span><span class="p">)</span>

<span class="c1">#forå¾ªç¯è¿­ä»£</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">im</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">reader</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Mean of frame </span><span class="si">%i</span><span class="s1"> is </span><span class="si">%1.1f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">im</span><span class="o">.</span><span class="n">mean</span><span class="p">()))</span>
</code></pre></div><br>
<h2 id="å®˜æ–¹æ–‡æ¡£">å®˜æ–¹æ–‡æ¡£</h2>
<p>æ›´å¤šåŠŸèƒ½è¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£
<a href="https://github.com/imageio/imageio">https://github.com/imageio/imageio</a></p>
<br>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>å¤§é‚“æ•´ç†çš„æœ‰ç”¨Pythoné¡¹ç›®</title>
      <link>https://hidadeng.github.io/blog/python_tools/</link>
      <pubDate>Fri, 07 Jan 2022 12:43:10 +0600</pubDate>
      
      <guid>/blog/python_tools/</guid>
      <description>æ¶µç›–ç½‘ç»œçˆ¬è™«ã€æ•°æ®åº“ã€æ•°æ®åˆ†æã€æœºå™¨å­¦ä¹ ã€å¯è§†åŒ–ã€æ–‡æœ¬åˆ†æ</description>
      <content:encoded><![CDATA[<h2 id="tool_kits">Tool_Kits</h2>
<p>å·¥å…·ç®±å¤§å…¨,ä¸»è¦æ˜¯Pythoné¡¹ç›®ã€‚</p>
<p>æ¶µç›–ï¼š</p>
<ol>
<li>ç½‘ç»œçˆ¬è™«</li>
<li>æ•°æ®åº“</li>
<li>æ•°æ®åˆ†æ</li>
<li>æœºå™¨å­¦ä¹ </li>
<li>å¯è§†åŒ–</li>
<li>æ–‡æœ¬åˆ†æ</li>
<li>GUI</li>
<li>è‡ªåŠ¨åŒ–åŠå…¬</li>
<li>å…¶ä»–</li>
</ol>
<br>
<h2 id="ç½‘ç»œçˆ¬è™«">ç½‘ç»œçˆ¬è™«</h2>
<ul>
<li><a href="https://github.com/psf/requests">requests</a>  æœ€å¥½ç”¨çš„ç½‘ç»œçˆ¬è™«è®¿é—®åº“</li>
<li><a href="https://github.com/hidadeng/smartscraper">smartscraper</a>  æœ€ç®€å•çš„ç½‘ç»œçˆ¬è™«è®¿é—®&amp;è§£æåº“</li>
<li><a href="https://github.com/hidadeng/weibo_crawler">weibo_crawler</a> æœ€ç®€å•çš„å¾®åšçˆ¬è™«</li>
<li><a href="https://mp.weixin.qq.com/s/qL1uEk4j_ks3uhjINe-xyA">å´”åº†æ‰å¤§ç¥å‘å¸ƒçš„æµ‹è¯•ç«™ç‚¹</a></li>
<li><a href="https://github.com/Gerapy/GerapyAutoExtractor">gerapy-auto-extractor</a> çˆ¬è™«é¡µé¢æ™ºèƒ½è§£æåº“</li>
<li><a href="https://github.com/davidteather/TikTok-Api">TikTok-Api</a> æŠ–éŸ³å›½é™…ç«™çˆ¬è™«åº“</li>
<li><a href="https://github.com/tebelorg/RPA-Python">rpa</a> Pythonè‡ªåŠ¨åŒ–æ“çºµåŒ…</li>
<li><a href="https://github.com/celery/celery/">celery</a> å¯ä»¥ç”¨äºåˆ¶ä½œçˆ¬è™«è®¿é—®é˜Ÿåˆ—</li>
<li><a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/">BeautifulSoup</a> æœ€ç®€å•çš„ç½‘é¡µè§£æåº“</li>
<li><a href="https://github.com/gawel/pyquery">pyquery</a>  æœ€ç®€æ´ç½‘é¡µè§£æåº“</li>
<li><a href="https://github.com/scrapy/scrapy">scrapy</a> æœ€æµè¡Œçš„çˆ¬è™«æ¡†æ¶</li>
<li><a href="https://github.com/binux/pyspider">pyspider</a> å›½äººå¼€å‘çš„çˆ¬è™«æ¡†æ¶</li>
<li><a href="https://github.com/SeleniumHQ/selenium/">selenium</a> æµè§ˆå™¨è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ï¼Œå¯ä»¥ç”¨äºçˆ¬è™«åçˆ¬</li>
<li><a href="https://github.com/microsoft/playwright">playwright</a> å¾®è½¯å¼€æºçš„æµè§ˆå™¨è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶</li>
<li><a href="https://github.com/imWildCat/scylla">scylla</a> æ™ºèƒ½IPä»£ç†æ± ï¼Œç”¨äºåçˆ¬</li>
<li><a href="https://github.com/hidadeng/shreport">shreport</a> ä¸Šæµ·è¯åˆ¸äº¤æ˜“æ‰€ä¸Šå¸‚å…¬å¸å®šæœŸæŠ¥å‘Šä¸‹è½½</li>
<li><a href="https://github.com/codelucas/newspaper">newspaper</a> æ–°é—»çˆ¬è™«åº“ï¼Œæ ¹æ®æä¾›çš„urlå¯ä»¥æŠ½å–å‡ºæ–°é—»æ ‡é¢˜ã€ä½œè€…ã€å…³é”®è¯ã€æ€»ç»“ï¼Œéƒ¨åˆ†åŠŸèƒ½æ”¯æŒä¸­æ–‡</li>
<li><a href="https://github.com/sml2h3/ddddocr">ddddocr</a>  é€šç”¨éªŒè¯ç è¯†åˆ«OCR pypiç‰ˆ</li>
</ul>
<br>
<h2 id="web">Web</h2>
<ul>
<li><a href="https://github.com/getpelican/pelican">pelican</a> Pythoné™æ€ç½‘ç«™ç”Ÿæˆåº“</li>
<li><a href="https://github.com/pallets/flask">flask</a> å¯ä»¥å¼€å‘ç½‘ç«™ã€åˆ†äº«rest-apiæ¥å£;æµè¡Œåº¦top2çš„webæ¡†æ¶</li>
<li><a href="https://github.com/streamlit/streamlit">streamlit</a>ã€<a href="https://github.com/wang0618/PyWebIO">PyWebIO</a>å¯¹Pythonå°ç™½æœ€å‹å¥½çš„çš„webåº“</li>
<li><a href="https://github.com/tiangolo/fastapi">fastapi</a>  webæ¡†æ¶ï¼Œé«˜æ€§èƒ½ï¼Œæ˜“äºå­¦ä¹ ï¼Œå¿«é€Ÿç¼–å†™ä»£ç ï¼›</li>
<li><a href="https://github.com/wang0618/PyWebIO">PyWebIO</a>  ä¸éœ€è¦ç¼–å†™HTMLå’ŒJSä»£ç ï¼Œå°±å¯ä»¥æ„å»ºç®€å•çš„åŸºäºæµè§ˆå™¨çš„GUIåº”ç”¨ã€‚</li>
<li><a href="https://github.com/mkdocs/mkdocs">mkdocs</a> åˆ¶ä½œæ–‡æ¡£ç½‘ç«™
<br></li>
</ul>
<h2 id="æ•°æ®åº“">æ•°æ®åº“</h2>
<ul>
<li><a href="https://github.com/PyMySQL/PyMySQL">PyMySQL</a></li>
<li><a href="https://docs.python.org/3/library/sqlite3.html">Sqlite3</a>  è½»é‡çº§sqlæ•°æ®åº“(pythonå†…ç½®åº“)</li>
<li><a href="https://github.com/mongodb/mongo-python-driver">pymongo</a> éå…³ç³»å‹MongoDBåº“</li>
<li><a href="https://github.com/redis/redis">redis</a>  Redisæ•°æ®åº“</li>
<li><a href="https://github.com/py2neo-org/py2neo">py2neo</a>  å¯¹æ¥Neo4Jæ•°æ®åº“çš„pythonåº“</li>
<li><a href="https://github.com/simonw/datasette">datasette</a> æ¢ç´¢å’Œå‘å¸ƒæ•°æ®çš„å¼€æºå¤šåŠŸèƒ½å·¥å…·ï¼Œä¸»è¦é¢å‘æ•°æ®è®°è€…ã€åšç‰©é¦†é¦†é•¿ã€æ¡£æ¡ˆç®¡ç†å‘˜ã€åœ°æ–¹æ”¿åºœã€ç§‘å­¦å®¶ã€ç ”ç©¶äººå‘˜ä»¥åŠä»»ä½•æ‹¥æœ‰å¸Œæœ›ä¸ä¸–ç•Œåˆ†äº«æ•°æ®çš„äººã€‚</li>
</ul>
<br>
<h2 id="æ•°æ®åˆ†æ">æ•°æ®åˆ†æ</h2>
<ul>
<li><a href="https://github.com/pandas-dev/pandas">pandas</a> å¿…é¡»Pythonæ•°æ®åˆ†æåº“ï¼Œè¯»å–æ–‡ä»¶ã€é¢„å¤„ç†æ•°æ®ã€åˆ†æã€å­˜å‚¨</li>
<li><a href="https://github.com/garrettj403/SciencePlots">SciencePlots</a>  ç§‘å­¦ç»˜å›¾çš„Pythonå·¥å…·åŒ…</li>
<li><a href="https://github.com/orchest/orchest">Orchest</a> åˆ›å»ºæ•°æ®ç§‘å­¦å·¥ä½œé‡çš„å·¥å…·ã€‚Orchestæ˜¯ä¸€æ¬¾Webæ•°æ®ç§‘å­¦å·¥å…·ï¼Œå¯åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šè¿è¡Œ</li>
<li><a href="https://github.com/statsmodels/statsmodels">statsmodels</a> Pythonçš„ç»Ÿè®¡è®¡é‡ç»Ÿè®¡åº“</li>
<li><a href="https://github.com/bashtage/linearmodels">linearmodels</a> æ·»åŠ çº¿æ€§æ¨¡å‹ï¼ŒåŒ…æ‹¬statsmodelsä¸­ç¼ºå°‘çš„å·¥å…·å˜é‡å’Œé¢æ¿æ•°æ®æ¨¡å‹ã€‚</li>
<li><a href="https://github.com/streamlit/streamlit">streamlit</a> å¿«é€Ÿæ­å»ºæœ¬åœ°æ•°æ®åˆ†æç±»Webåº”ç”¨</li>
<li><a href="https://github.com/modin-project/modin">modin</a> pandasåŠ é€Ÿåº“ï¼Œæ¥å£è¯­æ³•ä¸pandasé«˜åº¦ä¸€è‡´</li>
<li><a href="https://github.com/dask/dask">dask</a>  pandasåŠ é€Ÿåº“ï¼Œæ¥å£è¯­æ³•ä¸pandasé«˜åº¦ä¸€è‡´</li>
<li><a href="https://github.com/has2k1/plydata%5D">plydata</a>  pandasç®¡é“è¯­æ³•åº“</li>
<li><a href="https://github.com/networkx/networkx">networkx</a> ç¤¾äº¤ç½‘ç»œåˆ†æåº“</li>
</ul>
<br>
<p>â€‹</p>
<h2 id="æœºå™¨å­¦ä¹ ">æœºå™¨å­¦ä¹ </h2>
<ul>
<li><a href="https://github.com/VowpalWabbit/vowpal_wabbit">vowpal wabbit</a>  æœºå™¨å­¦ä¹ çš„å‰æ²¿åº“</li>
<li><a href="https://github.com/scikit-learn/scikit-learn">scikit-learn</a> æœºå™¨å­¦ä¹ å¿…å­¦åº“ï¼Œæ”¯æŒæœ‰ç›‘ç£ã€æ— ç›‘ç£å¤šç§ç®—æ³•ï¼Œå«æ–‡æœ¬åˆ†æåŠŸèƒ½</li>
<li><a href="https://github.com/biolab/orange3">Orange3</a> ç‚¹å‡»æ“ä½œçš„æœºå™¨å­¦ä¹ åˆ†æ<strong>è½¯ä»¶</strong>ï¼Œ å¯æ–‡æœ¬åˆ†æ</li>
<li><a href="https://github.com/doccano/doccano">doccano</a> æ–‡æœ¬æ•°æ®æ ‡æ³¨å·¥å…·</li>
<li><a href="https://github.com/heartexlabs/label-studio">label-studio</a>  æœ€ç‰›æ°çš„æ–‡æœ¬æ•°æ®æ ‡æ³¨å·¥å…·</li>
</ul>
<h2 id="å¯è§†åŒ–">å¯è§†åŒ–</h2>
<ul>
<li><a href="https://github.com/streamlit/streamlit">streamlit</a> å¿«é€Ÿæ­å»ºæœ¬åœ°æ•°æ®åˆ†æç±»Webåº”ç”¨</li>
<li><a href="https://github.com/matplotlib/matplotlib">matplotlib</a>  Pythonä¸­æœ€ä¸‡èƒ½ç»˜å›¾åº“ï¼Œå¾ˆå°‘æœ‰taç”»ä¸å‡ºæ¥çš„å›¾ï¼›ä½†è¯­æ³•è¾ƒéš¾ã€é™æ€å›¾</li>
<li><a href="https://github.com/nschloe/matplotx">matplotx</a>  Matplotlibæ‰©å±•åº“ï¼Œå¯ä»¥æä¾›æ›´å¤šæ ·å¼ï¼Œç®€åŒ–æ ·å¼è®¾å®š</li>
<li><a href="https://github.com/mwaskom/seaborn">seaborn</a> åŸºäºmatplotlibå¼€å‘çš„ç®€åŒ–ç‰ˆå¯è§†åŒ–åº“ï¼Œ ä¸€èˆ¬çš„å›¾å¯ä»¥ç”¨taç»˜åˆ¶ï¼› é«˜åº¦å®šåˆ¶ä»éœ€è¦ç»“åˆmatplotlibè¿›è¡Œæ ·å¼å®šåˆ¶ï¼›é™æ€å›¾</li>
<li><a href="https://github.com/has2k1/plotnine">plotnine</a>  ggplot2è¯­æ³•çš„Pythonå¯è§†åŒ–åº“ï¼Œ å¯ä¸<a href="https://github.com/has2k1/plydata%5D">plydata</a> åº“ç»“åˆä½¿ç”¨</li>
<li><a href="https://github.com/pyecharts/pyecharts">pyecharts</a> å›½äººå¼€å‘å¹¶å°è£…çš„åŠ¨æ€å¯è§†åŒ–å›¾ç»˜åˆ¶åº“; ä¸­æ–‡æ–‡æ¡£</li>
<li><a href="https://github.com/plotly/plotly.py">plotly</a> åŠ¨æ€å¯è§†åŒ–å›¾ç»˜åˆ¶åº“</li>
<li><a href="https://github.com/bokeh/bokeh">bokeh</a> åŠ¨æ€å¯è§†åŒ–å›¾ç»˜åˆ¶åº“</li>
<li><a href="https://github.com/garrettj403/SciencePlots">SciencePlots</a>  ç§‘ç ”è®ºæ–‡ç»˜å›¾ï¼ŒåŸºäºmatplotlib</li>
<li><a href="https://github.com/datapane/datapane">datapane</a>  æ•°æ®åˆ†ææŠ¥å‘Šç”Ÿæˆ</li>
<li><a href="https://github.com/apache/superset">superset</a> å¼€æºå•†åŠ¡æ™ºèƒ½åˆ†æå¯è§†åŒ–åº“</li>
<li><a href="https://github.com/alfonsosemeraro/pyplutchik">pyplutchik</a> æ–‡æœ¬å¯è§†åŒ–ï¼Œå¯å°†æ–‡æœ¬æƒ…æ„Ÿä¿¡æ¯æŒ‰ç…§plutchikè½®æ ·å¼å¯è§†åŒ–</li>
</ul>
<br> 
<h2 id="æ–‡æœ¬åˆ†æ">æ–‡æœ¬åˆ†æ</h2>
<ul>
<li><a href="https://github.com/nltk/nltk">nltk</a> è‡ªç„¶è¯­è¨€åˆ†æå¥—ä»¶ï¼Œå¯¹ä¸­æ–‡ä¸å‹å¥½</li>
<li><a href="https://github.com/shaypal5/skift">skift</a>  ä½¿ç”¨scikit-learnè¯­æ³•å°è£…äº†fastTextåŠŸèƒ½çš„åŒ…ã€‚</li>
<li><a href="https://github.com/andrewtavis/kwx">kwx</a>  Python ä¸­åŸºäº BERTã€LDA å’Œ TFIDF çš„å…³é”®å­—æå–</li>
<li><a href="https://github.com/explosion/spaCy">spacy</a> å·¥ä¸šçº§è‡ªç„¶è¯­è¨€æ¨¡å‹åº“ï¼Œæ”¯æŒä¸­æ–‡</li>
<li><a href="https://github.com/fxsjy/jieba">jieba</a>  ä¸­æ–‡æ–‡æœ¬åˆ†è¯åº“</li>
<li><a href="https://github.com/isnowfy/snownlp">snownlp</a> ä¸­æ–‡æƒ…æ„Ÿåˆ†æåº“</li>
<li><a href="https://github.com/RaRe-Technologies/gensim">gensim</a>  æœ€å¥½ç”¨ã€æœ€å…¨çš„è¯é¢˜æ¨¡å‹</li>
<li><a href="https://github.com/hidadeng/cntext">cntext</a> ä¸­æ–‡æ–‡æœ¬åˆ†æåº“ï¼Œå«è¯é¢‘ç»Ÿè®¡ã€æƒ…æ„Ÿåˆ†æã€å¯è§†åŒ–</li>
<li><a href="https://github.com/heartexlabs/label-studio">label-studio</a>  æœ€ç‰›æ°çš„æ–‡æœ¬æ•°æ®æ ‡æ³¨å·¥å…·</li>
<li><a href="https://github.com/doccano/doccano">doccano</a> æ–‡æœ¬æ•°æ®æ ‡æ³¨å·¥å…·</li>
<li><a href="https://github.com/shivam5992/textstat">textstat</a>  æ–‡æœ¬å¯è¯»æ€§è®¡ç®—åŒ…(ç®—æ³•å…¨ï¼Œä½†ä»…æ”¯æŒè‹±æ–‡)</li>
<li><a href="https://github.com/jbesomi/texthero">texthero</a> æ–‡æœ¬é¢„å¤„ç†ã€å±•ç¤ºã€å¯è§†åŒ–åº“ï¼Œä»…æ”¯æŒè‹±æ–‡</li>
<li><a href="https://github.com/textpipe/textpipe">textpipe</a> æ–‡æœ¬åˆ†ææµæ°´çº¿</li>
<li><a href="https://github.com/davidmcclure/textplot">textplot</a> è¯è¯­ç½‘ç»œå›¾</li>
<li><a href="https://github.com/ryanjgallagher/shifterator">shifterator</a> é€šè¿‡è®©æ‚¨æŸ¥çœ‹å•è¯ä½¿ç”¨æ–¹å¼çš„å˜åŒ–ï¼Œå•è¯ç§»ä½å¯ä»¥å¸®åŠ©æ‚¨è¿›è¡Œä»æ ¹æœ¬ä¸Šæ›´å¯è§£é‡Šçš„æƒ…æ„Ÿï¼Œç†µå’Œæ•£åº¦åˆ†æã€‚é‡åŒ–ä¸åŒå•è¯å¯¹ä¸¤ä¸ªæ–‡æœ¬å·®å¼‚åšå‡ºçš„è´¡çŒ®ï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•å‘æŒ¥ä½œç”¨ã€‚</li>
<li><a href="https://github.com/vi3k6i5/GuidedLDA">GuidedLDA</a> åŠç›‘ç£LDAä¸»é¢˜æ¨¡å‹</li>
<li><a href="https://github.com/gregversteeg/corex_topic">corex_topic</a>  å±‚æ¬¡éç›‘ç£ã€åŠç›‘ç£è¯é¢˜æ¨¡å‹</li>
<li><a href="https://github.com/MaartenGr/BERTopic">BERTopic</a> BERTè¯é¢˜æ¨¡å‹</li>
<li><a href="https://github.com/RasaHQ/whatlies">whatlies</a>  è¯å‘é‡å¯è§†åŒ–</li>
<li><a href="https://github.com/HLasse/TextDescriptives">TextDescriptives</a> æ–‡æœ¬æè¿°æ€§ç»Ÿè®¡,ä¸æ”¯æŒä¸­æ–‡</li>
<li><a href="https://github.com/hidadeng/pdfdocx">pdfdocx</a> pdfã€docxè¯»å–åº“</li>
<li><a href="https://github.com/ocrmypdf/OCRmyPDF">OCRmyPDF</a>    ä¸º<strong>æ‰«æçš„ PDF</strong> æ–‡ä»¶æ·»åŠ äº† OCR æ–‡æœ¬å±‚ï¼Œå…è®¸å¯¹å…¶è¿›è¡Œæœç´¢</li>
<li><a href="https://github.com/ddangelov/Top2Vec">Top2Vec</a>  ä¸»é¢˜å»ºæ¨¡å’Œè¯­ä¹‰æœç´¢çš„ç®—æ³•, è‡ªåŠ¨æ£€æµ‹æ–‡æœ¬ä¸­å­˜åœ¨çš„ä¸»é¢˜å¹¶ç”Ÿæˆè”åˆåµŒå…¥çš„ä¸»é¢˜ã€æ–‡æ¡£å’Œè¯å‘é‡ã€‚ é€‚ç”¨äºçŸ­æ–‡æœ¬;</li>
<li><a href="https://github.com/jboynyc/textnets">TextNet</a>  textnetå°†æ–‡æ¡£é›†è¡¨ç¤ºä¸ºæ–‡æ¡£å’Œå•è¯çš„ç½‘ç»œ,ä¸ºæ–‡æœ¬åˆ†æä¸å¯è§†åŒ–æä¾›äº†æ–°çš„å¯èƒ½æ€§ã€‚</li>
<li><a href="https://github.com/remram44/taguette">taguette</a> å…è´¹å¼€æºçš„å®šæ€§ç ”ç©¶å·¥å…·</li>
</ul>
<br>
<h2 id="guiçª—ä½“è½¯ä»¶å¼€å‘">GUIçª—ä½“è½¯ä»¶å¼€å‘</h2>
<ul>
<li><a href="https://wiki.python.org/moin/TkInter">tkinter</a> Pythonå†…ç½®çš„guiåº“</li>
<li><a href="https://github.com/PySimpleGUI/PySimpleGUI">PySimpleGUI</a> æœ€ç®€å•çš„guiå¼€å‘åº“</li>
<li><a href="https://doc.qt.io/qt.html#qtforpython">pyqt5ã€pyside</a> æœ€ç‰›æ°çš„guiè½¯ä»¶å¼€å‘åº“</li>
<li><a href="https://github.com/hoffstadt/DearPyGui">DearPyGui</a>  æ˜“äºä½¿ç”¨ä¸”åŠŸèƒ½å¼ºå¤§çš„Python GUIæ¡†æ¶ï¼Œå®ƒæä¾›äº†DearImGuiçš„åŒ…è£…ã€‚</li>
<li><a href="https://github.com/pywebio/PyWebIO">PyWebIO</a>  å¿«é€Ÿæ„å»º Web åº”ç”¨çš„ Python å·¥å…·</li>
<li><a href="https://github.com/kivy/kivy">kivy</a>  staræ•°é«˜è¾¾14kçš„guiåº“
<br></li>
</ul>
<h2 id="è‡ªåŠ¨åŒ–åŠå…¬">è‡ªåŠ¨åŒ–åŠå…¬</h2>
<ul>
<li><a href="https://github.com/zhangyunhao116/zmail">zmail</a> è‡ªåŠ¨åŒ–æ”¶å‘é‚®ä»¶ç®¡ç†åº“</li>
<li><a href="https://github.com/pywinauto/pywinauto">pywinauto</a> Windowsç”µè„‘è‡ªåŠ¨åŒ–Pythonåº“</li>
<li><a href="https://github.com/Kozea/WeasyPrint">WeasyPrint</a>  è‡ªåŠ¨åŒ–ç”Ÿäº§pdfæŠ¥å‘Š</li>
<li><a href="https://github.com/jorisschellekens/ptext-release"></a> å¯¹PDFæ–‡ä»¶è¯»å–ã€æ›´æ”¹ã€æ·»åŠ ä¿¡æ¯</li>
<li><a href="https://github.com/SeleniumHQ/selenium/">selenium</a> æµè§ˆå™¨è‡ªåŠ¨åŒ–æ¡†æ¶ï¼Œå¯ä»¥è‡ªåŠ¨åŒ–ç‚¹å‡»æµè§ˆå™¨ï¼Œå®ŒæˆæŸäº›å·¥ä½œ</li>
<li><a href="https://github.com/mkdocs/mkdocs/">mkdocx</a></li>
<li><a href="https://github.com/python-openxml/python-docx">python-docx</a>  åˆ›å»ºã€ä¿®æ”¹docxæ–‡ä»¶åº“</li>
<li><a href="https://github.com/scanny/python-pptx">python-ppt</a>  åˆ›å»ºã€ä¿®æ”¹pptæ–‡ä»¶åº“</li>
<li><a href="https://openpyxl.readthedocs.io/en/stable/">openpyxl</a> xlsxæ–‡ä»¶åº“</li>
<li><a href="https://github.com/wang0618/PyWebIO">PyWebIO</a>  ä¸éœ€è¦ç¼–å†™HTMLå’ŒJSä»£ç ï¼Œå°±å¯ä»¥æ„å»ºç®€å•çš„åŸºäºæµè§ˆå™¨çš„GUIåº”ç”¨ã€‚</li>
</ul>
<br>
<h2 id="å…¶ä»–">å…¶ä»–</h2>
<ul>
<li><a href="https://github.com/hiresearch/hiresearch.github.io">hiresearch</a> ä¸¢å¼ƒç¹æ‚æ”¶è—å¤¹ï¼Œå®šä¹‰ç®€æ´åŠå…¬çš„æµè§ˆå™¨é¦–é¡µ</li>
<li><a href="https://github.com/hakimel/reveal.js">reveal.js</a> æœ€æµè¡Œçš„å¹»ç¯ç‰‡</li>
<li><a href="https://github.com/slidevjs/slidev">slidev</a> ç¼–ç¨‹äººå‘˜ä½¿ç”¨çš„å¹»ç¯ç‰‡</li>
<li><a href="https://github.com/mkdocs/mkdocs">mkdocs</a> åˆ¶ä½œæ–‡æ¡£ç½‘ç«™</li>
<li><a href="https://github.com/mockoon/cli">mockoon</a>  å¸®æˆ‘ä»¬å¿«é€Ÿæ­å»º API æœåŠ¡å›¾å½¢åŒ–ç•Œé¢å·¥å…·</li>
<li><a href="https://www.codepng.app/">codepng</a>  æŠŠä»£ç è½¬ä¸ºç¾è§‚çš„æˆªå›¾çš„website</li>
<li><a href="https://github.com/amphibian-dev/toad">toad</a> é‡‘èé£é™©è¯„åˆ†å¡ï¼›è¦†ç›–äº†å»ºæ¨¡å…¨æµç¨‹ï¼Œä» EDAã€ç‰¹å¾å·¥ç¨‹ã€ç‰¹å¾ç­›é€‰ åˆ° æ¨¡å‹éªŒè¯å’Œè¯„åˆ†å¡è½¬åŒ–</li>
<li><a href="https://github.com/salomonelli/best-resume-ever">best-resume-ever</a> Latexé¡¹ç›®ï¼Œ åŸºäº Web çš„ç®€å†æ¨¡æ¿ï¼Œå¯ä»¥ç”Ÿæˆç½‘é¡µç®€å†ï¼Œç„¶åç”¨æµè§ˆå™¨æ‰“å°æˆ PDF æ–‡ä»¶ã€‚</li>
<li><a href="https://github.com/vivjay30/pychorus">pychorus</a> å°†éŸ³é¢‘æ–‡ä»¶ä¸­çš„é«˜æ½®éƒ¨åˆ†å‰ªè¾‘å‡ºæ¥çš„pythonåŒ…</li>
<li><a href="https://github.com/imageio/imageio">imageio</a>  ç”¨äºè¯»å–å’Œå†™å…¥å›¾åƒæ•°æ®çš„ Python åº“ï¼›</li>
<li><a href="https://github.com/Textualize/rich">rich</a> è®©å‘½ä»¤è¡Œè¾“å‡ºæ›´ç¾è§‚ç®€æ´çš„PythonåŒ…</li>
<li><a href="https://github.com/Textualize/textual">textual</a> richä½œè€…å¼€å‘çš„<strong>æ–‡æœ¬ç”¨æˆ·ç•Œé¢</strong>ç”¨æˆ·</li>
</ul>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>tomotopy | é€Ÿåº¦æœ€å¿«çš„LDAä¸»é¢˜æ¨¡å‹</title>
      <link>https://hidadeng.github.io/blog/tomotopy_is_the_fastest_topic_model/</link>
      <pubDate>Fri, 07 Jan 2022 11:43:10 +0600</pubDate>
      
      <guid>/blog/tomotopy_is_the_fastest_topic_model/</guid>
      <description>æ¥è¿‘Cçš„é€Ÿåº¦ï¼Œæ¯”å¸‚é¢çš„sklearnã€gensimå¿«åå‡ å€</description>
      <content:encoded><![CDATA[<h2 id="ä»£ç ä¸‹è½½tomotopy_codezip"><a href="tomotopy_code.zip">ä»£ç ä¸‹è½½</a></h2>
<br>
<p><a href="https://textdata.cn/blog/2022workshop/"><img loading="lazy" src="img/workshop.png" alt="å¯’å‡å·¥ä½œåŠ"  />
</a></p>
<br>
<h2 id="tomotopyç®€ä»‹">tomotopyç®€ä»‹ï¼Ÿ</h2>
<p>tomotopy æ˜¯ tomotoï¼ˆä¸»é¢˜å»ºæ¨¡å·¥å…·ï¼‰çš„ Python æ‰©å±•ï¼Œå®ƒæ˜¯ç”¨ C++ ç¼–å†™çš„åŸºäº Gibbs é‡‡æ ·çš„ä¸»é¢˜æ¨¡å‹åº“ã€‚æ”¯æŒçš„ä¸»é¢˜æ¨¡å‹åŒ…æ‹¬ LDAã€DMRã€HDPã€MG-LDAã€PA å’Œ HPAï¼Œ åˆ©ç”¨ç°ä»£ CPU çš„çŸ¢é‡åŒ–æ¥æœ€å¤§åŒ–é€Ÿåº¦ã€‚</p>
<p><a href="https://github.com/bab2min/tomotopy">https://github.com/bab2min/tomotopy</a></p>
<p><strong>ä¸‹å›¾ä¸­åŒæ ·çš„æ•°æ®é›†ï¼Œ tomotopyè¿­ä»£200æ¬¡ï¼Œgensimè¿­ä»£10æ¬¡çš„æƒ…å†µä¸‹ï¼Œ tomotopyä¸gensimè€—æ—¶å¯¹æ¯”å›¾ï¼Œç”±æ­¤å¯è§tomotopyè®­ç»ƒä¸»é¢˜æ¨¡å‹é€Ÿåº¦ä¹‹å¿«ã€‚</strong>
<img loading="lazy" src="img/TomotopyVsGensim.png" alt=""  />
</p>
<p>å½“å‰ç‰ˆæœ¬çš„ tomotopy æ”¯æŒçš„ä¸»é¢˜æ¨¡å‹åŒ…æ‹¬</p>
<ul>
<li>æ½œåœ¨ç‹„åˆ©å…‹é›·åˆ†é…ï¼ˆLDAModelï¼‰</li>
<li>æ ‡è®°çš„ LDAï¼ˆLLDA æ¨¡å‹ï¼‰</li>
<li>éƒ¨åˆ†æ ‡è®°çš„ LDAï¼ˆPLDA æ¨¡å‹ï¼‰</li>
<li>ç›‘ç£LDAï¼ˆSLDAæ¨¡å‹ï¼‰</li>
<li>Dirichlet å¤šé¡¹å›å½’ (DMRModel)</li>
<li>å¹¿ä¹‰ç‹„åˆ©å…‹é›·å¤šé¡¹å›å½’ (GDMRModel)</li>
<li>åˆ†å±‚ç‹„åˆ©å…‹é›·è¿‡ç¨‹ (HDPModel)</li>
<li>åˆ†å±‚LDAï¼ˆHLDAæ¨¡å‹ï¼‰</li>
<li>å¤šç²’ LDAï¼ˆMGLDA æ¨¡å‹ï¼‰</li>
<li>å¼¹ç ç›˜åˆ†é…ï¼ˆPAModelï¼‰</li>
<li>åˆ†å±‚ PA (HPAModel)</li>
<li>ç›¸å…³ä¸»é¢˜æ¨¡å‹ï¼ˆCTModelï¼‰</li>
<li>åŠ¨æ€ä¸»é¢˜æ¨¡å‹ (DTModel)</li>
<li>åŸºäºä¼ªæ–‡æ¡£çš„ä¸»é¢˜æ¨¡å‹ï¼ˆPTModelï¼‰ã€‚</li>
</ul>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">tomotopy</span><span class="o">==</span><span class="mf">0.12.2</span>
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">pyLDAvis</span><span class="o">==</span><span class="mf">3.3.1</span>  
</code></pre></div><p>ç›®å‰ï¼Œtomotopy å¯ä»¥åˆ©ç”¨ AVX2ã€AVX æˆ– SSE2 SIMD æŒ‡ä»¤é›†æ¥æœ€å¤§ç¨‹åº¦åˆ©ç”¨PCçš„æ€§èƒ½ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">tomotopy</span> <span class="k">as</span> <span class="nn">tp</span>

<span class="n">tp</span><span class="o">.</span><span class="n">isa</span>
</code></pre></div><p>Run</p>
<pre><code>'avx2'
</code></pre>
<p>å¦‚æœ tp.isa è¿”å› Noneï¼Œåˆ™è®­ç»ƒè¿‡ç¨‹å¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´ã€‚</p>
<br>
<h2 id="1-å¯¼å…¥æ•°æ®">1. å¯¼å…¥æ•°æ®</h2>
<p>å‡†å¤‡ä¸€ä¸ªè‡ªå·±å¾ˆç†Ÿæ‚‰çš„æ•°æ®disaster_news.csvï¼Œä¸€å…±æœ‰332æ¡ï¼Œè¯é¢˜æ•°K=5ï¼Œï¼ˆæ­£å¸¸æƒ…å†µä¸‹Kæ˜¯éœ€è¦æ¢ç´¢çš„ï¼‰ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;disaster_news.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p><img loading="lazy" src="img/df1.png" alt=""  />
</p>
<br>
<h2 id="2-æ•´ç†æ•°æ®">2. æ•´ç†æ•°æ®</h2>
<p>åˆ†è¯ã€å»é™¤åœç”¨è¯</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">jieba</span>
<span class="kn">from</span> <span class="nn">cntext</span> <span class="kn">import</span> <span class="n">STOPWORDS_zh</span>


<span class="k">def</span> <span class="nf">segment</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">jieba</span><span class="o">.</span><span class="n">lcut</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span> <span class="k">if</span> <span class="n">w</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">STOPWORDS_zh</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">words</span>

<span class="n">test</span> <span class="o">=</span> <span class="s2">&#34;äº‘å—æ°¸å–„å¿çº§åœ°éœ‡å·²è‡´äººä¼¤é—´æ°‘æˆ¿å—æŸä¸­æ–°ç½‘æœˆæ—¥ç”µæ®äº‘å—æ˜­é€šå¸‚é˜²éœ‡å‡ç¾å±€å®˜æ–¹ç½‘ç«™æ¶ˆæ¯æˆªè‡³æ—¥æ—¶äº‘å—æ˜­é€šæ°¸å–„å¿çº§åœ°éœ‡å·²é€ æˆäººå—ä¼¤å…¶ä¸­é‡ä¼¤äººè½»ä¼¤äººå·²å…¨éƒ¨é€åŒ»é™¢æ•‘æ²»æ°‘æˆ¿å—æŸæˆ·é—´å€’å¡Œæˆ·é—´ä¸ªä¹¡é•‡æ‰€å­¦æ ¡ä¸åŒç¨‹åº¦å—æŸç›®å‰è¢«æŸæ¯ç”µåŠ›äº¤é€šé€šè®¯è®¾æ–½å·²å…¨éƒ¨æŠ¢é€šä¿®å¤å½“åœ°å·²è°ƒæ‹¨å¸ç¯·é¡¶ç´§æ€¥è½¬ç§»ä¸‡äººæœˆæ—¥æ—¶åˆ†äº‘å—æ˜­é€šæ°¸å–„å¿å‘ç”Ÿé‡Œæ°çº§åœ°éœ‡éœ‡æºæ·±åº¦å…¬é‡Œå½“åœ°éœ‡æ„Ÿå¼ºçƒˆæ­¤å¤–æˆéƒ½ç­‰å››å·å¤šåœ°ä¹Ÿæœ‰æ˜æ˜¾éœ‡æ„Ÿ&#34;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">segment</span><span class="p">(</span><span class="n">test</span><span class="p">))</span>
</code></pre></div><pre><code>['äº‘å—', 'æ°¸å–„å¿', 'çº§', 'åœ°éœ‡', 'å·²è‡´', 'ä¼¤é—´', 'æ°‘æˆ¿', 'å—æŸ', 'ä¸­æ–°ç½‘', 'æ—¥ç”µ', 'äº‘å—', 'æ˜­é€šå¸‚', 'é˜²éœ‡', 'å‡ç¾', 'å±€', 'å®˜æ–¹ç½‘ç«™', 'æ¶ˆæ¯', 'æ—¥æ—¶', 'äº‘å—', 'æ˜­é€š', 'æ°¸å–„å¿', 'çº§', 'åœ°éœ‡', 'é€ æˆ', 'å—ä¼¤', 'é‡ä¼¤', 'è½»ä¼¤', 'é€', 'åŒ»é™¢', 'æ•‘æ²»', 'æ°‘æˆ¿', 'å—æŸ', 'æˆ·é—´', 'å€’å¡Œ', 'æˆ·é—´', 'ä¹¡é•‡', 'å­¦æ ¡', 'ä¸åŒ', 'ç¨‹åº¦', 'å—æŸ', 'ç›®å‰', 'æŸæ¯', 'ç”µåŠ›', 'äº¤é€š', 'é€šè®¯', 'è®¾æ–½', 'æŠ¢é€š', 'ä¿®å¤', 'è°ƒæ‹¨', 'å¸ç¯·', 'é¡¶', 'ç´§æ€¥', 'è½¬ç§»', 'ä¸‡äºº', 'æ—¶åˆ†', 'äº‘å—', 'æ˜­é€š', 'æ°¸å–„å¿', 'å‘ç”Ÿ', 'é‡Œæ°', 'çº§', 'åœ°éœ‡', 'éœ‡æº', 'æ·±åº¦', 'å…¬é‡Œ', 'éœ‡æ„Ÿ', 'å¼ºçƒˆ', 'æˆéƒ½', 'å››å·', 'å¤šåœ°', 'æ˜æ˜¾', 'éœ‡æ„Ÿ']
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="p">[</span><span class="s1">&#39;words&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p><img loading="lazy" src="img/df2.png" alt=""  />
</p>
<br>
<h2 id="3-æ‰¾åˆ°æœ€ä½³k">3. æ‰¾åˆ°æœ€ä½³K</h2>
<p>æ­£å¸¸çš„æ­¥éª¤åº”è¯¥è®¤çœŸå¯¹å¾…è¿™æ­¥ï¼Œåœ¨ä¸€å®šåŒºé—´èŒƒå›´å†…ï¼Œæ ¹æ®æ¨¡å‹å¾—åˆ†æ‰¾åˆ°åˆç†çš„Kã€‚è¿™é‡Œä½¿ç”¨tomotopyæä¾›çš„ä¸»é¢˜ä¸€è‡´æ€§coherenceå¾—åˆ†å‡è£…æ‰¾ä¸€ä¸‹ã€‚</p>
<p>æˆ‘ä»¬æœŸæœ›çš„å›¾åº”è¯¥çš„topic coherenceéšç€ number of topicså¢åŠ è€Œå¢åŠ ï¼Œç„¶ååˆ°æŸä¸ªtopicå€¼è¶‹äºå¹³ç¨³ã€‚</p>
<p>tomotopyæ¯æ¬¡è¿è¡Œå¾—åˆ°çš„å›¾å½¢çŠ¶ä¸ä¸€æ ·ï¼Œä¸ºäº†ä¿è¯è¿è¡Œç»“æœå…·æœ‰å¯æ¯”æ€§ï¼Œè®¾ç½®äº†éšæœºç§å­seedä¸º555ï¼Œä½ ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦æ”¹ä¸ºè‡ªå·±éœ€è¦çš„éšæœºçŠ¶æ€ã€‚(è¿™é‡Œæœ‰ç‚¹åƒç‚¼ä¸¹)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">find_k</span><span class="p">(</span><span class="n">docs</span><span class="p">,</span> <span class="n">min_k</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_k</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">min_df</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="c1">#min_df è¯è¯­æœ€å°‘å‡ºç°åœ¨2ä¸ªæ–‡æ¡£ä¸­</span>
    <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
    <span class="n">scores</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">min_k</span><span class="p">,</span> <span class="n">max_k</span><span class="p">):</span>
        <span class="c1">#seedéšæœºç§å­ï¼Œä¿è¯åœ¨å¤§é‚“è¿™é‡Œè¿è¡Œç»“æœä¸ä½ è¿è¡Œçš„ç»“æœä¸€æ ·</span>
        <span class="n">mdl</span> <span class="o">=</span> <span class="n">tp</span><span class="o">.</span><span class="n">LDAModel</span><span class="p">(</span><span class="n">min_df</span><span class="o">=</span><span class="n">min_df</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">555</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">words</span> <span class="ow">in</span> <span class="n">docs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">words</span><span class="p">:</span>
                <span class="n">mdl</span><span class="o">.</span><span class="n">add_doc</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>
        <span class="n">mdl</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
        <span class="n">coh</span> <span class="o">=</span> <span class="n">tp</span><span class="o">.</span><span class="n">coherence</span><span class="o">.</span><span class="n">Coherence</span><span class="p">(</span><span class="n">mdl</span><span class="p">)</span>
        <span class="n">scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coh</span><span class="o">.</span><span class="n">get_score</span><span class="p">())</span>

    <span class="c1">#x = list(range(min_k, max_k - 1))  # åŒºé—´æœ€å³ä¾§çš„å€¼ã€‚æ³¨æ„ï¼šä¸èƒ½å¤§äºmax_k</span>
    <span class="c1">#print(x)</span>
    <span class="c1">#print()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">min_k</span><span class="p">,</span> <span class="n">max_k</span><span class="p">),</span> <span class="n">scores</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&#34;number of topics&#34;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&#34;coherence&#34;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    
    
<span class="n">find_k</span><span class="p">(</span><span class="n">docs</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;words&#39;</span><span class="p">],</span> <span class="n">min_k</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_k</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">min_df</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div><p><img loading="lazy" src="img/output_11_0.png" alt="png"  />
</p>
<br>
<h2 id="4-è®­ç»ƒlda">4. è®­ç»ƒlda</h2>
<p>ä½¿ç”¨tomotopyçš„LDAæ¨¡å‹ï¼Œ è¯é¢˜æ•°K=5</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">tomotopy</span> <span class="k">as</span> <span class="nn">tp</span>

<span class="c1">#åˆå§‹åŒ–LDA</span>
<span class="n">mdl</span> <span class="o">=</span> <span class="n">tp</span><span class="o">.</span><span class="n">LDAModel</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">min_df</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">555</span><span class="p">)</span>
<span class="k">for</span> <span class="n">words</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;words&#39;</span><span class="p">]:</span>
    <span class="c1">#ç¡®è®¤words æ˜¯ éç©ºè¯è¯­åˆ—è¡¨</span>
    <span class="k">if</span> <span class="n">words</span><span class="p">:</span>
        <span class="n">mdl</span><span class="o">.</span><span class="n">add_doc</span><span class="p">(</span><span class="n">words</span><span class="o">=</span><span class="n">words</span><span class="p">)</span>

<span class="c1">#è®­ç»ƒ</span>
<span class="n">mdl</span><span class="o">.</span><span class="n">train</span><span class="p">()</span>

<span class="c1">#æŸ¥çœ‹æ¯ä¸ªtopic feature words</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">mdl</span><span class="o">.</span><span class="n">k</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Top 10 words of topic #</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">mdl</span><span class="o">.</span><span class="n">get_topic_words</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">top_n</span><span class="o">=</span><span class="mi">10</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">    Top 10 words of topic #0
    [(&#39;ä¸€è¾†&#39;, 0.02751251682639122), (&#39;äº‹æ•…&#39;, 0.021704642102122307), (&#39;è®°è€…&#39;, 0.018342189490795135), (&#39;æ­»äº¡&#39;, 0.01650812290608883), (&#39;é€ æˆ&#39;, 0.014062701724469662), (&#39;äººå‘˜&#39;, 0.013909862376749516), (&#39;ç°åœº&#39;, 0.013451346196234226), (&#39;å—ä¼¤&#39;, 0.012687151320278645), (&#39;ç›¸æ’&#39;, 0.011922957375645638), (&#39;è´§è½¦&#39;, 0.011922957375645638)]


â€‹    
â€‹    Top 10 words of topic #1
â€‹    [(&#39;å­¦ç”Ÿ&#39;, 0.02709135226905346), (&#39;é£Ÿç‰©ä¸­æ¯’&#39;, 0.02498047426342964), (&#39;å‡ºç°&#39;, 0.019175563007593155), (&#39;åŒ»é™¢&#39;, 0.016185153275728226), (&#39;äº‹ä»¶&#39;, 0.013546556234359741), (&#39;è°ƒæŸ¥&#39;, 0.013194743543863297), (&#39;å¹´æœˆæ—¥&#39;, 0.012842929922044277), (&#39;æ²»ç–—&#39;, 0.012667023576796055), (&#39;ç—‡çŠ¶&#39;, 0.011787491850554943), (&#39;å&#39;, 0.011259771883487701)]


â€‹    
â€‹    Top 10 words of topic #2
â€‹    [(&#39;ç°åœº&#39;, 0.018848909065127373), (&#39;å‘ç”Ÿ&#39;, 0.01677251048386097), (&#39;åŒ»é™¢&#39;, 0.015015557408332825), (&#39;èµ·ç«&#39;, 0.014216942712664604), (&#39;åŸå› &#39;, 0.012140544131398201), (&#39;ç›®å‰&#39;, 0.012140544131398201), (&#39;æ•‘æ²»&#39;, 0.01150165218859911), (&#39;è¿›è¡Œ&#39;, 0.011022482998669147), (&#39;å&#39;, 0.009425252676010132), (&#39;ç«åŠ¿&#39;, 0.009265529923141003)]


â€‹    
â€‹    Top 10 words of topic #3
â€‹    [(&#39;å‘ç”Ÿ&#39;, 0.03348556533455849), (&#39;çˆ†ç‚¸&#39;, 0.022389251738786697), (&#39;é€ æˆ&#39;, 0.019663840532302856), (&#39;æ­»äº¡&#39;, 0.01713310182094574), (&#39;å—ä¼¤&#39;, 0.016938429325819016), (&#39;å¹´æœˆæ—¥&#39;, 0.016354413703083992), (&#39;è½¿è½¦&#39;, 0.012655640952289104), (&#39;è­¦æ–¹&#39;, 0.012460969388484955), (&#39;è¢­å‡»&#39;, 0.012266295962035656), (&#39;äº‹ä»¶&#39;, 0.011487606912851334)]


â€‹    
â€‹    Top 10 words of topic #4
â€‹    [(&#39;åœ°éœ‡&#39;, 0.047826822847127914), (&#39;å‘ç”Ÿ&#39;, 0.03555167838931084), (&#39;ç«ç¾&#39;, 0.03140682727098465), (&#39;æ—¶åˆ†&#39;, 0.020885275676846504), (&#39;çº§&#39;, 0.015783920884132385), (&#39;æ—¶é—´&#39;, 0.013870910741388798), (&#39;å…¬é‡Œ&#39;, 0.013711493462324142), (&#39;äººå‘˜ä¼¤äº¡&#39;, 0.013073823414742947), (&#39;è®°è€…&#39;, 0.013073823414742947), (&#39;éœ‡æ„Ÿ&#39;, 0.012276736088097095)]
</code></pre></div><br>
<p>æŸ¥çœ‹è¯é¢˜æ¨¡å‹ä¿¡æ¯</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">mdl</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="w">
</span><span class="w">    </span><span class="o">&lt;</span><span class="n">Basic</span><span class="w"> </span><span class="n">Info</span><span class="o">&gt;</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nf">LDAModel</span><span class="w"> </span><span class="p">(</span><span class="n">current</span><span class="w"> </span><span class="n">version</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">12</span><span class="p">.</span><span class="mi">2</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">332</span><span class="w"> </span><span class="n">docs</span><span class="p">,</span><span class="w"> </span><span class="mi">29749</span><span class="w"> </span><span class="n">words</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Total</span><span class="w"> </span><span class="n">Vocabs</span><span class="p">:</span><span class="w"> </span><span class="mi">8428</span><span class="p">,</span><span class="w"> </span><span class="n">Used</span><span class="w"> </span><span class="n">Vocabs</span><span class="p">:</span><span class="w"> </span><span class="mi">2984</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Entropy</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">words</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">.</span><span class="mi">10665</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Entropy</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">term</span><span class="o">-</span><span class="n">weighted</span><span class="w"> </span><span class="n">words</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">.</span><span class="mi">10665</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Removed</span><span class="w"> </span><span class="n">Vocabs</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">NA</span><span class="o">&gt;</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w">    </span><span class="o">&lt;</span><span class="n">Training</span><span class="w"> </span><span class="n">Info</span><span class="o">&gt;</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Iterations</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">Burn</span><span class="o">-</span><span class="k">in</span><span class="w"> </span><span class="n">steps</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Optimization</span><span class="w"> </span><span class="k">Interval</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Log</span><span class="o">-</span><span class="n">likelihood</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">word</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mi">7</span><span class="p">.</span><span class="mi">79934</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w">    </span><span class="o">&lt;</span><span class="n">Initial</span><span class="w"> </span><span class="n">Parameters</span><span class="o">&gt;</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">tw</span><span class="p">:</span><span class="w"> </span><span class="n">TermWeight</span><span class="p">.</span><span class="n">ONE</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">min_cf</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="n">minimum</span><span class="w"> </span><span class="n">collection</span><span class="w"> </span><span class="n">frequency</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">words</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">min_df</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="n">minimum</span><span class="w"> </span><span class="n">document</span><span class="w"> </span><span class="n">frequency</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">words</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">rm_top</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="n">the</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">top</span><span class="w"> </span><span class="n">words</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">removed</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">k</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="p">(</span><span class="n">the</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">topics</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="mi">32767</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">alpha</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="n">hyperparameter</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">Dirichlet</span><span class="w"> </span><span class="n">distribution</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">document</span><span class="o">-</span><span class="n">topic</span><span class="p">,</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="o">`</span><span class="kt">float</span><span class="o">`</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">symmetric</span><span class="w"> </span><span class="n">prior</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="o">`</span><span class="n">k</span><span class="o">`</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="o">`</span><span class="kt">float</span><span class="o">`</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">asymmetric</span><span class="w"> </span><span class="n">prior</span><span class="p">.)</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">eta</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="p">(</span><span class="n">hyperparameter</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">Dirichlet</span><span class="w"> </span><span class="n">distribution</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">topic</span><span class="o">-</span><span class="n">word</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">seed</span><span class="p">:</span><span class="w"> </span><span class="mi">555</span><span class="w"> </span><span class="p">(</span><span class="n">random</span><span class="w"> </span><span class="n">seed</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">trained</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">12</span><span class="p">.</span><span class="mi">2</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w">    </span><span class="o">&lt;</span><span class="n">Parameters</span><span class="o">&gt;</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nf">alpha</span><span class="w"> </span><span class="p">(</span><span class="n">Dirichlet</span><span class="w"> </span><span class="n">prior</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">per</span><span class="o">-</span><span class="n">document</span><span class="w"> </span><span class="n">topic</span><span class="w"> </span><span class="n">distributions</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w">  </span><span class="p">[</span><span class="mi">0</span><span class="p">.</span><span class="mi">7143365</span><span class="w">  </span><span class="mi">0</span><span class="p">.</span><span class="mi">6852513</span><span class="w">  </span><span class="mi">0</span><span class="p">.</span><span class="mi">75089616</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">6204677</span><span class="w">  </span><span class="mi">0</span><span class="p">.</span><span class="mi">7040125</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nf">eta</span><span class="w"> </span><span class="p">(</span><span class="n">Dirichlet</span><span class="w"> </span><span class="n">prior</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">per</span><span class="o">-</span><span class="n">topic</span><span class="w"> </span><span class="n">word</span><span class="w"> </span><span class="n">distribution</span><span class="p">)</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w">  </span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w">
</span><span class="w">    </span><span class="o">&lt;</span><span class="n">Topics</span><span class="o">&gt;</span><span class="w">
</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="c1">#0 (6513) : ä¸€è¾† äº‹æ•… è®°è€… æ­»äº¡ é€ æˆ
</span><span class="c1"></span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="c1">#1 (5655) : å­¦ç”Ÿ é£Ÿç‰©ä¸­æ¯’ å‡ºç° åŒ»é™¢ äº‹ä»¶
</span><span class="c1"></span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="c1">#2 (6231) : ç°åœº å‘ç”Ÿ åŒ»é™¢ èµ·ç« åŸå› 
</span><span class="c1"></span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="c1">#3 (5107) : å‘ç”Ÿ çˆ†ç‚¸ é€ æˆ æ­»äº¡ å—ä¼¤
</span><span class="c1"></span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="c1">#4 (6243) : åœ°éœ‡ å‘ç”Ÿ ç«ç¾ æ—¶åˆ† çº§
</span></code></pre></div><h3 id="topicè§£è¯»">topicè§£è¯»</h3>
<p>æ ¹æ®æ¯ä¸ªè¯é¢˜top10çš„ç‰¹å¾è¯ï¼Œ5ä¸ªè¯é¢˜è§£è¯»ä¸º</p>
<ul>
<li>äº¤é€šäº‹æ•…| #0 (6513) : ä¸€è¾† äº‹æ•… è®°è€… æ­»äº¡ é€ æˆ</li>
<li>é£Ÿå“å®‰å…¨| #1 (5655) : å­¦ç”Ÿ é£Ÿç‰©ä¸­æ¯’ å‡ºç° åŒ»é™¢ äº‹ä»¶</li>
<li>ç«ç¾æ–°é—»| #2 (6231) : ç°åœº å‘ç”Ÿ åŒ»é™¢ èµ·ç« åŸå› </li>
<li>ææ€–è¢­å‡»| #3 (5107) : å‘ç”Ÿ çˆ†ç‚¸ é€ æˆ æ­»äº¡ å—ä¼¤</li>
<li>åœ°éœ‡ç¾å®³| #4 (6243) : åœ°éœ‡ å‘ç”Ÿ ç«ç¾ æ—¶åˆ† çº§</li>
</ul>
<br>
<h2 id="5-å¯è§†åŒ–">5. å¯è§†åŒ–</h2>
<p>ä½¿ç”¨pyLDAvis</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pyLDAvis</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">Warning</span><span class="p">)</span>

<span class="c1">#åœ¨notebookæ˜¾ç¤º</span>
<span class="n">pyLDAvis</span><span class="o">.</span><span class="n">enable_notebook</span><span class="p">()</span>

<span class="c1">#è·å–pyldaviséœ€è¦çš„å‚æ•°</span>
<span class="n">topic_term_dists</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">([</span><span class="n">mdl</span><span class="o">.</span><span class="n">get_topic_word_dist</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">mdl</span><span class="o">.</span><span class="n">k</span><span class="p">)])</span>
<span class="n">doc_topic_dists</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">([</span><span class="n">doc</span><span class="o">.</span><span class="n">get_topic_dist</span><span class="p">()</span> <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">mdl</span><span class="o">.</span><span class="n">docs</span><span class="p">])</span>
<span class="n">doc_topic_dists</span> <span class="o">/=</span> <span class="n">doc_topic_dists</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">keepdims</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">doc_lengths</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">words</span><span class="p">)</span> <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">mdl</span><span class="o">.</span><span class="n">docs</span><span class="p">])</span>
<span class="n">vocab</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">mdl</span><span class="o">.</span><span class="n">used_vocabs</span><span class="p">)</span>
<span class="n">term_frequency</span> <span class="o">=</span> <span class="n">mdl</span><span class="o">.</span><span class="n">used_vocab_freq</span>


<span class="n">prepared_data</span> <span class="o">=</span> <span class="n">pyLDAvis</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span>
    <span class="n">topic_term_dists</span><span class="p">,</span> 
    <span class="n">doc_topic_dists</span><span class="p">,</span> 
    <span class="n">doc_lengths</span><span class="p">,</span> 
    <span class="n">vocab</span><span class="p">,</span> 
    <span class="n">term_frequency</span><span class="p">,</span>
    <span class="n">start_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="c1"># tomotopyè¯é¢˜idä»0å¼€å§‹ï¼ŒpyLDAvisè¯é¢˜idä»1å¼€å§‹</span>
    <span class="n">sort_topics</span><span class="o">=</span><span class="kc">False</span> <span class="c1">#æ³¨æ„ï¼šå¦åˆ™pyLDAvisä¸tomotopyå†…çš„è¯é¢˜æ— æ³•ä¸€ä¸€å¯¹åº”ã€‚ </span>
<span class="p">)</span>


<span class="c1">#å¯è§†åŒ–ç»“æœå­˜åˆ°htmlæ–‡ä»¶ä¸­</span>
<span class="c1">#pyLDAvis.save_html(prepared_data, &#39;ldavis.html&#39;)</span>

<span class="c1">#notebookä¸­æ˜¾ç¤º</span>
<span class="n">pyLDAvis</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">prepared_data</span><span class="p">)</span>
</code></pre></div><p><img loading="lazy" src="img/ldavis.png" alt=""  />
</p>
<br>
<h2 id="6-é¢„æµ‹">6. é¢„æµ‹</h2>
<p>é¢„æµ‹æŸæ–‡æ¡£çš„è¯é¢˜</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">jieba</span>
<span class="kn">from</span> <span class="nn">cntext</span> <span class="kn">import</span> <span class="n">STOPWORDS_zh</span>

<span class="c1">#é¢„æµ‹</span>
<span class="n">doc</span> <span class="o">=</span> <span class="s1">&#39;äº‘å—æ°¸å–„å¿çº§åœ°éœ‡å·²è‡´ä¼¤é—´æ°‘æˆ¿å—æŸä¸­æ–°ç½‘æ—¥ç”µäº‘å—æ˜­é€šå¸‚é˜²éœ‡å‡ç¾å±€å®˜æ–¹ç½‘ç«™æ¶ˆæ¯æ—¥æ—¶äº‘å—æ˜­é€šæ°¸å–„å¿çº§åœ°éœ‡é€ æˆå—ä¼¤é‡ä¼¤è½»ä¼¤é€åŒ»é™¢æ•‘æ²»æ°‘æˆ¿å—æŸæˆ·é—´å€’å¡Œæˆ·é—´ä¹¡é•‡å­¦æ ¡ä¸åŒç¨‹åº¦å—æŸç›®å‰æŸæ¯ç”µåŠ›äº¤é€šé€šè®¯è®¾æ–½æŠ¢é€šä¿®å¤è°ƒæ‹¨å¸ç¯·é¡¶ç´§æ€¥è½¬ç§»ä¸‡äººæ—¶åˆ†äº‘å—æ˜­é€šæ°¸å–„å¿å‘ç”Ÿé‡Œæ°çº§åœ°éœ‡éœ‡æºæ·±åº¦å…¬é‡Œéœ‡æ„Ÿå¼ºçƒˆæˆéƒ½å››å·å¤šåœ°æ˜æ˜¾éœ‡æ„Ÿ&#39;</span>
<span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">jieba</span><span class="o">.</span><span class="n">lcut</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span> <span class="k">if</span> <span class="n">w</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">STOPWORDS_zh</span><span class="p">]</span>

<span class="c1">#æ„é€ tomotopyéœ€è¦çš„æ•°æ®</span>
<span class="n">doc_inst</span> <span class="o">=</span> <span class="n">mdl</span><span class="o">.</span><span class="n">make_doc</span><span class="p">(</span><span class="n">words</span><span class="o">=</span><span class="n">words</span><span class="p">)</span>
<span class="n">topic_dist</span><span class="p">,</span> <span class="n">ll</span> <span class="o">=</span> <span class="n">mdl</span><span class="o">.</span><span class="n">infer</span><span class="p">(</span><span class="n">doc_inst</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Topic Distribution for Unseen Docs: &#34;</span><span class="p">,</span> <span class="n">topic_dist</span><span class="p">)</span>

</code></pre></div><pre><code>Topic Distribution for Unseen Docs:  [0.11645161 0.10240361 0.5342029  0.03622254 0.21071935]
</code></pre>
<p>åˆ—è¡¨é•¿åº¦ä¸º5ï¼Œ åˆ—è¡¨ç¬¬ä¸‰ä¸ªæ•°å€¼(topic #2)æ•°å€¼æœ€å¤§ï¼Œè¯¥æ–‡æœ¬æœ€å¤§çš„å¯èƒ½æ€§æ˜¯topic #2</p>
<br>
<h2 id="è¡¥å……-æŒ‡å®šä¸»é¢˜ç‰¹å¾è¯">è¡¥å……: æŒ‡å®šä¸»é¢˜ç‰¹å¾è¯</h2>
<p>å¦‚æœå¯¹æ•°æ®æ¯”è¾ƒäº†è§£ï¼Œå·²ç»çŸ¥é“æœ‰ä¸€äº›ä¸»é¢˜ï¼Œå¯ä»¥æŠŠæ¯”è¾ƒæ˜æ˜¾çš„è¯è¯­åˆ†é…ç»™æŒ‡å®šçš„topic_idã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">mdl</span> <span class="o">=</span> <span class="n">tp</span><span class="o">.</span><span class="n">LDAModel</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">min_df</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">555</span><span class="p">)</span>

<span class="k">for</span> <span class="n">words</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;words&#39;</span><span class="p">]:</span>
    <span class="k">if</span> <span class="n">words</span><span class="p">:</span>
        <span class="n">mdl</span><span class="o">.</span><span class="n">add_doc</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>

<span class="c1">#æŠŠwordç›¸æ’ åˆ†é…ç»™topic_0, æƒé‡è®¾ç½®ä¸º1ï¼Œ å…¶ä»–topicæƒé‡è®¾ç½®ä¸º0.1</span>
<span class="c1">#æ³¨æ„è¿™é‡Œçš„range(5) 5æ˜¯å¯¹åº”çš„kå€¼</span>
<span class="n">mdl</span><span class="o">.</span><span class="n">set_word_prior</span><span class="p">(</span><span class="s1">&#39;ç›¸æ’&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.0</span> <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="mf">0.1</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)])</span>
<span class="c1">#æŠŠwordåœ°éœ‡ åˆ†é…ç»™topic_1, æƒé‡è®¾ç½®ä¸º1ï¼Œ å…¶ä»–topicæƒé‡è®¾ç½®ä¸º0.1</span>
<span class="n">mdl</span><span class="o">.</span><span class="n">set_word_prior</span><span class="p">(</span><span class="s1">&#39;åœ°éœ‡&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.0</span> <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="mf">0.1</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)])</span>
<span class="c1">#æŠŠwordç«ç¾ åˆ†é…ç»™topic_2, æƒé‡è®¾ç½®ä¸º1ï¼Œ å…¶ä»–topicæƒé‡è®¾ç½®ä¸º0.1</span>
<span class="n">mdl</span><span class="o">.</span><span class="n">set_word_prior</span><span class="p">(</span><span class="s1">&#39;ç«ç¾&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.0</span> <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">2</span> <span class="k">else</span> <span class="mf">0.1</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)])</span>
<span class="c1">#æŠŠwordä¸­æ¯’ åˆ†é…ç»™topic_3, æƒé‡è®¾ç½®ä¸º1ï¼Œ å…¶ä»–topicæƒé‡è®¾ç½®ä¸º0.1</span>
<span class="n">mdl</span><span class="o">.</span><span class="n">set_word_prior</span><span class="p">(</span><span class="s1">&#39;ä¸­æ¯’&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.0</span> <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">3</span> <span class="k">else</span> <span class="mf">0.1</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)])</span>
<span class="c1">#æŠŠwordè¢­å‡» åˆ†é…ç»™topic_4, æƒé‡è®¾ç½®ä¸º1ï¼Œ å…¶ä»–topicæƒé‡è®¾ç½®ä¸º0.1</span>
<span class="n">mdl</span><span class="o">.</span><span class="n">set_word_prior</span><span class="p">(</span><span class="s1">&#39;è¢­å‡»&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.0</span> <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="mf">0.1</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)])</span>

<span class="n">mdl</span><span class="o">.</span><span class="n">train</span><span class="p">()</span>
<span class="n">mdl</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>  
</code></pre></div><pre><code>&lt;Basic Info&gt;
| LDAModel (current version: 0.12.2)
| 332 docs, 29749 words
| Total Vocabs: 8428, Used Vocabs: 2984
| Entropy of words: 7.10665
| Entropy of term-weighted words: 7.10665
| Removed Vocabs: &lt;NA&gt;
|
&lt;Training Info&gt;
| Iterations: 10, Burn-in steps: 0
| Optimization Interval: 10
| Log-likelihood per word: -7.72251
|
&lt;Initial Parameters&gt;
| tw: TermWeight.ONE
| min_cf: 0 (minimum collection frequency of words)
| min_df: 2 (minimum document frequency of words)
| rm_top: 0 (the number of top words to be removed)
| k: 5 (the number of topics between 1 ~ 32767)
| alpha: [0.1] (hyperparameter of Dirichlet distribution for document-topic, given as a single `float` in case of symmetric prior and as a list with length `k` of `float` in case of asymmetric prior.)
| eta: 0.01 (hyperparameter of Dirichlet distribution for topic-word)
| seed: 555 (random seed)
| trained in version 0.12.2
|
&lt;Parameters&gt;
| alpha (Dirichlet prior on the per-document topic distributions)
|  [0.7106193  0.60264444 0.5734784  0.71375024 0.6234263 ]
| eta (Dirichlet prior on the per-topic word distribution)
|  0.01
|
&lt;Topics&gt;
| #0 (6599) : ä¸€è¾† äº‹æ•… æ­»äº¡ å‘ç”Ÿ é€ æˆ
| #1 (6087) : åœ°éœ‡ å‘ç”Ÿ çº§ å…¬é‡Œ å¹´æœˆæ—¥
| #2 (5892) : ç«ç¾ å‘ç”Ÿ ç°åœº å¤§ç« èµ·ç«
| #3 (6402) : åŒ»é™¢ å­¦ç”Ÿ é£Ÿç‰©ä¸­æ¯’ å‡ºç° å
| #4 (4769) : äº‹ä»¶ å‘ç”Ÿ è¢­å‡» äººå‘˜ å·¥ä½œ
|
</code></pre>
<br>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>dvtåº“ |  è§†è§‰æ–‡åŒ–åˆ†æçš„Pythonå·¥å…·åŒ…</title>
      <link>https://hidadeng.github.io/blog/dvt/</link>
      <pubDate>Mon, 03 Jan 2022 20:43:10 +0600</pubDate>
      
      <guid>/blog/dvt/</guid>
      <description>è§†è§‰æ–‡åŒ–åˆ†æçš„Pythonå·¥å…·åŒ…</description>
      <content:encoded><![CDATA[<h2 id="dvt">dvt</h2>
<p>Distant Viewing Toolkit for the Analysis of Visual Culture</p>
<p><strong>è§†è§‰æ–‡åŒ–åˆ†æ</strong>çš„Pythonå·¥å…·åŒ…</p>
<p><a href="https://github.com/distant-viewing/dvt">https://github.com/distant-viewing/dvt</a></p>
<p>è¿œç¨‹ç”µè§†å·¥å…·åŒ…ç”±å‡ ä¸ª Python åŒ…ç»„æˆï¼Œæ—¨åœ¨ä¿ƒè¿›<strong>è§†è§‰æ–‡åŒ–</strong>çš„è®¡ç®—åˆ†æã€‚ å¼€å§‹ä½¿ç”¨è¯¥å·¥å…·åŒ…çš„æœ€ç®€å•æ–¹æ³•æ˜¯åœ¨ <strong>Google çš„åä½œ (Colab) ç¯å¢ƒ</strong>ä¸­è¿è¡Œè¯¥å·¥å…·åŒ…ã€‚ è¿™æ˜¯ä¸€é¡¹å…è´¹ä½¿ç”¨çš„æœåŠ¡ï¼Œå…è®¸æ‚¨ä»¥æœ€å°‘çš„è®¾ç½®åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šè¿è¡Œ Python ä»£ç ã€‚ åªéœ€é€‰æ‹©ä»¥ä¸‹é“¾æ¥ä¹‹ä¸€å³å¯å¼€å§‹ï¼š</p>
<ul>
<li>COLAB ç¬”è®°æœ¬æ¼” <a href="https://colab.research.google.com/drive/1KxYziaozONxMZH8uUaf4PxbW6DyNiZ0k?usp=sharing">https://colab.research.google.com/drive/1KxYziaozONxMZH8uUaf4PxbW6DyNiZ0k?usp=sharing</a></li>
</ul>
<p>æœ‰å…³åœ¨æ‚¨è‡ªå·±çš„æœºå™¨ä¸Šè®¾ç½®å·¥å…·åŒ…çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… INSTALL.mdã€‚ ä»¥ä¸‹é¡µé¢æä¾›äº†æœ‰å…³å·¥å…·åŒ…å’Œé¡¹ç›®çš„æ›´å¤šä¿¡æ¯ï¼š</p>
<ul>
<li>æœç´¢å’Œå‘ç°ç•Œé¢ç¤ºä¾‹ï¼šDVT è§†é¢‘å¯è§†åŒ–</li>
<li>ä½¿ç”¨èšåˆå…ƒæ•°æ®çš„ç¤ºä¾‹åˆ†æï¼šâ€œä¸¤ä¸ªç½‘ç»œæ—¶ä»£æƒ…æ™¯å–œå‰§çš„è§†è§‰é£æ ¼â€</li>
<li>é¡¹ç›®ç†è®ºï¼šâ€œè¿œè·ç¦»è§‚å¯Ÿï¼šåˆ†æå¤§å‹è§†è§‰è¯­æ–™åº“â€ã€‚</li>
<li>è½¯ä»¶ç™½çš®ä¹¦ï¼šç”¨äºåˆ†æè§†è§‰æ–‡åŒ–çš„ Python åŒ…</li>
</ul>
<br>
<h2 id="ç¤ºä¾‹">ç¤ºä¾‹</h2>
<p>å¼€å‘è€…æä¾›çš„colabä»£ç ï¼Œæˆ‘è·‘é€šäº†å›¾ç‰‡æ ‡æ³¨(ä¾‹å¦‚è¯†åˆ«ä¸åŒèº«ä½“éƒ¨ä½)ã€è§†é¢‘è½¬åœº(ä¸åŒç´ ææ‹¼å‡‘)</p>

<figure >
    
        <img src="img/pic1.png" width="800" />
    
    
</figure>


<figure >
    
        <img src="img/pic2.png" width="800" />
    
    
</figure>


<figure >
    
        <img src="img/video.png" width="800" />
    
    
</figure>

<br>
<h2 id="æç¤º">æç¤º</h2>
<p>æœ¬åœ°é…ç½®éš¾åº¦æå¤§ï¼Œå»ºè®®æŒ‰ç…§å¼€å‘è€…æç¤ºï¼Œä½¿ç”¨google colabç¯å¢ƒã€‚å¯èƒ½éœ€è¦å…ˆé…ç½®å¥½ç§‘å­¦ä¸Šç½‘ï¼Œæ‰èƒ½ä½¿ç”¨</p>
<ul>
<li>COLAB ç¬”è®°æœ¬æ¼” <a href="https://colab.research.google.com/drive/1KxYziaozONxMZH8uUaf4PxbW6DyNiZ0k?usp=sharing">https://colab.research.google.com/drive/1KxYziaozONxMZH8uUaf4PxbW6DyNiZ0k?usp=sharing</a></li>
</ul>
<p><br><br></p>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Stargazeråº“ |  åˆ›å»ºæ¼‚äº®å¯å‘è¡¨çš„å¤šå…ƒå›å½’è¡¨</title>
      <link>https://hidadeng.github.io/blog/stargazer/</link>
      <pubDate>Sun, 02 Jan 2022 20:43:10 +0600</pubDate>
      
      <guid>/blog/stargazer/</guid>
      <description>å¯ç”¨äºåˆ›å»ºæ¼‚äº®çš„ã€å¯å‘è¡¨çš„å¤šå…ƒå›å½’è¡¨</description>
      <content:encoded><![CDATA[<h2 id="ä»£ç ä¸‹è½½stargazer_examplesipynb"><a href="Stargazer_examples.ipynb">ä»£ç ä¸‹è½½</a></h2>
<br>
<h2 id="stargazeråº“ä»‹ç»">Stargazeråº“ä»‹ç»</h2>
<p>Rè¯­è¨€æœ‰ä¸€ä¸ªstargazeråŒ…ï¼Œå¯ç”¨äºåˆ›å»ºæ¼‚äº®çš„ã€å¯å‘è¡¨çš„å¤šå…ƒå›å½’è¡¨ã€‚å¦‚ä»Šæœ‰PythonåŒ–çš„stargazeråº“ä¹Ÿå¯åšç±»ä¼¼çš„äº‹ã€‚</p>
<p>ä¸‹å›¾æ˜¯ä½¿ç”¨stargazerç”Ÿæˆçš„æ²¡æœ‰ä»»ä½•æ ·å¼çš„åŸå§‹ç¤ºä¾‹çš„ç¤ºä¾‹ï¼š</p>

<figure >
    
        <img src="img/latex_example.png" width="800" />
    
    
</figure>

<br>
<h2 id="ä»€ä¹ˆæ—¶å€™ä¼šç”¨åˆ°è¿™äº›">ä»€ä¹ˆæ—¶å€™ä¼šç”¨åˆ°è¿™äº›ï¼Ÿ</h2>
<p>äººä»¬å€¾å‘äºä½¿ç”¨Rç‰ˆæœ¬çš„stargazerçš„ä¸»è¦æƒ…å†µæ˜¯åœ¨å­¦æœ¯è®ºæ–‡ä¸­æŠ¥å‘Šå›å½’ç»“æœã€‚ å®ƒå…è®¸æ‚¨è½»æ¾åœ°æ¯”è¾ƒå¤šä¸ªå›å½’ç»“æœï¼Œè¿™æœ‰åŠ©äºæ¯”è¾ƒå…·æœ‰å®éªŒå½±å“çš„æ¨¡å‹ä¸æ²¡æœ‰å½±å“çš„æ¨¡å‹ä¹‹é—´çš„ç»“æœã€‚ è¿™å…è®¸ç”¨æˆ·è½»æ¾æŸ¥çœ‹ç³»æ•°çš„å·®å¼‚ã€ç»Ÿè®¡æ˜¾ç€æ€§ä»¥åŠå®éªŒå¼•å…¥çš„æ–°å˜é‡çš„å½±å“ã€‚</p>
<p>å®ƒç›®å‰æ”¯æŒ LaTeX å’Œ HTML è¾“å‡ºï¼Œstargazerå¼€å‘è€…æœ€ç»ˆæœ€è¡¨æ˜¯ä¹Ÿæ”¯æŒ Markdown å’Œ ASCII æ–‡æœ¬ã€‚</p>
<br>
<h2 id="é¡¹ç›®åœ°å€">é¡¹ç›®åœ°å€</h2>
<p><a href="https://github.com/mwburke/stargazer">https://github.com/mwburke/stargazer</a></p>
<br>
è¯¥åº“å®ç°äº†åŸå§‹åŒ…ä¸­çš„è®¸å¤šè‡ªå®šä¹‰åŠŸèƒ½ã€‚å¤§å¤šæ•°ç¤ºä¾‹å¯ä»¥åœ¨ç¤ºä¾‹ jupyter notebook ä¸­æ‰¾åˆ°ï¼ŒåŠŸèƒ½å‡½æ•°å®Œæ•´åˆ—è¡¨å¦‚ä¸‹ï¼š
<h2 id="stargazeråº“çš„å‡½æ•°">Stargazeråº“çš„å‡½æ•°</h2>
<ul>
<li>show_headerï¼šæ˜¾ç¤ºæˆ–éšè—æ¨¡å‹å¤´æ•°æ®</li>
<li>show_model_numbersï¼šæ˜¾ç¤ºæˆ–éšè—å‹å·</li>
<li>custom_columnsï¼šè‡ªå®šä¹‰æ¨¡å‹åç§°å’Œæ¨¡å‹åˆ†ç»„</li>
<li>significance_levelsï¼šæ›´æ”¹ç»Ÿè®¡æ˜¾ç€æ€§é˜ˆå€¼</li>
<li>significant_digitsï¼šæ›´æ”¹æœ‰æ•ˆæ•°å­—çš„æ•°é‡</li>
<li>show_confidence_intervalsï¼šæ˜¾ç¤ºç½®ä¿¡åŒºé—´ï¼Œè€Œä¸æ˜¯æ–¹å·®</li>
<li>dependent_variable_nameï¼šé‡å‘½åå› å˜é‡</li>
<li>rename_covariates: é‡å‘½ååå˜é‡</li>
<li>covariate_orderï¼šé‡æ–°æ’åºåå˜é‡</li>
<li>reset_covariate_orderï¼šå°†åå˜é‡é¡ºåºé‡ç½®ä¸ºåŸå§‹é¡ºåº</li>
<li>show_degrees_of_freedomï¼šæ˜¾ç¤ºæˆ–éšè—è‡ªç”±åº¦</li>
<li>custom_note_labelï¼šè¡¨æ ¼åº•éƒ¨çš„æ ‡ç­¾æ³¨é‡Šéƒ¨åˆ†</li>
<li>add_custom_notesï¼šå°†è‡ªå®šä¹‰æ³¨é‡Šæ·»åŠ åˆ°è¡¨æ ¼åº•éƒ¨çš„éƒ¨åˆ†</li>
<li>add_lineï¼šå‘è¡¨æ ¼ä¸­æ·»åŠ è‡ªå®šä¹‰è¡Œ</li>
<li>append_notesï¼šæ˜¾ç¤ºæˆ–éšè—ç»Ÿè®¡æ˜¾ç€æ€§é˜ˆå€¼</li>
</ul>
<p>è¿™äº›åŠŸèƒ½ä¸æ¸²æŸ“ç±»å‹æ— å…³ï¼Œæ— è®ºç”¨æˆ·ä»¥ HTMLã€LaTeX ç­‰æ ¼å¼è¾“å‡ºéƒ½å°†åº”ç”¨</p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">stargazer</span>
</code></pre></div><br>
<h2 id="olså›å½’">OLSå›å½’</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">datasets</span>
<span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="nn">sm</span>
<span class="kn">from</span> <span class="nn">stargazer.stargazer</span> <span class="kn">import</span> <span class="n">Stargazer</span>

<span class="n">diabetes</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">load_diabetes</span><span class="p">()</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">diabetes</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="s1">&#39;Sex&#39;</span><span class="p">,</span> <span class="s1">&#39;BMI&#39;</span><span class="p">,</span> <span class="s1">&#39;ABP&#39;</span><span class="p">,</span> <span class="s1">&#39;S1&#39;</span><span class="p">,</span> <span class="s1">&#39;S2&#39;</span><span class="p">,</span> <span class="s1">&#39;S3&#39;</span><span class="p">,</span> <span class="s1">&#39;S4&#39;</span><span class="p">,</span> <span class="s1">&#39;S5&#39;</span><span class="p">,</span> <span class="s1">&#39;S6&#39;</span><span class="p">]</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">diabetes</span><span class="o">.</span><span class="n">target</span>

<span class="n">est</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">endog</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">],</span> <span class="n">exog</span><span class="o">=</span><span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]]))</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">est2</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">endog</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">],</span> <span class="n">exog</span><span class="o">=</span><span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">6</span><span class="p">]]))</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>

<span class="n">stargazer</span> <span class="o">=</span> <span class="n">Stargazer</span><span class="p">([</span><span class="n">est</span><span class="p">,</span> <span class="n">est2</span><span class="p">])</span>
</code></pre></div><pre><code>/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/statsmodels/tsa/tsatools.py:142: FutureWarning: In a future version of pandas all arguments of concat except for the argument 'objs' will be keyword-only
  x = pd.concat(x[::order], 1)
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#åˆ†æç»“æœæ¸²æŸ“æˆhtml</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">HTML</span>
<span class="n">raw_str</span> <span class="o">=</span> <span class="n">stargazer</span><span class="o">.</span><span class="n">render_html</span><span class="p">()</span>
<span class="n">html</span> <span class="o">=</span> <span class="n">HTML</span><span class="p">(</span><span class="n">raw_str</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/html_example.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#åˆ†æç»“æœæ¸²æŸ“æˆlatex</span>
<span class="n">stargazer</span><span class="o">.</span><span class="n">render_latex</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="img/latex_example.png" width="800" />
    
    
</figure>

<p><br><br></p>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://textdata.cn/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>ç¥ç»ç½‘ç»œtextgenrnnåº“ç”Ÿæˆæ–‡æœ¬</title>
      <link>https://hidadeng.github.io/blog/textgenrnn/</link>
      <pubDate>Tue, 28 Dec 2021 06:43:10 +0600</pubDate>
      
      <guid>/blog/textgenrnn/</guid>
      <description> åªéœ€å‡ è¡Œä»£ç ï¼Œå³å¯åœ¨ä»»ä½•æ–‡æœ¬æ•°æ®é›†ä¸Šè½»æ¾è®­ç»ƒæ‚¨è‡ªå·±çš„ä»»æ„å¤§å°å’Œå¤æ‚æ€§çš„æ–‡æœ¬ç”Ÿæˆç¥ç»ç½‘ç»œã€‚ </description>
      <content:encoded><![CDATA[<p>textgenrnnæ˜¯åœ¨Keras/TensorflowåŸºç¡€ä¸Šæ­å»ºçš„PythonåŒ…ï¼Œç‰¹æ€§:</p>
<ul>
<li>æœ‰ç°ä»£çš„ç¥ç»ç½‘ç»œæ¶æ„ï¼Œä½¿ç”¨æ³¨æ„åŠ›æƒé‡å’ŒåµŒå…¥Embeddingæ¥åŠ é€Ÿè®­ç»ƒå’Œæå‡æ¨¡å‹è´¨é‡</li>
<li>æ”¯æŒå­—ç¬¦çº§åˆ«å’Œå•è¯çº§åˆ«çš„è®­ç»ƒ</li>
<li>å¯è®¾ç½®RNNå°ºå¯¸ã€RNNå±‚æ•°ã€æ˜¯å¦ä½¿ç”¨åŒå‘RNN</li>
<li>å¯æ”¯æŒå¯¹ä»»æ„è¾“å…¥æ–‡æœ¬çš„è®­ç»ƒï¼ŒåŒ…æ‹¬å¤§æ–‡ä»¶</li>
<li>å¯ä»¥ä½¿ç”¨GPUè®­ç»ƒï¼Œä½¿ç”¨CPUç”Ÿæˆæ–‡æœ¬</li>
<li>æä¾›åŸºäºGPUçš„cuDNNï¼Œä»¥åŠ é€Ÿæ¨¡å‹è®­ç»ƒ</li>
<li>ä½¿ç”¨æƒ…æ™¯æ ‡ç­¾è®­ç»ƒæ¨¡å‹ï¼Œæ›´å¿«çš„å­¦ä¹ ï¼Œäº§å‡ºæ›´å¥½çš„æ•ˆæœã€‚</li>
</ul>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">pip3</span> <span class="n">install</span> <span class="n">textgenrnn</span>
</code></pre></div><br>
<h2 id="å¿«é€Ÿä¸Šæ‰‹">å¿«é€Ÿä¸Šæ‰‹</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">textgenrnn</span> <span class="kn">import</span> <span class="n">textgenrnn</span>

<span class="n">textgen</span> <span class="o">=</span> <span class="n">textgenrnn</span><span class="p">()</span>
<span class="n">textgen</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[Spoiler] Anyone else find this post and their person that was a little more than I really like the Star Wars in the fire or health and posting a personal house of the 2016 Letter for the game in a report of my backyard.
</code></pre></div><br>
<p>ä½¿ç”¨æ–°æ–‡æœ¬è®­ç»ƒæ–°æ¨¡å‹ä¹Ÿå¾ˆç®€å•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">textgen</span><span class="o">.</span><span class="n">train_from_file</span><span class="p">(</span><span class="s1">&#39;hacker_news_2000.txt&#39;</span><span class="p">,</span> <span class="n">num_epochs</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">textgen</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Project State Project Firefox
</code></pre></div><br>
<p>ç”Ÿæˆ3ä¸ªè®ºæ–‡æ ‡é¢˜æŒ‰ç…§ç–¯ç‹‚ç¨‹åº¦çš„å¢åŠ é¡ºåºï¼ˆtemperatureè¶Šé«˜ï¼Œç”Ÿæˆç®—æ³•åç¦»å­¦ä¹ æ¦‚ç‡åˆ†å¸ƒçš„ç¨‹åº¦è¶Šå¤§)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">textgen.generate(3, temperature=1.0)
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Why we got money â€œregular alterâ€

Urburg to Firefox acquires Nelf Multi Shamn

Kubernetes by Googleâ€™s Bern
</code></pre></div><br>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>å…±è¯çŸ©é˜µ | cntextæ›´æ–°è‡³1.1</title>
      <link>https://hidadeng.github.io/blog/cntext_upgrade/</link>
      <pubDate>Wed, 22 Dec 2021 13:43:10 +0600</pubDate>
      
      <guid>/blog/cntext_upgrade/</guid>
      <description>å…±ç°çŸ©é˜µ </description>
      <content:encoded><![CDATA[<h2 id="cntextæ›´æ–°è‡³11-ç‰ˆæœ¬">cntextæ›´æ–°è‡³1.1 ç‰ˆæœ¬</h2>
<p>æœ¬æ¬¡æ›´æ–°äº†å…±ç°çŸ©é˜µçš„è®¡ç®—å‡½æ•°ã€‚</p>
<p>æ›´æ–°æ–¹æ³•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip3 install cntext --upgrade
</code></pre></div><p>æˆ–æŒ‡å®šç‰ˆæœ¬å®‰è£…</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip3 install cntext==1.1
</code></pre></div><br>
<h2 id="co_occurrence_matrix">co_occurrence_matrix</h2>
<p>è¯å…±ç°çŸ©é˜µ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">cntext.dictionary</span> <span class="kn">import</span> <span class="n">co_occurrence_matrix</span>

<span class="n">documents</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;I go to school every day by bus .&#34;</span><span class="p">,</span>
         <span class="s2">&#34;i go to theatre every night by bus&#34;</span><span class="p">]</span>

<span class="n">co_occurrence_matrix</span><span class="p">(</span><span class="n">documents</span><span class="p">,</span> <span class="n">window_size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/co_occurrence1.png" width="100%" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">documents2</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;ç¼–ç¨‹å¾ˆå¥½ç©&#34;</span><span class="p">,</span>
             <span class="s2">&#34;Pythonæ˜¯æœ€å¥½å­¦çš„ç¼–ç¨‹&#34;</span><span class="p">]</span>

<span class="n">co_occurrence_matrix</span><span class="p">(</span><span class="n">documents2</span><span class="p">,</span> <span class="n">window_size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/co_occurrence2.png" width="100%" />
    
    
</figure>

<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>PhonemizeréŸ³ç´ åŒ– Pythonæ–‡æœ¬è¯­éŸ³è¡¨å¾åŒ…</title>
      <link>https://hidadeng.github.io/blog/phonemizer/</link>
      <pubDate>Mon, 20 Dec 2021 23:43:10 +0600</pubDate>
      
      <guid>/blog/phonemizer/</guid>
      <description> éŸ³ç´ æ˜¯æ„æˆè¯­éŸ³çš„åŸºæœ¬å£°éŸ³ï¼ŒéŸ³èŠ‚å’Œå•è¯å»ºç«‹åœ¨éŸ³èŠ‚ä¸Šã€‚åœ¨ä¸è¯­éŸ³å’Œè¯­è¨€å¤„ç†ç›¸å…³çš„å„ç§åº”ç”¨ï¼ˆä¾‹å¦‚æ–‡æœ¬åˆ°è¯­éŸ³ç³»ç»Ÿï¼‰ä¸­ï¼Œå°†æ–‡æœ¬ä»å…¶æ‹¼å†™å½¢å¼è½¬å½•ä¸ºè¯­éŸ³å­—æ¯è¡¨æ˜¯ä¸€é¡¹é‡è¦è¦æ±‚ã€‚ </description>
      <content:encoded><![CDATA[<h2 id="éŸ³ç´ ">éŸ³ç´ </h2>
<p><strong>éŸ³ç´ </strong>æ˜¯æ„æˆè¯­éŸ³çš„åŸºæœ¬å£°éŸ³ï¼ŒéŸ³èŠ‚å’Œå•è¯å»ºç«‹åœ¨éŸ³èŠ‚ä¸Šã€‚åœ¨ä¸<strong>è¯­éŸ³</strong>å’Œ<strong>è¯­è¨€</strong>å¤„ç†ç›¸å…³çš„å„ç§åº”ç”¨ï¼ˆä¾‹å¦‚<strong>æ–‡æœ¬åˆ°è¯­éŸ³ç³»ç»Ÿ</strong>ï¼‰ä¸­ï¼Œå°†æ–‡æœ¬ä»å…¶æ‹¼å†™å½¢å¼è½¬å½•ä¸ºè¯­éŸ³å­—æ¯è¡¨æ˜¯ä¸€é¡¹é‡è¦è¦æ±‚ã€‚</p>
<p>Phonemizer æ˜¯ä¸€ä¸ªç²¾ç¡®å¯»å€çš„ Python åŒ…, å®ƒå°†æ–‡æœ¬ä»å…¶æ‹¼å†™è¡¨ç¤ºè½¬å½•ä¸ºè¯­éŸ³è¡¨ç¤ºã€‚ è¯¥åŒ…è®¾è®¡ç”¨æˆ·å‹å¥½çš„ï¼Œå¹¶å…¬å¼€äº†ä¸€ä¸ªé«˜çº§éŸ³ç´ åŒ–å‡½æ•°ï¼Œ æ”¯æŒå¤§çº¦100ç§ä¸åŒçš„è¯­è¨€ã€‚phonemizer ä½¿ç”¨çš„é»˜è®¤åç«¯æ˜¯ eSpeak
ï¼ˆDunn &amp; Vitolinsï¼Œ2019 å¹´ï¼‰ï¼Œä¸€ç§åŸºäºè¯­è¨€ä¸“ä¸šçŸ¥è¯†å’Œæ‰‹å†™è½¬å½•è§„åˆ™çš„æ–‡æœ¬è½¬è¯­éŸ³è½¯ä»¶ã€‚å®ƒå°†æ–‡æœ¬è½¬å½•æˆå›½é™…éŸ³æ ‡ï¼Œå¹¶æ”¯æŒä¸€ç™¾å¤šç§è¯­è¨€ã€‚ä½¿ç”¨ MBROLA å£°éŸ³ï¼ˆTits &amp; Vitolinsï¼Œ2019ï¼‰ï¼ŒeSpeak åç«¯å¯ç”¨äºå¤§çº¦ 35 ç§è¯­è¨€ï¼Œä»¥ SAMPA è®¡ç®—æœºå¯è¯»è¯­éŸ³å­—æ¯è¡¨è½¬å½•æ–‡æœ¬ã€‚</p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<p>å®‰è£…phonemizerå‰éœ€è¦é…ç½®espeak-ngï¼Œ</p>
<ul>
<li>win <a href="https://github.com/espeak-ng/espeak-ng/releases">https://github.com/espeak-ng/espeak-ng/releases</a>ä¸‹è½½å¯¹åº”çš„msiæ–‡ä»¶ç‚¹å‡»å®‰è£…</li>
<li>mac é¦–å…ˆé…ç½®å¥½homebrewï¼Œä¹‹åå‘½ä»¤è¡Œbrew install espeak</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip3 install phonemizer
</code></pre></div><h2 id="éŸ³ç´ åŒ–phonemize">éŸ³ç´ åŒ–phonemize</h2>
<p>from phonemizer import phonemize</p>
<p>phonemize(text, language=&lsquo;en-us&rsquo;, prepend_text=False, preserve_punctuation=False, with_stress=False, njobs=1)</p>
<ul>
<li>text æ–‡æœ¬åˆ—è¡¨</li>
<li>language è¯­è¨€ã€‚&ldquo;en-us&quot;ç¾å›½è‹±è¯­ï¼Œ &ldquo;zh&quot;ä¸­æ–‡</li>
<li>prepend_text è¾“å‡ºç»“æœä¿ç•™è¾“å…¥çš„æ–‡æœ¬ï¼Œé»˜è®¤False</li>
<li>preserve_punctuation è¾“å‡ºç»“æœä¿ç•™æ ‡ç‚¹ç¬¦å·ï¼Œé»˜è®¤False</li>
<li>with_stress æ ‡è®°é‡è¯»ï¼Œé»˜è®¤False</li>
<li>njobs å¹¶è¡Œè¿ç®—æ ¸æ•°ï¼Œé»˜è®¤ä½¿ç”¨cpuçš„1ä¸ªæ ¸ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">phonemizer</span> <span class="kn">import</span> <span class="n">phonemize</span>

<span class="n">texts</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;hello, my name is david&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;nice to meet you!&#39;</span><span class="p">]</span>

<span class="c1"># Do this:</span>
<span class="n">phonemized</span> <span class="o">=</span>  <span class="n">phonemize</span><span class="p">(</span><span class="n">texts</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="s1">&#39;en-us&#39;</span><span class="p">)</span>
<span class="n">phonemized</span>
</code></pre></div><p>Run</p>
<pre><code>['hÉ™loÊŠ maÉª neÉªm Éªz deÉªvÉªd ', 'naÉªs tÉ™ miËt juË ']
</code></pre>
<br>
<p>ä½†ä¸Šé¢çš„ç”¨æ³•é€Ÿåº¦è¾ƒæ…¢ï¼Œ æ›´é«˜æ•ˆçš„å†™æ³•åº”è¯¥ä¸º</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">phonemizer.backend</span> <span class="kn">import</span> <span class="n">EspeakBackend</span>
<span class="n">backend</span> <span class="o">=</span> <span class="n">EspeakBackend</span><span class="p">(</span><span class="n">language</span><span class="o">=</span><span class="s1">&#39;en-us&#39;</span><span class="p">)</span>

<span class="n">texts</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;hello, my name is david&#39;</span><span class="p">,</span> 
         <span class="s1">&#39;nice to meet you!&#39;</span><span class="p">]</span>

<span class="n">phonemized</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">phonemize</span><span class="p">(</span><span class="n">texts</span><span class="p">)</span> 
<span class="n">phonemized</span>
</code></pre></div><p>Run</p>
<pre><code>142 Âµs Â± 851 ns per loop (mean Â± std. dev. of 7 runs, 10000 loops each)
</code></pre>
<p>ç»™æ¯ä¸ªå•è¯æ„é€ éŸ³ç´ ï¼Œè¾“å‡ºç»“æœä¸ºå­—å…¸æ ·å¼</p>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">phonemizer.backend</span> <span class="kn">import</span> <span class="n">EspeakBackend</span>
<span class="kn">from</span> <span class="nn">phonemizer.punctuation</span> <span class="kn">import</span> <span class="n">Punctuation</span>
<span class="kn">from</span> <span class="nn">phonemizer.separator</span> <span class="kn">import</span> <span class="n">Separator</span>
<span class="n">backend</span> <span class="o">=</span> <span class="n">EspeakBackend</span><span class="p">(</span><span class="s1">&#39;en-us&#39;</span><span class="p">)</span>

<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;It amused him to think that they were probably talking about him at that very moment&#39;</span>
<span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="n">word</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)]</span>

<span class="c1"># å¿½ç•¥è¯è¯­è¾¹ç•Œï¼ŒéŸ³ç´ ä¹‹é—´ç”¨ç©ºæ ¼é—´éš”</span>
<span class="n">separator</span> <span class="o">=</span> <span class="n">Separator</span><span class="p">(</span><span class="n">phone</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">word</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="n">lexicon</span> <span class="o">=</span> <span class="p">{</span><span class="n">word</span><span class="p">:</span> <span class="n">backend</span><span class="o">.</span><span class="n">phonemize</span><span class="p">([</span><span class="n">word</span><span class="p">],</span> <span class="n">separator</span><span class="o">=</span><span class="n">separator</span><span class="p">,</span> <span class="n">strip</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
           <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">}</span>

<span class="n">lexicon</span>
</code></pre></div><p>Run</p>
<pre><code>{'it': 'Éª t',
 'amused': 'É m j uË s d',
 'him': 'h Éª m',
 'to': 't uË',
 'think': 'Î¸ Éª Å‹ k',
 'that': 'Ã° Ã¦ t',
 'they': 'Ã° eÉª',
 'were': 'w ÉœË',
 'probably': 'p É¹ É‘Ë b É™ b l i',
 'talking': 't É”Ë k Éª Å‹',
 'about': 'É b aÊŠ t',
 'at': 'Ã¦ t',
 'very': 'v É› É¹ i',
 'moment': 'm oÊŠ m É™ n t'}
</code></pre>
<br>
<h2 id="ä¸­æ–‡çš„éŸ³ç´ åŒ–">ä¸­æ–‡çš„éŸ³ç´ åŒ–</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">text_zhs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ä½ å¥½æˆ‘çš„åå­—æ˜¯å¤§å«&#39;</span><span class="p">,</span> 
            <span class="s1">&#39;å¾ˆé«˜å…´è®¤è¯†ä½ &#39;</span><span class="p">]</span>

<span class="n">phonemized_zhs</span> <span class="o">=</span> <span class="n">phonemize</span><span class="p">(</span><span class="n">text_zhs</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="s1">&#39;zh&#39;</span><span class="p">)</span>
<span class="n">phonemized_zhs</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[&#39;ni2 xÉ‘u2 wo2 tÉ™1 miÉœÅ‹ tsiÌª5 s.i.5 tÉ‘5 wei5 &#39;,
 &#39;xÉ™2n kÉ‘u5 É•i5Å‹ ÊÉ™5n s.i.1 ni2 &#39;]
</code></pre></div><br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">phonemizer.backend</span> <span class="kn">import</span> <span class="n">EspeakBackend</span>
<span class="kn">from</span> <span class="nn">phonemizer.punctuation</span> <span class="kn">import</span> <span class="n">Punctuation</span>
<span class="kn">from</span> <span class="nn">phonemizer.separator</span> <span class="kn">import</span> <span class="n">Separator</span>
<span class="kn">import</span> <span class="nn">re</span>


<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;æƒ³åˆ°ä»–ä»¬å¯èƒ½åœ¨é‚£ä¸ªæ—¶å€™è°ˆè®ºä»–ï¼Œä»–è§‰å¾—å¥½ç¬‘&#39;</span>
<span class="n">words</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;[</span><span class="se">\u4e00</span><span class="s1">-</span><span class="se">\u9fa5</span><span class="s1">]&#39;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>


<span class="n">backend</span> <span class="o">=</span> <span class="n">EspeakBackend</span><span class="p">(</span><span class="s1">&#39;zh&#39;</span><span class="p">)</span>

<span class="n">separator</span> <span class="o">=</span> <span class="n">Separator</span><span class="p">(</span><span class="n">phone</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">word</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="c1"># æ„å»ºæ¯ä¸ªæ±‰å­—ä¸€ä¸ªå¯¹åº”çš„éŸ³ç´ è¡¨è¾¾ï¼Œè¾“å‡ºç»“æœä¸ºå­—å…¸æ ·å¼</span>
<span class="n">lexicon</span> <span class="o">=</span> <span class="p">{</span><span class="n">word</span><span class="p">:</span> <span class="n">backend</span><span class="o">.</span><span class="n">phonemize</span><span class="p">([</span><span class="n">word</span><span class="p">],</span> <span class="n">separator</span><span class="o">=</span><span class="n">separator</span><span class="p">,</span> <span class="n">strip</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
           <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">}</span>

<span class="n">lexicon</span>
</code></pre></div><p>Run</p>
<pre><code>{'æƒ³': 'É• iÉ‘2 Å‹ ',
 'åˆ°': 't É‘u5 ',
 'ä»–': 'th É‘5 ',
 'ä»¬': 'm É™1 n ',
 'å¯': 'kh o2 ',
 'èƒ½': 'n É™Éœ Å‹ ',
 'åœ¨': 'ts ai5 ',
 'é‚£': 'n É‘5 ',
 'ä¸ª': 'k o1 ',
 'æ—¶': 's. i.Éœ ',
 'å€™': 'x ou5 ',
 'è°ˆ': 'th aÉœ n ',
 'è®º': 'l uÉ™5 n ',
 'è§‰': 'tÉ• yÉ›Éœ ',
 'å¾—': 't É™1 ',
 'å¥½': 'x É‘u2 ',
 'ç¬‘': 'É• j É‘u5 '}
</code></pre>
<br>
<h2 id="å¿ƒç†å­¦ç›¸å…³æ¦‚å¿µ">å¿ƒç†å­¦ç›¸å…³æ¦‚å¿µ</h2>
<p>è¿™ä¸ªåŒ…ç”¨èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯æƒ³åˆ°ä¸€ä¸ªåœºæ™¯ï¼Œè¯´ä¸å®šå¯ä»¥å¤šä¸ªè§’åº¦å»åˆ†ææ–‡æœ¬ã€‚</p>
<p>ç»å¸¸çœ‹æ–‡æœ¬çš„æ—¶å€™ï¼Œè„‘æµ·é‡Œä¸è‡ªè§‰çš„è¯»å‡ºå£°éŸ³ï¼Œè¿™ç§ç°è±¡ä»Šå¤©æŸ¥äº†ä¸‹å«åšâ€œå¬è§‰è¡¨è±¡â€ï¼Œå¬è§‰è¡¨è±¡äº§ç”Ÿäºè¯­è¨€çš„è§†è§‰åŒºå’Œè¯­è¨€çš„è¿åŠ¨åŒºâ€”â€”è§’å›å’Œå¸ƒæ´›å¡åŒºã€‚é€šè¿‡å¬è§‰ï¼Œå¬å‡ºç›¸åº”çš„å­—çš„å£°éŸ³ï¼Œæˆ‘ä»¬å°±å¯ä»¥é¢†ä¼šåˆ°è¿™å¥è¯çš„æ„æ€ã€‚ä»å¸¸äººçš„ç”Ÿé•¿å‘è‚²çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬éƒ½æ˜¯å…ˆç‰™ç‰™å­¦è¯­ï¼Œé€šè¿‡å£°éŸ³ç†è§£å†…å®¹çš„å«ä¹‰ï¼Œè€Œåç»è¿‡åæ•°æ•™è‚²å­¦ä¼šè¯­è¨€ä¹¦é¢æ–‡å­—ï¼ŒæŒæ¡æ–‡å­—ç³»ç»Ÿï¼Œæ­¤æ—¶æˆ‘ä»¬çš„ç¥ç»å›è·¯æ˜¯â€œè§†è§‰(å¬è§‰)~è®°å¿†~ç†è§£â€</p>
<p>å¯¹ä¸€ä¸ªä¸œè¥¿çš„â€œçŸ¥è§‰â€åœ¨å¿ƒç†å­¦ä¸Šå«åšè¿™ä¸ªä¸œè¥¿çš„â€œçŸ¥è§‰è¡¨å¾â€ï¼Œç›¸å½“äºæ˜¯æŠŠè¿™ä¸ªä¸œè¥¿è½¬ç ä¸ºäº†ä¸€ä¸ªï¼Œç”¨äºåç»­åœ¨å¿ƒç†ä¸Šå¯¹è¿™ä¸ªä¸œè¥¿è¿›è¡ŒåŠ å·¥ã€‚è¿™ä¸ªå¿ƒç†ç¬¦å·çš„ç¼–ç ä¸è¿™ä¸ªä¸œè¥¿æœ¬èº«çš„ç‰¹å¾ä»¥åŠæœ€åˆçš„æ„Ÿè§‰é€šé“æœ‰å…³â€”â€”ä¸€ä¸ªçœŸæ­£çš„è‹¹æœå¸¸ä¼šè¢«ä»¥è§†è§‰çš„æ–¹å¼ç¼–ç ï¼Œæˆä¸ºä¸€ä¸ªè§†è§‰çŸ¥è§‰è¡¨å¾ï¼Œå¯ä»¥ç®€å•ç†è§£æˆè¿™ä¸ªè‹¹æœçš„å›¾åƒï¼›ä¸€ä¸ªè¯â€œè‹¹æœâ€å¸¸ä¼šè¢«ä»¥å¬è§‰çš„æ–¹å¼ç¼–ç ï¼Œæˆä¸ºä¸€ä¸ªAVLå•å…ƒï¼Œå¯ä»¥ç®€å•åœ°ç†è§£æˆæŠŠâ€œè‹¹æœâ€è¿™ä¸¤ä¸ªå­—å’Œâ€œpingâ€™guoâ€è¿™ä¸ªè¯»éŸ³æ‰“åŒ…åœ¨ä¸€èµ·çš„ä¸€ä¸ªæ–‡ä»¶ã€‚</p>
<p>æ„Ÿè§‰ä»£ç è¢«ç»è¿‡æŸäº›å¤„ç†åå‚¨å­˜åœ¨è®°å¿†å½“ä¸­ï¼Œå½“æœ‰ä¸€å¤©éœ€è¦ç”¨çš„æ—¶å€™å†è¢«ä»è®°å¿†é‡Œæå–å‡ºæ¥ã€‚è¿™ä¸ªæ—¶å€™çš„æå–ï¼Œæœ¬èº«æ˜¯ä¸€ç§å»ºæ„ï¼Œä¹Ÿå°±æ˜¯ä¸å°†æ„Ÿè§‰å¤„ç†åå­˜å‚¨èµ·æ¥çš„ä¸€ä¸ªç›¸åçš„è¿‡ç¨‹â€”â€”æ‰€ä»¥å¿ƒç†å­¦ä¸ŠæŠŠæˆ‘ä»¬æ‰€æå–ï¼ˆå»ºæ„ï¼‰çš„è¿™ä¸ªä»£ç å°±ç§°ä¸ºè¡¨è±¡ã€‚è¡¨è±¡å’ŒçŸ¥è§‰æ˜¯æœºèƒ½ç­‰ä»·çš„ï¼ˆNeisserï¼Œ1972ï¼‰ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºè¡¨è±¡å°±æ˜¯æ˜¯ä¸€ç§åŸºäºè¿‡å»ç»éªŒçš„çŸ¥è§‰ã€‚è¿™ä¹Ÿè§£é‡Šäº†æˆ‘ä»¬é»˜è¯»è¯æ±‡çš„æ—¶å€™ï¼Œè¿™ä¸ªAVLå•å…ƒé‡Œâ€œè¯­éŸ³â€çš„éƒ¨åˆ†æ˜¯å“ªé‡Œæ¥çš„äº†â€”â€”è¿™æ˜¯æˆ‘ä»¬åŸºäºå¯¹è‡ªå·±å£°éŸ³çš„äº†è§£è€Œå»ºæ„çš„ä¸€ç§å¬è§‰è¡¨è±¡ã€‚ç®€å•æ¥è¯´è¿™ä¸ªè¯­éŸ³å°±æ˜¯æ ¹æ®æˆ‘ä»¬å¯¹è‡ªå·±å£°éŸ³çš„è®¤è¯†ï¼Œæ¥â€œæƒ³è±¡â€çš„è¯»å‡ºæ¥çš„å£°éŸ³ã€‚</p>
<blockquote>
<p>çŸ¥ä¹å›ç­”-å¿ƒç†å­¦å“ˆå£«å¥‡</p>
<p>Conrad R (1963). Acoustic confusions and memory span for words. Nature, 197: 1029-1030.</p>
<p>Neisser U (1972). Changing conception of imagery. In P W Sheehan (ED), The Function and Nature of Imagery. London: Achademic Press.
çŸ¥ä¹å›ç­”-å¿ƒç†å­¦å“ˆå£«å¥‡</p>
</blockquote>
<br>
<h2 id="å¼•ç”¨æ ¼å¼">å¼•ç”¨æ ¼å¼</h2>
<p>Bernard, M. and Titeux, H. (2021). Phonemizer: Text to phones transcription for multiple languages in python. Journal of Open Source Software, 6(68):3958.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-tex" data-lang="tex">@article<span class="nb">{</span>Bernard2021,
  doi = <span class="nb">{</span>10.21105/joss.03958<span class="nb">}</span>,
  url = <span class="nb">{</span>https://doi.org/10.21105/joss.03958<span class="nb">}</span>,
  year = <span class="nb">{</span>2021<span class="nb">}</span>,
  publisher = <span class="nb">{</span>The Open Journal<span class="nb">}</span>,
  volume = <span class="nb">{</span>6<span class="nb">}</span>,
  number = <span class="nb">{</span>68<span class="nb">}</span>,
  pages = <span class="nb">{</span>3958<span class="nb">}</span>,
  author = <span class="nb">{</span>Mathieu Bernard and Hadrien Titeux<span class="nb">}</span>,
  title = <span class="nb">{</span>Phonemizer: Text to Phones Transcription for Multiple Languages in Python<span class="nb">}</span>,
  journal = <span class="nb">{</span>Journal of Open Source Software<span class="nb">}</span>
<span class="nb">}</span>
</code></pre></div><br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>OMNIZART: éŸ³ä¹è½¬å½•å˜å¾—å®¹æ˜“</title>
      <link>https://hidadeng.github.io/blog/omnizart/</link>
      <pubDate>Mon, 20 Dec 2021 22:43:10 +0600</pubDate>
      
      <guid>/blog/omnizart/</guid>
      <description> Omnizart æ˜¯ä¸€ä¸ª Python åº“ï¼Œæ˜¯è‡ªåŠ¨éŸ³ä¹è½¬å½•çš„ç®€åŒ–è§£å†³æ–¹æ¡ˆ</description>
      <content:encoded><![CDATA[
<figure >
    
        <img src="img/OMNIZART.png" width="100%" />
    
    
</figure>

<p>Omnizart æ˜¯ä¸€ä¸ª Python åº“ï¼Œæ˜¯è‡ªåŠ¨éŸ³ä¹è½¬å½•çš„ç®€åŒ–è§£å†³æ–¹æ¡ˆã€‚è¯¥åº“æ”¶é›†äº†<strong>éŸ³ä¹ä¸æ–‡åŒ–æŠ€æœ¯å®éªŒå®¤</strong>(<a href="https://sites.google.com/view/mctl/home">https://sites.google.com/view/mctl/home</a>)çš„ç ”ç©¶æˆæœï¼Œåˆ†æå’Œå¼¦éŸ³ä¹å¹¶è½¬å½•<strong>ä¹å™¨çš„éŸ³ç¬¦ ã€å’Œå¼¦ ã€drum eventsã€å¸§çº§äººå£°æ—‹å¾‹ã€éŸ³ç¬¦çº§äººå£°æ—‹å¾‹</strong>ã€‚</p>
<p>Omnizart æä¾›æ„å»ºåŸºäºæ·±åº¦å­¦ä¹ çš„éŸ³ä¹è½¬å½•ç”Ÿå‘½å‘¨æœŸçš„ä¸»è¦åŠŸèƒ½ï¼Œæ¶µç›–ä»<em>æ•°æ®é›†ä¸‹è½½</em>ã€<em>ç‰¹å¾é¢„å¤„ç†</em>ã€<em>æ¨¡å‹è®­ç»ƒ</em>ã€<em>è½¬å½•</em>å’Œ<em>å£°éŸ³åŒ–</em>ã€‚è¿˜æä¾›äº†é¢„å…ˆè®­ç»ƒçš„æ£€æŸ¥ç‚¹ï¼Œä»¥ä¾¿ç«‹å³ä½¿ç”¨è½¬å½•ã€‚è¯¥è®ºæ–‡å¯ä»¥ä» <a href="https://doi.org/10.21105/joss.03391">Journal of Open Source Software (JOSS)</a> ä¸­æ‰¾åˆ°ã€‚</p>
<br>
<h2 id="æ¼”ç¤º">æ¼”ç¤º</h2>
<h3 id="colab">Colab</h3>
<p>ä½¿ç”¨ <strong>Colab notebook</strong> <a href="https://bit.ly/OmnizartColab">https://bit.ly/OmnizartColab</a>å‡ ä¹å¯ä»¥ç«‹å³è½¬å½•æ‚¨æœ€å–œæ¬¢çš„æ­Œæ›²ï¼</p>
<br>
<h2 id="å£°éŸ³æ ·æœ¬">å£°éŸ³æ ·æœ¬</h2>
<p>åŸå£°</p>
<p><video id="video" controls="" preload="none" type="video/mp4"> <source id="mp4" src="img/Highway_No_9.mp4" type="video/mp4"> </video></p>
<p>å’Œå¼¦è½¬å½•</p>
<audio id="audio" controls="" preload="none">
      <source id="mp3" src="img/high_chord_synth.mp3">
</audio>
<p>é¼“ç‚¹è½¬å½•</p>
<audio id="audio" controls="" preload="none">
      <source id="mp3" src="img/high_drum_synth.mp3">
</audio>
<p>éŸ³ç¬¦çº§äººå£°è½¬å½•</p>
<audio id="audio" controls="" preload="none">
      <source id="mp3" src="img/high_vocal_synth.mp3">
</audio>
<p>å¸§çº§è¯­éŸ³è½¬å½•</p>
<audio id="audio" controls="" preload="none">
      <source id="mp3" src="img/high_vocal_contour.mp3">
</audio>
<p>Source files can be downloaded <a href="https://drive.google.com/file/d/15VqHearznV9L83cyl61ccACsXXJ4vBHo/view?usp=sharing">here</a>. You can use <em>Audacity</em> to open the files.</p>
<p><br><br></p>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>éŸ³é¢‘å¯è§†åŒ–ï¼šé‡‡æ ·ã€é¢‘ç‡å’Œå‚…é‡Œå¶å˜æ¢</title>
      <link>https://hidadeng.github.io/blog/voice2pic/</link>
      <pubDate>Mon, 20 Dec 2021 10:43:10 +0600</pubDate>
      
      <guid>/blog/voice2pic/</guid>
      <description>ä¸»é¢˜å»ºæ¨¡å’Œè¯­ä¹‰æœç´¢åº“</description>
      <content:encoded><![CDATA[<blockquote>
<p>author:cj1128</p>
<p>Github: <a href="https://github.com/cj1128">https://github.com/cj1128</a></p>
<p>Blog: <a href="https://cjting.me/">https://cjting.me/</a></p>
<p>src: <a href="https://cjting.me/2021/08/07/fourier-transform-and-audio-visualization/">https://cjting.me/2021/08/07/fourier-transform-and-audio-visualization/</a></p>
</blockquote>
<p>å°è±¡ä¸­ä½¿ç”¨çš„ç¬¬ä¸€ä¸ª PC éŸ³ä¹æ’­æ”¾å™¨æ˜¯ã€Œåƒåƒé™å¬ã€ï¼Œå¤§æ¦‚æ˜¯ 08 å¹´å·¦å³ã€‚æˆ‘è¿˜æ¸…æ¥šåœ°è®°å¾—å®ƒè‡ªå¸¦äº†ä¸€é¦–æ¢é™èŒ¹çš„æ­Œã€ŒLove is everythingã€ï¼ŒåŠ¨å¬çš„æ—‹å¾‹è‡³ä»Šè¦ç»•è€³æ—ã€‚</p>

<figure >
    
        <img src="img/qianqian.jpeg" width="100%" />
    
    
</figure>

<p>åƒåƒé™å¬çš„å·¦ä¸Šè§’æœ‰ä¸€ç»„éšç€éŸ³ä¹è·³åŠ¨çš„æŸ±å­ï¼Œæˆ‘æƒ³å¤§å®¶éƒ½ä¹ ä»¥ä¸ºå¸¸äº†ï¼Œå¾ˆå¤šæ’­æ”¾å™¨éƒ½æœ‰è¿™åŠŸèƒ½ã€‚ä½†æ˜¯å…¶å®æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œè¿™æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</p>
<p>è¦ç†è§£è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é¦–å…ˆè¦ç†è§£å£°éŸ³æ˜¯ä»€ä¹ˆã€‚</p>
<br>
<h2 id="æ³¢">æ³¢</h2>
<p>ä¸­å­¦ç‰©ç†æœ‰ä»‹ç»è¿‡ï¼Œå£°éŸ³æ˜¯ç”±ç‰©ä½“æŒ¯åŠ¨äº§ç”Ÿçš„ï¼Œè¿™ä¸ªæŒ¯åŠ¨ç»ç”±ä»‹è´¨ä¼ å¯¼åˆ°æˆ‘ä»¬çš„è€³æœµä¸­å¼•èµ·è€³è†œæŒ¯åŠ¨ä»è€Œè®©æˆ‘ä»¬å¬è§å£°éŸ³ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç”¨æ³¢å½¢æ¥æè¿°æŒ¯åŠ¨ï¼Œå…¶ä¸­æ¨ªè½´æ˜¯æ—¶é—´ï¼Œçºµè½´æ˜¯æŒ¯åŠ¨çš„ä½ç§»ï¼Œä¹Ÿå°±æ˜¯ç¦»å¼€åŸç‚¹çš„è·ç¦»ã€‚</p>
<p>æŒ¯åŠ¨çš„ä¸¤ä¸ªå…³é”®å±æ€§æ˜¯é¢‘ç‡å’ŒæŒ¯å¹…ï¼Œé¢‘ç‡æ˜¯æŒ‡ä¸€ç§’é’ŸæŒ¯åŠ¨å¤šå°‘æ¬¡ï¼Œå¯¹åº”äºéŸ³é«˜ï¼Œé¢‘ç‡è¶Šé«˜å£°éŸ³è¶Šå°–é”åˆºè€³ã€‚</p>
<p>æŒ¯å¹…åˆ™è¡¨ç¤ºæœ€å¤§çš„ä½ç§»å€¼ï¼Œå¯¹åº”äºéŸ³é‡ï¼ŒæŒ¯å¹…è¶Šå¤§å£°éŸ³è¶Šå“ã€‚</p>

<figure >
    
        <img src="img/200hz.png" width="100%" />
    
    
</figure>

<p>ä¸Šå›¾æ˜¯ç”¨ <a href="https://matplotlib.org/">matplotlib</a> ç»˜åˆ¶çš„ä¸€ä¸ªæ­£å¼¦æ³¢ï¼Œå¯ä»¥çœ‹å‡ºåœ¨ 0.01s å†…æŒ¯åŠ¨äº† 2 æ¬¡ï¼Œå› æ­¤é¢‘ç‡æ˜¯ 200ï¼ŒæŒ¯å¹…æ˜¯ 1ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">sin_wave</span><span class="p">(</span><span class="n">hz</span><span class="p">):</span>
  <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">hz</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&#34;Time&#34;</span><span class="p">)</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">sin_wave</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
</code></pre></div><p>è¿™ç§æœ€ç®€å•çš„æ³¢å½¢å¯¹åº”çš„å£°éŸ³å«åš pure toneï¼Œé¡¾åæ€ä¹‰ï¼Œéå¸¸çš„ç®€å•è€Œä¸”çº¯ç²¹ã€‚</p>
<p>ä¸‹é¢æ˜¯ç”¨ <a href="https://www.scipy.org/">scipy</a> ç”Ÿæˆçš„ 200hz çš„å£°éŸ³ï¼Œå¤§å®¶å¯ä»¥å¬å¬çœ‹ã€‚</p>
<audio id="audio" controls="" preload="none">
      <source id="wav" src="img/200hz.wav">
</audio>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">scipy.io.wavfile</span> <span class="k">as</span> <span class="nn">wav</span>

<span class="n">SAMPLE_RATE</span> <span class="o">=</span> <span class="mi">44100</span>
<span class="n">DURATION</span> <span class="o">=</span> <span class="mi">5</span>

<span class="k">def</span> <span class="nf">write_wav</span><span class="p">(</span><span class="n">hz</span><span class="p">):</span>
  <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">DURATION</span><span class="p">,</span> <span class="n">SAMPLE_RATE</span> <span class="o">*</span> <span class="n">DURATION</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
  <span class="n">tone</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">hz</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
  <span class="n">normalized_tone</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">((</span><span class="n">tone</span> <span class="o">/</span> <span class="n">tone</span><span class="o">.</span><span class="n">max</span><span class="p">())</span> <span class="o">*</span> <span class="mi">32767</span><span class="p">)</span>
  <span class="n">wav</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">hz</span><span class="si">}</span><span class="s2">hz.wav&#34;</span><span class="p">,</span> <span class="n">SAMPLE_RATE</span><span class="p">,</span> <span class="n">normalized_tone</span><span class="p">)</span>

<span class="n">write_wav</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
</code></pre></div><p>è¿™æ˜¯ 800hz çš„å£°éŸ³ï¼Œå¯ä»¥æ˜æ˜¾æ„Ÿè§‰åˆ°ï¼Œå£°éŸ³æ›´åŠ å°–é”äº†ã€‚</p>
<audio id="audio" controls="" preload="none">
      <source id="wav" src="img/800hz.wav">
</audio>
<p>ç°å®ä¸–ç•Œä¸­æˆ‘ä»¬å¬åˆ°çš„å£°éŸ³ä¸ä¼šæ˜¯ pure toneï¼Œè€Œæ˜¯å„ç§ pure tone å åŠ çš„ç»“æœã€‚</p>
<p>ä¸‹å›¾ä¸­è“è‰²æ˜¯ 200hzï¼Œé»„è‰²æ˜¯ 800hzï¼Œè€Œç»¿è‰²åˆ™æ˜¯å®ƒä»¬å åŠ çš„ç»“æœï¼Œå·²ç»ä¸å†æ˜¯ä¸€ä¸ª pure tone äº†ã€‚</p>

<figure >
    
        <img src="img/200-add-800hz.png" width="100%" />
    
    
</figure>

<p>ä¸‹é¢æ˜¯ç»¿è‰²æ›²çº¿å¬èµ·æ¥çš„æ•ˆæœã€‚</p>
<audio id="audio" controls="" preload="none">
      <source id="wav" src="img/mixed.wav">
</audio>
<p>æ€»ç»“ä¸€ä¸‹ï¼š</p>
<ul>
<li>æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæ³¢å½¢å›¾æ¥è¡¨ç¤ºå£°éŸ³ï¼Œå…¶ä¸­ X è½´æ˜¯æ—¶é—´ï¼ŒY è½´æ˜¯æŒ¯åŠ¨çš„ä½ç§»</li>
<li>æœ€ç®€å•çš„æ­£å¼¦æ³¢å¯¹åº”çš„å£°éŸ³å«åš pure tone</li>
<li>æ—¥å¸¸ä¸­æˆ‘ä»¬å¬åˆ°çš„å£°éŸ³éƒ½æ˜¯å„ç§ pure tone å åŠ çš„ç»“æœ</li>
</ul>
<p>Tip:</p>
<p>å¦‚æœæƒ³äº†è§£ä¸€ç‚¹ä¹ç†ï¼Œ<a href="https://www.lightnote.co/music-theory/sound-waves">LIGHTNOTE</a> éå¸¸ä¸é”™ã€‚</p>
<p>å®ƒçš„ç½‘é¡µåšå¾—å¾ˆæ£’ï¼Œé€šè¿‡äº’åŠ¨çš„å½¢å¼è®²è¿°åŸºæœ¬çš„ä¹ç†çŸ¥è¯†ï¼ŒåŒ…æ‹¬éŸ³é˜¶ã€å’Œå¼¦ï¼ŒåäºŒå¹³å‡å¾‹ç­‰ã€‚</p>
<br>
<h2 id="é‡‡æ ·">é‡‡æ ·</h2>
<p>å› ä¸ºå£°éŸ³æ˜¯ä¸€ä¸ªéšæ—¶é—´å˜åŒ–çš„è¿ç»­å‡½æ•°ï¼Œä»»æ„ä¸€æ®µé—´éš”å†…éƒ½æœ‰æ— ç©·å¤šä¸ªå€¼ï¼Œè€Œæ— ç©·å¤šçš„æ•°æ®æ˜¯æ²¡åŠæ³•å­˜å‚¨åœ¨è®¡ç®—æœºä¸­çš„ã€‚</p>
<p>æƒ³è¦å­˜å‚¨ï¼Œæˆ‘ä»¬å°±éœ€è¦å°†å®ƒç¦»æ•£åŒ–å˜æˆç¦»æ•£åºåˆ—ï¼Œå…·ä½“çš„æ–¹æ³•å°±æ˜¯é‡‡æ ·ï¼Œä½¿ç”¨å›ºå®šçš„é—´éš”å¯¹å‡½æ•°è¿›è¡Œæ±‚å€¼ã€‚</p>
<p>è¿™æ˜¯åŸå§‹çš„å£°éŸ³ã€‚</p>

<figure >
    
        <img src="img/origin.png" width="100%" />
    
    
</figure>

<p>è¿™æ˜¯é‡‡æ ·åçš„ç»“æœã€‚</p>

<figure >
    
        <img src="img/sampled.png" width="100%" />
    
    
</figure>

<p>é€šè¿‡é‡‡æ ·ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªæ— å°½åºåˆ—å˜æˆäº†ä¸€ä¸ªæœ‰é™åºåˆ—ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªå€¼å«åšæ ·æœ¬ï¼Œè¿™æ ·å°±å¯ä»¥æ–¹ä¾¿åœ°åœ¨è®¡ç®—æœºä¸­å­˜å‚¨äº†ã€‚</p>
<p>é‡‡æ ·çš„å…³é”®å‚æ•°æœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯é‡‡æ ·é¢‘ç‡å’Œé‡‡æ ·æ·±åº¦ã€‚</p>
<p>é‡‡æ ·é¢‘ç‡æ˜¯æŒ‡æ¯ç§’é’Ÿé‡‡æ ·å¤šå°‘æ¬¡ï¼Œå¾ˆæ˜æ˜¾ï¼Œé‡‡æ ·é¢‘ç‡è¶Šé«˜ï¼Œæ ·æœ¬è¶Šå¤šï¼Œæ•°æ®é‡è¶Šå¤§ï¼ŒåŒæ—¶ä¹Ÿæ›´æ¥è¿‘åŸå§‹çš„å£°éŸ³ã€‚</p>
<p>é‡‡æ ·æ·±åº¦æ˜¯æŒ‡ç”¨å¤šå°‘æ¯”ç‰¹å»å­˜å‚¨é‡‡æ ·å¾—åˆ°çš„å€¼ï¼Œä½¿ç”¨çš„æ¯”ç‰¹è¶Šå¤šï¼Œè¿˜åŸå¾—åˆ°çš„å£°éŸ³è¶Šç»†è…»ï¼Œå’Œå›¾ç‰‡çš„è‰²å½©æ·±åº¦æ˜¯ä¸€ä¸ªé“ç†ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬ç”¨ 16bit é‡‡æ ·æ·±åº¦å’Œ 44100 çš„é‡‡æ ·é¢‘ç‡ï¼Œé‚£ä¹ˆä¸€æ®µä¸€ç§’é’Ÿçš„å£°éŸ³å°±å˜æˆäº†ä¸€ä¸ª 44100 å¤§å°çš„ int16 æ•°ç»„ã€‚</p>
<p>å¾—åˆ°é‡‡æ ·å€¼æ•°ç»„ä»¥åï¼Œæ¥ä¸‹æ¥å¦‚ä½•å­˜å‚¨è¿™ä¸ªæ•°ç»„å°±æ˜¯ç¼–ç çš„èŒƒç•´äº†ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥å­˜ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨æŸç§ç®—æ³•å‹ç¼©ä»¥åå†å­˜ã€‚å„ç§å„æ ·çš„åŠæ³•ï¼Œå¯¹åº”ç€å„ç§å„æ ·çš„éŸ³é¢‘æ ¼å¼ï¼Œæ¯”å¦‚ MP3, AAC, WAV ç­‰ã€‚</p>
<p>è¿™å…¶ä¸­ AAC å’Œ MP3 æ ¼å¼æ˜¯æœ‰æŸçš„ï¼Œä¹Ÿå°±æ˜¯å­˜å‚¨ä»¥åå†è¯»å‡ºæ¥ï¼Œå¾—åˆ°çš„æ ·æœ¬å’ŒåŸå§‹çš„ä¼šæœ‰ä¸€äº›åŒºåˆ«ï¼Œä½†è¿™äº›åŒºåˆ«å¾ˆç»†å¾®ï¼Œå¯ä»¥å¿½ç•¥ã€‚æœ‰æŸçš„ç‰¹ç‚¹å°±æ˜¯åœ¨åŸºæœ¬ä¸å½±å“æœ€ç»ˆæ’­æ”¾æ•ˆæœçš„æƒ…å†µä¸‹ï¼Œå¤§å¹…åº¦å‡å°‘æ–‡ä»¶ä½“ç§¯ã€‚</p>
<p>è€Œ WAV åˆ™æ˜¯æ— æŸçš„ï¼Œè¾“å…¥æ˜¯ä»€ä¹ˆï¼Œè¯»å‡ºæ¥å°±æ˜¯ä»€ä¹ˆï¼Œç¼ºç‚¹è‡ªç„¶æ˜¯ä½“ç§¯è¦å¤§å¾ˆå¤šã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ scipy æ¥è¯»å– WAV éŸ³é¢‘ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">scipy.io.wavfile</span> <span class="k">as</span> <span class="nn">wav</span>

<span class="n">rate</span><span class="p">,</span> <span class="n">all_samples</span> <span class="o">=</span> <span class="n">wav</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&#34;xxx.wav&#34;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">rate</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_samples</span><span class="p">),</span> <span class="n">all_samples</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
<span class="c1"># 44100 10639873 int16</span>
<span class="c1"># ä¸Šé¢åˆ†åˆ«æ˜¯ï¼šé‡‡æ ·ç‡ï¼Œæ ·æœ¬æ€»æ•°ï¼Œä»¥åŠæ ·æœ¬å€¼çš„ç±»å‹</span>
<span class="c1"># int16 è¯´æ˜æ¯ä¸€ä¸ªæ ·æœ¬æ˜¯ 16bit æ•´æ•°</span>

<span class="nb">print</span><span class="p">(</span><span class="n">all_samples</span><span class="p">[:</span><span class="mi">20</span><span class="p">])</span>
<span class="c1"># [-41 -51 -49 -41 -28 -15 -20 -33 -32 -38 -54 -54 -44 -30  -8  10  11   2</span>
<span class="c1"># -14 -36]</span>
<span class="c1"># å¯ä»¥çœ‹åˆ°æ ·æœ¬å°±æ˜¯ä¸€ç»„æ•°å­—</span>
</code></pre></div><p>å¯ä»¥çœ‹å‡ºï¼Œé‡‡æ ·é¢‘ç‡æ˜¯ 44100ï¼Œä¸€å…±æœ‰ 10639873 ä¸ªæ ·æœ¬ï¼Œä½¿ç”¨ int16 è¿›è¡Œå­˜å‚¨ï¼Œè®¡ç®—å¯çŸ¥è¿™é¦–æ­Œçš„æ—¶é—´æ˜¯ 241 ç§’ã€‚</p>
<br>
<h2 id="å‚…é‡Œå¶å˜æ¢">å‚…é‡Œå¶å˜æ¢</h2>
<p>ç»™å®šä¸€ä¸ª 200hz çš„æ³¢å½¢å’Œä¸€ä¸ª 800hz çš„æ³¢å½¢ï¼Œè®¡ç®—å®ƒä»¬å åŠ ä»¥åçš„ç»“æœéå¸¸ç®€å•ï¼Œæ²¡æœ‰ä»»ä½•éš¾åº¦ã€‚</p>

<figure >
    
        <img src="img/200-add-800hz.png" width="100%" />
    
    
</figure>

<p>ä½†æ˜¯ï¼Œå¦‚æœç»™åˆ°å åŠ ä»¥åçš„ç»“æœå‘¢ï¼Ÿ</p>

<figure >
    
        <img src="img/mixed2.png" width="100%" />
    
    
</figure>

<p>èƒ½çœ‹å‡ºä¸Šé¢çš„ç»¿è‰²æ›²çº¿æ˜¯ 200hz+800hz å åŠ å¾—åˆ°çš„å—ï¼Ÿå®Œå…¨çœ‹ä¸å‡ºæ¥ï¼Œç”šè‡³ï¼Œè¿™æ ·çš„é€†æ¨çœŸçš„å¯è¡Œå—ï¼Ÿè¿˜æ˜¯è¯´å’Œæ°¸åŠ¨æœºä¸€æ ·åœ¨åŸç†ä¸Šå°±æ˜¯ä¸å¯è¡Œçš„ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯å¯è¡Œçš„ï¼Œé€šè¿‡å‚…é‡Œå¶å˜æ¢ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªå¤åˆæ³¢å½¢æ‹†è§£ä¸ºæ„æˆå®ƒçš„ç®€å•æ³¢å½¢ã€‚</p>
<p>æƒ³æƒ³éƒ½è§‰å¾—ä¸å¯æ€è®®ï¼Œè¿™æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿå‚…é‡Œå¶åˆæ˜¯æ€ä¹ˆæƒ³åˆ°çš„ï¼Ÿä¸å¾—ä¸è¯´åå…«ä¸–çºªçš„æ³•å›½æ•°å­¦å®¶å‚…é‡Œå¶æ˜¯ä¸€ä¸ªå¤©æ‰ï¼Œè®©äººä»°æœ›ã€‚</p>
<p>Tip: 3Blue1Brown æœ‰ä¸€ä¸ªè§†é¢‘ä»‹ç»å‚…é‡Œå¶å˜æ¢çš„åŸç†ï¼Œéå¸¸æ£’ï¼š<a href="https://www.youtube.com/watch?v=spUNpyF58BY">å½¢è±¡çš„ä»‹ç»ï¼šä»€ä¹ˆæ˜¯å‚…é‡Œå¶å˜æ¢ï¼Ÿ</a></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹æ€æ ·é€šè¿‡å‚…é‡Œå¶å˜æ¢æ¥æ‹†è§£å¤åˆæ³¢å½¢ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è®¤ä¸ºå‚…é‡Œå¶å˜æ¢æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„è¾“å…¥ä¸º N ä¸ªå®æ•°ï¼Œä»£è¡¨é‡‡æ ·å€¼ï¼Œè¾“å‡ºä¸º N ä¸ªå¤æ•°ï¼Œä»£è¡¨ä¸åŒé¢‘ç‡çš„åˆ†é‡ï¼Œè¿™é‡Œæˆ‘ä»¬å¿½ç•¥å¤æ•°çš„å®éƒ¨å’Œè™šéƒ¨ï¼Œåªå…³å¿ƒå®ƒçš„æ¨¡ï¼Œä¹Ÿå°±æ˜¯ç»å¯¹å€¼ã€‚</p>
<p>Tip: è¿™é‡Œå…³äºå‚…é‡Œå¶å˜æ¢çš„è¯´æ³•å¹¶ä¸å®Œæ•´ï¼Œæ¯”å¦‚å‚…é‡Œå¶å˜æ¢çš„è¾“å…¥ä¹Ÿå¯ä»¥æ˜¯å¤æ•°ã€‚ä½†æ˜¯å¯¹æˆ‘ä»¬æ¥è¯´ç†è§£åˆ°è¿™ä¸€å±‚é¢å°±å¤Ÿäº†ã€‚å¦‚æœæƒ³è¦æ·±å…¥ç ”ç©¶ï¼Œå¯ä»¥å»å­¦ä¹ æ•°å­—ä¿¡å·å¤„ç†ç›¸å…³çš„è¯¾ç¨‹ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨ scipy æ¥å®é™…è¿›è¡Œä¸€ä¸‹å‚…é‡Œå¶å˜æ¢ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">scipy.fft</span> <span class="kn">import</span> <span class="n">fft</span><span class="p">,</span> <span class="n">fftfreq</span>

<span class="c1"># è¿™æ˜¯å³å°†è¿›è¡Œå˜æ¢çš„é‡‡æ ·å€¼: [0, 1, 2, 3, 4, 5, 6, 7]</span>
<span class="n">samples</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>

<span class="c1"># è¿™æ˜¯å‚…é‡Œå¶å˜æ¢çš„ç»“æœ</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">fft</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">y</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="c1"># å˜æ¢ç»“æœä¸º 8 ä¸ªå¤æ•°</span>
<span class="c1"># (28-0j)</span>
<span class="c1"># (-3.9999999999999996+9.65685424949238j)</span>
<span class="c1"># (-4+4j)</span>
<span class="c1"># (-4+1.6568542494923797j)</span>
<span class="c1"># (-4-0j)</span>
<span class="c1"># (-4-1.6568542494923797j)</span>
<span class="c1"># (-4-4j)</span>
<span class="c1"># (-3.9999999999999996-9.65685424949238j)</span>

<span class="c1"># x æ˜¯ä¸Šé¢æ¯ä¸ªç»“æœå¯¹åº”çš„é¢‘ç‡</span>
<span class="c1"># è¿™é‡Œ fftfreq å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ ·æœ¬æ•°é‡</span>
<span class="c1"># ç¬¬äºŒä¸ªå‚æ•°ä¸º é‡‡æ ·ç‡çš„ å€’æ•°ï¼Œæˆ‘ä»¬å‡å®šé‡‡æ ·ç‡ä¸º 8</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">fftfreq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">samples</span><span class="p">),</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">8</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1"># [ 0.  1.  2.  3. -4. -3. -2. -1.]</span>
<span class="c1"># è¿™é‡Œæ„å‘³ç€ y[0] å¯¹åº”çš„é¢‘ç‡æ˜¯ 0ï¼Œy[1] å¯¹åº”çš„é¢‘ç‡æ˜¯ 1</span>
<span class="c1"># è´Ÿæ•°é¢‘ç‡æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Ÿæˆ‘ä»¬å¯ä»¥ä¸ç®¡ï¼Œå¿½ç•¥</span>
</code></pre></div><p>ä¸Šé¢çš„ä»£ç æˆ‘ä»¬æ„é€ äº† 8 ä¸ªæ•°å­—è¿›è¡Œå‚…é‡Œå¶å˜æ¢ï¼Œå¹¶å‡å®šè¿™ç»„æ ·æœ¬æ˜¯ä½¿ç”¨é‡‡æ ·ç‡ 8 è¿›è¡Œé‡‡æ ·å¾—åˆ°çš„ã€‚</p>
<p>å˜æ¢çš„ç»“æœæ˜¯ 8 ä¸ªå¤æ•°ï¼Œè¿™ 8 ä¸ªå¤æ•°å¯¹åº” 8 ä¸ªé¢‘ç‡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œæ­£é¢‘ç‡å’Œè´Ÿé¢‘ç‡å¯¹åº”çš„å˜æ¢ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿå°±æ˜¯å˜æ¢åçš„ç»“æœæ˜¯å¯¹ç§°çš„ã€‚</p>
<p>ä¸Šé¢å¾—åˆ°çš„ç»“æœæ„ä¹‰ä¸å¤§ï¼Œå› ä¸ºè¾“å…¥æ²¡ä»€ä¹ˆæ„ä¹‰ã€‚ç°åœ¨æˆ‘ä»¬ä½¿ç”¨å‚…é‡Œå¶å˜æ¢å¤„ç†ä¸€ä¸‹ 200hz+800hz å åŠ åçš„æ³¢å½¢ï¼Œçœ‹çœ‹æ˜¯å¦èƒ½è¿˜åŸå› 200hz å’Œ 800hzã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">import</span> <span class="n">figure</span>
<span class="kn">from</span> <span class="nn">scipy.fft</span> <span class="kn">import</span> <span class="n">fft</span><span class="p">,</span> <span class="n">fftfreq</span>

<span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>

<span class="n">DURATION</span> <span class="o">=</span> <span class="mf">0.01</span>
<span class="n">SAMPLE_RATE</span> <span class="o">=</span> <span class="mi">44100</span>

<span class="k">def</span> <span class="nf">gen_sine_wave</span><span class="p">(</span><span class="n">freq</span><span class="p">):</span>
  <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">DURATION</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">DURATION</span> <span class="o">*</span> <span class="n">SAMPLE_RATE</span><span class="p">),</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">freq</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">y</span>

<span class="n">hz200</span> <span class="o">=</span> <span class="n">gen_sine_wave</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="n">hz800</span> <span class="o">=</span> <span class="n">gen_sine_wave</span><span class="p">(</span><span class="mi">800</span><span class="p">)</span>

<span class="c1"># å åŠ åçš„é‡‡æ ·æ•°æ®</span>
<span class="c1"># è¿™é‡Œæ¯ä¸ªæ ·æœ¬ä¸æ˜¯ int16ï¼Œè€Œæ˜¯ floatï¼Œæ— å…³ç´§è¦</span>
<span class="n">total</span> <span class="o">=</span> <span class="n">hz200</span> <span class="o">+</span> <span class="n">hz800</span>

<span class="n">y</span> <span class="o">=</span> <span class="n">fft</span><span class="p">(</span><span class="n">total</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">fftfreq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">total</span><span class="p">),</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">SAMPLE_RATE</span><span class="p">)</span>

<span class="c1"># æ­¤æ—¶æ¨ªè½´æ˜¯é¢‘ç‡ï¼Œçºµè½´æ˜¯è¯¥é¢‘ç‡çš„åˆ†é‡</span>
<span class="c1"># ä½¿ç”¨ np.abs è®¡ç®—å¤æ•°çš„æ¨¡</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div><p>å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œé¦–å…ˆè¾“å‡ºç»“æœæ˜¯å·¦å³å¯¹ç§°çš„ï¼Œæˆ‘ä»¬å¿½ç•¥æ‰è´Ÿé¢‘ç‡éƒ¨åˆ†ï¼Œåªå…³æ³¨æ­£é¢‘ç‡ã€‚</p>
<p>å…¶æ¬¡ï¼Œå‚…é‡Œå¶å˜æ¢å‘Šè¯‰æˆ‘ä»¬è¯¥è¾“å…¥ä¿¡å·ç”± 2 ä¸ªé¢‘ç‡ç»„æˆï¼Œç¨‹åºè¿è¡Œæ—¶é¼ æ ‡æ”¾ä¸Šå»å¯ä»¥çœ‹å‡ºæ˜¯ 200 å’Œ 800ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡å‚…é‡Œå¶å˜æ¢ï¼Œæˆ‘ä»¬å°†å¤åˆæ³¢å½¢æ‹†è§£ä¸ºäº†ç®€å•æ³¢å½¢ã€‚</p>
<p>æˆ–è€…è¯´ï¼Œé€šè¿‡å‚…é‡Œå¶å˜æ¢ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªä¿¡å·æ‹†è§£ä¸ºäº†ä¸€ç»„ä¸åŒé¢‘ç‡çš„æ­£å¼¦æ³¢ï¼Œå°†å®ƒä»æ—¶åŸŸå˜æ¢åˆ°äº†é¢‘åŸŸã€‚ä¿¡å·è¿˜æ˜¯è¿™ä¸ªä¿¡å·ï¼Œåªä¸è¿‡æ¢ä¸ªè§’åº¦å»çœ‹å®ƒã€‚</p>
<p><img loading="lazy" src="https://cjting.me/2021/08/07/fourier-transform-and-audio-visualization/transform.png" alt="img"  />
</p>
<p>æ€»ç»“ä¸€ä¸‹ï¼š</p>
<ul>
<li>å‚…é‡Œå¶å˜æ¢æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸²æ•°å­—ä»£è¡¨æ ·æœ¬å€¼ï¼Œè¾“å‡ºä¸€ä¸²å¤æ•°ä»£è¡¨é¢‘ç‡åˆ†é‡</li>
<li>æ¯ä¸ªæ•°å­—å…·ä½“ä»£è¡¨çš„é¢‘ç‡å¯ä»¥æ ¹æ®æ ·æœ¬æ•°é‡å’Œé‡‡æ ·é¢‘ç‡è®¡ç®—å¾—çŸ¥</li>
<li>æˆ‘ä»¬ä¸å…³å¿ƒå¤æ•°çš„æ–¹å‘ï¼Œæˆ‘ä»¬åªå…³å¿ƒå¤æ•°çš„æ¨¡</li>
<li>å‚…é‡Œå¶è¾“å‡ºçš„ç»“æœæ˜¯å·¦å³å¯¹ç§°çš„ï¼Œå› æ­¤åªæœ‰ä¸€åŠçš„ä¿¡æ¯æœ‰ä»·å€¼</li>
</ul>
<p>å› ä¸ºè¾“å‡ºç»“æœæ˜¯å¯¹ç§°çš„ï¼Œåªæœ‰ä¸€åŠçš„ä¿¡æ¯æœ‰ä»·å€¼ï¼Œå› æ­¤æœ‰ä¸€ä¸ªå˜ä½“å«åš <code>rfft</code>ï¼Œåªè¿”å›ä¸€åŠçš„ä¿¡æ¯ï¼Œè®¡ç®—é€Ÿåº¦å¯ä»¥æ›´å¿«ä¸€äº›ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy.fft</span> <span class="kn">import</span> <span class="n">rfft</span><span class="p">,</span> <span class="n">rfftfreq</span>

<span class="n">SAMPLE_RATE</span> <span class="o">=</span> <span class="mi">8</span>

<span class="n">samples</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>

<span class="c1"># æ­¤æ—¶ x å’Œ y éƒ½æ˜¯ 5 ä¸ªå€¼</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">rfft</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">rfftfreq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">samples</span><span class="p">),</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">SAMPLE_RATE</span><span class="p">)</span>

<span class="c1"># y[0] è¡¨ç¤ºé¢‘ç‡ 0 çš„åˆ†é‡</span>
<span class="c1"># y[1] è¡¨ç¤ºé¢‘ç‡ 1 çš„åˆ†é‡</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1"># [0. 1. 2. 3. 4.]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">y</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="c1"># å’Œä¹‹å‰ fft/fftfreq çš„è¾“å‡ºå¯¹æ¯”ï¼Œå¯ä»¥å‘ç°ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡å»æ‰äº†å¯¹ç§°çš„å†—ä½™ä¿¡æ¯</span>
<span class="c1"># (28+0j)</span>
<span class="c1"># (-3.9999999999999996+9.65685424949238j)</span>
<span class="c1"># (-4+4j)</span>
<span class="c1"># (-4+1.6568542494923797j)</span>
<span class="c1"># (-4+0j)</span>
</code></pre></div><br>
<h2 id="éŸ³é¢‘å¯è§†åŒ–">éŸ³é¢‘å¯è§†åŒ–</h2>
<p>åˆ°äº†è¿™é‡Œæ‰€æœ‰å®ç°éŸ³é¢‘å¯è§†åŒ–æ‰€éœ€è¦çš„çŸ¥è¯†éƒ½å¤‡é½äº†ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬å¯ä»¥çŒœåˆ°ï¼ŒéšéŸ³ä¹è·³åŠ¨çš„æ¯ä¸ªæŸ±å­ï¼Œå¯¹åº”çš„æ˜¯ä¸€ä¸ªé¢‘ç‡æˆ–ä¸€ç»„é¢‘ç‡ï¼Œè€ŒæŸ±å­çš„é«˜åº¦åˆ™æ˜¯é¢‘ç‡çš„åˆ†é‡å¤§å°ï¼Œè¿™ä¸¤ä¸ªä¿¡æ¯å‚…é‡Œå¶å˜æ¢éƒ½èƒ½ç»™åˆ°ã€‚</p>
<p>ç°åœ¨å‰©ä¸‹çš„é—®é¢˜åˆ™æ˜¯è¾“å…¥æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬ä¸å¯èƒ½æŠŠä¸€é¦–æ­Œæ›²çš„æ‰€æœ‰æ ·æœ¬ä½œä¸ºè¾“å…¥è¿›è¡Œå‚…é‡Œå¶å˜æ¢ï¼Œå¦‚æœè¿™æ ·åšï¼Œæˆ‘ä»¬åªèƒ½å¾—åˆ°ä¸€ä»½é¢‘ç‡æ•°æ®ã€‚</p>
<p>æˆ‘ä»¬å¸Œæœ›å¾—åˆ°çš„é¢‘ç‡æ•°æ®éšç€éŸ³ä¹åœ¨å˜åŒ–ï¼Œå› æ­¤è¿™é‡Œè¦é€‰æ‹©ä¸€ä¸ªçª—å£å¤§å°ï¼ˆFFT_SIZEï¼‰ï¼Œæ¯”å¦‚ 2048ã€‚éšç€éŸ³ä¹çš„æ’­æ”¾ï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½ä»å½“å‰æ’­æ”¾ä½ç½®é€‰æ‹© 2048 ä¸ªæ ·æœ¬ç„¶åè¿›è¡Œå‚…é‡Œå¶å˜æ¢ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬çš„åˆæ­¥éŸ³é¢‘å¯è§†åŒ–æ–¹æ¡ˆå°±ç¡®å®šäº†ï¼š</p>
<ul>
<li>è§£æéŸ³é¢‘æ–‡ä»¶å¾—åˆ° allSamples</li>
<li>æ¯æ¬¡ç»˜å›¾æ—¶ï¼Œä»å½“å‰ sample å¼€å§‹é€‰æ‹© FFT_SIZE ä¸ª sample</li>
<li>å¯¹è¿™äº› sample è¿›è¡Œå‚…é‡Œå¶å˜æ¢</li>
<li>å¯¹å˜æ¢å¾—åˆ°çš„å¤æ•°æ±‚æ¨¡</li>
<li>æŠŠç»“æœå˜æ¢åˆ° 0 ~ 1 ç„¶åç»˜å›¾</li>
</ul>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ç”¨ Web æ¥å®ç°ä¸€ä¸ªç®€å•çš„éŸ³é¢‘å¯è§†åŒ–å·¥å…·ã€‚</p>
<p>é¦–å…ˆï¼Œè§£æéŸ³é¢‘æ–‡ä»¶å¾—åˆ° allSamples æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ WebAudio çš„ APIã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="c1">// å¾—åˆ°æŸä¸ªéŸ³é¢‘æ–‡ä»¶çš„äºŒè¿›åˆ¶æ•°æ®
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">ab</span> <span class="o">=</span> <span class="nx">fetch</span><span class="p">(</span><span class="s2">&#34;xxx.mp3&#34;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="p">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">arrayBuffer</span><span class="p">())</span>

<span class="c1">// æ–°å»º WebAudio context
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">audioCtx</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AudioContext</span><span class="p">()</span>

<span class="c1">// è§£æ arrayBuffer
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">audioBuffer</span> <span class="o">=</span> <span class="nx">audioCtx</span><span class="p">.</span><span class="nx">decodeAudioData</span><span class="p">(</span><span class="nx">ab</span><span class="p">)</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">audioBuffer</span><span class="p">)</span>
<span class="c1">// AudioBuffer {length: 10639872, duration: 241.2669387755102, sampleRate: 44100, numberOfChannels: 2}
</span><span class="c1">//  duration: 241.2669387755102
</span><span class="c1">//  length: 10639872
</span><span class="c1">//  numberOfChannels: 2
</span><span class="c1">//  sampleRate: 44100
</span><span class="c1">// [[Prototype]]: AudioBuffer
</span><span class="c1"></span>
<span class="c1">// ä¸€èˆ¬æ¥è¯´éŸ³é¢‘éƒ½æœ‰å¤šä¸ªå£°é“ï¼Œç”¨äºç«‹ä½“å£°æ’­æ”¾
</span><span class="c1">// è¿™é‡Œæˆ‘ä»¬é€‰ç¬¬ä¸€ä¸ªå£°é“å°±å¯ä»¥äº†
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">allSamples</span> <span class="o">=</span> <span class="nx">audioBuffer</span><span class="p">.</span><span class="nx">getChannelData</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1">// allSamples å°±æ˜¯æˆ‘ä»¬è¦çš„æ ·æœ¬æ•°ç»„ï¼Œæ¯ä¸€ä¸ªæ ·æœ¬å€¼æ˜¯æµ®ç‚¹æ•°
</span><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">allSamples</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="c1">// Float32Array(10) [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
</span></code></pre></div><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>requestAnimationFrame</code> æ¥è¿›è¡Œç»˜åˆ¶ã€‚</p>
<p>æ¯æ¬¡ç»˜åˆ¶çš„æ—¶å€™ï¼Œéœ€è¦å…ˆè·å–å½“å‰çš„æ’­æ”¾ä½ç½®ã€‚audioBuffer ä¸­æœ‰éŸ³é¢‘çš„æ€»æ—¶é—´ï¼Œé€šè¿‡ <code>audioCtx.currentTime</code> æˆ‘ä»¬å¯ä»¥å¾—çŸ¥å½“å‰çš„æ’­æ”¾æ—¶é—´ï¼Œä¸¤ä¸ªç›¸é™¤ä¾¿æ˜¯æ’­æ”¾ä½ç½®ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="c1">// ç”¨æˆ·ç‚¹å‡»æ’­æ”¾æ—¶
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">onPlay</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="c1">// è®°å½•ä¸‹æ’­æ”¾çš„å¼€å§‹æ—¶é—´
</span><span class="c1"></span>  <span class="kr">const</span> <span class="nx">startTime</span> <span class="o">=</span> <span class="nx">audioCtx</span><span class="p">.</span><span class="nx">currentTime</span>

  <span class="kr">const</span> <span class="nx">draw</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">draw</span><span class="p">)</span>

    <span class="c1">// ç›®å‰æ’­æ”¾äº†å¤šå°‘æ—¶é—´ (seconds)
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">cur</span> <span class="o">=</span> <span class="nx">audioCtx</span><span class="p">.</span><span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">startTime</span>

    <span class="c1">// æ’­æ”¾çš„è¿›åº¦æ˜¯å¤šå°‘
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">per</span> <span class="o">=</span> <span class="nx">cur</span> <span class="o">/</span> <span class="nx">audioBuffer</span><span class="p">.</span><span class="nx">duration</span>

    <span class="kr">const</span> <span class="nx">startIndex</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">allSamples</span><span class="p">.</span><span class="nx">length</span> <span class="o">*</span> <span class="nx">per</span><span class="p">)</span>

    <span class="c1">// ä» startIndex å¼€å§‹åˆ‡å‰² FFT_SIZE ä¸ª sample å‡ºæ¥
</span><span class="c1"></span>    <span class="c1">// æ­¤æ—¶è¦è¿›è¡Œå‚…é‡Œå¶å˜æ¢çš„ samples å°±å‡†å¤‡å¥½äº†
</span><span class="c1"></span>    <span class="kr">const</span> <span class="nx">samples</span> <span class="o">=</span> <span class="nx">allSamples</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">startIndex</span><span class="p">,</span> <span class="nx">startIndex</span> <span class="o">+</span> <span class="nx">FFT_SIZE</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">draw</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><p>æ¥ä¸‹æ¥å°±æ˜¯å‚…é‡Œå¶å˜æ¢äº†ï¼Œè¿™é‡Œæˆ‘æ‰¾äº†ä¸€ä¸‹ï¼ŒJS ç›¸å…³çš„åº“å¾ˆå°‘ï¼Œä¸è¿‡éªŒè¯ä¸‹æ¥ <a href="https://github.com/indutny/fft.js/">fft.js</a> æ˜¯å¯ç”¨çš„ã€‚</p>
<p>Tip: ä¸å¾—ä¸è¯´ç§‘å­¦è®¡ç®—è¿˜æ˜¯ Python æ–¹ä¾¿ï¼Œnumpy å’Œ scipy çœŸçš„å¤ªå¥½ç”¨äº†ã€‚</p>
<p>ç»è¿‡ FFT ä»¥åï¼Œæˆ‘ä»¬å¾—åˆ°äº† 1025 ä¸ªå¤æ•°ï¼Œå¯¹è¿™äº›å¤æ•°å–æ¨¡ï¼Œå¾—åˆ° 1025 ä¸ªå®æ•°ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="c1">// JS æ²¡æœ‰å¤æ•°ï¼Œæˆ‘ä»¬è‡ªè¡Œå®šä¹‰ä¸€ä¸ª
</span><span class="c1"></span><span class="kr">class</span> <span class="nx">Complex</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="nx">real</span><span class="p">,</span> <span class="nx">imag</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">real</span> <span class="o">=</span> <span class="nx">real</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">imag</span> <span class="o">=</span> <span class="nx">imag</span>
  <span class="p">}</span>

  <span class="nx">abs</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">real</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">real</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">imag</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">imag</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">rfft</span> <span class="o">=</span> <span class="p">(</span><span class="nx">samples</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">f</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FFTJS</span><span class="p">(</span><span class="nx">samples</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
  <span class="kr">const</span> <span class="nx">out</span> <span class="o">=</span> <span class="nx">f</span><span class="p">.</span><span class="nx">createComplexArray</span><span class="p">()</span>

  <span class="kr">const</span> <span class="nx">N</span> <span class="o">=</span> <span class="nx">samples</span><span class="p">.</span><span class="nx">length</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span>

  <span class="nx">f</span><span class="p">.</span><span class="nx">realTransform</span><span class="p">(</span><span class="nx">out</span><span class="p">,</span> <span class="nx">samples</span><span class="p">)</span>

  <span class="kr">const</span> <span class="nx">value</span> <span class="o">=</span> <span class="p">[]</span>

  <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">N</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">value</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Complex</span><span class="p">(</span><span class="nx">out</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="nx">i</span><span class="o">+</span><span class="mi">0</span><span class="p">],</span> <span class="nx">out</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">value</span>
<span class="p">}</span>

<span class="c1">// æ­¤æ—¶æˆ‘ä»¬å¾—åˆ°äº†ä¸€ç»„å®æ•°
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">rfft</span><span class="p">(</span><span class="nx">samples</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">c</span> <span class="p">=&gt;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">abs</span><span class="p">())</span>
</code></pre></div><p>Tip:</p>
<p>å…¶å®è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬ä¸ä¼šç›´æ¥æŠŠ samples è¿›è¡Œ FFT å˜æ¢ï¼Œè€Œæ˜¯ä¼šå…ˆåº”ç”¨ä¸€ä¸ª Window Functionï¼Œè¿™æ ·åšçš„ç›®çš„å¦‚æœæ„Ÿå…´è¶£å¯ä»¥è‡ªè¡Œäº†è§£ã€‚</p>
<p>å¯¹äºæˆ‘ä»¬æ¥è¯´ï¼ŒWindow Function å°±æ˜¯ä¸€ä¸ª <code>number[] -&gt; number[]</code> çš„å‡½æ•°ã€‚</p>
<p>æ¥ä¸‹æ¥å°±æ˜¯å°†è¿™äº›æ•°å­—å˜æ¢åˆ° 0 ~ 1 åŒºé—´ï¼Œè¿™ä¸€æ­¥æ¯”è¾ƒç®€å•ï¼Œè§‚å¯Ÿä¸€ä¸‹æœ€å¤§æœ€å°å€¼åšä¸ªçº¿æ€§å˜æ¢å°±è¡Œäº†ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">y</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">v</span> <span class="p">=&gt;</span> <span class="p">(</span><span class="nx">v</span> <span class="o">+</span> <span class="mi">20</span><span class="p">)</span> <span class="o">/</span> <span class="mi">80</span><span class="p">)</span>
</code></pre></div><p>æœ‰äº†ä¸€ç»„ 0 ~ 1 çš„æ•°å­—ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ Canvas è¿›è¡Œç»˜å›¾äº†ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">W</span> <span class="o">=</span> <span class="mi">800</span> <span class="c1">// canvas width
</span><span class="c1"></span><span class="kr">const</span> <span class="nx">H</span> <span class="o">=</span> <span class="mi">600</span> <span class="c1">// canvas height
</span><span class="c1"></span>
<span class="kr">const</span> <span class="nx">draw</span> <span class="o">=</span> <span class="p">(</span><span class="nx">spectrum</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">W</span><span class="p">,</span> <span class="nx">H</span><span class="p">)</span>

  <span class="kr">const</span> <span class="nx">barWidth</span> <span class="o">=</span> <span class="nx">W</span> <span class="o">/</span> <span class="nx">spectrum</span><span class="p">.</span><span class="nx">length</span>

  <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">spectrum</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">spectrum</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
    <span class="kr">const</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">*</span> <span class="nx">barWidth</span>
    <span class="kr">const</span> <span class="nx">height</span> <span class="o">=</span> <span class="nx">v</span> <span class="o">*</span> <span class="nx">H</span>
    <span class="kr">const</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">H</span> <span class="o">-</span> <span class="nx">height</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">barWidth</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>ç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹ç»“æœï¼Œæ‰“å¼€ <a href="http://cjting.me/audio-vis-demo/">audio-vis-demo</a>ï¼Œé€‰æ‹©ä¸€ä¸ªéŸ³é¢‘æ–‡ä»¶ï¼Œå–æ¶ˆå‹¾é€‰ â€œSmoothâ€ï¼Œç‚¹å‡»æ’­æ”¾ï¼Œç„¶åæˆ‘ä»¬ä¼šå‘ç°ï¼ŒæŸ±å­å¯ä»¥æ­£å¸¸åœ°ç»˜åˆ¶å‡ºæ¥ï¼Œä½†æ˜¯å®ƒä»¬â€è·³è·ƒâ€œå¾—éå¸¸å‰å®³ï¼Œä¸å¤Ÿå¹³ç¨³ã€‚</p>
<p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ¼äº†ä¸€æ­¥ï¼Œå«åš Time smoothingã€‚</p>
<p>å…·ä½“çš„æœºç†æˆ‘å¹¶ä¸ç†è§£ï¼Œæ‰€ä»¥å°±ä¸å†è¯´æ˜äº†ï¼Œå¯¹æˆ‘ä»¬çš„ç›®æ ‡æ¥è¯´ï¼Œè¿™éƒ¨åˆ†å½“åšé»‘ç›’å¤„ç†å°±å¯ä»¥äº†ã€‚</p>
<p>è¿™é‡Œæˆ‘æƒ³è¯´æ˜ä¸€ä¸‹ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œå­¦ä¹ ä»»ä½•çŸ¥è¯†éƒ½æ˜¯åˆ†å±‚çš„ï¼Œå­¦åˆ°è‡ªå·±æ„Ÿå…´è¶£çš„å±‚çº§å³å¯ï¼Œå¯¹ä¸‹ä¸€å±‚æœ‰ä¸€ä¸ªå®šæ€§çš„è®¤è¯†ï¼Œéœ€è¦çš„æ—¶å€™å¯ä»¥å†å»ç»†ç©¶ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è®¤ä¸º Time smoothing å°±æ˜¯å¯¹å½“å‰çš„ result å’Œä¸Šä¸€ä¸ª result è¿›è¡ŒæŸç§æ“ä½œï¼Œç„¶åè¾“å‡ºä¸€ç»„å€¼ã€‚</p>
<p>ä¸‹é¢æ˜¯å…·ä½“çš„ç®—æ³•ï¼Œä»£ç éå¸¸ç®€å•ï¼Œä½†æ˜¯æ•ˆæœéå¸¸æ˜æ˜¾ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">const</span> <span class="nx">smoothConstantDown</span> <span class="o">=</span> <span class="mf">0.08</span>
<span class="kr">const</span> <span class="nx">smoothConstantUp</span> <span class="o">=</span> <span class="mf">0.8</span>

<span class="k">if</span><span class="p">(</span><span class="nx">lastY</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">lastY</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">y</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nx">lastY</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
      <span class="nx">lastY</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">y</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">*</span> <span class="nx">smoothConstantDown</span> <span class="o">+</span> <span class="nx">lastY</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">smoothConstantDown</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">lastY</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">y</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">*</span> <span class="nx">smoothConstantUp</span> <span class="o">+</span> <span class="nx">lastY</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">smoothConstantUp</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nx">lastY</span> <span class="o">=</span> <span class="nx">y</span>
<span class="p">}</span>
</code></pre></div><p>æˆ‘ä»¬åœ¨ Demo ä¸­å‹¾é€‰ä¸Š â€œSmoothâ€ å¯ç”¨è¿™ä¸ªç®—æ³•ï¼Œç„¶åå°±ä¼šå‘ç°å›¾åƒé©¬ä¸Šå˜å¾—ä¸å†è·³åŠ¨äº†ï¼Œæ•´ä½“ç»“æœå·²ç»å’Œå…¶ä»–æ’­æ”¾å™¨å¾ˆæ¥è¿‘äº†ã€‚</p>
<p>æ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯ä¸ºäº†å­¦ä¹ åº•å±‚çš„æ­¥éª¤å’Œç»†èŠ‚ï¼Œæ‰€ä»¥å¾ˆå¤šæ“ä½œéƒ½è‡ªå·±æ¥åšã€‚å¦‚æœçœŸçš„éœ€è¦å¼€å‘ç›¸å…³åŠŸèƒ½ï¼Œä½¿ç”¨ WebAudio çš„ API æ˜¯æ›´åˆç†çš„é€‰æ‹©ã€‚</p>
<p>æˆ‘åœ¨ <a href="http://cjting.me/audio-vis-demo/">audio-vis-demo</a> ä¸­ä¹ŸåŸºäº WebAudio çš„ API è¿›è¡Œäº†å®ç°ï¼Œä¸»è¦æ˜¯ä¸ºäº†å¯¹æ¯”å’Œå‚è€ƒã€‚</p>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å®Œæ•´åœ°å®ç°äº†ä»ä¸€ç»„æ•°å­—åˆ°å¯è§†åŒ–å›¾å½¢çš„å…¨è¿‡ç¨‹ï¼Œæ·±åˆ‡åœ°æ„Ÿå—åˆ°äº†æ•°å­¦çš„é­…åŠ›ã€‚è¿™é‡Œçš„ç¼–ç ä¸€ç‚¹ä¹Ÿä¸éš¾ï¼Œéš¾çš„ï¼Œæˆ–è€…æ˜¯è®©äººèµå¹çš„ï¼Œæ˜¯èƒŒåçš„æ•°å­¦ï¼Œäººç±»æ™ºæ…§çš‡å† ä¸Šæœ€ç¿çƒ‚çš„æ˜ç ã€‚</p>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Pythonè‡ªåŠ¨åŒ–åˆ©å™¨RPAçˆ¬æ•°æ®so easy</title>
      <link>https://hidadeng.github.io/blog/rpa/</link>
      <pubDate>Sun, 19 Dec 2021 12:43:10 +0600</pubDate>
      
      <guid>/blog/rpa/</guid>
      <description>æ‚¨å¯ä»¥ä½¿ç”¨å®ƒå¿«é€Ÿå®ç°è‡ªåŠ¨åŒ–æ“ä½œç½‘ç«™ã€è‡ªåŠ¨åŒ–å¤„ç†æ¡Œé¢åº”ç”¨ç¨‹åºä¸Šçš„é‡å¤æ€§è€—æ—¶ä»»åŠ¡ã€‚</description>
      <content:encoded><![CDATA[<p>RPA for Python ç®€å•è€Œå¼ºå¤§çš„è‡ªåŠ¨åŒ–å¥—ä»¶ï¼ æ‚¨å¯ä»¥ä½¿ç”¨å®ƒå¿«é€Ÿå®ç°è‡ªåŠ¨åŒ–æ“ä½œç½‘ç«™ã€è‡ªåŠ¨åŒ–å¤„ç†æ¡Œé¢åº”ç”¨ç¨‹åºä¸Šçš„é‡å¤æ€§è€—æ—¶ä»»åŠ¡ã€‚</p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">rpa</span>
</code></pre></div><br>
<h2 id="å¿«é€Ÿä¸Šæ‰‹">å¿«é€Ÿä¸Šæ‰‹</h2>
<p>é¦–æ¬¡è¿è¡Œä¸‹æ–¹ä»£ç ä¼šï¼Œæç¤ºå®‰è£…200Må·¦å³çš„é…ç½®æ–‡ä»¶ï¼Œå»ºè®®é€‰æ‹©çŠ¶å†µè¾ƒå¥½çš„ç½‘ç»œç¯å¢ƒã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">rpa</span> <span class="k">as</span> <span class="nn">r</span>

<span class="n">r</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
<span class="c1">#æ“æ§Chromeæ‰“å¼€æŸä¸ªé“¾æ¥</span>
<span class="n">r</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="s1">&#39;https://www.google.com&#39;</span><span class="p">)</span>

<span class="c1">#å®šä½æœç´¢æ¡†ï¼Œè¾“å…¥decentralizationï¼Œå›è½¦æ‰§è¡Œæœç´¢</span>
<span class="n">r</span><span class="o">.</span><span class="n">type</span><span class="p">(</span><span class="s1">&#39;//*[@name=&#34;q&#34;]&#39;</span><span class="p">,</span> <span class="s1">&#39;decentralization[enter]&#39;</span><span class="p">)</span>

<span class="c1">#å®šä½ç»“æœé¡µçš„ç»Ÿè®¡ä¿¡æ¯ã€‚</span>
<span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;result-stats&#39;</span><span class="p">))</span>

<span class="c1">#æˆªå±</span>
<span class="n">r</span><span class="o">.</span><span class="n">snap</span><span class="p">(</span><span class="s1">&#39;page&#39;</span><span class="p">,</span> <span class="s1">&#39;results.png&#39;</span><span class="p">)</span>
<span class="n">r</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div><pre><code>æ‰¾åˆ°çº¦ 1,590,000,000 æ¡ç»“æœ ï¼ˆç”¨æ—¶ 0.39 ç§’ï¼‰
True
</code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ <code>//*[@name=&quot;q&quot;]</code> ä¸ <code>result-stats</code> éƒ½æ˜¯ç½‘é¡µçš„å®šä½è¡¨è¾¾å¼ï¼Œå»ºè®®å¤§å®¶ç¨å¾®å­¦ä¸€ä¸‹htmlé€‰æ‹©å™¨ selectorã€‚ å’±ä»¬çˆ¬è™«è¯¾ç¨‹ä¸­çš„pyqueryéƒ¨åˆ†è®²çš„ä¸»è¦æ˜¯selectorï¼Œæ„Ÿå…´è¶£å¯ä»¥ä»˜ä¸‹ä¸€ä¸‹ã€‚</p>
<br>
<h2 id="å†è¯•ä¸€ä¸‹">å†è¯•ä¸€ä¸‹</h2>
<p>è¿™é‡Œæˆ‘ç»™å¤§å®¶æ“ä½œä¸€ä¸‹ï¼Œé€šè¿‡å¼€å‘è€…å·¥å…·Elementé¢æ¿é€‰å®šå¹¶å¤åˆ¶çš„æ–¹æ³•æ„é€ selectorã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">rpa</span> <span class="k">as</span> <span class="nn">r</span>

<span class="n">r</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
<span class="n">r</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="s1">&#39;https://www.baidu.com&#39;</span><span class="p">)</span>
<span class="n">r</span><span class="o">.</span><span class="n">type</span><span class="p">(</span><span class="s1">&#39;#kw&#39;</span><span class="p">,</span> <span class="s1">&#39;å¤§é‚“å’Œä»–çš„Python[enter]&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;//*[@id=&#34;tsn_inner&#34;]/div[2]&#39;</span><span class="p">))</span>
<span class="n">r</span><span class="o">.</span><span class="n">snap</span><span class="p">(</span><span class="s1">&#39;page&#39;</span><span class="p">,</span> <span class="s1">&#39;results.png&#39;</span><span class="p">)</span>
<span class="n">r</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div><pre><code>î™æœç´¢å·¥å…·ç™¾åº¦ä¸ºæ‚¨æ‰¾åˆ°ç›¸å…³ç»“æœçº¦1,920,000ä¸ª
True
</code></pre>
<p><br><br></p>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>changedetection|è‡ªåŠ¨è¿½è¸ªç½‘ç«™æ›´æ–°</title>
      <link>https://hidadeng.github.io/blog/changedetection/</link>
      <pubDate>Sat, 18 Dec 2021 10:43:10 +0600</pubDate>
      
      <guid>/blog/changedetection/</guid>
      <description>æƒ³çŸ¥é“ä»€ä¹ˆæ—¶å€™ç½‘ç«™æœ‰æ–°çš„å˜åŠ¨(æ–°æ¶ˆæ¯)</description>
      <content:encoded><![CDATA[<p>æƒ³çŸ¥é“ä»€ä¹ˆæ—¶å€™ç½‘ç«™æœ‰æ–°çš„å˜åŠ¨(æ–°æ¶ˆæ¯)&hellip;</p>
<ul>
<li>æ”¿åºœéƒ¨é—¨æ›´æ–°ï¼ˆæ›´æ”¹é€šå¸¸åªåœ¨ä»–ä»¬çš„ç½‘ç«™ä¸Šï¼‰</li>
<li>åœ°æ–¹æ”¿åºœæœ‰æ–°é—»äº†ï¼ˆå˜åŒ–å¾€å¾€åªåœ¨ä»–ä»¬çš„ç½‘ç«™ä¸Šï¼‰</li>
<li>å½“æ‚¨ä¸åœ¨ä»–ä»¬çš„é‚®ä»¶åˆ—è¡¨ä¸­æ—¶ï¼Œæ–°è½¯ä»¶å‘å¸ƒã€å®‰å…¨å»ºè®®ã€‚</li>
<li>æœ‰å˜åŒ–çš„èŠ‚æ—¥</li>
<li>æˆ¿åœ°äº§ä¸Šå¸‚å˜åŒ–</li>
<li>æ¥è‡ªæ”¿åºœç½‘ç«™çš„ COVID ç›¸å…³æ–°é—»</li>
<li>æ£€æµ‹å’Œç›‘æ§ JSON API å“åº”çš„å˜åŒ–</li>
<li>API ç›‘æ§å’Œè­¦æŠ¥</li>
</ul>
<p><strong>å…¶å®è¶…çº§ç®€å•ï¼Œä¸€ä¸ªå‘½ä»¤å³å¯ï¼</strong></p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip3 install changedetection.io
</code></pre></div><p>å‡è®¾é¡¹ç›®æ–‡ä»¶å¤¹å­˜æ”¾äºæ¡Œé¢ï¼Œåœ¨æ¡Œé¢æ–°å»ºä¸€ä¸ª<strong>monitordetection</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">#mac
changedetection.io -d desktop/monitordetection -p 5000

#win
changedetection.io -d Desktop/monitordetection -p 5000
</code></pre></div><p>ç„¶åè®¿é—® http://127.0.0.1:5000 ï¼Œæ‚¨ç°åœ¨åº”è¯¥å¯ä»¥è®¿é—® UIã€‚</p>

<figure >
    
        <img src="img/screen.png" width="100%" />
    
    
</figure>

<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Top2Vec|ä¸»é¢˜å»ºæ¨¡å’Œè¯­ä¹‰æœç´¢åº“</title>
      <link>https://hidadeng.github.io/blog/top2vec_tutorial/</link>
      <pubDate>Mon, 13 Dec 2021 10:43:10 +0600</pubDate>
      
      <guid>/blog/top2vec_tutorial/</guid>
      <description>Pythonä¸»é¢˜å»ºæ¨¡å’Œè¯­ä¹‰æœç´¢åº“</description>
      <content:encoded><![CDATA[<p>Top2Vec æ˜¯ä¸€ç§ç”¨äºä¸»é¢˜å»ºæ¨¡å’Œè¯­ä¹‰æœç´¢çš„ç®—æ³•ã€‚**æˆ‘ä¸ªäººä»ç†è§£ä»£ç å’Œä½¿ç”¨ä»£ç éš¾åº¦æ¥çœ‹ï¼Œ å¯¹äºPythonå°ç™½ï¼ŒBERTopicæ›´é€‚åˆç›´æ¥ç”¨é¢„è®­ç»ƒè¯å‘é‡ï¼Œè€ŒTop2Vecæ›´é€‚åˆå¯¹å°è§„æ¨¡æ•°æ®è®­ç»ƒè¯å‘é‡ååšä¸»é¢˜å»ºæ¨¡ã€‚**å®ƒè‡ªåŠ¨æ£€æµ‹æ–‡æœ¬ä¸­å­˜åœ¨çš„ä¸»é¢˜å¹¶ç”Ÿæˆè”åˆåµŒå…¥çš„ä¸»é¢˜ã€æ–‡æ¡£å’Œè¯å‘é‡ã€‚è®­ç»ƒ Top2Vec æ¨¡å‹åï¼Œæ‚¨å¯ä»¥ï¼š</p>
<ul>
<li>è·å–æ£€æµ‹åˆ°çš„ä¸»é¢˜æ•°ã€‚</li>
<li>è·å–è¯é¢˜ã€‚</li>
<li>è·å–ä¸»é¢˜å¤§å°ã€‚</li>
<li>è·å–åˆ†å±‚ä¸»é¢˜ã€‚</li>
<li>æŒ‰å…³é”®å­—æœç´¢ä¸»é¢˜ã€‚</li>
<li>æŒ‰ä¸»é¢˜æœç´¢æ–‡æ¡£ã€‚</li>
<li>æŒ‰å…³é”®å­—æœç´¢æ–‡æ¡£ã€‚</li>
<li>æ‰¾å‡ºç›¸ä¼¼çš„è¯ã€‚</li>
<li>æŸ¥æ‰¾ç±»ä¼¼çš„æ–‡æ¡£ã€‚</li>
<li>ä½¿ç”¨ RESTful-Top2Vec å…¬å¼€æ¨¡å‹</li>
<li>æœ‰å…³å…¶å·¥ä½œåŸç†çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…è®ºæ–‡ã€‚</li>
</ul>
<p><strong>äº®ç‚¹</strong></p>
<ul>
<li>è‡ªåŠ¨æŸ¥æ‰¾ä¸»é¢˜æ•°ã€‚</li>
<li>ä¸éœ€è¦åœç”¨è¯åˆ—è¡¨ã€‚</li>
<li>ä¸éœ€è¦è¯å¹²/è¯å½¢è¿˜åŸã€‚</li>
<li>é€‚ç”¨äºçŸ­æ–‡æœ¬ã€‚</li>
<li>åˆ›å»ºè”åˆåµŒå…¥çš„ä¸»é¢˜ã€æ–‡æ¡£å’Œè¯å‘é‡ã€‚</li>
<li>å†…ç½®æœç´¢åŠŸèƒ½ã€‚</li>
</ul>
<p><strong>å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</strong></p>
<p>è¯¥ç®—æ³•åšå‡ºçš„å‡è®¾æ˜¯ï¼Œè®¸å¤šè¯­ä¹‰ç›¸ä¼¼çš„æ–‡æ¡£éƒ½è¡¨æ˜äº†ä¸€ä¸ªæ½œåœ¨çš„ä¸»é¢˜ã€‚</p>
<p>ç¬¬ä¸€æ­¥æ˜¯åˆ›å»ºæ–‡æ¡£å’Œè¯å‘é‡çš„è”åˆåµŒå…¥ã€‚ä¸€æ—¦æ–‡æ¡£å’Œå•è¯è¢«åµŒå…¥åˆ°ä¸€ä¸ªå‘é‡ç©ºé—´ä¸­ï¼Œç®—æ³•çš„ç›®æ ‡å°±æ˜¯æ‰¾åˆ°å¯†é›†çš„æ–‡æ¡£é›†ç¾¤ï¼Œç„¶åç¡®å®šå“ªäº›å•è¯å°†è¿™äº›æ–‡æ¡£å¸å¼•åˆ°ä¸€èµ·ã€‚æ¯ä¸ªå¯†é›†åŒºåŸŸæ˜¯ä¸€ä¸ªä¸»é¢˜ï¼Œå°†æ–‡æ¡£å¸å¼•åˆ°å¯†é›†åŒºåŸŸçš„è¯å°±æ˜¯ä¸»é¢˜è¯ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">top2vec</span><span class="o">==</span><span class="mf">1.0.27</span>
</code></pre></div><h2 id="0-ä»£ç ä¸‹è½½">0. ä»£ç ä¸‹è½½</h2>
<p><a href="top2vec_tutorial.zip">click to download code</a></p>
<p><br><br></p>
<h2 id="1-å¯¼å…¥æ•°æ®">1. å¯¼å…¥æ•°æ®</h2>
<p>ä½¿ç”¨æŸç¾éš¾æ•°æ®é›†ï¼Œè¿™é‡Œæ˜¯å­˜åœ¨æ ‡æ³¨çš„æ ‡ç­¾ï¼Œä½†æ˜¯æˆ‘ä»¬å‡è®¾ä¸ç”¨labelçš„ï¼Œä»…ä½œä¸ºè¯„åˆ¤Top2vecè¿è¡Œæ•ˆæœçš„æ ‡å‡†ã€‚<a href="cnews.csv">ç‚¹å‡»cnews.csvä¸‹è½½</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span>
<span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>
<span class="kn">from</span> <span class="nn">top2vec</span> <span class="kn">import</span> <span class="n">Top2Vec</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">jieba</span>

<span class="n">stopwords</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;STOPWORDS.pkl&#39;</span><span class="p">)[</span><span class="s1">&#39;STOPWORDS&#39;</span><span class="p">][</span><span class="s1">&#39;chinese&#39;</span><span class="p">]</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;cnews.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p><img loading="lazy" src="img/df.png" alt=""  />
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<pre><code>æ—¶æ”¿    120
ç§‘æŠ€    106
æ—¶å°š    106
è´¢ç»    105
å®¶å±…    103
æ•™è‚²     97
å¨±ä¹     96
ä½“è‚²     95
æˆ¿äº§     87
æ¸¸æˆ     85
Name: label, dtype: int64
</code></pre>
<p><br><br></p>
<h2 id="2-æ¸…æ´—æ•°æ®">2. æ¸…æ´—æ•°æ®</h2>
<p>ä¸€èˆ¬è€Œè¨€ï¼Œä½œä¸­æ–‡æ–‡æœ¬åˆ†æï¼Œéœ€è¦æŠŠä¸­æ–‡åˆ†è¯æ„é€ æˆç±»è¥¿æ–¹è¯­è¨€(ç©ºæ ¼é—´éš”è¯è¯­çš„æ–‡æœ¬)é£æ ¼ã€‚åœ¨æ­¤æœŸé—´ï¼Œé¡ºä¾¿å°†åœç”¨è¯å‰”é™¤ã€‚å…¶å®åœ¨ç”¨top2vecæ—¶ï¼Œä¸å‰”é™¤åœç”¨è¯å½±å“ä¹Ÿä¸å¤§ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">clean_text</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">jieba</span><span class="o">.</span><span class="n">lcut</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span> <span class="k">if</span> <span class="n">w</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">stopwords</span><span class="p">]</span>
    <span class="k">return</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>


<span class="n">df</span><span class="p">[</span><span class="s1">&#39;cleantext&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">clean_text</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p><img loading="lazy" src="img/df2.png" alt=""  />
</p>
<p><br><br></p>
<h2 id="3-è®­ç»ƒæ¨¡å‹">3. è®­ç»ƒæ¨¡å‹</h2>
<p>Top2vecæœ‰ä¸€ä¸‹å››ä¸ªå¸¸ç”¨å‚æ•°</p>
<p><strong>Top2vec(documents, min_count, speed, workers)</strong></p>
<ul>
<li>documents: æ–‡æ¡£åˆ—è¡¨</li>
<li>min_count: è¯è¯­æœ€å°‘å‡ºç°æ¬¡æ•°ã€‚ä½äºmin_countçš„è¯ä¸åŠ å…¥æ¨¡å‹ä¸­</li>
<li>speed: è®­ç»ƒé€Ÿåº¦ï¼Œå‚æ•°é»˜è®¤&quot;learn&quot;
<ul>
<li>&ldquo;fast-learn&rdquo;  é€Ÿåº¦æœ€å¿«ï¼Œè®­ç»ƒæ•ˆæœæœ€å·®</li>
<li>&ldquo;learn&rdquo;       é€Ÿåº¦ï¼Œè®­ç»ƒæ•ˆæœä¸­ç­‰</li>
<li>&ldquo;deep-learn&rdquo;  é€Ÿåº¦æœ€æ…¢ï¼Œè®­ç»ƒæ•ˆæœæœ€ä½³</li>
</ul>
</li>
<li>workers: å¹¶è¡Œè¿è¡Œæ•°ï¼Œè¯¥å€¼æœ€å¤§å–å€¼ä¸ºç”µè„‘CPUçš„æ ¸æ•°ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">model</span> <span class="o">=</span> <span class="n">Top2Vec</span><span class="p">(</span><span class="n">documents</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;cleantext&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">(),</span> 
                <span class="n">min_count</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                <span class="n">speed</span><span class="o">=</span><span class="s2">&#34;deep-learn&#34;</span><span class="p">,</span>  
                <span class="n">workers</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<pre><code>2021-12-14 20:21:10,318 - top2vec - INFO - Pre-processing documents for training
2021-12-14 20:21:10,871 - top2vec - INFO - Creating joint document/word embedding
2021-12-14 20:25:06,082 - top2vec - INFO - Creating lower dimension embedding of documents
2021-12-14 20:25:14,645 - top2vec - INFO - Finding dense areas of documents
2021-12-14 20:25:14,683 - top2vec - INFO - Finding topics
</code></pre>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># è¯é¢˜ä¸ªæ•°</span>
<span class="n">model</span><span class="o">.</span><span class="n">get_num_topics</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<pre><code>9
</code></pre>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># å„è¯é¢˜æ•°é‡</span>
<span class="n">topic_sizes</span><span class="p">,</span> <span class="n">topic_nums</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_topic_sizes</span><span class="p">()</span>

<span class="p">{</span><span class="s2">&#34;topic_sizes&#34;</span><span class="p">:</span><span class="n">topic_sizes</span><span class="p">,</span> 
 <span class="s2">&#34;topic_ids&#34;</span><span class="p">:</span><span class="n">topic_nums</span><span class="p">}</span>
</code></pre></div><p>Run</p>
<pre><code>{'topic_sizes': array([361, 116, 107,  99,  97,  93,  82,  25,  20]),
 'topic_ids': array([0, 1, 2, 3, 4, 5, 6, 7, 8])}
</code></pre>
<p><br><br></p>
<h2 id="4-get_topics">4. get_topics</h2>
<p>ç”¨pyechartsè¯äº‘å›¾æ˜¾ç¤º<strong>è¯é¢˜ä¿¡æ¯</strong>ï¼Œ ä¸ºäº†ç®€åŒ–ä»£ç ï¼Œå°†è¯¥åŠŸèƒ½å°è£…ä¸ºå‡½æ•°</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">gen_wordcloud</span><span class="p">(</span><span class="n">topic_words</span><span class="p">,</span> <span class="n">word_scores</span><span class="p">,</span> <span class="n">topic_id</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    topic_words: ä¸»é¢˜è¯åˆ—è¡¨
</span><span class="s2">    word_scores: ä¸»é¢˜ç‰¹å¾è¯çš„æƒé‡å¾—åˆ†(è¯è¯­è¡¨å¾ä¸»é¢˜çš„èƒ½åŠ›)
</span><span class="s2">    topic_id: ä¸»é¢˜id
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="kn">import</span> <span class="nn">pyecharts.options</span> <span class="k">as</span> <span class="nn">opts</span>
    <span class="kn">from</span> <span class="nn">pyecharts.charts</span> <span class="kn">import</span> <span class="n">WordCloud</span>
    <span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span>
    
    <span class="n">data</span> <span class="o">=</span> <span class="p">[(</span><span class="n">word</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">weight</span><span class="p">))</span> <span class="k">for</span> <span class="n">word</span><span class="p">,</span> <span class="n">weight</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">topic_words</span><span class="p">,</span> <span class="n">word_scores</span><span class="p">)]</span>

    <span class="n">wc</span> <span class="o">=</span> <span class="n">WordCloud</span><span class="p">()</span>
    <span class="n">wc</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">series_name</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="n">data_pair</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">word_size_range</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">88</span><span class="p">])</span>
    <span class="n">wc</span><span class="o">.</span><span class="n">set_global_opts</span><span class="p">(</span>
        <span class="n">title_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">TitleOpts</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&#34;Topic_</span><span class="si">{topic_id}</span><span class="s2">&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">topic_id</span><span class="o">=</span><span class="n">topic_id</span><span class="p">),</span> 
                                  <span class="n">title_textstyle_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">TextStyleOpts</span><span class="p">(</span><span class="n">font_size</span><span class="o">=</span><span class="mi">23</span><span class="p">)),</span>
        <span class="n">tooltip_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">TooltipOpts</span><span class="p">(</span><span class="n">is_show</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>

    <span class="n">display</span><span class="p">(</span><span class="n">wc</span><span class="o">.</span><span class="n">render_notebook</span><span class="p">())</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">topic_wordss</span><span class="p">,</span> <span class="n">word_scoress</span><span class="p">,</span> <span class="n">topic_ids</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_topics</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>

<span class="k">for</span> <span class="n">topic_words</span><span class="p">,</span> <span class="n">word_scores</span><span class="p">,</span> <span class="n">topic_id</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">topic_wordss</span><span class="p">,</span> <span class="n">word_scoress</span><span class="p">,</span> <span class="n">topic_ids</span><span class="p">):</span>
    <span class="n">gen_wordcloud</span><span class="p">(</span><span class="n">topic_words</span><span class="p">,</span> <span class="n">word_scores</span><span class="p">,</span> <span class="n">topic_id</span><span class="p">)</span>
</code></pre></div><p><img loading="lazy" src="img/vis1.png" alt=""  />

<img loading="lazy" src="img/vis2.png" alt=""  />
</p>
<p><br><br></p>
<h2 id="5-get_documents_topics">5. get_documents_topics</h2>
<p>get_documents_topics(doc_ids, num_topics=1)</p>
<ul>
<li>doc_ids: å¾…æŸ¥è¯¢æ–‡æ¡£idåˆ—è¡¨</li>
<li>num_topics: è¿”å›æŸæ–‡æ¡£å¯èƒ½å½’å±è¯é¢˜çš„ä¸ªæ•°</li>
</ul>
<p><img loading="lazy" src="img/df.png" alt=""  />
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># æŸ¥ç¬¬ä¸€æ¡æ–‡æ¡£çš„</span>
<span class="n">model</span><span class="o">.</span><span class="n">get_documents_topics</span><span class="p">(</span><span class="n">doc_ids</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">num_topics</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">(array([0]),
 array([0.1384481], dtype=float32),
 array([[&#39;æ”¿åºœ&#39;, &#39;ç»æµ&#39;, &#39;æ”¿ç­–&#39;, &#39;å»ºè®¾&#39;, &#39;ä¸­æ–¹&#39;, &#39;å‘å±•&#39;, &#39;ä¿ƒè¿›&#39;, &#39;éƒ¨é—¨&#39;, &#39;ç•™å­¦&#39;, &#39;å­¦ç”Ÿ&#39;, &#39;ä¼šè®®&#39;,
         &#39;æˆ‘è¦&#39;, &#39;äº‹åŠ¡&#39;, &#39;æ—¥ç”µ&#39;, &#39;æˆ¿ä»·&#39;, &#39;æ•™è‚²&#39;, &#39;å›½åŠ¡é™¢&#39;, &#39;æ¸©å®¶å®&#39;, &#39;ç•™å­¦ç”Ÿ&#39;, &#39;äººæ•°&#39;, &#39;ç§»æ°‘&#39;,
         &#39;ä¼šè§&#39;, &#39;æ¨åŠ¨&#39;, &#39;ç”³è¯·è€…&#39;, &#39;ç”³è¯·&#39;, &#39;å®˜å‘˜&#39;, &#39;ä½æˆ¿&#39;, &#39;æˆ¿å±‹&#39;, &#39;åŠ å¼º&#39;, &#39;ä¸­å›½æ”¿åºœ&#39;, &#39;è´­æˆ¿&#39;,
         &#39;å›½å®¶&#39;, &#39;æ”¯ä»˜&#39;, &#39;æ¥¼å¸‚&#39;, &#39;å¤–äº¤éƒ¨&#39;, &#39;æ¥æ”¶&#39;, &#39;ä¸¤å›½&#39;, &#39;åŸåˆ™&#39;, &#39;å„åœ°&#39;, &#39;æ€»ç†&#39;, &#39;æˆ˜ç•¥&#39;,
         &#39;å’Œå¹³&#39;, &#39;æ¡†æ¶&#39;, &#39;è¯„è®º&#39;, &#39;æœ‰åº&#39;, &#39;è£…ä¿®&#39;, &#39;ä¸­å›½&#39;, &#39;å°±ä¸š&#39;, &#39;å‹å¥½&#39;, &#39;äººåŠ›èµ„æº&#39;]],
       dtype=&#39;&lt;U9&#39;),
 array([[0.3623712 , 0.36037514, 0.35219163, 0.35109183, 0.3499857 ,
         0.34666985, 0.3426961 , 0.34161803, 0.34010434, 0.3382269 ,
         0.33710504, 0.336056  , 0.33598724, 0.33488944, 0.3303768 ,
         0.32483265, 0.324798  , 0.32201332, 0.3174801 , 0.3153757 ,
         0.3152491 , 0.31338856, 0.31334093, 0.31244045, 0.31202242,
         0.30908576, 0.3086405 , 0.30838227, 0.30605763, 0.3053521 ,
         0.30474398, 0.30268514, 0.30253592, 0.30242488, 0.30227807,
         0.3017046 , 0.30116442, 0.30062813, 0.2996228 , 0.29806197,
         0.2972776 , 0.29709277, 0.29706252, 0.29584888, 0.29578486,
         0.29524648, 0.2944737 , 0.2939484 , 0.29286712, 0.29246706]],
       dtype=float32))
</code></pre></div><p><br><br></p>
<h2 id="6-search_topics">6. search_topics</h2>
<p>æ ¹æ®å…³é”®è¯æœç´¢è¯é¢˜ï¼ŒæŸ¥æŸè¯æ˜¯å¦å±äºæŸè¯é¢˜ï¼Œå±äºè¯¥ä¸»é¢˜çš„æ¦‚ç‡
search_topics(keywords, num_topics, keywords_neg=None)</p>
<ul>
<li>keywords: å…³é”®è¯åˆ—è¡¨</li>
<li>num_topics: è¿”å›è¯é¢˜ä¸ªæ•°ï¼ŒæŒ‰ç…§è¯­ä¹‰ç›¸ä¼¼åº¦ä»é«˜åˆ°ä½æ’åº</li>
<li>keywords_neg: åä¹‰è¯åˆ—è¡¨</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">gen_wordcloud2</span><span class="p">(</span><span class="n">query_word</span><span class="p">,</span> <span class="n">topic_words</span><span class="p">,</span> <span class="n">word_scores</span><span class="p">,</span> <span class="n">topic_id</span><span class="p">,</span> <span class="n">topic_probability</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    query_word: å¾…æŸ¥è¯¢è¯
</span><span class="s2">    topic_words: ä¸»é¢˜è¯åˆ—è¡¨
</span><span class="s2">    word_scores: ä¸»é¢˜ç‰¹å¾è¯çš„æƒé‡å¾—åˆ†(è¯è¯­è¡¨å¾ä¸»é¢˜çš„èƒ½åŠ›)
</span><span class="s2">    topic_id: ä¸»é¢˜id
</span><span class="s2">    topic_probability: ä¸»é¢˜æ¦‚ç‡
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="kn">import</span> <span class="nn">pyecharts.options</span> <span class="k">as</span> <span class="nn">opts</span>
    <span class="kn">from</span> <span class="nn">pyecharts.charts</span> <span class="kn">import</span> <span class="n">WordCloud</span>
    <span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span>
    
    <span class="n">data</span> <span class="o">=</span> <span class="p">[(</span><span class="n">word</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">weight</span><span class="p">))</span> <span class="k">for</span> <span class="n">word</span><span class="p">,</span> <span class="n">weight</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">topic_words</span><span class="p">,</span> <span class="n">word_scores</span><span class="p">)]</span>

    <span class="n">wc</span> <span class="o">=</span> <span class="n">WordCloud</span><span class="p">()</span>
    <span class="n">wc</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">series_name</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="n">data_pair</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">word_size_range</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">88</span><span class="p">])</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;Word</span><span class="si">{query_word}</span><span class="se">\n</span><span class="s2">Topic_</span><span class="si">{topic_id}</span><span class="se">\n</span><span class="s2">Probability:</span><span class="si">{probability:.2f}</span><span class="s2">&#34;&#34;&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">query_word</span><span class="o">=</span><span class="n">query_word</span><span class="p">,</span>
                                                              <span class="n">topic_id</span><span class="o">=</span><span class="n">topic_id</span><span class="p">,</span> 
                                                              <span class="n">probability</span><span class="o">=</span><span class="n">topic_probability</span><span class="p">)</span>
    <span class="n">wc</span><span class="o">.</span><span class="n">set_global_opts</span><span class="p">(</span>
        <span class="n">title_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">TitleOpts</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> 
                                  <span class="n">title_textstyle_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">TextStyleOpts</span><span class="p">(</span><span class="n">font_size</span><span class="o">=</span><span class="mi">18</span><span class="p">)),</span>
        <span class="n">tooltip_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">TooltipOpts</span><span class="p">(</span><span class="n">is_show</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>

    <span class="n">display</span><span class="p">(</span><span class="n">wc</span><span class="o">.</span><span class="n">render_notebook</span><span class="p">())</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">query_word</span> <span class="o">=</span> <span class="s2">&#34;ç”µå½±&#34;</span>
<span class="n">topic_wordss</span><span class="p">,</span> <span class="n">word_scoress</span><span class="p">,</span> <span class="n">topic_scores</span><span class="p">,</span> <span class="n">topic_ids</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">search_topics</span><span class="p">(</span><span class="n">keywords</span><span class="o">=</span><span class="p">[</span><span class="n">query_word</span><span class="p">],</span> <span class="n">num_topics</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="k">for</span> <span class="n">topic_words</span><span class="p">,</span> <span class="n">word_scores</span><span class="p">,</span> <span class="n">topic_score</span><span class="p">,</span> <span class="n">topic_id</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">topic_wordss</span><span class="p">,</span> <span class="n">word_scoress</span><span class="p">,</span> <span class="n">topic_scores</span><span class="p">,</span> <span class="n">topic_ids</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">topic_score</span><span class="o">&gt;</span><span class="mf">0.5</span><span class="p">:</span>
        <span class="n">gen_wordcloud2</span><span class="p">(</span><span class="n">query_word</span><span class="o">=</span><span class="n">query_word</span><span class="p">,</span> 
                       <span class="n">topic_words</span><span class="o">=</span><span class="n">topic_words</span><span class="p">,</span> 
                       <span class="n">word_scores</span><span class="o">=</span><span class="n">word_scores</span><span class="p">,</span> 
                       <span class="n">topic_id</span><span class="o">=</span><span class="n">topic_id</span><span class="p">,</span> <span class="n">topic_probability</span><span class="o">=</span><span class="n">topic_score</span><span class="p">)</span>
</code></pre></div><p><img loading="lazy" src="img/vis5.png" alt=""  />
</p>
<br>
<h2 id="7-query_topics">7. query_topics</h2>
<p>æ ¹æ®ä¸€æ®µæ–‡æœ¬å¯»æ‰¾æœ€ç¬¦åˆè¯¥æ–‡æœ¬çš„è¯é¢˜
query_topics(query, num_topics)</p>
<ul>
<li>query: æŸ¥è¯¢æ–‡æœ¬ï¼Œæ³¨æ„æ˜¯ç”¨ç©ºæ ¼é—´éš”è¯è¯­çš„æ–‡æœ¬</li>
<li>num_topics: è¿”å›çš„è¯é¢˜æ•°</li>
</ul>
<p>è¿”å›è¯é¢˜ç‰¹å¾è¯åˆ—è¡¨ï¼Œ è¯é¢˜ç‰¹å¾è¯æƒé‡ï¼Œ è¯é¢˜æ¦‚ç‡ï¼Œ è¯é¢˜id</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">querytext</span> <span class="o">=</span> <span class="s1">&#39;åˆ˜æ™“åº† 55 å² è¿‘æ—¥ é¢å¥–ç¤¼ åˆ˜æ™“åº† ä¸€è¢­ å®è“è‰² è¶…ä½ èƒ¸ V é¢† é•¿è£™ äº®ç›¸ è½»è–„ è•¾ä¸ å¥¢å çš®è‰ è‰³ä¸½ è‰²å½© ç¿ ç»¿&#39;</span>
<span class="n">topic_words</span><span class="p">,</span> <span class="n">word_scores</span><span class="p">,</span> <span class="n">topic_scores</span><span class="p">,</span> <span class="n">topic_ids</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">query_topics</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="n">querytext</span><span class="p">,</span> 
                                                                       <span class="n">num_topics</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;å¯èƒ½å½’å±çš„è¯é¢˜æœ‰: &#39;</span><span class="p">,</span> <span class="n">topic_ids</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;å½’å±äºè¯¥è¯é¢˜çš„æ¦‚ç‡&#39;</span><span class="p">,</span> <span class="n">topic_scores</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">å¯èƒ½å½’å±çš„è¯é¢˜æœ‰:  [1 4]
å½’å±äºè¯¥è¯é¢˜çš„æ¦‚ç‡ [0.32036728 0.1276904 ]
</code></pre></div><br>
<h2 id="8-search_documents_by_keywords">8. search_documents_by_keywords</h2>
<p>æ ¹æ®å…³é”®è¯ï¼Œç­›é€‰æ–‡æ¡£</p>
<p>search_documents_by_keywords(keywords,
num_docs,
keywords_neg=None,
return_documents=True)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#æ–‡æ¡£ï¼Œ è¯­ä¹‰ç›¸å…³æ€§ï¼Œ æ–‡æ¡£id</span>
<span class="n">docs</span><span class="p">,</span> <span class="n">scores</span><span class="p">,</span> <span class="n">doc_ids</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">search_documents_by_keywords</span><span class="p">(</span><span class="n">keywords</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;æ­é…&#39;</span><span class="p">],</span> 
                                                         <span class="n">num_docs</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> 
                                                         <span class="n">keywords_neg</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
                                                         <span class="n">return_documents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">for</span> <span class="n">doc</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">doc_id</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">docs</span><span class="p">,</span> <span class="n">scores</span><span class="p">,</span> <span class="n">doc_ids</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Document: </span><span class="si">{</span><span class="n">doc_id</span><span class="si">}</span><span class="s2">, Semantic similarity: </span><span class="si">{</span><span class="n">score</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;----------&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Document: 106, Semantic similarity: 0.4943176805973053
ç™½è‰² çŸ­è£™ ç™¾å˜ ä¼‘é—² æ„Ÿ è¦ç‚¹ ä¸€å®š æ•å¼€ è¡¬è¡« é…åˆ ç‰›ä»”è£¤ ä¼‘é—² æ„Ÿ çŸ­è£¤ è¡¬è¡« çŸ­ æ•å¼€ æ˜¾å¾— å¥½å¥½ ç©¿ è£¤å­ æ­é… ä¸ƒåˆ†è£¤ é®ä½ è‡€éƒ¨ é•¿åº¦ å…³é”® å°½é‡ é€‰æ‹© è‰³ä¸½ é¢œè‰² å¸¦ å‡º é’æ˜¥ æ„Ÿ NO.3     ç™½è‰² çŸ­è£™ tips :   ç™½è‰² çŸ­è£™ + ç²‰è‰² ä¸Šè¡£ è¿™æ˜¯ ä¸€å¥— å‡é¾„ ç™¾åˆ†ç™¾ æ­é… ç™½è‰² çŸ­è£™ æœ¬æ¥ æ¸…çº¯ ç²‰è‰² ä¸Šè¡£ æ­é… æ›´åŠ  å…·æœ‰æ´»åŠ› tips :   ç™½è‰² çŸ­è£™ + æŠ¹èƒ¸ + å¤–å¥— æƒ³è¦ æ€§æ„Ÿ ä¸€ç‚¹ å°±åŠ  ä¸€ä»¶ æŠ¹èƒ¸ æŠ¹èƒ¸ èƒ¸å‰ æ„é€  æ›²çº¿ å®Œç¾ å†åŠ  å¤–å¥— ä¿æš– å¾—ä½“ çœ‹ä¼¼ ç®€å• ä¸€æ¬¾ æ­é… å…¶å® æš—åœ°é‡Œ å·å·åœ° ä¿®é¥° èº«æ
----------

Document: 870, Semantic similarity: 0.4483542740345001
ç»„å›¾ çœ‹è¾¾äºº æ¼”ç» è±¹çº¹ å†›è£… é£ å¯¼è¯­ æ‡‚å¾— æ½®æµ æ€»æ˜¯ çŸ¥é“ é€‚åˆ ä»Šå†¬ æµè¡Œ äº®ç‚¹ å¤ª å†›è£… è±¹çº¹ ç±»ä¼¼ æ°‘æ—é£æƒ… æƒ³è¦ çŸ¥é“ æ­é… å¿« çœ‹çœ‹ æ—¶å°š è¾¾ ç©¿ å†›ç»¿è‰² å®½æ¾ æ¬¾ å¤§è¡£ ä¸å¤± ä¿çš® å‘³é“ é«˜è…° è®¾è®¡ çŸ­è£™ æœ‰æ•ˆ æå‡ è…°çº¿ è¡¬æ‰˜å‡º ä¿®é•¿ ç¾è…¿ è±¹çº¹ ä»Šå¹´ å†¬å­£ æŠ¢çœ¼ æ­é… å…ƒç´  åŠ ä¸Š é©¼è‰² é’ˆç»‡è¡« ç°è‰² å›´å·¾ æš– æ£•è‰² æ‰‹ æŒåŒ… æ•´ä½“ è‰²è°ƒ ç»Ÿä¸€ è¿·äºº æ£•è‰² è“è‰² ç»“åˆèƒ½ çœ¼å‰ä¸€äº® ç®€æ´ æ¬¾å¼ ä¾ç„¶ çªæ˜¾ ç‹¬ç‰¹ å“å‘³ å®½æ¾ é’ˆç»‡ å¤–å¥— è¡¬æ‰˜å‡º ä¼˜ç¾ èº«å½¢ æ­é… åŒæ · æ²‰é—· é»‘è‰² åŒ…åŒ… æ€§æ„Ÿ ä¸è¢œ è£…æ‰® ä¾ç„¶ é€éœ² å‡º è¿·äºº æ°”æ¯ ç«‹é¢† è¡¬è¡« åŠ ä¸Š æ·±é»„ é«˜è…° è£¤ æ‘©ç™» æ„Ÿ åè¶³ éšæ„ æŠ«ä¸Š å¤–å¥— æ›´æ˜¾ æ…µæ‡’ ä¸ªæ€§ æ³•å¼ é£æƒ…
----------

Document: 450, Semantic similarity: 0.4471719563007355
è¡— æ‹ çˆ± æ‹›æ‘‡è¿‡å¸‚ æ¯›èŒ¸èŒ¸ ( ç»„å›¾ ) å¯¼è¯­ çš®è‰ æ¯ä¸ª å†¬å¤© å¯èƒ½ ä¸¢å¼ƒ æ¯ä¸ª éœ€è¦ æ¸©æš– æ—©äº› ç›¸æ¯” äººé€ çš® è‰æ¯” çœŸçš® è‰ é£å¤´ æ›´åŠ² æ—¶å°š ç¯ä¿ å¤§ç‰Œ ç§€ åœºä¸Š è¶…æ¨¡ ä¸€ä¸ªä¸ª ç©¿ç€ äººé€ çš® è‰ â€œ æ‹›æ‘‡è¿‡å¸‚ â€ ä¹‹å è¡—å¤´ æ½®äºº æ²¡æœ‰ ç†ç”± æ‹’ç» å¤–å½¢ é…·é…· è¿™ä»¶ æ°”åœº çš®è‰ å•å“ é…åˆé»˜å¥‘ æ‘‡æ»š é£ é…é¥° æ­é… é»‘è‰² çš®è‰ é•¿ èƒŒå¿ƒ æ›´æ˜¾ åˆ©è½ é…·é…· é»‘è‰² çš®è‰ æ­é… è“è‰² è¡¬è¡£ ä¸åŒ æ„Ÿè§‰ åŠ ä¸Š ä¸‹åŠèº« åº•è£¤ æ—¶é«¦ åŒ…åŒ… é¢œè‰² æäº® æ•´èº« è£…æ‰® æŠ¹èƒ¸ å¼ çš®è‰ ç‰¹ç‚¹ é«˜è´µå…¸é›… é€‚åˆ æ­é… è¿è¡£è£™ è£…é¥° å¢æ·» æ—¶å°š ç¾æ„Ÿ å¤å¤ åœ†ç‚¹ è¿è¡£è£™ æ­é… å®½æ¾ æ£•è‰² çš®è‰ è¡£ ååª› æ„Ÿè§‰ å…¸é›… æ·‘å¥³ çŸ­æ¬¾ é»‘è‰² çš®è‰ æ­é… è´´èº« ä»”è£¤ æ­é… é•¿é´ æ½‡æ´’ å¸…æ°” èŒ¸èŒ¸ å¸½å­ å¢æ·» ä¸å°‘ ç”œç¾ æ„Ÿ
----------
</code></pre></div><p><br><br></p>
<h2 id="9-search_documents_by_topic">9. search_documents_by_topic</h2>
<p>æ ¹æ®æŒ‡å®šçš„topic_idï¼Œ æ˜¾ç¤ºè¯¥ä¸»é¢˜å‰num_docsä¸ªæ–‡æ¡£ï¼Œæ˜¾ç¤ºçš„æ–‡æ¡£æ˜¯æ ¹æ®æ¦‚ç‡ä»é«˜åˆ°ä½é™åºæ˜¾ç¤º</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#æŸ¥çœ‹topic4çš„å‰5æ¡æ–‡æ¡£</span>
<span class="n">topic_id</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">documents</span><span class="p">,</span> <span class="n">document_scores</span><span class="p">,</span> <span class="n">document_ids</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">search_documents_by_topic</span><span class="p">(</span><span class="n">topic_num</span><span class="o">=</span><span class="n">topic_id</span><span class="p">,</span> <span class="n">num_docs</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="k">for</span> <span class="n">doc</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">doc_id</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">documents</span><span class="p">,</span> <span class="n">document_scores</span><span class="p">,</span> <span class="n">document_ids</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Document: </span><span class="si">{</span><span class="n">doc_id</span><span class="si">}</span><span class="s2">, Semantic similarity: </span><span class="si">{</span><span class="n">score</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;-----------&#34;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;-----------&#34;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Document: 905, Semantic similarity: 0.4941929578781128
-----------
ç°åœº é˜¿è” ç¬¬ä¸‰èŠ‚ æœª äº®ç›¸   å¥‡æ‰ è¿ç»­ 3 è®° é‡æ‰£ é€†è½¬ æ¯”åˆ† æ–°æµª ä½“è‚²è®¯ åŒ—äº¬ æ—¶é—´ 4 2 å¥‡æ‰ ä¸»åœº è¿æˆ˜ è”ç›Ÿ å«åº• éª‘å£« å¥‡æ‰ æ–°ç§€ åå« çº¦ç¿° - æ²ƒå°”å›  ä¸€åœº å¯¹é˜µ çƒ­ç« æ¯”èµ› æ–—æ®´ ç¦èµ› ä¸€åœº ä¼¤æ„ˆ å¤å‡º å®‰å¾·é›· - å¸ƒ è±åˆ‡ å›åˆ° é¦–å‘ é˜µå®¹ å¥‡æ‰ æœ¬èµ›å­£ é¦–åœº å®¢åœº èƒœåˆ© é¢å¯¹ éª‘å£« å–å¾— å½“æ—¶ å¥‡æ‰ 115 - 110 å‡»è´¥ å¯¹æ‰‹ ä¸ŠåŠåœº éª‘å£« å‘½ä¸­ç‡ è¾¾åˆ° 53.8% å¥‡æ‰ ä»… 44% éª‘å£« å¸Œå…‹ æ£® ( 16 ) å¡ ç”³æ–¯ ( 12 ) å¾—åˆ† åŒ å¥‡æ‰ å¸ƒ è±åˆ‡ ( 22 ) éº¦åŸº ( 12 ) åŸƒæ–‡æ–¯ 4 æŠ• 0 ä»… æŠ¢ä¸‹ 1 ç¯®æ¿ æ˜“å»ºè” ä¸Šåœº 7 08 2 æŠ• 0 æŠ¢ä¸‹ 3 ç¯®æ¿ å¼‚åœ° å†æˆ˜ åŸƒæ–‡æ–¯ ç»ˆäº å¾—åˆ† æŠ¢æ–­ å‰å çŠ¯è§„ ä¸¤ç½š å‘½ä¸­ å‰ éšå³ çªç ´ ä¸Šç¯® å‘½ä¸­ å›æ•¬ çƒ æ° å¼—æ–¯ ä¸‰åˆ† ä¸è¿› å‰ æŠ¢ä¸‹ ç¯®æ¿ ä¸Šç¯® å†è¿› ä¸€çƒ å¸ƒ è±åˆ‡ ä¸­æŠ• å‘½ä¸­ éœæ—æ–¯ ç¯®ä¸‹ å‡ºæ‰‹ ä¸è¿› å¸ƒ è±åˆ‡ æŠ¢ä¸‹ ç¯®æ¿ æ­¤å å…‹åŠ³ç¦å¾· è¿ç»­ çªç ´ å…ˆæ˜¯ åŠ©æ”» éº¦åŸº æ‰£ç¯® ç›–æ‰ æˆ´ç»´æ–¯ æŠ•ç¯® åŠ©æ”» å¸ƒ è±åˆ‡ æ‰£ç¯® æˆ´ç»´æ–¯ è¿çƒ è¢«æ–­ å¸ƒ è±åˆ‡ ä¼ ç»™ æ° å¼—æ–¯ ä¸€è®° æš´æ‰£ å¥‡æ‰ è¿ç»­ 3 æ¬¡ é¢‡å…· æ°”åŠ¿ æ‰£ç¯® è¿å¾— 6 åè¶… éª‘å£« 1 éª‘å£« è¯·æ±‚ æš‚åœ å›åˆ° æ¯”èµ› å‰ ä¸Šç¯® ä¸è¿› éº¦åŸº ä½ä½ å•æ‰“ ä¸è¿› å¸ƒ è±åˆ‡ æŠ¢ä¸‹ ç¯®æ¿ 3 å¾—æ‰‹ éª‘å£« è¿›æ”» 24 è¿ä¾‹ å¥‡æ‰ è¶Šæˆ˜è¶Šå‹‡ å…‹åŠ³ç¦å¾· èº«ä½“ å¤±å» é‡å¿ƒ æƒ…å†µ ä»ç„¶ å°†çƒ æŠ•è¿› ä¸€ä¸ªæ‰“ 3 éª‘å£« è¿ç»­ å‰ æŒºèº«è€Œå‡º ä¸‰åˆ† å‘½ä¸­ ä¸ªäºº å·²ç» å¾—åˆ° 10 æ­¤äºº æœ¬èµ›å­£ çŸ­æš‚ æ•ˆåŠ› å¥‡æ‰ éº¦åŸº ä¸­æŠ• ä¸è¿› å¸ƒ è±åˆ‡ æŠ¢ä¸‹ å‰åœº ç¯®æ¿ å°†çƒ æ”¾è¿› éº¦åŸº é˜²å®ˆ é¢†åˆ° çŠ¯è§„ å¸Œå…‹ æ£®ä¸¤ç½š å‘½ä¸­ éº¦åŸº å¼ºæ”» é€ æˆ éœæ—æ–¯ çŠ¯è§„ ä¸¤ç½š ä¸€ä¸­ æˆ´ç»´æ–¯ ä¸‰åˆ† ä¸è¿› å…‹åŠ³ç¦å¾· è·‘ æŠ• å‘½ä¸­ æˆ´ç»´æ–¯ çªåˆ† éœæ—æ–¯ æš´æ‰£ å‘½ä¸­ å›è¿‡å¤´æ¥ å…‹åŠ³ç¦å¾· åŠ©æ”» éº¦åŸºæ‰£ åŠ² çˆ† å“ˆå…° é«˜è¿ª ä¸­æŠ• ä¸è¿› å…‹åŠ³ç¦å¾· æŠ•ç¯® åå‡º å¸ƒ è±åˆ‡ 3 æŠ¥ä»· è¿ç»­ æŠ¢ ç¯®æ¿ è¿›æ”» æœ€å çŠ¯è§„ ä¸¤ç½š ä¸€ä¸­ ç°åœ¨ å·²ç» å¾—åˆ° 32 18 ç¯®æ¿ å¸ƒ è±åˆ‡ åº•çº¿ é­ æŠ¥ä»· åˆ†çƒ åŸƒæ–‡æ–¯ ä¸‰åˆ† å‘½ä¸­ éœæ—æ–¯ ç¯®ä¸‹ é‡æ‰£ å¥‡æ‰ è¯·æ±‚ æš‚åœ å¸ƒ è±åˆ‡ ç»§ç»­ å¾—åˆ† å‰å¸ƒæ£® ä¸Šç¯® å‘½ä¸­ å…‹åŠ³ç¦å¾· ä¸­æŠ• ä¸è¿› æŠ¢ä¸‹ ç¯®æ¿ æ° å¼—æ–¯ è¿çƒ çªç ´ çŠ¯è§„ ä¸¤ç½š å‘½ä¸­ æ˜“å»ºè” èŠ‚ æ²¡æœ‰ ç™»åœº ç¬¬ä¸‰èŠ‚ æ¯”èµ› ç»“æŸ éª‘å£« 82 - 83 å¥‡æ‰ ( è‰å¤´ ç‹ )
-----------

Document: 689, Semantic similarity: 0.4917592704296112
-----------
ç›´å‡» åº·å¤§ å†…çº¿ ä¸€æŸ±æ“å¤©   13 ä¼˜åŠ¿ åˆ°æ‰‹ èƒœåˆ©åœ¨æœ› æ–°æµª ä½“è‚²è®¯ åŒ—äº¬ æ—¶é—´ 4 5 ( ä¼‘æ–¯æ•¦ æ—¶é—´ 4 4 ) æ¶ˆæ¯ NCAA   Final   4 æ€»å†³èµ› ä¼‘æ–¯æ•¦ Reliant çƒé¦† ä¸¾è¡Œ æ¯”èµ› è¿›å…¥ æœ€å 6 åˆ†é’Ÿ æœ¬åœº è¡¨ç° ååˆ† äº®çœ¼ åº·æ¶…ç‹„æ ¼ å†…çº¿ é˜¿è±å…‹æ–¯ - å¥¥é‡Œ ç“¦åŸºæ¥ é˜Ÿå‹ ç›´ä¼  ç©ºåˆ‡ ç¯®ä¸‹ æ‰£ç¯® å¾—åˆ† æ‰“æˆ 2 + 1 ç›®å‰ å·²ç» æ‹¿ä¸‹ 10 9 ç¯®æ¿ 3 å°ç›– å·´ç‰¹å‹’ ä»ç„¶ æ²¡ è§£å†³ è¿›æ”» ç«¯çš„ é—®é¢˜ ä¸‹åŠåœº 23 æŠ• ä»…ä»… 3 å±¡æ¬¡ å¤–çº¿ ç©ºæŒ¡ å‡ºæ‰‹ å‡ æ‰“é“ å‘Šç»ˆ ä»…ä»… å…¥è´¦ 8 ç›®å‰ åº·å¤§ å·²ç» å–å¾— 13 ä¼˜åŠ¿ èƒœåˆ©åœ¨æœ› ( silencer )
-----------

Document: 425, Semantic similarity: 0.47035443782806396
-----------
ä»Šæ—¥ æ•°æ® è¶£è°ˆ é­”å…½ æ‚²æƒ… ä¼¼ å¼ å¤§å¸…   åŸºå¾· ç„•å‘ ç¬¬äºŒ æ˜¥ æ–°æµª ä½“è‚²è®¯ åŒ—äº¬ æ—¶é—´ 4 17 NBA å­£åèµ› æ­£å¼ å¼€æ‰“ è¿›è¡Œ 4 åœº æ¯”èµ› ä»¥ä¸‹ ä»Šæ—¥ æ¯”èµ› è¯ç”Ÿ æœ‰è¶£ æ•°æ® ä»Šæ—¥ é¦–åœº å­£åèµ› èŠåŠ å“¥ å…¬ç‰› ç¬¬å››èŠ‚ å‰© 4 åˆ†é’Ÿ ä»ä»¥ 88 - 98 è½å æ¥ä¸‹æ¥ æ‰“å‡º 16 - 1 æ”»å‡» æ³¢ ä¸»åœº ä¸€ä¸¾ é€†è½¬ å°ç¬¬å®‰çº³ æ­¥è¡Œè€… å–èƒœ ç»§ 2004 ä¹‹å NBA å­£åèµ› èˆå° å†æ¬¡å‡ºç° ç»ˆåœº å‰ 4 åˆ†é’Ÿ è½å ä¸¤ä½æ•° æœ€ç»ˆ ç¿»ç›˜ æˆåŠŸ æ¡ˆä¾‹ 2004 5 9 è¥¿éƒ¨ å†³èµ› æ˜å°¼è‹è¾¾ æ£®æ—ç‹¼ è¨å…‹æ‹‰é—¨æ‰˜ å›½ç‹ æ¯”èµ› æ£®æ—ç‹¼ åŒæ · ç»ˆåœº å‰ 4 åˆ†é’Ÿ ä»ä»¥ 78 - 88 è½å æ¥ä¸‹æ¥ æ‰“å‡º 16 - 1 ( æƒŠäºº ç›¸ä¼¼ ) æœ€ç»ˆ 94 - 89 é€†è½¬ å–èƒœ ä»Šå¤© å…¬ç‰› é€†è½¬ æ­¥è¡Œè€… æ¯”èµ› å¾·é‡Œå…‹ - ç½—æ–¯ ç  39 ç½šçƒ 21 æŠ• 19 2008 æ´›æ‰çŸ¶ æ¹–äºº å¯¹é˜µ çŠ¹ä»– çˆµå£« ä¸€åœº å­£åèµ› ç§‘æ¯” - å¸ƒè±æ©ç‰¹ åˆ›ä¸‹ å•åœº ç½šçƒ 23 æŠ• 21 å­£åèµ› çºªå½• ç½—æ–¯ ä½å±… å…¨åœº ä¸‰åˆ†çƒ 9 æ¬¡ å‡ºæ‰‹ ç«Ÿæ— ä¸€ å‘½ä¸­ å­£åèµ› å†å² æ­¤å‰ ä¸¤æ¬¡ ç±»ä¼¼ æ¡ˆä¾‹ 2008 å¥¥å…°å¤š é­”æœ¯ å¯¹é˜µ å¤šä¼¦å¤š çŒ›é¾™ ä¸€åœº æ¯”èµ› æ‹‰æ²™å¾· - åˆ˜æ˜“æ–¯ ä¸‰åˆ†çƒ 9 æŠ• 0 ä¸€æ¬¡ ç†ŸçŸ¥ 1994 æ€»å†³èµ› ç¬¬ä¸ƒåœº çº¦ç¿° - æ–¯å¡”å…‹ æ–¯ ä¸‰åˆ† çº¿å¤– 11 æŠ• 0 çº½çº¦ å°¼å…‹æ–¯ è´Ÿäº ä¼‘æ–¯æ•¦ ç«ç®­ å† å†› æ“¦è‚©è€Œè¿‡ ä»Šå¤© äºšç‰¹å…°å¤§ è€é¹° å®¢åœº æˆ˜èƒœ å¥¥å…°å¤š é­”æœ¯ æ¯”èµ› è€é¹° äº”å çƒå‘˜ å¾—åˆ† ä½äº 13 â€” â€” ä¹” - çº¦ç¿°é€Š ( 25 16 æŠ• 9 ) è´¾é©¬å°” - å…‹åŠ³ç¦å¾· ( 23 14 æŠ• 7 ) è‰¾å°” - éœç¦å¾· ( 16 14 æŠ• 7 ) çº¦ä»€ - å²å¯†æ–¯ ( 15 12 æŠ• 6 ) ç§‘å…‹ - è¾›é‡Œå¥‡ ( 13 10 æŠ• 6 ) è¯¥é˜Ÿ è¿‡å» 199 åœº å­£åèµ› å°šå± é¦–æ¬¡ è€é¹°é˜Ÿ å²ä¸Š ä¸€æ¬¡ å‡ºç° è¿™ç§ ç››å†µ 1966 4 14 131 - 127 æˆ˜èƒœ æ´›æ‰çŸ¶ æ¹–äºº æ¯”èµ› å½“æ—¶ ä¹¦å†™ çºªå½• äº”äºº é‡Œå¥‡ - å¤å°”æ— å…‹é‡Œå¤« - å“ˆæ ¹ æ³½å°”è« - æ¯”è’‚ æ¯”å°” - å¸ƒé‡Œå¥‡æ–¯ ä¹” - è€ƒ å¾·ç»´å°” ä»Šå¤© è´Ÿäº è€é¹° æ¯”èµ› å¾·æ€€ç‰¹ - éœåå¾· ( 46 ) è´¾ ç±³å°” - å°¼å°”æ£® ( 27 ) ç  73 é˜Ÿå‹ æ€»å…± ä»… æ‹¿ä¸‹ 20 é­”æœ¯ æœ€ç»ˆ 93 - 103 è´Ÿäº æ›´ä¸º å‡è¡¡ å¯¹æ‰‹ NBA å†å² 8 æ”¯ çƒé˜Ÿ ä¸€åœº å­£åèµ› æ¯”èµ› æœ‰è¿‡ ä¸¤å çƒå‘˜ è”æ‰‹ ç  å…¨é˜Ÿ è‡³å°‘ 75% å¾—åˆ† 1 é˜Ÿ å–èƒœ è¿½æº¯åˆ° 1950 4 9 å½“å¹´ æ€»å†³èµ› ç¬¬ä¸€åœº æ¯”èµ› ä¹”æ²» - éº¦è‚¯ å¾—åˆ° 37 å‰å§† - æ³¢ æ‹‰å¾· å¾—åˆ° 14 ç‡é¢† æ˜å°¼é˜¿æ³¢åˆ©æ–¯ æ¹–äºº 68 - 66 æˆ˜èƒœ é”¡ æ‹‰ä¸˜å…¹ æ°‘æ— ( è´¹åŸ 76 å‰èº« ) 7 é˜Ÿåˆ™ è´¥åŒ— å¾—åˆ° 46 éœåå¾· æŠ¢ä¸‹ 19 ç¯®æ¿ å¸¸è§„ æ—¶é—´ å–å¾— 1975 4 19 å¸ƒæ³•ç½— å‹‡æ•¢è€… ( æ´›æ‰çŸ¶ å¿«èˆ¹ å‰èº« ) æˆ˜èƒœ åç››é¡¿ å­å¼¹ ( åç››é¡¿ å¥‡æ‰ å‰èº« ) ä¸€åœº å­£åèµ› æ•ˆåŠ› å‹‡æ•¢è€… é²å‹ƒ - éº¦å¡ æœ åŒæ · æ²¡æœ‰ åŠ æ—¶èµ› æƒ…å†µ ç  50 21 ç¯®æ¿ å¨å°”ç‰¹ - å¼ ä¼¯ä¼¦ ä¸€åœº å­£åèµ› å¸¸è§„ æ—¶é—´ ç  46 19 ç¯®æ¿ çƒé˜Ÿ å´è¾“ ( äº‹å®ä¸Š å¼ å¤§å¸… ç”Ÿæ¶¯ 3 åœº æ¯”èµ› å–å¾— æ•°æ® ç«Ÿ è´¥åŒ— ) åˆš è°¢å¹• æœ¬èµ›å­£ å¸¸è§„èµ› æ°æ£® - åŸºå¾· ä»… ä¸¤åœº æ¯”èµ› å¾—åˆ† è¾¾åˆ° 20 + 1 20 å¯¹é˜µ æ¹–äºº æ¯”èµ› ç  èµ›å­£ æœ€é«˜ 21 ä»Šå¤© è¾¾æ‹‰æ–¯ å°ç‰› ä¸»åœº æˆ˜èƒœ æ³¢ç‰¹å…° å¼€æ‹“è€… æ¯”èµ› ç  24 å‘½ä¸­ 6 è®° ä¸‰åˆ†çƒ ä¸€åœº å­£åèµ› æ¯”èµ› ç  20 + å¾—åˆ† åˆ·æ–° å¸¸è§„èµ› åˆ›ä¸‹ èµ›å­£ æ–°é«˜ NBA å†å² å£®ä¸¾ çƒå‘˜ å¦‚ä»Š 38 å² åŸºå¾· å¹´é¾„ æœ€å¤§ æˆä¸º NBA å†å² ä¸€åœº å­£åèµ› æ¯”èµ› å•åœº å‘½ä¸­ 6 è®° ä¸‰åˆ†çƒ å¹´é¾„ æœ€å¤§ çƒå‘˜ æ­¤å‰ çºªå½• é›·å‰ - ç±³å‹’ 2002 åˆ›ä¸‹ å½“æ—¶ 36 å² ä»Šå¤© å°ç‰› æˆ˜èƒœ å¼€æ‹“è€… æ¯”èµ› å¾·å…‹ - è¯ºç»´èŒ¨åŸº ç¬¬å››èŠ‚ 13 æ¬¡ ç½šçƒ å‡ºæ‰‹ å‘½ä¸­ è¿½å¹³ è¿ˆå…‹å°” - ä¹”ä¸¹ çºªå½• 1990 - 91 èµ›å­£ å­£åèµ› ä¸€åœº å…¬ç‰› åº•ç‰¹å¾‹ æ´»å¡ æ¯”èµ› ä¹”ä¸¹ å•èŠ‚ å‘½ä¸­ 13 æ¬¡ ç½šçƒ ç‡é˜Ÿ 105 - 97 å–èƒœ æœ€ç»ˆ å…¬ç‰› è·å¾— èµ›å­£ æ€»å† å†› ä»Šå¤© è¿ˆé˜¿å¯† çƒ­ç« æˆ˜èƒœ è´¹åŸ 76 æ¯”èµ› å…‹é‡Œæ–¯ - æ³¢ä»€ å¾—åˆ° 25 12 ç¯®æ¿ å‹’å¸ƒæœ— - è©¹å§†æ–¯ å¾—åˆ° 21 14 ç¯®æ¿ ä»–ä¿© é˜Ÿå‹ å‚åŠ  é¦–åœº å­£åèµ› å‰ ä¸€ä¸ª èµ›å­£ å„ä¸ºå…¶ä¸» æ¥ä¸‹æ¥ èµ›å­£ å¹¶è‚©ä½œæˆ˜ å­£åèµ› é¦–åœº æ¯”èµ› ç  å¾—åˆ† 20 + ç¯®æ¿ 10 + ç»„åˆ æ³¢ä»€ è©¹å§†æ–¯ ä¹‹å‰ æ— å…ˆä¾‹ ( é­‘é­… )
-----------

Document: 155, Semantic similarity: 0.45704954862594604
-----------
ç°åœº éº¦è’‚ è¿”åœº é”€é­‚ è·³æŠ• ä¸¤ è¿å‡»   å°æ‹œ çº³å§† å•èŠ‚ 11 æ–°æµª ä½“è‚²è®¯ åŒ—äº¬ æ—¶é—´ 4 6 åç››é¡¿ å¥‡æ‰ ä¸»åœº è¿æˆ˜ åº•ç‰¹å¾‹ æ´»å¡ æ­¤å‰ çƒé˜Ÿ å·²ç» å®¢åœº ä¸¤è¿èƒœ è‹¥èƒ½ æˆ˜èƒœ æ´»å¡ å¥‡æ‰ æœ¬èµ›å­£ é¦–æ¬¡ è¿æ¥ ä¸‰è¿èƒœ å¼‚åœ° å†æˆ˜ åŸƒæ–‡æ–¯ ä¸­æŠ• å‘½ä¸­ç‡ å…ˆ å¾—åˆ† æ‹œçº³å§† ä¸­æŠ• ä¸è¿› å…‹åŠ³ç¦å¾· ä¸€äºº å¸¦çƒ è¿ å‰åœº å¯¹æ‰‹ å°šæœª è½ä½ æƒ…å†µ ç›´æ¥ å‡ºæ‰‹ æŠ•ç¯® å‘½ä¸­ è¿™ç§ æŠ•ç¯® æ¬ ç¼º è€ƒè™‘ æ ¹æœ¬ æ²¡æœ‰ æˆ˜æœ¯ é…åˆ å…¨ ä¸ªäºº æ‰‹æ„Ÿ é‡åˆ° é˜²å®ˆ ç¨ ä¸€ç‚¹ çƒé˜Ÿ æ²ƒå°” æŠ¢æ–­ åŸƒæ–‡æ–¯ ç›´æ¥ æš´æ‰£ å¥‡æ‰ åè¶… 4 æ´»å¡ è¯·æ±‚ æš‚åœ æ²ƒå°” æŠ¥ä»· å¯¹æ‰‹ æ‹œçº³å§† å¾—åˆ° æœºä¼š ä¸‰åˆ† å‡ºæ‰‹ å‘½ä¸­ å¸ƒ è±åˆ‡ ä¸Šç¯® å¾—æ‰‹ é—¨ç½— åŠ©æ”» å¨å°” è€ƒå…‹æ–¯ æ‰£ç¯® å‘½ä¸­ åŸƒæ–‡æ–¯ ä¸‰åˆ† ä¸è¿› æ‹œçº³å§† çªç ´ ä¸Šç¯® å‘½ä¸­ å¨å°” è€ƒå…‹æ–¯ æ‹¿å¸ƒ è±åˆ‡ æ²¡æœ‰ åŠæ³• è¿çƒ è¿›æ”» å¨å°” è€ƒå…‹æ–¯ åªèƒ½ ä¼¸ç›´ æ‰‹è‡‚ ä¸æ–­ æ»‘æ­¥ è¢«å¸ƒ è±åˆ‡ å¼ºæŠ• å‘½ä¸­ æ´»å¡ æ‹œçº³å§† å‘åŠ› çªç ´ ä¸Šç¯® å‘½ä¸­ å¸ƒ è±åˆ‡ ä¸­æŠ• ä¸è¿› æ‹œçº³å§† å·åœŸé‡æ¥ é€ æˆ æ²ƒå°” çŠ¯è§„ ä¸¤ç½š å‘½ä¸­ ä¸ªäºº å·²ç» å¾—åˆ° 11 é—¨ç½— æŠ¢æ–­ å¸ƒ è±åˆ‡ æ™®æ—æ–¯ ä¸Šç¯® å‘½ä¸­ æ´»å¡ åè¶… 3 éº¦åŸº ä¼ çƒ å¤±è¯¯ å¥‡æ‰ è¯·æ±‚ æš‚åœ å¨å°” è€ƒå…‹æ–¯ ç¯®ä¸‹ å¼ºæ‰“ å¥‡æ‰ åå‡» åŸƒæ–‡æ–¯ ä¸Šç¯® å‘½ä¸­ æ™®æ—æ–¯ ç³Ÿç³• çŠ¶æ€ ç»§ç»­ ä¸­æŠ• åå‡º å¸ƒ è±åˆ‡ è¿çƒ å•æ‰“ æ´»å¡ ä¸¤å å†…çº¿ å±¡è¯•ä¸çˆ½ é€ æˆ é—¨ç½— çŠ¯è§„ ä¸¤ç½š å‘½ä¸­ æ±‰å¯†å°”é¡¿ ä¸­æŠ• ä¸è¿› å¨å°” è€ƒå…‹æ–¯ æŠ¢ä¸‹ å‰åœº ç¯®æ¿ ç›´æ¥ æ‰£ç¯® å‘½ä¸­ å¸ƒ è±åˆ‡ ç»§ç»­ å‘å¨ è½¬èº« æ‘†è„± ä¸Šç¯® å‘½ä¸­ æ‹œçº³å§† ä¸‰åˆ† åå‡º çƒ ç ¸ è¿œ æ´»å¡ çƒå‘˜ é€€å®ˆ ä¸åŠ å…‹åŠ³ç¦å¾· è½»æ¾ ä¸Šç¯® å‘½ä¸­ æ²ƒå°” ä¸­æŠ• ä¸è¿› æ‹œçº³å§† åå‡» é­ ä¾µçŠ¯ ä¸¤ç½š å‘½ä¸­ ä¸ªäºº å•èŠ‚ å·²ç» å¾—åˆ° 11 å¸ƒ è±åˆ‡ å¯¹æ‰‹ åŒ…å¤¹ ä¸­æŠ• åå‡º æ™®æ—æ–¯ è·‘ æŠ• å‘½ä¸­ æ´»å¡ åè¶… ä¸€åˆ† å…‹åŠ³ç¦å¾· ä¸­æŠ• æ‰“é“ æ‹œçº³å§† æ²¡èƒ½ å‘½ä¸­ ä¸‰åˆ† éº¦è’‚ å›åˆ° èµ›åœº å¡æ‹‰èŠ¬ è¿›æ”» çŠ¯è§„ æ™®æ—æ–¯ ä¸­æŠ• ä¸è¿› é—¨ç½— è¡¥ç¯® å‘½ä¸­ éº¦è’‚æ–­ çƒ ç›´æ¥ ä¸­æŠ• å‘½ä¸­ å¸ƒ è±åˆ‡ èµ°æ­¥ éº¦è’‚ å‡åŠ¨ä½œ ç‚¹é£ å…‹åŠ³ç¦å¾· æŠ•ç¯® å†è¿› ç¬¬ä¸‰èŠ‚ æ¯”èµ› ç»“æŸ æ´»å¡ 81 - 78 å¥‡æ‰ ( è‰å¤´ ç‹ )
-----------

Document: 254, Semantic similarity: 0.45255911350250244
-----------
å¥‡æ‰ vs æ­¥è¡Œè€… å‰ç» èµ°å‡º å®¢åœº é˜´å½±   æ–—ç‹  ä¸œéƒ¨ è€å…« æ–°æµª ä½“è‚²è®¯ åŒ—äº¬ æ—¶é—´ 4 7 å¥‡æ‰é˜Ÿ å®¢åœº æŒ‘æˆ˜ ä¸œåŒº ç¬¬å…« æ­¥è¡Œè€… ç›®å‰ å¥‡æ‰ å®¢åœº æˆ˜ç»© 3 èƒœ 35 è´Ÿ æœ€è¿‘ å®¢åœº ä¸¤è¿èƒœ å¥‡æ‰é˜Ÿ èƒŒé èƒŒ ä½œæˆ˜ ä»Šå¤© ä¸»åœº 107 - 105 é™©èƒœ æ´»å¡ çƒé˜Ÿ ä¸€ä¸¾ æ‹¿åˆ° èµ›å­£ æœ€é•¿ ä¸‰è¿èƒœ å®é™…ä¸Š è¿™æ˜¯ å¥‡æ‰é˜Ÿ 2007 - 08 èµ›å­£ ä»¥å çƒé˜Ÿ ç¬¬ä¸€ä¸ª èµ›å­£ ä¸‰è¿èƒœ è¿™åœº æ¯”èµ› å¥‡æ‰ æƒŠäºº è·å¾— 35 æ¬¡ ç½šçƒ æ²ƒå°”ä¸€äºº åŒ…åŠ 16 æ¬¡ å…¨åœº å¾—åˆ° 26 12 æ¬¡ åŠ©æ”» 6 ç¯®æ¿ 4 æ¬¡ æŠ¢æ–­ å¸ƒ è±åˆ‡ æ— ç–‘ ä¸‰è¿èƒœ ç¬¬ä¸€ åŠŸè‡£ è¿èƒœ æœŸé—´ åœºå‡ å¾—åˆ° 29 15.3 ç¯®æ¿ å…‹åŠ³ç¦å¾· åŒæ · ç«çˆ† å¼‚å¸¸ ä¸€ä½ å‰é”‹ é¦–å‘ åŸƒæ–‡æ–¯ è¡¨ç° ä½ä¼° æ´»å¡ æ¯”èµ› åŸƒæ–‡æ–¯ 13 æŠ• 9 ä¸­å°„ä¸‹ 20 æ²ƒå°” æ‹¿åˆ° èŒä¸šç”Ÿæ¶¯ é¦–ä¸ª ä¸‰è¿èƒœ â€œ è”ç›Ÿ ç•™ä¸‹ æ ‡ç­¾ ä¸€å èœé¸Ÿ è¯æ˜ ä¸€éƒ¨åˆ† å¾ˆå¤š æƒ³ ç«™ çƒåœºä¸Š ä¸€åˆ†é’Ÿ å…¨åŠ›ä»¥èµ´ â€ å¥‡æ‰ ä¸‰è¿èƒœ å¯¹æ‰‹ åå‰¯å…¶å® é±¼è…© çƒé˜Ÿ æ— è®ºå¦‚ä½• ä¸‰è¿èƒœ è¿™æ”¯ å¼±æ—… ä¸€ä¸ª ä¸å° æ¿€åŠ± å°¤å…¶ ä¼¤ç—… æ»¡è¥ æƒ…å†µ ç›®å‰ çƒé˜Ÿ 6 å¯èƒ½ èµ›å­£ ç»“æŸ å‰ æ— æ³• å½’é˜Ÿ åŒ…æ‹¬ å¾—åˆ†ç‹ å°¼å…‹ - æ¨ çº¦ä»€ - éœåå¾· æ‹‰æ²™å¾· - åˆ˜æ˜“æ–¯ å¸ƒå…‹ æ©æˆ´ è€¶ å¡ è’‚å°” - é©¬ä¸ æ­¥è¡Œè€… 35 èƒœ 43 è´Ÿ æš‚å±… ä¸œéƒ¨ ç¬¬å…« ç›®å‰ ä¸œéƒ¨ å‰ä¸ƒ å·²ç» é”å®š å­£åèµ› å‰©ä¸‹ ç¬¬å…«å æ‚¬å¿µ æ­¥è¡Œè€… é¢†å…ˆ ç¬¬ä¹ä½ å±±çŒ« 2.5 ä¸ªèƒœåœº é¢†å…ˆ 10 ä½ é›„é¹¿ 3.5 ä¸ªèƒœåœº å‰©ä¸‹ 4 åœº æ¯”èµ› æƒ…å†µ æ‚¬å¿µ å¹¶ä¸å¤§ æ˜å¤© å±±çŒ« é›„é¹¿ è¿æˆ˜ å¼ºæ•Œ ( é­”æœ¯ çƒ­ç« ) æ­¥è¡Œè€… æœºä¼š æ‰©å¤§ é¢†å…ˆ åœºæ¬¡ ä¼˜åŠ¿ çƒé˜Ÿ å¤´å· å¾—åˆ†æ‰‹ æ ¼å…°æ° çŠ¶æ€ è¿‡å» 5 åœº æ¯”èµ› å¾—åˆ† 20 ä»¥ä¸‹ æœ€è¿‘ ä¸‰åœº ä¸‰åˆ†çƒ 12 æŠ• 3 æ±‰æ–¯ å¸ƒé²åœ¨ è¿‡å» 6 åœº æ¯”èµ› é™·å…¥ æŒ£æ‰ åœºå‡ 9.3 5.7 ç¯®æ¿ ( ä¹‹å‰ 11 åœº æ¯”èµ› è´¡çŒ® 20.6 7.8 ç¯®æ¿ ) ä¸€åœº æ¯”èµ› æ­¥è¡Œè€… 12 è¾“ç»™ é»„èœ‚é˜Ÿ ä¸»æ•™ç»ƒ æ²ƒæ ¼å°” ç§°ä¹‹ä¸º â€œ æƒ¨ç—› å¤±è´¥ â€ æœ¬èµ›å­£ ä¸¤é˜Ÿ æˆ˜æˆ 2 - 1 æ­¥è¡Œè€… èµ¢ä¸‹ æœ€è¿‘ ä¸¤æ¬¡ äº¤é”‹ ä¸¤åœº æ¯”èµ› å¥‡æ‰ å‘½ä¸­ç‡ å‡ ä½äº 40% æ€» å¤±è¯¯ é«˜è¾¾ 41 æ¬¡ é¢„è®¡ ä¸¤é˜Ÿ é¦–å‘ å¥‡æ‰ æ²ƒå°” å…‹åŠ³ç¦å¾· åŸƒæ–‡æ–¯ å¸ƒ è±åˆ‡ éº¦åŸº æ­¥è¡Œè€… ç§‘ é‡Œæ£® æ ¼å…°æ° ä¹”æ²» æ±‰æ–¯ å¸ƒé² å¸Œä¼¯ç‰¹ ( æœ¨ç“œ ä¸ )
-----------
</code></pre></div><br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">documents</span><span class="p">,</span> <span class="n">document_scores</span><span class="p">,</span> <span class="n">document_ids</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">search_documents_by_keywords</span><span class="p">(</span><span class="n">keywords</span><span class="o">=</span><span class="p">[</span><span class="s2">&#34;æ­é…&#34;</span><span class="p">,</span> <span class="s2">&#34;é«˜è·Ÿé‹&#34;</span><span class="p">],</span> <span class="n">num_docs</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="k">for</span> <span class="n">doc</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">doc_id</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">documents</span><span class="p">,</span> <span class="n">document_scores</span><span class="p">,</span> <span class="n">document_ids</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Document: </span><span class="si">{</span><span class="n">doc_id</span><span class="si">}</span><span class="s2">, Semantic similarity: </span><span class="si">{</span><span class="n">score</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;-----------&#34;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;-----------&#34;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>
</code></pre></div><pre><code>Document: 727, Semantic similarity: 0.5883481502532959
-----------
ç»„å›¾ å†·æ°” åŠå…¬å®¤   è¿è¡£è£™ é…å° åè‚© ç¾å›½ è®¾è®¡å¸ˆ Diane   Von   Furstenberg æ›¾ç» æ„Ÿè§‰ å¥³äºº ç©¿ è¿è¡£è£™ å¥³äºº æ‰¾åˆ° ä¸€ä»¶ é€‚åˆ dream   dress é‡è¦ æ— éœ€ è´¹ç¥ æ­é… å•ç©¿ è¿èº« ä¼˜é›… é£æ‰¬ è£™æ‘† ä¼¼ä¹ å‘Šè¯‰ å¥³ è¿è¡£è£™ ç©èµ· High   Fashion å˜è„¸ æ¸¸æˆ DKNY ç»¿è‰² è¿è¡£è£™   æ–°å“ æœª å®šä»· H &amp; M é»‘è‰² å¤–å¥—   æ–°å“ æœª å®šä»· Agatha é…ä»¶ æ–°å“ æœª å®šä»· C . Banner é«˜è·Ÿé‹   æ–°å“ æœª å®šä»· ä½ V é¢† è¿è¡£è£™ ç§€å‡º å±äº æ€§æ„Ÿ æ›´å¥½ å±•ç°å‡º é¢ˆéƒ¨ çº¿æ¡ æ­é… ä¿®èº« å‰ªè£ è¥¿è£… çŸ­æ¬¾ çš®æ‰‹å¥— æå…· æ¬§ç¾ æ˜æ˜Ÿ èŒƒå„¿ ç»† é«˜è·Ÿé‹ æ›´å¥½ çªå‡º åŒè…¿ é•¿åº¦ æ•´ä½“ æ˜¾å¾— è½»ç›ˆ ä¸å°‘ On &amp; on ç±³è‰² è¿è¡£è£™   æ–°å“ æœª å®šä»· Asobio é’ˆç»‡ å¤–å¥—   RMB   449 Kookai é‡‘è‰² è…°å¸¦ Jc  
-----------

Document: 435, Semantic similarity: 0.5440454483032227
-----------
ç»„å›¾ ç§‹å†¬ ä¼˜é›… å¦–å¨†   å¥³æ˜Ÿ çˆ± è£¸ è‰²ç³» å¯¼è¯­ è£¸è‰² ä¼˜é›… ä»£åè¯ å¥³æ˜Ÿ è¿‘æ¥ èª“ è£¸è‰² è¿›è¡Œ åˆ°åº• æ— è®ºæ˜¯ å¾è‹¥ ? æ€§æ„Ÿ ä¹åŸºå„¿ æ°”è´¨ æ­é… å„è‰² ç¤¼æœ èµå¿ƒæ‚¦ç›® å¨‡ä¿ æ¬¾å¼ æ›´æ˜¯ å¤§é¥±çœ¼ç¦ å¾è‹¥ ? é£˜é€¸ ä¸å¸¦    ç«‹åˆ» å½°æ˜¾ å¤©ç‹ å«‚ è´µå¦‡ æ°”è´¨ è¢å’ä»ª ç¿»é¢† è¥¿è£…   æ°”è´¨ éå‡¡ è£¸è‰² çŸ­æ¬¾ ç´§èº« è¥¿è£… çš®è´¨ é¢æ–™ å½°æ˜¾ ä¸ªæ€§ å¤¹å¸¦ ä¸€ç‚¹ è•¾ä¸ è£…é¥° å¥³æ€§ æŸ”ç¾ æ²¹ç„¶è€Œç”Ÿ æ­é… ç¢èŠ± è›‹ç³• è£™ æ°”è´¨ éå‡¡
-----------

Document: 870, Semantic similarity: 0.523485541343689
-----------
ç»„å›¾ çœ‹è¾¾äºº æ¼”ç» è±¹çº¹ å†›è£… é£ å¯¼è¯­ æ‡‚å¾— æ½®æµ æ€»æ˜¯ çŸ¥é“ é€‚åˆ ä»Šå†¬ æµè¡Œ äº®ç‚¹ å¤ª å†›è£… è±¹çº¹ ç±»ä¼¼ æ°‘æ—é£æƒ… æƒ³è¦ çŸ¥é“ æ­é… å¿« çœ‹çœ‹ æ—¶å°š è¾¾ ç©¿ å†›ç»¿è‰² å®½æ¾ æ¬¾ å¤§è¡£ ä¸å¤± ä¿çš® å‘³é“ é«˜è…° è®¾è®¡ çŸ­è£™ æœ‰æ•ˆ æå‡ è…°çº¿ è¡¬æ‰˜å‡º ä¿®é•¿ ç¾è…¿ è±¹çº¹ ä»Šå¹´ å†¬å­£ æŠ¢çœ¼ æ­é… å…ƒç´  åŠ ä¸Š é©¼è‰² é’ˆç»‡è¡« ç°è‰² å›´å·¾ æš– æ£•è‰² æ‰‹ æŒåŒ… æ•´ä½“ è‰²è°ƒ ç»Ÿä¸€ è¿·äºº æ£•è‰² è“è‰² ç»“åˆèƒ½ çœ¼å‰ä¸€äº® ç®€æ´ æ¬¾å¼ ä¾ç„¶ çªæ˜¾ 
-----------

Document: 522, Semantic similarity: 0.4756317138671875
-----------
å¥³æ˜Ÿ äº‰å½“ è“è‰²å¦–å§¬ &amp; nbsp ; è‹±å›½ æ°”è´¨ å¥³æ¼”å‘˜ ç‘åˆ‡å°” ãƒ» è–‡ å…¹ æ—¶å°š ç‚¹è¯„ è‹±å›½ æ°”è´¨ å¥³æ¼”å‘˜ ç‘åˆ‡å°” Â· è–‡ å…¹ ( Rachel   Weisz )   ç¾è²Œ éå¸¸ å¤´è„‘ ä¿®èº« å°èŠ± è¿è¡£è£™ æ­é… æŠ¢çœ¼ æ£•çº¢è‰² çŸ­ å¤¹å…‹ éå¸¸ å¥½çœ‹ æ­é… é»‘è‰² ç½—é©¬ feel é«˜è·Ÿé‹ ç‰¹åˆ« æœ‰æ½®å‘³ æ—¶å°š ç‚¹è¯„ èº«æ ä¸ç®— ç˜¦ å¥³æ˜Ÿ Lea   Michele æ­é… èµ·æ¥ éå¸¸ ç‰¹è‰² ä¸€å‘³ åœ°ç˜¦ é£æ ¼ æ»¡æ˜¯ è¤¶çš± è£™å­ éå¸¸ ä¿®èº« äº®çœ¼ é¢œè‰² éå¸¸
-----------

Document: 707, Semantic similarity: 0.47334203124046326
-----------
ç»„å›¾ é»‘ä¸ çŸ­è£™ ä¸Šé˜µ   5 æ—¬ å¥³æ˜Ÿ èƒœè¿‡ 90 çº¢æ˜Ÿ å¯¼è¯­ æ°”æ¸© è¶Šæ¥è¶Šä½ å¥³æ˜Ÿ ä¸ç• ä¸¥å¯’ çº·çº· ç©¿ç€ çŸ­è£™ é€è§†è£… å‡ºå¸­ æ´»åŠ¨ ä¸€ç•ª æ¯”æ‹¼ ä¸éš¾ å‘ç° æ°”è´¨ å¹´è½» éš¾å¾— å‰å®³ ä¸€èµ· çœ‹çœ‹ åˆ˜æ™“åº† 55 å² è¿‘æ—¥ é¢å¥–ç¤¼ åˆ˜æ™“åº† ä¸€è¢­ å®è“è‰² è¶…ä½ èƒ¸ V é¢† é•¿è£™ äº®ç›¸ è½»è–„ è•¾ä¸ å¥¢å çš®è‰ è‰³ä¸½ è‰²å½© ç¿ ç»¿ é¦–é¥° é…ä¸Š çŸ­å° ç²¾ç‚¼ æ³¢æ³¢ å¤´ ç¬é—´ å‡é¾„ 15 å² å¼ æ›¼ç‰ 46 å² ä¸€å‘ æ°”è´¨ å‹ ç¾å¥³ è‘—ç§° åå€’ å°‘ ç¹ç ä¿®é¥° åˆ»æ„ æ‰“æ‰® è¶…çº§ ç®€å• Lanvin   for   H &amp; M æ–œè‚© ç¤¼è£™ æ­é… ä¸€åŒ çš®è´¨ æ‰‹å¥— 
-----------
</code></pre>
<p><br><br></p>
<h2 id="10-get_topic_hierarchy">10. get_topic_hierarchy</h2>
<p>å¯¹è¯é¢˜è¿›è¡Œåˆ†ç±»ï¼Œéœ€è¦</p>
<ol>
<li>å…ˆæ‰§è¡Œmodel.hierarchical_topic_reduction</li>
<li>å†æ‰§è¡Œmodel.get_topic_hierarchyã€‚</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># å°†è¯é¢˜åˆ†ä¸º2ç±»</span>
<span class="n">model</span><span class="o">.</span><span class="n">hierarchical_topic_reduction</span><span class="p">(</span><span class="n">num_topics</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">get_topic_hierarchy</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<pre><code>[[7, 6, 1, 8, 5, 4, 3], [2, 0]]
</code></pre>
<p><br><br></p>
<h2 id="11-similar_words">11. similar_words</h2>
<p>æŸ¥æ‰¾ç›¸ä¼¼è¯ï¼Œ è¯¥æ–¹æ³•å…¶å®ä¹Ÿå¯ä»¥ç”¨äºæ‰©å……è¯å…¸ã€‚</p>
<p>similar_words(keywords, num_words, keywords_neg=None)</p>
<ul>
<li>keywords: å¾…æŸ¥è¯¢å…³é”®è¯åˆ—è¡¨</li>
<li>num_words: è¿”å›ç›¸ä¼¼è¯ä¸ªæ•°</li>
<li>keywords_neg: æŒ‡å®šåä¹‰è¯åˆ—è¡¨</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># æŸ¥æ‰¾ã€å¢è¿›ã€‘çš„æœ€ç›¸ä¼¼çš„10ä¸ªè¯</span>
<span class="n">model</span><span class="o">.</span><span class="n">similar_words</span><span class="p">(</span><span class="n">keywords</span><span class="o">=</span><span class="p">[</span><span class="s2">&#34;å¢è¿›&#34;</span><span class="p">],</span> 
                    <span class="n">num_words</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> 
                    <span class="n">keywords_neg</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<pre><code>(array(['ä¸¤å›½å…³ç³»', 'ä¸¤å›½', 'æ¸©å®¶å®', 'ç‹åˆš', 'æˆ˜ç•¥', 'å‹å¥½', 'ä¸­æ¬§', 'æ”¿æ²»', 'ä¼šè§', 'äººæ°‘'],
       dtype='&lt;U4'),
 array([0.50498132, 0.49835259, 0.4636392 , 0.45802986, 0.45299921,
        0.44836198, 0.43550295, 0.43471974, 0.43099192, 0.42711113]))
</code></pre>
<br>
<h2 id="12-save">12. save</h2>
<p>è®­ç»ƒä¸æ˜“ï¼Œ è®°å¾—ä¿å­˜æ¨¡å‹ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;éšä¾¿èµ·ä¸ªåå­—.pkl&#39;</span><span class="p">)</span>
</code></pre></div><br>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>PyCatFlowåº“|ç±»åˆ«æ•°æ®æ—¶é—´åºåˆ—å¯è§†åŒ–åº“</title>
      <link>https://hidadeng.github.io/blog/pycatflow/</link>
      <pubDate>Sun, 05 Dec 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/pycatflow/</guid>
      <description>å¤§å®¶çœ‹è¿‡äº†æ•°å€¼æ•°æ®éšæ—¶é—´å˜åŒ–çš„æ›²çº¿ï¼Œä½†æ˜¯ï¼Œå´é²œæœ‰å¯è§†åŒ–çš„å·¥å…·èƒ½å¾ˆå¥½åœ°å¯¹ç±»åˆ«ç‰¹å¾éšç€æ—¶é—´å˜åŒ–è¿›è¡Œç»˜åˆ¶ã€‚æœ¬æ–‡å°±ä»‹ç»ä¸€ç§å¾ˆå¥½çš„ç±»åˆ«ç‰¹å¾å¯è§†åŒ–å·¥å…·PyCatFlowï¼Œéå¸¸çš„ç®€å•ä¸”å®ç”¨ã€‚</description>
      <content:encoded><![CDATA[<p>å¤§å®¶çœ‹è¿‡äº†æ•°å€¼æ•°æ®éšæ—¶é—´å˜åŒ–çš„æ›²çº¿ï¼Œä½†æ˜¯ï¼Œå´é²œæœ‰å¯è§†åŒ–çš„å·¥å…·èƒ½å¾ˆå¥½åœ°å¯¹ç±»åˆ«ç‰¹å¾éšç€æ—¶é—´å˜åŒ–è¿›è¡Œç»˜åˆ¶ã€‚æœ¬æ–‡å°±ä»‹ç»ä¸€ç§å¾ˆå¥½çš„ç±»åˆ«ç‰¹å¾å¯è§†åŒ–å·¥å…·PyCatFlowï¼Œéå¸¸çš„ç®€å•ä¸”å®ç”¨ã€‚</p>
<h2 id="pycatflow">PyCatFlow</h2>
<p>PyCatFlow æ˜¯ä¸€ä¸ª Python åŒ…ï¼Œç”¨äºå¯è§†åŒ–<strong>ç±»åˆ«æ•°æ®çš„æ—¶é—´å˜åŒ–</strong>ã€‚å®ƒçš„çµæ„Ÿæ¥è‡ª Bernhard Rieder çš„å¯è§†åŒ–å·¥å…· <strong>RankFlow</strong>ï¼Œå®ƒå…è®¸å°†æ’ååˆ—è¡¨éšç€æ—¶é—´çš„æ¨ç§»è¿›è¡Œå¯è§†åŒ–ï¼Œä¾‹å¦‚ï¼ŒGoogle æˆ– YouTube ä¸ŠæŸ¥è¯¢çš„æœç´¢ç»“æœçš„å˜åŒ–ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œå°½ç®¡å®ƒçš„ç”¨æˆ·ç•Œé¢æç®€,RankFlow æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œè€Œä¸”æˆ‘å¾ˆéš¾ä¸ºå…¶å‡†å¤‡æ•°æ®ã€‚äº‹å®è¯æ˜ï¼Œè¿™äº›å›°éš¾ä¸»è¦æºäºâ€œæ»¥ç”¨â€RankFlowï¼Œæˆ–è€…ç”¨æ›´ç§¯æçš„æœ¯è¯­æ¥è¯´ï¼Œå®ƒæºäºå°† RankFlow ç”¨äºå…¶è®¾è®¡ç›®çš„ä»¥å¤–çš„å…¶ä»–ç›®çš„ã€‚</p>
<h2 id="èƒŒæ™¯äº†è§£rankflow">èƒŒæ™¯ï¼šäº†è§£RankFlow</h2>
<p>RankFlow å…è®¸æ¯”è¾ƒæ’ååˆ—è¡¨ï¼ˆéšç€æ—¶é—´çš„æ¨ç§»ï¼‰ã€‚ åœ¨æœ€ç®€å•çš„å½¢å¼ä¸­ï¼Œå®ƒéœ€è¦ä»¥æ¯åˆ—ä»£è¡¨ä¸€ä¸ªæ’ååˆ—è¡¨çš„æ–¹å¼æ’åˆ—è¡¨æ ¼æ•°æ®ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Time 1,Time 2,Time 3,Time 4
Item 1,Item 1,Item 1,Item 2
Item 2,Item 4,Item 2,Item 1
Item 3,Item 2,Item 4,Item 4
Item 4,Item 3,Item 5,Item 5
</code></pre></div><p>æ¯ä¸ªæ’ååˆ—è¡¨éƒ½å¯ä»¥é€šè¿‡æƒé‡è¿›è¡Œè¡¥å……ï¼Œä»è€Œä¸ºæ•°æ®æ·»åŠ å¦ä¸€å±‚ä¿¡æ¯ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬é‡‡ç”¨ YouTube æœç´¢ç»“æœæ•°æ®ï¼Œåˆ™å¯ä»¥å°†è§‚çœ‹æ¬¡æ•°ã€èµæˆç¥¨æ•°æˆ–èµæˆç¥¨åå¯¹ç‡ç”¨ä½œæƒé‡ä¿¡æ¯ã€‚ ä¸ºç®€å•èµ·è§ï¼Œç¤ºä¾‹æ•°æ®ä»…ç”±æ’ååˆ—è¡¨ç»„æˆï¼Œå¹¶åœ¨ä»¥ä¸‹æµç¨‹å›¾ä¸­æ˜¾ç¤ºç»“æœã€‚</p>

<figure >
    
        <img src="img/rankflow.png" width="800" />
    
    
</figure>

<p>ä¸ºäº†åŠ å¿«å›¾è¡¨çš„åå¤„ç†é€Ÿåº¦ï¼Œæˆ‘å†³å®šåˆ›å»ºä¸€ä¸ªç±»ä¼¼äº RankFlow çš„å¯è§†åŒ–å·¥å…·ï¼Œå®ƒéå¸¸é€‚åˆä¸åŒ…å«æ˜¾å¼æ’åä¿¡æ¯ä½†å¯èƒ½åŒ…å«é¢å¤–åˆ†ç±»æ•°æ®çš„æ—¶é—´æ•°æ®ã€‚</p>
<h2 id="pycatflowå¿«é€Ÿä¸Šæ‰‹">PyCatFlowå¿«é€Ÿä¸Šæ‰‹</h2>

<figure >
    
        <img src="img/sample_viz.png" width="800" />
    
    
</figure>

<p>å¦‚æœæˆ‘ä»¬ç”¨ä¸¤ç§ä¸åŒé¢œè‰²ï¼Œç°è‰²å’Œç»¿è‰²åˆ†åˆ«è¡¨ç¤ºç”·ç”Ÿå’Œå¥³ç”Ÿï¼Œç„¶åæ¯ä¸€ä¸ªæ ¼å­è¡¨ç¤ºä¸€ç±»ç”µå½±ï¼Œæ¨ªè½´æ˜¯ç”·ç”Ÿå’Œå¥³ç”Ÿéšç€æ—¶é—´æ¨ç§»çœ‹çš„ä¸åŒçš„ç”µå½±ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¸€ç›®äº†ç„¶ç”·ç”Ÿå’Œå¥³ç”Ÿçš„å–œå¥½çš„å˜åŒ–ï¼ŒçœŸçš„æ˜¯å¤ªç›´è§‚äº†ï¼
PyCatFlowå¤§å¤§æ–¹ä¾¿äº†æˆ‘ä»¬å¯¹äºç±»åˆ«ç‰¹å¾éšç€æ—¶é—´å˜åŒ–çš„åˆ†æã€‚</p>
<p><strong>å‡†å¤‡æ•°æ®</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&#34;data/sample_data_ChatterBot_Requirements.csv&#34;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">column</th>
<th style="text-align:left">items</th>
<th style="text-align:left">category</th>
<th style="text-align:right">column order</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:left">2015-09-08</td>
<td style="text-align:left">fuzzywuzzy</td>
<td style="text-align:left">A_Requirements</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">2015-09-08</td>
<td style="text-align:left">requests</td>
<td style="text-align:left">A_Requirements</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:left">2015-09-08</td>
<td style="text-align:left">requests-oauthlib</td>
<td style="text-align:left">A_Requirements</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:left">2015-09-08</td>
<td style="text-align:left">pymongo</td>
<td style="text-align:left">A_Requirements</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:left">2015-09-08</td>
<td style="text-align:left">jsondatabase</td>
<td style="text-align:left">A_Requirements</td>
<td style="text-align:right">1</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pycatflow</span> <span class="k">as</span> <span class="nn">pcf</span>

<span class="c1"># Load and parse data from file</span>
<span class="n">fname</span><span class="o">=</span><span class="s2">&#34;data/sample_data_ChatterBot_Requirements.csv&#34;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pcf</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">&#34;column&#34;</span><span class="p">,</span> <span class="n">nodes</span><span class="o">=</span><span class="s2">&#34;items&#34;</span><span class="p">,</span> <span class="n">categories</span><span class="o">=</span><span class="s2">&#34;category&#34;</span><span class="p">,</span> <span class="n">column_order</span><span class="o">=</span><span class="s2">&#34;column order&#34;</span><span class="p">)</span>

<span class="s1">&#39;&#39;&#39;
</span><span class="s1">visualize(data, spacing=50, node_size=10, width=None, height=None, minValue=1, maxValue=10, node_scaling=&#34;linear&#34;,
</span><span class="s1">          connection_type=&#34;semi-curved&#34;, color_startEnd=True, color_categories=True, nodes_color=&#34;gray&#34;,
</span><span class="s1">          start_node_color=&#34;green&#34;, end_node_color=&#34;red&#34;, palette=None, show_labels=True,
</span><span class="s1">          label_text=&#34;item&#34;, label_font=&#34;sans-serif&#34;, label_color=&#34;black&#34;, label_size=5,
</span><span class="s1">          label_shortening=&#34;clip&#34;, label_position=&#34;nodes&#34;, line_opacity=0.5, line_stroke_color=&#34;white&#34;,
</span><span class="s1">          line_stroke_width=0.5, line_stroke_thick=0.5, legend=True, sort_by=&#34;frequency&#34;)
</span><span class="s1">&#39;&#39;&#39;</span>

<span class="n">viz</span> <span class="o">=</span> <span class="n">pcf</span><span class="o">.</span><span class="n">visualize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">spacing</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">maxValue</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">minValue</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1">#save visualization to files</span>
<span class="n">viz</span><span class="o">.</span><span class="n">savePng</span><span class="p">(</span><span class="s1">&#39;sample_viz.png&#39;</span><span class="p">)</span>
<span class="n">viz</span><span class="o">.</span><span class="n">saveSvg</span><span class="p">(</span><span class="s1">&#39;sample_viz.svg&#39;</span><span class="p">)</span>

<span class="c1">#show visualization</span>
<span class="n">viz</span>
</code></pre></div>
<figure >
    
        <img src="img/1.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Another option is to visualize the graph with curved connections.</span>
<span class="c1"># The implementation of this connection type draws on https://github.com/bernorieder/RankFlow</span>

<span class="n">viz</span> <span class="o">=</span> <span class="n">pcf</span><span class="o">.</span><span class="n">visualize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">spacing</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">maxValue</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">minValue</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">connection_type</span><span class="o">=</span><span class="s1">&#39;curved&#39;</span><span class="p">)</span>
<span class="n">viz</span>
</code></pre></div>
<figure >
    
        <img src="img/2.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># The third option are straight connections between nodes</span>
<span class="n">viz</span> <span class="o">=</span> <span class="n">pcf</span><span class="o">.</span><span class="n">visualize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">spacing</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">maxValue</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">minValue</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">connection_type</span><span class="o">=</span><span class="s1">&#39;straight&#39;</span><span class="p">)</span>

<span class="c1"># show visualization</span>
<span class="n">viz</span>
</code></pre></div>
<figure >
    
        <img src="img/3.png" width="800" />
    
    
</figure>

<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="https://github.com/bumatic/PyCatFlow">https://github.com/bumatic/PyCatFlow</a></p>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>pyjanitoræ•°æ®åˆ†ææ¸…æ´åŒ…</title>
      <link>https://hidadeng.github.io/blog/pyjanitor_tutorial/</link>
      <pubDate>Thu, 25 Nov 2021 23:10:10 +0600</pubDate>
      
      <guid>/blog/pyjanitor_tutorial/</guid>
      <description>æ¸…æ´—æ•°æ®ï¼Œä¹Ÿç®€æ´ä»£ç </description>
      <content:encoded><![CDATA[<ul>
<li>
<p><a href="https://pyjanitor-devs.github.io/pyjanitor/">official docs</a></p>
</li>
<li>
<p><a href="https://github.com/pyjanitor-devs/pyjanitor">github</a></p>
</li>
</ul>
<br>
<p>pyjanitoræ˜¯å‚ç…§Rè¯­è¨€janitoråŒ…è¯­æ³•ï¼Œä¸ºPythoné‡èº«å®šåˆ¶çš„æ•°æ®æ¸…æ´—åŒ…,å³å¯æ¸…æ´—æ•°æ®ï¼Œåˆå¯è®©ä»£ç ç®€æ´å¹²å‡€ã€‚</p>
<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="pyjanitor_tutorial.ipynb">click to download the code</a></p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">pyjanitor</span>
</code></pre></div><br>
<h2 id="ä¸ºä»€ä¹ˆç”¨janitor">ä¸ºä»€ä¹ˆç”¨janitorï¼Ÿ</h2>
<p>æ•°æ®é¢„å¤„ç†é€šå¸¸ç”±ä¸€ç³»åˆ—æ­¥éª¤ç»„æˆï¼Œè¿™äº›æ­¥éª¤æ¶‰åŠå°†åŸå§‹æ•°æ®è½¬æ¢ä¸ºå¯ç†è§£/å¯ç”¨çš„æ ¼å¼ã€‚è¿™ä¸€ç³»åˆ—çš„æ­¥éª¤éœ€è¦æŒ‰ç…§ä¸€å®šçš„é¡ºåºè¿è¡Œæ‰èƒ½æˆåŠŸã€‚æˆ‘ä»¬ä»¥åŸºç¡€æ•°æ®æ–‡ä»¶ä¸ºèµ·ç‚¹ï¼Œå¯¹å…¶æ‰§è¡Œæ“ä½œï¼Œä¾‹å¦‚åˆ é™¤ç©ºè¡Œ/ç©ºè¡Œã€ç”¨å…¶ä»–å€¼æ›¿æ¢å®ƒä»¬ã€æ·»åŠ /é‡å‘½å/åˆ é™¤æ•°æ®åˆ—ã€è¿‡æ»¤è¡Œç­‰ã€‚æ›´æ­£å¼åœ°è¯´ï¼Œè¿™äº›æ­¥éª¤ä»¥åŠå®ƒä»¬çš„å…³ç³»å’Œä¾èµ–å…³ç³»é€šå¸¸è¢«ç§°ä¸ºæœ‰å‘æ— ç¯å›¾ (DAG)ã€‚</p>
<p>pandas API å¯¹ Python æ•°æ®ç§‘å­¦ç”Ÿæ€ç³»ç»Ÿéå¸¸å®è´µï¼Œå®ƒå®ç°äº†æ–¹æ³•å­é›†çš„æ–¹æ³•é“¾ä½œä¸º API çš„ä¸€éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œé‡ç½®ç´¢å¼• (.reset_index())ã€åˆ é™¤ç©ºå€¼ (.dropna()) ç­‰éƒ½æ˜¯é€šè¿‡é€‚å½“çš„ pd.DataFrame æ–¹æ³•è°ƒç”¨æ¥å®Œæˆçš„ã€‚</p>
<p>å— R ç»Ÿè®¡è¯­è¨€ç”Ÿæ€ç³»ç»Ÿ dplyr åŒ…çš„æ˜“ç”¨æ€§å’Œè¡¨è¾¾èƒ½åŠ›çš„å¯å‘ï¼Œæˆ‘ä»¬å°† pyjanitor å¼€å‘ä¸ºè¯­æ³•åŒ…ï¼Œç”¨äºä¸º Pandas ç”¨æˆ·è¡¨è¾¾æ•°æ®å¤„ç† DAGã€‚</p>
<p>ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨å£°æ˜å¼çš„æ“ä½œ æ›¿æ¢ä¸ºå…è®¸ é€»è¾‘é¡ºåºçš„æ–¹æ³•é“¾ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ä¸‹é¢å¸¦æ³¨é‡Šçš„ç¤ºä¾‹ã€‚é¦–å…ˆï¼Œè¿™é‡Œæ˜¯æ•°æ®æ¸…ç†è·¯å¾„çš„æ–‡å­—æè¿°ï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªdataframeã€‚</li>
<li>åˆ é™¤ä¸€åˆ—ã€‚</li>
<li>åˆ é™¤ä¸¤ä¸ªç‰¹å®šåˆ—ä¸­å…·æœ‰ç©ºå€¼çš„è¡Œã€‚</li>
<li>é‡å‘½åå¦å¤–ä¸¤åˆ—ã€‚</li>
<li>æ·»åŠ ä¸€ä¸ªæ–°åˆ—ã€‚</li>
</ol>
<p>è®©æˆ‘ä»¬å¯¼å…¥ä¸€äº›åº“å¹¶ä»æœ¬ç¤ºä¾‹çš„ä¸€äº›ç¤ºä¾‹æ•°æ®å¼€å§‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Libraries</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">janitor</span>

<span class="c1"># Sample Data curated for this example</span>
<span class="n">company_sales</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;SalesMonth&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Jan&#39;</span><span class="p">,</span> <span class="s1">&#39;Feb&#39;</span><span class="p">,</span> <span class="s1">&#39;Mar&#39;</span><span class="p">,</span> <span class="s1">&#39;April&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Company1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">150.0</span><span class="p">,</span> <span class="mf">200.0</span><span class="p">,</span> <span class="mf">300.0</span><span class="p">,</span> <span class="mf">400.0</span><span class="p">],</span>
    <span class="s1">&#39;Company2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">180.0</span><span class="p">,</span> <span class="mf">250.0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">500.0</span><span class="p">],</span>
    <span class="s1">&#39;Company3&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">400.0</span><span class="p">,</span> <span class="mf">500.0</span><span class="p">,</span> <span class="mf">600.0</span><span class="p">,</span> <span class="mf">675.0</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div><br>
<h2 id="å¸¸è§çš„pandaså®ç°æ–¹å¼">å¸¸è§çš„Pandaså®ç°æ–¹å¼</h2>
<p>ä¸‹é¢æ˜¯ä¼ ç»Ÿçš„Pandasæ–¹å¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># The Pandas Way</span>

<span class="c1"># 1. åˆ›å»ºä¸€ä¸ªdataframe</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">company_sales</span><span class="p">)</span>

<span class="c1"># 2.åˆ é™¤ä¸€åˆ—ã€‚ Say &#39;Company1&#39;</span>
<span class="k">del</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Company1&#39;</span><span class="p">]</span>

<span class="c1"># 3. åˆ é™¤ä¸¤ä¸ªç‰¹å®šåˆ—ä¸­å…·æœ‰ç©ºå€¼çš„è¡Œã€‚ &#39;Company2&#39; and &#39;Company3&#39;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Company2&#39;</span><span class="p">,</span> <span class="s1">&#39;Company3&#39;</span><span class="p">])</span>

<span class="c1"># 4. é‡å‘½åå¦å¤–ä¸¤åˆ—ã€‚ å°†&#39;Company2&#39; æ”¹ä¸º &#39;Amazon&#39;ï¼› å°† &#39;Company3&#39; æ”¹ä¸º &#39;Facebook&#39;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s1">&#39;Company2&#39;</span><span class="p">:</span> <span class="s1">&#39;Amazon&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Company3&#39;</span><span class="p">:</span> <span class="s1">&#39;Facebook&#39;</span><span class="p">},</span>
               <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># 5. æ·»åŠ ä¸€ä¸ªæ–°åˆ— &#39;Google&#39;</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;Google&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">450.0</span><span class="p">,</span> <span class="mf">550.0</span><span class="p">,</span> <span class="mf">800.0</span><span class="p">]</span>

<span class="n">df</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown">|      | SalesMonth | Amazon | Facebook | Google |
| ---: | :--------- | -----: | -------: | -----: |
|    0 | Jan        |    180 |      400 |    450 |
|    1 | Feb        |    250 |      500 |    550 |
|    3 | April      |    500 |      675 |    800 |
</code></pre></div><br>
<h2 id="ç¨å¾®é«˜çº§ä¸€ç‚¹pandaså®ç°æ–¹å¼">ç¨å¾®é«˜çº§ä¸€ç‚¹Pandaså®ç°æ–¹å¼</h2>
<p>ç¨å¾®é«˜çº§ä¸€ç‚¹çš„ç”¨æˆ·å¯èƒ½ä¼šåˆ©ç”¨å‡½æ•°å¼ APIï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">company_sales</span><span class="p">)</span>
    <span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">&#34;Company1&#34;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s2">&#34;Company2&#34;</span><span class="p">,</span> <span class="s2">&#34;Company3&#34;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&#34;Company2&#34;</span><span class="p">:</span> <span class="s2">&#34;Amazon&#34;</span><span class="p">,</span> <span class="s2">&#34;Company3&#34;</span><span class="p">:</span><span class="s2">&#34;Facebook&#34;</span><span class="p">})</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">Google</span><span class="o">=</span><span class="p">[</span><span class="mf">450.0</span><span class="p">,</span> <span class="mf">550.0</span><span class="p">,</span> <span class="mf">800.0</span><span class="p">])</span>
<span class="p">)</span>

<span class="n">df</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown">|      | SalesMonth | Amazon | Facebook | Google |
| ---: | :--------- | -----: | -------: | -----: |
|    0 | Jan        |    180 |      400 |    450 |
|    1 | Feb        |    250 |      500 |    550 |
|    3 | April      |    500 |      675 |    800 |
</code></pre></div><br>
<h2 id="pyjanitorå®ç°æ–¹å¼">PyJanitorå®ç°æ–¹å¼</h2>
<p>å€ŸåŠ©pyjanitoråº“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ–¹æ³•åé“¾å¼ä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">company_sales</span><span class="p">)</span>
    <span class="o">.</span><span class="n">remove_columns</span><span class="p">([</span><span class="s1">&#39;Company1&#39;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s2">&#34;Company2&#34;</span><span class="p">,</span> <span class="s2">&#34;Company3&#34;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">rename_column</span><span class="p">(</span><span class="s2">&#34;Company2&#34;</span><span class="p">,</span> <span class="s2">&#34;Amazon&#34;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">rename_column</span><span class="p">(</span><span class="s2">&#34;Company3&#34;</span><span class="p">,</span> <span class="s2">&#34;Facebook&#34;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s2">&#34;Google&#34;</span><span class="p">,</span> <span class="p">[</span><span class="mf">450.0</span><span class="p">,</span> <span class="mf">550.0</span><span class="p">,</span> <span class="mf">800.0</span><span class="p">])</span>

<span class="p">)</span>

<span class="n">df</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown">|      | SalesMonth | Amazon | Facebook | Google |
| ---: | :--------- | -----: | -------: | -----: |
|    0 | Jan        |    180 |      400 |    450 |
|    1 | Feb        |    250 |      500 |    550 |
|    3 | April      |    500 |      675 |    800 |
</code></pre></div><p>å› æ­¤ï¼Œpyjanitor çš„è¯æºä¸â€œæ¸…æ´åº¦â€æœ‰åŒé‡å…³ç³»ã€‚ é¦–å…ˆï¼Œå®ƒæ˜¯å…³äºä½¿ç”¨æ–¹ä¾¿çš„æ•°æ®æ¸…ç†ä¾‹ç¨‹æ‰©å±• Pandasã€‚ å…¶æ¬¡ï¼Œå®ƒæ˜¯å…³äºä¸ºå¸¸è§çš„ Pandas ä¾‹ç¨‹æä¾›æ›´æ¸…æ™°ã€æ–¹æ³•é“¾æ¥ã€åŸºäºåŠ¨è¯çš„ APIã€‚</p>
<br>
<h2 id="pyjanitoræ›´å¤šåŠŸèƒ½">pyjanitoræ›´å¤šåŠŸèƒ½</h2>
<ul>
<li>æ¸…ç†åˆ—åï¼ˆå¤šç´¢å¼•æ˜¯å¯èƒ½çš„ï¼ï¼‰</li>
<li>åˆ é™¤ç©ºè¡Œå’Œåˆ—</li>
<li>è¯†åˆ«é‡å¤æ¡ç›®</li>
<li>å°†åˆ—ç¼–ç ä¸ºåˆ†ç±»</li>
<li>å°†æ•°æ®æ‹†åˆ†ä¸ºç‰¹å¾å’Œç›®æ ‡ï¼ˆç”¨äºæœºå™¨å­¦ä¹ ï¼‰</li>
<li>æ·»åŠ ã€åˆ é™¤å’Œé‡å‘½ååˆ—</li>
<li>å°†å¤šåˆ—åˆå¹¶ä¸ºä¸€åˆ—</li>
<li>æ—¥æœŸè½¬æ¢ï¼ˆä» matlabã€excelã€unixï¼‰åˆ° Python æ—¥æœŸæ—¶é—´æ ¼å¼</li>
<li>å°†å…·æœ‰åˆ†éš”çš„åˆ†ç±»å€¼çš„å•ä¸ªåˆ—æ‰©å±•ä¸ºè™šæ‹Ÿç¼–ç å˜é‡</li>
<li>åŸºäºåˆ†éš”ç¬¦è¿æ¥å’Œåˆ†ç¦»åˆ—</li>
<li>ç”¨äºæ ¹æ®åˆ—ä¸Šçš„æŸ¥è¯¢è¿‡æ»¤æ•°æ®æ¡†çš„è¯­æ³•ç³–</li>
<li>é‡‘èã€ç”Ÿç‰©ã€åŒ–å­¦ã€å·¥ç¨‹å’Œ pyspark çš„å®éªŒå­æ¨¡å—</li>
</ul>
<br>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>ç§‘å­¦ç»˜å›¾matplotlib</title>
      <link>https://hidadeng.github.io/blog/sci_matplotlib/</link>
      <pubDate>Wed, 24 Nov 2021 22:40:10 +0600</pubDate>
      
      <guid>/blog/sci_matplotlib/</guid>
      <description>å­—æ®µä¸°å¯Œï¼Œé€‚åˆç©æ•°æ®åˆ†æ</description>
      <content:encoded><![CDATA[<p>Python ç§‘å­¦å¯è§†åŒ–é¢†åŸŸæ˜¯å·¨å¤§çš„ï¼Œç”±æ— æ•°å·¥å…·ç»„æˆï¼Œä»æœ€é€šç”¨å’Œæœ€å¹¿æ³›ä½¿ç”¨çš„å·¥å…·åˆ°æ›´ä¸“ä¸šå’Œæœºå¯†çš„å·¥å…·ã€‚å…¶ä¸­ä¸€äº›å·¥å…·æ˜¯åŸºäºç¤¾åŒºçš„ï¼Œè€Œå¦ä¸€äº›åˆ™æ˜¯ç”±å…¬å¸å¼€å‘çš„ã€‚æœ‰äº›æ˜¯ä¸“é—¨ä¸º Web åˆ¶ä½œçš„ï¼Œæœ‰äº›ä»…é€‚ç”¨äºæ¡Œé¢ï¼Œæœ‰äº›å¤„ç† 3D å’Œå¤§æ•°æ®ï¼Œè€Œæœ‰äº›åˆ™é’ˆå¯¹å®Œç¾çš„ 2D æ¸²æŸ“ã€‚</p>
<p>åœ¨è¿™ä¸ªå›¾æ™¯ä¸­ï¼ŒMatplotlib æœ‰ç€éå¸¸ç‰¹åˆ«çš„åœ°æ–¹ã€‚</p>
<ul>
<li>å®ƒæ˜¯ä¸€ä¸ªå¤šåŠŸèƒ½ä¸”åŠŸèƒ½å¼ºå¤§çš„åº“ï¼Œå¯è®©æ‚¨è®¾è®¡éå¸¸é«˜è´¨é‡çš„å›¾å½¢ï¼Œé€‚ç”¨äº<strong>ç§‘å­¦å‡ºç‰ˆ</strong>ã€‚</li>
<li>å®ƒè¿˜æä¾›äº†ä¸€ä¸ªç®€å•ç›´è§‚çš„ç•Œé¢ä»¥åŠä¸€ä¸ªé¢å‘å¯¹è±¡çš„æ¶æ„ï¼Œå…è®¸æ‚¨è°ƒæ•´å›¾å½¢ä¸­çš„ä»»ä½•å†…å®¹ã€‚</li>
<li>æœ€åï¼Œå®ƒå¯ä»¥ç”¨ä½œå¸¸è§„å›¾å½¢åº“ä»¥è®¾è®¡éç§‘å­¦å›¾å½¢ã€‚</li>
</ul>
<br>
<h2 id="æœ¬ä¹¦ç« èŠ‚å››ä¸ªéƒ¨åˆ†">æœ¬ä¹¦ç« èŠ‚å››ä¸ªéƒ¨åˆ†</h2>
<ul>
<li>
<p>ç¬¬ä¸€éƒ¨åˆ† Matplotlib åº“çš„åŸºæœ¬åŸç†ã€‚</p>
<p>è¿™åŒ…æ‹¬å›é¡¾æ„æˆå›¾å½¢çš„ä¸åŒéƒ¨åˆ†ã€ä¸åŒçš„åæ ‡ç³»ã€å¯ç”¨çš„æ¯”ä¾‹å’ŒæŠ•å½±ï¼Œæˆ‘ä»¬è¿˜å°†ä»‹ç»ä¸€äº›ä¸æ’ç‰ˆå’Œé¢œè‰²ç›¸å…³çš„æ¦‚å¿µã€‚</p>
</li>
<li>
<p>ç¬¬äºŒéƒ¨åˆ† å›¾å½¢æ¶‰åŠå®è·µã€‚</p>
<p>åœ¨ä»‹ç»äº†ä¸€äº›ç”Ÿæˆæ›´å¥½å›¾å½¢çš„ç®€å•è§„åˆ™ä¹‹åï¼Œæˆ‘ä»¬å°†ç»§ç»­è§£é‡Š Matplotlib é»˜è®¤å€¼å’Œæ ·å¼ç³»ç»Ÿï¼Œç„¶åå†æ·±å…¥ç ”ç©¶å›¾å½¢å¸ƒå±€ç»„ç»‡ã€‚ç„¶åæˆ‘ä»¬å°†æ¢ç´¢å¯ç”¨çš„ä¸åŒç±»å‹çš„æƒ…èŠ‚ï¼Œçœ‹çœ‹å¦‚ä½•ç”¨ä¸åŒçš„å…ƒç´ è£…é¥°ä¸€ä¸ªäººç‰©ã€‚</p>
</li>
<li>
<p>ç¬¬ä¸‰éƒ¨åˆ† æ›´é«˜çº§çš„æ¦‚å¿µ</p>
<p>å³ 3D å›¾å½¢ã€ä¼˜åŒ–å’ŒåŠ¨ç”»ã€‚ç¬¬å››éƒ¨åˆ†ä¹Ÿæ˜¯æœ€åä¸€éƒ¨åˆ†æ˜¯å±•ç¤ºé›†åˆã€‚</p>
</li>
</ul>
<br>
<h2 id="ç¾å›¾å±•è§ˆ">ç¾å›¾å±•è§ˆ</h2>
<p>
<figure >
    
        <img src="img/1.png" width="800" />
    
    
</figure>


<figure >
    
        <img src="img/2.png" width="800" />
    
    
</figure>


<figure >
    
        <img src="img/3.png" width="800" />
    
    
</figure>
</p>
<br>
<h2 id="æ¡ˆä¾‹ä»£ç ">æ¡ˆä¾‹ä»£ç </h2>

<figure >
    
        <img src="img/matplotlib.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.textpath</span> <span class="kn">import</span> <span class="n">TextPath</span>
<span class="kn">from</span> <span class="nn">matplotlib.patches</span> <span class="kn">import</span> <span class="n">PathPatch</span>
<span class="kn">from</span> <span class="nn">matplotlib.collections</span> <span class="kn">import</span> <span class="n">PolyCollection</span>
<span class="kn">from</span> <span class="nn">matplotlib.font_manager</span> <span class="kn">import</span> <span class="n">FontProperties</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">font_manager</span> <span class="k">as</span> <span class="n">fm</span><span class="p">,</span> <span class="n">rcParams</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="c1">#æ›´æ”¹å­—ä½“ï¼Œæ”¯æŒä¸­æ–‡ã€‚</span>
<span class="n">prop</span> <span class="o">=</span> <span class="n">FontProperties</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="s1">&#39;fonts/Alibaba-PuHuiTi-Bold.otf&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="n">red</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">233</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="mi">85</span><span class="p">,</span> <span class="mi">255</span><span class="p">])</span> <span class="o">/</span> <span class="mi">255</span>
<span class="n">darkred</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">130</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">255</span><span class="p">])</span> <span class="o">/</span> <span class="mi">255</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">14.8</span> <span class="o">/</span> <span class="mf">2.54</span><span class="p">,</span> <span class="mi">21</span> <span class="o">/</span> <span class="mf">2.54</span><span class="p">))</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="n">ylim</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">14.2</span><span class="p">,</span> <span class="mf">14.2</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&#34;off&#34;</span><span class="p">)</span>

<span class="c1"># Text path</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">TextPath</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s2">&#34;MATPLOTLIBåº“&#34;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">prop</span><span class="o">=</span><span class="n">prop</span><span class="p">)</span>

<span class="c1"># Text centering</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">vertices</span>
<span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">V</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">V</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">V</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">V</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="n">V</span> <span class="o">-=</span> <span class="p">(</span><span class="n">xmin</span> <span class="o">+</span> <span class="n">xmax</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">ymin</span> <span class="o">+</span> <span class="n">ymax</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>


<span class="c1"># Compute shadow by iterating over text path segments</span>
<span class="n">polys</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">code</span><span class="p">)</span> <span class="ow">in</span> <span class="n">path</span><span class="o">.</span><span class="n">iter_segments</span><span class="p">(</span><span class="n">curves</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">path</span><span class="o">.</span><span class="n">MOVETO</span><span class="p">:</span>
        <span class="n">points</span> <span class="o">=</span> <span class="p">[</span><span class="n">point</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">path</span><span class="o">.</span><span class="n">LINETO</span><span class="p">:</span>
        <span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">path</span><span class="o">.</span><span class="n">CLOSEPOLY</span><span class="p">:</span>
        <span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">p0</span><span class="p">,</span> <span class="n">p1</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">polys</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p1</span> <span class="o">+</span> <span class="p">(</span><span class="o">+</span><span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">),</span> <span class="n">p0</span> <span class="o">+</span> <span class="p">(</span><span class="o">+</span><span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">)])</span>

<span class="c1"># Display shadow</span>
<span class="n">collection</span> <span class="o">=</span> <span class="n">PolyCollection</span><span class="p">(</span>
    <span class="n">polys</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="n">darkred</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=-</span><span class="mi">10</span>
<span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_collection</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>

<span class="c1"># Display text</span>
<span class="n">patch</span> <span class="o">=</span> <span class="n">PathPatch</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s2">&#34;white&#34;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&#34;none&#34;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_artist</span><span class="p">(</span><span class="n">patch</span><span class="p">)</span>

<span class="c1"># Transparent gradient to fade out shadow</span>
<span class="n">I</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">200</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span> <span class="o">+</span> <span class="n">red</span>
<span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">11</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span> <span class="n">zorder</span><span class="o">=-</span><span class="mi">20</span><span class="p">,</span> <span class="n">clip_on</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">I</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">I</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">11</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">clip_on</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>


<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
    <span class="mf">6.5</span><span class="p">,</span>
    <span class="o">-</span><span class="mf">1.75</span><span class="p">,</span>
    <span class="s2">&#34;ä¸€ä¸ªå¤šåŠŸèƒ½çš„ç§‘å­¦å¯è§†åŒ–åº“&#34;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&#34;white&#34;</span><span class="p">,</span>
    <span class="n">ha</span><span class="o">=</span><span class="s2">&#34;right&#34;</span><span class="p">,</span>
    <span class="n">va</span><span class="o">=</span><span class="s2">&#34;baseline&#34;</span><span class="p">,</span>
    <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="c1">#family=&#34;Pacifico&#34;,</span>
    <span class="n">zorder</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
    <span class="n">fontproperties</span><span class="o">=</span><span class="n">prop</span>
<span class="p">)</span>

<span class="c1"># Save and show result</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&#34;text-shadow.pdf&#34;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&#34;text-shadow.png&#34;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div><br>
<h2 id="ç”µå­ä¹¦ä¸‹è½½">ç”µå­ä¹¦ä¸‹è½½</h2>
<p>æ‚¨å¯ä»¥é˜…è¯» PDFï¼ˆ95Moï¼Œé¦–é€‰ç«™ç‚¹ï¼‰è¿™æœ¬ä¹¦ï¼Œè¯¥ä¹¦æ˜¯å¼€æ”¾è®¿é—®çš„ï¼Œæ‰˜ç®¡åœ¨ HAL ä¸Šï¼ŒHAL æ˜¯ä¸€ä¸ªé¢å‘å­¦æœ¯ç•Œçš„æ³•å›½å¼€æ”¾æ¡£æ¡ˆé¦†ã€‚æœ€æ–°ç‰ˆæœ¬ä¹Ÿå¯ä»¥åœ¨ GitHub ä¸Šæ‰¾åˆ°ã€‚æœ¬ä¹¦çš„æ¥æºï¼ˆåŒ…æ‹¬ä»£ç ç¤ºä¾‹ï¼‰å¯åœ¨ github.com/rougier/scientific-visualization-book ä¸Šæ‰¾åˆ°ã€‚</p>
<br>
<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="https://github.com/hiDaDeng/DaDengAndHisPython/tree/master/matplotlib%E7%BB%98%E5%9B%BE%E6%94%AF%E6%8C%81%E4%B8%AD%E6%96%87">ç‚¹å‡»ä¸‹è½½</a></p>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>åœ¨Rmarkdownä¸­è°ƒç”¨Pythonä»£ç </title>
      <link>https://hidadeng.github.io/blog/call_python_code_in_rmarkdown/</link>
      <pubDate>Tue, 23 Nov 2021 18:40:10 +0600</pubDate>
      
      <guid>/blog/call_python_code_in_rmarkdown/</guid>
      <description>å·¦æ‰‹Rï¼Œå³æ‰‹Pythonï¼</description>
      <content:encoded><![CDATA[<h1 id="rpy2ç®€ä»‹">rpy2ç®€ä»‹</h1>
<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="https://github.com/hidadeng/DaDengAndHisPython/blob/master/%E5%9C%A8Rmarkdown%E4%B8%AD%E8%B0%83%E7%94%A8Python%E4%BB%A3%E7%A0%81.zip">ç‚¹å‡»ä¸‹è½½æ–‡æœ¬</a></p>
<br>
<p>Pythonå’ŒRæ˜¯ä¸€å¯¹æ•°æ®ç§‘å­¦ä¸¤å¤§è¯­è¨€ï¼Œåœ¨äº’è”äº’é€šçš„è·¯ä¸Šï¼Œæˆ‘æ„Ÿè§‰Ræ›´åŠ çš„ç§¯æã€‚è¿˜è®°å¾—ä¹‹å‰ <strong>Pythonä¸­è°ƒç”¨Rçš„åº“-rpy2</strong>ï¼Œ åœ¨Pythonä½¿ç”¨Rè¯­è¨€è¯­æ³•è¿˜æ˜¯æœ‰äº›ä¸è‡ªç„¶ã€‚åœ¨Rä¸­è°ƒç”¨Pythonä½“éªŒååˆ†æ£’ï¼Œä¸€èµ·è·Ÿæˆ‘çœ‹çœ‹å§ã€‚</p>
<p>reticulateåŒ…æ˜¯å¯ä»¥è®©Rè¯­è¨€éå¸¸æµç•…è‡ªç„¶è”é€šPythonçš„å…³é”®ã€‚</p>
<p><strong>Rmarkdowné¢„å¤‡çŸ¥è¯†</strong></p>
<p>Rmarkdownå¾ˆåƒjupyter notbeookå’Œmarkdownçš„ç»“åˆã€‚</p>
<ul>
<li>ä»£ç å—</li>
<li>markdonæ–‡æœ¬</li>
</ul>
<br>
<h2 id="ä»£ç å—">ä»£ç å—</h2>
<p>åœ¨Rmarkdownä¸­çš„ä»£ç å—çš„å¼€å§‹éƒ½æ˜¯ä»¥ä¸‰å¼•å·ã€{}å’Œè¯­è¨€åä¸ºæ ‡å¿—ï¼Œä»¥ä¸‰å¼•å·ç»“å°¾ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">library(ggplot2)
ggplot(mpg, aes(x=displ, y=cty))+
  geom_point()
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">ggplot</span><span class="p">(</span><span class="n">mpg</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">displ</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">cty</span><span class="p">))</span><span class="o">+</span>
  <span class="nf">geom_point</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="img/unnamed-chunk-1-1.png" width="100%" />
    
    
</figure>

<p>åé¢è®¾ç½®å¥½reticulateåŒ…åï¼Œå°±å¯ä»¥åœ¨Rmarkdownä¸­ä½¿ç”¨pythonä»£ç å—ï¼Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">import pandas as pd
df = pd.read_csv(&#39;test.csv&#39;)
df.head()
</code></pre></div><br>
<h2 id="markdownæ–‡æœ¬">markdownæ–‡æœ¬</h2>
<p>æ–‡æœ¬éƒ¨åˆ†å…¨éƒ¨æ”¯æŒmarkdownè¯­æ³•ï¼Œè¿™é‡Œä¸åšèµ˜è¿°ã€‚</p>
<h2 id="å®‰è£…rpy">å®‰è£…rpy</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">install.packages(&#34;reticulate&#34;)
</code></pre></div><h2 id="ç¯å¢ƒè®¾ç½®">ç¯å¢ƒè®¾ç½®</h2>
<p>å½“æˆ‘ä»¬åœ¨Rä»£ç å—ä¸­è®¾ç½®å¥½Pythonç¯å¢ƒï¼Œå°±å¯ä»¥åœ¨Rmarkdownä¸­è·‘Pythonä»£ç ã€‚</p>
<br>
<h2 id="æŸ¥è¯¢python">æŸ¥è¯¢Python</h2>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“Pythonå®‰è£…è·¯å¾„ï¼Œå¯ä»¥åœ¨<strong>å‘½ä»¤è¡Œ</strong>ä¸­é€è¡Œæ‰§è¡Œä¸‹é¢ä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">python3
import sys
sys.executable
</code></pre></div><p>æˆ‘çš„macç”µè„‘çš„Pythonå®‰è£…è·¯å¾„ä¸º</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">/Library/Frameworks/Python.framework/Versions/3.7/bin/python3
</code></pre></div><br>
<h2 id="æŒ‡å®špython">æŒ‡å®šPython</h2>
<p>æ‰§è¡Œä¸‹æ–¹çš„ä»£ç (è·¯å¾„æ”¹ä¸ºè‡ªå·±çš„Pythonå®‰è£…è·¯å¾„)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">reticulate</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="err">##</span> <span class="nx">Warning</span><span class="p">:</span> <span class="kn">package</span> <span class="err">&#39;</span><span class="nx">reticulate</span><span class="err">&#39;</span> <span class="nx">was</span> <span class="nx">built</span> <span class="nx">under</span> <span class="nx">R</span> <span class="nx">version</span> <span class="mf">3.6.2</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">use_python</span><span class="p">(</span><span class="s">&#39;/Library/Frameworks/Python.framework/Versions/3.7/bin/python3&#39;</span><span class="p">)</span>
</code></pre></div><p>æ‰§è¡Œä»£ç åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨Pythonä»£ç </p>
<br>
<h1 id="è¿è¡Œpythonä»£ç ">è¿è¡ŒPythonä»£ç </h1>
<p>åœ¨Rmarkdownä¸­å†™Pythonä»£ç å—</p>
<h2 id="ä½œå›¾">ä½œå›¾</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span> 
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span> 
<span class="c1"># è®¡ç®—æ­£å¼¦æ›²çº¿ä¸Šç‚¹çš„ x å’Œ y åæ ‡</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span>  <span class="mi">3</span>  <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span>  <span class="mf">0.1</span><span class="p">)</span> 
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&#34;sine wave form&#34;</span><span class="p">)</span>  
<span class="c1"># ä½¿ç”¨ matplotlib æ¥ç»˜åˆ¶ç‚¹</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> 
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="img/unnamed-chunk-3-1.png" width="100%" />
    
    
</figure>

<br>
<h2 id="è¯»å–csv">è¯»å–csv</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&#34;test.csv&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;gbk&#34;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">##      birthday   name               text  age  gender  height  weight
## 0  1985/10/08  Alice  æˆ‘å¾ˆå¼€å¿ƒï¼Œæ¯å¤©éƒ½è¿™ä¹ˆå¿«ä¹ï¼Œæˆ‘å¾ˆå¹¸ç¦   35  female     175      55
## 1    95.07.07   Mary               æˆ‘å¾ˆéš¾è¿‡   25  female     165      50
## 2    01-11-10   Mike              å”‰ï¼ŒçœŸéš¾å—   19    male     180      75
## 3      90/2/8  Smith          æ— æ‰€è°“å¼€å¿ƒè¿˜æ˜¯éš¾è¿‡   30    male     175      70
## 4      93-1-5  Henry          æ¯å¤©èµšä¸€ä¸‡ï¼ŒçœŸçˆ½ï¼   27    male     185      80
</code></pre></div><p>è¿”å›çš„dfæ˜¯Pythonå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¡¨æ ¼ä¸å¥½çœ‹ï¼Œè¿™æ˜¯Rä¸­çš„Pythonå¯¹è±¡ã€‚</p>
<br>
<h2 id="åœ¨rä»£ç å—ä¸­è°ƒç”¨pythonå˜é‡å¯¹è±¡">åœ¨Rä»£ç å—ä¸­è°ƒç”¨Pythonå˜é‡(å¯¹è±¡)</h2>
<p>åˆšåˆšè®²çš„éƒ½æ˜¯åœ¨Rmakdownä¸­è¿è¡ŒPythonä»£ç å—ï¼Œå¹¶ä¸æ˜¯åœ¨Rä»£ç å—ä¸­è¿è¡ŒPythonä»£ç æˆ–è€…è°ƒç”¨Pythonå˜é‡ã€‚</p>
<h3 id="pypython_variable_name">py$python_variable_name</h3>
<p>Rä»£ç å—ä¸­è°ƒç”¨Pythonæ–¹æ³•</p>
<p>py$python_variable_name</p>
<ul>
<li>pyç›¸å½“äºPythonä¸­çš„å¯¹è±¡</li>
<li>$ ç›¸å½“äºPythonä¸­çš„<strong>ç‚¹</strong></li>
<li>python_variable_name æ˜¯Pythonä»£ç å—ä¸­çš„å˜é‡å</li>
</ul>
<p>æ¯”å¦‚åœ¨ä¸Šæ–‡ä¸­Pythonçš„å˜é‡dfï¼Œåœ¨Rä¸­è°ƒç”¨</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="n">py</span><span class="o">$</span><span class="n">df</span>
</code></pre></div>
<figure >
    
        <img src="img/df.png" width="100%" />
    
    
</figure>

<p>ç°åœ¨è°ƒç”¨Pythonå¯¹è±¡dfæ—¶ï¼ŒRä¼šé»˜è®¤å°†å…¶è½¬ä¸ºRå¯¹è±¡ï¼Œæ‰€ä»¥å†…å®¹ä¸€æ ·ï¼Œæ ·å¼ä¼¼ä¹å˜å¥½çœ‹äº†ã€‚</p>
<h3 id="rä»£ç å—ä¸­å¯¼å…¥pythonåº“">Rä»£ç å—ä¸­å¯¼å…¥Pythonåº“</h3>
<p>ä½¿ç”¨osåº“çš„listdirå‡½æ•°æŸ¥è¯¢å½“å‰é¡¹ç›®æ–‡ä»¶å¤¹å†…çš„æ–‡ä»¶åˆ—è¡¨</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">os</span>

<span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">## [&#39;reticulateå­¦ä¹ .md&#39;, &#39;test.csv&#39;, &#39;test.py&#39;, &#39;reticulateå­¦ä¹ .html&#39;, &#39;reticulateå­¦ä¹ _files&#39;, &#39;reticulate.pdf&#39;, &#39;reticulateå­¦ä¹ .Rmd&#39;, &#39;data.py&#39;]
</code></pre></div><p>åœ¨Rä»£ç å—ä¸­å®ç°ä¸Šæ–¹çš„PythonåŠŸèƒ½ï¼Œå¦‚ä¸‹ï¼Œå¾ˆç®€å•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">reticulate</span><span class="p">)</span>

<span class="c1">#å¯¼å…¥åº“</span>
<span class="n">os</span> <span class="o">&lt;-</span> <span class="nf">import</span><span class="p">(</span><span class="s">&#34;os&#34;</span><span class="p">)</span>

<span class="c1">#osåº“çš„listdirå‡½æ•°</span>
<span class="n">os</span><span class="o">$</span><span class="nf">listdir</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">## [1] &#34;reticulateå­¦ä¹ .md&#34;    &#34;test.csv&#34;             &#34;test.py&#34;             
## [4] &#34;reticulateå­¦ä¹ .html&#34;  &#34;reticulateå­¦ä¹ _files&#34; &#34;reticulate.pdf&#34;      
## [7] &#34;reticulateå­¦ä¹ .Rmd&#34;   &#34;data.py&#34;
</code></pre></div><p>å¯ä»¥å‘ç°</p>
<ul>
<li><code>import(&quot;os)</code>ä»£æ›¿äº†<code>import os</code></li>
<li><code>$</code>ä»£æ›¿äº†<code>.</code></li>
<li><code>&lt;-</code> ä»£æ›¿äº† <code>=</code></li>
</ul>
<p>å†ç†Ÿæ‚‰ä¸€ä¸‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">reticulate</span><span class="p">)</span>
<span class="n">pd</span> <span class="o">&lt;-</span> <span class="nf">import</span><span class="p">(</span><span class="s">&#34;pandas&#34;</span><span class="p">)</span>
<span class="n">df2</span> <span class="o">&lt;-</span> <span class="n">pd</span><span class="o">$</span><span class="nf">read_csv</span><span class="p">(</span><span class="s">&#34;test.csv&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&#34;gbk&#34;</span><span class="p">)</span>
<span class="n">df2</span>
</code></pre></div>
<figure >
    
        <img src="img/df2.png" width="100%" />
    
    
</figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨Rä»£ç å—ä¸­æ‰§è¡ŒPythonä»£ç æ—¶ï¼Œé»˜è®¤ä¼šå°†Pythonå¯¹è±¡è½¬ä¸ºRå¯¹è±¡ã€‚</p>
<h3 id="source_python">source_python()</h3>
<p>ä½¿ç”¨reticulateåŒ…ä¸­çš„source_python(&lsquo;pyæ–‡ä»¶è·¯å¾„&rsquo;)å¯ä»¥å¯¼å…¥pyæ–‡ä»¶ä¸­çš„å˜é‡ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨Rä»£ç å—ä¸­ä½¿ç”¨å¤–éƒ¨å˜é‡ã€‚ä¾‹å¦‚æˆ‘åœ¨data.pyä¸­å‡†å¤‡Aå’ŒBä¸¤ä¸ªå­—ç¬¦ä¸²</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">A = &#39;æˆ‘æ˜¯å¼ ä¸‰,&#39;
B = &#39;æ¥è‡ªæ²³åŒ—&#39;
</code></pre></div><p>åœ¨Rä»£ç å—ä¸­è¿è¡Œdata.py</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">reticulate</span><span class="p">)</span>

<span class="nf">source_python</span><span class="p">(</span><span class="s">&#34;data.py&#34;</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">## [1] &#34;æˆ‘æ˜¯å¼ ä¸‰,&#34;
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">print</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">## [1] &#34;æ¥è‡ªæ²³åŒ—&#34;
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">paste0</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">## [1] &#34;æˆ‘æ˜¯å¼ ä¸‰,æ¥è‡ªæ²³åŒ—&#34;
</code></pre></div><h2 id="py_run_file">py_run_file()</h2>
<p>åœ¨Rä»£ç å—ä¸­è¿è¡Œé¡¹ç›®æ–‡ä»¶å¤¹ä¸­çš„test.pyæ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="nf">library</span><span class="p">(</span><span class="n">reticulate</span><span class="p">)</span>
<span class="nf">py_run_file</span><span class="p">(</span><span class="s">&#34;test.py&#34;</span><span class="p">)</span>
</code></pre></div><h1 id="æ•°æ®ç±»å‹å¯¹æ¯”">æ•°æ®ç±»å‹å¯¹æ¯”</h1>
<table>
<thead>
<tr>
<th>R</th>
<th>Python</th>
<th>Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td>Single-element vector</td>
<td>Scalar</td>
<td><code>1</code>, <code>1L</code>, <code>TRUE</code>, <code>&quot;foo&quot;</code></td>
</tr>
<tr>
<td>Multi-element vector</td>
<td>List</td>
<td><code>c(1.0, 2.0, 3.0)</code>, <code>c(1L, 2L, 3L)</code></td>
</tr>
<tr>
<td>List of multiple types</td>
<td>Tuple</td>
<td><code>list(1L, TRUE, &quot;foo&quot;)</code></td>
</tr>
<tr>
<td>Named list</td>
<td>Dict</td>
<td><code>list(a = 1L, b = 2.0)</code>, <code>dict(x = x_data)</code></td>
</tr>
<tr>
<td>Matrix/Array</td>
<td>NumPy ndarray</td>
<td><code>matrix(c(1,2,3,4), nrow = 2, ncol = 2)</code></td>
</tr>
<tr>
<td>Data Frame</td>
<td>Pandas DataFrame</td>
<td><code>data.frame(x = c(1,2,3), y = c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;))</code></td>
</tr>
<tr>
<td>Function</td>
<td>Python function</td>
<td><code>function(x) x + 1</code></td>
</tr>
<tr>
<td>NULL, TRUE, FALSE</td>
<td>None, True, False</td>
<td><code>NULL</code>, <code>TRUE</code>, <code>FALSE</code></td>
</tr>
</tbody>
</table>
<br>
<h1 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h1>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>ç§‘ç ”ç»˜å›¾SciencePlotsåº“</title>
      <link>https://hidadeng.github.io/blog/scienceplots/</link>
      <pubDate>Tue, 23 Nov 2021 18:40:10 +0600</pubDate>
      
      <guid>/blog/scienceplots/</guid>
      <description>ç§‘ç ”å¯è§†åŒ–ç»˜å›¾åŒ…</description>
      <content:encoded><![CDATA[<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="https://github.com/hidadeng/DaDengAndHisPython/blob/master/SciencePlot%E7%A7%91%E7%A0%94%E7%BB%98%E5%9B%BE.zip">https://github.com/hidadeng/DaDengAndHisPython/blob/master/SciencePlotç§‘ç ”ç»˜å›¾.zip</a></p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python">
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">SciencePlots</span>

</code></pre></div><pre><code>Looking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple/
Collecting SciencePlots
  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/c2/44/7b5c0ecd6f2862671a076425546f86ac540bc48c1a618a82d6faa3b26f58/SciencePlots-1.0.9.tar.gz (10 kB)
  Installing build dependencies ... [?25l/
</code></pre>
<p><strong>tips</strong>:</p>
<p>SciencePlotsåº“éœ€è¦ç”µè„‘å®‰è£…LaTexï¼Œå…¶ä¸­</p>
<ul>
<li>MacOSç”µè„‘å®‰è£…MacTex  <a href="https://www.tug.org/mactex/">https://www.tug.org/mactex/</a></li>
<li>Windowsç”µè„‘å®‰è£…MikTex  <a href="https://miktex.org/">https://miktex.org/</a></li>
</ul>
<h2 id="åˆå§‹åŒ–ç»˜å›¾æ ·å¼">åˆå§‹åŒ–ç»˜å›¾æ ·å¼</h2>
<p>åœ¨SciencePlotsåº“ä¸­ç§‘ç ”ç»˜å›¾æ ·å¼éƒ½æ˜¯ç”¨çš„science</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;science&#39;</span><span class="p">)</span>
</code></pre></div><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥åŒæ—¶è®¾ç½®å¤šä¸ªæ ·å¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">([</span><span class="s1">&#39;science&#39;</span><span class="p">,</span> <span class="s1">&#39;ieee&#39;</span><span class="p">])</span>
</code></pre></div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ <strong>ieee</strong> ä¼šè¦†ç›–æ‰ <strong>science</strong> ä¸­çš„æŸäº›å‚æ•°ï¼ˆåˆ—å®½ã€å­—å·ç­‰ï¼‰ï¼Œ ä»¥è¾¾åˆ°ç¬¦åˆ <strong>IEEE</strong>è®ºæ–‡çš„ç»˜å›¾è¦æ±‚</p>
<p>å¦‚æœè¦ä¸´æ—¶ä½¿ç”¨æŸç§ç»˜å›¾æ ·å¼ï¼Œç§‘ç ”ä½¿ç”¨å¦‚ä¸‹è¯­æ³•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#æ³¨æ„ï¼Œæ­¤å¤„æ˜¯è¯­æ³•ç¤ºä¾‹ï¼Œ</span>
<span class="c1">#å¦‚è¦è¿è¡Œï¼Œ è¯·æå‰å‡†å¤‡å¥½xå’Œyçš„æ•°æ®</span>
<span class="k">with</span> <span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">context</span><span class="p">([</span><span class="s1">&#39;science&#39;</span><span class="p">,</span> <span class="s1">&#39;ieee&#39;</span><span class="p">]):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div><h2 id="æ¡ˆä¾‹">æ¡ˆä¾‹</h2>
<p>å®šä¹‰å‡½æ•°æ›²çº¿ï¼Œ å‡†å¤‡æ•°æ®</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="k">def</span> <span class="nf">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">**</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">x</span> <span class="o">**</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">p</span><span class="p">))</span>

<span class="n">pparam</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;Voltage (mV)&#39;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;Current ($\mu$A)&#39;</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.75</span><span class="p">,</span> <span class="mf">1.25</span><span class="p">,</span> <span class="mi">201</span><span class="p">)</span>
</code></pre></div><h3 id="scienceæ ·å¼">scienceæ ·å¼</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">with</span> <span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">context</span><span class="p">([</span><span class="s1">&#39;science&#39;</span><span class="p">]):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">]:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="n">p</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Order&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">autoscale</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="o">**</span><span class="n">pparam</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figures/fig1.pdf&#39;</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figures/fig1.jpg&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/output_12_0.png" width="800" />
    
    
</figure>

<h3 id="scienceieeeæ ·å¼">science+ieeeæ ·å¼</h3>
<p>é’ˆå¯¹IEEEè®ºæ–‡å‡†å¤‡çš„<strong>science+ieee</strong>æ ·å¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">with</span> <span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">context</span><span class="p">([</span><span class="s1">&#39;science&#39;</span><span class="p">,</span> <span class="s1">&#39;ieee&#39;</span><span class="p">]):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">100</span><span class="p">]:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="n">p</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Order&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">autoscale</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="o">**</span><span class="n">pparam</span><span class="p">)</span>
    <span class="c1"># Note: $\mu$ doesn&#39;t work with Times font (used by ieee style)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Current (\textmu A)&#39;</span><span class="p">)</span>  
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figures/fig2a.pdf&#39;</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figures/fig2a.jpg&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/output_14_0.png" width="800" />
    
    
</figure>

<h3 id="sciencescatteræ ·å¼">science+scatteræ ·å¼</h3>
<p><strong>IEEE</strong> è¦æ±‚å›¾å½¢ä»¥é»‘ç™½æ‰“å°æ—¶å¿…é¡»å¯è¯»ã€‚ <strong>ieee</strong> æ ·å¼è¿˜å¯ä»¥å°†å›¾å½¢å®½åº¦è®¾ç½®ä¸ºé€‚åˆIEEEè®ºæ–‡çš„ä¸€åˆ—ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">with</span> <span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">context</span><span class="p">([</span><span class="s1">&#39;science&#39;</span><span class="p">,</span> <span class="s1">&#39;scatter&#39;</span><span class="p">]):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;k--&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">2.2</span><span class="p">,</span> <span class="mf">1.8</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.8</span><span class="p">,</span> <span class="mf">2.2</span><span class="p">],</span>
                    <span class="n">color</span><span class="o">=</span><span class="s1">&#39;dodgerblue&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
        <span class="n">x1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="n">y1</span> <span class="o">=</span> <span class="n">x1</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">r</span><span class="s2">&#34;$^\#$</span><span class="si">{}</span><span class="s2">&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Sample&#39;</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">xlbl</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&#34;$\log_</span><span class="si">{10}</span><span class="s2">\left(\frac{L_\mathrm</span><span class="si">{IR}</span><span class="s2">}{\mathrm</span><span class="si">{L}</span><span class="s2">_\odot}\right)$&#34;</span>
    <span class="n">ylbl</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&#34;$\log_</span><span class="si">{10}</span><span class="s2">\left(\frac{L_\mathrm</span><span class="si">{6.2}</span><span class="s2">}{\mathrm</span><span class="si">{L}</span><span class="s2">_\odot}\right)$&#34;</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">xlbl</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">ylbl</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figures/fig3.pdf&#39;</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figures/fig3.jpg&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/output_16_0.png" width="800" />
    
    
</figure>

<h3 id="dark_background-sciencehigh-vis">dark_background +science+high-vis</h3>
<p>æ‚¨è¿˜å¯ä»¥å°†è¿™äº›æ ·å¼ä¸Matplotlibéšé™„çš„å…¶ä»–æ ·å¼ç»“åˆä½¿ç”¨ã€‚ ä¾‹å¦‚ï¼Œdark_background +science+high-visæ ·å¼ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">with</span> <span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">context</span><span class="p">([</span><span class="s1">&#39;dark_background&#39;</span><span class="p">,</span> <span class="s1">&#39;science&#39;</span><span class="p">,</span> <span class="s1">&#39;high-vis&#39;</span><span class="p">]):</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">]:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="n">p</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Order&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">autoscale</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="o">**</span><span class="n">pparam</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figures/fig5.pdf&#39;</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figures/fig5.jpg&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/output_18_0.png" width="800" />
    
    
</figure>

<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>plotnineç»˜å›¾ | pythonçš„ggplot2è¯­æ³•ç»˜å›¾åŒ…</title>
      <link>https://hidadeng.github.io/blog/plotnine/</link>
      <pubDate>Tue, 23 Nov 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/plotnine/</guid>
      <description>ggplot2è¯­æ³•ï¼Œä¸‰è¡Œä»£ç ç»˜å›¾</description>
      <content:encoded><![CDATA[<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="https://github.com/hidadeng/DaDengAndHisPython/blob/master/plotnine%E5%8C%85%E5%AD%A6%E4%B9%A0-Python%E7%89%88%E7%9A%84ggplot2.ipynb">ç‚¹å‡»è·³è½¬åˆ°ä¸‹è½½é“¾æ¥é¡µé¢</a></p>
<br>
<p>Rè¯­è¨€çš„ggplot2ç»˜å›¾èƒ½åŠ›è¶…å¼ºï¼Œpythonè™½æœ‰matplotlibï¼Œä½†æ˜¯è¯­æ³•è‡ƒè‚¿ï¼Œä½¿ç”¨å¤æ‚ï¼Œå…¥é—¨æéš¾ï¼Œseabornçš„å‡ºç°ç¨å¾®æ”¹å–„äº†matplotlibä»£ç é‡é—®é¢˜ï¼Œä½†æ˜¯å®šåˆ¶åŒ–ç¨‹åº¦ä¾ç„¶éœ€è¦å€ŸåŠ©matplotlibï¼Œä½¿ç”¨éš¾åº¦ä¾ç„¶å¾ˆå¤§ã€‚</p>
<p>å¥½æ¶ˆæ¯æ˜¯pythonä¸­æœ‰ä¸€ä¸ªplotnineåŒ…ï¼Œå¯ä»¥å®ç°ç»å¤§å¤šæ•°ggplot2çš„ç»˜å›¾åŠŸèƒ½ï¼Œä¸¤è€…è¯­æ³•ååˆ†ç›¸ä¼¼ï¼ŒRå’ŒPythonçš„è¯­æ³•è½¬æ¢æˆæœ¬å¤§å¤§é™ä½ã€‚</p>
<ul>
<li>plotnineæ–‡æ¡£
<a href="https://plotnine.readthedocs.io/en/latest/">https://plotnine.readthedocs.io/en/latest/</a></li>
<li>Rè¯­è¨€ggplot2æ–‡æ¡£
<a href="https://ggplot2.tidyverse.org/reference/index.html">https://ggplot2.tidyverse.org/reference/index.html</a></li>
</ul>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python">
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">plotnine</span>

</code></pre></div><h2 id="å‡†å¤‡æ•°æ®">å‡†å¤‡æ•°æ®</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine.data</span> <span class="kn">import</span> <span class="n">mpg</span>

<span class="c1">#dataframe</span>
<span class="n">mpg</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">manufacturer</th>
<th style="text-align:left">model</th>
<th style="text-align:right">displ</th>
<th style="text-align:right">year</th>
<th style="text-align:right">cyl</th>
<th style="text-align:left">trans</th>
<th style="text-align:left">drv</th>
<th style="text-align:right">cty</th>
<th style="text-align:right">hwy</th>
<th style="text-align:left">fl</th>
<th style="text-align:left">class</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:left">audi</td>
<td style="text-align:left">a4</td>
<td style="text-align:right">1.8</td>
<td style="text-align:right">1999</td>
<td style="text-align:right">4</td>
<td style="text-align:left">auto(l5)</td>
<td style="text-align:left">f</td>
<td style="text-align:right">18</td>
<td style="text-align:right">29</td>
<td style="text-align:left">p</td>
<td style="text-align:left">compact</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">audi</td>
<td style="text-align:left">a4</td>
<td style="text-align:right">1.8</td>
<td style="text-align:right">1999</td>
<td style="text-align:right">4</td>
<td style="text-align:left">manual(m5)</td>
<td style="text-align:left">f</td>
<td style="text-align:right">21</td>
<td style="text-align:right">29</td>
<td style="text-align:left">p</td>
<td style="text-align:left">compact</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:left">audi</td>
<td style="text-align:left">a4</td>
<td style="text-align:right">2</td>
<td style="text-align:right">2008</td>
<td style="text-align:right">4</td>
<td style="text-align:left">manual(m6)</td>
<td style="text-align:left">f</td>
<td style="text-align:right">20</td>
<td style="text-align:right">31</td>
<td style="text-align:left">p</td>
<td style="text-align:left">compact</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:left">audi</td>
<td style="text-align:left">a4</td>
<td style="text-align:right">2</td>
<td style="text-align:right">2008</td>
<td style="text-align:right">4</td>
<td style="text-align:left">auto(av)</td>
<td style="text-align:left">f</td>
<td style="text-align:right">21</td>
<td style="text-align:right">30</td>
<td style="text-align:left">p</td>
<td style="text-align:left">compact</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:left">audi</td>
<td style="text-align:left">a4</td>
<td style="text-align:right">2.8</td>
<td style="text-align:right">1999</td>
<td style="text-align:right">6</td>
<td style="text-align:left">auto(l5)</td>
<td style="text-align:left">f</td>
<td style="text-align:right">16</td>
<td style="text-align:right">26</td>
<td style="text-align:left">p</td>
<td style="text-align:left">compact</td>
</tr>
</tbody>
</table>
<h2 id="å¿«é€Ÿä½œå›¾qplot">å¿«é€Ÿä½œå›¾qplot</h2>
<p>æˆ‘ä»¬å…ˆç›´æ¥çœ‹æœ€ç®€å•å¥½ç”¨çš„å¿«é€Ÿä½œå›¾å‡½æ•°qplot(x, y, data)</p>
<ul>
<li>æ¨ªåæ ‡displ</li>
<li>çºµåæ ‡cty</li>
<li>æ•°æ®mpg</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine</span> <span class="kn">import</span> <span class="n">qplot</span>

<span class="n">qplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> 
      <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cty&#39;</span><span class="p">,</span>
      <span class="n">data</span><span class="o">=</span><span class="n">mpg</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_6_0.png" width="800" />
    
    
</figure>

<h2 id="ggplotå›¾å±‚">ggplotå›¾å±‚</h2>
<p>qplotæ˜¯å¿«é€Ÿä½œå›¾å‡½æ•°ï¼Œå¦‚æœæƒ³è®©å›¾æ›´å¥½çœ‹ï¼Œè¿›è¡Œç§äººè®¢åˆ¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦è¿›è¡Œå›¾å±‚è®¾è®¡</p>
<p>é¦–å…ˆè®¾ç½®ggplotå›¾å±‚ï¼ˆç›¸å½“äºä¹°äº†ä¸€ä¸ªé«˜çº§ç”»å¸ƒï¼‰ï¼Œ</p>
<ul>
<li>æ•°æ®mpg</li>
<li>æ¨ªåæ ‡xè½´ä¸ºdispl</li>
<li>çºµåæ ‡yè½´cty</li>
</ul>
<p>åœ¨plotnineä¸­ï¼Œå˜é‡æ‰€å¯¹åº”çš„æ•°æ®å‡å¯é€šè¿‡å­—æ®µåè°ƒç”¨</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine</span> <span class="kn">import</span> <span class="n">ggplot</span><span class="p">,</span> <span class="n">geom_point</span><span class="p">,</span> <span class="n">aes</span>

<span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cty&#39;</span><span class="p">),</span> <span class="n">mpg</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_8_0.png" width="800" />
    
    
</figure>

<h2 id="å›¾å±‚å åŠ ">å›¾å±‚å åŠ </h2>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå·²ç»ç»˜åˆ¶å‡ºä¸€ä¸ªç©ºçš„ggplotå›¾å±‚ï¼Œxè½´ä¸ºdisplï¼Œyè½´ä¸ºctyã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ç»™è¿™ä¸ªå›¾å±‚ä¸ŠåŠ ä¸Šæ•°æ®å¯¹åº”çš„æ•£ç‚¹ï¼Œä½¿ç”¨geom_point()ç›´æ¥è¿½åŠ åœ¨ggplotå›¾å±‚ä¹‹ä¸Šå³å¯ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cty&#39;</span><span class="p">),</span> <span class="n">mpg</span><span class="p">)</span>
 <span class="o">+</span> <span class="n">geom_point</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_10_0.png" width="800" />
    
    
</figure>

<h2 id="color">color</h2>
<p>åœ¨ä¸Šå›¾ä¸­ï¼Œæ•£ç‚¹æ˜¯æ²¡æœ‰åŒºåˆ†æ¯è¾†è½¦çš„æ°”ç¼¸æ•°cylã€‚</p>
<p>åœ¨geom_point()ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§æ°”ç¼¸æ•°cylåˆ†é—¨åˆ«ç±»ï¼ŒæŒ‰ç…§é¢œè‰²æ˜¾ç¤ºå‡ºæ¥</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cty&#39;</span><span class="p">),</span> <span class="n">mpg</span><span class="p">)</span>
 <span class="o">+</span> <span class="n">geom_point</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;cyl&#39;</span><span class="p">))</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_12_0.png" width="800" />
    
    
</figure>

<p>ä¸Šå›¾æŒºå¥½çœ‹çš„ï¼Œæœ‰æ—¶å€™éœ€è¦ç»˜åˆ¶çš„å­—æ®µæ˜¯ç¦»æ•£å‹æ•°å€¼ï¼Œä½†æ˜¯ä¸Šè‰²åå¯èƒ½ä¸å¤Ÿæ˜æ˜¾ï¼Œéœ€è¦å£°æ˜è¯¥å­—æ®µä¸ºç¦»æ•£å‹ã€‚è¿™æ—¶å€™ç”¨factor()æ¥å‘Šè¯‰plotnineï¼Œè¿™ä¸ªå­—æ®µæ˜¯ç¦»æ•£å‹æ•°å€¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cty&#39;</span><span class="p">),</span> <span class="n">mpg</span><span class="p">)</span>
 <span class="o">+</span> <span class="n">geom_point</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;factor(cyl)&#39;</span><span class="p">))</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_14_0.png" width="800" />
    
    
</figure>

<h2 id="size">size</h2>
<p>æœ‰æ—¶å€™ä¸ºäº†å¢åŠ å¯è§†åŒ–æ˜¾ç¤ºçš„ç»´åº¦æ•°ï¼Œè¿˜å¯ä»¥è€ƒè™‘åŠ å…¥ç‚¹çš„å¤§å°size</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cty&#39;</span><span class="p">),</span> <span class="n">mpg</span><span class="p">)</span>
 <span class="o">+</span> <span class="n">geom_point</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="s1">&#39;hwy&#39;</span><span class="p">))</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_16_0.png" width="800" />
    
    
</figure>

<h2 id="æ¢¯åº¦è‰²">æ¢¯åº¦è‰²</h2>
<p>å¦‚æœä½ æƒ³è‡ªå·±è®¾ç½®é¢œè‰²çš„æ¢¯åº¦ï¼Œå¯ä»¥é€šè¿‡scale_color_gradientè®¾ç½®</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine</span> <span class="kn">import</span> <span class="n">scale_color_gradient</span>

<span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;displ&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;cty&#39;</span><span class="p">),</span> <span class="n">mpg</span><span class="p">)</span>
<span class="o">+</span> <span class="n">geom_point</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;hwy&#39;</span><span class="p">))</span>
<span class="o">+</span> <span class="n">scale_color_gradient</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_18_0.png" width="800" />
    
    
</figure>

<h2 id="æ¡å½¢å›¾">æ¡å½¢å›¾</h2>
<p>plotnineä¸­å¯ç»˜åˆ¶çš„å›¾æœ‰å¾ˆå¤šï¼Œåˆšåˆšå·²ç»è®²äº†æ•£ç‚¹å›¾ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹plotnineä¸­çš„æ¡å½¢å›¾ã€‚</p>
<p>é¦–å…ˆå‡†å¤‡ä¸€ä¸‹æ•°æ®</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;variable&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;income&#39;</span><span class="p">,</span> <span class="s1">&#39;income&#39;</span><span class="p">,</span> <span class="s1">&#39;income&#39;</span><span class="p">,</span> <span class="s1">&#39;income&#39;</span><span class="p">],</span>
    <span class="s1">&#39;category&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Female&#39;</span><span class="p">,</span> <span class="s1">&#39;Male&#39;</span><span class="p">,</span> <span class="s1">&#39;1-24&#39;</span><span class="p">,</span> <span class="s1">&#39;25-54&#39;</span><span class="p">,</span> <span class="s1">&#39;55+&#39;</span><span class="p">,</span> <span class="s1">&#39;Lo&#39;</span><span class="p">,</span> <span class="s1">&#39;Lo-Med&#39;</span><span class="p">,</span> <span class="s1">&#39;Med&#39;</span><span class="p">,</span> <span class="s1">&#39;High&#39;</span><span class="p">],</span>
    <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span>
<span class="p">})</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;variable&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;variable&#39;</span><span class="p">],</span> <span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;income&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;category&#39;</span><span class="p">],</span> <span class="n">categories</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;category&#39;</span><span class="p">])</span>

<span class="n">df</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">variable</th>
<th style="text-align:left">category</th>
<th style="text-align:right">value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:left">gender</td>
<td style="text-align:left">Female</td>
<td style="text-align:right">60</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">gender</td>
<td style="text-align:left">Male</td>
<td style="text-align:right">40</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:left">age</td>
<td style="text-align:left">1-24</td>
<td style="text-align:right">50</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:left">age</td>
<td style="text-align:left">25-54</td>
<td style="text-align:right">30</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:left">age</td>
<td style="text-align:left">55+</td>
<td style="text-align:right">20</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:left">income</td>
<td style="text-align:left">Lo</td>
<td style="text-align:right">10</td>
</tr>
<tr>
<td style="text-align:right">6</td>
<td style="text-align:left">income</td>
<td style="text-align:left">Lo-Med</td>
<td style="text-align:right">25</td>
</tr>
<tr>
<td style="text-align:right">7</td>
<td style="text-align:left">income</td>
<td style="text-align:left">Med</td>
<td style="text-align:right">25</td>
</tr>
<tr>
<td style="text-align:right">8</td>
<td style="text-align:left">income</td>
<td style="text-align:left">High</td>
<td style="text-align:right">40</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine</span> <span class="kn">import</span> <span class="n">ggplot</span><span class="p">,</span> <span class="n">aes</span><span class="p">,</span> <span class="n">geom_text</span><span class="p">,</span> <span class="n">position_dodge</span><span class="p">,</span> <span class="n">geom_point</span>

<span class="c1">#è°ƒæ•´æ–‡æœ¬ä½ç½®</span>
<span class="n">dodge_text</span> <span class="o">=</span> <span class="n">position_dodge</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>                              <span class="c1"># new</span>

<span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;variable&#39;</span><span class="p">,</span> 
                <span class="n">y</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> 
                <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">))</span> <span class="c1">#ç±»åˆ«å¡«å……é¢œè‰²</span>
 <span class="o">+</span> <span class="n">geom_col</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s1">&#39;dodge&#39;</span><span class="p">,</span> 
            <span class="n">show_legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>   <span class="c1"># modified</span>
 <span class="o">+</span> <span class="n">geom_text</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">y</span><span class="o">=-</span><span class="mf">.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">),</span>                          <span class="c1"># new</span>
             <span class="n">position</span><span class="o">=</span><span class="n">dodge_text</span><span class="p">,</span>
             <span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span>  <span class="c1">#æ–‡æœ¬é¢œè‰²</span>
             <span class="n">size</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>   <span class="c1">#å­—å·</span>
             <span class="n">angle</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="c1">#æ–‡æœ¬çš„è§’åº¦</span>
             <span class="n">va</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">)</span>
    
 <span class="o">+</span> <span class="n">lims</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">60</span><span class="p">))</span>                                                 <span class="c1"># new</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_22_0.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine.data</span> <span class="kn">import</span> <span class="n">economics_long</span>

<span class="n">economics_long</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">date</th>
<th style="text-align:left">variable</th>
<th style="text-align:right">value</th>
<th style="text-align:right">value01</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:left">1967-07-01 00:00:00</td>
<td style="text-align:left">pce</td>
<td style="text-align:right">507.4</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">1967-08-01 00:00:00</td>
<td style="text-align:left">pce</td>
<td style="text-align:right">510.5</td>
<td style="text-align:right">0.000266001</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:left">1967-09-01 00:00:00</td>
<td style="text-align:left">pce</td>
<td style="text-align:right">516.3</td>
<td style="text-align:right">0.00076368</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:left">1967-10-01 00:00:00</td>
<td style="text-align:left">pce</td>
<td style="text-align:right">512.9</td>
<td style="text-align:right">0.000471937</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:left">1967-11-01 00:00:00</td>
<td style="text-align:left">pce</td>
<td style="text-align:right">518.1</td>
<td style="text-align:right">0.000918132</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine</span> <span class="kn">import</span> <span class="n">ggplot</span><span class="p">,</span> <span class="n">aes</span><span class="p">,</span> <span class="n">geom_line</span>

<span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">economics_long</span><span class="p">,</span> <span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;value01&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;variable&#39;</span><span class="p">))</span>
 <span class="o">+</span> <span class="n">geom_line</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_25_0.png" width="800" />
    
    
</figure>

<p>plotnineç›®å‰å·²ç»æ”¯æŒç»å¤§å¤šæ•°ggplot2ï¼Œä½†æ˜¯æ–‡æ¡£æ–¹é¢æ²¡æœ‰ggplot2å…¨ï¼Œæ‰€ä»¥å­¦ä¹ plotnineæ—¶å¯ä»¥å‚è€ƒggplot2ã€‚</p>
<ul>
<li>plotnineæ–‡æ¡£
<a href="https://plotnine.readthedocs.io/en/latest/">https://plotnine.readthedocs.io/en/latest/</a></li>
<li>Rè¯­è¨€ggplot2æ–‡æ¡£
<a href="https://ggplot2.tidyverse.org/reference/index.html">https://ggplot2.tidyverse.org/reference/index.html</a></li>
</ul>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>æ•°æ®åˆ†æplydataåº“</title>
      <link>https://hidadeng.github.io/blog/plydata/</link>
      <pubDate>Mon, 22 Nov 2021 22:40:10 +0600</pubDate>
      
      <guid>/blog/plydata/</guid>
      <description>è®©æ•°æ®åˆ†æçš„ä»£ç æ›´ç®€æ´</description>
      <content:encoded><![CDATA[<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="https://github.com/hidadeng/DaDengAndHisPython/blob/master/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90plydata%E5%BA%93%E5%AD%A6%E4%B9%A0.zip">https://github.com/hidadeng/DaDengAndHisPython/blob/master/æ•°æ®åˆ†æplydataåº“å­¦ä¹ .zip</a></p>
<p>plydataæ˜¯ä¸€ä¸ªæä¾›æ•°æ®å¤„ç†è¯­æ³•çš„Pythonåº“ï¼Œå€Ÿé‰´äº†Rè¯­è¨€dplyrï¼Œtidyrå’Œforcatsç­‰åŒ…ä¸­çš„ç®¡é“æ“ä½œç¬¦ã€‚</p>
<p>plydataä½¿ç”¨ <code>&gt;&gt;è¿ç®—ç¬¦</code> ä½œä¸ºç®¡é“ç¬¦å·ï¼Œæˆ–è€…ä½¿ç”¨<code>plyï¼ˆdataï¼Œ* verbsï¼‰</code>å‡½æ•°ä»£æ›¿ <code>&gt;&gt;</code>ï¼Œ ç›®å‰ä»…æ”¯æŒå¯¹pandas.DataFrameæ•°æ®è¿›è¡Œæ“ä½œã€‚</p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">plydata</span>
</code></pre></div><h2 id="å¿«é€Ÿä¸Šæ‰‹">å¿«é€Ÿä¸Šæ‰‹</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">plydata</span> <span class="kn">import</span> <span class="n">define</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">if_else</span><span class="p">,</span> <span class="n">ply</span>


<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
    <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;zero&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">]})</span>

<span class="n">df</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">x</th>
<th style="text-align:left">y</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:left">zero</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:left">one</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2</td>
<td style="text-align:left">two</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3</td>
<td style="text-align:left">three</td>
</tr>
</tbody>
</table>
<h2 id="define">define</h2>
<p>defineå‡½æ•°åå¾ˆç®€å•ï¼Œå®šä¹‰å˜é‡æˆ–è€…æ“ä½œå˜é‡ã€‚</p>
<p><code>define(data, *args,**kwargs)</code></p>
<ul>
<li>data å¾…æ“ä½œçš„dataframeæ•°æ®</li>
<li>argsã€kwargs æ“ä½œè¿‡ç¨‹åŠç»“æœã€‚</li>
</ul>
<p>æ¯”å¦‚æˆ‘ä»¬æƒ³åœ¨dfä¸­æ–°å»ºä¸€ä¸ªzåˆ—ï¼Œzåˆ—çš„å€¼å®Œå…¨å¤åˆ¶è‡ªxåˆ—ã€‚å¯ä»¥ä½¿ç”¨ä»£ç  define(df, z=&lsquo;x&rsquo;)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">define</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">x</th>
<th style="text-align:left">y</th>
<th style="text-align:right">z</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:left">zero</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:left">one</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2</td>
<td style="text-align:left">two</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3</td>
<td style="text-align:left">three</td>
<td style="text-align:right">3</td>
</tr>
</tbody>
</table>
<p><strong>æ³¨æ„:</strong> dfä¸­æœ‰xåˆ—ï¼Œæ‰€ä»¥è¿™é‡Œçš„ä½¿ç”¨çš„&rsquo;x',è€Œä¸æ˜¯xã€‚</p>
<h2 id="ç®¡é“ç¬¦">&raquo;ç®¡é“ç¬¦</h2>
<p>åˆšåˆšçš„é—®é¢˜å¯ä»¥ä½¿ç”¨ç®¡é“ç¬¦å®ç°ä¸define(df, z=&lsquo;x&rsquo;)ç›¸åŒçš„åŠŸèƒ½ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#ç­‰åŒäºdf[&#39;z&#39;]=df[&#39;x&#39;]</span>
<span class="c1">#ç­‰åŒäºdefine(df, z=&#39;x&#39;)</span>
<span class="n">df</span> <span class="o">&gt;&gt;</span> <span class="n">define</span><span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">x</th>
<th style="text-align:left">y</th>
<th style="text-align:right">z</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:left">zero</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:left">one</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2</td>
<td style="text-align:left">two</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3</td>
<td style="text-align:left">three</td>
<td style="text-align:right">3</td>
</tr>
</tbody>
</table>
<p>å¦‚æœæœ‰å¤šä¸ªç¯èŠ‚ï¼Œå¯ä»¥ç”¨æ‹¬å·åŒ…è£¹ä½ï¼Œç¯èŠ‚ä¸ç¯èŠ‚ç”¨<code>&gt;&gt;</code>å’Œ<code>æ¢è¡Œ</code>å‰åè¡”æ¥ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬æœ‰å¤šä¸ªæ“ä½œï¼Œæ¯ä¸€æ­¥æ“ä½œå¦‚ä¸‹</p>
<ol>
<li><code>m=2x</code></li>
<li><code>n=m*m</code></li>
<li><code>q=m+n</code></li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="p">(</span><span class="n">df</span> 
 <span class="o">&gt;&gt;</span> <span class="n">define</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="s1">&#39;2*x&#39;</span><span class="p">)</span> 
 <span class="o">&gt;&gt;</span> <span class="n">define</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="s1">&#39;m*m&#39;</span><span class="p">)</span> 
 <span class="o">&gt;&gt;</span> <span class="n">define</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="s1">&#39;m+n&#39;</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">x</th>
<th style="text-align:left">y</th>
<th style="text-align:right">m</th>
<th style="text-align:right">n</th>
<th style="text-align:right">q</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:left">zero</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:left">one</td>
<td style="text-align:right">2</td>
<td style="text-align:right">4</td>
<td style="text-align:right">6</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2</td>
<td style="text-align:left">two</td>
<td style="text-align:right">4</td>
<td style="text-align:right">16</td>
<td style="text-align:right">20</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3</td>
<td style="text-align:left">three</td>
<td style="text-align:right">6</td>
<td style="text-align:right">36</td>
<td style="text-align:right">42</td>
</tr>
</tbody>
</table>
<p>ä¸Šé¢æ‰€æœ‰çš„plydataç›¸å…³æ“ä½œä¸ä¼šä¿®æ”¹åŸå§‹æ•°æ®df</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">x</th>
<th style="text-align:left">y</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:left">zero</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:left">one</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2</td>
<td style="text-align:left">two</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3</td>
<td style="text-align:left">three</td>
</tr>
</tbody>
</table>
<h2 id="if_else">if_else</h2>
<p>åœ¨dfä¸­æ–°å»ºzåˆ—ï¼Œzçš„å€¼æ»¡è¶³</p>
<ul>
<li>å½“xå¤§äº1ï¼Œzä¸º1</li>
<li>å½“xå°äºç­‰äº1ï¼Œ zä¸º0</li>
</ul>
<p>ä½¿ç”¨if_else(predicate, true_value, false_value)</p>
<ul>
<li>predicate é€»è¾‘åˆ¤æ–­æ¡ä»¶å­—ç¬¦ä¸²</li>
<li>true_value æ»¡è¶³é€»è¾‘æ¡ä»¶è¿”å›çš„å€¼</li>
<li>false_value ä¸æ»¡è¶³é€»è¾‘æ¡ä»¶è¿”å›çš„å€¼</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#ç­‰åŒäºdefine(df, z=if_else(&#39;x&gt;1&#39;, 1, 0))</span>
<span class="n">df</span> <span class="o">&gt;&gt;</span> <span class="n">define</span><span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="n">if_else</span><span class="p">(</span><span class="s1">&#39;x&gt;1&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">x</th>
<th style="text-align:left">y</th>
<th style="text-align:right">z</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:left">zero</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:left">one</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2</td>
<td style="text-align:left">two</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3</td>
<td style="text-align:left">three</td>
<td style="text-align:right">1</td>
</tr>
</tbody>
</table>
<h2 id="query">query</h2>
<p>query(data, expr)</p>
<ul>
<li>data å¾…æŸ¥è¯¢çš„dataframeæ•°æ®</li>
<li>expr  æŸ¥è¯¢æ¡ä»¶å­—ç¬¦ä¸²</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="p">(</span><span class="n">df</span> 
 <span class="o">&gt;&gt;</span> <span class="n">define</span><span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="n">if_else</span><span class="p">(</span><span class="s1">&#39;x&gt;1&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> 
 <span class="o">&gt;&gt;</span> <span class="n">query</span><span class="p">(</span><span class="s1">&#39;z==1&#39;</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">x</th>
<th style="text-align:left">y</th>
<th style="text-align:right">z</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2</td>
<td style="text-align:left">two</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3</td>
<td style="text-align:left">three</td>
<td style="text-align:right">1</td>
</tr>
</tbody>
</table>
<h2 id="ply">ply()</h2>
<p>plyåŠŸèƒ½ç­‰åŒäºç®¡é“ç¬¦&raquo;ï¼Œ åˆšåˆšä¸Šé¢çš„ä»£ç </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="p">(</span><span class="n">df</span> 
 <span class="o">&gt;&gt;</span> <span class="n">define</span><span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="n">if_else</span><span class="p">(</span><span class="s1">&#39;x&gt;1&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> 
 <span class="o">&gt;&gt;</span> <span class="n">query</span><span class="p">(</span><span class="s1">&#39;z==1&#39;</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div><p>å¯ä»¥ç”¨ply</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">ply</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
    <span class="n">define</span><span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="n">if_else</span><span class="p">(</span><span class="s1">&#39;x &gt; 1&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
    <span class="n">query</span><span class="p">(</span><span class="s1">&#39;z == 1&#39;</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">x</th>
<th style="text-align:left">y</th>
<th style="text-align:right">z</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2</td>
<td style="text-align:left">two</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3</td>
<td style="text-align:left">three</td>
<td style="text-align:right">1</td>
</tr>
</tbody>
</table>
<h2 id="plydataä¸plotnine">plydataä¸plotnine</h2>
<p>åœ¨Rè¯­è¨€ä¸­ï¼Œç”¨ggplot2ä½œå›¾ç»å¸¸ä¼šç”¨åˆ°ç®¡é“ç¬¦ã€‚è€Œåœ¨Pythonä¸­ï¼Œplydataæä¾›ç®¡é“ç¬¦ï¼Œå¯ä»¥ä¸ä½œå›¾åº“plotnineç»“åˆä½¿ç”¨ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">plotnine</span> <span class="kn">import</span> <span class="n">ggplot</span><span class="p">,</span> <span class="n">geom_line</span><span class="p">,</span> <span class="n">aes</span>
<span class="kn">from</span> <span class="nn">plydata</span> <span class="kn">import</span> <span class="n">define</span><span class="p">,</span> <span class="n">if_else</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>


<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">500</span><span class="p">)})</span>
<span class="p">(</span><span class="n">df</span> 
 <span class="o">&gt;&gt;</span> <span class="n">define</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;np.sin(x)&#39;</span><span class="p">)</span> 
 <span class="o">&gt;&gt;</span> <span class="n">define</span><span class="p">(</span><span class="n">sign</span><span class="o">=</span><span class="n">if_else</span><span class="p">(</span><span class="s1">&#39;y&gt;=0&#39;</span><span class="p">,</span> <span class="s1">&#39;&#34;pos&#34;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#34;neg&#34;&#39;</span><span class="p">))</span> 
 <span class="o">&gt;&gt;</span> <span class="p">(</span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> 
                <span class="n">y</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> 
                <span class="n">color</span><span class="o">=</span><span class="s1">&#39;sign&#39;</span><span class="p">))</span><span class="o">+</span>
     <span class="n">geom_line</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mf">1.5</span><span class="p">))</span>
<span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="output_27_0.png" width="100%" />
    
    
</figure>

<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>rpy2åŒ… | åœ¨Jupyterä¸­è°ƒç”¨Rè¯­è¨€çš„ä»£ç </title>
      <link>https://hidadeng.github.io/blog/call_r_language_code_in_jupyter/</link>
      <pubDate>Mon, 22 Nov 2021 17:40:10 +0600</pubDate>
      
      <guid>/blog/call_r_language_code_in_jupyter/</guid>
      <description>æ–‡æœ¬æ•°æ®åˆ†æåˆ©å™¨Pythonå’ŒRè¯­è¨€ï¼</description>
      <content:encoded><![CDATA[<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="https://github.com/hidadeng/DaDengAndHisPython/blob/master/%E5%9C%A8jupyter%E4%B8%AD%E8%B0%83%E7%94%A8R%E8%AF%AD%E8%A8%80%E4%BB%A3%E7%A0%81.zip">ç‚¹å‡»ä¸‹è½½</a></p>
<br>
<p>åœ¨æ•°æ®åˆ†æä¸­ï¼ŒPythonå’ŒRå„æœ‰åƒç§‹ï¼Œè™½ç„¶Pythonæˆ–Réƒ½èƒ½åœ¨æ•°æ®åˆ†ææ‰“é€šå…³ï¼Œä»é‡‡é›†ã€æ¸…æ´—(é¢„å¤„ç†)ã€åˆ†æã€å¯è§†åŒ–ï¼Œä½†æ˜¯åœ¨ä¸åŒçš„ç¯èŠ‚ï¼Œä¸åŒçš„è¯­è¨€æ˜“ç”¨ç¨‹åº¦ä¸åŒã€‚Pythonèƒœåœ¨å¹²è„æ´»ç´¯æ´»ï¼Œè¯¸å¦‚æ•°æ®é‡‡é›†ã€æ•°æ®æ¸…æ´—ã€æœºå™¨å­¦ä¹ ç­‰ï¼›è€ŒRè¯­è¨€èƒœåœ¨ç»Ÿè®¡åˆ†æã€å¯è§†åŒ–ç­‰ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ æ­£å¥½Pythonå’ŒRéƒ½å…¥é—¨äº†ï¼Œå¯ä»¥è€ƒè™‘ä¸¤è€…ç»“åˆã€‚é‚£ä¹ˆå°±ä¼šé‡åˆ°ä»Šå¤©çš„é—®é¢˜-<strong>å¦‚ä½•åœ¨jupyterä¸­ä½¿ç”¨Rè¯­è¨€ä»£ç ï¼Ÿ</strong></p>
<h2 id="rpy2åŒ…">rpy2åŒ…</h2>
<p>rpy2åŒ…é¦–å…ˆæ˜¯PythonåŒ…ï¼Œtaè¡”æ¥äº†Pythonå’ŒRï¼Œé€šè¿‡rpy2å¯ä»¥è¿è¡ŒRè¯­è¨€ç›¸å…³ä»£ç ã€å‡½æ•°ã€åŒ…ã€‚</p>
<p>åœ¨Jupyter notebookä¸­ä¸»è¦æœ‰ä¸¤ç§æƒ…å†µ</p>
<ol>
<li>å•å…ƒæ ¼ä¸­ä»¥Pythonä¸ºä¸»ï¼Œå¯ä»¥æ’å…¥<strong>Rçš„ä»£ç å­—ç¬¦ä¸²</strong></li>
<li>å•ä¸ªçš„å•å…ƒæ ¼è¦ä¹ˆåªæœ‰<strong>Rä»£ç </strong>ï¼Œè¦ä¹ˆåªæœ‰<strong>Pythonä»£ç </strong></li>
</ol>
<p>é‡åˆ°è¿™ç±»é—®é¢˜ï¼Œå„ä½çš„ç”µè„‘è¦ç¡®ä¿</p>
<ol>
<li>ç”µè„‘å·²ç»å®‰è£…äº†Pythonå’ŒR</li>
<li>å·²å®‰è£…rpy2åŒ…</li>
</ol>
<p>å®‰è£…rpy2åŒ…</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python">
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">rpy2</span>

</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">rpy2.robjects</span> <span class="k">as</span> <span class="nn">robjects</span>
<span class="kn">from</span> <span class="nn">rpy2.robjects</span> <span class="kn">import</span> <span class="n">pandas2ri</span>

<span class="c1">#Rä»£ç è¿è¡Œä¼šå°½é‡ä»¥DataFrameæ˜¾ç¤º</span>
<span class="n">pandas2ri</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>

<span class="c1">#è¿è¡ŒRä»£ç </span>
<span class="n">robjects</span><span class="o">.</span><span class="n">r</span><span class="p">(</span><span class="s1">&#39;Rä»£ç å­—ç¬¦ä¸²&#39;</span><span class="p">)</span>
</code></pre></div><h2 id="è¿è¡Œrä»£ç ">è¿è¡ŒRä»£ç </h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python">
<span class="n">rpy2</span><span class="o">.</span><span class="n">robjects</span><span class="o">.</span><span class="n">r</span><span class="p">(</span><span class="s1">&#39;Rä»£ç å­—ç¬¦ä¸²&#39;</span><span class="p">)</span>

</code></pre></div><p>rpy2.robjects.r()å‡½æ•°ä¼šè¯†åˆ« <strong>Rä»£ç å­—ç¬¦ä¸²</strong>, å¹¶å°†å…¶æ‰§è¡Œã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">rpy2.robjects</span> <span class="k">as</span> <span class="nn">robjects</span>
<span class="kn">from</span> <span class="nn">rpy2.robjects</span> <span class="kn">import</span> <span class="n">pandas2ri</span>
<span class="kn">import</span> <span class="nn">warnings</span> 
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>

<span class="c1">#ç›´æ¥å£°æ˜ï¼Œdata frameå¼ºåˆ¶è½¬ä¸ºDataFrame</span>
<span class="n">pandas2ri</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>

<span class="c1">#Rä»£ç </span>
<span class="n">r_code</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;
</span><span class="s2">library(dplyr)
</span><span class="s2">
</span><span class="s2">text &lt;- c(&#34;Because I could not stop for Death -&#34;,
</span><span class="s2">          &#34;He kindly stopped for me -&#34;,
</span><span class="s2">          &#34;The Carriage held but just Ourselves -&#34;,
</span><span class="s2">          &#34;and Immortality&#34;)
</span><span class="s2">          
</span><span class="s2">text_df &lt;- tibble(docid=1:4, text=text)
</span><span class="s2">text_df
</span><span class="s2">&#34;&#34;&#34;</span>

<span class="c1">#è¿è¡ŒRä»£ç </span>
<span class="n">robjects</span><span class="o">.</span><span class="n">r</span><span class="p">(</span><span class="n">r_code</span><span class="p">)</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">docid</th>
<th style="text-align:left">text</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:left">Because I could not stop for Death -</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2</td>
<td style="text-align:left">He kindly stopped for me -</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3</td>
<td style="text-align:left">The Carriage held but just Ourselves -</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">4</td>
<td style="text-align:left">and Immortality</td>
</tr>
</tbody>
</table>
<ol>
<li>å‡†å¤‡ä¸€ä¸ªRä»£ç r_codeï¼Œè¯¥ä»£ç ä¼šç”ŸæˆRè¯­è¨€çš„tibbleæ•°æ®ç±»å‹(Rè¯­è¨€ä¸­çš„ä¸€ç§data frame)ã€‚</li>
<li>robjects.r(r_code) è¿è¡ŒRä»£ç (å­—ç¬¦ä¸²)</li>
<li>åœ¨æœ¬ä¾‹ä¸­ï¼Œä½¿ç”¨pandas2ri.activate()å¼ºåˆ¶å£°æ˜ï¼Œåœ¨Pythonä¸­å°†å˜é‡text_dfä»¥pandas.DataFrameæ˜¾ç¤º</li>
</ol>
<h2 id="è°ƒç”¨ræ•°æ®é›†">è°ƒç”¨Ræ•°æ®é›†</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">rpy2.robjects.r.data(&#39;Rçš„æ•°æ®é›†å&#39;)
</code></pre></div><p>è°ƒç”¨Rçš„æ•°æ®é›†</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">rpy2.robjects</span> <span class="k">as</span> <span class="nn">robjects</span>
</code></pre></div><ul>
<li>robjects.r.data(&lsquo;Ræ•°æ®é›†å&rsquo;) å‡†å¤‡Ræ•°æ®é›†ï¼Œæ­¤æ—¶Pythonå¹¶æ²¡æœ‰æ˜¾ç¤ºè¯¥æ•°æ®é›†ï¼Œå¯ä»¥ç†è§£ä¸ºå‡†å¤‡æ•°æ®</li>
<li><code>robjects.r['Ræ•°æ®é›†å']</code> å¯¼å…¥Rçš„æ•°æ®é›†</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">rpy2.robjects</span> <span class="k">as</span> <span class="nn">robjects</span>
<span class="kn">from</span> <span class="nn">rpy2.robjects</span> <span class="kn">import</span> <span class="n">pandas2ri</span>

<span class="n">pandas2ri</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>

<span class="c1">#å‡†å¤‡iris</span>
<span class="n">robjects</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="s1">&#39;iris&#39;</span><span class="p">)</span>
<span class="c1">#å¯¼å…¥iris</span>
<span class="n">iris</span> <span class="o">=</span> <span class="n">robjects</span><span class="o">.</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;iris&#39;</span><span class="p">]</span>
<span class="n">iris</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">Sepal.Length</th>
<th style="text-align:right">Sepal.Width</th>
<th style="text-align:right">Petal.Length</th>
<th style="text-align:right">Petal.Width</th>
<th style="text-align:left">Species</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">5.1</td>
<td style="text-align:right">3.5</td>
<td style="text-align:right">1.4</td>
<td style="text-align:right">0.2</td>
<td style="text-align:left">setosa</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">4.9</td>
<td style="text-align:right">3</td>
<td style="text-align:right">1.4</td>
<td style="text-align:right">0.2</td>
<td style="text-align:left">setosa</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">4.7</td>
<td style="text-align:right">3.2</td>
<td style="text-align:right">1.3</td>
<td style="text-align:right">0.2</td>
<td style="text-align:left">setosa</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">4.6</td>
<td style="text-align:right">3.1</td>
<td style="text-align:right">1.5</td>
<td style="text-align:right">0.2</td>
<td style="text-align:left">setosa</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:right">5</td>
<td style="text-align:right">3.6</td>
<td style="text-align:right">1.4</td>
<td style="text-align:right">0.2</td>
<td style="text-align:left">setosa</td>
</tr>
</tbody>
</table>
<h2 id="è°ƒç”¨rè¯­è¨€åŒ…">è°ƒç”¨Rè¯­è¨€åŒ…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">rpy2</span><span class="o">.</span><span class="n">robjects</span><span class="o">.</span><span class="n">packages</span><span class="o">.</span><span class="n">importr</span><span class="p">(</span><span class="s1">&#39;RåŒ…å&#39;</span><span class="p">)</span>
</code></pre></div><p>Rè¯­è¨€ä¸­çš„readråŒ…æœ‰read_csv()å‡½æ•°ï¼Œå¯ä»¥è¯»å–csvæ–‡ä»¶ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">rpy2.robjects.packages</span> <span class="kn">import</span> <span class="n">importr</span>
<span class="kn">from</span> <span class="nn">rpy2.robjects</span> <span class="kn">import</span> <span class="n">pandas2ri</span>

<span class="n">pandas2ri</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>

<span class="c1">#å¯¼å…¥Rè¯­è¨€ä¸­çš„readråŒ…</span>
<span class="n">readr</span> <span class="o">=</span> <span class="n">importr</span><span class="p">(</span><span class="s2">&#34;readr&#34;</span><span class="p">)</span>
<span class="c1">#ä½¿ç”¨readråŒ…ä¸­çš„read_csv()å‡½æ•°</span>
<span class="n">mtcars</span> <span class="o">=</span> <span class="n">readr</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&#34;mtcars.csv&#34;</span><span class="p">)</span>
<span class="n">mtcars</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">car</th>
<th style="text-align:right">mpg</th>
<th style="text-align:right">cyl</th>
<th style="text-align:right">disp</th>
<th style="text-align:right">hp</th>
<th style="text-align:right">drat</th>
<th style="text-align:right">wt</th>
<th style="text-align:right">qsec</th>
<th style="text-align:right">vs</th>
<th style="text-align:right">am</th>
<th style="text-align:right">gear</th>
<th style="text-align:right">carb</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">Mazda RX4</td>
<td style="text-align:right">21</td>
<td style="text-align:right">6</td>
<td style="text-align:right">160</td>
<td style="text-align:right">110</td>
<td style="text-align:right">3.9</td>
<td style="text-align:right">2.62</td>
<td style="text-align:right">16.46</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">4</td>
<td style="text-align:right">4</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:left">Mazda RX4 Wag</td>
<td style="text-align:right">21</td>
<td style="text-align:right">6</td>
<td style="text-align:right">160</td>
<td style="text-align:right">110</td>
<td style="text-align:right">3.9</td>
<td style="text-align:right">2.875</td>
<td style="text-align:right">17.02</td>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">4</td>
<td style="text-align:right">4</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:left">Datsun 710</td>
<td style="text-align:right">22.8</td>
<td style="text-align:right">4</td>
<td style="text-align:right">108</td>
<td style="text-align:right">93</td>
<td style="text-align:right">3.85</td>
<td style="text-align:right">2.32</td>
<td style="text-align:right">18.61</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">4</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:left">Hornet 4 Drive</td>
<td style="text-align:right">21.4</td>
<td style="text-align:right">6</td>
<td style="text-align:right">258</td>
<td style="text-align:right">110</td>
<td style="text-align:right">3.08</td>
<td style="text-align:right">3.215</td>
<td style="text-align:right">19.44</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:left">Hornet Sportabout</td>
<td style="text-align:right">18.7</td>
<td style="text-align:right">8</td>
<td style="text-align:right">360</td>
<td style="text-align:right">175</td>
<td style="text-align:right">3.15</td>
<td style="text-align:right">3.44</td>
<td style="text-align:right">17.02</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">2</td>
</tr>
</tbody>
</table>
<h2 id="cellåªè¿è¡Œrä»£ç ">Cellåªè¿è¡ŒRä»£ç </h2>
<p>ä¸Šé¢çš„å‡ ä¸ªç« èŠ‚ä¸­ï¼Œæ¯ä¸ªcellä¸­ä»£ç å‡ä¸ºPythonå’ŒRçš„æ··ç”¨ï¼Œå¦‚æœåœ¨Cellä¸­åªè¿è¡ŒRä»£ç ï¼Œ</p>
<ol>
<li>å¯ä»¥å…ˆå•ç‹¬åœ¨ä¸€ä¸ªcellä¸­è¿è¡Œ <code>%load_ext rpy2.ipython</code>,</li>
<li>åœ¨å¦å¤–ä¸€ä¸ªcellä¸­ä½¿ç”¨<code>%%R</code>å£°æ˜æœ¬cellä¸­ä½¿ç”¨çš„æ˜¯Rä»£ç ã€‚</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="o">%</span><span class="n">load_ext</span> <span class="n">rpy2</span><span class="o">.</span><span class="n">ipython</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="o">%%</span><span class="n">R</span>

<span class="nf">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span>

<span class="nf">ggplot</span><span class="p">(</span><span class="n">iris</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">Sepal.Length</span><span class="p">,</span> 
                 <span class="n">y</span><span class="o">=</span><span class="n">Sepal.Width</span><span class="p">,</span> 
                 <span class="n">color</span><span class="o">=</span><span class="n">Species</span><span class="p">))</span><span class="o">+</span>
<span class="nf">geom_point</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="output_17_0.png" width="100%" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="o">%%</span><span class="n">R</span> <span class="o">-</span><span class="n">h</span> <span class="m">550</span> <span class="o">-</span><span class="n">w</span> <span class="m">800</span>  <span class="c1">#è®¾ç½®å®½ã€é«˜</span>

<span class="nf">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span>

<span class="nf">ggplot</span><span class="p">(</span><span class="n">iris</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">Sepal.Length</span><span class="p">,</span> 
                 <span class="n">y</span><span class="o">=</span><span class="n">Sepal.Width</span><span class="p">,</span> 
                 <span class="n">color</span><span class="o">=</span><span class="n">Species</span><span class="p">))</span><span class="o">+</span>
<span class="nf">geom_point</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="output_18_0.png" width="100%" />
    
    
</figure>

<br>
<h2 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h2>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://textdata.cn/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>ä½¿ç”¨pandas_bokehåšå¯è§†åŒ–</title>
      <link>https://hidadeng.github.io/blog/pandas_bokeh_vis/</link>
      <pubDate>Thu, 18 Nov 2021 17:40:10 +0600</pubDate>
      
      <guid>/blog/pandas_bokeh_vis/</guid>
      <description>ç®€æ´æ•°æ®å¯è§†åŒ–</description>
      <content:encoded><![CDATA[<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="https://github.com/hidadeng/DaDengAndHisPython/blob/master/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96pandas_bokeh.zip">ç‚¹å‡»ä¸‹è½½ä»£ç </a></p>
<h2 id="pandas_bokeh">pandas_bokeh</h2>
<p>pandas_bokehå¯ä»¥ä½¿å¾—dataframeç›´æ¥è°ƒç”¨bokehåº•å±‚ä»£ç ã€‚é€šè¿‡ä½¿ç”¨pandas_bokehï¼Œå¯ä»¥åœ¨notebookæˆ–è€…htmlä¸­æ˜¾ç¤ºï¼Œè¯­æ³•ç›¸æ¯”äºbokehæ›´ç®€æ´æ˜“ç”¨ã€‚</p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">pandas_bokeh</span>
</code></pre></div><h2 id="å¿«é€Ÿä¸Šæ‰‹">å¿«é€Ÿä¸Šæ‰‹</h2>
<p>å¯¹fruits.csvåšä¸€ä¸ªæ¡å½¢å›¾</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;fruits.xlsx&#39;</span><span class="p">)</span>
<span class="n">df</span>
</code></pre></div><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:left">fruits</th>
<th style="text-align:right">2015</th>
<th style="text-align:right">2016</th>
<th style="text-align:right">2017</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:left">è‹¹æœ</td>
<td style="text-align:right">2</td>
<td style="text-align:right">5</td>
<td style="text-align:right">3</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:left">æ¢¨</td>
<td style="text-align:right">1</td>
<td style="text-align:right">3</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:left">é¦™è•‰</td>
<td style="text-align:right">4</td>
<td style="text-align:right">3</td>
<td style="text-align:right">4</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:left">è‰è“</td>
<td style="text-align:right">3</td>
<td style="text-align:right">2</td>
<td style="text-align:right">4</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:left">æ¨±æ¡ƒ</td>
<td style="text-align:right">2</td>
<td style="text-align:right">4</td>
<td style="text-align:right">5</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:left">æ©˜å­</td>
<td style="text-align:right">4</td>
<td style="text-align:right">6</td>
<td style="text-align:right">3</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">pandas_bokeh</span>
<span class="kn">import</span> <span class="nn">warnings</span> 
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&#34;ignore&#34;</span><span class="p">)</span> <span class="c1">#å¿½ç•¥æŸäº›ä¸å½±å“ç¨‹åºçš„æç¤º</span>

<span class="c1">#åœ¨notebookä¸­èƒ½æ˜¾ç¤ºå¯è§†åŒ–ç»“æœ</span>
<span class="n">pandas_bokeh</span><span class="o">.</span><span class="n">output_notebook</span><span class="p">()</span>

<span class="c1">#å°†fruitsåˆ—è®¾ç½®ä¸ºè¡Œç´¢å¼•</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;fruits.xlsx&#39;</span><span class="p">)</span>


<span class="n">df</span><span class="o">.</span><span class="n">plot_bokeh</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> 
              <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;fruits&#39;</span><span class="p">,</span> <span class="c1">#å°†fruitsåˆ—é€‰åšxè½´</span>
              <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;2015&#39;</span><span class="p">,</span> <span class="s1">&#39;2016&#39;</span><span class="p">,</span> <span class="s1">&#39;2017&#39;</span><span class="p">],</span> <span class="c1">#å°†å¹´ä»½é€‰åšyè½´</span>
              <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;æ°´æœä»·æ ¼(å…ƒ/æ–¤)&#39;</span><span class="p">,</span>
              <span class="n">title</span><span class="o">=</span><span class="s1">&#39;æ°´æœ&#39;</span><span class="p">,</span>
              <span class="n">show_figure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1">#æ˜¾ç¤º</span>
</code></pre></div>
<figure >
    
        <img src="img/2.gif" width="800" />
    
    
</figure>

<p>ä¸Šé¢çš„ä¾‹å­å·²ç»å¯ä»¥çœ‹åˆ°è¯¥åº“çš„ç®€æ´ä¼˜ç¾ä¹‹å¤„ï¼Œç°åœ¨æˆ‘ä»¬å¤šå­¦ç‚¹</p>
<h2 id="pandas_bokehè¾“å‡ºè®¾å®š">pandas_bokehè¾“å‡ºè®¾å®š</h2>
<ul>
<li>pandas_bokeh.output_notebook() åœ¨notebookä¸­èƒ½æ˜¾ç¤ºå¯è§†åŒ–ç»“æœ</li>
<li>pandas_bokeh.output_file(filename) å°†ç»“æœè¾“å‡ºåˆ°htmlæ–‡ä»¶ä¸­</li>
</ul>
<h2 id="æ”¯æŒå¯è§†åŒ–å›¾ç§ç±»">æ”¯æŒå¯è§†åŒ–å›¾ç§ç±»</h2>
<ul>
<li>line</li>
<li>bar</li>
<li>point</li>
<li>scatter</li>
<li>histogram</li>
<li>area</li>
<li>pie</li>
<li>map</li>
</ul>
<p>ä»¥barä¸ºä¾‹ï¼Œè°ƒç”¨å¯è§†åŒ–æ¥å£æ—¶ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§ä½¿ç”¨æ–¹æ³•</p>
<ul>
<li>df.plot_bokeh.line(&hellip;)</li>
<li>df.plot_bokeh(kind=&lsquo;line&rsquo;)</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;fake_stocks.xlsx&#39;</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">plot_bokeh</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&#34;line&#34;</span><span class="p">,</span> 
              <span class="n">x</span><span class="o">=</span><span class="s1">&#39;æ—¥æœŸ&#39;</span><span class="p">,</span> <span class="c1">#å°†excelä¸­çš„æ—¥æœŸåˆ—å½“åšxè½´</span>
              <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Google&#39;</span><span class="p">,</span> <span class="s1">&#39;Apple&#39;</span><span class="p">])</span> <span class="c1">#å°†&#39;Google&#39;, &#39;Apple&#39;ä¸¤åˆ—ä½œä¸ºyè½´</span>
</code></pre></div>
<figure >
    
        <img src="img/3.gif" width="800" />
    
    
</figure>

<h2 id="é«˜çº§å‚æ•°">é«˜çº§å‚æ•°</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="o">.</span><span class="n">plot_bokeh</span><span class="p">(</span><span class="n">kind</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">figsize</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">xlim</span><span class="p">,</span> <span class="n">ylim</span><span class="p">,</span> <span class="n">xlabel</span><span class="p">,</span> <span class="n">ylabel</span><span class="p">,</span>
              <span class="n">logx</span><span class="p">,</span> <span class="n">logy</span><span class="p">,</span> <span class="n">xticks</span><span class="p">,</span> <span class="n">yticks</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">colormap</span><span class="p">,</span> <span class="n">hovertool</span><span class="p">,</span> 
              <span class="n">zooming</span><span class="p">,</span> <span class="n">panning</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div><ul>
<li>kind: æ”¯æŒçš„å›¾ç§ç±»&quot;line&quot;, &ldquo;point&rdquo;, &ldquo;scatter&rdquo;, &ldquo;bar&rdquo; ,&ldquo;histogram&quot;ç­‰</li>
<li>x: é€‰ä¸­æ•°æ®æŸåˆ—åä½œä¸ºxè½´ã€‚å¦‚æœxä¸ä¼ å…¥å‚æ•°ï¼Œä¼šé»˜è®¤ä½¿ç”¨dfçš„ç´¢å¼•ä½œä¸ºxè½´</li>
<li>y: å°†æ•°æ®ä¸­çš„æŸåˆ—æˆ–æŸäº›åˆ—æŒ‡å®šä¸ºyè½´</li>
<li>figsize: å›¾çš„å°ºå¯¸,å¦‚figsize=(600, 350)</li>
<li>title:  å›¾çš„æ ‡é¢˜</li>
<li>xlim/ylim: è®¾ç½®å›¾çš„xè½´å’Œyè½´çš„èŒƒå›´</li>
<li>xlabel/ylabel: è®¾ç½®xè½´å’Œyè½´çš„åå­—</li>
<li>logx/logy: å¸ƒå°”å‹å€¼ï¼Œå¯¹xå’Œyçš„æ•°æ®æ˜¯å¦è¿›è¡Œlogå˜æ¢</li>
<li>xticks/yticks: æ˜¾æ€§å®šä¹‰æ¨ªçºµåæ ‡åˆ»åº¦</li>
<li>color: å¯¹å›¾ä¸­ä½¿ç”¨åŒä¸€çš„é¢œè‰²ï¼Œå¦‚æœæƒ³å®šä¹‰å¤šç§é¢œè‰²ï¼Œè¯·ä½¿ç”¨colormapå‚æ•°</li>
<li>colormap: å¯ä»¥å¯¹å›¾ä¸­çš„ä¸åŒå¯¹è±¡è®¾ç½®é¢œè‰²ï¼Œ ä¼ å…¥çš„æ˜¯é¢œè‰²å­—ç¬¦ä¸²åˆ—è¡¨ã€‚</li>
<li>hovertool: é»˜è®¤Trueï¼Œé¼ æ ‡æ”¾åœ¨å›¾ä¸Šä¼šæ‚¬æµ®æ˜¾ç¤ºå…·ä½“ä¿¡æ¯ã€‚</li>
<li>zooming: å¸ƒå°”å€¼ï¼Œé»˜è®¤Trueæ”¯æŒç¼©æ”¾</li>
<li>panning: å¸ƒå°”å€¼ï¼Œé»˜è®¤Trueæ”¯æŒå¹³ç§»</li>
<li>kwargs**: æ›´å¤šå‚æ•°è®¾å®šè¯·çœ‹å®˜æ–¹æ–‡æ¡£</li>
</ul>
<h2 id="æ–‡æ¡£">æ–‡æ¡£</h2>
<ul>
<li>pandas_bokehæ–‡æ¡£åœ°å€https://github.com/PatrikHlobil/Pandas-Bokeh</li>
<li>Bokehå®˜æ–¹æ–‡æ¡£åœ°å€https://docs.bokeh.org/en/latest/</li>
</ul>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>ä½¿ç”¨Pandasåšæ•°æ®é¢„å¤„ç†</title>
      <link>https://hidadeng.github.io/blog/pre_process_in_pandas/</link>
      <pubDate>Tue, 16 Nov 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/pre_process_in_pandas/</guid>
      <description>4000å­—è¯¦ç»†è¯´æ˜</description>
      <content:encoded><![CDATA[<blockquote>
<p>src: <a href="https://mp.weixin.qq.com/s/7D2d7BIaFAhPrxtDOWGgLA">https://mp.weixin.qq.com/s/7D2d7BIaFAhPrxtDOWGgLA</a></p>
<p>author: ä¿Šæ¬£</p>
<p>å…¬ä¼—å·: å…³äºæ•°æ®åˆ†æä¸å¯è§†åŒ–</p>
</blockquote>
<p>æ•°æ®é¢„å¤„ç†è¿‡ç¨‹å½“ä¸­, å¤§è‡´ä¼šé‡åˆ°</p>
<ul>
<li>åŠ è½½æ•°æ®</li>
<li>å¤„ç†ç¼ºå¤±å€¼å¦‚ä½•å¤„ç†</li>
<li>å¤„ç†ç¦»æ•£å‹æ•°æ®è¯¥å¦‚ä½•å¤„ç†</li>
<li>æ•°æ®çš„æ ‡å‡†åŒ–</li>
<li>å°†æ•°æ®é›†åˆ’åˆ†æˆè®­ç»ƒé›†ä¸æµ‹è¯•é›†</li>
<li>å»æ‰é‡å¤å€¼</li>
</ul>
<br>
<h2 id="åŠ è½½æ•°æ®">åŠ è½½æ•°æ®</h2>
<p>æˆ‘ä»¬å¯¼å…¥å¿…è¦çš„åº“å¹¶ä¸”åŠ è½½æ•°æ®</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&#34;data.csv&#34;</span><span class="p">)</span>
</code></pre></div><p>åœ¨è¿›è¡Œæ•°æ®åˆ†æå‰ï¼Œå¯ä»¥æŸ¥çœ‹ä¸€ä¸‹æ•°æ®çš„æ€»ä½“æƒ…å†µï¼Œä»å®è§‚ä¸Šäº†è§£æ•°æ®</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span> <span class="c1">#æ˜¾ç¤ºå‰äº”è¡Œæ•°æ®</span>
<span class="n">data</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span> <span class="c1">#æ˜¾ç¤ºæœ«å°¾äº”è¡Œæ•°æ®</span>
<span class="n">data</span><span class="o">.</span><span class="n">info</span><span class="p">()</span> <span class="c1">#æŸ¥çœ‹å„å­—æ®µçš„ä¿¡æ¯</span>
<span class="n">data</span><span class="o">.</span><span class="n">shape</span> <span class="c1">#æŸ¥çœ‹æ•°æ®é›†æœ‰å‡ è¡Œå‡ åˆ—,data.shape[0]æ˜¯è¡Œæ•°,data.shape[1]æ˜¯åˆ—æ•°</span>
<span class="n">data</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span> <span class="c1">#æŸ¥çœ‹æ•°æ®çš„å¤§ä½“æƒ…å†µï¼Œå‡å€¼ï¼Œæœ€å€¼ï¼Œåˆ†ä½æ•°å€¼...</span>
<span class="n">data</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>   <span class="c1">#å¾—åˆ°åˆ—åçš„list</span>
</code></pre></div><br>
<h2 id="å¤„ç†ç¼ºå¤±å€¼">å¤„ç†ç¼ºå¤±å€¼</h2>
<p>ç¼ºå¤±å€¼ä¸€ç›´éƒ½æ˜¯æ•°æ®é¢„å¤„ç†å½“ä¸­æ¯”è¾ƒå¸¸è§çš„ä¸€ä¸ªé—®é¢˜ï¼Œè€Œåœ¨å¤„ç†ç±»ä¼¼çš„é—®é¢˜çš„æ—¶å€™ï¼Œæ–¹å¼æ–¹æ³•ä¹Ÿæ˜¯å¤šç§å¤šæ ·çš„ï¼Œæˆ‘ä»¬ä¸€ä¸€æ¥ä»‹ç»ï¼Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">data</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;å°æ˜&#39;</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">55</span><span class="p">],[</span><span class="s1">&#39;å°çº¢&#39;</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span><span class="mi">60</span><span class="p">],[</span><span class="s1">&#39;å°ç‹&#39;</span><span class="p">,</span><span class="mi">26</span><span class="p">]]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span><span class="s1">&#39;Age&#39;</span><span class="p">,</span><span class="s1">&#39;Weight&#39;</span><span class="p">])</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">  Name  Age  Weight
0   å°æ˜   25    55.0
1   å°çº¢   28    60.0
2   å°ç‹   26     NaN
</code></pre></div><p>é’ˆå¯¹ä¸Šé¢çš„æ•°æ®é›†ï¼Œæˆ‘ä»¬é€šè¿‡pandasä¸­çš„æ–¹æ³•çœ‹ä¸€ä¸‹ç¼ºå¤±å€¼çš„æƒ…å†µ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">    Name    Age  Weight
0  False  False   False
1  False  False   False
2  False  False    True
</code></pre></div><p>å¦å¤–æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™ä¹ˆæ¥åšï¼Œæ£€æµ‹æ¯ä¸€åˆ—ç©ºå€¼çš„æ•°é‡</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Name      0
Age       0
Weight    1
dtype: int64
</code></pre></div><p>è€Œåœ¨é¢å¯¹ç¼ºå¤±å€¼çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€æ–¹é¢å¯ä»¥å°†å…¶å»é™¤</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">  Name  Age  Weight
0   å°æ˜   25    55.0
1   å°çº¢   28    60.0
</code></pre></div><p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹ç¼ºå¤±å€¼è¿›è¡Œå¡«å……ï¼Œä¾‹å¦‚ç”¨å¹³å‡å€¼æ¥å¡«å……</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">    Name  Age  Weight
0   å°æ˜   25    55.0
1   å°çº¢   28    60.0
2   å°ç‹   26    57.5
</code></pre></div><p>é™¤äº†pandaså½“ä¸­çš„æ–¹æ³•ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨sklearnåº“å½“ä¸­çš„ä¸€äº›å‡½æ•°æ–¹æ³•ï¼Œä¾‹å¦‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">sklearn.impute</span> <span class="kn">import</span> <span class="n">SimpleImputer</span>
<span class="n">imputer</span> <span class="o">=</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">missing_values</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">strategy</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span>
<span class="n">imputer</span> <span class="o">=</span> <span class="n">imputer</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Weight&#39;</span><span class="p">]])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;Weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">imputer</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Weight&#39;</span><span class="p">]])</span>
</code></pre></div><p>æœ€åè¿”å›çš„ç»“æœä¹Ÿå’Œä¸Šé¢çš„fillna()æ–¹æ³•è¿”å›çš„ç»“æœä¸€è‡´ï¼Œæˆ‘ä»¬ç”¨å¹³å‡å€¼æ¥ä»£ç ç©ºå€¼ï¼Œé‚£ä¹ˆåŒæ ·é“ç†æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ä¸­ä½æ•°ã€ä¼—æ•°ç­‰ç»Ÿè®¡å€¼æ¥è¿›è¡Œæ›¿æ¢ï¼Œè¿™é‡Œå°±ä¸åšå¤šè¯´</p>
<br>
<h2 id="å¤„ç†ç¦»æ•£å‹æ•°æ®">å¤„ç†ç¦»æ•£å‹æ•°æ®</h2>
<p>å¦å¤–å½“æ•°æ®é›†å½“ä¸­å‡ºç°ç¦»æ•£å‹æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿè¦è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼Œæ¯•ç«Ÿåœ¨åé¢çš„å»ºæ¨¡è¿‡ç¨‹å½“ä¸­ï¼Œæœºå™¨å­¦ä¹ çš„æ¨¡å‹éœ€è¦çš„æ˜¯è¿ç»­å‹çš„æ•°æ®ã€‚
ç¦»æ•£å‹æ•°æ®ä¹Ÿåˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯æœ‰åºçš„ç¦»æ•£å˜é‡ï¼Œå°±æ¯”æ–¹è¯´æ˜¯è¡£æœçš„å°ºç ï¼Œæœ‰Mç çš„ã€ä¹Ÿæœ‰Lç çš„ã€ä¹Ÿè¿˜æœ‰ä¸ä¹‹æ›´å¤§çš„å°ºç ï¼Œå¦å¤–ä¸€ç§åˆ™æ˜¯æ— åºçš„ï¼Œä¾‹å¦‚è¡£æœçš„é¢œè‰²ï¼Œé¢œè‰²ä¹‹é—´æ²¡æœ‰å¤§å°ä¹‹åˆ†ï¼Œå› æ­¤åœ¨ç¼–ç çš„æ—¶å€™ä¹Ÿåº”è¯¥å¦å¤–å¤„ç†ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df_cat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> 
                     <span class="p">[[</span><span class="s1">&#39;green&#39;</span><span class="p">,</span><span class="s1">&#39;M&#39;</span><span class="p">,</span><span class="mf">10.1</span><span class="p">,</span><span class="s1">&#39;class1&#39;</span><span class="p">],</span>
                      <span class="p">[</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span><span class="s1">&#39;L&#39;</span><span class="p">,</span><span class="mf">20.1</span><span class="p">,</span><span class="s1">&#39;class2&#39;</span><span class="p">],</span>
                      <span class="p">[</span><span class="s1">&#39;white&#39;</span><span class="p">,</span><span class="s1">&#39;M&#39;</span><span class="p">,</span><span class="mf">30.1</span><span class="p">,</span><span class="s1">&#39;class1&#39;</span><span class="p">]],</span> <span class="p">)</span>
<span class="n">df_cat</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">,</span><span class="s1">&#39;size&#39;</span><span class="p">,</span><span class="s1">&#39;price&#39;</span><span class="p">,</span><span class="s1">&#39;classlabel&#39;</span><span class="p">]</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">   color size  price classlabel
0  green    M   10.1     class1
1   blue    L   20.1     class2
2  white    M   30.1     class1
</code></pre></div><p>å¯¹äºæœ‰åºçš„ç¦»æ•£å‹å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨map()å‡½æ•°</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">size_mapping</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;M&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;L&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">}</span>
<span class="n">df_cat</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_cat</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">size_mapping</span><span class="p">)</span>
<span class="n">df_cat</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">0    1
1    2
2    1
Name: size, dtype: int64
</code></pre></div><p>å¦å¤–æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨sklearnåº“ä¸­çš„LabelEncoder()æ–¹æ³•æ¥å¤„ç†</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">LabelEncoder</span>
<span class="n">class_le</span> <span class="o">=</span> <span class="n">LabelEncoder</span><span class="p">()</span>
<span class="n">df_cat</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">class_le</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df_cat</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</code></pre></div><p>è€Œå¯¹äºæ— åºçš„ç¦»æ•£å‹å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ç‹¬çƒ­ç¼–ç ï¼Œä¾‹å¦‚å¯¹colorè¿™ä¸€åˆ—è¿›è¡Œç¼–ç è¿‡ä¹‹åä¼šæœ‰color_greenã€color_blueä»¥åŠcolor_whiteä¸‰ä¸ªç‰¹å¾ï¼Œç‰¹å¾å€¼ä¸º0æˆ–è€…1</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df_cat</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span> <span class="n">prefix</span> <span class="o">=</span> <span class="s2">&#34;color&#34;</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">   color_blue  color_green  color_white
0           0            1            0
1           1            0            0
2           0            0            1

</code></pre></div><p>ç„¶åæˆ‘ä»¬å°†æ­¤å¹¶å…¥åˆ°æºæ•°æ®å½“ä¸­å»</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df_cat</span><span class="p">[[</span><span class="s2">&#34;size&#34;</span><span class="p">,</span> <span class="s2">&#34;price&#34;</span><span class="p">]]</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dummies</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">   size  price  color_blue  color_green  color_white
0     1   10.1           0            1            0
1     2   20.1           1            0            0
2     1   30.1           0            0            1
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">ä½†æ˜¯è€ƒè™‘åˆ°åé¢æ­å»ºæ¨¡å‹çš„æ—¶å€™</span><span class="err">ï¼Œ</span><span class="n">å˜é‡ä¸å˜é‡ä¹‹é—´åº”è¯¥ä¿æŒç‹¬ç«‹</span><span class="err">ï¼Œ</span><span class="n">è€Œä¸åº”è¯¥æ˜¯å­˜åœ¨ä¾èµ–çš„å…³ç³»</span><span class="err">ï¼Œ</span><span class="n">å¯¹äºcolorè¿™ä¸€åˆ—ä¸­å­˜åœ¨ä¸‰ç§é¢œè‰²</span><span class="err">ï¼Œ</span><span class="n">åˆ†åˆ«æ˜¯blue</span><span class="err">ã€</span><span class="n">greenä»¥åŠwhite</span><span class="err">ï¼Œ</span><span class="n">å½“å‰ä¸¤ç±»å–å€¼éƒ½ä¸º0çš„æ—¶å€™</span><span class="err">ï¼Œ</span><span class="n">coloråªå¯èƒ½æ˜¯white</span>
<span class="n">æ‰€ä»¥å°†get_dummies</span><span class="p">()</span><span class="n">æ–¹æ³•ä¸­çš„drop_firsté»˜è®¤å€¼ä¸ºFalseæ”¹ä¸ºTrue</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">dummies</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df_cat</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">],</span> <span class="n">prefix</span> <span class="o">=</span> <span class="s2">&#34;color&#34;</span><span class="p">,</span> <span class="n">drop_first</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df_cat</span><span class="p">[[</span><span class="s2">&#34;size&#34;</span><span class="p">,</span> <span class="s2">&#34;price&#34;</span><span class="p">]]</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dummies</span><span class="p">)</span>
</code></pre></div><br>
<h2 id="æ•°æ®çš„æ ‡å‡†åŒ–">æ•°æ®çš„æ ‡å‡†åŒ–</h2>
<p>ç”±äºä¸åŒçš„å˜é‡ï¼Œå®ƒä»¬å¾€å¾€å­˜åœ¨ä¸åŒçš„å•ä½ä»¥åŠä¸åŒçš„å–å€¼èŒƒå›´ï¼Œæœ‰æ—¶å€™å–å€¼èŒƒå›´çš„å·®å¼‚è¾ƒå¤§ä¼šå¯¹æœºå™¨å­¦ä¹ çš„æ¨¡å‹å¸¦æ¥å¾ˆå¤šä¸å¿…è¦çš„éº»çƒ¦ã€‚å› æ­¤ä¸ºäº†æœ€åé¢„æµ‹ç»“æœçš„å¯é æ€§ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ ‡å‡†åŒ–ï¼Œå¯¹æ•°æ®æŒ‰æ¯”ä¾‹è¿›è¡Œç¼©æ”¾ï¼Œä½¿ä¹‹è½å…¥ä¸€ä¸ªå°çš„ç‰¹å®šåŒºé—´ã€‚è€Œæ ‡å‡†åŒ–ç®—æ³•æœ‰</p>
<ul>
<li>z-score æ ‡å‡†åŒ–</li>
</ul>
<p>è¿™ç§æ–¹æ³•æ ¹æ®åŸå§‹æ•°æ®çš„å‡å€¼å’Œæ ‡å‡†å·®è¿›è¡Œæ•°æ®çš„æ ‡å‡†åŒ–ï¼Œç»è¿‡å¤„ç†çš„æ•°æ®ç¬¦åˆæ­£æ€åˆ†å¸ƒï¼Œå³å‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1 ï¼Œå½“ç„¶sklearnåº“å½“ä¸­çš„ä»£ç åˆ™æ˜¯</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="n">sc</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span>
<span class="n">X_train</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>
<span class="n">X_test</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
</code></pre></div><ul>
<li>çº¿æ€§å½’ä¸€åŒ–</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">MinMaxScaler</span><span class="p">()</span>
<span class="n">min_max_scaler</span> <span class="o">=</span> <span class="n">MinMaxScaler</span><span class="p">()</span>
<span class="n">X_train_minmax</span> <span class="o">=</span> <span class="n">min_max_scaler</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">X_train_minmax</span><span class="p">)</span>
</code></pre></div><p>è®­ç»ƒé›†ä¸­çš„æ•°æ®ç»è¿‡è½¬åŒ–ï¼Œå–å€¼èŒƒå›´éƒ½é›†ä¸­åœ¨[0,1]ä¹‹é—´</p>
<ul>
<li>MaxAbsScaler()æ–¹æ³•</li>
</ul>
<p>MaxAbsScaler()æ–¹æ³•å’Œä¸Šè¿°çš„çº¿æ€§å½’ä¸€åŒ–æ•ˆæœç›¸ç±»ä¼¼ï¼Œè®­ç»ƒé›†ä¸­çš„æ•°æ®ç»è¿‡è½¬åŒ–ï¼Œå–å€¼èŒƒå›´åœ¨[-1,1]ä¹‹é—´</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">max_abs_scaler</span> <span class="o">=</span> <span class="n">preprocessing</span><span class="o">.</span><span class="n">MaxAbsScaler</span><span class="p">()</span>
<span class="n">X_train_maxabs</span> <span class="o">=</span> <span class="n">max_abs_scaler</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>
<span class="n">X_test_maxabs</span> <span class="o">=</span> <span class="n">max_abs_scaler</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
</code></pre></div><ul>
<li>RobustScaler()æ–¹æ³•</li>
</ul>
<p>è¦æ˜¯å½“æ•°æ®é›†å½“ä¸­å­˜åœ¨å¾ˆå¤šçš„æå€¼çš„æ—¶å€™ï¼Œåˆ©ç”¨å¹³å‡å€¼å’Œæ ‡å‡†å·®æ¥è¿›è¡Œæ•°æ®çš„æ ‡å‡†åŒ–æ•ˆæœå¯èƒ½å¹¶ä¸ç†æƒ³ï¼Œæ¯•ç«Ÿæå€¼ä¼šå½±å“åˆ°å¹³å‡å€¼å’Œæ ‡å‡†å·®çš„è®¡ç®—ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°RobustScaler()æ–¹æ³•ï¼Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">RobustScaler</span>
<span class="n">transformer</span> <span class="o">=</span> <span class="n">RobustScaler</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">transformer</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</code></pre></div><br>
<h2 id="å°†æ•°æ®é›†åˆ’åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†">å°†æ•°æ®é›†åˆ’åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†</h2>
<p>åœ¨å»ºæ¨¡ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å°†æ•°æ®é›†åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œæˆ‘ä»¬åœ¨è®­ç»ƒé›†ä¸Šé¢å»ºç«‹æ¨¡å‹ï¼Œè®­ç»ƒä¸ä¼˜åŒ–æ¨¡å‹ï¼Œç„¶åå†å°†æ¨¡å‹æ”¾åˆ°æµ‹è¯•é›†ä¸Šé¢ï¼Œè¯„ä¼°ä¸€ä¸‹æ¨¡å‹çš„æ€§èƒ½ä»¥åŠä¼˜åŒ–çš„æ•ˆæœï¼Œåœ¨sklearnåº“ä¸­ä¹Ÿæœ‰ç›¸å¯¹åº”çš„æ–¹æ³•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="n">x_train</span><span class="p">,</span> <span class="n">x_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span><span class="n">random_state</span><span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div><p>ä¸Šé¢çš„å˜é‡yå…·ä½“æŒ‡çš„æ˜¯è¢«é¢„æµ‹çš„å› å˜é‡ï¼Œè€Œxåˆ™æ˜¯åœ¨é¢„æµ‹ä¸­ä½¿ç”¨çš„è‡ªå˜é‡</p>
<br>
<h2 id="å»é™¤é‡å¤å€¼">å»é™¤é‡å¤å€¼</h2>
<p>åœ¨pandaså½“ä¸­ä¹Ÿæœ‰å¯¹åº”çš„æ–¹æ³•æ¥å»é™¤æ‰é‡å¤å€¼</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>

<span class="c1">## ä»£ç ä¸‹è½½</span>
<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">hidadeng</span><span class="o">/</span><span class="n">DaDengAndHisPython</span><span class="o">/</span><span class="n">blob</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="mi">4000</span><span class="n">å­—å½’çº³æ€»ç»“PandasSklearnæ•°æ®é¢„å¤„ç†</span><span class="o">.</span><span class="n">ipynb</span>
</code></pre></div><p><br><br></p>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>spacyäº§ä¸šçº§è‡ªç„¶è¯­è¨€å¤„ç†åŒ…</title>
      <link>https://hidadeng.github.io/blog/spacy_industry_application/</link>
      <pubDate>Sun, 14 Nov 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/spacy_industry_application/</guid>
      <description>ç‰›æ°nlpåº“</description>
      <content:encoded><![CDATA[<h2 id="spacy">spacy</h2>
<p>äº§ä¸šçº§è‡ªç„¶è¯­è¨€å¤„ç†pythonåŒ…  <a href="https://spacy.io/">https://spacy.io/</a></p>
<p><a href="https://github.com/hidadeng/DaDengAndHisPython/blob/master/20211115spacy%E4%BA%A7%E4%B8%9A%E7%BA%A7%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E5%8C%85.ipynb">ç‚¹å‡»ä¸‹è½½</a></p>
<br>
<h2 id="ç‰¹æ€§">ç‰¹æ€§</h2>
<ul>
<li>æ”¯æŒ64+è¯­è¨€</li>
<li>é’ˆå¯¹19é—¨è¯­è¨€çš„64æµæ°´çº¿pipelineå¤„ç†å‡½æ•°</li>
<li>å¤šä»»åŠ¡é¢„è®­ç»ƒtransformersï¼Œå¦‚BERT</li>
<li>é¢„è®­ç»ƒè¯å‘é‡</li>
<li>æ”¯æŒå‘½åå®ä½“è¯†åˆ«</li>
<li>æ”¯æŒ POSè¯æ€§æ ‡æ³¨</li>
<li>æ”¯æŒ å¥æ³•ä¾å­˜</li>
<li>æ”¯æŒ æ–‡æœ¬åˆ†ç±»</li>
<li>æ”¯æŒ è¯å¹²åŒ–</li>
<li>å†…ç½®å¯è§†åŒ–</li>
</ul>
<br>
<h2 id="spacyå®‰è£…">spacyå®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python">
<span class="n">pip</span> <span class="n">install</span> <span class="n">spacy</span><span class="o">==</span><span class="mf">3.2.0</span>

</code></pre></div><br>
<h2 id="æ¨¡å‹ä¸‹è½½å®‰è£…">æ¨¡å‹ä¸‹è½½å®‰è£…</h2>
<p>små°å‹/ mdä¸­å‹/ lgå¤§å‹</p>
<ul>
<li>
<p><strong>ä¸­æ–‡æ¨¡å‹3.2.0ç‰ˆ</strong></p>
<ul>
<li>zh_core_web_sm  <a href="https://github.com/explosion/spacy-models/releases/download/zh_core_web_sm-3.2.0/zh_core_web_sm-3.2.0-py3-none-any.whl">https://github.com/explosion/spacy-models/releases/download/zh_core_web_sm-3.2.0/zh_core_web_sm-3.2.0-py3-none-any.whl</a></li>
<li>zh_core_web_md <a href="https://github.com/explosion/spacy-models/releases/download/zh_core_web_md-3.2.0/zh_core_web_md-3.2.0-py3-none-any.whl">https://github.com/explosion/spacy-models/releases/download/zh_core_web_md-3.2.0/zh_core_web_md-3.2.0-py3-none-any.whl</a></li>
<li>zh_core_web_lg   <a href="https://github.com/explosion/spacy-models/releases/download/zh_core_web_lg-3.2.0/zh_core_web_lg-3.2.0-py3-none-any.whl">https://github.com/explosion/spacy-models/releases/download/zh_core_web_lg-3.2.0/zh_core_web_lg-3.2.0-py3-none-any.whl</a></li>
</ul>
</li>
<li>
<p><strong>è‹±æ–‡æ¨¡å‹3.2.0ç‰ˆ</strong></p>
<ul>
<li>en_core_web_sm <a href="https://github.com/explosion/spacy-models/releases/download/en_core_web_sm-3.2.0/en_core_web_sm-3.2.0-py3-none-any.whl">https://github.com/explosion/spacy-models/releases/download/en_core_web_sm-3.2.0/en_core_web_sm-3.2.0-py3-none-any.whl</a></li>
<li>en_core_web_md  <a href="https://github.com/explosion/spacy-models/releases/download/en_core_web_md-3.2.0/en_core_web_md-3.2.0-py3-none-any.whl">https://github.com/explosion/spacy-models/releases/download/en_core_web_md-3.2.0/en_core_web_md-3.2.0-py3-none-any.whl</a></li>
<li>en_core_web_lg  <a href="https://github.com/explosion/spacy-models/releases/download/en_core_web_lg-3.2.0/en_core_web_lg-3.2.0-py3-none-any.whl">https://github.com/explosion/spacy-models/releases/download/en_core_web_lg-3.2.0/en_core_web_lg-3.2.0-py3-none-any.whl</a></li>
</ul>
</li>
</ul>
<p><strong>æ³¨æ„</strong>ï¼š æ¨¡å‹å¤§å°çš„åŒºåˆ«ä¸»è¦ä½“ç°åœ¨è¯å‘é‡ç»´åº¦æ•°çš„å·®è·ï¼Œæ¨¡å‹è¶Šå¤§ï¼Œ è¯å‘é‡çš„ç»´åº¦è¶Šå¤šã€‚</p>
<p>ä»¥ç‰ˆæœ¬3.2.0çš„en_core_web_smä¸ºä¾‹ï¼Œç‚¹å‡»å¯¹åº”é“¾æ¥ï¼Œä¸‹è½½è‡³æ¡Œé¢ã€‚</p>
<p>æ‰“å¼€å‘½ä»¤è¡Œï¼Œ ä¾æ¬¡æ‰§è¡Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">cd Desktop

pip3 install en_core_web_sm-3.2.0-py3-none-any.whl
</code></pre></div><p>å³å¯å®‰è£…å®Œæˆã€‚</p>
<br>
<br>
<h2 id="docç±»å‹">Docç±»å‹</h2>
<ul>
<li><code>doc.lang_</code>  docçš„è¯­è¨€</li>
<li><code>doc.text</code>   docçš„æ–‡æœ¬</li>
<li><code>doc.ents</code> æ–‡æœ¬ä¸­çš„å®ä½“è¯</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">spacy</span>

<span class="c1">#ä½¿ç”¨ä¸­æ–‡zh_core_web_smæ¨¡å‹</span>
<span class="n">zh_nlp</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&#34;zh_core_web_sm&#34;</span><span class="p">)</span>

<span class="n">test1</span> <span class="o">=</span> <span class="s1">&#39;å›½å®¶ç®¡ç½‘å¾®ä¿¡å…¬ä¼—å·11æœˆ13æ—¥æ¶ˆæ¯ï¼Œ11æœˆ12æ—¥ï¼Œå›½å®¶ç®¡ç½‘é›†å›¢é¦–æœŸç»¿è‰²è¶…çŸ­æœŸèèµ„åˆ¸åœ¨å…¨å›½é“¶è¡Œé—´å¸‚åœºæˆåŠŸå‘è¡Œã€‚æ­¤æ¬¡å€ºåˆ¸å‘è¡Œæ˜¯å›½å®¶ç®¡ç½‘é›†å›¢æˆç«‹åé¦–æ¬¡åœ¨å…¬å¼€å¸‚åœºäº®ç›¸ï¼Œç”±å·¥å•†é“¶è¡Œç‹¬å®¶æ‰¿é”€ï¼Œå‘è¡Œé‡‘é¢60äº¿å…ƒã€æœŸé™270å¤©ï¼Œä¸ºæœ¬å¹´åº¦å•ç¬”æœ€å¤§é‡‘é¢ç»¿è‰²è¶…çŸ­æœŸèèµ„åˆ¸ï¼Œå‹Ÿé›†èµ„é‡‘å°†å…¨éƒ¨ç”¨äºå‚¨æ°”åº“ç­‰ç»¿è‰²ä½ç¢³å¤©ç„¶æ°”å‚¨è¿åŸºç¡€è®¾æ–½å»ºè®¾ï¼›å‘è¡Œç¥¨é¢åˆ©ç‡2.41%ï¼Œè®¤è´­æ€»è§„æ¨¡è¾¾2.53å€ï¼Œä½äºèµ„æœ¬å¸‚åœºåŒæœŸå¯æ¯”äº§å“åˆ©ç‡è¶…10ä¸ªBPï¼Œåæ˜ äº†å¸‚åœºå¯¹ç»¿è‰²åŸºç¡€è®¾æ–½å»ºè®¾é¡¹ç›®çš„é’çã€‚&#39;</span>

<span class="n">doc1</span> <span class="o">=</span> <span class="n">zh_nlp</span><span class="p">(</span><span class="n">test1</span><span class="p">)</span>

<span class="n">doc1</span>
</code></pre></div><pre><code>å›½å®¶ç®¡ç½‘å¾®ä¿¡å…¬ä¼—å·11æœˆ13æ—¥æ¶ˆæ¯ï¼Œ11æœˆ12æ—¥ï¼Œå›½å®¶ç®¡ç½‘é›†å›¢é¦–æœŸç»¿è‰²è¶…çŸ­æœŸèèµ„åˆ¸åœ¨å…¨å›½é“¶è¡Œé—´å¸‚åœºæˆåŠŸå‘è¡Œã€‚æ­¤æ¬¡å€ºåˆ¸å‘è¡Œæ˜¯å›½å®¶ç®¡ç½‘é›†å›¢æˆç«‹åé¦–æ¬¡åœ¨å…¬å¼€å¸‚åœºäº®ç›¸ï¼Œç”±å·¥å•†é“¶è¡Œç‹¬å®¶æ‰¿é”€ï¼Œå‘è¡Œé‡‘é¢60äº¿å…ƒã€æœŸé™270å¤©ï¼Œä¸ºæœ¬å¹´åº¦å•ç¬”æœ€å¤§é‡‘é¢ç»¿è‰²è¶…çŸ­æœŸèèµ„åˆ¸ï¼Œå‹Ÿé›†èµ„é‡‘å°†å…¨éƒ¨ç”¨äºå‚¨æ°”åº“ç­‰ç»¿è‰²ä½ç¢³å¤©ç„¶æ°”å‚¨è¿åŸºç¡€è®¾æ–½å»ºè®¾ï¼›å‘è¡Œç¥¨é¢åˆ©ç‡2.41%ï¼Œè®¤è´­æ€»è§„æ¨¡è¾¾2.53å€ï¼Œä½äºèµ„æœ¬å¸‚åœºåŒæœŸå¯æ¯”äº§å“åˆ©ç‡è¶…10ä¸ªBPï¼Œåæ˜ äº†å¸‚åœºå¯¹ç»¿è‰²åŸºç¡€è®¾æ–½å»ºè®¾é¡¹ç›®çš„é’çã€‚
</code></pre>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">doc1</span><span class="o">.</span><span class="n">lang_</span>
</code></pre></div><pre><code>'zh'
</code></pre>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">doc1</span><span class="o">.</span><span class="n">text</span>
</code></pre></div><pre><code>'å›½å®¶ç®¡ç½‘å¾®ä¿¡å…¬ä¼—å·11æœˆ13æ—¥æ¶ˆæ¯ï¼Œ11æœˆ12æ—¥ï¼Œå›½å®¶ç®¡ç½‘é›†å›¢é¦–æœŸç»¿è‰²è¶…çŸ­æœŸèèµ„åˆ¸åœ¨å…¨å›½é“¶è¡Œé—´å¸‚åœºæˆåŠŸå‘è¡Œã€‚æ­¤æ¬¡å€ºåˆ¸å‘è¡Œæ˜¯å›½å®¶ç®¡ç½‘é›†å›¢æˆç«‹åé¦–æ¬¡åœ¨å…¬å¼€å¸‚åœºäº®ç›¸ï¼Œç”±å·¥å•†é“¶è¡Œç‹¬å®¶æ‰¿é”€ï¼Œå‘è¡Œé‡‘é¢60äº¿å…ƒã€æœŸé™270å¤©ï¼Œä¸ºæœ¬å¹´åº¦å•ç¬”æœ€å¤§é‡‘é¢ç»¿è‰²è¶…çŸ­æœŸèèµ„åˆ¸ï¼Œå‹Ÿé›†èµ„é‡‘å°†å…¨éƒ¨ç”¨äºå‚¨æ°”åº“ç­‰ç»¿è‰²ä½ç¢³å¤©ç„¶æ°”å‚¨è¿åŸºç¡€è®¾æ–½å»ºè®¾ï¼›å‘è¡Œç¥¨é¢åˆ©ç‡2.41%ï¼Œè®¤è´­æ€»è§„æ¨¡è¾¾2.53å€ï¼Œä½äºèµ„æœ¬å¸‚åœºåŒæœŸå¯æ¯”äº§å“åˆ©ç‡è¶…10ä¸ªBPï¼Œåæ˜ äº†å¸‚åœºå¯¹ç»¿è‰²åŸºç¡€è®¾æ–½å»ºè®¾é¡¹ç›®çš„é’çã€‚'
</code></pre>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">doc1</span><span class="o">.</span><span class="n">vector</span>
</code></pre></div><pre><code>array([-1.81135774e-01,  2.31929451e-01,  1.45746097e-01,  6.82696044e-01,
       -8.44623148e-03, -2.21295916e-02,  4.06811416e-01, -4.60287899e-01,
       -5.73987663e-01, -1.33687481e-01, -5.34314513e-01, -6.64901555e-01,
       -3.94947737e-01,  6.35875063e-03, -2.03339502e-01,  5.78875951e-02,
       -3.34325433e-01, -3.77648622e-01,  2.43863747e-01, -5.56892566e-02,
       -7.30801523e-01, -2.41785884e-01, -4.50579911e-01, -3.13598923e-02,
        9.07084942e-02, -8.06667805e-01,  7.28501499e-01, -8.59559357e-01,
       -4.44110222e-02,  9.64611948e-01, -2.57230818e-01,  1.09481342e-01,
       -3.73580456e-01, -8.51007993e-04,  5.30374162e-02, -5.51876485e-01,
       -4.82654065e-01,  2.68822908e-01, -4.20012563e-01,  4.33068752e-01,
       -5.14427841e-01,  5.53584039e-01, -2.00293139e-02,  9.45062563e-02,
        1.04523234e-01,  1.34134221e+00, -5.23905218e-01,  1.31230903e+00,
        3.28943968e-01,  3.39987069e-01,  8.26785386e-01,  5.35273492e-01,
       -4.27510649e-01, -1.02807179e-01, -1.91500232e-01,  2.63696283e-01,
        6.33961499e-01, -5.65908328e-02, -1.94336250e-01, -5.89190602e-01,
        2.22078279e-01,  3.41992415e-02,  5.37312031e-01,  2.77926654e-01,
       -3.00608397e-01, -6.42910838e-01, -1.33188680e-01,  2.82793492e-01,
        6.25911206e-02,  2.08833948e-01,  2.69211121e-02,  1.65822819e-01,
       -4.32190485e-02, -6.67634964e-01,  6.50937319e-01, -2.43003711e-01,
        9.57057327e-02, -3.56370257e-03, -1.13566548e-01, -1.65319979e-01,
        7.40000159e-02,  3.65676880e-01, -2.21356809e-01,  2.03256473e-01,
        2.26293072e-01,  3.11525285e-01,  3.37869138e-01, -3.12896192e-01,
        5.31899095e-01, -1.86223835e-01, -6.03411011e-02,  4.97923464e-01,
        3.10418844e-01, -2.48594299e-01, -3.67455184e-01, -4.46804255e-01],
      dtype=float32)
</code></pre>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#doc1ä¸­çš„å®ä½“è¯</span>
<span class="n">doc1</span><span class="o">.</span><span class="n">ents</span>
</code></pre></div><pre><code>(11æœˆ13æ—¥, 11æœˆ12æ—¥, å›½å®¶ç®¡ç½‘é›†å›¢, å…¨å›½é“¶è¡Œ, å›½å®¶ç®¡ç½‘é›†å›¢, å·¥å•†é“¶è¡Œ, 60äº¿å…ƒ, 270å¤©, 2, 2, 53, è¶…10)
</code></pre>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#doc1ä¸­çš„å®ä½“è¯ç±»åˆ«</span>
<span class="p">[</span><span class="n">ent</span><span class="o">.</span><span class="n">label_</span> <span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="n">doc1</span><span class="o">.</span><span class="n">ents</span><span class="p">]</span>
</code></pre></div><pre><code>['DATE',
 'DATE',
 'ORG',
 'ORG',
 'ORG',
 'ORG',
 'MONEY',
 'DATE',
 'CARDINAL',
 'CARDINAL',
 'CARDINAL',
 'CARDINAL']
</code></pre>
<h2 id="tokenç±»å‹">Tokenç±»å‹</h2>
<ul>
<li><code>token.text</code>   æ–‡æœ¬</li>
<li><code>token.pos_</code>  è¯æ€§</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc1</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">pos_</span><span class="p">)</span>
</code></pre></div><pre><code>å›½å®¶   NOUN
ç®¡ç½‘   NOUN
å¾®ä¿¡   ADJ
å…¬ä¼—å·   NOUN
11æœˆ   NOUN
13æ—¥   NOUN
æ¶ˆæ¯   NOUN
ï¼Œ   PUNCT
11æœˆ   NOUN
12æ—¥   NOUN
ï¼Œ   PUNCT
å›½å®¶   NOUN
ç®¡ç½‘   NOUN
é›†å›¢   NOUN
é¦–æœŸ   ADV
ç»¿è‰²   VERB
è¶…çŸ­   NOUN
æœŸè   NOUN
èµ„åˆ¸   VERB
åœ¨   ADP
å…¨å›½   ADJ
é“¶è¡Œ   NOUN
é—´   PART
å¸‚åœº   NOUN
æˆåŠŸ   ADV
å‘è¡Œ   VERB
ã€‚   PUNCT
æ­¤æ¬¡   DET
å€ºåˆ¸   NOUN
å‘è¡Œ   VERB
æ˜¯   VERB
å›½å®¶   NOUN
ç®¡ç½‘   NOUN
é›†å›¢   NOUN
æˆç«‹   VERB
å   PART
é¦–æ¬¡   ADV
åœ¨   ADP
å…¬å¼€   ADJ
å¸‚åœº   NOUN
äº®ç›¸   VERB
ï¼Œ   PUNCT
ç”±   ADP
å·¥å•†   NOUN
é“¶è¡Œ   NOUN
ç‹¬å®¶   ADV
æ‰¿é”€   VERB
ï¼Œ   PUNCT
å‘è¡Œ   NOUN
é‡‘é¢   NOUN
60äº¿   NUM
å…ƒ   NUM
ã€   PUNCT
æœŸé™   NOUN
270   NUM
å¤©   NUM
ï¼Œ   PUNCT
ä¸º   ADP
æœ¬   DET
å¹´åº¦   NOUN
å•ç¬”   NOUN
æœ€   ADV
å¤§   ADJ
é‡‘é¢   NOUN
ç»¿è‰²   ADJ
è¶…çŸ­   NOUN
æœŸè   NOUN
èµ„åˆ¸   NOUN
ï¼Œ   PUNCT
å‹Ÿé›†   NOUN
èµ„é‡‘   NOUN
å°†   ADV
å…¨éƒ¨   ADV
ç”¨äº   VERB
å‚¨æ°”åº“   NOUN
ç­‰   PART
ç»¿è‰²   ADJ
ä½ç¢³   VERB
å¤©ç„¶æ°”   NOUN
å‚¨è¿   NOUN
åŸºç¡€   NOUN
è®¾æ–½   NOUN
å»ºè®¾   NOUN
ï¼›   PUNCT
å‘è¡Œ   VERB
ç¥¨é¢   ADJ
åˆ©ç‡   NOUN
2   NUM
.   PUNCT
41%   NOUN
ï¼Œ   PUNCT
è®¤è´­   NOUN
æ€»   ADJ
è§„æ¨¡   NOUN
è¾¾   VERB
2   NUM
.   PUNCT
53   NUM
å€   NUM
ï¼Œ   PUNCT
ä½äº   VERB
èµ„æœ¬   NOUN
å¸‚åœº   NOUN
åŒæœŸ   NOUN
å¯æ¯”   ADV
äº§å“   NOUN
åˆ©ç‡   NOUN
è¶…10   VERB
ä¸ª   NUM
BP   NOUN
ï¼Œ   PUNCT
åæ˜    VERB
äº†   PART
å¸‚åœº   NOUN
å¯¹   ADP
ç»¿è‰²   ADJ
åŸºç¡€   NOUN
è®¾æ–½   NOUN
å»ºè®¾   NOUN
é¡¹ç›®   NOUN
çš„   PART
é’ç   NOUN
ã€‚   PUNCT
</code></pre>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>cntextä¸­æ–‡æ–‡æœ¬åˆ†æåº“ | å€¼å¾—æ”¶è—</title>
      <link>https://hidadeng.github.io/blog/cntext_v_1/</link>
      <pubDate>Mon, 08 Nov 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/cntext_v_1/</guid>
      <description>ç®€å•å¥½ç”¨çš„ä¸­æ–‡Pythonæ–‡æœ¬åˆ†æåŒ…</description>
      <content:encoded><![CDATA[<h2 id="cntext">cntext</h2>
<p>ä¸­æ–‡æ–‡æœ¬åˆ†æåº“ï¼Œå¯å¯¹æ–‡æœ¬è¿›è¡Œè¯é¢‘ç»Ÿè®¡ã€è¯å…¸æ‰©å……ã€æƒ…ç»ªåˆ†æã€ç›¸ä¼¼åº¦ã€å¯è¯»æ€§ç­‰</p>
<ul>
<li><a href="https://github.com/hidadeng/cntext">githubåœ°å€</a> <code>https://github.com/hidadeng/cntext</code></li>
<li><a href="https://pypi.org/project/cntext/">pypiåœ°å€</a>  <code>https://pypi.org/project/cntext/</code></li>
<li><a href="https://ke.qq.com/course/482241?tuin=163164df">è§†é¢‘è¯¾-<strong>Pythonç½‘ç»œçˆ¬è™«ä¸æ–‡æœ¬æ•°æ®åˆ†æ</strong></a></li>
</ul>
<p>åŠŸèƒ½æ¨¡å—å«</p>
<ul>
<li><strong>cntext</strong></li>
<li><strong>stats</strong>  æ–‡æœ¬ç»Ÿè®¡,å¯è¯»æ€§ç­‰</li>
<li><strong>dictionary</strong> æ„å»ºè¯è¡¨(å…¸)</li>
<li><strong>sentiment</strong>  æƒ…æ„Ÿåˆ†æ</li>
<li><strong>similarity</strong>   æ–‡æœ¬ç›¸ä¼¼åº¦</li>
<li><strong>visualization</strong> å¯è§†åŒ–ï¼Œå¦‚è¯äº‘å›¾</li>
</ul>
<br>
<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="https://github.com/hidadeng/cntext/tree/main/examples">https://github.com/hidadeng/cntext/tree/main/examples</a></p>
<br>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip install cntext==0.9
</code></pre></div><br>
<h2 id="ä¸€cntext">ä¸€ã€cntext</h2>
<p>æŸ¥çœ‹cntextåŸºæœ¬ä¿¡æ¯</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span>

<span class="n">help</span><span class="p">(</span><span class="n">cntext</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">Help</span> <span class="nx">on</span> <span class="kn">package</span> <span class="nx">cntext</span><span class="p">:</span>

<span class="nx">NAME</span>
    <span class="nx">cntext</span>

<span class="nx">PACKAGE</span> <span class="nx">CONTENTS</span>
    <span class="nf">description</span> <span class="p">(</span><span class="kn">package</span><span class="p">)</span>
    <span class="nf">dictionary</span> <span class="p">(</span><span class="kn">package</span><span class="p">)</span>
    <span class="nf">sentiment</span> <span class="p">(</span><span class="kn">package</span><span class="p">)</span>
    <span class="nf">similarity</span> <span class="p">(</span><span class="kn">package</span><span class="p">)</span>
    <span class="nf">visualization</span> <span class="p">(</span><span class="kn">package</span><span class="p">)</span>

<span class="nx">DATA</span>
    <span class="nx">ADV_words</span> <span class="p">=</span> <span class="p">[</span><span class="sc">&#39;éƒ½&#39;</span><span class="p">,</span> <span class="sc">&#39;å…¨&#39;</span><span class="p">,</span> <span class="sc">&#39;å•&#39;</span><span class="p">,</span> <span class="sc">&#39;å…±&#39;</span><span class="p">,</span> <span class="sc">&#39;å…‰&#39;</span><span class="p">,</span> <span class="sc">&#39;å°½&#39;</span><span class="p">,</span> <span class="sc">&#39;å‡€&#39;</span><span class="p">,</span> <span class="sc">&#39;ä»…&#39;</span><span class="p">,</span> <span class="sc">&#39;å°±&#39;</span><span class="p">,</span> <span class="sc">&#39;åª&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€å…±</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="o">...</span>
    <span class="nx">CONJ_words</span> <span class="p">=</span> <span class="p">[</span><span class="sc">&#39;ä¹ƒ&#39;</span><span class="p">,</span> <span class="sc">&#39;ä¹&#39;</span><span class="p">,</span> <span class="sc">&#39;ä¸&#39;</span><span class="p">,</span> <span class="sc">&#39;æ— &#39;</span><span class="p">,</span> <span class="sc">&#39;ä¸”&#39;</span><span class="p">,</span> <span class="sc">&#39;ä¸•&#39;</span><span class="p">,</span> <span class="sc">&#39;ä¸º&#39;</span><span class="p">,</span> <span class="sc">&#39;å…±&#39;</span><span class="p">,</span> <span class="sc">&#39;å…¶&#39;</span><span class="p">,</span> <span class="sc">&#39;å†µ&#39;</span><span class="p">,</span> <span class="sc">&#39;å¥&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="o">...</span>
    <span class="nx">DUTIR_Ais</span> <span class="p">=</span> <span class="p">{</span><span class="err">&#39;</span><span class="nx">sigh</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€å‘½å‘œå‘¼</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€åœºæ˜¥æ¢¦</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€åœºç©º</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€å¤´è·Œåœ¨èœåˆ€ä¸Š</span><span class="err">ï¼</span><span class="nx">åˆ‡è‚¤ä¹‹ç—›</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€å¿µä¹‹å·®</span><span class="err">&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">..</span>
    <span class="nx">DUTIR_Haos</span> <span class="p">=</span> <span class="p">{</span><span class="err">&#39;</span><span class="mi">1</span><span class="nx">å…’å·´ç»</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="mi">3</span><span class="nx">x</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="mi">8</span><span class="nx">é”™</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">BUCUO</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">Coolæ¯™</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">NB</span><span class="err">&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
    <span class="nx">DUTIR_Jings</span> <span class="p">=</span> <span class="p">{</span><span class="err">&#39;</span><span class="mi">848</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">FT</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">_god</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">yun</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€ä¸ªéª°å­æ·ä¸ƒç‚¹</span><span class="err">ï¼</span><span class="nx">å‡ºä¹æ„æ–™</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€ä¸¾æˆå</span><span class="err">&#39;</span><span class="p">,</span> <span class="o">......</span>
    <span class="nx">DUTIR_Jus</span> <span class="p">=</span> <span class="p">{</span><span class="err">&#39;</span><span class="nx">ä¸€åˆ™ä»¥å–œ</span><span class="err">ï¼Œ</span><span class="nx">ä¸€åˆ™ä»¥æƒ§</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€å‘åƒé’§</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€å¹´è¢«è›‡å’¬</span><span class="err">ï¼Œ</span><span class="nx">ä¸‰å¹´æ€•è‰ç´¢</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€åº§çš†æƒŠ</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€è„¸æ¨ªè‚‰</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€è›‡ä¸¤å¤´</span><span class="o">...</span>
    <span class="nx">DUTIR_Les</span> <span class="p">=</span> <span class="p">{</span><span class="err">&#39;</span><span class="p">:)</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">CC</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">Happy</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">LOL</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">_so</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">haha</span><span class="err">&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
    <span class="nx">DUTIR_Nus</span> <span class="p">=</span> <span class="p">{</span><span class="err">&#39;</span><span class="mi">2</span><span class="nx">æ°”æ–—ç‹ </span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">MD</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">TNND</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">gun</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">kao</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€åˆ€ä¸¤æ–­</span><span class="err">&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
    <span class="nx">DUTIR_Wus</span> <span class="p">=</span> <span class="p">{</span><span class="err">&#39;</span><span class="nx">B4</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">BD</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">BS</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">HC</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">HJ</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">JJWW</span><span class="err">&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
    <span class="nx">HOWNET_deny</span> <span class="p">=</span> <span class="p">{</span><span class="sc">&#39;ä¸&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸å¯</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸æ˜¯</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸èƒ½</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸è¦</span><span class="err">&#39;</span><span class="p">,</span> <span class="sc">&#39;ä¼‘&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
    <span class="nx">HOWNET_extreme</span> <span class="p">=</span> <span class="p">{</span><span class="sc">&#39;ä¸‡&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸‡ä¸‡</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸‡åˆ†</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸‡èˆ¬</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸äº¦ä¹ä¹</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸å¯å¼€äº¤</span><span class="err">&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
    <span class="nx">HOWNET_ish</span> <span class="p">=</span> <span class="p">{</span><span class="err">&#39;</span><span class="nx">ä¸€äº›</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€ç‚¹</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€ç‚¹å„¿</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸ä¸ç‚¹å„¿</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸å¤§</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸æ€ä¹ˆ</span><span class="err">&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
    <span class="nx">HOWNET_more</span> <span class="p">=</span> <span class="p">{</span><span class="sc">&#39;å¤š&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">å¤§ä¸äº†</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">å¦‚æ–¯</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">å°¤ç”š</span><span class="err">&#39;</span><span class="p">,</span> <span class="sc">&#39;å¼º&#39;</span><span class="p">,</span> <span class="sc">&#39;æ„ˆ&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
    <span class="nx">HOWNET_neg</span> <span class="p">=</span> <span class="p">{</span><span class="err">&#39;</span><span class="nx">ä¸€ä¸‹å­çˆ†å‘</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€ä¸‹å­çˆ†å‘çš„ä¸€è¿ä¸²</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€ä¸å°å¿ƒ</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€ä¸ªå±</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€ä»æ—§è´¯</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€å</span><span class="err">&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
    <span class="nx">HOWNET_pos</span> <span class="p">=</span> <span class="p">{</span><span class="err">&#39;&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€ä¸“å¤šèƒ½</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€ä¸ä¸å·®</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€ä¸ä¸è‹Ÿ</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€ä¸ªå¿ƒçœ¼å„¿</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸€äº”ä¸€å</span><span class="err">&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
    <span class="nx">HOWNET_very</span> <span class="p">=</span> <span class="p">{</span><span class="err">&#39;</span><span class="nx">ä¸ä¸ºè¿‡</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸å°‘</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸èƒœ</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä¸è¿‡</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä½•å•»</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">ä½•æ­¢</span><span class="err">&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
    <span class="nx">STOPWORDS_en</span> <span class="p">=</span> <span class="p">{</span><span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">about</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">above</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">across</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">after</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">afterwards</span><span class="err">&#39;</span><span class="o">...</span>
    <span class="nx">STOPWORDS_zh</span> <span class="p">=</span> <span class="p">{</span><span class="sc">&#39;ã€&#39;</span><span class="p">,</span> <span class="sc">&#39;ã€‚&#39;</span><span class="p">,</span> <span class="sc">&#39;ã€ˆ&#39;</span><span class="p">,</span> <span class="sc">&#39;ã€‰&#39;</span><span class="p">,</span> <span class="sc">&#39;ã€Š&#39;</span><span class="p">,</span> <span class="sc">&#39;ã€‹&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
    
    <span class="nx">FORMAL_pos_words</span> <span class="p">=</span> <span class="p">[</span><span class="err">&#39;</span><span class="mi">100</span><span class="nx">å¼º</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="mi">3</span><span class="nx">Açº§</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="mi">50</span><span class="nx">å¼º</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">AAAçº§</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">AAAä¼ä¸š</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">çˆ±æˆ´</span><span class="err">&#39;</span><span class="p">,..]</span>
    <span class="nx">FORMAL_neg_words</span> <span class="p">=</span> <span class="p">[</span><span class="err">&#39;</span><span class="nx">å®‰äºç°çŠ¶</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">æš—è—</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">æš—æ·¡</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">æš—é»‘</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="nx">æš—æµ</span><span class="err">&#39;</span><span class="p">,</span> <span class="p">..]</span>
    <span class="nx">UNFORMAL_pos_words</span> <span class="p">=</span> <span class="p">[</span><span class="err">&#39;</span><span class="nx">çˆ±å¿ƒ</span><span class="sc">&#39;,&#39;</span><span class="nx">å®‰å®š</span><span class="sc">&#39;,&#39;</span><span class="nx">å®‰å…¨</span><span class="sc">&#39;,&#39;</span><span class="nx">å®‰ç„¶æ— æ™</span><span class="sc">&#39;,&#39;</span><span class="nx">å®‰æ³°</span><span class="sc">&#39;,&#39;</span><span class="nx">éœ¸ä¸»</span><span class="err">&#39;</span><span class="p">,</span><span class="o">...</span><span class="p">]</span>
    <span class="nx">UNFORMAL_neg_words</span> <span class="p">=</span> <span class="p">[</span><span class="err">&#39;</span><span class="nx">å“€é¸¿éé‡</span><span class="sc">&#39;,&#39;</span><span class="nx">è‚®è„</span><span class="sc">&#39;,&#39;</span><span class="nx">ç½¢å…</span><span class="sc">&#39;,&#39;</span><span class="nx">ç™½ç—´</span><span class="sc">&#39;,&#39;</span><span class="nx">è´¥ç¬”</span><span class="sc">&#39;,&#39;</span><span class="nx">è´¥è¯‰</span><span class="sc">&#39;,&#39;</span><span class="nx">åŠä¿¡åŠç–‘</span><span class="err">&#39;</span><span class="p">..]</span>



<span class="nx">FILE</span>
    <span class="o">/</span><span class="nx">Library</span><span class="o">/</span><span class="nx">Frameworks</span><span class="o">/</span><span class="nx">Python</span><span class="p">.</span><span class="nx">framework</span><span class="o">/</span><span class="nx">Versions</span><span class="o">/</span><span class="mf">3.7</span><span class="o">/</span><span class="nx">lib</span><span class="o">/</span><span class="nx">python3</span><span class="mf">.7</span><span class="o">/</span><span class="nx">site</span><span class="o">-</span><span class="nx">packages</span><span class="o">/</span><span class="nx">cntext</span><span class="o">/</span><span class="nx">__init__</span><span class="p">.</span><span class="nx">py</span>
</code></pre></div><br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">cntext</span> <span class="kn">import</span> <span class="n">dict_info</span>

<span class="n">dict_info</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"> ã€å¤§è¿ç†å·¥å¤§å­¦æƒ…æ„Ÿæœ¬ä½“åº“ã€‘
     ä¸ƒå¤§æƒ…ç»ªåˆ†ç±»ï¼Œä¾æ¬¡æ˜¯å“€ã€æ¶ã€å¥½ã€æƒŠã€æƒ§ã€ä¹ã€æ€’ï¼›å¯¹åº”çš„æƒ…ç»ªè¯è¡¨ä¾æ¬¡ï¼š
    DUTIR_Ais = {&#34;æ³£è¡€æ¶è†º&#34;, &#34;æœ›æ–­ç™½äº‘&#34;, &#34;æ—¥æš®é€”ç©·&#34;, &#34;èº«å¾®åŠ›è–„&#34;...}
    DUTIR_Wus = {&#34;é¥°éé‚è¿‡&#34;, &#34;æ¶è¯­&#34;, &#34;æ¯å®³&#34;, &#34;æ¶ç±ç›ˆæŒ‡&#34;, &#34;è„¾æ°”çˆ†èº&#34;, &#34;æ·«è´±&#34;, &#34;å‡Œä¹±&#34;...}
    DUTIR_Haos =  {&#34;æ‰“ç ´ç ‚é”…ç’ºåˆ°åº•&#34;, &#34;å¤šå½©&#34;, &#34;æŠ«æ²™æ‹£é‡‘&#34;, &#34;è§æœºè¡Œäº‹&#34;, &#34;ç²¾ç¥é¥±æ»¡&#34;...}
    DUTIR_Jings = {&#34;éª‡äººè§†å¬&#34;, &#34;æ‹æ¡ˆæƒŠå¥‡&#34;, &#34;æ‚¬å¿µ&#34;, &#34;æ— ç¿¼è€Œé£&#34;, &#34;åŸæ¥&#34;, &#34;å†·é—¨&#34;...}
    DUTIR_Jus ={&#34;å±±æ‘‡åœ°åŠ¨&#34;, &#34;æœˆé»‘é£é«˜&#34;, &#34;æµè¡€&#34;, &#34;è€é¼ å·çŒ«é¥­ï¼å¿ƒæƒŠè‚‰è·³&#34;, &#34;ä¸€å‘åƒé’§&#34;...}
    DUTIR_Les ={&#34;å«å“ºé¼“è…¹&#34;, &#34;æ¬¢å‘¼é¼“èˆ&#34;, &#34;èºæ­Œè¶èˆ&#34;, &#34;å°†ä¼¯ä¹‹åŠ©&#34;, &#34;é€¸å…´æ¨ªé£&#34;, &#34;èˆ’ç•…&#34;...}
    DUTIR_Nus = {&#34;æ€¨æ°”æ»¡è…¹&#34;, &#34;é¢æœ‰æ„ è‰²&#34;, &#34;æ„¤æ„¤&#34;, &#34;ç›´çœ‰çªçœ¼&#34;, &#34;è´Ÿæ°”æ–—ç‹ &#34;, &#34;æŒ‘çœ¼&#34;...}
    
    ã€çŸ¥ç½‘Hownetè¯å…¸ã€‘
    å«æ­£è´Ÿå½¢å®¹è¯ã€å¦å®šè¯ã€å‰¯è¯ç­‰è¯è¡¨ï¼Œå¯¹åº”çš„è¯è¡¨ä¾æ¬¡:
    HOWNET_deny = {&#34;ä¸&#34;, &#34;ä¸æ˜¯&#34;, &#34;ä¸èƒ½&#34;, &#34;ä¸å¯&#34;...}
    HOWNET_extreme = {&#34;ç™¾åˆ†ä¹‹ç™¾&#34;, &#34;å€åŠ &#34;, &#34;å¤‡è‡³&#34;, &#34;ä¸å¾—äº†&#34;...}
    HOWNET_ish = {&#34;ç‚¹ç‚¹æ»´æ»´&#34;, &#34;å¤šå¤šå°‘å°‘&#34;, &#34;æ€ª&#34;, &#34;å¥½ç”Ÿ&#34;, &#34;è¿˜&#34;, &#34;æˆ–å¤šæˆ–å°‘&#34;...}
    HOWNET_more = {&#34;å¤§ä¸äº†&#34;, &#34;å¤š&#34;, &#34;æ›´&#34;, &#34;æ¯”è¾ƒ&#34;, &#34;æ›´åŠ &#34;, &#34;æ›´è¿›ä¸€æ­¥&#34;, &#34;æ›´ä¸º&#34;, &#34;è¿˜&#34;, &#34;è¿˜è¦&#34;...}
    HOWNET_neg = {&#34;å‹å&#34;, &#34;é²è½çš„&#34;, &#34;è¢«æ§çŠ¯ç½ª&#34;, &#34;é“¶æ ¹ç´§&#34;, &#34;è­¦æƒ•çš„&#34;, &#34;æ®‹ç¼º&#34;, &#34;è‡´æ±¡ç‰©&#34;, &#34;æŸ”å¼±&#34;...}
    HOWNET_pos = {&#34;æ— è¯¯&#34;, &#34;æ„Ÿæ¿€ä¸å°½&#34;, &#34;å—å¤§ä¼—æ¬¢è¿&#34;, &#34;æ•¬ç¤¼&#34;,  &#34;æ–‡é›…&#34;, &#34;ä¸€å°˜ä¸æŸ“&#34;, &#34;é«˜ç²¾åº¦&#34;, &#34;å…´ç››&#34;...}
    HOWNET_very = {&#34;ä¸ä¸ºè¿‡&#34;, &#34;è¶…&#34;, &#34;è¶…é¢&#34;, &#34;è¶…å¤–å·®&#34;, &#34;è¶…å¾®ç»“æ„&#34;, &#34;è¶…ç‰©è´¨&#34;, &#34;å‡ºå¤´&#34;...}
    
    ã€åœç”¨è¯è¡¨ã€‘
    ä¸­è‹±æ–‡åœç”¨è¯è¡¨ï¼Œä¾æ¬¡
    STOPWORDS_zh = {&#34;ç»&#34;, &#34;å¾—&#34;, &#34;åˆ™ç”š&#34;, &#34;è·Ÿ&#34;, &#34;å¥½&#34;, &#34;å…·ä½“åœ°è¯´&#34;...}
    STOPWORDS_en = {&#39;a&#39;, &#39;about&#39;, &#39;above&#39;, &#39;across&#39;, &#39;after&#39;...}
    
    ã€ä¸­æ–‡å‰¯è¯/è¿è¯ã€‘
    å‰¯è¯ADVã€è¿è¯CONJ
    ADV_words = [&#39;éƒ½&#39;, &#39;å…¨&#39;, &#39;å•&#39;, &#39;å…±&#39;, &#39;å…‰&#39;...}
    CONJ_words = [&#39;ä¹ƒ&#39;, &#39;ä¹&#39;, &#39;ä¸&#39;, &#39;æ— &#39;, &#39;ä¸”&#39;...}
    
    ã€é‡‘èæƒ…ç»ªè¯å…¸ã€‘
     å§šåŠ æƒ,å†¯ç»ª,ç‹èµé’§,çºªè£åµ˜,å¼ ç»´.è¯­è°ƒã€æƒ…ç»ªåŠå¸‚åœºå½±å“:åŸºäºé‡‘èæƒ…ç»ªè¯å…¸[J].ç®¡ç†ç§‘å­¦å­¦æŠ¥,2021,24(05):26-46.
     #æ­£å¼-è‚¯å®šæƒ…ç»ªè¯å…¸
     FORMAL_pos_words = [&#39;100å¼º&#39;, &#39;3Açº§&#39;, &#39;50å¼º&#39;, &#39;AAAçº§&#39;, &#39;AAAä¼ä¸š&#39;, &#39;çˆ±æˆ´&#39;,...]
     #æ­£å¼-å¦å®šæƒ…ç»ªè¯å…¸
     FORMAL_neg_words = [&#39;å®‰äºç°çŠ¶&#39;, &#39;æš—è—&#39;, &#39;æš—æ·¡&#39;, &#39;æš—é»‘&#39;, &#39;æš—æµ&#39;, ...]
     #éæ­£å¼-è‚¯å®šæƒ…ç»ªè¯å…¸
     UNFORMAL_pos_words = [&#39;çˆ±å¿ƒ&#39;,&#39;å®‰å®š&#39;,&#39;å®‰å…¨&#39;,&#39;å®‰ç„¶æ— æ™&#39;,&#39;å®‰æ³°&#39;,&#39;éœ¸ä¸»&#39;,...]
     #éæ­£å¼-å¦å®šæƒ…ç»ªè¯å…¸
     UNFORMAL_neg_words = [&#39;å“€é¸¿éé‡&#39;,&#39;è‚®è„&#39;,&#39;ç½¢å…&#39;,&#39;ç™½ç—´&#39;,&#39;è´¥ç¬”&#39;,&#39;è´¥è¯‰&#39;,&#39;åŠä¿¡åŠç–‘&#39;...]
</code></pre></div><br>
<p>æŸ¥çœ‹è¯è¡¨</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">cntext</span> <span class="kn">import</span> <span class="n">CONJ_words</span><span class="p">,</span> <span class="n">ADV_words</span>

<span class="c1">#è·å–è¿è¯è¯è¡¨</span>
<span class="n">CONJ_words</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[&#39;ä¹ƒ&#39;,
 &#39;ä¹&#39;,
 &#39;ä¸&#39;,
 &#39;æ— &#39;,
 &#39;ä¸”&#39;,
 &#39;ä¸•&#39;,
 &#39;ä¸º&#39;,
 &#39;å…±&#39;,
 &#39;å…¶&#39;,
 &#39;å†µ&#39;,
 &#39;å¥&#39;,
 &#39;åˆ™&#39;,
 &#39;é‚£&#39;,
 &#39;å…¼&#39;,
 ...
 ]
</code></pre></div><p><br><br></p>
<h2 id="äºŒstats">äºŒã€stats</h2>
<p>ç›®å‰å«</p>
<ul>
<li>term_freq è¯é¢‘ç»Ÿè®¡å‡½æ•°ï¼Œè¿”å›Counterç±»å‹</li>
<li>readability ä¸­æ–‡å¯è¯»æ€§</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">cntext.stats</span> <span class="kn">import</span> <span class="n">term_freq</span><span class="p">,</span> <span class="n">readability</span>

<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;å¦‚ä½•çœ‹å¾…ä¸€ç½‘æ–‡ä½œè€…è¢«é»‘å®¢å¤§ä½¬ç›—å·æ”¹æ–‡ï¼Œå› ä¸‡åˆ†æƒ­æ„§è€Œåœæ›´&#39;</span>
<span class="n">term_freq</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">Counter({&#39;çœ‹å¾…&#39;: 1,
         &#39;ç½‘æ–‡&#39;: 1,
         &#39;ä½œè€…&#39;: 1,
         &#39;é»‘å®¢&#39;: 1,
         &#39;å¤§ä½¬&#39;: 1,
         &#39;ç›—å·&#39;: 1,
         &#39;æ”¹æ–‡å› &#39;: 1,
         &#39;ä¸‡åˆ†&#39;: 1,
         &#39;æƒ­æ„§&#39;: 1,
         &#39;åœ&#39;: 1})
</code></pre></div><br>
<p>**ä¸­æ–‡å¯è¯»æ€§ ** ç®—æ³•å‚è€ƒè‡ª</p>
<blockquote>
<p>å¾å·,å§šæŒ¯æ™”,é™ˆå†¬å.ä¸­æ–‡å¹´æŠ¥å¯è¯»æ€§ï¼šè¡¡é‡ä¸æ£€éªŒ[J].ä¼šè®¡ç ”ç©¶,2021(03):28-44.</p>
</blockquote>
<ul>
<li>readability1 &mdash;æ¯ä¸ªåˆ†å¥ä¸­çš„å¹³å‡å­—æ•°</li>
<li>readability2  &mdash;æ¯ä¸ªå¥å­ä¸­å‰¯è¯å’Œè¿è¯æ‰€å çš„æ¯”ä¾‹</li>
<li>readability3  &mdash;å‚è€ƒFog Indexï¼Œ readability3=(readability1+readability2)Ã—0.5</li>
</ul>
<p>ä»¥ä¸Šä¸‰ä¸ªæŒ‡æ ‡è¶Šå¤§ï¼Œéƒ½è¯´æ˜æ–‡æœ¬çš„å¤æ‚ç¨‹åº¦è¶Šé«˜ï¼Œå¯è¯»æ€§è¶Šå·®ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">readability</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">{&#39;readability1&#39;: 27.0,
 &#39;readability2&#39;: 0.17647058823529413,
 &#39;readability3&#39;: 13.588235294117647}
</code></pre></div><p><br><br></p>
<h2 id="ä¸‰dictionary">ä¸‰ã€dictionary</h2>
<p>æœ¬æ¨¡å—ç”¨äºæ„å»ºè¯è¡¨(å…¸),å«</p>
<ul>
<li>SoPmi å…±ç°æ³•æ‰©å……è¯è¡¨(å…¸)</li>
<li>W2VModels è¯å‘é‡word2vecæ‰©å……è¯è¡¨(å…¸)</li>
</ul>
<h3 id="31-sopmi-å…±ç°æ³•">3.1 SoPmi å…±ç°æ³•</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">cntext.dictionary</span> <span class="kn">import</span> <span class="n">SoPmi</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">sopmier</span> <span class="o">=</span> <span class="n">SoPmi</span><span class="p">(</span><span class="n">cwd</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span>
                <span class="n">input_txt_file</span><span class="o">=</span><span class="s1">&#39;data/sopmi_corpus.txt&#39;</span><span class="p">,</span>  <span class="c1">#åŸå§‹æ•°æ®ï¼Œæ‚¨çš„è¯­æ–™</span>
                <span class="n">seedword_txt_file</span><span class="o">=</span><span class="s1">&#39;data/sopmi_seed_words.txt&#39;</span><span class="p">,</span> <span class="c1">#äººå·¥æ ‡æ³¨çš„åˆå§‹ç§å­è¯</span>
                <span class="p">)</span>   

<span class="n">sopmier</span><span class="o">.</span><span class="n">sopmi</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">step 1/4:...seg corpus ...
Loading model cost 0.678 seconds.
Prefix dict has been built successfully.
step 1/4 finished:...cost 60.78995203971863...
step 2/4:...collect cowords ...
step 2/4 finished:...cost 0.6169600486755371...
step 3/4:...compute sopmi ...
step 1/4 finished:...cost 0.26422882080078125...
step 4/4:...save candiwords ...
finished! cost 61.8965539932251
</code></pre></div><br>
<h3 id="32-w2vmodels-è¯å‘é‡">3.2 W2VModels è¯å‘é‡</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">cntext.dictionary</span> <span class="kn">import</span> <span class="n">W2VModels</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1">#åˆå§‹åŒ–æ¨¡å‹</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">W2VModels</span><span class="p">(</span><span class="n">cwd</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>  <span class="c1">#è¯­æ–™æ•°æ® w2v_corpus.txt</span>
<span class="n">model</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">input_txt_file</span><span class="o">=</span><span class="s1">&#39;data/w2v_corpus.txt&#39;</span><span class="p">)</span>


<span class="c1">#æ ¹æ®ç§å­è¯ï¼Œç­›é€‰å‡ºæ²¡ç±»è¯æœ€ç›¸è¿‘çš„å‰100ä¸ªè¯</span>
<span class="n">model</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">seedword_txt_file</span><span class="o">=</span><span class="s1">&#39;data/w2v_seeds/integrity.txt&#39;</span><span class="p">,</span> 
           <span class="n">topn</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">seedword_txt_file</span><span class="o">=</span><span class="s1">&#39;data/w2v_seeds/innovation.txt&#39;</span><span class="p">,</span> 
           <span class="n">topn</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">seedword_txt_file</span><span class="o">=</span><span class="s1">&#39;data/w2v_seeds/quality.txt&#39;</span><span class="p">,</span> 
           <span class="n">topn</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">seedword_txt_file</span><span class="o">=</span><span class="s1">&#39;data/w2v_seeds/respect.txt&#39;</span><span class="p">,</span> 
           <span class="n">topn</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">seedword_txt_file</span><span class="o">=</span><span class="s1">&#39;data/w2v_seeds/teamwork.txt&#39;</span><span class="p">,</span> 
           <span class="n">topn</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">æ•°æ®é¢„å¤„ç†å¼€å§‹.......
é¢„å¤„ç†ç»“æŸ...........
Word2Vecæ¨¡å‹è®­ç»ƒå¼€å§‹......
å·²å°†æ¨¡å‹å­˜å…¥ /Users/Desktop/cntext/test/output/w2v_candi_words/w2v.model 

å‡†å¤‡å¯»æ‰¾æ¯ä¸ªseedåœ¨è¯­æ–™ä¸­æ‰€æœ‰çš„ç›¸ä¼¼å€™é€‰è¯
åˆæ­¥æœå¯»åˆ° 572 ä¸ªç›¸ä¼¼çš„å€™é€‰è¯
è®¡ç®—æ¯ä¸ªå€™é€‰è¯ ä¸ integrity çš„ç›¸ä¼¼åº¦ï¼Œ é€‰å‡ºç›¸ä¼¼åº¦æœ€é«˜çš„å‰ 100 ä¸ªå€™é€‰è¯
å·²å®Œæˆ ã€integrity ç±»ã€‘ çš„è¯è¯­ç­›é€‰ï¼Œå¹¶ä¿å­˜äº /Users/Desktop/cntext/test/output/w2v_candi_words/integrity.txtï¼Œ è€—æ—¶ 46 ç§’

å‡†å¤‡å¯»æ‰¾æ¯ä¸ªseedåœ¨è¯­æ–™ä¸­æ‰€æœ‰çš„ç›¸ä¼¼å€™é€‰è¯
åˆæ­¥æœå¯»åˆ° 516 ä¸ªç›¸ä¼¼çš„å€™é€‰è¯
è®¡ç®—æ¯ä¸ªå€™é€‰è¯ ä¸ innovation çš„ç›¸ä¼¼åº¦ï¼Œ é€‰å‡ºç›¸ä¼¼åº¦æœ€é«˜çš„å‰ 100 ä¸ªå€™é€‰è¯
å·²å®Œæˆ ã€innovation ç±»ã€‘ çš„è¯è¯­ç­›é€‰ï¼Œå¹¶ä¿å­˜äº /Users/Desktop/cntext/test/output/w2v_candi_words/innovation.txtï¼Œ è€—æ—¶ 46 ç§’

å‡†å¤‡å¯»æ‰¾æ¯ä¸ªseedåœ¨è¯­æ–™ä¸­æ‰€æœ‰çš„ç›¸ä¼¼å€™é€‰è¯
åˆæ­¥æœå¯»åˆ° 234 ä¸ªç›¸ä¼¼çš„å€™é€‰è¯
è®¡ç®—æ¯ä¸ªå€™é€‰è¯ ä¸ quality çš„ç›¸ä¼¼åº¦ï¼Œ é€‰å‡ºç›¸ä¼¼åº¦æœ€é«˜çš„å‰ 100 ä¸ªå€™é€‰è¯
å·²å®Œæˆ ã€quality ç±»ã€‘ çš„è¯è¯­ç­›é€‰ï¼Œå¹¶ä¿å­˜äº /Users/Desktop/cntext/test/output/w2v_candi_words/quality.txtï¼Œ è€—æ—¶ 46 ç§’

å‡†å¤‡å¯»æ‰¾æ¯ä¸ªseedåœ¨è¯­æ–™ä¸­æ‰€æœ‰çš„ç›¸ä¼¼å€™é€‰è¯
åˆæ­¥æœå¯»åˆ° 243 ä¸ªç›¸ä¼¼çš„å€™é€‰è¯
è®¡ç®—æ¯ä¸ªå€™é€‰è¯ ä¸ respect çš„ç›¸ä¼¼åº¦ï¼Œ é€‰å‡ºç›¸ä¼¼åº¦æœ€é«˜çš„å‰ 100 ä¸ªå€™é€‰è¯
å·²å®Œæˆ ã€respect ç±»ã€‘ çš„è¯è¯­ç­›é€‰ï¼Œå¹¶ä¿å­˜äº /Users/Desktop/cntext/test/output/w2v_candi_words/respect.txtï¼Œ è€—æ—¶ 46 ç§’

å‡†å¤‡å¯»æ‰¾æ¯ä¸ªseedåœ¨è¯­æ–™ä¸­æ‰€æœ‰çš„ç›¸ä¼¼å€™é€‰è¯
åˆæ­¥æœå¯»åˆ° 319 ä¸ªç›¸ä¼¼çš„å€™é€‰è¯
è®¡ç®—æ¯ä¸ªå€™é€‰è¯ ä¸ teamwork çš„ç›¸ä¼¼åº¦ï¼Œ é€‰å‡ºç›¸ä¼¼åº¦æœ€é«˜çš„å‰ 100 ä¸ªå€™é€‰è¯
å·²å®Œæˆ ã€teamwork ç±»ã€‘ çš„è¯è¯­ç­›é€‰ï¼Œå¹¶ä¿å­˜äº /Users/Desktop/cntext/test/output/w2v_candi_words/teamwork.txtï¼Œ è€—æ—¶ 46 ç§’
</code></pre></div><p><br><br></p>
<h2 id="å››-sentiment">å››ã€ sentiment</h2>
<ul>
<li>senti_by_hownet ä½¿ç”¨çŸ¥ç½‘Hownetè¯å…¸å¯¹æ–‡æœ¬è¿›è¡Œ<strong>æƒ…æ„Ÿ</strong>åˆ†æ</li>
<li>senti_by_dutir  ä½¿ç”¨å¤§è¿ç†å·¥å¤§å­¦æƒ…æ„Ÿæœ¬ä½“åº“dutirå¯¹æ–‡æœ¬è¿›è¡Œ<strong>æƒ…ç»ª</strong>åˆ†æ</li>
<li>senti_by_diydict ä½¿ç”¨<strong>è‡ªå®šä¹‰è¯å…¸</strong> å¯¹æ–‡æœ¬è¿›è¡Œ<strong>æƒ…æ„Ÿ</strong>åˆ†æ</li>
</ul>
<h3 id="41-senti_by_hownettext-adj_advfalse">4.1 senti_by_hownet(text, adj_adv=False)</h3>
<p>ä½¿ç”¨çŸ¥ç½‘Hownetè¯å…¸è¿›è¡Œ(ä¸­)æ–‡æœ¬æ•°æ®çš„æƒ…æ„Ÿåˆ†æï¼Œç»Ÿè®¡æ­£ã€è´Ÿæƒ…æ„Ÿä¿¡æ¯å‡ºç°æ¬¡æ•°(å¾—åˆ†)</p>
<ul>
<li>text:  å¾…åˆ†æçš„ä¸­æ–‡æ–‡æœ¬æ•°æ®</li>
<li>adj_adv:  æ˜¯å¦è€ƒè™‘å‰¯è¯ï¼ˆå¦å®šè¯ã€ç¨‹åº¦è¯ï¼‰å¯¹æƒ…ç»ªå½¢å®¹è¯çš„åè½¬å’Œæƒ…æ„Ÿå¼ºåº¦ä¿®é¥°ä½œç”¨ï¼Œé»˜è®¤Falseã€‚é»˜è®¤Falseåªç»Ÿè®¡æƒ…æ„Ÿå½¢å®¹è¯å‡ºç°ä¸ªæ•°ï¼›</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">cntext.sentiment</span> <span class="kn">import</span> <span class="n">senti_by_hownet</span>

<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;ä»Šå¤©è‚¡ç¥¨å¤§æ¶¨ï¼Œå¿ƒæƒ…å€çˆ½ï¼Œéå¸¸å¼€å¿ƒå•Šã€‚&#39;</span>

<span class="n">senti_by_dutir</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">{&#39;word_num&#39;: 12,
 &#39;sentence_num&#39;: 2,
 &#39;stopword_num&#39;: 4,
 &#39;å¥½_num&#39;: 0,
 &#39;ä¹_num&#39;: 1,
 &#39;å“€_num&#39;: 0,
 &#39;æ€’_num&#39;: 0,
 &#39;æƒ§_num&#39;: 0,
 &#39;æ¶_num&#39;: 0,
 &#39;æƒŠ_num&#39;: 0}
</code></pre></div><br>
<p>è€ƒè™‘å‰¯è¯ï¼ˆå¦å®šè¯ã€ç¨‹åº¦è¯ï¼‰å¯¹æƒ…ç»ªå½¢å®¹è¯çš„åè½¬å’Œæƒ…æ„Ÿå¼ºåº¦ä¿®é¥°ä½œç”¨</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">senti_by_hownet</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">adj_adv</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">{&#39;sentence_num&#39;: 1,
 &#39;word_num&#39;: 12,
 &#39;stopword_num&#39;: 3,
 &#39;pos_score&#39;: 13.0,
 &#39;neg_score&#39;: 0.0}
</code></pre></div><p><br><br></p>
<h3 id="42-senti_by_dutirtext">4.2 senti_by_dutir(text)</h3>
<p>ä½¿ç”¨å¤§è¿ç†å·¥å¤§å­¦æƒ…æ„Ÿæœ¬ä½“åº“å¯¹æ–‡æœ¬è¿›è¡Œæƒ…ç»ªåˆ†æï¼Œç»Ÿè®¡å„æƒ…ç»ªè¯è¯­å‡ºç°æ¬¡æ•°ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">cntext.sentiment</span> <span class="kn">import</span> <span class="n">senti_by_dutir</span>

<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;ä»Šå¤©è‚¡ç¥¨å¤§æ¶¨ï¼Œå¿ƒæƒ…å€çˆ½ï¼Œéå¸¸å¼€å¿ƒå•Šã€‚&#39;</span>

<span class="n">senti_by_dutir</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">{&#39;word_num&#39;: 12,
 &#39;sentence_num&#39;: 2,
 &#39;stopword_num&#39;: 4,
 &#39;å¥½_num&#39;: 0,
 &#39;ä¹_num&#39;: 1,
 &#39;å“€_num&#39;: 0,
 &#39;æ€’_num&#39;: 0,
 &#39;æƒ§_num&#39;: 0,
 &#39;æ¶_num&#39;: 0,
 &#39;æƒŠ_num&#39;: 0}
</code></pre></div><blockquote>
<p>æƒ…ç»ªåˆ†æä½¿ç”¨çš„å¤§è¿ç†å·¥å¤§å­¦æƒ…æ„Ÿæœ¬ä½“åº“ï¼Œå¦‚å‘è¡¨è®ºæ–‡ï¼Œè¯·æ³¨æ„ç”¨æˆ·è®¸å¯åè®®</p>
<p>å¦‚æœç”¨æˆ·ä½¿ç”¨è¯¥èµ„æºå‘è¡¨è®ºæ–‡æˆ–å–å¾—ç§‘ç ”æˆæœï¼Œè¯·åœ¨è®ºæ–‡ä¸­æ·»åŠ è¯¸å¦‚â€œä½¿ç”¨äº†å¤§è¿ç†å·¥å¤§å­¦ä¿¡æ¯æ£€ç´¢ç ”ç©¶å®¤çš„æƒ…æ„Ÿè¯æ±‡æœ¬ä½“â€ å­—æ ·åŠ ä»¥å£°æ˜ã€‚</p>
<p>å‚è€ƒæ–‡çŒ®ä¸­åŠ å…¥å¼•æ–‡â€œå¾ç³å®,æ—é¸¿é£,æ½˜å®‡,ç­‰.æƒ…æ„Ÿè¯æ±‡æœ¬ä½“çš„æ„é€ [J]. æƒ…æŠ¥å­¦æŠ¥, 2008, 27(2): 180-185.â€</p>
</blockquote>
<p><br><br></p>
<h3 id="43-senti_by_diytext">4.3 senti_by_diy(text)</h3>
<p>ä½¿ç”¨diyè¯å…¸è¿›è¡Œæƒ…æ„Ÿåˆ†æï¼Œè®¡ç®—å„ä¸ªæƒ…ç»ªè¯å‡ºç°æ¬¡æ•°ï¼Œæœªè€ƒè™‘å¼ºåº¦å‰¯è¯ã€å¦å®šè¯å¯¹æƒ…æ„Ÿçš„å¤æ‚å½±å“ï¼Œ</p>
<ul>
<li>text:  å¾…åˆ†æä¸­æ–‡æ–‡æœ¬</li>
<li>sentiwords:  æƒ…æ„Ÿè¯å­—å…¸ï¼›
{&lsquo;category1&rsquo;:  &lsquo;category1 è¯è¯­åˆ—è¡¨&rsquo;,
&lsquo;category2&rsquo;: &lsquo;category2è¯è¯­åˆ—è¡¨&rsquo;,
&lsquo;category3&rsquo;: &lsquo;category3è¯è¯­åˆ—è¡¨&rsquo;,
&hellip;
}</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">sentiwords</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;pos&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;å¼€å¿ƒ&#39;</span><span class="p">,</span> <span class="s1">&#39;æ„‰å¿«&#39;</span><span class="p">,</span> <span class="s1">&#39;å€çˆ½&#39;</span><span class="p">],</span>
              <span class="s1">&#39;neg&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;éš¾è¿‡&#39;</span><span class="p">,</span> <span class="s1">&#39;æ‚²ä¼¤&#39;</span><span class="p">],</span>
              <span class="s1">&#39;adv&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;å€&#39;</span><span class="p">]}</span>

<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;ä»Šå¤©è‚¡ç¥¨å¤§æ¶¨ï¼Œå¿ƒæƒ…å€çˆ½ï¼Œéå¸¸å¼€å¿ƒå•Šã€‚&#39;</span>
<span class="n">senti_by_diydict</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">sentiwords</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">{&#39;pos_num&#39;: 1,
 &#39;neg_num&#39;: 0,
 &#39;adv_num&#39;: 1,
 &#39;stopword_num&#39;: 4,
 &#39;sentence_num&#39;: 2,
 &#39;word_num&#39;: 12}
</code></pre></div><p><br><br></p>
<h3 id="44-æ³¨æ„">4.4 æ³¨æ„</h3>
<p><strong>è¿”å›ç»“æœ</strong>:  <strong>num</strong>è¡¨ç¤ºè¯è¯­å‡ºç°æ¬¡æ•°ï¼› scoreæ˜¯è€ƒè™‘å‰¯è¯ã€å¦å®šè¯å¯¹æƒ…æ„Ÿçš„ä¿®é¥°ï¼Œç»“æœä¸æ˜¯è¯é¢‘ï¼Œæ˜¯æƒ…æ„Ÿç±»åˆ«çš„å¾—åˆ†ã€‚</p>
<p><br><br></p>
<h2 id="äº”similarity">äº”ã€similarity</h2>
<p>ä½¿ç”¨cosineã€jaccardã€minieditç­‰è®¡ç®—ä¸¤æ–‡æœ¬çš„ç›¸ä¼¼åº¦ï¼Œç®—æ³•å®ç°å‚è€ƒè‡ª</p>
<blockquote>
<p>Cohen, Lauren, Christopher Malloy, and Quoc Nguyen. Lazy prices. No. w25084. National Bureau of Economic Research, 2018.</p>
</blockquote>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">from cntext.similarity import similarity_score

text1 = &#39;ç¼–ç¨‹çœŸå¥½ç©ç¼–ç¨‹çœŸå¥½ç©&#39;
text2 = &#39;æ¸¸æˆçœŸå¥½ç©ç¼–ç¨‹çœŸå¥½ç©&#39;

similarity_score(text1, text2)
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">{&#39;Sim_Cosine&#39;: 0.816496580927726,
 &#39;Sim_Jaccard&#39;: 0.6666666666666666,
 &#39;Sim_MinEdit&#39;: 1,
 &#39;Sim_Simple&#39;: 0.9183673469387755}
</code></pre></div><p><br><br></p>
<h2 id="å…­visualization">å…­ã€visualization</h2>
<p>æ–‡æœ¬ä¿¡æ¯å¯è§†åŒ–ï¼Œå«wordcloudã€wordshiftor</p>
<ul>
<li>wordcloud è¯äº‘å›¾</li>
<li>wordshiftor ä¸¤æ–‡æœ¬è¯ç§»å›¾</li>
</ul>
<h3 id="61-wordcloudtext-title-html_path">6.1 wordcloud(text, title, html_path)</h3>
<ul>
<li>text:  ä¸­æ–‡æ–‡æœ¬å­—ç¬¦ä¸²æ•°æ®</li>
<li>title:  è¯äº‘å›¾æ ‡é¢˜</li>
<li>html_path:  è¯äº‘å›¾htmlæ–‡ä»¶å­˜å‚¨è·¯å¾„</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">cntext.visualization</span> <span class="kn">import</span> <span class="n">wordcloud</span>

<span class="n">text1</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;åœ¨ä¿¡æ¯åŒ–æ—¶ä»£ï¼Œå„ç§å„æ ·çš„æ•°æ®è¢«å¹¿æ³›é‡‡é›†å’Œåˆ©ç”¨ï¼Œæœ‰äº›æ•°æ®çœ‹ä¼¼æ— å…³ç´§è¦ç”šè‡³å¥½åƒæ˜¯å…¬å¼€çš„ï¼Œä½†åŒæ ·å…³ä¹å›½å®¶å®‰å…¨ã€‚11æœˆ1æ—¥æ˜¯ã€Šåé—´è°æ³•ã€‹é¢å¸ƒå®æ–½ä¸ƒå‘¨å¹´ã€‚è¿‘å¹´æ¥ï¼Œå›½å®¶å®‰å…¨æœºå…³æŒ‰ç…§ã€Šåé—´è°æ³•ã€‹ã€Šæ•°æ®å®‰å…¨æ³•ã€‹æœ‰å…³è§„å®šï¼Œä¾æ³•å±¥è¡Œæ•°æ®å®‰å…¨ç›‘ç®¡èŒè´£ï¼Œåœ¨å…¨å›½èŒƒå›´å†…å¼€å±•æ¶‰å¤–æ•°æ®ä¸“é¡¹æ‰§æ³•è¡ŒåŠ¨ï¼Œå‘ç°ä¸€äº›å¢ƒå¤–æ•°æ®å…¬å¸é•¿æœŸã€å¤§é‡ã€å®æ—¶æœé›†æˆ‘å¢ƒå†…èˆ¹èˆ¶æ•°æ®ï¼Œæ•°æ®å®‰å…¨é¢†åŸŸçš„â€œå•†ä¸šé—´è°â€é­…å½±é‡é‡ã€‚
</span><span class="s2">
</span><span class="s2">2020å¹´6æœˆï¼Œå›½å®¶å®‰å…¨æœºå…³åœ¨åé—´è°ä¸“é¡¹è¡ŒåŠ¨ä¸­å‘ç°ï¼Œæœ‰å¢ƒå¤–æ•°æ®å…¬å¸é€šè¿‡ç½‘ç»œåœ¨å¢ƒå†…ç§ä¸‹æ‹›å‹Ÿâ€œæ•°æ®è´¡çŒ®å‘˜â€ã€‚å¹¿ä¸œçœæ¹›æ±Ÿå¸‚å›½å®¶å®‰å…¨å±€æ®æ­¤å¼€å±•è°ƒæŸ¥ï¼Œåœ¨éº»æ–œå†›æ¸¯é™„è¿‘å‘ç°æœ‰å¯ç–‘çš„æ— çº¿ç”µè®¾å¤‡åœ¨æŒç»­æœé›†æ¹›æ±Ÿæ¸¯å£èˆ°èˆ¹æ•°æ®ï¼Œå¹¶é€šè¿‡äº’è”ç½‘å®æ—¶ä¼ å¾€å¢ƒå¤–ã€‚åœ¨ä¸´è¿‘æµ·æ¸¯çš„ä¸€ä¸ªå±…æ°‘æ¥¼é‡Œï¼Œå›½å®¶å®‰å…¨æœºå…³å·¥ä½œäººå‘˜æœ€ç»ˆé”å®šäº†ä½ç½®ã€‚
</span><span class="s2">
</span><span class="s2">ä¸€å¥—ç®€æ˜“çš„æ— çº¿ç”µè®¾å¤‡æ˜¯AISé™†åŸºåŸºç«™ï¼Œç”¨æ¥æ¥æ”¶AISç³»ç»Ÿå‘å°„çš„èˆ¹èˆ¶æ•°æ®ã€‚AISç³»ç»Ÿæ˜¯èˆ¹èˆ¶èº«ä»½è‡ªåŠ¨è¯†åˆ«ç³»ç»Ÿï¼Œå›½é™…æµ·äº‹ç»„ç»‡è¦æ±‚300æ€»å¨ä»¥ä¸Šèˆ¹èˆ¶å¿…é¡»å¼ºåˆ¶å®‰è£…ã€‚èˆ¹åªåœ¨èˆªè¡Œè¿‡ç¨‹ä¸­ï¼Œé€šè¿‡AISç³»ç»Ÿå‘å…¶ä»–èˆ¹åªå’Œä¸»ç®¡éƒ¨é—¨å‘é€èˆ¹åªèˆªå‘ã€èˆªé€Ÿã€ç›®çš„æ¸¯ç­‰ä¿¡æ¯ï¼Œç”¨äºèˆªè¡Œé¿è®©ã€äº¤é€šå¯¼èˆªã€è½¨è¿¹å›æº¯ç­‰åŠŸèƒ½ã€‚å›½å®¶å®‰å…¨æœºå…³æŸ¥è·çš„è®¾å¤‡è™½ç„¶çœ‹ä¸Šå»ç®€é™‹ï¼ŒåŠŸèƒ½å´ååˆ†å¼ºå¤§ã€‚
</span><span class="s2">
</span><span class="s2">å›½å®¶å®‰å…¨æœºå…³è¿›ä¸€æ­¥è°ƒæŸ¥å‘ç°ï¼Œè¿™ä¸ªåŸºç«™çš„æ¥å†å¹¶ä¸ç®€å•ã€‚2016å¹´ï¼Œæ¹›æ±Ÿå¸‚çš„æ— çº¿ç”µçˆ±å¥½è€…éƒ‘æŸå¶ç„¶æ”¶åˆ°ä¸€å°å¢ƒå¤–æŸæµ·äº‹æ•°æ®å…¬å¸å‘æ¥çš„é‚€è¯·é‚®ä»¶ã€‚
</span><span class="s2">
</span><span class="s2">ä½œä¸ºèµ„æ·±çš„æ— çº¿ç”µçˆ±å¥½è€…ï¼Œèƒ½å…è´¹é¢†å–ä»·å€¼å‡ åƒå…ƒçš„è®¾å¤‡è¿˜èƒ½è·å–æ›´å¤šçš„èˆ¹èˆ¶ä¿¡æ¯ï¼Œéƒ‘æŸå½“ç„¶å¿ƒåŠ¨ã€‚è€Œä¸”ï¼Œè¿™ä¸ªåŸºç«™çš„æ¶è®¾ä¹Ÿéå¸¸å®¹æ˜“ï¼Œåªè¦ç®€å•ç»„è£…è¿ä¸Šå®¶é‡Œçš„ç½‘ç»œï¼Œè‡ªå·±çš„ä»»åŠ¡å°±ç®—å®Œæˆã€‚éƒ‘æŸé©¬ä¸Šæµè§ˆäº†è¿™å®¶å…¬å¸ç”³è¯·æ— çº¿ç”µè®¾å¤‡çš„é¡µé¢ï¼Œå¹¶æŒ‰å¯¹æ–¹è¦æ±‚å¡«å†™äº†ä¿¡æ¯ã€‚
</span><span class="s2">
</span><span class="s2">&#34;&#34;&#34;</span>

<span class="n">wordcloud</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">text1</span><span class="p">,</span> 
          <span class="n">title</span><span class="o">=</span><span class="s1">&#39;è¯äº‘å›¾æµ‹è¯•&#39;</span><span class="p">,</span> 
          <span class="n">html_path</span><span class="o">=</span><span class="s1">&#39;output/è¯äº‘å›¾æµ‹è¯•.html&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>

<figure >
    
        <img src="img/wordcloud.png" width="800" />
    
    
</figure>

<br>
<h3 id="62-wordshiftortext1-text2-title-top_n-matplotlib_family">6.2 wordshiftor(text1, text2, title, top_n, matplotlib_family)</h3>
<ul>
<li>text1:  æ–‡æœ¬æ•°æ®1ï¼›å­—ç¬¦ä¸²</li>
<li>text2:  æ–‡æœ¬æ•°æ®2ï¼›å­—ç¬¦ä¸²</li>
<li>title:  è¯ç§»å›¾æ ‡é¢˜</li>
<li>top_n:  æ˜¾ç¤ºæœ€å¸¸ç”¨çš„å‰nè¯ï¼› é»˜è®¤å€¼15</li>
<li>matplotlib_family matplotlibä¸­æ–‡å­—ä½“ï¼Œé»˜è®¤&quot;Arial Unicode MS&quot;ï¼›å¦‚ç»˜å›¾å­—ä½“ä¹±ç è¯·ï¼Œè¯·å‚è€ƒä¸‹é¢æç¤º</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">text1</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;åœ¨ä¿¡æ¯åŒ–æ—¶ä»£ï¼Œå„ç§å„æ ·çš„æ•°æ®è¢«å¹¿æ³›é‡‡é›†å’Œåˆ©ç”¨ï¼Œæœ‰äº›æ•°æ®çœ‹ä¼¼æ— å…³ç´§è¦ç”šè‡³å¥½åƒæ˜¯å…¬å¼€çš„ï¼Œä½†åŒæ ·å…³ä¹å›½å®¶å®‰å…¨ã€‚11æœˆ1æ—¥æ˜¯ã€Šåé—´è°æ³•ã€‹é¢å¸ƒå®æ–½ä¸ƒå‘¨å¹´ã€‚è¿‘å¹´æ¥ï¼Œå›½å®¶å®‰å…¨æœºå…³æŒ‰ç…§ã€Šåé—´è°æ³•ã€‹ã€Šæ•°æ®å®‰å…¨æ³•ã€‹æœ‰å…³è§„å®šï¼Œä¾æ³•å±¥è¡Œæ•°æ®å®‰å…¨ç›‘ç®¡èŒè´£ï¼Œåœ¨å…¨å›½èŒƒå›´å†…å¼€å±•æ¶‰å¤–æ•°æ®ä¸“é¡¹æ‰§æ³•è¡ŒåŠ¨ï¼Œå‘ç°ä¸€äº›å¢ƒå¤–æ•°æ®å…¬å¸é•¿æœŸã€å¤§é‡ã€å®æ—¶æœé›†æˆ‘å¢ƒå†…èˆ¹èˆ¶æ•°æ®ï¼Œæ•°æ®å®‰å…¨é¢†åŸŸçš„â€œå•†ä¸šé—´è°â€é­…å½±é‡é‡ã€‚
</span><span class="s2">
</span><span class="s2">2020å¹´6æœˆï¼Œå›½å®¶å®‰å…¨æœºå…³åœ¨åé—´è°ä¸“é¡¹è¡ŒåŠ¨ä¸­å‘ç°ï¼Œæœ‰å¢ƒå¤–æ•°æ®å…¬å¸é€šè¿‡ç½‘ç»œåœ¨å¢ƒå†…ç§ä¸‹æ‹›å‹Ÿâ€œæ•°æ®è´¡çŒ®å‘˜â€ã€‚å¹¿ä¸œçœæ¹›æ±Ÿå¸‚å›½å®¶å®‰å…¨å±€æ®æ­¤å¼€å±•è°ƒæŸ¥ï¼Œåœ¨éº»æ–œå†›æ¸¯é™„è¿‘å‘ç°æœ‰å¯ç–‘çš„æ— çº¿ç”µè®¾å¤‡åœ¨æŒç»­æœé›†æ¹›æ±Ÿæ¸¯å£èˆ°èˆ¹æ•°æ®ï¼Œå¹¶é€šè¿‡äº’è”ç½‘å®æ—¶ä¼ å¾€å¢ƒå¤–ã€‚åœ¨ä¸´è¿‘æµ·æ¸¯çš„ä¸€ä¸ªå±…æ°‘æ¥¼é‡Œï¼Œå›½å®¶å®‰å…¨æœºå…³å·¥ä½œäººå‘˜æœ€ç»ˆé”å®šäº†ä½ç½®ã€‚
</span><span class="s2">
</span><span class="s2">ä¸€å¥—ç®€æ˜“çš„æ— çº¿ç”µè®¾å¤‡æ˜¯AISé™†åŸºåŸºç«™ï¼Œç”¨æ¥æ¥æ”¶AISç³»ç»Ÿå‘å°„çš„èˆ¹èˆ¶æ•°æ®ã€‚AISç³»ç»Ÿæ˜¯èˆ¹èˆ¶èº«ä»½è‡ªåŠ¨è¯†åˆ«ç³»ç»Ÿï¼Œå›½é™…æµ·äº‹ç»„ç»‡è¦æ±‚300æ€»å¨ä»¥ä¸Šèˆ¹èˆ¶å¿…é¡»å¼ºåˆ¶å®‰è£…ã€‚èˆ¹åªåœ¨èˆªè¡Œè¿‡ç¨‹ä¸­ï¼Œé€šè¿‡AISç³»ç»Ÿå‘å…¶ä»–èˆ¹åªå’Œä¸»ç®¡éƒ¨é—¨å‘é€èˆ¹åªèˆªå‘ã€èˆªé€Ÿã€ç›®çš„æ¸¯ç­‰ä¿¡æ¯ï¼Œç”¨äºèˆªè¡Œé¿è®©ã€äº¤é€šå¯¼èˆªã€è½¨è¿¹å›æº¯ç­‰åŠŸèƒ½ã€‚å›½å®¶å®‰å…¨æœºå…³æŸ¥è·çš„è®¾å¤‡è™½ç„¶çœ‹ä¸Šå»ç®€é™‹ï¼ŒåŠŸèƒ½å´ååˆ†å¼ºå¤§ã€‚
</span><span class="s2">
</span><span class="s2">å›½å®¶å®‰å…¨æœºå…³è¿›ä¸€æ­¥è°ƒæŸ¥å‘ç°ï¼Œè¿™ä¸ªåŸºç«™çš„æ¥å†å¹¶ä¸ç®€å•ã€‚2016å¹´ï¼Œæ¹›æ±Ÿå¸‚çš„æ— çº¿ç”µçˆ±å¥½è€…éƒ‘æŸå¶ç„¶æ”¶åˆ°ä¸€å°å¢ƒå¤–æŸæµ·äº‹æ•°æ®å…¬å¸å‘æ¥çš„é‚€è¯·é‚®ä»¶ã€‚
</span><span class="s2">
</span><span class="s2">ä½œä¸ºèµ„æ·±çš„æ— çº¿ç”µçˆ±å¥½è€…ï¼Œèƒ½å…è´¹é¢†å–ä»·å€¼å‡ åƒå…ƒçš„è®¾å¤‡è¿˜èƒ½è·å–æ›´å¤šçš„èˆ¹èˆ¶ä¿¡æ¯ï¼Œéƒ‘æŸå½“ç„¶å¿ƒåŠ¨ã€‚è€Œä¸”ï¼Œè¿™ä¸ªåŸºç«™çš„æ¶è®¾ä¹Ÿéå¸¸å®¹æ˜“ï¼Œåªè¦ç®€å•ç»„è£…è¿ä¸Šå®¶é‡Œçš„ç½‘ç»œï¼Œè‡ªå·±çš„ä»»åŠ¡å°±ç®—å®Œæˆã€‚éƒ‘æŸé©¬ä¸Šæµè§ˆäº†è¿™å®¶å…¬å¸ç”³è¯·æ— çº¿ç”µè®¾å¤‡çš„é¡µé¢ï¼Œå¹¶æŒ‰å¯¹æ–¹è¦æ±‚å¡«å†™äº†ä¿¡æ¯ã€‚
</span><span class="s2">
</span><span class="s2">&#34;&#34;&#34;</span>


<span class="n">text2</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;
</span><span class="s2">é€šçŸ¥å¼ºè°ƒï¼Œå„åœ°å•†åŠ¡ä¸»ç®¡éƒ¨é—¨è¦ç´§ç´§å›´ç»•ä¿ä¾›ç¨³ä»·å·¥ä½œç›®æ ‡ï¼Œå‹å®â€œèœç¯®å­â€å¸‚é•¿è´Ÿè´£åˆ¶ï¼Œç»†åŒ–å·¥ä½œæªæ–½ï¼›å¼ºåŒ–æ¨ªå‘åä½œä¸çºµå‘è”åŠ¨ï¼ŒåŠ å¼ºä¸æœ‰å…³éƒ¨é—¨çš„å·¥ä½œåè°ƒï¼Œå½¢æˆå·¥ä½œåˆåŠ›ï¼›å»ºç«‹å®Œå–„çœé™…é—´å’Œæœ¬åœ°åŒºè”ä¿è”ä¾›æœºåˆ¶ï¼Œå¥å…¨æœ‰å…³å·¥ä½œæ–¹æ¡ˆï¼Œæ ¹æ®å½¢åŠ¿åŠæ—¶å¼€å±•è·¨åŒºåŸŸè°ƒè¿ï¼›åŠ å¼ºå¸‚åœºè¿è¡Œç›‘æµ‹ï¼Œæ¯æ—¥è·Ÿè¸ªè”¬èœã€è‚‰ç±»ç­‰é‡ç‚¹ç”Ÿæ´»å¿…éœ€å“ä¾›æ±‚å’Œä»·æ ¼å˜åŒ–æƒ…å†µï¼ŒåŠæ—¶é¢„æµ‹ï¼ŒåŠæ—©é¢„è­¦ã€‚
</span><span class="s2">
</span><span class="s2">é€šçŸ¥è¦æ±‚ï¼Œå„åœ°æ”¯æŒé¼“åŠ±å¤§å‹å†œäº§å“æµé€šä¼ä¸šä¸è”¬èœã€ç²®æ²¹ã€ç•œç¦½å…»æ®–ç­‰å†œäº§å“ç”Ÿäº§åŸºåœ°å»ºç«‹ç´§å¯†åˆä½œå…³ç³»ï¼Œç­¾è®¢é•¿æœŸä¾›é”€åè®®ï¼›è€å‚¨è”¬èœè¦æå‰é‡‡è´­ï¼Œé”å®šè´§æºï¼Œåšå¥½æœ¬åœ°èœä¸å®¢èœä¹‹é—´ï¼ŒåŒ—èœä¸å—èœä¹‹é—´ã€è®¾æ–½èœä¸éœ²å¤©èœä¹‹é—´çš„æ¢¯æ¬¡è½®æ¢å’Œè¡”æ¥ä¾›åº”ï¼›å¥å…¨å®Œå¤‡æœ¬åœ°è‚‰ç±»å‚¨å¤‡è§„æ¨¡åŠç®¡ç†åˆ¶åº¦ï¼›åŒ—æ–¹çœä»½è¦æŒ‰æ—¶å®Œæˆæœ¬å¹´åº¦å†¬æ˜¥è”¬èœå‚¨å¤‡è®¡åˆ’ï¼Œå—æ–¹çœä»½è¦æ ¹æ®è‡ªèº«æƒ…å†µå»ºç«‹å®Œå–„è”¬èœå‚¨å¤‡ï¼›åŠæ—¶æŠ•æ”¾è‚‰ç±»ã€è”¬èœç­‰ç”Ÿæ´»å¿…éœ€å“å‚¨å¤‡ï¼Œè¡¥å……å¸‚åœºä¾›åº”ã€‚
</span><span class="s2">&#34;&#34;&#34;</span>

<span class="kn">from</span> <span class="nn">cntext.visualization</span> <span class="kn">import</span> <span class="n">wordshiftor</span>

<span class="n">wordshiftor</span><span class="p">(</span><span class="n">text1</span><span class="o">=</span><span class="n">text1</span><span class="p">,</span> 
            <span class="n">text2</span><span class="o">=</span><span class="n">text2</span><span class="p">,</span> 
            <span class="n">title</span><span class="o">=</span><span class="s1">&#39;ä¸¤æ–‡æœ¬å¯¹æ¯”&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>

<figure >
    
        <img src="img/wordshiftor.png" width="800" />
    
    
</figure>

<h3 id="63-textpictitlepythonæµ‹è¯•-subtitleä½¿ç”¨pythonç”Ÿæˆå›¾ç‰‡-fontalibaba-puhuiti-boldotf-titlesize18-subsize14">6.3 textpic(title=&lsquo;PYTHONæµ‹è¯•&rsquo;, subtitle=&lsquo;ä½¿ç”¨Pythonç”Ÿæˆå›¾ç‰‡&rsquo;, font=&lsquo;Alibaba-PuHuiTi-Bold.otf&rsquo;, titlesize=1.8, subsize=14)</h3>
<ul>
<li>title:  ä¸»æ ‡é¢˜</li>
<li>subtitle: å‰¯æ ‡é¢˜</li>
<li>font:  æœ¬åœ°ä¸­æ–‡å­—ä½“è·¯å¾„</li>
<li>titlesize: ä¸»æ ‡é¢˜å­—ä½“å¤§å°</li>
<li>subsize: å‰¯æ ‡é¢˜å­—ä½“å¤§å°</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">textpic</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;PYTHONæµ‹è¯•&#39;</span><span class="p">,</span> 
        <span class="n">subtitle</span><span class="o">=</span><span class="s1">&#39;ä½¿ç”¨Pythonç”Ÿæˆå›¾ç‰‡&#39;</span><span class="p">,</span> 
        <span class="n">font</span><span class="o">=</span><span class="s1">&#39;data/Alibaba-PuHuiTi-Bold.otf&#39;</span><span class="p">,</span> 
        <span class="n">titlesize</span><span class="o">=</span><span class="mf">1.8</span><span class="p">,</span> 
        <span class="n">subsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/result.png" width="800" />
    
    
</figure>

<br>
<p><strong>æ³¨æ„</strong></p>
<blockquote>
<p>è®¾ç½®å‚æ•°matplotlib_familyï¼Œéœ€è¦å…ˆè¿è¡Œä¸‹é¢ä»£ç è·å–æœ¬æœºå­—ä½“åˆ—è¡¨
from matplotlib.font_manager import FontManager
mpl_fonts = set(f.name for f in FontManager().ttflist)
print(mpl_fonts)</p>
</blockquote>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Hugging Face | è‡ªç„¶è¯­è¨€å¤„ç†å¹³å°</title>
      <link>https://hidadeng.github.io/blog/huggingface_test/</link>
      <pubDate>Sun, 07 Nov 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/huggingface_test/</guid>
      <description>åè¡Œä»¥å†…ä»£ç å®ç°ä»»æ„NLPåŠŸèƒ½</description>
      <content:encoded><![CDATA[<p>Huggingfaceï¼ˆæŠ±æŠ±è„¸ï¼‰æ€»éƒ¨ä½äºçº½çº¦ï¼Œæ˜¯ä¸€å®¶ä¸“æ³¨äºè‡ªç„¶è¯­è¨€å¤„ç†ã€äººå·¥æ™ºèƒ½å’Œåˆ†å¸ƒå¼ç³»ç»Ÿçš„åˆ›ä¸šå…¬å¸ã€‚ä»–ä»¬æ‰€æä¾›çš„èŠå¤©æœºå™¨äººæŠ€æœ¯ä¸€ç›´é¢‡å—æ¬¢è¿ï¼Œä½†æ›´å‡ºåçš„æ˜¯ä»–ä»¬åœ¨NLPå¼€æºç¤¾åŒºä¸Šçš„è´¡çŒ®ã€‚</p>
<p>Huggingfaceä¸€ç›´è‡´åŠ›äºè‡ªç„¶è¯­è¨€å¤„ç†NLPæŠ€æœ¯çš„å¹³æ°‘åŒ–(democratize)ï¼Œå¸Œæœ›æ¯ä¸ªäººéƒ½èƒ½ç”¨ä¸Šæœ€å…ˆè¿›(SOTA, state-of-the-art)çš„NLPæŠ€æœ¯ï¼Œè€Œéå›°çª˜äºè®­ç»ƒèµ„æºçš„åŒ®ä¹ã€‚</p>
<p><strong>Hugging Faceæ‰€æœ‰æ¨¡å‹çš„åœ°å€</strong></p>
<p><a href="https://huggingface.co/models">https://huggingface.co/models</a></p>
<p>ä½ å¯ä»¥åœ¨è¿™é‡Œä¸‹è½½æ‰€éœ€è¦çš„æ¨¡å‹ï¼Œä¹Ÿå¯ä»¥ä¸Šä¼ ä½ å¾®è°ƒä¹‹åç”¨äºç‰¹å®štaskçš„æ¨¡å‹ã€‚</p>
<br>
<p><strong>Hugging Faceä½¿ç”¨æ–‡æ¡£çš„åœ°å€</strong></p>
<p><a href="https://huggingface.co/transformers/master/index.html">https://huggingface.co/transformers/master/index.html</a></p>
<p><br><br></p>
<h2 id="è‹±æ±‰äº’è¯‘">è‹±æ±‰äº’è¯‘</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">transformers</span> <span class="kn">import</span> <span class="n">AutoTokenizer</span><span class="p">,</span> <span class="n">AutoModelForSeq2SeqLM</span><span class="p">,</span> <span class="n">pipeline</span>

<span class="n">zh2en_model</span> <span class="o">=</span> <span class="n">AutoModelForSeq2SeqLM</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s1">&#39;Helsinki-NLP/opus-mt-zh-en&#39;</span><span class="p">)</span>
<span class="n">zh2en_tokenizer</span> <span class="o">=</span> <span class="n">AutoTokenizer</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s1">&#39;Helsinki-NLP/opus-mt-zh-en&#39;</span><span class="p">)</span>
<span class="n">zh2en_translation</span> <span class="o">=</span> <span class="n">pipeline</span><span class="p">(</span><span class="s1">&#39;translation_zh_to_en&#39;</span><span class="p">,</span> 
                       <span class="n">model</span><span class="o">=</span><span class="n">zh2en_model</span><span class="p">,</span> 
                       <span class="n">tokenizer</span><span class="o">=</span><span class="n">zh2en_tokenizer</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">zh2en_translation</span><span class="p">(</span><span class="s1">&#39;Pythonæ˜¯ä¸€é—¨éå¸¸å¼ºå¤§çš„ç¼–ç¨‹è¯­è¨€!&#39;</span><span class="p">)</span>
</code></pre></div><pre><code>[{'translation_text': 'Python is a very powerful programming language!'}]
</code></pre>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">en2zh_model</span> <span class="o">=</span> <span class="n">AutoModelForSeq2SeqLM</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s1">&#39;Helsinki-NLP/opus-mt-en-zh&#39;</span><span class="p">)</span>
<span class="n">en2zh_tokenizer</span> <span class="o">=</span> <span class="n">AutoTokenizer</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s1">&#39;Helsinki-NLP/opus-mt-en-zh&#39;</span><span class="p">)</span>

<span class="n">en2zh_translation</span> <span class="o">=</span> <span class="n">pipeline</span><span class="p">(</span><span class="s1">&#39;translation_en_to_zh&#39;</span><span class="p">,</span> 
                       <span class="n">model</span><span class="o">=</span><span class="n">en2zh_model</span><span class="p">,</span> 
                       <span class="n">tokenizer</span><span class="o">=</span><span class="n">en2zh_tokenizer</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">en2zh_translation</span><span class="p">(</span><span class="s1">&#39;Python is a very powerful programming language!&#39;</span><span class="p">)</span>
</code></pre></div><pre><code>[{'translation_text': 'Pythonæ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„ç¼–ç¨‹è¯­è¨€!'}]
</code></pre>
<p><br><br></p>
<h2 id="æ–‡æœ¬åˆ†ç±»">æ–‡æœ¬åˆ†ç±»</h2>
<p>æ¨¡å‹ <strong>uer/roberta-base-finetuned-chinanews-chinese</strong>æ˜¯ä½¿ç”¨5ä¸ªä¸­æ–‡æ–‡æœ¬åˆ†ç±»æ•°æ®é›†è®­ç»ƒå¾—åˆ°</p>
<ul>
<li>äº¬ä¸œfullã€äº¬ä¸œbinaryå’Œå¤§ä¼—ç‚¹è¯„æ•°æ®é›†åŒ…å«ä¸åŒæƒ…æ„Ÿææ€§çš„ç”¨æˆ·è¯„è®ºæ•°æ®ã€‚</li>
<li>å‡¤å‡°ç½‘ å’Œ China Daily åŒ…å«ä¸åŒä¸»é¢˜ç±»çš„æ–°é—»æ–‡æœ¬æ•°æ®</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">transformers</span> <span class="kn">import</span> <span class="n">AutoModelForSequenceClassification</span><span class="p">,</span> <span class="n">AutoTokenizer</span><span class="p">,</span> <span class="n">pipeline</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">AutoModelForSequenceClassification</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s1">&#39;uer/roberta-base-finetuned-chinanews-chinese&#39;</span><span class="p">)</span>
<span class="n">tokenizer</span> <span class="o">=</span> <span class="n">AutoTokenizer</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s1">&#39;uer/roberta-base-finetuned-chinanews-chinese&#39;</span><span class="p">)</span>
<span class="n">text_classification</span> <span class="o">=</span> <span class="n">pipeline</span><span class="p">(</span><span class="s1">&#39;sentiment-analysis&#39;</span><span class="p">,</span> 
                               <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> 
                               <span class="n">tokenizer</span><span class="o">=</span><span class="n">tokenizer</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">test_text</span> <span class="o">=</span> <span class="s2">&#34;ä¸Šè¯æŒ‡æ•°å¤§æ¶¨2%&#34;</span>

<span class="n">text_classification</span><span class="p">(</span><span class="n">test_text</span><span class="p">,</span> <span class="n">return_all_scores</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div><pre><code>[[{'label': 'mainland China politics', 'score': 0.0002807585697155446},
  {'label': 'Hong Kong - Macau politics', 'score': 0.00015504546172451228},
  {'label': 'International news', 'score': 6.818029214628041e-05},
  {'label': 'financial news', 'score': 0.9991051554679871},
  {'label': 'culture', 'score': 0.00011297615128569305},
  {'label': 'entertainment', 'score': 0.00012184812658233568},
  {'label': 'sports', 'score': 0.0001558474759804085}]]
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">test_text</span> <span class="o">=</span> <span class="s2">&#34;Pythonæ˜¯ä¸€é—¨å¼ºå¤§çš„ç¼–ç¨‹è¯­è¨€&#34;</span>
<span class="n">text_classification</span><span class="p">(</span><span class="n">test_text</span><span class="p">,</span> <span class="n">return_all_scores</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div><pre><code>[[{'label': 'mainland China politics', 'score': 0.02050291746854782},
  {'label': 'Hong Kong - Macau politics', 'score': 0.0030984438490122557},
  {'label': 'International news', 'score': 0.005687597207725048},
  {'label': 'financial news', 'score': 0.03360358253121376},
  {'label': 'culture', 'score': 0.913349986076355},
  {'label': 'entertainment', 'score': 0.010810119099915028},
  {'label': 'sports', 'score': 0.012947351671755314}]]
</code></pre>
<p><br><br></p>
<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="https://github.com/hidadeng/DaDengAndHisPython/tree/master/20211108HuggingFace%E5%AD%A6%E4%B9%A0">https://github.com/hidadeng/DaDengAndHisPython/tree/master/20211108HuggingFaceå­¦ä¹ </a></p>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>è®©Pythonä»£ç æ›´ç®€æ´çš„pipeåŒ…</title>
      <link>https://hidadeng.github.io/blog/pipe_make_python_code_more_clean/</link>
      <pubDate>Sat, 30 Oct 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/pipe_make_python_code_more_clean/</guid>
      <description>çŸ­å°ç²¾æ‚pipe</description>
      <content:encoded><![CDATA[<h1 id="pipe">Pipe</h1>
<p><strong>map</strong>å’Œ<strong>filter</strong>æ˜¯å¤„ç†iterableæ•°æ®æœ€å¥½ç”¨çš„å‡½æ•°ï¼Œä½†å´è®©ä»£ç çœ‹èµ·æ¥å¾ˆä¹±ï¼Œä½¿ä»£ç å¯è¯»æ€§å¤§å¤§é™ä½ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="c1">#å¯¹arrç­›é€‰å¶æ•°ï¼Œå¹¶å¯¹å¶æ•°ä¹˜ä»¥2</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span><span class="p">,</span> <span class="n">arr</span><span class="p">)))</span>
</code></pre></div><pre><code>[4, 8]
</code></pre>
<p>åˆšåˆšçš„iterableçš„ä¾‹å­ï¼Œå…¶å®å¯ä»¥ä½¿ç”¨pipeåº“ä¸­çš„ <code>|</code> æ¥åº”ç”¨å¤šç§æ–¹æ³•ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pipe</span> <span class="kn">import</span> <span class="n">select</span><span class="p">,</span> <span class="n">where</span>

<span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="nb">list</span><span class="p">(</span><span class="n">arr</span>
    <span class="o">|</span><span class="n">where</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span>
    <span class="o">|</span><span class="n">select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="o">*</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div><pre><code>[4, 8]
</code></pre>
<h2 id="pipeæ˜¯ä»€ä¹ˆ">pipeæ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>pipeæ˜¯pythonä¸­çš„ç®¡é“æ“ä½œåº“ï¼Œå¯ä»¥ä½¿æ•°æ®åˆ†æå¤šä¸ªæ­¥éª¤(å‡½æ•°ï¼‰åƒç®¡é“(æµæ°´çº¿)ä¸€æ ·ä¸Šä¸‹è¡”æ¥ï¼Œå…±åŒå®Œæˆä¸€ä¸ªæ•°æ®åˆ†æä»»åŠ¡ã€‚</p>
<p>æˆ‘å–œæ¬¢pipeæ˜¯å› ä¸ºå®ƒè®©iterableä»£ç å˜å¾—å¹²å‡€æ•´æ´ï¼Œå¯è¯»æ€§å¤§å¤§å¢å¼ºã€‚åé¢æˆ‘ä¼šé€šè¿‡å‡ ä¸ªæ¡ˆä¾‹è®©å¤§å®¶å¿«é€ŸæŒæ¡pipeåº“ã€‚é¦–å…ˆå…ˆå®‰è£…pipe</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">pipe</span>
</code></pre></div><br>
<p><a href="https://github.com/hidadeng/DaDengAndHisPython/blob/master/20211115%E4%BD%BF%E7%94%A8pipe%E6%92%B0%E5%86%99%E5%B9%B2%E5%87%80%E7%9A%84Python%E4%BB%A3%E7%A0%81.ipynb">ç‚¹å‡»ä¸‹è½½æœ¬æ–‡ä»£ç </a></p>
<h2 id="where">where</h2>
<p>å¯¹iterableä¸­çš„æ•°æ®è¿›è¡Œç­›é€‰æ“ä½œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pipe</span> <span class="kn">import</span> <span class="n">where</span>

<span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="c1">#æŠŠå¶æ•°ç­›é€‰å‡ºæ¥</span>
<span class="nb">list</span><span class="p">(</span><span class="n">arr</span> <span class="o">|</span> <span class="n">where</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span><span class="p">))</span>
</code></pre></div><pre><code>[2, 4]
</code></pre>
<h2 id="select">select</h2>
<p>å¯¹iterableä¸­çš„æ•°æ®è¿›è¡ŒæŸç§æ“ä½œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pipe</span> <span class="kn">import</span> <span class="n">select</span>

<span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="c1">#å¯¹arrä¸­çš„æ¯ä¸ªæ•° ä¹˜ä»¥2</span>
<span class="nb">list</span><span class="p">(</span><span class="n">arr</span> <span class="o">|</span> <span class="n">select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div><pre><code>[2, 4, 6, 8, 10]
</code></pre>
<p>ç°åœ¨ä½ å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼š ä¸ºä½•åœ¨Pythonå·²æ‹¥æœ‰mapå’Œfilteræƒ…å†µä¸‹ï¼Œ è¿˜ç”¨pipeåº“ä¸­çš„ selectå’Œ whereå‘¢ï¼Ÿ</p>
<p>å› ä¸ºå¯ä»¥ä½¿ç”¨ç®¡é“åœ¨ä¸€ä¸ªæ–¹æ³•åé¢åŠ å…¥å¦ä¸€ä¸ªæ–¹æ³•ï¼Œ åŠ ä¸æ­¢1æ¬¡!!</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pipe</span> <span class="kn">import</span> <span class="n">select</span><span class="p">,</span> <span class="n">where</span>

<span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="nb">list</span><span class="p">(</span><span class="n">arr</span> 
     <span class="o">|</span> <span class="n">where</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="c1">#ç­›é€‰arrä¸­çš„å¶æ•°</span>
     <span class="o">|</span> <span class="n">select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>  <span class="c1">#å¯¹å¶æ•°ä¹˜ä»¥2</span>
    <span class="p">)</span>
</code></pre></div><pre><code>[4, 8]
</code></pre>
<h1 id="éæŠ˜å iterable">éæŠ˜å iterable</h1>
<h2 id="chain">chain</h2>
<p>å¯¹äºåµŒå¥—ç»“æ„çš„iterableæ•°æ®ï¼Œæœ€éš¾ä»»åŠ¡ä¹‹ä¸€å°±æ˜¯å°†å…¶å±•å¹³ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pipe</span> <span class="kn">import</span> <span class="n">chain</span>

<span class="n">nested</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,[</span><span class="mi">3</span><span class="p">]],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]</span>

<span class="nb">list</span><span class="p">((</span><span class="n">nested</span> <span class="o">|</span> <span class="n">chain</span><span class="p">))</span>
</code></pre></div><pre><code>[1, 2, [3], 4, 5]
</code></pre>
<p>å³æ—¶ç»è¿‡ä¸Šè¿°æ“ä½œï¼Œ ä¾ç„¶ä¸æ˜¯å®Œå…¨å±•å¼€ã€‚ ä¸ºäº†å¤„ç†æ·±åº¦åµŒå¥—æ•°æ®ï¼Œ å¯ä»¥ä½¿ç”¨traverseæ–¹æ³•ã€‚</p>
<h2 id="traverse">traverse</h2>
<p>éå†traverseæ–¹æ³•å¯ä»¥ç”¨é€’å½’çš„æ–¹å¼å±•å¼€ åµŒå¥—å¯¹è±¡ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pipe</span> <span class="kn">import</span> <span class="n">traverse</span>

<span class="n">nested</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,[</span><span class="mi">3</span><span class="p">]],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]</span>

<span class="nb">list</span><span class="p">((</span><span class="n">nested</span> <span class="o">|</span> <span class="n">traverse</span><span class="p">))</span>
</code></pre></div><pre><code>[1, 2, 3, 4, 5]
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬ä»æŠ½å–å­—å…¸valuesä¸­çš„åˆ—è¡¨ï¼Œå¹¶å°†å…¶å±•å¹³</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pipe</span> <span class="kn">import</span> <span class="n">traverse</span><span class="p">,</span> <span class="n">select</span>

<span class="n">fruits</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;apple&#34;</span><span class="p">,</span> <span class="s2">&#34;price&#34;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">]},</span>
    <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;orange&#34;</span><span class="p">,</span> <span class="s2">&#34;price&#34;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;grape&#34;</span><span class="p">,</span> <span class="s2">&#34;price&#34;</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>
<span class="p">]</span>

<span class="nb">list</span><span class="p">(</span><span class="n">fruits</span>
    <span class="o">|</span> <span class="n">select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">fruit</span><span class="p">:</span> <span class="n">fruit</span><span class="p">[</span><span class="s2">&#34;price&#34;</span><span class="p">])</span>
    <span class="o">|</span> <span class="n">traverse</span><span class="p">)</span>
</code></pre></div><pre><code>[2, 5, 4, 5]
</code></pre>
<h2 id="groupby">groupby</h2>
<p>æœ‰æ—¶å€™ï¼Œéœ€è¦å¯¹åˆ—è¡¨ä¸­çš„æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œè¿™å¯èƒ½ç”¨åˆ°groupbyæ–¹æ³•ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pipe</span> <span class="kn">import</span> <span class="n">select</span><span class="p">,</span> <span class="n">groupby</span>

<span class="nb">list</span><span class="p">(</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
    <span class="o">|</span> <span class="n">groupby</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&#34;å¶æ•°&#34;</span> <span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span> <span class="k">else</span> <span class="s2">&#34;å¥‡æ•°&#34;</span><span class="p">)</span>
    <span class="o">|</span> <span class="n">select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">{</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])})</span>
<span class="p">)</span>
</code></pre></div><pre><code>[{'å¶æ•°': [2, 4, 6, 8]}, {'å¥‡æ•°': [1, 3, 5, 7, 9]}]
</code></pre>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ æˆ‘ä»¬ä½¿ç”¨groupbyå°†æ•°å­—åˆ†ä¸ºå¥‡æ•°ç»„å’Œå¶æ•°ç»„ã€‚groupbyæ–¹æ³•è¾“å‡ºçš„ç»“æœå¦‚ä¸‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[(&#39;å¶æ•°&#39;, &lt;itertools._grouper at 0x10bd54550&gt;),
 (&#39;å¥‡æ•°&#39;, &lt;itertools._grouper at 0x10bd4d350&gt;)]
 
</code></pre></div><p>æ¥ä¸‹æ¥ï¼Œä½¿ç”¨selectå°†å…ƒç´ ä¸ºå…ƒç»„çš„åˆ—è¡¨è½¬åŒ–ä¸ºå­—å…¸ï¼Œå…¶ä¸­</p>
<ul>
<li>å…ƒç»„ä¸­ç¬¬1ä½ç½®åšå­—å…¸çš„å…³é”®è¯</li>
<li>å…ƒç»„ä¸­ç¬¬2ä½ç½®åšå­—å…¸çš„å€¼</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[{&#39;å¶æ•°&#39;: [2, 4, 6, 8]}, {&#39;å¥‡æ•°&#39;: [1, 3, 5, 7, 9]}]
</code></pre></div><p>Coolï¼ä¸ºäº†rangeå€¼å¤§äº2ï¼Œ æˆ‘ä»¬åœ¨selectå†…å¢åŠ whereæ¡ä»¶æ“ä½œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pipe</span> <span class="kn">import</span> <span class="n">select</span><span class="p">,</span> <span class="n">groupby</span>

<span class="nb">list</span><span class="p">(</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
    <span class="o">|</span> <span class="n">groupby</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&#34;å¶æ•°&#34;</span> <span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span> <span class="k">else</span> <span class="s2">&#34;å¥‡æ•°&#34;</span><span class="p">)</span>
    <span class="o">|</span> <span class="n">select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">{</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> 
                                   <span class="o">|</span> <span class="n">where</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">)</span>
                                  <span class="p">)</span>
                       <span class="p">}</span>
            <span class="p">)</span>
<span class="p">)</span>
</code></pre></div><pre><code>[{'å¶æ•°': [4, 6, 8]}, {'å¥‡æ•°': [3, 5, 7, 9]}]
</code></pre>
<h2 id="dedup">dedup</h2>
<p>ä½¿ç”¨Keyå¯¹listæ•°æ®è¿›è¡Œå»é‡</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pipe</span> <span class="kn">import</span> <span class="n">dedup</span>

<span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

<span class="nb">list</span><span class="p">(</span><span class="n">arr</span> <span class="o">|</span> <span class="n">dedup</span><span class="p">)</span>
</code></pre></div><pre><code>[1, 2, 3, 4, 5, 6, 7, 9]
</code></pre>
<p>è¿™çœ‹èµ·æ¥æ²¡å•¥æ–°æ„ï¼Œæ¯•ç«Ÿpythonå†…ç½®çš„setå‡½æ•°å³å¯å®ç°åˆšåˆšçš„éœ€æ±‚ã€‚ç„¶è€Œï¼Œdedupé€šè¿‡keyè·å¾—åˆ—è¡¨ä¸­çš„å”¯ä¸€å…ƒç´ ã€‚</p>
<p>ä¾‹å¦‚ï¼Œ<strong>è·å¾—å°äº5çš„å”¯ä¸€å…ƒç´ ï¼Œ ä¸”å¦ä¸€ä¸ªå…ƒç´ å¤§äºæˆ–ç­‰äº5</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pipe</span> <span class="kn">import</span> <span class="n">dedup</span>

<span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

<span class="nb">list</span><span class="p">(</span><span class="n">arr</span> <span class="o">|</span> <span class="n">dedup</span><span class="p">(</span><span class="k">lambda</span> <span class="n">key</span><span class="p">:</span> <span class="n">key</span><span class="o">&lt;</span><span class="mi">5</span><span class="p">))</span>
</code></pre></div><pre><code>[1, 5]
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pipe</span> <span class="kn">import</span> <span class="n">traverse</span><span class="p">,</span> <span class="n">select</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;apple&#34;</span><span class="p">,</span> <span class="s2">&#34;count&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;orange&#34;</span><span class="p">,</span> <span class="s2">&#34;count&#34;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;grape&#34;</span><span class="p">,</span> <span class="s2">&#34;count&#34;</span><span class="p">:</span> <span class="kc">None</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;orange&#34;</span><span class="p">,</span> <span class="s2">&#34;count&#34;</span><span class="p">:</span> <span class="mi">7</span><span class="p">}</span>
<span class="p">]</span>

<span class="nb">list</span><span class="p">(</span>
    <span class="n">data</span>
    <span class="o">|</span> <span class="n">dedup</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">fruit</span><span class="p">:</span> <span class="n">fruit</span><span class="p">[</span><span class="s2">&#34;name&#34;</span><span class="p">])</span>
    <span class="o">|</span> <span class="n">select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">fruit</span><span class="p">:</span> <span class="n">fruit</span><span class="p">[</span><span class="s2">&#34;count&#34;</span><span class="p">])</span>
    <span class="o">|</span> <span class="n">where</span><span class="p">(</span><span class="k">lambda</span> <span class="n">count</span><span class="p">:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="nb">int</span><span class="p">))</span>
<span class="p">)</span>
</code></pre></div><pre><code>[2, 4]
</code></pre>
<br>
<h1 id="äº†è§£è¯¾ç¨‹">äº†è§£è¯¾ç¨‹</h1>
<div style="text-align: center;">
<figure >
    <a href="https://m.qlchat.com/wechat/page/channel-intro?channelId=2000015158133596">
        <img src="/images/bg/management_data_mining_with_python_course.png" width="100%" />
    </a>
    <figcaption><small><i>ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è´­ä¹°è¯¾ç¨‹</i></small></figcaption>
</figure>
</div>
<p><a href="https://textdata.cn/blog/management_python_course/">ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>automaæ’ä»¶|æ— ç¼–ç¨‹åŸºç¡€ä¹Ÿå¯è‡ªåŠ¨åŒ–åŠå…¬</title>
      <link>https://hidadeng.github.io/blog/automa_rpa/</link>
      <pubDate>Wed, 27 Oct 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/automa_rpa/</guid>
      <description>automaä»è‡ªåŠ¨å¡«å†™è¡¨å•ã€æ‰§è¡Œé‡å¤æ€§ä»»åŠ¡ã€æˆªå–å±å¹•æˆªå›¾åˆ°æŠ“å–ç½‘ç«™æ•°æ®ï¼Œæ‚¨æƒ³ä½¿ç”¨æ­¤æ‰©å±•ç¨‹åºåšä»€ä¹ˆå–å†³äºæ‚¨ã€‚æ‚¨ç”šè‡³å¯ä»¥å®‰æ’è‡ªåŠ¨åŒ–æ‰§è¡Œçš„æ—¶é—´ã€‚</description>
      <content:encoded><![CDATA[<p>å¦‚æœå¤§å®¶ä¹‹å‰äº†è§£seleniumåº“ï¼Œé‚£ä¹ˆantomaä¸ç”¨è¿‡å¤šä»‹ç»ï¼Œæ‚¨å°±èƒ½çŸ¥é“taæ˜¯åšæµè§ˆå™¨è‡ªåŠ¨åŒ–çš„ã€‚automaé€šè¿‡ç‚¹å‡»è¿æ¥å¡ç‰‡å®ç°æµè§ˆå™¨çš„è‡ªåŠ¨åŒ–è¿è¡Œã€‚</p>
<p>æ²¡æœ‰åšä¸åˆ°ï¼Œåªæœ‰æƒ³ä¸åˆ°ã€‚ä»è‡ªåŠ¨å¡«å†™è¡¨å•ã€æ‰§è¡Œé‡å¤æ€§ä»»åŠ¡ã€æˆªå–å±å¹•æˆªå›¾åˆ°æŠ“å–ç½‘ç«™æ•°æ®ï¼Œæ‚¨æƒ³ä½¿ç”¨æ­¤æ‰©å±•ç¨‹åºåšä»€ä¹ˆå–å†³äºæ‚¨ã€‚æ‚¨ç”šè‡³å¯ä»¥å®‰æ’è‡ªåŠ¨åŒ–æ‰§è¡Œçš„æ—¶é—´ã€‚ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸‹å¼€å‘è€…åˆ¶ä½œçš„æ“ä½œè§†é¢‘</p>
<video id="video" controls="" preload="none" poster="å°é¢">
  <source id="mp4" src="Automa.mp4" type="video/mp4">
</videos>
<p>ä»è§†é¢‘ä¸­ï¼Œå¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œå·¥ä½œæµå¯æ‰§è¡Œè¡¨å•å¡«å†™ã€å±å¹•æˆªå›¾ã€ç½‘ç«™æ•°æ®æŠ“å–ç­‰å„ç§é‡å¤æ€§å·¥ä½œã€‚å¦‚æœå¤§å®¶æ„Ÿå…´è¶£ï¼Œå¯ä»¥è¯•ç€ç”¨ä¸€ä¸‹<strong>automa</strong>ã€‚</p>
<p><br><br></p>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>KeyBERT | å…³é”®è¯å‘ç°</title>
      <link>https://hidadeng.github.io/blog/keybert_tutorial/</link>
      <pubDate>Wed, 27 Oct 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/keybert_tutorial/</guid>
      <description>ä½¿ç”¨ BERT åµŒå…¥ å’Œ ç®€å•ä½™å¼¦ç›¸ä¼¼åº¦ æ¥æŸ¥æ‰¾æ–‡æ¡£ä¸­ä¸æ–‡æ¡£æœ¬èº«æœ€ç›¸ä¼¼çš„çŸ­è¯­ï¼Œè‡ªåŠ¨æŒ–æ˜æ–‡æœ¬ä¸­çš„å…³é”®è¯</description>
      <content:encoded><![CDATA[<p>å°½ç®¡å·²ç»æœ‰å¾ˆå¤šæ–¹æ³•å¯ç”¨äºå…³é”®å­—ç”Ÿæˆï¼ˆä¾‹å¦‚ï¼ŒRakeã€YAKE!ã€TF-IDF ç­‰ï¼‰ï¼Œä½†æˆ‘æƒ³åˆ›å»ºä¸€ä¸ªéå¸¸åŸºæœ¬ä½†åŠŸèƒ½å¼ºå¤§çš„æ–¹æ³•æ¥æå–å…³é”®å­—å’Œå…³é”®çŸ­è¯­ã€‚è¿™å°±æ˜¯ KeyBERT çš„ç”¨æ­¦ä¹‹åœ°ï¼å®ƒä½¿ç”¨ <strong>BERT åµŒå…¥</strong> å’Œ <strong>ç®€å•ä½™å¼¦ç›¸ä¼¼åº¦</strong> æ¥æŸ¥æ‰¾æ–‡æ¡£ä¸­ä¸æ–‡æ¡£æœ¬èº«æœ€ç›¸ä¼¼çš„çŸ­è¯­ã€‚</p>
<p>KeyBERTæ­¥éª¤</p>
<ol>
<li>é¦–å…ˆä½¿ç”¨ BERT æå–æ–‡æ¡£åµŒå…¥ä»¥è·å¾—<strong>æ–‡æ¡£çº§å‘é‡è¡¨ç¤º</strong>ã€‚</li>
<li>éšåï¼Œä¸º N-gram è¯/çŸ­è¯­æå–<strong>è¯å‘é‡</strong>ã€‚</li>
<li>ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦æ¥æ‰¾åˆ°ä¸æ–‡æ¡£æœ€ç›¸ä¼¼çš„å•è¯/çŸ­è¯­ã€‚</li>
<li>æœ€åå¯ä»¥å°†æœ€ç›¸ä¼¼çš„è¯è¯†åˆ«ä¸ºæœ€èƒ½æè¿°æ•´ä¸ªæ–‡æ¡£çš„è¯ã€‚</li>
</ol>
<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="KeyBERT%E5%AD%A6%E4%B9%A0.ipynb">click to download the code</a></p>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">keybert</span><span class="o">==</span><span class="mf">0.5.0</span>
</code></pre></div><br>
<h2 id="åˆå§‹åŒ–æ¨¡å‹">åˆå§‹åŒ–æ¨¡å‹</h2>
<p>KeyBERTåº“éœ€è¦å®‰è£…é…ç½®spacyè¯­è¨€æ¨¡å‹</p>
<p>å…·ä½“å‚è€ƒ<strong>å…¬ä¼—å·ï¼šå¤§é‚“å’Œä»–çš„Python</strong> 2021-10-29 çš„æ¨æ–‡ æŸ¥çœ‹spacyé…ç½®æ–¹æ³•</p>
<p>åˆå§‹åŒ–æ¨¡å‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">keybert</span> <span class="kn">import</span> <span class="n">KeyBERT</span>
<span class="kn">import</span> <span class="nn">spacy</span>
<span class="kn">import</span> <span class="nn">jieba</span>


<span class="n">zh_model</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&#34;zh_core_web_sm&#34;</span><span class="p">)</span>
<span class="n">bertModel</span> <span class="o">=</span> <span class="n">KeyBERT</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">zh_model</span><span class="p">)</span>
</code></pre></div><br>
<h2 id="å‡†å¤‡æ•°æ®">å‡†å¤‡æ•°æ®</h2>
<p>ä¸­æ–‡æµ‹è¯•æ•°æ®éœ€è¦å…ˆåˆ†è¯ï¼Œè€Œåæ„é€ æˆç±»è‹±æ–‡çš„è¯­è¨€ç»“æ„(ç”¨ç©ºæ ¼é—´éš”çš„æ–‡æœ¬)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># æµ‹è¯•æ•°æ®</span>
<span class="n">doc</span> <span class="o">=</span>  <span class="s2">&#34;&#34;&#34;æ—¶å€¼10æœˆ25æ—¥æŠ—ç¾æ´æœçºªå¿µæ—¥ï¼Œã€Šé•¿æ´¥æ¹–ã€‹ç‰‡æ–¹å‘å¸ƒäº†â€œçºªå¿µä¸­å›½äººæ°‘å¿—æ„¿å†›æŠ—ç¾æ´æœå‡ºå›½ä½œæˆ˜71å‘¨å¹´ç‰¹åˆ«çŸ­ç‰‡â€ï¼Œå†æ¬¡å‘ä¼Ÿå¤§çš„å¿—æ„¿å†›è‡´æ•¬ï¼
</span><span class="s2">ã€€ã€€ç”µå½±ã€Šé•¿æ´¥æ¹–ã€‹å…¨æƒ…å…¨æ™¯åœ°è¿˜åŸäº†71å¹´å‰æŠ—ç¾æ´æœæˆ˜åœºä¸Šé‚£åœºå²è¯—æˆ˜å½¹ï¼Œå¿—æ„¿å†›å¥‹ä¸é¡¾èº«çš„è‹±å‹‡ç²¾ç¥ä»¤è§‚ä¼—æ„Ÿå¹ï¼šâ€œå²æœˆå³¥åµ˜è‹±é›„ä¸ç­ï¼Œä¸¹å¿ƒé“éª¨å†›é­‚æ°¸å­˜ï¼â€å½±ç‰‡ä¸Šæ˜ ä»¥æ¥ç¥¨æˆ¿å±¡åˆ›æ–°é«˜ï¼Œç›®å‰çªç ´53äº¿å…ƒï¼Œæš‚åˆ—ä¸­å›½å½±å²ç¥¨æˆ¿æ€»æ¦œç¬¬ä¸‰åã€‚
</span><span class="s2">ã€€ã€€å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¿™éƒ¨å½±ç‰‡çš„å¾ˆå¤šä¸»åˆ›æˆ–æœ‰å†›äººçš„è¡€è„‰ï¼Œæˆ–æœ‰å½“å…µçš„ç»å†ï¼Œæˆ–è€…å®¶äººæ˜¯å†›äººã€‚æèµ·è¿™äº›ä»–ä»¬ä¹Ÿå……æ»¡è‡ªè±ªï¼Œå½±ç‰‡æ€»ç›‘åˆ¶é»„å»ºæ–°ç§°ï¼šâ€œå½“å…µä»¥åä¼šæœ‰ä¸€ç§ç‰¹åˆ«èƒ½åšæŒçš„åŠ²å„¿ã€‚â€é¥°æ¼”é›·å…¬çš„èƒ¡å†›é€éœ²ï¼šâ€œæˆ‘çˆ¶äº²æ›¾ç»å‚åŠ è¿‡æŠ—ç¾æ´æœï¼Œè¿˜å¾—äº†ä¸€ä¸ªä¸‰ç­‰åŠŸã€‚â€å½±ç‰‡å†å²é¡¾é—®ç‹æ ‘å¢è¡¨ç¤ºï¼šâ€œæˆ‘å½“äº†äº”åå¤šå¹´çš„å…µï¼Œæˆ‘çš„è€éƒ¨é˜Ÿå°±æ˜¯ä¸Šç”˜å²­ä¸Šä¸‹æ¥çš„ï¼Œé‚£äº›è€å…µéƒ½æ˜¯æˆ‘çš„å¶åƒã€‚â€
</span><span class="s2">ã€€ã€€â€œèº«å…ˆå£«å’å«åå¤å®¶å›½ï¼Œè¡€æˆ˜æ— ç•æŠ¤å±±æ²³æ— æ™ã€‚â€ç‰‡ä¸­é¥°æ¼”ä¸ƒè¿è¿é•¿ä¼åƒé‡Œçš„å´äº¬æ„Ÿå¹ï¼šâ€œè¦æ°¸è¿œè®°ä½è¿™äº›å…ˆçƒˆä»¬ï¼Œä»–ä»¬ç»™æˆ‘ä»¬å¸¦æ¥ä»Šå¤©çš„å’Œå¹³ã€‚æ„Ÿè°¢ä»–ä»¬çš„ä»˜å‡ºï¼Œæ‰è®©æˆ‘ä»¬æœ‰ä»Šå¤©çš„å¹¸ç¦ç”Ÿæ´»ã€‚â€é¥°æ¼”æ–°å…µä¼ä¸‡é‡Œçš„æ˜“çƒŠåƒçºè¡¨ç¤ºï¼šâ€œæˆ˜äº‰çš„æ®‹é…·ã€ç¢¾å‹å¼çš„ä¼¤å®³ï¼Œå…¶å®æˆ‘ä»¬ç°åœ¨çš„å¹´è½»äººå‡ ä¹å¾ˆéš¾èƒ½ä½“ä¼šåˆ°ï¼Œå¸Œæœ›å¤§å®¶çœ‹å®Œç”µå½±åèƒ½æ˜ç™½ï¼Œæ˜¯é‚£äº›å…ˆè¾ˆä»¬çš„ç‰ºç‰²å¥‰çŒ®ï¼Œæ¢æ¥äº†æˆ‘ä»¬çš„ç°åœ¨ã€‚â€
</span><span class="s2">ã€€ã€€å½±ç‰‡å¯¹æˆ˜äº‰ç¾¤åƒçš„æ¢å¼˜å‘ˆç°ï¼Œå¯¹ä¸ªä½“å‘½è¿çš„æ·±åˆ‡å…³æ€€ï¼Œä»¤è®¸å¤šè§‚ä¼—æ— æ³•æ§åˆ¶è‡ªå·±çš„çœ¼æ³ªï¼Œè§‚ä¼—ç§°ï¼šâ€œå½“çœ‹åˆ°å½±ç‰‡ä¸­çš„æƒŠé™©æˆ˜æ–—åœºé¢ï¼Œçœ‹åˆ°è‹±é›„ä»¬å£®æ€€æ¿€çƒˆçš„æ‹¼æ€ï¼Œä¸ºå›½æèº¯çš„è‹±å‹‡æ— ç•å’Œæ— æ‚”ä»˜å‡ºï¼Œæˆ‘æ˜ç™½äº†ä¸ºä»€ä¹ˆè¯´ä»Šå¤©çš„å¹¸ç¦ç”Ÿæ´»æ¥ä¹‹ä¸æ˜“ã€‚â€ï¼ˆè®°è€… ç‹é‡‘è·ƒï¼‰
</span><span class="s2">        &#34;&#34;&#34;</span>


<span class="n">doc</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">jieba</span><span class="o">.</span><span class="n">lcut</span><span class="p">(</span><span class="n">doc</span><span class="p">))</span>


<span class="c1"># å…³é”®è¯æå–</span>
<span class="n">keywords</span> <span class="o">=</span> <span class="n">bertModel</span><span class="o">.</span><span class="n">extract_keywords</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> 
                                      <span class="n">keyphrase_ngram_range</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                                      <span class="n">stop_words</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                      <span class="n">top_n</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">keywords</span>
</code></pre></div><pre><code>[('é“éª¨', 0.5028),
 ('çºªå¿µæ—¥', 0.495),
 ('ä¸¹å¿ƒ', 0.4894),
 ('æˆ˜å½¹', 0.4869),
 ('å½±å²', 0.473),
 ('çˆ¶äº²', 0.4576),
 ('ç¥¨æˆ¿', 0.4571),
 ('å¶åƒ', 0.4497),
 ('ç²¾ç¥', 0.4436),
 ('å®¶å›½', 0.4373)]
</code></pre>
<br>
<h2 id="å¸¸ç”¨å‚æ•°">å¸¸ç”¨å‚æ•°</h2>
<p><strong>bertModel.extract_keywords(docs, keyphrase_ngram_range, stop_words, top_n)</strong></p>
<ul>
<li><strong>docs</strong> æ–‡æ¡£å­—ç¬¦ä¸²ï¼ˆç©ºæ ¼é—´éš”è¯è¯­çš„å­—ç¬¦ä¸²ï¼‰</li>
<li><strong>keyphrase_ngram_range</strong> è®¾ç½®ngramï¼Œé»˜è®¤(1, 1)</li>
<li><strong>stop_words</strong> åœç”¨è¯åˆ—è¡¨</li>
<li><strong>top_n</strong> æ˜¾ç¤ºå‰nä¸ªå…³é”®è¯ï¼Œé»˜è®¤5</li>
<li><strong>highlight</strong> å¯è§†åŒ–æ ‡äº®å…³é”®è¯ï¼Œé»˜è®¤False</li>
<li>use_maxsum: é»˜è®¤False;æ˜¯å¦ä½¿ç”¨Max Sum Similarityä½œä¸ºå…³é”®è¯æå–æ ‡å‡†ï¼Œ</li>
<li>use_mmr: é»˜è®¤False;æ˜¯å¦ä½¿ç”¨Maximal Marginal Relevance (MMR) ä½œä¸ºå…³é”®è¯æå–æ ‡å‡†</li>
<li>diversity å¦‚æœuse_mmr=Trueï¼Œå¯ä»¥è®¾ç½®è¯¥å‚æ•°ã€‚å‚æ•°å–å€¼èŒƒå›´ä»0åˆ°1</li>
</ul>
<br>
<p>å¯¹äº<strong>keyphrase_ngram_range</strong>å‚æ•°ï¼Œ</p>
<ul>
<li>(1, 1) åªå•ä¸ªè¯ï¼Œ å¦‚&quot;æŠ—ç¾æ´æœ&quot;, &ldquo;çºªå¿µæ—¥&quot;æ˜¯å­¤ç«‹çš„ä¸¤ä¸ªè¯</li>
<li>(2, 2) è€ƒè™‘è¯ç»„ï¼Œ å¦‚å‡ºç°æœ‰æ„ä¹‰çš„è¯ç»„ &ldquo;æŠ—ç¾æ´æœ çºªå¿µæ—¥&rdquo;</li>
<li>(1, 2) åŒæ—¶è€ƒè™‘ä»¥ä¸Šä¸¤è€…æƒ…å†µ</li>
</ul>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># å…³é”®è¯æå–</span>
<span class="n">keywords</span> <span class="o">=</span> <span class="n">bertModel</span><span class="o">.</span><span class="n">extract_keywords</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> 
                                      <span class="n">keyphrase_ngram_range</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                                      <span class="n">stop_words</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                      <span class="n">diversity</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> 
                                      <span class="n">top_n</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">keywords</span>
</code></pre></div><pre><code>[('å½±ç‰‡ æ€»ç›‘åˆ¶', 0.5412),
 ('ä¸¹å¿ƒ é“éª¨', 0.5339),
 ('æŠ—ç¾æ´æœ çºªå¿µæ—¥', 0.5295),
 ('é•¿æ´¥æ¹– ç‰‡æ–¹', 0.5252),
 ('å¿—æ„¿å†› è‡´æ•¬', 0.5207),
 ('è€å…µ å¶åƒ', 0.5192),
 ('ç¥¨æˆ¿ åˆ›æ–°', 0.5108),
 ('å†›äºº è¡€è„‰', 0.5084),
 ('å®¶å›½ è¡€æˆ˜', 0.4946),
 ('å®¶äºº å†›äºº', 0.4885)]
</code></pre>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#å¯è§†åŒ–</span>
<span class="n">keywords</span> <span class="o">=</span> <span class="n">bertModel</span><span class="o">.</span><span class="n">extract_keywords</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> 
                                      <span class="n">keyphrase_ngram_range</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                                      <span class="n">stop_words</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                      <span class="n">highlight</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                      <span class="n">top_n</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</code></pre></div><p><img loading="lazy" src="highlight.png" alt=""  />
</p>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># å…³é”®è¯æå–</span>
<span class="n">keywords</span> <span class="o">=</span> <span class="n">bertModel</span><span class="o">.</span><span class="n">extract_keywords</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> 
                                      <span class="n">keyphrase_ngram_range</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                                      <span class="n">stop_words</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                      <span class="n">use_mmr</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">diversity</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> 
                                      <span class="n">top_n</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="n">keywords</span>
</code></pre></div><pre><code>[('å½±ç‰‡ æ€»ç›‘åˆ¶', 0.5412),
 ('é•¿æ´¥æ¹– ç‰‡æ–¹', 0.5252),
 ('æŠ—ç¾æ´æœ çºªå¿µæ—¥', 0.5295),
 ('ä¸¹å¿ƒ é“éª¨', 0.5339),
 ('å¿—æ„¿å†› è‡´æ•¬', 0.5207),
 ('è€å…µ å¶åƒ', 0.5192),
 ('ç¥¨æˆ¿ åˆ›æ–°', 0.5108),
 ('å†›äºº è¡€è„‰', 0.5084),
 ('å®¶å›½ è¡€æˆ˜', 0.4946),
 ('å®¶äºº å†›äºº', 0.4885)]
</code></pre>
<br>
<h2 id="è‹±æ–‡keybert">è‹±æ–‡KeyBERT</h2>
<p>åŒæ ·éœ€è¦é…ç½®spacyï¼Œå‚è€ƒ<strong>å…¬ä¼—å·ï¼šå¤§é‚“å’Œä»–çš„Python</strong> 2021-10-29 çš„æ¨æ–‡ æŸ¥çœ‹spacyé…ç½®æ–¹æ³•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">keybert</span> <span class="kn">import</span> <span class="n">KeyBERT</span>
<span class="kn">import</span> <span class="nn">spacy</span>

<span class="n">en_model</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&#34;en_core_web_sm&#34;</span><span class="p">)</span>

<span class="n">doc</span> <span class="o">=</span> <span class="s2">&#34;&#34;&#34;
</span><span class="s2">         Supervised learning is the machine learning task of learning a function that
</span><span class="s2">         maps an input to an output based on example input-output pairs. It infers a
</span><span class="s2">         function from labeled training data consisting of a set of training examples.
</span><span class="s2">         In supervised learning, each example is a pair consisting of an input object
</span><span class="s2">         (typically a vector) and a desired output value (also called the supervisory signal). 
</span><span class="s2">         A supervised learning algorithm analyzes the training data and produces an inferred function, 
</span><span class="s2">         which can be used for mapping new examples. An optimal scenario will allow for the 
</span><span class="s2">         algorithm to correctly determine the class labels for unseen instances. This requires 
</span><span class="s2">         the learning algorithm to generalize from the training data to unseen situations in a 
</span><span class="s2">         &#39;reasonable&#39; way (see inductive bias).
</span><span class="s2">      &#34;&#34;&#34;</span>
<span class="n">kw_model</span> <span class="o">=</span> <span class="n">KeyBERT</span><span class="p">()</span>
<span class="n">keywords</span> <span class="o">=</span> <span class="n">kw_model</span><span class="o">.</span><span class="n">extract_keywords</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">keyphrase_ngram_range</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">keywords</span>
</code></pre></div><p>Run</p>
<pre><code>[('supervised learning', 0.6779),
 ('supervised', 0.6676),
 ('signal supervised', 0.6152),
 ('examples supervised', 0.6112),
 ('labeled training', 0.6013)]
</code></pre>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>BERTopicåº“ | ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹åšè¯é¢˜å»ºæ¨¡</title>
      <link>https://hidadeng.github.io/blog/bertopic_tutorial/</link>
      <pubDate>Tue, 26 Oct 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/bertopic_tutorial/</guid>
      <description>ä½¿ç”¨BERTä¸»é¢˜å»ºæ¨¡æŠ€æœ¯,å¯ä»¥å¯¹ç»ç®¡ç­‰é¢†åŸŸæ–‡æœ¬æ•°æ®è¿›è¡Œä¸»é¢˜(è¯é¢˜)å»ºæ¨¡ã€‚æ•ˆæœå ªæ¯”LDAï¼Œä½†æ¯”LDAæ™ºèƒ½</description>
      <content:encoded><![CDATA[<p>BERTæ˜¯è‡ªç„¶è¯­è¨€å¤„ç†é¢†åŸŸæœ€æ–°çš„è¯å‘é‡æŠ€æœ¯ï¼Œè€ŒBERTopic æ˜¯åŸºäºBERTè¯å‘é‡è¿›è¡Œä¸»é¢˜å»ºæ¨¡æŠ€æœ¯ï¼Œå®ƒåˆ©ç”¨ Transformer å’Œ c-TF-IDF æ¥åˆ›å»ºå¯†é›†çš„é›†ç¾¤ï¼Œå…è®¸è½»æ¾è§£é‡Šä¸»é¢˜ï¼ŒåŒæ—¶åœ¨ä¸»é¢˜æè¿°ä¸­ä¿ç•™é‡è¦è¯ã€‚</p>
<p>BERTopicäº®ç‚¹</p>
<ul>
<li>æ”¯æŒå¼•å¯¼å¼Guided</li>
<li>æ”¯æŒï¼ˆåŠï¼‰ç›‘ç£å¼</li>
<li>æ”¯æŒåŠ¨æ€ä¸»é¢˜ã€‚</li>
<li>æ”¯æŒå¯è§†åŒ–</li>
</ul>
<br>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">bertopic</span><span class="o">==</span><span class="mf">0.10.0</span>
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">cntext</span><span class="o">==</span><span class="mf">1.6.5</span>
</code></pre></div><p><br><br></p>
<h2 id="å‡†å¤‡æ•°æ®">å‡†å¤‡æ•°æ®</h2>
<p>è¿™é‡Œä½¿ç”¨çš„æ–°é—»æ•°æ®é›†ï¼Œ å…±2000æ¡ã€‚ æ–°é—»ç±»åˆ«æ¶µ <code>'å¨±ä¹', 'æ•™è‚²', 'æ¸¸æˆ', 'è´¢ç»', 'æ—¶æ”¿', 'æ—¶å°š', 'ç§‘æŠ€', 'ä½“è‚²', 'å®¶å±…', 'æˆ¿äº§'</code>
è¿™é‡Œå‡è®¾å¤§å®¶ä¸çŸ¥é“æœ‰10ç±»æ–°é—»é¢˜æï¼Œ æ„å»ºæ¨¡å‹çš„æ—¶å€™ä¸ä¼šç”¨åˆ°labelå­—æ®µçš„æ•°æ®ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;cnews.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p><img loading="lazy" src="img/df.png" alt=""  />
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># æ–°é—»é¢˜æ</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>

<span class="c1">#è®°å½•æ•°</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span>
</code></pre></div><p>Run</p>
<pre><code>['å¨±ä¹' 'æ•™è‚²' 'æ¸¸æˆ' 'è´¢ç»' 'æ—¶æ”¿' 'æ—¶å°š' 'ç§‘æŠ€' 'ä½“è‚²' 'å®¶å±…' 'æˆ¿äº§']
2000
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># å„ç±»é¢˜æçš„æ–°é—»è®°å½•æ•°</span>
<span class="n">df</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">æ—¶æ”¿    120
ç§‘æŠ€    106
æ—¶å°š    106
è´¢ç»    105
å®¶å±…    103
æ•™è‚²     97
å¨±ä¹     96
ä½“è‚²     95
æˆ¿äº§     87
æ¸¸æˆ     85
</code></pre></div><br>
<p>è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªæ¸…æ´—æ•°æ®å‡½æ•°clean_textï¼Œéœ€è¦æ³¨æ„BERTopicéœ€è¦å…ˆå°†ä¸­æ–‡åˆ†è¯æ”¹é€ æˆç±»ä¼¼è‹±æ–‡æ–‡æœ¬æ ¼å¼ï¼ˆç”¨ç©ºæ ¼é—´éš”è¯è¯­ï¼‰</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">jieba</span>
<span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="n">stopwords</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">load_pkl_dict</span><span class="p">(</span><span class="s1">&#39;STOPWORDS.pkl&#39;</span><span class="p">)[</span><span class="s1">&#39;STOPWORDS&#39;</span><span class="p">][</span><span class="s1">&#39;chinese&#39;</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">clean_text</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">jieba</span><span class="o">.</span><span class="n">lcut</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span> <span class="k">if</span> <span class="n">w</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">stopwords</span><span class="p">]</span>
    <span class="k">return</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>


<span class="n">test</span> <span class="o">=</span> <span class="s2">&#34;äº‘å—æ°¸å–„å¿çº§åœ°éœ‡å·²è‡´äººä¼¤é—´æ°‘æˆ¿å—æŸä¸­æ–°ç½‘æœˆæ—¥ç”µæ®äº‘å—æ˜­é€šå¸‚é˜²éœ‡å‡ç¾å±€å®˜æ–¹ç½‘ç«™æ¶ˆæ¯æˆªè‡³æ—¥æ—¶äº‘å—æ˜­é€šæ°¸å–„å¿çº§åœ°éœ‡å·²é€ æˆäººå—ä¼¤å…¶ä¸­é‡ä¼¤äººè½»ä¼¤äººå·²å…¨éƒ¨é€åŒ»é™¢æ•‘æ²»æ°‘æˆ¿å—æŸæˆ·é—´å€’å¡Œæˆ·é—´ä¸ªä¹¡é•‡æ‰€å­¦æ ¡ä¸åŒç¨‹åº¦å—æŸç›®å‰è¢«æŸæ¯ç”µåŠ›äº¤é€šé€šè®¯è®¾æ–½å·²å…¨éƒ¨æŠ¢é€šä¿®å¤å½“åœ°å·²è°ƒæ‹¨å¸ç¯·é¡¶ç´§æ€¥è½¬ç§»ä¸‡äººæœˆæ—¥æ—¶åˆ†äº‘å—æ˜­é€šæ°¸å–„å¿å‘ç”Ÿé‡Œæ°çº§åœ°éœ‡éœ‡æºæ·±åº¦å…¬é‡Œå½“åœ°éœ‡æ„Ÿå¼ºçƒˆæ­¤å¤–æˆéƒ½ç­‰å››å·å¤šåœ°ä¹Ÿæœ‰æ˜æ˜¾éœ‡æ„Ÿ&#34;</span>

<span class="n">clean_text</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">&#39;äº‘å— æ°¸å–„å¿ çº§ åœ°éœ‡ å·²è‡´ ä¼¤é—´ æ°‘æˆ¿ å—æŸ ä¸­æ–°ç½‘ æ—¥ç”µ äº‘å— æ˜­é€šå¸‚ é˜²éœ‡ å‡ç¾ å±€ å®˜æ–¹ç½‘ç«™ æ¶ˆæ¯ æ—¥æ—¶ äº‘å— æ˜­é€š æ°¸å–„å¿ çº§ åœ°éœ‡ é€ æˆ å—ä¼¤ é‡ä¼¤ è½»ä¼¤ é€ åŒ»é™¢ æ•‘æ²» æ°‘æˆ¿ å—æŸ æˆ·é—´ å€’å¡Œ æˆ·é—´ ä¹¡é•‡ å­¦æ ¡ ä¸åŒ ç¨‹åº¦ å—æŸ ç›®å‰ æŸæ¯ ç”µåŠ› äº¤é€š é€šè®¯ è®¾æ–½ æŠ¢é€š ä¿®å¤ è°ƒæ‹¨ å¸ç¯· é¡¶ ç´§æ€¥ è½¬ç§» ä¸‡äºº æ—¶åˆ† äº‘å— æ˜­é€š æ°¸å–„å¿ å‘ç”Ÿ é‡Œæ° çº§ åœ°éœ‡ éœ‡æº æ·±åº¦ å…¬é‡Œ éœ‡æ„Ÿ å¼ºçƒˆ æˆéƒ½ å››å· å¤šåœ° æ˜æ˜¾ éœ‡æ„Ÿ&#39;
</code></pre></div><p>å¯¹2000æ¡æ•°æ®è¿›è¡Œclean_textï¼Œå¾—åˆ°çš„ç»“æœå­˜å‚¨åˆ°contentå­—æ®µä¸­ã€‚</p>
<p>æˆ‘çš„macbookå†…å­˜16G, è¿è¡Œæ—¶é—´10s</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">df</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">clean_text</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div><p><img loading="lazy" src="img/df2.png" alt=""  />
</p>
<p><br><br></p>
<h2 id="è®­ç»ƒtopicæ¨¡å‹">è®­ç»ƒTopicæ¨¡å‹</h2>
<p>æ–‡æœ¬åˆ†ææ­¥éª¤åŒ…æ‹¬æ„å»ºç‰¹å¾å·¥ç¨‹å’Œè®­ç»ƒï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œç›´æ¥ä½¿ç”¨å¼€æºçš„é¢„è®­ç»ƒä¸­æ–‡è¯å‘é‡ï¼Œçœå»äº†ç‰¹å¾æ¨¡å‹çš„å­¦ä¹ æ—¶é—´ã€‚</p>
<p>é€‰å–çš„ä¸è®­ç»ƒæ¨¡å‹å‡ä¸ºword2vecæ ¼å¼ï¼Œè¿™æ ·æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨gensimå°†å…¶å¯¼å…¥ã€‚</p>
<table>
<thead>
<tr>
<th>æ¨¡å‹å</th>
<th>æ•°æ®</th>
<th>é¢„è®­ç»ƒæ¨¡å‹èµ„æºåœ°å€</th>
</tr>
</thead>
<tbody>
<tr>
<td>sgns.zhihu.words.bz2</td>
<td>çŸ¥ä¹</td>
<td>é“¾æ¥: <a href="https://pan.baidu.com/s/1BDxP28KL_23Odj9NWZGe-Q">https://pan.baidu.com/s/1BDxP28KL_23Odj9NWZGe-Q</a> æå–ç : n1qq</td>
</tr>
<tr>
<td>sgns.wiki.words.bz2</td>
<td>ä¸­æ–‡ç»´åŸºç™¾ç§‘</td>
<td>é“¾æ¥: <a href="https://pan.baidu.com/s/1B1sxHmPeIPJYiCuP1zrmMw">https://pan.baidu.com/s/1B1sxHmPeIPJYiCuP1zrmMw</a> æå–ç : hofj</td>
</tr>
<tr>
<td>sgns.financial.words.bz2</td>
<td>é‡‘è</td>
<td>é“¾æ¥: <a href="https://pan.baidu.com/s/1L_hmGjZMY2ExBn9Vfc_eRg">https://pan.baidu.com/s/1L_hmGjZMY2ExBn9Vfc_eRg</a> æå–ç : hhn6</td>
</tr>
<tr>
<td>sgns.renmin.words.bz2</td>
<td>äººæ°‘æ—¥æŠ¥</td>
<td>é“¾æ¥: <a href="https://pan.baidu.com/s/1VQIDrwZH3Y3Lpy4-smPutw">https://pan.baidu.com/s/1VQIDrwZH3Y3Lpy4-smPutw</a> æå–ç : 3b53</td>
</tr>
<tr>
<td>sgns.sougou.words.bz2</td>
<td>æœç‹—æ–°é—»</td>
<td>é“¾æ¥: <a href="https://pan.baidu.com/s/15nCaeB41mwK0ZVLrukXpFQ">https://pan.baidu.com/s/15nCaeB41mwK0ZVLrukXpFQ</a> æå–ç : 04en</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Note</strong>:</p>
<p>é™¤äº†è¡¨æ ¼å¤–çš„èµ„æºï¼Œè¿˜å¯ä»¥ä½¿ç”¨spacyç°æœ‰çš„é¢„è®­ç»ƒæ¨¡å‹ã€‚</p>
</blockquote>
<p>æœ¬æ–‡æ¡ˆä¾‹cnews.csvæ˜¯æ–°é—»ç±»æ•°æ®ï¼Œè¿™é‡Œæœ€å¥½é€‰æ‹©ä½¿ç”¨åŒæ ·ä¸ºæ–°é—»é¢˜æçš„æ–‡æœ¬è®­ç»ƒå‡ºçš„æ¨¡å‹ï¼Œè¿™æ ·BERTopicæ•ˆæœä¼šæ›´ç²¾å‡†ä¸€äº›ã€‚sgns.sougou.words.bz2æ˜¯ä½¿ç”¨æœç‹—æ–°é—»æ•°æ®è®­ç»ƒçš„è¯­è¨€æ¨¡å‹ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">gensim.models</span> <span class="kn">import</span> <span class="n">KeyedVectors</span>

<span class="n">chinese_sougou_news_models</span> <span class="o">=</span> <span class="n">KeyedVectors</span><span class="o">.</span><span class="n">load_word2vec_format</span><span class="p">(</span><span class="s1">&#39;sgns.sogou.word.bz2&#39;</span><span class="p">,</span> <span class="n">unicode_errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
<span class="n">chinese_sougou_news_models</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">&lt;gensim.models.keyedvectors.KeyedVectors at 0x7f93e5b8cc10&gt;
</code></pre></div><br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">bertopic</span> <span class="kn">import</span> <span class="n">BERTopic</span>


<span class="n">topic_model</span> <span class="o">=</span> <span class="n">BERTopic</span><span class="p">(</span><span class="n">language</span><span class="o">=</span><span class="s2">&#34;chinese (simplified)&#34;</span><span class="p">,</span> 
                       <span class="n">embedding_model</span><span class="o">=</span><span class="n">chinese_sougou_news_models</span><span class="p">,</span>
                       <span class="n">calculate_probabilities</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> 
                       <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="n">docs</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="c1">#2000æ¡è¿›è¡Œfit_transforméœ€è¦1min</span>
<span class="n">topics</span><span class="p">,</span> <span class="n">probs</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span>
</code></pre></div><pre><code>100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2000/2000 [01:31&lt;00:00, 21.91it/s]
2021-10-28 12:11:25,583 - BERTopic - Transformed documents to Embeddings
2021-10-28 12:11:34,582 - BERTopic - Reduced dimensionality with UMAP
2021-10-28 12:11:34,718 - BERTopic - Clustered UMAP embeddings with HDBSCAN


CPU times: user 1min 50s, sys: 7.7 s, total: 1min 57s
Wall time: 1min 43s
</code></pre>
<p><br><br></p>
<h2 id="ä¸»é¢˜æ¨¡å‹æ–¹æ³•">ä¸»é¢˜æ¨¡å‹æ–¹æ³•</h2>
<ul>
<li>topic_model.get_topic_info æŸ¥çœ‹å„ä¸»é¢˜ä¿¡æ¯</li>
<li>topic_model.find_topics(term, top_n=5)  æŸ¥æ‰¾termæœ€æœ‰å¯èƒ½æ‰€å±è¯é¢˜</li>
<li>topic_model.get_topic(0) æŸ¥çœ‹Topic 0çš„ç‰¹å¾è¯</li>
<li>topic_model.visualize_topics() è¯é¢˜é—´è·ç¦»çš„å¯è§†åŒ–</li>
<li>topic_model.visualize_distribution(probs[0]) æŸ¥çœ‹æŸæ¡æ–‡æœ¬çš„ä¸»é¢˜åˆ†å¸ƒ</li>
<li>topic_model.visualize_hierarchy(top_n_topics=20) ä¸»é¢˜å±‚æ¬¡èšç±»å¯è§†åŒ–</li>
<li>topic_model.visualize_barchart(topics=[1]) æ˜¾ç¤ºä¸»é¢˜1çš„è¯æ¡å½¢å›¾</li>
<li>topic_model.visualize_heatmap(n_clusters=10) ä¸»é¢˜ç›¸ä¼¼åº¦çƒ­åŠ›å›¾</li>
<li>topic_model.visualize_term_rank() å¯è§†åŒ–è¯è¯­</li>
<li>topic_model.save()  ä¿å­˜ä¸»é¢˜æ¨¡å‹</li>
<li>topic_model.reduce_topics()  å‹ç¼©ä¸»é¢˜ä¸ªæ•°(åˆå¹¶ç›¸è¿‘çš„ä¸»é¢˜)</li>
</ul>
<h3 id="get_topic_info">.get_topic_info()</h3>
<p>æŸ¥çœ‹BERTopicåŸºäºcnews.csvæ•°æ®ï¼Œ è·‘å‡ºçš„å„ä¸»é¢˜</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">topic_model</span><span class="o">.</span><span class="n">get_topic_info</span><span class="p">()</span>
</code></pre></div><p><img loading="lazy" src="img/get_topic_info.png" alt=""  />
</p>
<br>
<h3 id="find_topicsterm">.find_topics(term)</h3>
<p>æŸ¥çœ‹ä¸è¯è¯­ã€æŠ•èµ„ã€‘æœ€ç›¸å…³çš„ä¸»é¢˜ï¼Œè¿”å›å€™é€‰çš„æœ€ç›¸æ€çš„5ä¸ªä¸»é¢˜id</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#</span>
<span class="n">similar_topics</span><span class="p">,</span> <span class="n">similarity</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">find_topics</span><span class="p">(</span><span class="s2">&#34;æŠ•èµ„&#34;</span><span class="p">,</span> <span class="n">top_n</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">similar_topics</span>
</code></pre></div><p>Run</p>
<pre><code>[3, 9, 8, 10, 4]
</code></pre>
<br>
<h3 id="get_topic">.get_topic()</h3>
<p>æŸ¥çœ‹idä¸º3çš„ä¸»é¢˜ä¿¡æ¯ï¼ˆä¸»é¢˜è¯åŠæƒé‡ï¼‰</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">topic_model</span><span class="o">.</span><span class="n">get_topic</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[(&#39;åŸºé‡‘&#39;, 0.15109221307919193),
 (&#39;æŠ•èµ„&#39;, 0.042856192509064),
 (&#39;å…¬å¸&#39;, 0.039785278320496976),
 (&#39;å¸‚åœº&#39;, 0.037072163603417835),
 (&#39;è‚¡ç¥¨&#39;, 0.03230913401086524),
 (&#39;å‹åŸºé‡‘&#39;, 0.02721898070238429),
 (&#39;æ”¶ç›Š&#39;, 0.025435672141638468),
 (&#39;æŠ•èµ„è€…&#39;, 0.024633503649868493),
 (&#39;ç»ç†&#39;, 0.02458550023931051),
 (&#39;å‘è¡Œ&#39;, 0.022672639068067168)]
</code></pre></div><br>
<h3 id="visualize_topics">.visualize_topics()</h3>
<p>å¯è§†åŒ–ä¸»é¢˜é—´è·ç¦»</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">visualize_topics1</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_topics</span><span class="p">()</span>
<span class="c1">#å¯è§†åŒ–ç»“æœä¿å­˜è‡³htmlä¸­ï¼Œå¯ä»¥åŠ¨æ€æ˜¾ç¤ºä¿¡æ¯</span>
<span class="n">visualize_topics1</span><span class="o">.</span><span class="n">write_html</span><span class="p">(</span><span class="s1">&#39;visualize_topics.html&#39;</span><span class="p">)</span>
<span class="n">visualize_topics1</span>
</code></pre></div><p><img loading="lazy" src="img/visualize_topics1.png" alt=""  />
</p>
<p><a href="img/visualize_topics1.html">ç‚¹å‡»æŸ¥çœ‹visualize_topics1.html</a></p>
<br>
<h3 id="visualize_distribution">.visualize_distribution()</h3>
<p>æ˜¾ç¤ºç¬¬ä¸€æ¡æ–°é—»çš„ä¸»é¢˜æ¦‚ç‡åˆ†å¸ƒ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">first_new_topic_probs</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_distribution</span><span class="p">(</span><span class="n">probs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">first_new_topic_probs</span><span class="o">.</span><span class="n">write_html</span><span class="p">(</span><span class="s1">&#39;first_new_topic_probs.html&#39;</span><span class="p">)</span>
<span class="n">first_new_topic_probs</span>
</code></pre></div><p><img loading="lazy" src="img/first_new_topic_probs.png" alt=""  />

<a href="img/first_new_topic_probs.html">ç‚¹å‡»æŸ¥çœ‹first_new_topic_probs.html</a></p>
<p>ä¸ºäº†ç†è§£ä¸»é¢˜çš„æ½œåœ¨å±‚æ¬¡ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ scipy.cluster.hierarchy åˆ›å»ºèšç±»å¹¶å¯è§†åŒ–å®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚ è¿™æœ‰åŠ©äºåˆå¹¶ç›¸ä¼¼ä¸»é¢˜ï¼Œè¾¾åˆ°é™ä½ä¸»é¢˜æ¨¡å‹ä¸»é¢˜æ•°é‡nr_topicsã€‚</p>
<br>
<h3 id="visualize_hierarchytop_n_topics">.visualize_hierarchy(top_n_topics)</h3>
<p>è¯é¢˜å±‚æ¬¡èšç±»å¯è§†åŒ–ï¼Œæ¨¡å‹è·‘å‡º12ä¸ªä¸»é¢˜ï¼Œè¿™é‡Œå°±æŒ‰12è¿›è¡Œåˆ†å±‚èšç±»</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_hierarchy</span><span class="p">(</span><span class="n">top_n_topics</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</code></pre></div><p><img loading="lazy" src="img/visualize_hierarchy.png" alt=""  />
</p>
<br>
<h3 id="visualize_barcharttopics">.visualize_barchart(topics)</h3>
<p>æ˜¾ç¤ºtopicsçš„è¯æ¡å½¢å›¾</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_barchart</span><span class="p">(</span><span class="n">topics</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</code></pre></div><p><img loading="lazy" src="img/visualize_barchart.png" alt=""  />
</p>
<br>
<h3 id="visualize_heatmapn_clusters">.visualize_heatmap(n_clusters)</h3>
<p>è¯é¢˜ç›¸ä¼¼çƒ­åŠ›å›¾ã€‚BERTopicå¯å°†ä¸»é¢˜ä»¥embeddingså½¢å¼ï¼ˆå‘é‡ï¼‰è¡¨ç¤ºï¼Œ å› æ­¤æˆ‘ä»¬å¯ä»¥åº”ç”¨ä½™å¼¦ç›¸ä¼¼åº¦æ¥åˆ›å»ºç›¸ä¼¼åº¦çŸ©é˜µã€‚ æ¯ä¸¤ä¸¤ä¸»é¢˜å¯è¿›è¡Œä½™å¼¦è®¡ç®—ï¼Œæœ€ç»ˆç»“æœå°†æ˜¯ä¸€ä¸ªçŸ©é˜µï¼Œæ˜¾ç¤ºä¸»é¢˜é—´çš„ç›¸ä¼¼ç¨‹åº¦ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">topic_similar_heatmap</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_heatmap</span><span class="p">(</span><span class="n">n_clusters</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>
<span class="n">topic_similar_heatmap</span><span class="o">.</span><span class="n">write_html</span><span class="p">(</span><span class="s1">&#39;topic_similar_heatmap.html&#39;</span><span class="p">)</span>
<span class="n">topic_similar_heatmap</span>
</code></pre></div><p><img loading="lazy" src="img/topic_similar_heatmap.png" alt=""  />

<a href="img/topic_similar_heatmap.html">ç‚¹å‡»æŸ¥çœ‹topic_similar_heatmap.html</a></p>
<p>é€šè¿‡æ ¹æ®æ¯ä¸ªä¸»é¢˜è¡¨ç¤ºçš„ c-TF-IDF åˆ†æ•°åˆ›å»ºæ¡å½¢å›¾æ¥å¯è§†åŒ–ä¸»é¢˜çš„é€‰å®šè¯è¯­ã€‚ ä»ä¸»é¢˜ä¹‹é—´å’Œä¸»é¢˜å†…çš„ç›¸å¯¹ c-TF-IDF åˆ†æ•°ä¸­è·å¾—è§è§£ã€‚ æ­¤å¤–ï¼Œå¯ä»¥è½»æ¾åœ°å°†ä¸»é¢˜è¡¨ç¤ºç›¸äº’æ¯”è¾ƒã€‚</p>
<br>
<h3 id="visualize_term_rank">.visualize_term_rank()</h3>
<p>é€šè¿‡æ ¹æ®æ¯ä¸ªä¸»é¢˜è¡¨ç¤ºçš„ c-TF-IDF åˆ†æ•°åˆ›å»ºæ¡å½¢å›¾æ¥å¯è§†åŒ–ä¸»é¢˜çš„é€‰å®šè¯è¯­ã€‚</p>
<p>ä»ä¸»é¢˜ä¹‹é—´å’Œä¸»é¢˜å†…çš„ç›¸å¯¹ c-TF-IDF åˆ†æ•°ä¸­è·å¾—è§è§£ã€‚</p>
<p>æ­¤å¤–ï¼Œå¯ä»¥è½»æ¾åœ°å°†ä¸»é¢˜è¡¨ç¤ºç›¸äº’æ¯”è¾ƒã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">term_score_decline</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_term_rank</span><span class="p">()</span>
<span class="n">term_score_decline</span><span class="o">.</span><span class="n">write_html</span><span class="p">(</span><span class="s1">&#39;term_score_decline.html&#39;</span><span class="p">)</span>
<span class="n">term_score_decline</span>
</code></pre></div><p><img loading="lazy" src="img/term_score_decline.png" alt=""  />

<a href="img/term_score_decline.html">ç‚¹å‡»æŸ¥çœ‹term_score_decline.html</a></p>
<h3 id="update_topics">.update_topics()</h3>
<p>æ›´æ–°ä¸»é¢˜æ¨¡å‹ã€‚å½“æ‚¨è®­ç»ƒäº†ä¸€ä¸ªæ¨¡å‹å¹¶æŸ¥çœ‹äº†ä»£è¡¨å®ƒä»¬çš„ä¸»é¢˜å’Œå•è¯æ—¶ï¼Œæ‚¨å¯èƒ½å¯¹è¡¨ç¤ºä¸æ»¡æ„ã€‚ ä¹Ÿè®¸æ‚¨å¿˜è®°åˆ é™¤åœç”¨è¯ï¼Œæˆ–è€…æ‚¨æƒ³å°è¯•ä¸åŒçš„ n_gram_rangeã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‡½æ•° update_topics ä½¿ç”¨ c-TF-IDF çš„æ–°å‚æ•°æ›´æ–°ä¸»é¢˜è¡¨ç¤ºã€‚</p>
<p>ä½¿ç”¨.update_topics()æ›´æ–°ï¼Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">topic_model</span><span class="o">.</span><span class="n">update_topics</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span> <span class="n">topics</span><span class="p">,</span> <span class="n">n_gram_range</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</code></pre></div><p>topic_modelå¾—åˆ°äº†æ›´æ–°ï¼Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">similar_topics</span><span class="p">,</span> <span class="n">similarity</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">find_topics</span><span class="p">(</span><span class="s2">&#34;æ‰‹æœº&#34;</span><span class="p">,</span> <span class="n">top_n</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="n">similar_topics</span>
</code></pre></div><p>Run</p>
<pre><code>[2, 7, 4, 1, 5]
</code></pre>
<p>æŸ¥çœ‹è¯é¢˜2çš„ä¿¡æ¯</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">topic_model</span><span class="o">.</span><span class="n">get_topic</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[(&#39;åŠŸèƒ½&#39;, 0.022132351014298786),
 (&#39;é‡‡ç”¨&#39;, 0.02136925357979149),
 (&#39;åƒç´ &#39;, 0.020797285140907094),
 (&#39;æ‹æ‘„&#39;, 0.017850841110848677),
 (&#39;æœºèº«&#39;, 0.015056931248982912),
 (&#39;è‹±å¯¸&#39;, 0.014624438184138326),
 (&#39;ä½³èƒ½&#39;, 0.012857768505732597),
 (&#39;æ”¯æŒ&#39;, 0.012600856600766349),
 (&#39;å…‰å­¦&#39;, 0.012462085658291079),
 (&#39;ç›¸æœº&#39;, 0.011832978982454568)]
</code></pre></div><p>æ¨¡å‹ä¿å­˜</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Save model</span>
<span class="c1">#model.save(&#34;my_model&#34;)</span>
<span class="c1"># Load model</span>
<span class="c1">#my_model = BERTopic.load(&#34;my_model&#34;)</span>
</code></pre></div><br>
<h3 id="reduce_topics">.reduce_topics()</h3>
<p>å‹ç¼©ä¸»é¢˜æ•°</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">new_topics</span><span class="p">,</span> <span class="n">new_probs</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">reduce_topics</span><span class="p">(</span><span class="n">docs</span><span class="p">,</span> <span class="n">topics</span><span class="p">,</span> <span class="n">probs</span><span class="p">,</span> <span class="n">nr_topics</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<pre><code>2021-10-28 12:28:01,976 - BERTopic - Reduced number of topics from 20 to 11
</code></pre>
<br>
<h2 id="ä»£ç æ•°æ®">ä»£ç æ•°æ®</h2>
<p><a href="bertopic_tutorial.zip">click to download</a></p>
<br>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>æœ¬æ–‡ä½¿ç”¨ä¸­æ–‡æ–‡æœ¬æ•°æ®å±•ç¤ºBERTopicéƒ¨åˆ†åŠŸèƒ½ï¼Œå¦‚æœå¯¹è‹±æ–‡æ•°æ®æ„Ÿå…´è¶£ï¼Œå¯ä»¥å‰å¾€  <a href="https://github.com/MaartenGr/BERTopic">https://github.com/MaartenGr/BERTopic</a> æ·±å…¥å­¦ä¹ ã€‚</p>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Shifteratoråº“ | è¯ç§»å›¾åˆ†è¾¨ä¸¤æ–‡æœ¬ç”¨è¯é£æ ¼å·®å¼‚</title>
      <link>https://hidadeng.github.io/blog/shifterator_text_vis/</link>
      <pubDate>Tue, 26 Oct 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/shifterator_text_vis/</guid>
      <description>å›¾æ–‡ä»£ç ç†è§£ä¸¤æ–‡æœ¬ç”¨è¯é£æ ¼å·®å¼‚</description>
      <content:encoded><![CDATA[<p>ä»¥å¾€å¯¹æ¯”ä¸¤ä¸ªæ–‡æœ¬æ•°æ®å·®å¼‚ï¼Œæ¯”è¾ƒç®€å•çš„æŠ€æœ¯å®ç°æ–¹æ³•æ˜¯ç”Ÿæˆä¸¤æ–‡ä¸ªè¯äº‘å›¾ï¼Œä½†æ˜¯è¯äº‘å›¾æ— æ³•ç›´è§‚æ˜¾ç¤ºè¯è¯­å±‚é¢çš„æƒé‡ã€‚</p>
<p><strong>Shifterator</strong>åŒ…æä¾›äº†æ„å»ºè¯ç§»å›¾çš„åŠŸèƒ½ï¼Œå‚ç›´æ¡å½¢å›¾å¯ä»¥é‡åŒ–å“ªäº›è¯ä¼šå¯¼è‡´<strong>ä¸¤ä¸ªæ–‡æœ¬</strong>ä¹‹é—´çš„æˆå¯¹å·®å¼‚ä»¥åŠå®ƒä»¬å¦‚ä½•èµ·ä½œç”¨ã€‚ é€šè¿‡å…è®¸æ‚¨æŸ¥çœ‹å•è¯ä½¿ç”¨æ–¹å¼çš„å˜åŒ–ï¼Œå•è¯è½¬æ¢å¯å¸®åŠ©æ‚¨å¯¹æƒ…ç»ªã€ç†µå’Œåˆ†æ­§è¿›è¡Œåˆ†æï¼Œè¿™äº›åˆ†æä»æ ¹æœ¬ä¸Šæ¥è¯´æ›´å…·å¯è§£é‡Šæ€§ã€‚</p>
<p>Shifteratoräº®ç‚¹ï¼š</p>
<ul>
<li>æä¾›å¯è§£é‡Šçš„å·¥å…·ï¼Œç”¨äºå°†æ–‡æœ¬ä½œä¸ºæ•°æ®å¤„ç†å¹¶æ˜ å°„å‡ºä¸¤ä¸ªæ–‡æœ¬ç›¸ä¼¼æ€§æˆ–å·®å¼‚æ€§</li>
<li>å®ç°å¸¸è§çš„æ–‡æœ¬æ¯”è¾ƒåº¦é‡ï¼ŒåŒ…æ‹¬ç›¸å¯¹é¢‘ç‡ã€é¦™å†œç†µã€Tsallisç†µã€Kullback-Leibleræ•£åº¦å’Œ Jensen-Shannon æ•£åº¦ã€‚</li>
<li>åŸºäºå­—å…¸çš„æƒ…ç»ªåˆ†ææ–¹æ³•è®¡ç®—çš„åŠ æƒå¹³å‡å€¼ã€‚</li>
<li>åœ¨ç ”ç©¶åˆæœŸå¯ç”¨äºè¯Šæ–­æ•°æ®ã€æ„ŸçŸ¥æµ‹é‡è¯¯å·®ã€‚</li>
</ul>
<p>è®¡ç®—ç¤¾ä¼šç§‘å­¦å®¶ã€æ•°å­—äººæ–‡ä¸»ä¹‰è€…å’Œå…¶ä»–æ–‡æœ¬åˆ†æä»ä¸šè€…éƒ½å¯ä»¥ä½¿ç”¨ Shifterator ä»æ–‡æœ¬æ•°æ®æ„å»ºå¯é ã€ç¨³å¥å’Œå¯è§£é‡Šçš„æ•…äº‹ã€‚</p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">shifterator</span><span class="o">==</span><span class="mf">0.2.2</span>
</code></pre></div><br>
<h2 id="å¯¼å…¥æ•°æ®">å¯¼å…¥æ•°æ®</h2>
<p>å‡†å¤‡çš„å¤–å–csvæ•°æ®ï¼Œå«labelå’Œreviewä¸¤ä¸ªå­—æ®µã€‚</p>
<p>å…¶ä¸­labelæ˜¯å¥½è¯„å·®è¯„çš„æ ‡æ³¨ï¼Œ</p>
<ul>
<li>0ä¸ºå·®è¯„ï¼Œ</li>
<li>1ä¸ºå¥½è¯„</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">reviews_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&#34;data/WaiMai8k.csv&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
<span class="n">reviews_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="img/df.png" width="800" />
    
    
</figure>

<p>æœ‰ä¸ªç–‘é—®ï¼Œå¤–å–å¥½å·®è¯„ä¸­çš„ç”¨è¯æœ‰ä»€ä¹ˆå·®å¼‚(åŒºåˆ«/ç‰¹ç‚¹)ï¼Ÿ</p>
<h2 id="å‡†å¤‡ä¸¤ç»„æ–‡æœ¬æ•°æ®">å‡†å¤‡ä¸¤ç»„æ–‡æœ¬æ•°æ®</h2>
<p>shifteratoréœ€è¦ä¸¤ç»„æ–‡æœ¬æ•°æ®ï¼Œæ ¼å¼ä¸ºé•¿åº¦ç›¸åŒçš„è¯é¢‘ç»Ÿè®¡å­—å…¸ã€‚</p>
<p>æŒ‰ç…§labelç±»åˆ«ï¼Œå°†æ•°æ®æ•´ç†ä¸ºä¸¤ä¸ªæ–‡æœ¬æ•°æ®ã€‚åœ¨å‡†å¤‡çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åšä¸€äº›æ¸…æ´—æ“ä½œ</p>
<ul>
<li>æ¸…é™¤éä¸­æ–‡å­—ç¬¦ï¼Œå¦‚ç½‘å€ã€é‚®ç®±ã€æ ‡ç‚¹ç¬¦å·</li>
<li>æ¸…é™¤ä¿¡æ¯é‡æ¯”è¾ƒä½çš„åœç”¨è¯</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">collections</span>
<span class="kn">import</span> <span class="nn">jieba</span>
<span class="kn">import</span> <span class="nn">re</span> 

<span class="n">texts_neg</span> <span class="o">=</span> <span class="n">reviews_df</span><span class="p">[</span><span class="n">reviews_df</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;review&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">texts_pos</span> <span class="o">=</span> <span class="n">reviews_df</span><span class="p">[</span><span class="n">reviews_df</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;review&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">clean_text</span><span class="p">(</span><span class="n">docs</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;æ¸…æ´—æ–‡æœ¬ä¸­çš„éä¸­æ–‡å­—ç¬¦ã€åœç”¨è¯ï¼Œè¿”å›è¯é¢‘ç»Ÿè®¡ç»“æœ
</span><span class="s2">    docs : å¾…å¤„ç†çš„æ–‡æ¡£åˆ—è¡¨
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="n">stop_words</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;data/stopwords.txt&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&#34;[</span><span class="se">\u4e00</span><span class="s2">-</span><span class="se">\u9fa5</span><span class="s2">]+&#34;</span><span class="p">,</span> <span class="n">text</span><span class="p">))</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">jieba</span><span class="o">.</span><span class="n">lcut</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span> <span class="k">if</span> <span class="n">w</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">stop_words</span><span class="p">]</span>
    <span class="n">wordfreq_dict</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">Counter</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wordfreq_dict</span>


<span class="n">clean_texts_neg</span> <span class="o">=</span> <span class="n">clean_text</span><span class="p">(</span><span class="n">texts_neg</span><span class="p">)</span>
<span class="n">clean_texts_pos</span> <span class="o">=</span> <span class="n">clean_text</span><span class="p">(</span><span class="n">texts_pos</span><span class="p">)</span>
</code></pre></div><br>
<h2 id="æ— èŠçš„ä¼ ç»Ÿç»˜å›¾">æ— èŠçš„ä¼ ç»Ÿç»˜å›¾</h2>
<p>ä½¿ç”¨æ¡å½¢å›¾ã€è¯äº‘å›¾ç»˜åˆ¶ï¼Œä¸ºäº†ç¼©å°ä»£ç é‡ï¼Œè¿™é‡Œåªç»˜åˆ¶å·®è¯„æ•°æ®ã€‚éœ€è¦æ³¨æ„çš„æ˜¯matplotlibä¸æ˜¾ç¤ºä¸­æ–‡ï¼Œè¿™é‡Œéœ€è¦å…ˆä½¿ç”¨ä¸‹é¢ä¸‰è¡Œä»£ç è·å–ç”µè„‘ä¸­è‡ªå¸¦çš„ä¸­æ–‡å­—ä½“åˆ—è¡¨mpl_fontsï¼Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">matplotlib.font_manager</span> <span class="kn">import</span> <span class="n">FontManager</span>
 
<span class="n">mpl_fonts</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">FontManager</span><span class="p">()</span><span class="o">.</span><span class="n">ttflist</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mpl_fonts</span><span class="p">)</span>
</code></pre></div><p>ç»è¿‡è¿è¡Œï¼Œæˆ‘çš„ç”µè„‘mpl_fontsé‡Œæœ‰<strong>Arial Unicode MS</strong> ï¼Œåé¢ç”¨matplotlibæ˜¾ç¤ºä¸­æ–‡çš„åœ°æ–¹ï¼Œæˆ‘éƒ½ä½¿ç”¨è¯¥å­—ä½“ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#å‡†å¤‡DataFrameæ•°æ®</span>
<span class="n">common_neg</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">clean_texts_neg</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span>
                             <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;words&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">])</span>

<span class="n">common_pos</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">clean_texts_pos</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span>
                             <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;words&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">])</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">font_scale</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s2">&#34;whitegrid&#34;</span><span class="p">)</span>

<span class="c1">#ä¸ºäº†æ˜¾ç¤ºä¸­æ–‡</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&#34;font&#34;</span><span class="p">,</span> <span class="n">family</span><span class="o">=</span><span class="s1">&#39;Arial Unicode MS&#39;</span><span class="p">)</span>


<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>

<span class="c1">#ç»˜åˆ¶æ°´å¹³æ¡å½¢å›¾</span>
<span class="n">common_neg</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;words&#39;</span><span class="p">,</span>
                     <span class="n">y</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">,</span>
                      <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                      <span class="n">color</span><span class="o">=</span><span class="s2">&#34;red&#34;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&#34;å¤–å–å·®è¯„å¸¸è§è¯&#34;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="img/output_9_0.png" width="800" />
    
    
</figure>

<p>ç»˜åˆ¶è¯äº‘å›¾ï¼Œè¿™é‡Œä½¿ç”¨çš„pyechartsåŒ…ã€‚ç”±äºè¯¥åŒ…ä½œè€…æ›´æ–°å¼ºåº¦æ¯”è¾ƒå¤§ï¼Œä¸ºäº†ä¿è¯æ—¥åæœ¬æ•™ç¨‹ä»å¯æ­£å¸¸è¿è¡Œï¼Œè¿™é‡Œæä¾›å½“å‰æˆ‘ä½¿ç”¨çš„pyechartsç›¸å…³çš„ç‰ˆæœ¬ï¼Œå¤§å®¶å¯ä»¥è¿è¡Œä¸‹é¢ä»£ç ä¿è¯è¿è¡Œå‡ºæ­£ç¡®ç»“æœ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">pyecharts</span><span class="o">==</span><span class="mf">1.6.2</span>
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">pyecharts</span><span class="o">-</span><span class="n">javascripthon</span><span class="o">==</span><span class="mf">0.0.6</span>
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">pyecharts</span><span class="o">-</span><span class="n">jupyter</span><span class="o">-</span><span class="n">installer</span><span class="o">==</span><span class="mf">0.0.3</span>
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">pyecharts</span><span class="o">-</span><span class="n">snapshot</span><span class="o">==</span><span class="mf">0.2.0</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pyecharts.options</span> <span class="k">as</span> <span class="nn">opts</span>
<span class="kn">from</span> <span class="nn">pyecharts.charts</span> <span class="kn">import</span> <span class="n">WordCloud</span>
<span class="kn">from</span> <span class="nn">pyecharts.globals</span> <span class="kn">import</span> <span class="n">CurrentConfig</span><span class="p">,</span> <span class="n">NotebookType</span>
<span class="n">CurrentConfig</span><span class="o">.</span><span class="n">NOTEBOOK_TYPE</span> <span class="o">=</span> <span class="n">NotebookType</span><span class="o">.</span><span class="n">JUPYTER_NOTEBOOK</span>

<span class="n">wordfreqs</span> <span class="o">=</span> <span class="p">[(</span><span class="n">w</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">))</span> <span class="k">for</span> <span class="n">w</span><span class="p">,</span><span class="n">f</span> <span class="ow">in</span> <span class="nb">dict</span><span class="p">(</span><span class="n">clean_texts_neg</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>


<span class="n">wc</span> <span class="o">=</span> <span class="n">WordCloud</span><span class="p">()</span>
<span class="n">wc</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">series_name</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="n">data_pair</span><span class="o">=</span><span class="n">wordfreqs</span><span class="p">,</span> <span class="n">word_size_range</span><span class="o">=</span><span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
<span class="n">wc</span><span class="o">.</span><span class="n">set_global_opts</span><span class="p">(</span><span class="n">title_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">TitleOpts</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&#34;å¤–å–å·®è¯„è¯äº‘å›¾&#34;</span><span class="p">,</span> 
                                             <span class="n">title_textstyle_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">TextStyleOpts</span><span class="p">(</span><span class="n">font_size</span><span class="o">=</span><span class="mi">23</span><span class="p">)),</span>
                   <span class="n">tooltip_opts</span><span class="o">=</span><span class="n">opts</span><span class="o">.</span><span class="n">TooltipOpts</span><span class="p">(</span><span class="n">is_show</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="n">wc</span><span class="o">.</span><span class="n">load_javascript</span><span class="p">()</span>
<span class="n">wc</span><span class="o">.</span><span class="n">render_notebook</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="img/%e8%af%8d%e4%ba%91%e5%9b%be.png" width="800" />
    
    
</figure>

<h2 id="ä½¿ç”¨shifteratorç»˜åˆ¶è¯ç§»å›¾">ä½¿ç”¨Shifteratorç»˜åˆ¶è¯ç§»å›¾</h2>
<p>ç»ˆäºè¦ç”¨åˆ° <strong>Shifterator</strong> åŒ…äº†ï¼ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªåŒ…æ ¹æ®é¢‘ç‡å’Œæƒ…ç»ªï¼ˆæˆ–å…¶ä»–å€¼ï¼‰æ¯”è¾ƒè´Ÿé¢å’Œæ­£é¢çš„å¤–å–è¯„è®ºï¼Œè¿™é‡Œæˆ‘åªè®¡ç®—äº†é¢‘ç‡ä½œä¸ºæƒé‡</p>
<h3 id="ç†µç§»å›¾entropy-shift">ç†µç§»å›¾Entropy shift</h3>
<p>ç¬¬ä¸€å¹…å›¾æ˜¯entropy shift graph</p>
<p>å…·ä½“ä¿¡æ¯è¯·æŸ¥çœ‹æ–‡æ¡£  <a href="https://github.com/ryanjgallagher/shifterator">https://github.com/ryanjgallagher/shifterator</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">shifterator</span> <span class="kn">import</span> <span class="n">EntropyShift</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&#34;font&#34;</span><span class="p">,</span> <span class="n">family</span><span class="o">=</span><span class="s1">&#39;Arial Unicode MS&#39;</span><span class="p">)</span>

<span class="n">entropy_shift</span> <span class="o">=</span> <span class="n">EntropyShift</span><span class="p">(</span><span class="n">type2freq_1</span><span class="o">=</span><span class="n">clean_texts_neg</span><span class="p">,</span>
                             <span class="n">type2freq_2</span><span class="o">=</span><span class="n">clean_texts_pos</span><span class="p">,</span>
                             <span class="n">base</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">entropy_shift</span><span class="o">.</span><span class="n">get_shift_graph</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;å¤–å–å·®è¯„ vs å¤–å–å¥½è¯„&#39;</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/output141.png" width="800" />
    
    
</figure>

<p>çœ‹èµ·æ¥æœ€èƒ½å†³å®šå¤–å–å·®è¯„çš„ç”¨è¯­æ˜¯é…é€æ—¶é—´ï¼Œå…¶æ¬¡æ‰æ˜¯å£å‘³ã€‚</p>
<p>æœ€èƒ½å†³å®šå¤–å–å¥½è¯„çš„ä¼¼ä¹æ˜¯å£å‘³ï¼Œå…¶æ¬¡æ‰æ˜¯é…é€æ—¶é—´ã€‚</p>
<p>é€šè¿‡Shifteratoræˆ‘ä»¬èƒ½å¤Ÿçœ‹å‡ºä¸åŒè¯åœ¨ä¸åŒæ–‡æœ¬ä¸­çš„ä½œç”¨ç¨‹åº¦ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åªä½¿ç”¨äº†æœ€é«˜çš„å‰15è¯é¢‘ï¼Œæ‰€ä»¥æ˜¾ç¤ºçš„è¯æœ‰äº›å°‘</p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>å¸Œæœ›æœ¬æ–‡èƒ½å¯¹ä½ çš„ç ”ç©¶æœ‰å¸®åŠ©ï¼Œä»£ç ä¸‹è½½åœ°å€</p>
<p><a href="https://github.com/hidadeng/DaDengAndHisPython/tree/master/20211027shifterator%E5%AD%A6%E4%B9%A0">https://github.com/hidadeng/DaDengAndHisPython/tree/master/20211027shifteratorå­¦ä¹ </a></p>
<p>ä»£ç æ’°å†™è°ƒè¯•ä¸æ˜“ï¼Œå¸Œæœ›å¸®å¿™è½¬è½½</p>

<figure >
    
        <img src="img/Python%e4%b8%93%e6%a0%8f%e8%af%be.jpg" width="800" />
    
    
</figure>

<br>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>SHAPæœºå™¨å­¦ä¹ æ¨¡å‹è§£é‡Šåº“</title>
      <link>https://hidadeng.github.io/blog/shap_ml_explanation/</link>
      <pubDate>Thu, 14 Oct 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/shap_ml_explanation/</guid>
      <description>å›¾æ–‡ä»£ç ç†è§£æœºå™¨å­¦ä¹ æ¨¡å‹ä¸­å„ç‰¹å¾å¯¹ç»“æœçš„è´¡çŒ®</description>
      <content:encoded><![CDATA[<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="SHAP.zip">ç‚¹å‡»æ­¤å¤„ä¸‹è½½ä»£ç </a></p>
<br>
<blockquote>
<p>åŸæ–‡é“¾æ¥ <a href="https://towardsdatascience.com/shap-explain-any-machine-learning-model-in-python-24207127cad7">https://towardsdatascience.com/shap-explain-any-machine-learning-model-in-python-24207127cad7</a></p>
</blockquote>
<h2 id="heading"></h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£è¯•å›¾è®­ç»ƒä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹æ¥é¢„æµ‹å¹¿å‘Šæ˜¯å¦è¢«ç‰¹å®šçš„äººç‚¹å‡»ã€‚åœ¨æ”¶åˆ°å…³äºæŸäººçš„ä¸€äº›ä¿¡æ¯åï¼Œæ¨¡å‹é¢„æµ‹æŸäººä¼šä¸ä¼šç‚¹å‡»å¹¿å‘Šã€‚</p>

<figure >
    
        <img src="img/%e5%9b%be1.png" />
    
    
</figure>

<p>ä½†æ˜¯ä¸ºä»€ä¹ˆæ¨¡å‹ä¼šè¾“å‡ºè¿™æ ·çš„é¢„æµ‹ç»“æœå‘¢ï¼Ÿ æ¯ä¸ªç‰¹å¾å¯¹é¢„æµ‹çš„è´¡çŒ®æœ‰å¤šå¤§ï¼Ÿ å¦‚æœæ‚¨èƒ½çœ‹åˆ°ä¸€ä¸ªå›¾è¡¨ï¼Œæ˜¾ç¤ºæ¯ä¸ªç‰¹å¾å¯¹é¢„æµ‹çš„è´¡çŒ®ç¨‹åº¦ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œä¸æ˜¯å¾ˆå¥½å—ï¼Ÿ</p>

<figure >
    
        <img src="img/%e6%9d%83%e9%87%8d.png" />
    
    
</figure>

<p>Shapleyå€¼å°±èƒ½èµ·åˆ°ç‰¹å¾æƒé‡æµ‹åº¦çš„ä½œç”¨ã€‚</p>
<h2 id="shapleyå€¼æ˜¯ä»€ä¹ˆ">Shapleyå€¼æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>Shapleyå€¼æ˜¯åšå¼ˆè®ºä¸­ä½¿ç”¨çš„ä¸€ç§æ–¹æ³•ï¼Œå®ƒæ¶‰åŠå…¬å¹³åœ°å°†æ”¶ç›Šå’Œæˆæœ¬åˆ†é…ç»™åœ¨è”ç›Ÿä¸­å·¥ä½œçš„è¡ŒåŠ¨è€…ã€‚
ç”±äºæ¯ä¸ªè¡ŒåŠ¨è€…å¯¹è”ç›Ÿçš„è´¡çŒ®æ˜¯ä¸åŒçš„ï¼ŒShapleyå€¼ä¿è¯æ¯ä¸ªè¡ŒåŠ¨è€…æ ¹æ®è´¡çŒ®çš„å¤šå°‘è·å¾—å…¬å¹³çš„ä»½é¢ã€‚</p>

<figure >
    
        <img src="img/%e8%b4%a1%e7%8c%ae.png" />
    
    
</figure>

<h2 id="å°æ¡ˆä¾‹">å°æ¡ˆä¾‹</h2>
<p>Shapleyå€¼è¢«å¹¿æ³›åœ°åº”ç”¨äºæ±‚è§£ç¾¤ä½“ä¸­æ¯ä¸ªå·¥äºº(ç‰¹å¾)çš„è´¡çŒ®é—®é¢˜ã€‚è¦ç†è§£Shapleyå€¼çš„ä½œç”¨ï¼Œè®©æˆ‘ä»¬æƒ³è±¡ä¸€ä¸‹è´µå…¬å¸åˆšåˆšåšäº†A/Bæµ‹è¯•ï¼Œä»–ä»¬åœ¨æµ‹è¯•å¹¿å‘Šç­–ç•¥çš„ä¸åŒç»„åˆã€‚</p>
<p>æ¯ä¸ªç­–ç•¥åœ¨ç‰¹å®šæœˆä»½çš„æ”¶å…¥æ˜¯ï¼š</p>
<ul>
<li>æ— å¹¿å‘Šï¼š150ç¾å…ƒ</li>
<li>ç¤¾äº¤åª’ä½“ï¼š300ç¾å…ƒ</li>
<li>è°·æ­Œå¹¿å‘Šï¼š200ç¾å…ƒ</li>
<li>ç”µå­é‚®ä»¶è¥é”€ï¼š350ç¾å…ƒ</li>
<li>ç¤¾äº¤åª’ä½“å’Œè°·æ­Œå¹¿å‘Šï¼š320ç¾å…ƒ</li>
<li>ç¤¾äº¤åª’ä½“å’Œç”µå­é‚®ä»¶è¥é”€ï¼š400ç¾å…ƒ</li>
<li>è°·æ­Œå¹¿å‘Šå’Œç”µå­é‚®ä»¶è¥é”€ï¼š350ç¾å…ƒ</li>
<li>ç”µå­é‚®ä»¶è¥é”€ï¼Œè°·æ­Œå¹¿å‘Šå’Œç¤¾äº¤åª’ä½“ï¼š450ç¾å…ƒ</li>
</ul>

<figure >
    
        <img src="img/%e7%ad%96%e7%95%a5%e8%90%a5%e6%94%b6.png" />
    
    
</figure>

<p>ä½¿ç”¨ä¸‰åˆ™å¹¿å‘Šä¸ä¸ä½¿ç”¨å¹¿å‘Šçš„æ”¶å…¥ç›¸å·®300ç¾å…ƒï¼Œæ¯åˆ™å¹¿å‘Šå¯¹è¿™ä¸€å·®å¼‚æœ‰å¤šå¤§çš„è´¡çŒ®?</p>

<figure >
    
        <img src="img/%e7%ad%96%e7%95%a5%e8%90%a5%e6%94%b6%e8%b4%a1%e7%8c%ae%e5%87%a0%e4%bd%95.png" />
    
    
</figure>

<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¡ç®—æ¯ä¸€ç±»å¹¿å‘Šçš„Shapleyå€¼æ¥è®¡ç®—è°·æ­Œå¹¿å‘Šå¯¹å…¬å¸æ”¶å…¥çš„æ€»è´¡çŒ®å…¥æ‰‹ï¼Œé€šè¿‡å…¬å¼å¯ä»¥è®¡ç®—å‡ºGoogleå¹¿å‘Šçš„æ€»è´¡çŒ®ï¼š</p>

<figure >
    
        <img src="img/%e5%85%ac%e5%bc%8f.png" />
    
    
</figure>

<p>è®©æˆ‘ä»¬æ‰¾åˆ°Googleå¹¿å‘Šçš„è¾¹é™…è´¡çŒ®åŠå…¶æƒé‡ã€‚</p>
<h2 id="å¯»æ‰¾è°·æ­Œå¹¿å‘Šçš„è¾¹é™…è´¡çŒ®">å¯»æ‰¾è°·æ­Œå¹¿å‘Šçš„è¾¹é™…è´¡çŒ®</h2>
<p>ç¬¬ä¸€ï¼Œæˆ‘ä»¬å°†å‘ç°è°·æ­Œå¹¿å‘Šå¯¹ä»¥ä¸‹ç¾¤ä½“çš„è¾¹é™…è´¡çŒ®ï¼š</p>
<ul>
<li>æ— å¹¿å‘Š</li>
<li>è°·æ­Œå¹¿å‘Š+ç¤¾äº¤åª’ä½“</li>
<li>è°·æ­Œå¹¿å‘Š+ç”µå­é‚®ä»¶è¥é”€</li>
<li>è°·æ­Œå¹¿å‘Š+ç”µå­é‚®ä»¶è¥é”€+ç¤¾äº¤åª’ä½“</li>
</ul>

<figure >
    
        <img src="img/%e8%be%b9%e9%99%85%e8%b4%a1%e7%8c%ae.png" />
    
    
</figure>

<p>Googleå¹¿å‘Š å¯¹ æ— å¹¿å‘Š çš„è¾¹é™…è´¡çŒ®æ˜¯ï¼š</p>

<figure >
    
        <img src="img/MC1.png" />
    
    
</figure>

<p>è°·æ­Œå¹¿å‘Š å¯¹ è°·æ­Œå¹¿å‘Š&amp;ç¤¾äº¤åª’ä½“ç»„åˆ çš„è¾¹é™…è´¡çŒ®æ˜¯ï¼š</p>

<figure >
    
        <img src="img/MC2.png" />
    
    
</figure>

<p>è°·æ­Œå¹¿å‘Š å¯¹ è°·æ­Œå¹¿å‘Š&amp;ç”µå­é‚®ä»¶è¥é”€ç»„åˆ çš„è¾¹é™…è´¡çŒ®æ˜¯ï¼š</p>

<figure >
    
        <img src="img/MC3.png" />
    
    
</figure>

<p>è°·æ­Œå¹¿å‘Š å¯¹ è°·æ­Œå¹¿å‘Šã€ç”µå­é‚®ä»¶è¥é”€å’Œç¤¾äº¤åª’ä½“ç»„åˆ çš„è¾¹é™…è´¡çŒ®æ˜¯ï¼š</p>

<figure >
    
        <img src="img/MC4.png" />
    
    
</figure>

<h2 id="å‘ç°æƒé‡">å‘ç°æƒé‡</h2>
<p>ä¸ºäº†å‘ç°æƒé‡ï¼Œæˆ‘ä»¬å°†æŠŠä¸åŒå¹¿å‘Šç­–ç•¥çš„ç»„åˆç»„ç»‡æˆå¦‚ä¸‹å¤šä¸ªå±‚æ¬¡ï¼Œæ¯ä¸ªå±‚æ¬¡å¯¹åº”äºæ¯ä¸ªç»„åˆä¸­å¹¿å‘Šç­–ç•¥çš„æ•°é‡ã€‚</p>
<p>ç„¶åæ ¹æ®æ¯ä¸ªå±‚æ¬¡çš„è¾¹æ•°åˆ†é…æƒé‡ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†è¿™ä¸€ç‚¹ï¼š</p>
<ul>
<li>ç¬¬ä¸€çº§åŒ…å«3æ¡è¾¹ï¼Œå› æ­¤æ¯ä¸ªè¾¹çš„æƒé‡ä¸º1/3</li>
<li>ç¬¬äºŒçº§åŒ…å«6æ¡è¾¹ï¼Œå› æ­¤æ¯æ¡è¾¹çš„æƒé‡å°†ä¸º1/6</li>
<li>ç¬¬ä¸‰çº§åŒ…å«3æ¡è¾¹ï¼Œå› æ­¤æ¯æ¡è¾¹çš„æƒé‡å°†ä¸º1/3</li>
</ul>

<figure >
    
        <img src="img/%e5%8f%91%e7%8e%b0%e6%9d%83%e9%87%8d.png" />
    
    
</figure>

<h2 id="å‘ç°googleå¹¿å‘Šçš„æ€»è´¡çŒ®">å‘ç°Googleå¹¿å‘Šçš„æ€»è´¡çŒ®</h2>
<p>æ ¹æ®å‰é¢çš„æƒé‡å’Œè¾¹é™…è´¡çŒ®ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥æ‰¾åˆ°Googleå¹¿å‘Šçš„æ€»è´¡çŒ®!</p>

<figure >
    
        <img src="img/google%e6%80%bb%e8%b4%a1%e7%8c%ae.png" />
    
    
</figure>


<figure >
    
        <img src="img/google%e5%85%ac%e5%bc%8f.png" />
    
    
</figure>

<p>é…·!æ‰€ä»¥è°·æ­Œå¹¿å‘Šåœ¨ä½¿ç”¨3ç§å¹¿å‘Šç­–ç•¥ä¸ä¸ä½¿ç”¨å¹¿å‘Šçš„æ€»æ”¶å…¥å·®å¼‚ä¸­è´¡çŒ®äº†36.67ç¾å…ƒã€‚36.67æ˜¯Googleå¹¿å‘Šçš„Shapeyå€¼ã€‚</p>

<figure >
    
        <img src="img/otherRevenue.png" />
    
    
</figure>

<p>é‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œå¯¹äºå¦å¤–ä¸¤ç§å¹¿å‘Šç­–ç•¥ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li>
<p>ç”µå­é‚®ä»¶è¥é”€è´¡çŒ®151.67ç¾å…ƒ</p>
</li>
<li>
<p>ç¤¾äº¤åª’ä½“è´¡çŒ®116.67ç¾å…ƒ</p>
</li>
<li>
<p>è°·æ­Œå¹¿å‘Šè´¡çŒ®36.67ç¾å…ƒ</p>

<figure >
    
        <img src="img/%e5%90%84%e7%ad%96%e7%95%a5%e8%b4%a1%e7%8c%ae.png" />
    
    
</figure>

</li>
</ul>
<p>ä»–ä»¬å…±åŒå‡ºèµ„300ç¾å…ƒï¼Œç”¨äºä½¿ç”¨3ç§ä¸åŒç±»å‹çš„å¹¿å‘Šä¸ä¸ä½¿ç”¨å¹¿å‘Šçš„åŒºåˆ«!æŒºé…·çš„ï¼Œä¸æ˜¯å—?
æ—¢ç„¶æˆ‘ä»¬ç†è§£äº†Shapleyå€¼ï¼Œé‚£ä¹ˆè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨å®ƒæ¥è§£é‡Šæœºå™¨å­¦ä¹ æ¨¡å‹ã€‚</p>
<h2 id="shap-åœ¨pythonä¸­è§£é‡Šæœºå™¨å­¦ä¹ æ¨¡å‹">SHAP-åœ¨Pythonä¸­è§£é‡Šæœºå™¨å­¦ä¹ æ¨¡å‹</h2>
<p>SHAPæ˜¯ä¸€ä¸ªPythonåº“ï¼Œå®ƒä½¿ç”¨Shapleyå€¼æ¥è§£é‡Šä»»ä½•æœºå™¨å­¦ä¹ æ¨¡å‹çš„è¾“å‡ºã€‚</p>
<p>å®‰è£…SHAP</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python">
<span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">shap</span>

</code></pre></div><h2 id="è®­ç»ƒæ¨¡å‹">è®­ç»ƒæ¨¡å‹</h2>
<p>ä¸ºäº†ç†è§£SHAPå·¥ä½œåŸç†ï¼Œæˆ‘ä»¬ä½¿ç”¨Kaggleå¹³å°å†…çš„advertisingå¹¿å‘Šæ•°æ®é›†ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span> 

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&#34;advertising.csv&#34;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>
<figure >
    
        <img src="img/df.png" />
    
    
</figure>

<p>æˆ‘ä»¬å°†å»ºç«‹ä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹, è¯¥æ¨¡å‹æ ¹æ®ç”¨æˆ·ä¸ªäººç‰¹è´¨ä¿¡æ¯æ¥é¢„æµ‹å…¶æ˜¯å¦ç‚¹å‡»å¹¿å‘Šã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨Patsyå°†DataFrameè½¬æ¢ä¸ºä¸€ç»„ç‰¹å¾å’Œä¸€ç»„ç›®æ ‡å€¼ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">patsy</span> <span class="kn">import</span> <span class="n">dmatrices</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>

<span class="n">y</span><span class="p">,</span> <span class="n">X</span> <span class="o">=</span> <span class="n">dmatrices</span><span class="p">(</span>
    <span class="s2">&#34;clicked_on_ad ~ daily_time_spent_on_site + age + area_income + daily_internet_usage  + male -1&#34;</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">X_frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">X</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">design_info</span><span class="o">.</span><span class="n">column_names</span><span class="p">)</span>


</code></pre></div><p>æŠŠæ•°æ®åˆ†ä¸ºæµ‹è¯•é›†å’Œè®­ç»ƒæ¥</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
</code></pre></div><p>æ¥ä¸‹æ¥ä½¿ç”¨XGBoostè®­ç»ƒæ¨¡å‹ï¼Œå¹¶åšé¢„æµ‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">xgboost</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">xgboost</span><span class="o">.</span><span class="n">XGBClassifier</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="n">y_predicted</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
</code></pre></div><p>ä¸ºäº†æŸ¥çœ‹æ¨¡å‹è¡¨ç°ï¼Œæˆ‘ä»¬ä½¿ç”¨F1å¾—åˆ†</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">f1_score</span>

<span class="n">f1</span> <span class="o">=</span> <span class="n">f1_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_predicted</span><span class="p">)</span>
<span class="n">f1</span>
</code></pre></div><pre><code>0.9619047619047619
</code></pre>
<p>å¤ªå¥½äº†!</p>
<h2 id="è§£é‡Šè¯¥æ¨¡å‹">è§£é‡Šè¯¥æ¨¡å‹</h2>
<p>è¯¥æ¨¡å‹å¾ˆå¥½åœ°é¢„æµ‹äº†ç”¨æˆ·æ˜¯å¦ç‚¹å‡»å¹¿å‘Šã€‚ä½†å®ƒæ˜¯å¦‚ä½•å¾—å‡ºè¿™æ ·çš„é¢„æµ‹çš„? <strong>æ¯ä¸ªç‰¹å¾å¯¹æœ€ç»ˆé¢„æµ‹ä¸å¹³å‡é¢„æµ‹çš„å·®å¼‚è´¡çŒ®äº†å¤šå°‘?</strong></p>
<p>æ³¨æ„ï¼Œè¿™ä¸ªé—®é¢˜ä¸æˆ‘ä»¬åœ¨æ–‡ç« å¼€å¤´è®ºè¿°çš„é—®é¢˜éå¸¸ç›¸ä¼¼ã€‚</p>
<p>å› æ­¤ï¼Œå¯»æ‰¾æ¯ä¸ªç‰¹å¾çš„Shapleyå€¼å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¡®å®šå®ƒä»¬çš„è´¡çŒ®ã€‚å¾—åˆ°ç‰¹å¾içš„é‡è¦æ€§çš„æ­¥éª¤ä¸ä¹‹å‰ç±»ä¼¼ï¼Œå…¶ä¸­iæ˜¯ç‰¹å¾çš„ç´¢å¼•ï¼š</p>
<ul>
<li>è·å–æ‰€æœ‰ä¸åŒ…å«ç‰¹å¾içš„å­é›†</li>
<li>æ‰¾å‡ºç‰¹å¾iå¯¹è¿™äº›å­é›†ä¸­æ¯ä¸ªå­é›†çš„è¾¹é™…è´¡çŒ®</li>
<li>èšåˆæ‰€æœ‰è¾¹é™…è´¡çŒ®æ¥è®¡ç®—ç‰¹å¾içš„è´¡çŒ®</li>
</ul>
<p>è‹¥è¦ä½¿ç”¨SHAPæŸ¥æ‰¾Shapleyå€¼ï¼Œåªéœ€å°†è®­ç»ƒå¥½çš„æ¨¡å‹æ’å…¥shap.Explainer</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">shap</span>

<span class="n">explainer</span> <span class="o">=</span> <span class="n">shap</span><span class="o">.</span><span class="n">Explainer</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="n">shap_values</span> <span class="o">=</span> <span class="n">explainer</span><span class="p">(</span><span class="n">X_frame</span><span class="p">)</span>
</code></pre></div><pre><code>ntree_limit is deprecated, use `iteration_range` or model slicing instead.
</code></pre>
<h2 id="shapç€‘å¸ƒå›¾">SHAPç€‘å¸ƒå›¾</h2>
<p>å¯è§†åŒ–ç¬¬ä¸€ä¸ªé¢„æµ‹çš„è§£é‡Šï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#ç¬¬ä¸€æ¡è®°å½•æ˜¯æœªç‚¹å‡»</span>
<span class="n">shap</span><span class="o">.</span><span class="n">plots</span><span class="o">.</span><span class="n">waterfall</span><span class="p">(</span><span class="n">shap_values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</code></pre></div>
<figure >
    
        <img src="img/output_20_0.png" />
    
    
</figure>

<p>å•Šå“ˆ!ç°åœ¨æˆ‘ä»¬çŸ¥é“æ¯ä¸ªç‰¹å¾å¯¹ç¬¬ä¸€æ¬¡é¢„æµ‹çš„è´¡çŒ®ã€‚å¯¹ä¸Šå›¾çš„è§£é‡Šï¼š</p>

<figure >
    
        <img src="img/%e7%ac%ac%e4%b8%80%e6%ac%a1%e9%a2%84%e6%b5%8b%e8%b4%a1%e7%8c%ae.png" />
    
    
</figure>

<ul>
<li>è“è‰²æ¡æ˜¾ç¤ºæŸä¸€ç‰¹å®šç‰¹å¾åœ¨å¤šå¤§ç¨‹åº¦ä¸Šé™ä½äº†é¢„æµ‹çš„å€¼ã€‚</li>
<li>çº¢æ¡æ˜¾ç¤ºäº†ä¸€ä¸ªç‰¹å®šçš„ç‰¹å¾åœ¨å¤šå¤§ç¨‹åº¦ä¸Šå¢åŠ äº†é¢„æµ‹å€¼ã€‚</li>
<li>è´Ÿå€¼æ„å‘³ç€è¯¥äººç‚¹å‡»å¹¿å‘Šçš„æ¦‚ç‡å°äº0.5</li>
</ul>
<p>æˆ‘ä»¬åº”è¯¥æœŸæœ›æ€»è´¡çŒ®ç­‰äºé¢„æµ‹ä¸å‡å€¼é¢„æµ‹çš„å·®å€¼ã€‚æˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹ï¼š</p>

<figure >
    
        <img src="img/%e6%80%bb%e8%b4%a1%e7%8c%ae%e7%ad%89%e4%ba%8e%e9%a2%84%e6%b5%8b%e4%b8%8e%e5%9d%87%e5%80%bc%e9%a2%84%e6%b5%8b%e7%9a%84%e5%b7%ae%e5%80%bc.png" />
    
    
</figure>

<p>é…·!ä»–ä»¬æ˜¯å¹³ç­‰çš„ã€‚</p>
<p>å¯è§†åŒ–ç¬¬äºŒä¸ªé¢„æµ‹çš„è§£é‡Šï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#ç¬¬äºŒæ¡è®°å½•ä¹Ÿæ˜¯æœªç‚¹å‡»</span>
<span class="n">shap</span><span class="o">.</span><span class="n">plots</span><span class="o">.</span><span class="n">waterfall</span><span class="p">(</span><span class="n">shap_values</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</code></pre></div>
<figure >
    
        <img src="img/output_22_0.png" />
    
    
</figure>

<h2 id="shapæ‘˜è¦å›¾">SHAPæ‘˜è¦å›¾</h2>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨SHAPæ‘˜è¦å›¾ï¼Œè€Œä¸æ˜¯æŸ¥çœ‹æ¯ä¸ªå•ç‹¬çš„å®ä¾‹ï¼Œæ¥å¯è§†åŒ–è¿™äº›ç‰¹æ€§å¯¹å¤šä¸ªå®ä¾‹çš„æ•´ä½“å½±å“ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">shap</span><span class="o">.</span><span class="n">summary_plot</span><span class="p">(</span><span class="n">shap_values</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/output_24_0.png" />
    
    
</figure>

<p>SHAPæ‘˜è¦å›¾å‘Šè¯‰æˆ‘ä»¬æ•°æ®é›†ä¸Šæœ€é‡è¦çš„ç‰¹å¾åŠå…¶å½±å“èŒƒå›´ã€‚</p>
<p>ä»ä¸Šé¢çš„æƒ…èŠ‚ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¨¡å‹çš„é¢„æµ‹è·å¾—ä¸€äº›æœ‰è¶£çš„è§è§£ï¼š</p>
<ul>
<li>ç”¨æˆ·çš„ <strong>daily_internet_usage</strong> å¯¹è¯¥ç”¨æˆ·æ˜¯å¦ç‚¹å‡»å¹¿å‘Šçš„å½±å“æœ€å¤§ã€‚</li>
<li>éšç€<strong>daily_time_spent_on_site</strong>çš„å¢åŠ ï¼Œç”¨æˆ·ç‚¹å‡»å¹¿å‘Šçš„å¯èƒ½æ€§é™ä½ã€‚</li>
<li>éšç€<strong>area_income</strong>çš„å¢åŠ ï¼Œç”¨æˆ·ç‚¹å‡»å¹¿å‘Šçš„å¯èƒ½æ€§é™ä½ã€‚</li>
<li>éšç€<strong>age</strong>çš„å¢é•¿ï¼Œç”¨æˆ·æ›´å®¹æ˜“ç‚¹å‡»å¹¿å‘Šã€‚</li>
<li>å¦‚æœç”¨æˆ·æ˜¯<strong>male</strong>ï¼Œåˆ™è¯¥ç”¨æˆ·ç‚¹å‡»å¹¿å‘Šçš„å¯èƒ½æ€§è¾ƒå°ã€‚</li>
</ul>
<h2 id="shapæ¡å½¢å›¾">SHAPæ¡å½¢å›¾</h2>
<p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨SHAPæ¡å½¢å›¾å¾—åˆ°å…¨å±€ç‰¹å¾é‡è¦æ€§å›¾ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">shap</span><span class="o">.</span><span class="n">plots</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">shap_values</span><span class="p">)</span>
</code></pre></div>
<figure >
    
        <img src="img/output_26_0.png" />
    
    
</figure>

<p>å¾ˆé…·!</p>
<h2 id="ç»“è®º">ç»“è®º</h2>
<p>æ­å–œä½ !æ‚¨åˆšåˆšäº†è§£äº†Shapeyå€¼ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒæ¥è§£é‡Šä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹ã€‚å¸Œæœ›æœ¬æ–‡å°†æä¾›æ‚¨ä½¿ç”¨Pythonæ¥è§£é‡Šè‡ªå·±çš„æœºå™¨å­¦ä¹ æ¨¡å‹çš„åŸºæœ¬çŸ¥è¯†ã€‚</p>
<p><br><br></p>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Clumperåº“|dplyræ ·å¼çš„PythonåŒ…</title>
      <link>https://hidadeng.github.io/blog/clumper_pipeline/</link>
      <pubDate>Tue, 22 Jun 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/clumper_pipeline/</guid>
      <description>è®©æ•°æ®åˆ†ææ›´ä¼˜é›…</description>
      <content:encoded><![CDATA[<p>Clumperå¯ä»¥ç”¨æ¥å¤„ç†åµŒå¥—æ ·å¼çš„jsonæ•°æ®ç»“æ„ã€‚</p>
<h2 id="ä»£ç ä¸‹è½½clumperä»£ç zip"><a href="Clumper%E4%BB%A3%E7%A0%81.zip">ä»£ç ä¸‹è½½</a></h2>
<br>
<h2 id="getting-started">Getting Started</h2>
<h3 id="å®‰è£…">å®‰è£…</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">clumper</span>
</code></pre></div><pre><code>Looking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple
Collecting clumper
  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/70/62/0731ab9b48c91132aff487217980dcb147ffc0922a278adc05986f6a8d4b/clumper-0.2.13-py2.py3-none-any.whl (21 kB)
Installing collected packages: clumper
Successfully installed clumper-0.2.13
[33mWARNING: You are using pip version 20.0.2; however, version 21.1.2 is available.
You should consider upgrading via the '/Library/Frameworks/Python.framework/Versions/3.7/bin/python3.7 -m pip install --upgrade pip' command.[0m
</code></pre>
<p>ä¸ºäº†å±•ç¤ºClumperå¦‚ä½•å·¥ä½œï¼Œæˆ‘å‡†å¤‡äº†pokemon.jsonï¼Œ ç”±åˆ—è¡¨ç»„æˆ(è¯¥åˆ—è¡¨ç”±å¤šä¸ªå­—å…¸ç»„æˆ)ï¼Œä¸‹é¢æ˜¯pokemon.jsonéƒ¨åˆ†å†…å®¹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">json</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;pokemon.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">jsonf</span><span class="p">:</span>
    <span class="n">pokemon</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">jsonf</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    
<span class="n">pokemon</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
</code></pre></div><pre><code>[{'name': 'Bulbasaur',
  'type': ['Grass', 'Poison'],
  'total': 318,
  'hp': 45,
  'attack': 49},
 {'name': 'Ivysaur',
  'type': ['Grass', 'Poison'],
  'total': 405,
  'hp': 60,
  'attack': 62}]
</code></pre>
<p>æˆ‘ä»¬å‡†å¤‡çš„pokemon.jsonåˆ—è¡¨ä¸­å¤§æ¦‚æœ‰800ä¸ªå­—å…¸ï¼Œæ•°é‡çº§åˆšåˆšå¥½ï¼Œä¸ä¼šå› ä¸ºå¤ªå¤§å¯¼è‡´ç”µè„‘æ— æ³•è¿è¡Œæ•°æ®åˆ†æï¼Œä¹Ÿä¸ä¼šå¤ªå°å¯¼è‡´æ‰‹åŠ¨æ“ä½œæ€§ä»·æ¯”æ›´é«˜ã€‚</p>
<br>
<br>
<h2 id="example">Example</h2>
<h3 id="åŸºæœ¬æ“ä½œ">åŸºæœ¬æ“ä½œ</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">list_of_dicts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">}</span>
<span class="p">]</span>

<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">list_of_dicts</span><span class="p">)</span>
 <span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">])</span>
 <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">])</span>
 <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div><pre><code>[{'a': 2, 'b': 4, 'c': 6}, 
{'a': 7, 'b': 2, 'c': 9}, 
{'a': 3, 'b': 6, 'c': 9}]
</code></pre>
<br>
<h3 id="ä»£ç è§£æ">ä»£ç è§£æ</h3>
<p><strong>Step1</strong></p>
<p>é¦–å…ˆä½¿ç”¨<strong>mutate</strong>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä»¥åœ¨æ¯æ¡è®°å½•ä¸­ç”Ÿæˆæ–°å˜é‡ã€‚</p>

<figure >
    
        <img src="img/first-mutate.png" width="800" />
    
    
</figure>

<p>ç»“ç®—ç»“æœä»ä¸ºClumperç±»</p>
<p><strong>Step2</strong></p>
<p>æ¥ä¸‹æ¥å¯¹mutateä¹‹åçš„æ•°æ®è¿›è¡Œæ’åº</p>

<figure >
    
        <img src="img/then-sort.png" width="800" />
    
    
</figure>

<p>å¾—åˆ°çš„ç»“æœä»ä¸ºClumperç±»ã€‚</p>
<p>ä»ä¸Šé¢çš„å°ä»£ç æ¡ˆä¾‹ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æ•´å¥—æµç¨‹åƒæ˜¯ä¸€ä¸ªæµæ°´çº¿è½¦é—´ï¼Œæ¯ä¸€è¡Œå°±æ˜¯ä¸€ä¸ªç”Ÿæˆç¯èŠ‚ï¼Œç”Ÿäº§ç¯èŠ‚ä¹‹é—´ä½¿ç”¨.è¿æ¥èµ·æ¥ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>
    
<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">pokemon</span><span class="p">)</span>
 <span class="o">.</span><span class="n">keep</span><span class="p">(</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span>  <span class="c1">#ä¿ç•™typeé•¿åº¦ä¸º1çš„å­—å…¸</span>
 <span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="c1">#typeå€¼ä»åˆ—è¡¨å˜ä¸ºå­—ç¬¦ä¸²</span>
         <span class="n">ratio</span><span class="o">=</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;attack&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;hp&#39;</span><span class="p">])</span> <span class="c1">#æ–°å»ºratio</span>
 <span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;ratio&#39;</span><span class="p">)</span>   <span class="c1">#å­—å…¸æœ€ååªä¿ç•™nameï¼Œ typeï¼Œ ratioä¸‰ä¸ªå­—æ®µ</span>
 <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;ratio&#39;</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1">#æŒ‰ç…§ratioé™åºæ’åˆ—</span>
 <span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="c1">#åªä¿ç•™å‰5ä¸ª</span>
 <span class="o">.</span><span class="n">collect</span><span class="p">()</span> <span class="c1">#è½¬æˆåˆ—è¡¨æ˜¾ç¤º</span>
<span class="p">)</span>
</code></pre></div><p><br><br></p>
<h2 id="common-verbs">Common Verbs</h2>
<h3 id="keep">Keep</h3>
<p>keepå‡½æ•°å¯ä»¥ä»åŸå§‹æ•°æ®ä¸­æŠ½å–ç¬¦åˆæŒ‡å®šæ¡ä»¶çš„å­é›†ã€‚

<figure >
    
        <img src="img/keep.png" />
    
    
</figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">list_dicts</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> 
              <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> 
              <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span> 
              <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}]</span>

<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">list_dicts</span><span class="p">)</span>
 <span class="o">.</span><span class="n">keep</span><span class="p">(</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">)</span>
 <span class="o">.</span><span class="n">collect</span><span class="p">()</span>  <span class="c1">#è¯•ä¸€è¯•å»æ‰.collect()åçš„æ•ˆæœ</span>
<span class="p">)</span>
</code></pre></div><pre><code>[{'a': 3}, 
{'a': 4}]
</code></pre>
<p>å¯ä»¥å®ç°ç¼ºå¤±å€¼å¤„ç†ï¼Œä»¥ä¸åŒçš„æ–¹å¼å®ç°pandasçš„<code>.dropna()</code>çš„åŠŸèƒ½ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>
<span class="p">]</span>

<span class="c1">#åªä¿ç•™å«æœ‰bçš„å­—æ®µ</span>
<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
 <span class="o">.</span><span class="n">keep</span><span class="p">(</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
 <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div><pre><code>[{'a': 1, 'b': 4}, 
{'a': 2, 'b': 3}, 
{'a': 3, 'b': 2}]
</code></pre>
<h3 id="mutate">Mutate</h3>
<p>mutateå¯ä»¥åœ¨æ¯æ¡è®°å½•ä¸­ï¼Œåˆ›å»ºæ–°å­—æ®µã€æ”¹å†™æ—§å­—æ®µã€‚

<figure >
    
        <img src="img/mutate.png" width="800" />
    
    
</figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">list_dicts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span><span class="mi">4</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">}]</span>

<span class="c1">#æ–°å»ºäº†cå’Œså­—æ®µ</span>
<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">list_dicts</span><span class="p">)</span>
 <span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">],</span>
         <span class="n">s</span><span class="o">=</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">])</span>
 <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div><pre><code>[{'a': 1, 'b': 2, 'c': 3, 's': 6},
 {'a': 2, 'b': 3, 'c': 5, 's': 10},
 {'a': 1, 'b': 6, 'c': 7, 's': 14}]
</code></pre>
<h3 id="sort">Sort</h3>
<p>sortå¯ä»¥å®ç°æ’åº

<figure >
    
        <img src="img/sort.png" width="800" />
    
    
</figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">list_dicts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}]</span>

<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">list_dicts</span><span class="p">)</span>
  <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">])</span> <span class="c1">#é»˜è®¤å‡åº</span>
  <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div><pre><code>[{'a': 2, 'b': 1}, 
{'a': 1, 'b': 2}, 
{'a': 3, 'b': 3}]
</code></pre>
<h3 id="select">Select</h3>
<p>selectæŒ‘é€‰æ¯æ¡è®°å½•ä¸­çš„æŸä¸ª(äº›)å­—æ®µ

<figure >
    
        <img src="img/select.png" width="800" />
    
    
</figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">list_dicts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span><span class="mi">4</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">}]</span>

<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">list_dicts</span><span class="p">)</span>
 <span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
 <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div><pre><code>[{'a': 1}, 
{'a': 2}, 
{'a': 1}]
</code></pre>
<h3 id="drop">Drop</h3>
<p>å‰”é™¤æŸä¸ªï¼ˆäº›ï¼‰å­—æ®µã€‚

<figure >
    
        <img src="img/drop.png" width="800" />
    
    
</figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">list_dicts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span><span class="mi">4</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">}]</span>

<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">list_dicts</span><span class="p">)</span>
 <span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>
 <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div><pre><code>[{'a': 1, 'b': 2}, 
{'a': 2, 'b': 3}, 
{'a': 1, 'b': 6}]
</code></pre>
<h3 id="groupby">GroupBy</h3>
<p>æ ¹æ®æŸä¸ªï¼ˆäº›ï¼‰å­—æ®µå¯¹æ•°æ®é›†è¿›è¡Œåˆ†ç»„ï¼Œå¾—åˆ°ä¸åŒGroupç±»çš„é›†åˆã€‚ä¸€èˆ¬ä¸<code>.agg()</code>æ–¹æ³•è”åˆä½¿ç”¨ã€‚

<figure >
    
        <img src="img/groupby.png" width="800" />
    
    
</figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">grade_dicts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;ç”·&#39;</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">:</span> <span class="mi">98</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;å¼ ä¸‰&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;å¥³&#39;</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">:</span> <span class="mi">88</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;ç‹äº”&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;å¥³&#39;</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">:</span> <span class="mi">99</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;èµµå…­&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;ç”·&#39;</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">:</span> <span class="mi">58</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;æå››&#39;</span><span class="p">}]</span>

<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">grade_dicts</span><span class="p">)</span>
 <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s2">&#34;gender&#34;</span><span class="p">)</span>
 <span class="o">.</span><span class="n">groups</span><span class="o">==</span><span class="p">(</span><span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="p">)</span>
<span class="p">)</span>
</code></pre></div><pre><code>True
</code></pre>
<h3 id="ungroup">Ungroup</h3>
<p>GroupByçš„åæ“ä½œ

<figure >
    
        <img src="img/ungroup.png" width="800" />
    
    
</figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">grade_dicts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;ç”·&#39;</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">:</span> <span class="mi">98</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;å¼ ä¸‰&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;å¥³&#39;</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">:</span> <span class="mi">88</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;ç‹äº”&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;å¥³&#39;</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">:</span> <span class="mi">99</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;èµµå…­&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;ç”·&#39;</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">:</span> <span class="mi">58</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;æå››&#39;</span><span class="p">}]</span>

<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">grade_dicts</span><span class="p">)</span>
 <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s2">&#34;gender&#34;</span><span class="p">)</span>
 <span class="o">.</span><span class="n">ungroup</span><span class="p">()</span><span class="o">.</span><span class="n">groups</span> <span class="o">==</span> <span class="nb">tuple</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div><pre><code>True
</code></pre>
<p><br><br></p>
<h1 id="about-groups">About Groups</h1>
<h3 id="agg">Agg</h3>
<p>èšåˆæè¿°æ€§ç»Ÿè®¡æ–¹æ³•</p>
<p>aggå¦‚ä¸‹å›¾ï¼Œå¯ä»¥ç†è§£æˆä¸‰ä¸ªæ­¥éª¤ï¼Œå³group-&gt;split-&gt;summary

<figure >
    
        <img src="img/split-apply-combine.png" width="800" />
    
    
</figure>
</p>
<p>å¸¸ç”¨çš„æè¿°æ€§ç»Ÿè®¡å‡½æ•°æœ‰ï¼š <code>meanã€countã€unqiueã€n_uniqueã€sumã€minå’Œmax</code></p>
<p>æ±‚å­¦ç”Ÿçš„å¹³å‡æˆç»©ã€æœ€ä¼˜å’Œæœ€å·®æˆç»©</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">grade_dicts</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;ç”·&#39;</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">:</span> <span class="mi">98</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;å¼ ä¸‰&#39;</span><span class="p">},</span>    
               <span class="p">{</span><span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;å¥³&#39;</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">:</span> <span class="mi">88</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;ç‹äº”&#39;</span><span class="p">},</span>    
               <span class="p">{</span><span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;å¥³&#39;</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">:</span> <span class="mi">99</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;èµµå…­&#39;</span><span class="p">},</span>    
               <span class="p">{</span><span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;ç”·&#39;</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">:</span> <span class="mi">58</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;æå››&#39;</span><span class="p">}]</span>

<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">grade_dicts</span><span class="p">)</span> 
 <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">mean_grade</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;grade&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">),</span>      
      <span class="n">max_grade</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;grade&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">),</span>      
      <span class="n">min_grade</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;grade&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">))</span> 
 <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div><pre><code>[{'mean_grade': 85.75, 'max_grade': 99, 'min_grade': 58}]
</code></pre>
<p>æ±‚ç”·ç”Ÿå’Œå¥³ç”Ÿå„è‡ªçš„å¹³å‡æˆç»©ã€æœ€ä¼˜å’Œæœ€å·®æˆç»©</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">grade_dicts</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;ç”·&#39;</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">:</span> <span class="mi">98</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;å¼ ä¸‰&#39;</span><span class="p">},</span>    
               <span class="p">{</span><span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;å¥³&#39;</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">:</span> <span class="mi">88</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;ç‹äº”&#39;</span><span class="p">},</span>    
               <span class="p">{</span><span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;å¥³&#39;</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">:</span> <span class="mi">99</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;èµµå…­&#39;</span><span class="p">},</span>    
               <span class="p">{</span><span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;ç”·&#39;</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">:</span> <span class="mi">58</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;æå››&#39;</span><span class="p">}]</span>

<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">grade_dicts</span><span class="p">)</span> 
 <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">&#39;gender&#39;</span><span class="p">)</span> 
 <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">mean_grade</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;grade&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">),</span>      
      <span class="n">max_grade</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;grade&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">),</span>      
      <span class="n">min_grade</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;grade&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">))</span> 
 <span class="o">.</span><span class="n">collect</span><span class="p">())</span>
</code></pre></div><pre><code>[{'gender': 'ç”·', 'mean_grade': 78, 'max_grade': 98, 'min_grade': 58}, 
{'gender': 'å¥³', 'mean_grade': 93.5, 'max_grade': 99, 'min_grade': 88}]
</code></pre>
<h3 id="collect">Collect</h3>
<p>ä¸€èˆ¬Clumperå‡½æ•°è¿”å›çš„ç»“æœæ˜¾ç¤ºä¸ºClumperç±»ï¼Œæ˜¯çœ‹ä¸åˆ°å…·ä½“å†…å®¹çš„ã€‚</p>
<p>collectä½œç”¨ä¸»è¦æ˜¯å±•å¼€æ˜¾ç¤ºã€‚

<figure >
    
        <img src="img/collect.png" width="800" />
    
    
</figure>
</p>
<h3 id="å‰”é™¤é‡å¤">å‰”é™¤é‡å¤</h3>
<p>å‰”é™¤é‡å¤å†…å®¹

<figure >
    
        <img src="img/drop_duplicates.png" width="800" />
    
    
</figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}]</span>

<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> 
 <span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span> 
 <span class="o">.</span><span class="n">collect</span><span class="p">()</span> 
<span class="p">)</span>
</code></pre></div><pre><code>[{'a': 1}, {'a': 2}]
</code></pre>
<hr>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">### ä»€ä¹ˆæ˜¯Groupï¼Ÿ</span>
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">list_dicts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">}</span>
<span class="p">]</span>

<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">list_dicts</span><span class="p">)</span>
  <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">&#39;grp&#39;</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div><pre><code>&lt;Clumper groups=('grp',) len=5 @0x103cb0290&gt;
</code></pre>
<p>å½“å‰çš„groupä»¥grpä½œä¸ºå…³é”®è¯

<figure >
    
        <img src="img/add_grp.png" width="800" />
    
    
</figure>
</p>
<p>ç°åœ¨ç»è¿‡ <code>.group_by('grp')</code>æ“ä½œåï¼Œè¯´æ˜ä½ å¯¹æ¯ä¸ªgrpç»„æ„Ÿå…´è¶£ã€‚å…·ä½“ä¸€ç‚¹ï¼Œä¸€ä¸ªç»„æ˜¯<code>{'grp': 'a'}</code>, å¦ä¸€ä¸ªç»„æ˜¯<code>{'grp': 'b'}.</code></p>
<h3 id="agg-1">Agg</h3>
<h4 id="without-groups">without groups</h4>

<figure >
    
        <img src="img/agg-without-group.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">list_dicts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">}</span>
<span class="p">]</span>

<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">list_dicts</span><span class="p">)</span>
  <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;sum&#39;</span><span class="p">),</span>
       <span class="n">m</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">))</span>
  <span class="o">.</span><span class="n">collect</span><span class="p">())</span>
</code></pre></div><pre><code>[{'s': 29, 'm': 5.8}]
</code></pre>
<h4 id="with-groups">with groups</h4>
<p>åˆ†åˆ«è®¡ç®—ç»„grp=aã€ç»„grp=bçš„sumå’Œmean

<figure >
    
        <img src="img/agg-with-group.png" width="800" />
    
    
</figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">list_dicts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">}</span>
<span class="p">]</span>

<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">list_dicts</span><span class="p">)</span>
  <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">&#39;grp&#39;</span><span class="p">)</span>
  <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;sum&#39;</span><span class="p">),</span>
       <span class="n">m</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">))</span>
  <span class="o">.</span><span class="n">collect</span><span class="p">())</span>
</code></pre></div><pre><code>[{'grp': 'a', 's': 18, 'm': 6}, 
{'grp': 'b', 's': 11, 'm': 5.5}]
</code></pre>
<h4 id="aggå†…ç½®çš„ç»Ÿè®¡å‡½æ•°å">aggå†…ç½®çš„ç»Ÿè®¡å‡½æ•°å</h4>
<p>å†…ç½®çš„ç»Ÿè®¡å‡½æ•°ï¼Œå¯ç›´æ¥é€šè¿‡å­—ç¬¦ä¸²è°ƒç”¨</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="p">{</span>
  <span class="s2">&#34;mean&#34;</span><span class="p">:</span> <span class="n">mean</span><span class="p">,</span>
  <span class="s2">&#34;count&#34;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">),</span>
  <span class="s2">&#34;unique&#34;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">d</span><span class="p">)),</span>
  <span class="s2">&#34;n_unique&#34;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">d</span><span class="p">)),</span>
  <span class="s2">&#34;sum&#34;</span><span class="p">:</span> <span class="nb">sum</span><span class="p">,</span>
  <span class="s2">&#34;min&#34;</span><span class="p">:</span> <span class="nb">min</span><span class="p">,</span>
  <span class="s2">&#34;max&#34;</span><span class="p">:</span> <span class="nb">max</span><span class="p">,</span>
  <span class="s2">&#34;median&#34;</span><span class="p">:</span> <span class="n">median</span><span class="p">,</span>
  <span class="s2">&#34;var&#34;</span><span class="p">:</span> <span class="n">variance</span><span class="p">,</span>
  <span class="s2">&#34;std&#34;</span><span class="p">:</span> <span class="n">stdev</span><span class="p">,</span>
  <span class="s2">&#34;values&#34;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="p">,</span>
  <span class="s2">&#34;first&#34;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
  <span class="s2">&#34;last&#34;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
<span class="p">}</span>
</code></pre></div><h3 id="transform">Transform</h3>
<p><code>.transform()</code>ä¸<code>.agg()</code>ç±»ä¼¼ã€‚ä¸»è¦çš„åŒºåˆ«æ˜¯transformå¤„ç†è¿‡ç¨‹ä¸­ï¼Œè®°å½•æ•°å’Œå­—æ®µæ•°ä¸ä¼šå‡ºç°å‹ç¼©ã€‚</p>
<h4 id="without-groups-1">without groups</h4>

<figure >
    
        <img src="img/transform-without-groups.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s2">&#34;grp&#34;</span><span class="p">:</span> <span class="s2">&#34;a&#34;</span><span class="p">},</span>    
        <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&#34;grp&#34;</span><span class="p">:</span> <span class="s2">&#34;b&#34;</span><span class="p">},</span>    
        <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s2">&#34;grp&#34;</span><span class="p">:</span> <span class="s2">&#34;a&#34;</span><span class="p">},</span>    
        <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="s2">&#34;grp&#34;</span><span class="p">:</span> <span class="s2">&#34;b&#34;</span><span class="p">},</span>    
        <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&#34;grp&#34;</span><span class="p">:</span> <span class="s2">&#34;a&#34;</span><span class="p">}]</span>

<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> 
 <span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">,</span> <span class="s2">&#34;sum&#34;</span><span class="p">),</span>            
            <span class="n">u</span><span class="o">=</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">,</span> <span class="s2">&#34;unique&#34;</span><span class="p">))</span> 
 <span class="o">.</span><span class="n">collect</span><span class="p">())</span>
</code></pre></div><pre><code>[{'a': 6, 'grp': 'a', 's': 29, 'u': [2, 5, 6, 7, 9]}, 
{'a': 2, 'grp': 'b', 's': 29, 'u': [2, 5, 6, 7, 9]}, 
{'a': 7, 'grp': 'a', 's': 29, 'u': [2, 5, 6, 7, 9]},
{'a': 9, 'grp': 'b', 's': 29, 'u': [2, 5, 6, 7, 9]}, 
{'a': 5, 'grp': 'a', 's': 29, 'u': [2, 5, 6, 7, 9]}]
</code></pre>
<h4 id="with-groups-1">with groups</h4>

<figure >
    
        <img src="img/transform-with-groups.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s2">&#34;grp&#34;</span><span class="p">:</span> <span class="s2">&#34;a&#34;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&#34;grp&#34;</span><span class="p">:</span> <span class="s2">&#34;b&#34;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s2">&#34;grp&#34;</span><span class="p">:</span> <span class="s2">&#34;a&#34;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="s2">&#34;grp&#34;</span><span class="p">:</span> <span class="s2">&#34;b&#34;</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&#34;grp&#34;</span><span class="p">:</span> <span class="s2">&#34;a&#34;</span><span class="p">}</span>
<span class="p">]</span>

<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
 <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s2">&#34;grp&#34;</span><span class="p">)</span>
 <span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">,</span> <span class="s2">&#34;sum&#34;</span><span class="p">),</span>
            <span class="n">u</span><span class="o">=</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">,</span> <span class="s2">&#34;unique&#34;</span><span class="p">))</span>
 <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div><pre><code>[{'a': 6, 'grp': 'a', 's': 18, 'u': [5, 6, 7]},
 {'a': 7, 'grp': 'a', 's': 18, 'u': [5, 6, 7]},
 {'a': 5, 'grp': 'a', 's': 18, 'u': [5, 6, 7]},
 {'a': 2, 'grp': 'b', 's': 11, 'u': [9, 2]},
 {'a': 9, 'grp': 'b', 's': 11, 'u': [9, 2]}]
</code></pre>
<h3 id="mutate-1">Mutate</h3>
<p>clumperåº“ä¸­çš„<code>row_number</code>å¯ä»¥ç»™æ¯æ¡è®°å½•æ˜¾ç¤ºç´¢å¼•ä½ç½®ï¼ˆç¬¬å‡ ä¸ªï¼‰ã€‚</p>
<h4 id="without-groups-2">without groups</h4>

<figure >
    
        <img src="img/mutate-without-group.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>
<span class="kn">from</span> <span class="nn">clumper.sequence</span> <span class="kn">import</span> <span class="n">row_number</span>

<span class="n">list_dicts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">}</span>
<span class="p">]</span>

<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">list_dicts</span><span class="p">)</span>
  <span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">row_number</span><span class="p">())</span>
  <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div><pre><code>[{'a': 6, 'grp': 'a', 'index': 1},
 {'a': 2, 'grp': 'b', 'index': 2},
 {'a': 7, 'grp': 'a', 'index': 3},
 {'a': 4, 'grp': 'b', 'index': 4},
 {'a': 5, 'grp': 'a', 'index': 5}]
</code></pre>
<h4 id="with-groups-2">with groups</h4>

<figure >
    
        <img src="img/mutate-with-group.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>
<span class="kn">from</span> <span class="nn">clumper.sequence</span> <span class="kn">import</span> <span class="n">row_number</span>

<span class="n">list_dicts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">}</span>
<span class="p">]</span>

<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">list_dicts</span><span class="p">)</span>
  <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">&#39;grp&#39;</span><span class="p">)</span>
  <span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">row_number</span><span class="p">())</span>
  <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div><pre><code>[{'a': 6, 'grp': 'a', 'index': 1},
 {'a': 7, 'grp': 'a', 'index': 2},
 {'a': 5, 'grp': 'a', 'index': 3},
 {'a': 2, 'grp': 'b', 'index': 1},
 {'a': 4, 'grp': 'b', 'index': 2}]
</code></pre>
<h3 id="sort-1">Sort</h3>
<p>æ’åº, é»˜è®¤å‡åº</p>
<h4 id="without-groups-3">without groups</h4>

<figure >
    
        <img src="img/sort-no-group.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">list_dicts</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">},</span>    
              <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">},</span>    
              <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">},</span>    
              <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">},</span>    
              <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">}]</span>

<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">list_dicts</span><span class="p">)</span> <span class="c1">#æ ¹æ®å­—æ®µaè¿›è¡Œæ’åº  </span>
 <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">])</span>  
 <span class="o">.</span><span class="n">collect</span><span class="p">())</span>
</code></pre></div><pre><code>[{'a': 2, 'grp': 'b'}, 
{'a': 5, 'grp': 'a'}, 
{'a': 6, 'grp': 'a'}, 
{'a': 7, 'grp': 'a'}, 
{'a': 9, 'grp': 'b'}]
</code></pre>
<h4 id="with-groups-3">with groups</h4>

<figure >
    
        <img src="img/sort-with-group.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">list_dicts</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">},</span>    
              <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">},</span>    
              <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">},</span>    
              <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">},</span>    
              <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">}]</span>

<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">list_dicts</span><span class="p">)</span>  
 <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s1">&#39;grp&#39;</span><span class="p">)</span>  
 <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">])</span>  
 <span class="o">.</span><span class="n">collect</span><span class="p">())</span>
</code></pre></div><pre><code>[{'a': 5, 'grp': 'a'}, 
{'a': 6, 'grp': 'a'}, 
{'a': 7, 'grp': 'a'}, 
{'a': 2, 'grp': 'b'}, 
{'a': 9, 'grp': 'b'}]
</code></pre>
<h3 id="ungroup-1">Ungroup</h3>
<p>æœ€åï¼Œå¦‚æœä½ å·²ç»è¿›è¡Œå®Œäº†åˆ†ç»„è®¡ç®—ï¼Œæƒ³å†æ¬¡æ•´åˆèµ·æ¥ï¼Œå–æ¶ˆåˆ†ç»„çŠ¶æ€ï¼Œå¯ä»¥ä½¿ç”¨<code>.ungroup()</code></p>
<p><br><br></p>
<h2 id="merge-verbs">Merge Verbs</h2>
<hr>
<p>å¦‚æœæƒ³å°†å¤šä¸ªè®°å½•æ•´ç†åˆ°ä¸€ä¸ªè®°å½•ä¸­ï¼Œæœ‰å¾ˆå¤šç§å®ç°æ–¹æ³•ã€‚</p>
<h3 id="concat">Concat</h3>
<p>å¦‚æœæƒ³å‚ç›´æ–¹å‘å°†å¤šä¸ªè®°å½•å †å ï¼Œå¯ä»¥ä½¿ç”¨concat

<figure >
    
        <img src="img/concat.png" width="800" />
    
    
</figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">c1</span> <span class="o">=</span> <span class="n">Clumper</span><span class="p">([{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}])</span>
<span class="n">c2</span> <span class="o">=</span> <span class="n">Clumper</span><span class="p">([{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}])</span>
<span class="n">c3</span> <span class="o">=</span> <span class="n">Clumper</span><span class="p">([{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}])</span>

<span class="n">c1</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">c2</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre></div><pre><code>[{'a': 1}, {'a': 2}]
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#ç­‰åŒäºc1.concat(c2).concat(c3).collect()</span>
<span class="n">c1</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">c2</span><span class="p">,</span> <span class="n">c3</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre></div><pre><code>[{'a': 1}, {'a': 2}, {'a': 3}]
</code></pre>
<h3 id="joins">Joins</h3>
<p>Joinsç±»ä¼¼äºæ•°å­¦é‡Œçš„äº¤é›†ã€å¹¶é›†çš„ï¼Œå¤§è‡´æœ‰ä»¥ä¸‹å››ç§ï¼Œ

<figure >
    
        <img src="img/LeftRight.png" width="800" />
    
    
</figure>
</p>
<h4 id="left-join">left join</h4>
<p>å·¦è¿æ¥ï¼Œä»¥å·¦ä¸ºä¸»ï¼Œè¡¨ç¤ºä»¥table1ä¸ºä¸»ï¼Œå…³è”ä¸Štable2çš„æ•°æ®ï¼Œç»“æœæ˜¾ç¤ºtable1çš„æ‰€æœ‰æ•°æ®ï¼Œç„¶åtable2æ˜¾ç¤ºçš„æ˜¯å’Œtable1æœ‰äº¤é›†éƒ¨åˆ†çš„æ•°æ®ã€‚

<figure >
    
        <img src="img/left_join.png" width="800" />
    
    
</figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">left</span> <span class="o">=</span> <span class="n">Clumper</span><span class="p">([</span>
    <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">:</span> <span class="mi">6</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">:</span> <span class="mi">8</span><span class="p">},</span>
<span class="p">])</span>

<span class="n">right</span> <span class="o">=</span> <span class="n">Clumper</span><span class="p">([</span>
    <span class="p">{</span><span class="s2">&#34;c&#34;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;c&#34;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">:</span> <span class="mi">5</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;c&#34;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">:</span> <span class="mi">6</span><span class="p">},</span>
<span class="p">])</span>

<span class="c1">#æ ¹æ®bè¿›è¡Œå·¦å³ä¸¤è¡¨çš„åˆå¹¶</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">left</span><span class="o">.</span><span class="n">inner_join</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&#34;b&#34;</span><span class="p">:</span> <span class="s2">&#34;b&#34;</span><span class="p">})</span>
<span class="n">result</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre></div><pre><code>[{'a': 1, 'b': 4, 'c': 9}, {'a': 2, 'b': 6, 'c': 7}]
</code></pre>
<h4 id="inner-join">inner join</h4>
<p>å†…è¿æ¥ï¼Œ äº¤é›†</p>

<figure >
    
        <img src="img/inner_join.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">left</span> <span class="o">=</span> <span class="n">Clumper</span><span class="p">([</span>
    <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">:</span><span class="mi">4</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">:</span><span class="mi">6</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">:</span><span class="mi">8</span><span class="p">},</span>
<span class="p">])</span>

<span class="n">right</span> <span class="o">=</span> <span class="n">Clumper</span><span class="p">([</span>
    <span class="p">{</span><span class="s2">&#34;c&#34;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">:</span><span class="mi">4</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;c&#34;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">:</span><span class="mi">5</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&#34;c&#34;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">:</span><span class="mi">6</span><span class="p">},</span>
<span class="p">])</span>


<span class="n">result</span> <span class="o">=</span> <span class="n">left</span><span class="o">.</span><span class="n">inner_join</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&#34;b&#34;</span><span class="p">:</span> <span class="s2">&#34;b&#34;</span><span class="p">})</span>
<span class="n">result</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre></div><pre><code>[{'a': 1, 'b': 4, 'c': 9}, {'a': 2, 'b': 6, 'c': 7}]
</code></pre>
<hr>
<p><br><br></p>
<h2 id="nested-data">Nested Data</h2>
<p>ç”±äºåµŒå¥—æ•°æ®åºåˆ—ç¡®å®å…·æœ‰å„ç§å½¢çŠ¶å’Œå¤§å°ï¼Œå› æ­¤è¯¥åº“æä¾›äº†å„ç§æ–¹æ³•æ¥å¸®åŠ©æ‚¨å°†æ•°æ®é‡å¡‘ä¸ºä¸åŒçš„æ ¼å¼ã€‚ æœ¬æ–‡æ¡£å°†æ¼”ç¤ºè¿™äº›æ–¹æ³•çš„å·¥ä½œåŸç†ã€‚</p>
<h3 id="explode">Explode</h3>
<p>ç‚¸è£‚ï¼ˆå±•å¼€ï¼‰

<figure >
    
        <img src="img/explode.png" width="800" />
    
    
</figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;ç”·&#39;</span><span class="p">,</span> 
         <span class="s1">&#39;grade&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">80</span><span class="p">,</span> <span class="mi">99</span><span class="p">],</span> 
         <span class="s1">&#39;name&#39;</span><span class="p">:[</span><span class="s1">&#39;å¼ ä¸‰&#39;</span><span class="p">,</span> <span class="s1">&#39;æå››&#39;</span><span class="p">]}]</span>

<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
 <span class="o">.</span><span class="n">explode</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;grade&#39;</span><span class="p">)</span>
 <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div><pre><code>[{'gender': 'ç”·', 'grade': 80, 'name': 'å¼ ä¸‰'},
 {'gender': 'ç”·', 'grade': 99, 'name': 'å¼ ä¸‰'},
 {'gender': 'ç”·', 'grade': 80, 'name': 'æå››'},
 {'gender': 'ç”·', 'grade': 99, 'name': 'æå››'}]
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>


<span class="n">data</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;ç”·&#39;</span><span class="p">,</span> 
         <span class="s1">&#39;grade&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">80</span><span class="p">,</span> <span class="mi">99</span><span class="p">],</span> 
         <span class="s1">&#39;name&#39;</span><span class="p">:[</span><span class="s1">&#39;å¼ ä¸‰&#39;</span><span class="p">,</span> <span class="s1">&#39;æå››&#39;</span><span class="p">]}]</span>

<span class="c1">#.explode(&#39;name&#39;, &#39;grade&#39;)ç•¥å¾®æœ‰äº›åŒºåˆ«</span>
<span class="c1">#è¯·æŸ¥çœ‹ä¸¤è€…è¿è¡Œç»“æœ</span>
<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
 <span class="o">.</span><span class="n">explode</span><span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="s1">&#39;grade&#39;</span><span class="p">)</span>
 <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div><pre><code>[{'gender': 'ç”·', 'item': 'å¼ ä¸‰', 'val': 80},
 {'gender': 'ç”·', 'item': 'å¼ ä¸‰', 'val': 99},
 {'gender': 'ç”·', 'item': 'æå››', 'val': 80},
 {'gender': 'ç”·', 'item': 'æå››', 'val': 99}]
</code></pre>
<h3 id="unpack">Unpack</h3>
<p>ä¸explodeç±»ä¼¼

<figure >
    
        <img src="img/unpack.png" width="800" />
    
    
</figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">list_dicts</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;rows&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}]</span>
<span class="p">}</span>

<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">list_dicts</span><span class="p">)</span>
 <span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;rows&#39;</span><span class="p">)</span>
 <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div><pre><code>[{'a': 1, 'b': 2, 'c': 3}, 
{'a': 1, 'b': 3}, 
{'a': 1, 'b': 4}]
</code></pre>
<h3 id="flatten-keys">Flatten keys</h3>

<figure >
    
        <img src="img/flatten_keys.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;feature_1&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;propery_1&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;property_2&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
  <span class="s1">&#39;feature_2&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;propery_1&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;property_2&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>
  <span class="s1">&#39;feature_3&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;propery_1&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;property_2&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">},</span>
<span class="p">}</span>


<span class="p">(</span><span class="n">Clumper</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">listify</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
 <span class="o">.</span><span class="n">flatten_keys</span><span class="p">()</span>
 <span class="o">.</span><span class="n">collect</span><span class="p">()</span> 
<span class="p">)</span>
</code></pre></div><pre><code>[{'propery_1': 1, 'property_2': 2, 'key': 'feature_1'},
 {'propery_1': 3, 'property_2': 4, 'key': 'feature_2'},
 {'propery_1': 5, 'property_2': 6, 'key': 'feature_3'}]
</code></pre>
<p><br><br></p>
<h2 id="summary-methods">Summary Methods</h2>
<p>Clumperæ”¯æŒå¸¸ç”¨çš„ç»Ÿè®¡æ€§æ–¹æ³•ï¼Œè¯¸å¦‚meanã€maxã€minç­‰</p>
<h3 id="mean">mean</h3>

<figure >
    
        <img src="img/mean.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">list_of_dicts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">Clumper</span><span class="p">(</span><span class="n">list_of_dicts</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>3.5
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">Clumper</span><span class="p">(</span><span class="n">list_of_dicts</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="s2">&#34;b&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>6.666666666666667
</code></pre>
<h3 id="count">count</h3>
<p>ç»Ÿè®¡è®°å½•æ•°

<figure >
    
        <img src="img/count.png" width="800" />
    
    
</figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">list_of_dicts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">}</span>
<span class="p">]</span>

<span class="c1">#å«æœ‰açš„ä¸€å…±æœ‰å¤šå°‘æ¡è®°å½•</span>
<span class="n">Clumper</span><span class="p">(</span><span class="n">list_of_dicts</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>4
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">Clumper</span><span class="p">(</span><span class="n">list_of_dicts</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&#34;b&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>3
</code></pre>
<h3 id="unique">unique</h3>
<p>æ±‡æ€»æŸå­—æ®µä¸é‡æ ·çš„å€¼çš„ç§ç±»ï¼Œå¦‚<code>[a, b, a, a]</code>ï¼Œç»è¿‡uniqueåï¼Œè¿”å›<code>[a, b]</code>

<figure >
    
        <img src="img/unique.png" width="800" />
    
    
</figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">list_of_dicts</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>    
                 <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>    
                 <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">},</span>    
                 <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">}]</span>

<span class="n">Clumper</span><span class="p">(</span><span class="n">list_of_dicts</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>[2, 3, 7]
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">Clumper</span><span class="p">(</span><span class="n">list_of_dicts</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="s2">&#34;b&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>[6, 7]
</code></pre>
<h3 id="n_unique">n_unique</h3>
<p>ç»Ÿè®¡æŸå­—æ®µå¯¹åº”çš„å€¼ä¸€ç§æœ‰å¤šå°‘ç§

<figure >
    
        <img src="img/nunique.png" width="800" />
    
    
</figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">list_of_dicts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">Clumper</span><span class="p">(</span><span class="n">list_of_dicts</span><span class="p">)</span><span class="o">.</span><span class="n">n_unique</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>3
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">Clumper</span><span class="p">(</span><span class="n">list_of_dicts</span><span class="p">)</span><span class="o">.</span><span class="n">n_unique</span><span class="p">(</span><span class="s2">&#34;b&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>2
</code></pre>
<h3 id="min">min</h3>

<figure >
    
        <img src="img/min.png" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">list_of_dicts</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>    
                 <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>    
                 <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">},</span>    
                 <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">}]</span>

<span class="n">Clumper</span><span class="p">(</span><span class="n">list_of_dicts</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>2
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">Clumper</span><span class="p">(</span><span class="n">list_of_dicts</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="s2">&#34;b&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>6
</code></pre>
<h3 id="max">max</h3>

<figure >
    
        <img src="img/max.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">clumper</span> <span class="kn">import</span> <span class="n">Clumper</span>

<span class="n">list_of_dicts</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>    
                 <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>    
                 <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">},</span>    
                 <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">}]</span>

<span class="n">Clumper</span><span class="p">(</span><span class="n">list_of_dicts</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>7
</code></pre>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">Clumper</span><span class="p">(</span><span class="n">list_of_dicts</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="s2">&#34;b&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>7
</code></pre>
<br>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Jaalåº“~è½»æ¾ç»˜åˆ¶åŠ¨æ€ç¤¾äº¤ç½‘ç»œå…³ç³»å›¾</title>
      <link>https://hidadeng.github.io/blog/jaal_social_network_visualization/</link>
      <pubDate>Sat, 08 May 2021 16:40:10 +0600</pubDate>
      
      <guid>/blog/jaal_social_network_visualization/</guid>
      <description>æœ€ç®€å•å¥½ç”¨çš„ç¤¾äº¤ç½‘ç»œå¯è§†åŒ–åŒ…</description>
      <content:encoded><![CDATA[<p>Jaalæ˜¯åŸºäºDashå’ŒVisdccæ„å»ºçš„å¯äº¤äº’çš„Pythonç¤¾äº¤ç½‘ç»œåº“ã€‚ç”±äºåº•å±‚ä½¿ç”¨äº†dashï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¤ä¸ºjaalæ›´åƒæ˜¯ä¸€ä¸ªä»ªè¡¨ç›˜ã€‚åŸºäºæ­¤ï¼Œjaalä¹Ÿæä¾›äº†å¤šç§å¤„ç†ç½‘ç»œæ•°æ®çš„å¯é€‰é¡¹ï¼Œä¾‹å¦‚æœç´¢ã€è¿‡æ»¤ã€ç»™èŠ‚ç‚¹ï¼ˆè¾¹ï¼‰ä¸Šè‰²ç­‰ã€‚æ‰€æœ‰çš„æ“ä½œï¼Œä¸¤ä¸‰è¡Œä»£ç å³å¯æå®šã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="err">!</span><span class="n">pip3</span> <span class="n">install</span> <span class="n">jaal</span>
</code></pre></div><br>
<h2 id="ä¸€å¿«é€Ÿä¸Šæ‰‹">ä¸€ã€å¿«é€Ÿä¸Šæ‰‹</h2>
<p>æœ¬æ–‡å‡†å¤‡äº†ã€Šæƒåˆ©çš„æ¸¸æˆã€‹çš„èŠ‚ç‚¹nodes.csvå’Œè¾¹edges.csvæ•°æ®ï¼Œ å¯ä»¥ä½¿ç”¨jaalçš„plot()å‡½æ•°ç»˜åˆ¶ã€Šæƒåˆ©çš„æ¸¸æˆã€‹å…³ç³»ç½‘ç»œå›¾ã€‚ å¿…é¡»æœ‰çš„å­—æ®µï¼Œè¿™é‡ŒåŠ ç²—äº†
nodes.csvæ•°æ®å«</p>
<ul>
<li><strong>from</strong>: èŠ‚ç‚¹</li>
<li><strong>to</strong>:  èŠ‚ç‚¹</li>
<li>weight: è¾¹æƒé‡</li>
<li>strenth:</li>
</ul>
<p>edges.csvæ•°æ®</p>
<ul>
<li><strong>id</strong> èŠ‚ç‚¹idï¼Œå§“å</li>
<li>gender èŠ‚ç‚¹çš„æ€§åˆ«</li>
</ul>

<figure >
    
        <img src="img/%e6%9d%83%e5%88%a9%e7%9a%84%e6%b8%b8%e6%88%8f.png" width="800" />
    
    
</figure>

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">jaal</span> <span class="kn">import</span> <span class="n">Jaal</span>

<span class="n">edge_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;edges.csv&#39;</span><span class="p">)</span>
<span class="n">node_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;nodes.csv&#39;</span><span class="p">)</span>
<span class="n">Jaal</span><span class="p">(</span><span class="n">edge_df</span><span class="p">,</span> <span class="n">node_df</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</code></pre></div><p>è¿è¡Œä»£ç åï¼Œä¼šç”Ÿæˆä¸€ä¸ªæœ¬åœ°æœåŠ¡é“¾æ¥ï¼Œä¾‹å¦‚ http://127.0.0.1:8050/ ï¼Œ ç‚¹å‡»é“¾æ¥ï¼Œæµè§ˆå™¨å°±èƒ½çœ‹åˆ°</p>

<figure >
    
        <img src="img/%e7%bd%91%e7%bb%9c%e5%9b%be.png" width="800" />
    
    
</figure>

<br>
<h2 id="äºŒjaalåŠŸèƒ½">äºŒã€JaalåŠŸèƒ½</h2>
<ul>
<li><strong>è®¾ç½®é¢æ¿</strong>  Jaalè¿è¡Œäº§ç”Ÿçš„æµè§ˆå™¨ç•Œé¢å·¦ä¾§ä¼šæœ‰ä¸€ä¸ªè®¾ç½®é¢æ¿ï¼Œå¯ä»¥å¯¹æ•°æ®è¿›è¡Œæœç´¢ã€ç­›é€‰ã€ä¸Šè‰²ã€‚</li>
<li><strong>æœç´¢</strong> å¯ä»¥é«˜äº®æœç´¢åˆ°çš„èŠ‚ç‚¹</li>
<li><strong>è¿‡æ»¤</strong> æ”¯æŒpandasçš„queryè¯­æ³•</li>
<li><strong>ä¸Šè‰²</strong> åŸºäºç±»åˆ«ï¼Œå¯¹èŠ‚ç‚¹ã€è¾¹è¿›è¡Œä¸Šè‰²ã€‚èƒ½æœ€å¤šæ”¯æŒ20ä¸ªç±»åˆ«ï¼Œå³èŠ‚ç‚¹ã€è¾¹æ•°æ®å…è®¸æœ‰20ç§å±æ€§</li>
</ul>
<br>
<h2 id="ä¸‰-æ¡ˆä¾‹">ä¸‰ã€ æ¡ˆä¾‹</h2>
<h4 id="31-æœç´¢">3.1 æœç´¢</h4>
<p>ç¬¬ä¸€ä¸ªé€‰é¡¹æ˜¯æœç´¢ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­æœç´¢å›¾ä¸­çš„ç‰¹å®šèŠ‚ç‚¹ã€‚ å®ƒæ”¯æŒåœ¨èŠ‚ç‚¹æ ‡ç­¾ä¸Šé€å­—ç¬¦æœç´¢ã€‚ ä»¥ä¸‹æ˜¯æˆ‘ä»¬å°è¯•æœç´¢â€œ Aryaâ€çš„ç¤ºä¾‹</p>

<figure >
    
        <img src="img/search.gif" width="800" />
    
    
</figure>

<h4 id="32-è¿‡æ»¤">3.2 è¿‡æ»¤</h4>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¿›è¡Œè¿‡æ»¤ã€‚ Jaalæ”¯æŒåœ¨èŠ‚ç‚¹å’Œè¾¹è¦ç´ ä¸Šéƒ½è¿›è¡Œè¿‡æ»¤çš„é€‰é¡¹ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬æä¾›äº†å•ç‹¬çš„æ–‡æœ¬åŒºåŸŸã€‚ ä¸‹é¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°èŠ‚ç‚¹å’Œè¾¹ç¼˜è¿‡æ»¤æŸ¥è¯¢çš„å®æ—¶æ•ˆæœã€‚</p>

<figure >
    
        <img src="img/filter.gif" width="800" />
    
    
</figure>

<h4 id="33-æŸ“è‰²">3.3 æŸ“è‰²</h4>
<p>æœ€åï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›æŸ¥çœ‹ä»»ä½•åŠŸèƒ½çš„æ•´ä½“åˆ†å¸ƒï¼Œè€Œä¸æ˜¯è¿›è¡Œè¿‡æ»¤ã€‚ ç›®å‰ï¼ŒJaalé€šè¿‡æä¾›æ ¹æ®ä»»ä½•åˆ†ç±»ç‰¹å¾ä¸ºèŠ‚ç‚¹æˆ–è¾¹ç¼˜ç€è‰²çš„é€‰é¡¹æ¥è§£å†³æ­¤é—®é¢˜ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨ä¸‹é¢çœ‹åˆ°ä¸€ä¸ªçœŸå®çš„ä¾‹å­ã€‚</p>

<figure >
    
        <img src="img/color.gif" width="800" />
    
    
</figure>

<br>
<h2 id="å››-ä»£ç è·å–">å››ã€ ä»£ç è·å–</h2>
<ol>
<li><a href="%E4%BB%A3%E7%A0%81%E6%95%B0%E6%8D%AE.zip"><strong>ç›´æ¥ä¸‹è½½</strong></a></li>
<li><a href="https://github.com/thunderhit/DaDengAndHisPython">githubæ›´å¤šä»£ç </a></li>
</ol>
<p><br><br></p>
<h2 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>å½“cnsentié‡ä¸Šstreamlit</title>
      <link>https://hidadeng.github.io/blog/cnsenti_streamlit/</link>
      <pubDate>Thu, 07 Jun 2018 10:40:10 +0600</pubDate>
      
      <guid>/blog/cnsenti_streamlit/</guid>
      <description>streamlitæ˜¯webåŒ…ï¼Œcnsentiæ˜¯æ–‡æœ¬åˆ†æåŒ…ï¼Œä¸¤è€…ç»“åˆå³å¯åˆ¶é€ åœ¨çº¿æ–‡æœ¬åˆ†æç½‘ç«™ã€‚</description>
      <content:encoded><![CDATA[<h1 id="cnsentidemo">cnsentiDemo</h1>
<p>è¿™æ˜¯ä½¿ç”¨streamlitåº“å°†ä¸­æ–‡æƒ…æ„Ÿåˆ†æ[<strong>cnsenti</strong> éƒ¨ç½²åˆ°ç½‘ç»œä¸–ç•Œï¼Œå¯<strong>åœ¨çº¿æä¾›ç®€å•çš„ä¸­æ–‡æ–‡æœ¬çš„æƒ…ç»ªåŠæƒ…æ„Ÿè®¡ç®—</strong>ã€‚</p>
<p><strong>streamlitåº“</strong>(<a href="https://docs.streamlit.io/en/stable/">https://docs.streamlit.io/en/stable/</a>)ï¼Œ æ˜¯ç›®å‰ç®€å•æ˜“ç”¨çš„æ•°æ®å¯è§†åŒ–webæ¡†æ¶ï¼Œæ¯”flaskå’Œdjangoå°‘äº†å¾ˆå¤šçš„æ‰©å±•æ€§ï¼Œä½†æ˜¯å®¹æ˜“å­¦ä¹ ä¸Šæ‰‹ï¼Œé€‚åˆåˆå­¦è€…æŠŠç©ã€‚</p>
<iframe
    src="//player.bilibili.com/player.html?bvid=bv17V411H7sZ&page=1"
    scrolling="no"
    height="500px"
    width="800px"
    frameborder="no"
    framespacing="0"
    allowfullscreen="true"
>
</iframe>

<br>
<p><a href="https://cnsenti.herokuapp.com/"><strong>Demo</strong></a>
<img loading="lazy" src="img/%e6%95%88%e6%9e%9c%e5%9b%be.png" alt=""  />
</p>
<p><br><br></p>
<h1 id="ç½‘ç«™">ç½‘ç«™</h1>
<p>ç°åœ¨æŠ€æœ¯æœ‰é™ï¼Œè¯¥ç½‘ç«™å¤§è‡´å†…å®¹åˆ†ä¸ºä¸‰éƒ¨åˆ†</p>
<ul>
<li>å‡†å¤‡æ•°æ®</li>
<li>æ•°æ®åˆ†æ
<ul>
<li>æƒ…æ„Ÿåˆ†æ</li>
<li>è¯äº‘å›¾</li>
</ul>
</li>
<li>è°¢è°¢æ”¯æŒ</li>
</ul>
<p><br><br></p>
<h1 id="æœ¬åœ°ä½¿ç”¨">æœ¬åœ°ä½¿ç”¨</h1>
<p>æœ¬ç½‘ç«™çš„<strong>cnsentiDemoé¡¹ç›®æ–‡ä»¶å¤¹</strong>çš„æ–‡ä»¶æœ‰</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">- main.py
- cnsenti_example.csv
- å¤§é‚“å’Œä»–çš„Python.png
- requirements.txt
- å…¶ä»–æ–‡ä»¶
</code></pre></div><p>å°†cnsentiDemoé¡¹ç›®ä¸‹è½½ï¼Œåœ¨<strong>ç”µè„‘æœ¬åœ°ç¦»çº¿ä½¿ç”¨cnsentiçš„æ–¹æ³•</strong></p>
<ol>
<li><a href="cnsentiDemo.zip">ä¸‹è½½è§£å‹åˆ°æ¡Œé¢desktop</a></li>
<li>å‘½ä»¤è¡Œ, æ‰§è¡Œ <code>cd desktop/cnsentiDemo</code></li>
<li>å‘½ä»¤è¡Œï¼Œæ‰§è¡Œ <code>pip3 install -r requirements.txt</code></li>
<li>å‘½ä»¤è¡Œ, æ‰§è¡Œ <code>streamlit run main.py</code></li>
<li>æ ¹æ®å‘½ä»¤è¡Œçš„æç¤ºï¼Œå¤åˆ¶ç²˜è´´ç½‘å€åˆ°æ¡Œé¢ã€‚æˆ‘è¿™é‡Œæ˜¯ <code>**http://localhost:8501**</code></li>
<li>æµè§ˆå™¨æ‰“å¼€æ•ˆæœå°±ä¼šä¸è§†é¢‘ç­‰åŒ</li>
</ol>
<p>ä¸Šè¿°è¿‡ç¨‹ä¸­ï¼ŒMacå’ŒWinä¼šæœ‰ä¸€äº›ç¼ºç‚¹å¯¼è‡´æ— æ³•ä½¿ç”¨ï¼Œéœ€è¦æ ¹æ®å‘½ä»¤è¡Œæç¤ºè§£å†³å„è‡ªç³»ç»Ÿçš„å°é—®é¢˜ï¼Œä¾‹å¦‚</p>
<ol>
<li>Winéœ€è¦ä½¿ç”¨64ä½çš„Python</li>
<li>Macå¯èƒ½éœ€è¦å®‰è£…Xcode-install</li>
<li>å…¶ä»–å¯èƒ½çš„é—®é¢˜</li>
</ol>
<p><br><br></p>
<h1 id="webéƒ¨ç½²æ–¹æ³•">Webéƒ¨ç½²æ–¹æ³•</h1>
<p>å¦‚æœæƒ³å°†è‡ªå·±çš„streamlité¡¹ç›®éƒ¨ç½²æˆç½‘ç«™ï¼Œå¯ä»¥ä½¿ç”¨Herokuå’Œgithubå¸®åŠ©ä½ å®Œæˆäººç”Ÿç¬¬ä¸€ä¸ªå°ç½‘ç«™ã€‚æ“ä½œæ–¹æ³•ï¼š</p>
<ol>
<li>å°†å†™å¥½çš„streamlité¡¹ç›®ä¸Šä¼ è‡³githubè‡ªæœ‰ä»“åº“</li>
<li>Herokuæ³¨å†Œè´¦å·</li>
<li>ç‚¹å‡»Herokuç½‘é¡µå³ä¸Šè§’Newï¼Œ é€‰æ‹©Create new app</li>
<li>ç»‘å®šgithubï¼Œè¿æ¥githubé‡Œçš„streamlité¡¹ç›®</li>
<li>éƒ¨ç½²</li>
</ol>
<p>éƒ¨ç½²æ–¹æ³•ä¹Ÿå¯å‚è€ƒ  <a href="https://www.youtube.com/watch?v=zK4Ch6e1zq8&amp;list=PLtqF5YXg7GLmCvTswG32NqQypOuYkPRUE&amp;index=5">Youtubeè§†é¢‘</a></p>
<br>
<br>
<h1 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h1>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>æ¨èç³»ç»Ÿä¸ååŒè¿‡æ»¤ã€å¥‡å¼‚å€¼åˆ†è§£</title>
      <link>https://hidadeng.github.io/blog/svd_in_recommendation_system/</link>
      <pubDate>Thu, 07 Jun 2018 10:40:10 +0600</pubDate>
      
      <guid>/blog/svd_in_recommendation_system/</guid>
      <description>é€šè¿‡ç½‘ç»œä¸­ç•™ä¸‹çš„ç—•è¿¹ï¼Œä¾‹å¦‚è§‚å½±è®°å½•ï¼ŒæŒ–æ˜äººæ½œåœ¨çš„åå¥½å‘é‡ï¼Œè¿›è€Œç‰©ä»¥ç±»èšäººä»¥ç¾¤åˆ†ï¼Œå¼€å±•ä¸ªæ€§åŒ–æ¨èThrough the traces left in the network, such as movie viewing records, the potential preference vectors of people are mined, and then people are grouped together to carry out personalized recommendations</description>
      <content:encoded><![CDATA[<p>æ˜¨å¤©æˆ‘ä»PyData2018å‘ç°ä¸€ä¸ªè§†é¢‘ï¼Œè®²å¦‚ä½•åœ¨æ•°æ®ç¼ºå¤±çš„æƒ…å†µä¸‹æŒ–æ˜å‡ºç”¨æˆ·å’Œäº§å“çš„ç‰¹å¾å‘é‡, ç”¨äºäº§å“æ¨èç³»ç»Ÿã€‚</p>
<blockquote>
<p>Daniel Pyrathon - A practical guide to Singular Value Decomposition in Python PyCon2018</p>
</blockquote>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/d7iIb_XVkZs" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<p>å¦‚æœè§†é¢‘æ— æ³•è§‚çœ‹ï¼Œå¯ä»¥å‰å¾€<a href="https://v.qq.com/x/page/i0679novb10.html">è…¾è®¯è§†é¢‘</a></p>
<br>
<h1 id="ä¸€é¢„å¤‡çŸ¥è¯†">ä¸€ã€é¢„å¤‡çŸ¥è¯†</h1>
<h2 id="11-ååŒè¿‡æ»¤">1.1 ååŒè¿‡æ»¤</h2>
<p>æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œåƒäºšé©¬é€Šã€æ·˜å®ã€äº¬ä¸œã€ä»Šæ—¥å¤´æ¡ç­‰å„å¤§äº’è”ç½‘å…¬å¸ä¼šæ— æ—¶ä¸åˆ»çš„æ”¶é›†æˆ‘ä»¬çš„ç½‘ç»œç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œå¹¶æ ¹æ®ç§¯ç´¯çš„å†å²è¡Œä¸ºæ•°æ®å¯¹æˆ‘ä»¬æ¨é€æ¨èå†…å®¹æˆ–è€…æ¨èå•†å“ã€‚è¿™å°±æ˜¯æˆ‘ä»¬ä¸æ›¾æ„Ÿå—åˆ°å­˜åœ¨çš„æ¨èç®—æ³•æ‰€èµ·åˆ°çš„ä½œç”¨ï¼Œè¿™ä¹‹ä¸­æ¯”è¾ƒå¸¸è§çš„å®ç°æ–¹å¼æ˜¯<strong>ååŒè¿‡æ»¤</strong>ï¼ˆCollaberative Filteringï¼‰ã€‚æ•°æ®è®¾è®¡åˆ°ç”¨æˆ·ã€äº§å“åŠäº§å“è¯„ä»·ä¸‰ç§ä¿¡æ¯ï¼Œæ•°æ®ç±»ä¼¼äºä¸‹å›¾
<img loading="lazy" src="img/01-%e7%94%a8%e6%88%b7%e8%af%84%e5%88%86%e4%bf%a1%e6%81%af.png" alt=""  />
</p>
<br>
<h2 id="12-ç›¸ä¼¼çš„äººæ›´å®¹æ˜“åšç›¸ä¼¼çš„äº‹">1.2 ç›¸ä¼¼çš„äººæ›´å®¹æ˜“åšç›¸ä¼¼çš„äº‹</h2>
<p>ååŒè¿‡æ»¤çš„æ ¸å¿ƒæƒ³æ³•æ˜¯ç›¸ä¼¼çš„äººå¾€å¾€ä¼šåšç›¸ä¼¼çš„äº‹æƒ…ã€‚æ¯”å¦‚ï¼ŒA å’Œ B æ˜¯ä¸¤ä¸ªå´‡å°šç§‘æŠ€çš„äººï¼ˆç›¸ä¼¼ä¿¡æ¯æºäºå¤§é‡çš„è§‚å½±æ•°æ®ï¼‰ï¼Œè€Œ B å–œæ¬¢ çœ‹ç§‘å¹»ç‰‡ ï¼Œé‚£ä¹ˆæˆ‘ä»¬çŒœæµ‹ A ä¹Ÿå–œæ¬¢ ç§‘å¹»ç‰‡ã€‚
<img loading="lazy" src="img/02-%e7%94%a8%e6%88%b7%e8%af%84%e5%88%86%e7%9f%a9%e9%98%b5.png" alt=""  />

<img loading="lazy" src="img/03-%e9%a2%84%e6%b5%8b%e7%94%a8%e6%88%b7%e5%af%b9%e7%94%b5%e5%bd%b1%e7%9a%84%e5%96%9c%e5%a5%bd.png" alt=""  />
</p>
<br>
<h2 id="13-é—®é¢˜æå‡º">1.3 é—®é¢˜æå‡º</h2>
<p>ä¸Šé¢æˆ‘ä»¬å±•ç¤ºçš„ç”¨æˆ·ç”µå½±å¯è§†åŒ–å›¾ï¼Œå®é™…ä¸Šå°±æ˜¯æ¨èç®—æ³•ä¸­ç»å¸¸ç”¨åˆ°çš„<strong>ç”¨æˆ·-è¯„ä»·çŸ©é˜µ</strong>,</p>
<ul>
<li>é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•å¯¹çŸ©é˜µè¿›è¡Œè®¡ç®—ï¼Œæ‰èƒ½è·å–ç›¸ä¼¼æ€§ä¿¡æ¯ï¼Ÿ</li>
<li>æœ‰äº†ç›¸ä¼¼æ€§ä¿¡æ¯æˆ‘ä»¬åˆå¦‚ä½•å»åˆ©ç”¨ç›¸ä¼¼æ€§ä¿¡æ¯å»åšäº§å“æ¨èï¼Ÿ</li>
<li>æˆ‘ä»¬çŸ¥é“ä¸¤ä¸ªå‘é‡é€šè¿‡ä½™å¼¦ç›¸ä¼¼è®¡ç®—å°±å¯ä»¥å¾—å‡ºä¸¤ä¸ªå‘é‡çš„è¿‘ä¼¼ç¨‹åº¦ï¼Œé‚£ä¹ˆè¿™äº›å‘é‡æˆ‘ä»¬åˆè¯¥å¦‚ä½•ä»<strong>ç”¨æˆ·-è¯„ä»·çŸ©é˜µ</strong>æå–å‘¢ï¼Ÿ</li>
</ul>
<br>
<h2 id="14-å¥‡å¼‚å€¼åˆ†è§£svd">1.4 å¥‡å¼‚å€¼åˆ†è§£SVD</h2>
<p>è¿™å°±ç”¨åˆ°å¥‡å¼‚å€¼åˆ†è§£ï¼ˆSingular Value Decompositonï¼‰ï¼Œç®€ç§°SVDã€‚å…·ä½“æ€ä¹ˆæå–ä¸æ˜¯æˆ‘ä»¬æœ¬æ–‡çš„é‡ç‚¹ï¼ŒPythonéƒ½å¸®æˆ‘ä»¬å®ç°äº†ï¼Œæˆ‘ä»¬åªéœ€è¦ç¨å¾®äº†è§£ä¸‹SVDï¼Œå°±ç›´æ¥ä¸Šæ‰‹ç”¨ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬ç°åœ¨æœ‰äº†<strong>ç”¨æˆ·-è¯„ä»·çŸ©é˜µ</strong>
<img loading="lazy" src="img/04-%e7%94%a8%e6%88%b7%e8%af%84%e4%bb%b7%e7%9f%a9%e9%98%b5.png" alt=""  />
</p>
<br>
<p>ç»™å®šä¸€ä¸ªçŸ©é˜µï¼Œæˆ‘ä»¬éƒ½å¯ä»¥åˆ†è§£å¾—åˆ°ä¸¤ç§çŸ©é˜µï¼Œä¸€ç§æ˜¯ç”¨æˆ·ä¿¡æ¯çŸ©é˜µï¼Œä¸€ç§æ˜¯è¯„ä»·ä¿¡æ¯ï¼ˆäº§å“ï¼‰çŸ©é˜µã€‚è¿™ä¸¤ç§çŸ©é˜µåœ¨æœ¬ä¾‹ä¸­ä½¿ç”¨äº†n_features = 2ï¼Œå³å¯¹äºç”¨æˆ·å‘é‡æˆ–è€…äº§å“è¯„ä»·å‘é‡é•¿åº¦å‡ä¸º2ï¼Œå®é™…ä¸Šä¹Ÿå¯ä»¥ä¸ºå…¶ä»–æ•°å­—ï¼ˆæ¯”å¦‚3ï¼Œ4ã€‚ã€‚ï¼‰
<img loading="lazy" src="img/05-%e4%b8%a4%e7%a7%8d%e7%9f%a9%e9%98%b5.png" alt=""  />
</p>
<p>é‚£ä¹ˆUser1å¯¹äºè“è‰²ç”µå½±çš„å–œæ¬¢ç¨‹åº¦æ˜¯å¯ä»¥é€šè¿‡å‘é‡è®¡ç®—å¾—å‡º3.52
<img loading="lazy" src="img/06-%e9%a2%84%e6%b5%8b%e8%ae%a1%e7%ae%97.png" alt=""  />
</p>
<br>
<h2 id="15-ç”¨æˆ·ç›¸ä¼¼æ€§">1.5 ç”¨æˆ·ç›¸ä¼¼æ€§</h2>
<p>å¦‚ä¸‹å›¾ï¼Œåœ¨äºŒç»´åæ ‡ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºä¸åŒç”¨æˆ·é—´çš„ç›¸ä¼¼åº¦ã€‚
<img loading="lazy" src="img/07-%e7%94%a8%e6%88%b7%e7%9b%b8%e4%bc%bc%e5%ba%a6.png" alt=""  />
</p>
<p><br><br></p>
<h1 id="äºŒé¡¹ç›®å®æˆ˜">äºŒã€é¡¹ç›®å®æˆ˜</h1>
<p>æˆ‘ä»¬å°†ä½¿ç”¨Pythonçš„surpriseåº“ï¼Œå¯¹MovieLensæ•°æ®é›†æ„å»ºä¸€ä¸ªç®€å•çš„ååŒè¿‡æ»¤æ¨èç³»ç»Ÿã€‚</p>
<p>å®‰è£…æ–¹æ³•:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">pip3</span> <span class="n">install</span> <span class="n">scikit</span><span class="o">-</span><span class="n">surprise</span>
</code></pre></div><p>å¦‚æœä½ çš„anacondaè‡ªå¸¦jupyter notebookã€‚é‚£ä¹ˆä½ å¯èƒ½éœ€è¦ä½¿ç”¨ä¸‹é¢çš„å®‰è£…æ–¹æ³•</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">scikit</span><span class="o">-</span><span class="n">surprise</span>
</code></pre></div><p>ä»å®‰è£…åæˆ‘ä»¬å‘ç°å…¶ä½™scikitçš„ç‰¹æ®Šå…³ç³»ï¼Œæ‰€ä»¥ç†Ÿæ‚‰scikitçš„åŒå­¦çœ‹æœ¬æ–‡ä¼šæ¯”è¾ƒè½»æ¾ã€‚</p>
<br>
<h2 id="ä»£ç ä¸‹è½½">ä»£ç ä¸‹è½½</h2>
<p><a href="svd_in_recommendation_system.zip">ç‚¹å‡»ä¸‹è½½</a></p>
<br>
## 2.1 å‡†å¤‡æ•°æ®
MovieLensæ•°æ®é›†å«æœ‰1000ä¸ªç”¨æˆ·çš„100000ä¸ªè§‚å½±è¯„åˆ†è®°å½•ã€‚å…¶ä¸­æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨è¯¥æ•°æ®é›†ä¸­çš„u.dataæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä»¥è¡Œå­˜å‚¨ï¼Œæ¯ä¸€è¡ŒåŒ…æ‹¬``userID itemID rating timestamp``,ä¸”å„ä¸ªå­—æ®µä¹‹é—´ä»¥``\t``é—´éš”ã€‚éƒ¨åˆ†æ•°æ®å¦‚ä¸‹
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[&#39;196\t242\t3\t881250949\n&#39;, 
&#39;186\t302\t3\t891717742\n&#39;, 
&#39;22\t377\t1\t878887116\n&#39;, 
&#39;244\t51\t2\t880606923\n&#39;, 
&#39;166\t346\t1\t886397596\n&#39;]
</code></pre></div><br>
<h2 id="22-åˆ‡å‰²æ•°æ®">2.2 åˆ‡å‰²æ•°æ®</h2>
<p>åœ¨surpriseåº“ä¸­æˆ‘ä»¬å¯ä»¥åˆ›å»ºè¯»å–å™¨Readerçš„æ ¼å¼ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>\t</code>å°†æ¯è¡Œæ•°æ®åˆ†éš”ååˆ†é…ç»™</p>
<p><code>user item rating timestamp</code></p>
<p>å®šä¹‰å¥½Readeræ ¼å¼åï¼Œæˆ‘ä»¬ä½¿ç”¨Datasetå¯¹è±¡å¯¹æ•°æ®è¿›è¡Œè¯»å–æ“ä½œã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">surprise</span> <span class="kn">import</span> <span class="n">Reader</span><span class="p">,</span> <span class="n">Dataset</span>

<span class="c1">#å®šä¹‰æ•°æ®æ ¼å¼</span>
<span class="n">reader</span> <span class="o">=</span> <span class="n">Reader</span><span class="p">(</span><span class="n">line_format</span><span class="o">=</span><span class="s1">&#39;user item rating timestamp&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1">#ä½¿ç”¨readeræ ¼å¼ä»u.dataæ–‡ä»¶ä¸­è¯»å–æ•°æ®</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">load_from_file</span><span class="p">(</span><span class="s1">&#39;u.data&#39;</span><span class="p">,</span> <span class="n">reader</span><span class="o">=</span><span class="n">reader</span><span class="p">)</span>
</code></pre></div><br>
<h2 id="23-äº¤å‰æ£€éªŒ">2.3 äº¤å‰æ£€éªŒ</h2>
<p>surpriseæä¾›äº†äº¤å‰éªŒè¯ï¼ˆcrossvalidationï¼‰çš„æ¥å£ï¼Œcrossvalidationæ˜¯å•¥ï¼Ÿ</p>
<p>æˆ‘ä»¬å…ˆçœ‹å›¾è§£é‡Šä¸‹</p>
<p>ä¸€ä»½æ•°æ®å¹³å‡çš„åˆ†æˆ5ä»½ï¼Œå¦‚æœ4ä»½åšè®­ç»ƒé›†ï¼Œ1ä»½åšæµ‹è¯•é›†ã€‚é‚£ä¹ˆå½“æˆ‘ä»¬è®­ç»ƒæ¨¡å‹çš„æ—¶å€™æœ‰1/5çš„æ•°æ®æˆ‘ä»¬çš„æ¨¡å‹æ˜¯æ— æ³•å­¦ä¹ çš„ï¼Œè¿™å°±æµªè´¹äº†20%ã€‚</p>
<p>ä½†æ˜¯æˆ‘ä»¬åˆä¸èƒ½æ‹¿æŠŠæ‰€æœ‰çš„æ•°æ®ç»è¿‡ä¸€æ¬¡è®­ç»ƒï¼Œå†æ‹¿å…¶ä¸­è®­ç»ƒè¿‡çš„æ•°æ®å»åšé¢„æµ‹ã€‚å› ä¸ºè¿™æ ·ä¼šå¯¼è‡´å‡†ç¡®ç‡aéå¸¸é«˜ï¼Œä½†æ”¾åˆ°å®è·µä¸­è¿™ä¸ªæ¨¡å‹çš„é¢„æµ‹å‡†ç¡®ç‡å®é™…ä¸Šæ˜¯ä½äºaçš„ã€‚</p>
<p>æ‰€ä»¥å°±æœ‰äº†crossvalidationäº¤å‰æ£€éªŒã€‚æˆ‘ä»¬ä¸€ä»½æ•°æ®è®­ç»ƒ5æ¬¡ï¼Œæ¯æ¬¡å®Œæ•´çš„æ•°æ®åˆ†æˆ4ä»½è®­ç»ƒ1ä»½æµ‹è¯•ã€‚è¿™æ ·å°±è§£å†³äº†ä¸Šé¢é‡åˆ°çš„é—®é¢˜ã€‚å¦‚ä¸‹å›¾</p>
<p><img loading="lazy" src="img/08-crossvalidation.png" alt=""  />
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1">#n_folds=5æ˜¯æŒ‡æ•°æ®åˆ†æˆ5ä»½ï¼Œåš5æ¬¡è®­ç»ƒé¢„æµ‹</span>
<span class="n">data</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">n_folds</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div><br>
<h2 id="24-æœ€ä¼˜åŒ–optimization">2.4 æœ€ä¼˜åŒ–Optimization</h2>
<p>è®­ç»ƒæ€ä¹ˆè¾¾åˆ°æœ€ä¼˜ï¼Œé‚£å°±è¦æœ‰Optimizationï¼Œä¹Ÿå°±æ˜¯è¦æœ‰ä¸€ä¸ªå¯ä¾›å‚è€ƒçš„æ ‡å‡†ã€‚</p>
<p>è®­ç»ƒçš„æ–¹å¼ä¸å…¶ä»–æœºå™¨å­¦ä¹ æ–¹æ³•ç±»ä¼¼ï¼Œè¦ä½¿å¾—ä¸€ç§ç®—æ³•è¯•å›¾ä¼˜åŒ–å…¶<strong>é¢„æµ‹å€¼</strong>å°½å¯èƒ½æ¥è¿‘<strong>çœŸå®å€¼</strong>ã€‚åœ¨åä½œè¿‡æ»¤åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬çš„ç®—æ³•å°†å°è¯•é¢„æµ‹æŸä¸ª<strong>ç”¨æˆ·-ç”µå½±</strong>ç»„åˆçš„è¯„çº§ï¼Œå¹¶å°†è¯¥<strong>é¢„æµ‹å€¼</strong>ä¸<strong>çœŸå®å€¼</strong>è¿›è¡Œæ¯”è¾ƒã€‚ ä½¿ç”¨ç»å…¸è¯¯å·®æµ‹é‡å¦‚å‡æ–¹æ ¹è¯¯å·®ï¼ˆRoot mean squared errorï¼ŒRMSEï¼‰å’Œå¹³å‡ç»å¯¹è¯¯å·®ï¼ˆMean absolute errorï¼ŒMAEï¼‰æ¥æµ‹é‡é¢„æµ‹å€¼å’ŒçœŸå®å€¼ä¹‹é—´çš„å·®å¼‚ã€‚</p>
<p>åœ¨surpriseåº“ä¸­ï¼Œæˆ‘ä»¬æœ‰å¹¿æ³›çš„ç®—æ³•å¯ä¾›é€‰æ‹©ï¼Œå¹¶ä¸ºæ¯ç§ç®—æ³•ï¼ˆSVDï¼ŒNMFï¼ŒKNNï¼‰æä¾›å¤šç§å‚æ•°é€‰æ‹©ã€‚ å°±æˆ‘ä»¬çš„ä¾‹å­è€Œè¨€ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨SVDç®—æ³•ã€‚ ä¼˜åŒ–ç›®æ ‡<code>measures</code>é‡‡ç”¨<code>RMSE', 'MAE</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">surprise</span> <span class="kn">import</span> <span class="n">SVD</span><span class="p">,</span> <span class="n">evaluate</span>

<span class="c1">#ç›¸å½“äºscikitçš„æœºå™¨å­¦ä¹ ç®—æ³•çš„åˆå§‹åŒ–</span>
<span class="n">svd</span> <span class="o">=</span> <span class="n">SVD</span><span class="p">()</span>

<span class="c1">#ç›¸å½“äºscikitä¸­çš„scoreï¼Œæ¨¡å‹è¯„ä¼°</span>
<span class="n">evaluate</span><span class="p">(</span><span class="n">svd</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">measures</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;RMSE&#39;</span><span class="p">,</span> <span class="s1">&#39;MAE&#39;</span><span class="p">])</span>
</code></pre></div><p>Run</p>
<pre><code>Evaluating RMSE, MAE of algorithm SVD.

------------
Fold 1
RMSE: 0.9324
MAE:  0.7346
------------
Fold 2
RMSE: 0.9422
MAE:  0.7423
------------
Fold 3
RMSE: 0.9367
MAE:  0.7398
------------
Fold 4
RMSE: 0.9310
MAE:  0.7323
------------
Fold 5
RMSE: 0.9393
MAE:  0.7422
------------
------------
Mean RMSE: 0.9363
Mean MAE : 0.7382
------------
------------





CaseInsensitiveDefaultDict(list,
                           {'mae': [0.734621556055766,
                             0.7422621194493935,
                             0.7398192302116903,
                             0.7323079165231016,
                             0.7422361108902022],
                            'rmse': [0.9324301825022976,
                             0.9421845177536299,
                             0.9366580726086371,
                             0.9310376368987473,
                             0.9392636694333337]})
</code></pre>
<p>ä»ä¸Šé¢è¿è¡Œç»“æœçœ‹ï¼Œoptimizeré€‰ç”¨RMSEåï¼Œ5æ¬¡è®­ç»ƒçš„å¹³å‡å‡†ç¡®ç‡é«˜è¾¾93.63%ã€‚</p>
<br>
<h2 id="25-é¢„æµ‹">2.5 é¢„æµ‹</h2>
<p>æœ€åæˆ‘ä»¬è¿˜æ˜¯å¾ˆæƒ³çœ‹çœ‹è®­ç»ƒå‡ºæ¨¡å‹ï¼Œå…¶é¢„æµ‹èƒ½åŠ›åˆ°åº•ç»“æœæ€ä¹ˆæ ·ï¼Ÿ</p>
<p>è¿™æ¬¡æˆ‘ä»¬å°±åšäº¤å‰éªŒè¯äº†ï¼Œçœäº‹ç‚¹ç›´æ¥å…¨éƒ¨ä¸¢ç»™SVDå»è®­ç»ƒ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">surprise</span> <span class="kn">import</span> <span class="n">SVD</span>
<span class="kn">from</span> <span class="nn">surprise</span> <span class="kn">import</span> <span class="n">Reader</span><span class="p">,</span> <span class="n">Dataset</span>

<span class="c1">#è¯»å–æ•°æ®</span>
<span class="n">reader</span> <span class="o">=</span> <span class="n">Reader</span><span class="p">(</span><span class="n">line_format</span><span class="o">=</span><span class="s1">&#39;user item rating timestamp&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">load_from_file</span><span class="p">(</span><span class="s1">&#39;u.data&#39;</span><span class="p">,</span> <span class="n">reader</span><span class="o">=</span><span class="n">reader</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">build_full_trainset</span><span class="p">()</span> 

<span class="c1">#åˆå§‹åŒ–svdæ¨¡å‹,ç”¨dataè®­ç»ƒæ¨¡å‹</span>
<span class="n">svd</span> <span class="o">=</span><span class="n">SVD</span><span class="p">()</span>
<span class="n">svd</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">    &lt;surprise.prediction_algorithms.matrix_factorization.SVD at 0x10ab7d7f0&gt;
</code></pre></div><p>ä¸Šé¢çš„ä»£ç </p>
<p>data = data.build_full_trainset()</p>
<p>è¿™ä¸€è¡Œæœ¬æ¥æˆ‘æ²¡æœ‰å†™ï¼Œä½†æ˜¯å½“æˆ‘æ³¨é‡Šæ‰è¿™ä¸€è¡Œã€‚å‡ºç°ä¸‹é¢çš„é”™è¯¯ï¼Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">DatasetAutoFolds&#39; object has no attribute &#39;global_mean&#39; on python surprise
</code></pre></div><p>æœ€ååœ¨stackoverflowä¸­æ‰¾åˆ°è§£å†³åŠæ³•ï¼Œéœ€è¦å°†dataè½¬åŒ–ä¸ºsurpriseèƒ½å¤Ÿç”¨çš„trainsetç±»ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">https://stackoverflow.com/questions/49263964/datasetautofolds-object-has-no-attribute-global-mean-on-python-surprise
</code></pre></div><p>ä¸‹é¢ç»§ç»­æˆ‘ä»¬çš„é¢„æµ‹ï¼Œuseridä¸º196ï¼Œitemidä¸º302ï¼Œ å…¶çœŸå®è¯„åˆ†ä¸º4ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">userid</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="mi">196</span><span class="p">)</span>
<span class="n">itemid</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="mi">302</span><span class="p">)</span>
<span class="n">actual_rating</span> <span class="o">=</span> <span class="mi">4</span>
<span class="nb">print</span><span class="p">(</span><span class="n">svd</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">userid</span><span class="p">,</span> <span class="mi">302</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
</code></pre></div><pre><code>user: 196        item: 302        r_ui = 4.00   est = 3.41   {'was_impossible': False}
</code></pre>
<p>é¢„æµ‹å€¼ä¸º3.41ï¼Œ çœŸå®å€¼ä¸º4ã€‚è¿˜æ˜¯ç›¸å¯¹é è°±çš„ã€‚</p>
<br>
<br>
<h1 id="å¹¿è€Œå‘Šä¹‹">å¹¿è€Œå‘Šä¹‹</h1>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">é•¿æœŸå¾ç¨¿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">é•¿æœŸæ‹›å‹Ÿå°ä¼™ä¼´</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">ä»˜è´¹è§†é¢‘è¯¾ | Pythonå®è¯æŒ‡æ ‡æ„å»ºä¸æ–‡æœ¬åˆ†æ</a></li>
</ul>
]]></content:encoded>
    </item>
    
  </channel>
</rss>
