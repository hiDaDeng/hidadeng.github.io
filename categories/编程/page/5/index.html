<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>编程 | 大邓和他的PYTHON</title>
<meta name="keywords" content="" />
<meta name="description" content="专注经济管理科研领域的Python数据分析，涵盖数据分析主要环节，如Python网络爬虫、Pandas数据探索性分析、中英文文本数据清洗、机器学习与自然语言处理。开发有专门的Python经济管理文本数据挖掘视频课程">
<meta name="author" content="Me, You">
<link rel="canonical" href="/categories/%E7%BC%96%E7%A8%8B/" />
<meta name="baidu-site-verification" content="code-xTk1LSyjvt" />
<meta name="360-site-verification" content="dc00b42cd1d4e0fcaa5edfd27394f9cd" />
<meta name="sogou-site-verification" content="3HDeo612Pl" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.css" rel="preload stylesheet" as="style">
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.89.4" />
<link rel="alternate" type="application/rss+xml" href="/categories/%E7%BC%96%E7%A8%8B/index.xml">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="编程" />
<meta property="og:description" content="专注经济管理科研领域的Python数据分析，涵盖数据分析主要环节，如Python网络爬虫、Pandas数据探索性分析、中英文文本数据清洗、机器学习与自然语言处理。开发有专门的Python经济管理文本数据挖掘视频课程" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/categories/%E7%BC%96%E7%A8%8B/" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="编程"/>
<meta name="twitter:description" content="专注经济管理科研领域的Python数据分析，涵盖数据分析主要环节，如Python网络爬虫、Pandas数据探索性分析、中英文文本数据清洗、机器学习与自然语言处理。开发有专门的Python经济管理文本数据挖掘视频课程"/>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-SFGQCREQ9X"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SFGQCREQ9X');
</script>

</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="/" accesskey="h" title="大邓和他的PYTHON (Alt + H)" target="_blank">大邓和他的PYTHON</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="/blog" title="博文" target="_blank">
                    <span>博文</span>
                </a>
            </li>
            <li>
                <a href="/search/" title="搜索" target="_blank">
                    <span>搜索</span>
                </a>
            </li>
            <li>
                <a href="/tags/" title="标签" target="_blank">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="mailto:thunderhit@qq.com" title="联系" target="_blank">
                    <span>联系</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="/" target="_blank">Home</a>&nbsp;»&nbsp;<a href="/categories/" target="_blank">Categories</a></div>
  <h1>编程</h1>
</header>

<article class="post-entry tag-entry"> 
<figure class="entry-cover"><img loading="lazy" src="/images/blog/dvt.png" alt="">
</figure>
  <header class="entry-header">
    <h2>dvt库 |  视觉文化分析的Python工具包
    </h2>
  </header>
  <section class="entry-content">
    <p>dvt Distant Viewing Toolkit for the Analysis of Visual Culture
视觉文化分析的Python工具包
https://github.com/distant-viewing/dvt
远程电视工具包由几个 Python 包组成，旨在促进视觉文化的计算分析。 开始使用该工具包的最简单方法是在 Google 的协作 (Colab) 环境中运行该工具包。 这是一项免费使用的服务，允许您以最少的设置在远程服务器上运行 Python 代码。 只需选择以下链接之一即可开始：
 COLAB 笔记本演 https://colab.research.google.com/drive/1KxYziaozONxMZH8uUaf4PxbW6DyNiZ0k?usp=sharing  有关在您自己的机器上设置工具包的更多信息，请参阅 INSTALL.md。 以下页面提供了有关工具包和项目的更多信息：
 搜索和发现界面示例：DVT 视频可视化 使用聚合元数据的示例分析：“两个网络时代情景喜剧的视觉风格” 项目理论：“远距离观察：分析大型视觉语料库”。 软件白皮书：用于分析视觉文化的 Python 包  示例 开发者提供的colab代码，我跑通了图片标注(例如识别不同身体部位)、视频转场(不同素材拼凑)
   提示 本地配置难度极大，建议按照开发者提示，使用google colab环境。可能需要先配置好科学上网，才能使用
 COLAB 笔记本演 https://colab.research.google.com/drive/1KxYziaozONxMZH8uUaf4PxbW6DyNiZ0k?usp=sharing   点击上方图片购买课程   </p>
  </section>
  <footer class="entry-footer"><span title='2022-01-03 20:43:10 +0600 +0600'>2022-01-03</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;大邓</footer>
  <a class="entry-link" aria-label="post link to dvt库 |  视觉文化分析的Python工具包" href="/blog/dvt/" target='_blank'></a>
</article>

<article class="post-entry tag-entry"> 
<figure class="entry-cover"><img loading="lazy" src="/images/blog/Stargazer.png" alt="">
</figure>
  <header class="entry-header">
    <h2>Stargazer库 |  创建漂亮可发表的多元回归表
    </h2>
  </header>
  <section class="entry-content">
    <p>点击上方图片购买课程   代码下载 Stargazer库介绍 R语言有一个stargazer包，可用于创建漂亮的、可发表的多元回归表。如今有Python化的stargazer库也可做类似的事。
下图是使用stargazer生成的没有任何样式的原始示例的示例：
 什么时候会用到这些？ 人们倾向于使用R版本的stargazer的主要情况是在学术论文中报告回归结果。 它允许您轻松地比较多个回归结果，这有助于比较具有实验影响的模型与没有影响的模型之间的结果。 这允许用户轻松查看系数的差异、统计显着性以及实验引入的新变量的影响。
它目前支持 LaTeX 和 HTML 输出，stargazer开发者最终最表是也支持 Markdown 和 ASCII 文本。
项目地址 https://github.com/mwburke/stargazer
该库实现了原始包中的许多自定义功能。大多数示例可以在示例 jupyter notebook 中找到，功能函数完整列表如下： Stargazer库的函数  show_header：显示或隐藏模型头数据 show_model_numbers：显示或隐藏型号 custom_columns：自定义模型名称和模型分组 significance_levels：更改统计显着性阈值 significant_digits：更改有效数字的数量 show_confidence_intervals：显示置信区间，而不是方差 dependent_variable_name：重命名因变量 rename_covariates: 重命名协变量 covariate_order：重新排序协变量 reset_covariate_order：将协变量顺序重置为原始顺序 show_degrees_of_freedom：显示或隐藏自由度 custom_note_label：表格底部的标签注释部分 add_custom_notes：将自定义注释添加到表格底部的部分 add_line：向表格中添加自定义行 append_notes：显示或隐藏统计显着性阈值  这些功能与渲染类型无关，无论用户以 HTML、LaTeX 等格式输出都将应用
安装 !pip3 install stargazer 
OLS回归 import pandas as pd from sklearn import datasets import statsmodels.api as sm from stargazer.stargazer import Stargazer diabetes = datasets....</p>
  </section>
  <footer class="entry-footer"><span title='2022-01-02 20:43:10 +0600 +0600'>2022-01-02</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;大邓</footer>
  <a class="entry-link" aria-label="post link to Stargazer库 |  创建漂亮可发表的多元回归表" href="/blog/stargazer/" target='_blank'></a>
</article>

<article class="post-entry tag-entry"> 
<figure class="entry-cover"><img loading="lazy" src="/images/blog/love_dis.png" alt="">
</figure>
  <header class="entry-header">
    <h2>PNAS | 情侣分手3个月前就有预兆！聊天记录还能反映分手后遗症
    </h2>
  </header>
  <section class="entry-content">
    <p>点击上方图片购买课程    公众号-新智元
编辑: 桃子 小咸鱼
 女朋友提出分手，你是不是后悔没有早点察觉？
这不，对于分手前的有关迹象，科学家给出了答案：聊天记录！
近日，美国德克萨斯大学的研究人员发表的一篇论文表明，通过分析情侣的聊天记录，可以找到情侣即将分手的证据。
这篇 Language left behind on social media exposes the emotional and cognitive costs of a romantic breakup 已于12月20日发表在国际顶刊PNAS。
分手前三个月，聊天便不正常了
基于已有的数据，研究人员对6800名Reddit用户发布的1027541个帖子进行了文本分析。
这些帖子涵盖了用户在过去2年里的Reddit发帖数据，这些帖子的内容不仅仅与他们的感情关系有关，也涵盖了他们生活中各个方面的内容。
语言标记 表示「即将分手」的「语言标记」在分手发生前3个月出现的频次非常高，在分手的那一周达到峰值，并在6个月后恢复到正常基线。
在表示「即将分手」的「语言标记」中，出现次数比较多的是「我」、「我们」这类字眼，以及暗含认知过程（cognitive processing ）的词汇（常常表示抑郁、高度集中的注意力、探究意义等）。
分手前后Reddit用户语言模式的变化。第0周是每个用户在分手时公开披露分手的时间点。
此外，「语言标记」中有关「分析思考」（analytic thinking）的词汇的出现频次会下降，与「分析思考」相关的词汇往往包含更多以个人为中心和非正式的语言。
研究人员还发现，即使人们在与分手这类话题无关的群组中发帖，上述这种「语言标记」模式仍然存在。
要注意了！
与偶尔发一次帖的人相比，那些经常发布分手信息的人在分手一年之后，适应能力会变得很差。
83%的人都会以第一人称发送第一次分手的信息，并且这些帖子详细描述了分手过程，甚至导致分手的原因和分手的后果都有。
例如，一位网友通过回忆来讲述自己分手的故事：
 “Hey breakups, going through a rough one this week. The girl I’ve been seeing the last 7 months left me last Friday due to us not having common interests....</p>
  </section>
  <footer class="entry-footer"><span title='2022-01-02 12:43:10 +0600 +0600'>2022-01-02</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;桃子 小咸鱼</footer>
  <a class="entry-link" aria-label="post link to PNAS | 情侣分手3个月前就有预兆！聊天记录还能反映分手后遗症" href="/blog/pnas_love_separate/" target='_blank'></a>
</article>

<article class="post-entry tag-entry"> 
<figure class="entry-cover"><img loading="lazy" src="/images/blog/quant_Lang.png" alt="">
</figure>
  <header class="entry-header">
    <h2>量化历史语言学-贝叶斯语言谱系分析
    </h2>
  </header>
  <section class="entry-content">
    <p>点击上方图片购买课程    Author:小云哥哥
Src: https://zhuanlan.zhihu.com/p/386454664
 历史语言学家有两个基本任务。第一个任务是追溯相关语言的源头——所谓的“原始语言”，说得通俗一点就是推测一下祖先们是怎么说话的。但其实除非有时光机器，否则我们不可能知道祖先的发音，构拟原始语言的最终目的是使用一个自洽的系统去解释现代亲属语言的差异。这个任务是技术活儿，需要硬功夫，语言学家必须对这些语言的各方面都了如指掌，通过多年的时间真正理解这些语言的运作（尤其是音系和形态），而不是一上来就开始尬比较。第二任务是第一个任务的衍生产品。当我们能够解释亲属语言的差异以后，我们自然而然会发现有的语言差异较小，有的语言差异较大，我们会希望知道每种差异发生的时间顺序，从而推断出亲属语言是因循什么轨迹从原始语言中分化出来的。这就是语言的谱系。
虽然传统的历史语言学取得了非常大的成功，但是语言学家毕竟是人，他们用人力研究为数众多的语言、处理浩如烟海的语料，总会出现这样那样的问题。比如说我们会在不少著作中看到语言学家前后标准不一致，或者分析过程描述不清晰透明等现象。有时候这些问题并不是有意为之，而是因为人确实无法预估那么多的事情，出错在所难免。
于是，一部分语言学家开始认识到，我们需要一个机器协助的、量化的转变。人的大脑爱耍小聪明，更擅长处理复杂而特殊的个案，而机器更像一个奴隶，可以帮人类用统一的方法处理繁多和重复的工作。那么，历史语言学家的两个任务，机器可以协助我们解决哪一个呢？原始语言的构拟还是语言的谱系？
事实上，这两个任务都需要很多的小聪明。如果原始语言的构拟是简单的音位比较，那么机器也许可以很快做出来。但实际操作上要比这个绕很多的弯儿，需要语言学家综合知识的灵活运用。比如索绪尔的喉音理论，就需要对梵语动词变位的深入理解，从而比较不同变位模式的内在一致，并且对音变的类型学有融会贯通的了解。这一切的运作，可能在索绪尔的脑子里一秒钟就能形成，而机器则不可能在短时间内完成喉音的构拟。我们引入机器是为了提高效率，而不是降低效率。因此，语言学家把目光转向了第二个任务，语言的谱系。历史语言学确定谱系的唯一标准是共同创新，但辨认共同创新实际上也需要深厚的研究功底，机器很难按照人类的方式分析。一个比较可行的办法是偏离历史语言学的原则，使用统计学的方式，构造出在统计学意义上最可能的谱系。
在这篇文章中，我就用流水账的方式梳理一下机器协助的语言谱系分析的相关历史，尤其专注于贝叶斯谱系分析。因为是流水账，所以不会分小节，我也会省去所有赶客的公式和理论描述。
语言谱系分析 较早使用统计学处理语言谱系的研究可以追溯到十九世纪前叶。不过现代的尝试最值得提的是二十世纪二十年代开始的一系列操作。波兰人类学家Czekanowski[1]在1928年收集了二十多个音系、形态和词汇上的特点，研究了包括立陶宛语、古教会斯拉夫语、哥特语、古爱尔兰语、拉丁语、希腊语、吠陀梵语、阿维斯陀语和亚美尼亚语相互之间的关系。他们得出的结果其中一个错误是认为哥特语与波罗地-斯拉夫语更为接近，而不是意大利-凯尔特语。1937年，加州大学的Kroeber和Chrétien[2]在前人的基础上，添加了新的数据（主要是特征性的音变和形态变化方面的数据），使参与比较的特征达到了74个。下图是Kroeber and Chrétien (1937)的统计分析
 Kroeber和Chrétien就是通过判断每一个特征是否在各种语言中出现，列出矩阵计算出各语言的相似度。他们的结果，至少从这九种语言来看，基本上与历史语言学的结果相符。但由于数据本身的局限性，他们的方法并没有被大规模地使用，并且遭到了一些批评。我不知道他们的计算是否用了机器，但是从他们并不复杂的公式来看，可能是笔算的。
虽然这些早期的尝试寿命并不长，但是也为量化历史语言学定下了统计学的基调，尽管在数据选取上，名义上是使用了历史语言学的结论，但是并没有使用历史语言学的分类标准，而是把这些结论转化成可以用于统计学的数据。这也是从这以后，直至现在将尽一个世纪的趋势。
 La linguistique est la science statistique type ; les statisticiens le savent bien ; la plupart des linguistes l’ignorent encore. (Guiraud 1959: 15[3]) 语言学就是典型的统计科学；统计学家心里很清楚，大部分语言学家却不知道。
 &lt;比如&gt;
基于词汇的语言谱系分析 1950年代，有一个长得有点喜感的中年男人，叫Morris Swadesh。他是一个美国的语言学家。身为一个历史语言学家，他并不把关注的重点放在音系和形态的变化上，而是更专注于词汇。词汇相对于音系和形态，显然是更容易操作的东西，毕竟它们就像拼好的积木，能让人一眼就辨认出来。Morris Swadesh (1909-1967)
 Swadesh认为不同语言中词汇的重合度很可能与语系的演化有关。这点很符合我们的直觉，基因关系较远的语言中，非同源的词汇理应越多。而且，他还假设词汇系统是按一定的速率变化的，我们只要以这个速率为基础，然后比较亲属语言的同源词的多寡，就能得到语言的谱系，同时我们还可以算出亲属语言的分裂时间。Swadesh (1950)[4]认为词汇的变化速率是每过1000年，一种语言想对于原本形态的同源词就会降低到原来的85%。后来这个百分比又被改为81%。 这个数字大概是基于古英语和现代英语的词汇变化确定的。
核心词汇 我们不可能穷尽所有的词汇，所以就需要选取一些具有代表性的词汇来简化我们的研究。Swadesh整理出一份100词的词表，现在我们称为“核心词汇”或者“基本词汇”，包括身体部位、数字、颜色、基本动作等类别，这些词汇被认为是最不容易被借用的，有较大的概率是本土词汇。
语言断代学（词汇统计学） 这么一来，如果我们发现两种亲属语言在核心词汇表上有81%的同源词，那么我们就可以认为这两种语言的分化时间是1000年。如果它们有81%×81%=65.61%的同源词，那么它们的分化时间就是2000年。这个方法我们称为Glottochronology，汉语称作“语言断代学”，它也是“词汇统计学”（lexicostatistics）的最主要方法之一。
为了让故事更连续，我在这里删除了其它的研究方法，比如计算词汇间Levenshtein距离，有关这方面的内容，可以看这个回答。
总而言之，从Swadesh开始，量化历史语言学基本上就在词汇之间徘徊，人们开始想尽办法从词汇中找到语言发展的轨迹。当然， 也有从音系/形态上考虑的（Ringe et al 2002）[5]，还有从类型学上考虑的（Dunn et al 2008）[6]，但始终无法摆脱或者撼动以词汇为基础的大趋势。...</p>
  </section>
  <footer class="entry-footer"><span title='2022-01-01 20:43:10 +0600 +0600'>2022-01-01</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;小云哥哥</footer>
  <a class="entry-link" aria-label="post link to 量化历史语言学-贝叶斯语言谱系分析" href="/blog/quantlang/" target='_blank'></a>
</article>

<article class="post-entry tag-entry"> 
<figure class="entry-cover"><img loading="lazy" src="/images/blog/cultureAnalysis.png" alt="">
</figure>
  <header class="entry-header">
    <h2>Python与文化分析入门
    </h2>
  </header>
  <section class="entry-content">
    <p>点击上方图片购买课程   Introduction to Cultural Analytics &amp; Python Designed by Melanie Walsh // Powered by Jupyter Book
该项目仓库托管了在线教科书 Introduction to Cultural Analytics &amp; Python 里的代码，主要面向人文社科人群设计的Python编程语言书
这本书展示了如何使用 Python 来研究文化领域的数据，例如歌词、短篇小说、报纸文章、推文、Reddit 帖子和电影剧本。 它还介绍了网络抓取、API、主题建模、命名实体识别 (NER)、网络分析和映射等计算方法。
这些材料最初是为了支持“文化分析简介：数据、计算和文化”，这是康奈尔大学和华盛顿大学教授的本科课程。
# 章节列表 ## 数据集 ## 命令行 Python语法  安装Python 如何使用Jupyter Notebook 变量 数据类型 字符串方法 比较逻辑运算 循环 函数 文件编码 常见Python错误 Jupyter使用技巧   数据分析  Pandas基本操作 合并数据   数据采集  法律风险 网络爬虫 API 案例-采集歌词 案例-twitter 案例-Reddit   文本分析  TF-IDf 情感分析 话题模型 命名实体识别 词性   网络分析  bokeh网络可视化   资料下载 https://github....</p>
  </section>
  <footer class="entry-footer"><span title='2021-12-31 12:43:10 +0600 +0600'>2021-12-31</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;大邓</footer>
  <a class="entry-link" aria-label="post link to Python与文化分析入门" href="/blog/cultureanalysis/" target='_blank'></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    
    <a class="prev" href="/categories/%E7%BC%96%E7%A8%8B/page/4/">上一页</a>
    
    <a class="next" href="/categories/%E7%BC%96%E7%A8%8B/page/6/">下一页</a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="/">大邓和他的PYTHON</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
