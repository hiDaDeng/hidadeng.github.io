<!DOCTYPE html>

<html lang="zh-CN" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>二、Stats模块 &#8212; cntext2.x 2.1.5 文档</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=77c12230"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/translations.js?v=beaddf03"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="next" title="三、Model模块" href="model.html" />
    <link rel="prev" title="一、IO模块" href="io.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="stats">
<h1>二、Stats模块<a class="headerlink" href="#stats" title="Link to this heading">¶</a></h1>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>模块</p></th>
<th class="head"><p>函数</p></th>
<th class="head"><p>功能</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em><strong>stats</strong></em></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ct.word_count(text,</span> <span class="pre">lang='chinese')</span></code></p></td>
<td><p>词频统计</p></td>
</tr>
<tr class="row-odd"><td><p><em><strong>stats</strong></em></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ct.readability(text,</span> <span class="pre">lang='chinese')</span></code></p></td>
<td><p>文本可读性</p></td>
</tr>
<tr class="row-even"><td><p><em><strong>stats</strong></em></p></td>
<td><p><em><strong>ct.sentiment(text, diction, lang='chinese')</strong></em></p></td>
<td><p>无(等)权重词典的情感分析</p></td>
</tr>
<tr class="row-odd"><td><p><em><strong>stats</strong></em></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ct.sentiment_by_valence(text,</span> <span class="pre">diction,</span> <span class="pre">lang='chinese')</span></code></p></td>
<td><p>带权重的词典的情感分析</p></td>
</tr>
<tr class="row-even"><td><p><em><strong>stats</strong></em></p></td>
<td><p><em><strong>ct.word_in_context(text, keywords, window=3, lang='chinese')</strong></em></p></td>
<td><p>在text中查找keywords出现的上下文内容(窗口window)，返回df</p></td>
</tr>
<tr class="row-odd"><td><p><em><strong>stats</strong></em></p></td>
<td><p><em><strong>ct.epu(text, e_pattern, p_pattern, u_pattern)</strong></em></p></td>
<td><p>使用新闻文本数据计算经济政策不确定性EPU，返回df</p></td>
</tr>
<tr class="row-even"><td><p><em><strong>stats</strong></em></p></td>
<td><p><em><strong>ct.fepu(text, ep_pattern='', u_pattern='')</strong></em></p></td>
<td><p>使用md&amp;a文本数据计算企业不确定性感知FEPU</p></td>
</tr>
<tr class="row-odd"><td><p><em><strong>stats</strong></em></p></td>
<td><p><em><strong>ct.semantic_brand_score(text, brands, lang='chinese')</strong></em></p></td>
<td><p>衡量品牌（个体、公司、品牌、关键词等）的重要性</p></td>
</tr>
<tr class="row-even"><td><p><em><strong>stats</strong></em></p></td>
<td><p><em><strong>ct.cosine_sim(text1, text2, lang='chinese')</strong></em></p></td>
<td><p>余弦相似度</p></td>
</tr>
<tr class="row-odd"><td><p><em><strong>stats</strong></em></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ct.jaccard_sim(text1,</span> <span class="pre">text2,</span> <span class="pre">lang='chinese')</span></code></p></td>
<td><p>Jaccard相似度</p></td>
</tr>
<tr class="row-even"><td><p><em><strong>stats</strong></em></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ct.minedit_sim(text1,</span> <span class="pre">text2,</span> <span class="pre">lang='chinese')</span></code></p></td>
<td><p>最小编辑距离</p></td>
</tr>
<tr class="row-odd"><td><p><em><strong>stats</strong></em></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ct.word_hhi(text)</span></code></p></td>
<td><p>文本的赫芬达尔-赫希曼指数</p></td>
</tr>
</tbody>
</table>
<br>
<section id="word-count">
<h2>2.1 word_count()<a class="headerlink" href="#word-count" title="Link to this heading">¶</a></h2>
<p>统计词频， 返回Counter(类似于python字典) ； 支持中英文</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ct</span><span class="o">.</span><span class="n">word_count</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">,</span> <span class="n">return_df</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>text</strong> 待分析的文本字符串</p></li>
<li><p><strong>lang</strong> 文本的语言类型， 中文chinese、英文english，默认中文。</p></li>
<li><p><strong>return_df</strong> 返回结果是否为dataframe，默认False</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">cntext</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ct</span>

<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;致力于致力于以零文章处理费或订阅费发布优质研究软件。&#39;</span>

<span class="c1"># ct.word_count(text, lang=&#39;chinese&#39;)</span>
<span class="n">ct</span><span class="o">.</span><span class="n">word_count</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
<p>Run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Counter</span><span class="p">({</span><span class="s1">&#39;致力于&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
         <span class="s1">&#39;文章&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
         <span class="s1">&#39;处理费&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
         <span class="s1">&#39;订阅费&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
         <span class="s1">&#39;发布&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
         <span class="s1">&#39;优质&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
         <span class="s1">&#39;研究&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
         <span class="s1">&#39;软件&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</pre></div>
</div>
<br>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ct</span><span class="o">.</span><span class="n">word_count</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">return_df</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="" src="_images/09-term_freq.png" /></p>
<br>
</section>
<section id="readability">
<h2>2.2 readability()<a class="headerlink" href="#readability" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ct</span><span class="o">.</span><span class="n">readability</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> 
              <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">,</span> 
              <span class="n">syllables</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> 
              <span class="n">return_series</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>计算文本可读性常见指标； 含 Gunning Fog Index、 SMOG Index、Coleman Liau Index、 Automated Readability Index(ARI)、Readability Index(Rix) ； 指标越大，复杂度越高，文本的可读性越差。</p>
<ul class="simple">
<li><p><strong>text</strong>  待分析的文本字符串</p></li>
<li><p><strong>lang</strong> 文本的语言类型， 中文chinese、英文english，默认中文。</p></li>
<li><p><strong>syllables</strong> 音节数(汉字数)大于等于syllables为复杂词. 默认值为3</p></li>
<li><p><strong>return_series</strong>: 计算结果是否输出为pd.Series类型，默认为False</p></li>
</ul>
<br>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Gunning</span> <span class="n">Fog</span> <span class="n">Index</span> <span class="o">=</span> <span class="mf">0.4</span> <span class="o">*</span> <span class="p">(</span><span class="n">Total_Words</span><span class="o">/</span><span class="n">Total_Sentences</span> <span class="o">+</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">Complex_Words</span><span class="o">/</span><span class="n">Total_Words</span><span class="p">)</span>
<span class="n">SMOG</span> <span class="n">Index</span> <span class="o">=</span> <span class="mf">1.0430</span> <span class="o">*</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">Complex_Words</span><span class="o">/</span><span class="n">Total_Sentences</span><span class="p">)</span> <span class="o">*</span> <span class="mi">30</span> <span class="o">+</span> <span class="mf">3.1291</span>
<span class="n">Coleman</span><span class="o">-</span><span class="n">Liau</span> <span class="n">Index</span> <span class="o">=</span> <span class="mf">0.0588</span> <span class="o">*</span> <span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="n">Total_Letters</span><span class="o">/</span><span class="n">Total_Words</span><span class="p">)</span> <span class="o">-</span><span class="mf">0.296</span><span class="o">*</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="n">Total_Sentences</span><span class="o">/</span><span class="n">Total_Words</span><span class="p">)</span> <span class="o">-</span> <span class="mf">15.8</span>
<span class="n">Automated</span> <span class="n">Readability</span> <span class="n">Index</span><span class="p">(</span><span class="n">ARI</span><span class="p">)</span> <span class="o">=</span> <span class="mf">4.71</span> <span class="o">*</span> <span class="p">(</span><span class="n">Total_Characters</span><span class="o">/</span><span class="n">Total_Words</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">*</span><span class="p">(</span><span class="n">Total_Words</span><span class="o">/</span><span class="n">Total_Sentences</span><span class="p">)</span> <span class="o">-</span> <span class="mf">21.43</span>
<span class="n">Readability</span> <span class="n">Index</span><span class="p">(</span><span class="n">RIX</span><span class="p">)</span> <span class="o">=</span> <span class="n">Complex_Words</span> <span class="o">*</span> <span class="p">(</span><span class="mi">6</span> <span class="o">+</span> <span class="n">Total_characters</span><span class="p">)</span> <span class="o">/</span> <span class="n">Total_Sentences</span>
</pre></div>
</div>
<br>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">cntext</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ct</span>

<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;致力于以零文章处理费或订阅费发布优质研究软件。&#39;</span>

<span class="n">ct</span><span class="o">.</span><span class="n">readability</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">,</span> <span class="n">syllables</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;fog_index&#39;</span><span class="p">:</span> <span class="mf">120.4</span><span class="p">,</span>
 <span class="s1">&#39;flesch_kincaid_grade_level&#39;</span><span class="p">:</span> <span class="mf">20.2</span><span class="p">,</span>
 <span class="s1">&#39;smog_index&#39;</span><span class="p">:</span> <span class="mf">57.32</span><span class="p">,</span>
 <span class="s1">&#39;coleman_liau_index&#39;</span><span class="p">:</span> <span class="mf">83.96</span><span class="p">,</span>
 <span class="s1">&#39;ari&#39;</span><span class="p">:</span> <span class="mf">87.4</span><span class="p">,</span>
 <span class="s1">&#39;rix&#39;</span><span class="p">:</span> <span class="mf">87.0</span><span class="p">}</span>
</pre></div>
</div>
<br>
</section>
<section id="sentiment-text-diction-lang">
<h2>2.3 sentiment(text, diction, lang)<a class="headerlink" href="#sentiment-text-diction-lang" title="Link to this heading">¶</a></h2>
<p>常见的情感分析默认情绪词无(等)权重， 通过统计词语个数来反应情感信息。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ct</span><span class="o">.</span><span class="n">sentiment</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">diction</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">,</span> <span class="n">return_series</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>text</strong> 待分析的文本字符串</p></li>
<li><p><strong>diction</strong>  格式为Python字典类型。形如下面的案例</p></li>
<li><p><strong>lang</strong> 文本的语言类型， 中文 <em><strong>'chinese'</strong></em> 、英文 <em><strong>'english'</strong></em> ，默认中文。</p></li>
<li><p><strong>return_series</strong>  计算结果是否输出为 <em><strong>pd.Series</strong></em> 类型，默认为 <em><strong>False</strong></em></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">cntext</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ct</span>

<span class="n">diction</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;pos&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;高兴&#39;</span><span class="p">,</span> <span class="s1">&#39;快乐&#39;</span><span class="p">,</span> <span class="s1">&#39;分享&#39;</span><span class="p">],</span>
           <span class="s1">&#39;neg&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;难过&#39;</span><span class="p">,</span> <span class="s1">&#39;悲伤&#39;</span><span class="p">],</span>
           <span class="s1">&#39;adv&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;很&#39;</span><span class="p">,</span> <span class="s1">&#39;特别&#39;</span><span class="p">]}</span>

<span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;我今天得奖了，很高兴，我要将快乐分享大家。&#39;</span>
<span class="n">ct</span><span class="o">.</span><span class="n">sentiment</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> 
             <span class="n">diction</span><span class="o">=</span><span class="n">diction</span><span class="p">,</span> 
             <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;pos_num&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
 <span class="s1">&#39;neg_num&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;adv_num&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
 <span class="s1">&#39;stopword_num&#39;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
 <span class="s1">&#39;word_num&#39;</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span>
 <span class="s1">&#39;sentence_num&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
</pre></div>
</div>
<br>
</section>
<section id="sentiment-by-valence">
<h2>2.4 sentiment_by_valence()<a class="headerlink" href="#sentiment-by-valence" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ct</span><span class="o">.</span><span class="n">sentiment_by_valence</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> 
                        <span class="n">diction</span><span class="p">,</span> 
                        <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">,</span> 
                        <span class="n">return_series</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>text</strong> 待分析的文本字符串</p></li>
<li><p><strong>diction</strong>  格式为Python字典类型。形如下面的案例</p></li>
<li><p><strong>lang</strong> 文本的语言类型， 中文chinese、英文english，默认中文。</p></li>
<li><p><strong>return_series</strong> 计算结果是否输出为pd.Series类型，默认为False</p></li>
</ul>
<p>常见的情感分析是无(等)权重, 但实际上不同的词语所携带的情感信息的强度差异是很大的。据此学者们开发出很多带权重的词典，例如</p>
<ul class="simple">
<li><p>英文具体性词典 en_valence_Concreteness.yaml ， 词典中每个词都有一个concreteness值</p></li>
<li><p>中文六维度语义词典 zh_valence_SixSemanticDimensionDatabase.yaml ，  每个中文词有六个值。</p></li>
</ul>
<p>以具体性为例， <strong>语言具体性 Concreteness</strong> 描述了一个词在多大程度上是指一个实际的、有形的或“真实的”实体，以一种更具体、更熟悉、更容易被眼睛或心灵感知的方式描述对象和行为（即，可想象或生动；Brysbaert, Warriner, and Kuperman 2014; Semin and Fiedler 1988)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">cntext</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ct</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="n">concreteness_dict</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">read_yaml_dict</span><span class="p">(</span><span class="s1">&#39;en_valence_Concreteness.yaml&#39;</span><span class="p">)[</span><span class="s1">&#39;Dictionary&#39;</span><span class="p">]</span>
<span class="n">concreteness_dict</span>
</pre></div>
</div>
<p>Run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;roadsweeper&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;concreteness&#39;</span><span class="p">:</span> <span class="mf">4.85</span><span class="p">},</span>
 <span class="s1">&#39;traindriver&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;concreteness&#39;</span><span class="p">:</span> <span class="mf">4.54</span><span class="p">},</span>
 <span class="s1">&#39;tush&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;concreteness&#39;</span><span class="p">:</span> <span class="mf">4.45</span><span class="p">},</span>
 <span class="s1">&#39;hairdress&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;concreteness&#39;</span><span class="p">:</span> <span class="mf">3.93</span><span class="p">},</span>
 <span class="s1">&#39;pharmaceutics&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;concreteness&#39;</span><span class="p">:</span> <span class="mf">3.77</span><span class="p">},</span>
 <span class="s1">&#39;hoover&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;concreteness&#39;</span><span class="p">:</span> <span class="mf">3.76</span><span class="p">},</span>
 <span class="s1">&#39;shopkeeping&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;concreteness&#39;</span><span class="p">:</span> <span class="mf">3.18</span><span class="p">},</span>
 <span class="s1">&#39;pushiness&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;concreteness&#39;</span><span class="p">:</span> <span class="mf">2.48</span><span class="p">},</span>
 <span class="o">......</span>
 <span class="p">}</span>
</pre></div>
</div>
<p>可能 <em><strong>concreteness_dict</strong></em> 不够直观， 如果整理转化一下大概类似于</p>
<p><img alt="" src="_images/11-concreteness_df.png" /></p>
<p><a class="reference external" href="https://textdata.cn/blog/jcr_concreteness_computation/"><strong>JCR2021 | 计算文本的语言具体性</strong></a> 文中提供了一个案例</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">reply</span> <span class="o">=</span> <span class="s2">&quot;I&#39;ll go look for that&quot;</span>

<span class="n">score</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="n">sentiment_by_valence</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">reply</span><span class="p">,</span> 
                              <span class="n">diction</span><span class="o">=</span><span class="n">concreteness_dict</span><span class="p">,</span> 
                              <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>

<span class="n">score</span>
</pre></div>
</div>
<p>Run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;concreteness&#39;</span><span class="p">:</span> <span class="mf">9.28</span><span class="p">,</span> 
<span class="s1">&#39;word_num&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">}</span>
</pre></div>
</div>
<br>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">employee_replys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;I&#39;ll go look for that&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;I&#39;ll go search for that&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;I&#39;ll go search for that top&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;I&#39;ll go search for that t-shirt&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;I&#39;ll go look for that t-shirt in grey&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;I&#39;ll go search for that t-shirt in grey&quot;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">reply</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">employee_replys</span><span class="p">):</span>
    <span class="n">score</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="n">sentiment_by_valence</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">reply</span><span class="p">,</span> 
                                  <span class="n">diction</span><span class="o">=</span><span class="n">concreteness_dict</span><span class="p">,</span> 
                                  <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>
    
    <span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;Concreteness Score: </span><span class="si">{score:.2f}</span><span class="s2"> | Example-</span><span class="si">{idx}</span><span class="s2">: </span><span class="si">{exmaple}</span><span class="s2">&quot;</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">score</span><span class="o">=</span><span class="n">score</span><span class="p">[</span><span class="s1">&#39;concreteness&#39;</span><span class="p">],</span> 
                          <span class="n">idx</span><span class="o">=</span><span class="n">idx</span><span class="p">,</span> 
                          <span class="n">exmaple</span><span class="o">=</span><span class="n">reply</span><span class="p">))</span>
</pre></div>
</div>
<p>Run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Concreteness</span> <span class="n">Score</span><span class="p">:</span> <span class="mf">9.28</span> <span class="o">|</span> <span class="n">Example</span><span class="o">-</span><span class="mi">0</span><span class="p">:</span> <span class="n">I</span><span class="s1">&#39;ll go look for that</span>
<span class="n">Concreteness</span> <span class="n">Score</span><span class="p">:</span> <span class="mf">9.32</span> <span class="o">|</span> <span class="n">Example</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="n">I</span><span class="s1">&#39;ll go search for that</span>
<span class="n">Concreteness</span> <span class="n">Score</span><span class="p">:</span> <span class="mf">13.25</span> <span class="o">|</span> <span class="n">Example</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span> <span class="n">I</span><span class="s1">&#39;ll go search for that top</span>
<span class="n">Concreteness</span> <span class="n">Score</span><span class="p">:</span> <span class="mf">14.25</span> <span class="o">|</span> <span class="n">Example</span><span class="o">-</span><span class="mi">3</span><span class="p">:</span> <span class="n">I</span><span class="s1">&#39;ll go search for that t-shirt</span>
<span class="n">Concreteness</span> <span class="n">Score</span><span class="p">:</span> <span class="mf">21.32</span> <span class="o">|</span> <span class="n">Example</span><span class="o">-</span><span class="mi">4</span><span class="p">:</span> <span class="n">I</span><span class="s1">&#39;ll go look for that t-shirt in grey</span>
<span class="n">Concreteness</span> <span class="n">Score</span><span class="p">:</span> <span class="mf">21.36</span> <span class="o">|</span> <span class="n">Example</span><span class="o">-</span><span class="mi">5</span><span class="p">:</span> <span class="n">I</span><span class="s1">&#39;ll go search for that t-shirt in grey</span>
</pre></div>
</div>
<br>
</section>
<section id="word-in-context">
<h2>2.5 word_in_context()<a class="headerlink" href="#word-in-context" title="Link to this heading">¶</a></h2>
<p>You shall know a word by the company it keeps通过一个单词所处的语境，我们可以了解该单词的含义。</p>
<p>在text中查找keywords出现的上下文内容(窗口window)，返回df。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ct</span><span class="o">.</span><span class="n">word_in_context</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">keywords</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>text</strong>  待分析文本</p></li>
<li><p><strong>keywords</strong>  关键词列表</p></li>
<li><p><strong>window</strong>  关键词上下文窗口大小</p></li>
<li><p><strong>lang</strong> 文本的语言类型， 中文chinese、英文english，默认中文。</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">cntext</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ct</span>

<span class="c1"># 测试代码，假设zh_text是年报文本，从找找出丝网词相关词的上下文</span>
<span class="n">zh_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">【插入一条自家广告】大邓自己家的家，</span>
<span class="s2">安平县多隆丝网制品，生产销售不锈钢轧花网、</span>
<span class="s2">电焊网、石笼网、刀片刺绳、冲孔网等丝网制品。</span>
<span class="s2">联系人 邓颖静 0318-7686899</span>

<span class="s2">人生苦短，我学Python</span>
<span class="s2">在社科中，可以用Python做文本分析</span>
<span class="s2">Python是一门功能强大的编程语言，广泛应用在经管社科领域。</span>
<span class="s2">可以做网络爬虫、文本分析、LDA话题模型、相似度分析等。</span>

<span class="s2">今年经济不景气，形势异常严峻。</span>
<span class="s2">由于疫情不景气，静默管理， 产品积压， 公司经营困难。</span>
<span class="s2">保就业促就业，任务十分艰巨。</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="c1">#【python】上下文</span>
<span class="n">ct</span><span class="o">.</span><span class="n">word_in_context</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="n">zh_text</span><span class="p">,</span> 
                   <span class="n">keywords</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;python&#39;</span><span class="p">],</span> 
                   <span class="n">window</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> 
                   <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="" src="_images/20-word-in-context.png" /></p>
<br>
</section>
<section id="epu">
<h2>2.6 epu()<a class="headerlink" href="#epu" title="Link to this heading">¶</a></h2>
<p><a class="reference external" href="https://textdata.cn/blog/2023-12-20-measure-china-economic-policy-uncertainty/"><strong>代码  | 使用新闻数据测量经济政策不确定性EPU</strong></a></p>
<p><img alt="" src="_images/13-epu-plot.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ct</span><span class="o">.</span><span class="n">epu</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;Y&#39;</span><span class="p">,</span> <span class="n">e_pattern</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">p_pattern</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">u_pattern</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>df</strong>  新闻数据DataFrame， 含text和date两个字段。 每一行代表一条新闻记录</p></li>
<li><p><strong>freq</strong> 字符串， 确定EPU指数的时间颗粒度； 如年Y, 月m, 日d, 默认 freq='Y'</p></li>
<li><p><strong>e_pattern</strong> 字符串，经济类词典，用<code class="docutils literal notranslate"><span class="pre">|</span></code>间隔词语，形如 <strong>e_pattern = &quot;经济|金融&quot;</strong></p></li>
<li><p><strong>p_pattern</strong> 字符串，政策词典，用<code class="docutils literal notranslate"><span class="pre">|</span></code>间隔词语，形如 <strong>p_pattern = &quot;政策|治理|行政&quot;</strong></p></li>
<li><p><strong>u_pattern</strong>  字符串，不确定性词典，用<code class="docutils literal notranslate"><span class="pre">|</span></code>间隔词语，形如 <strong>u_pattern = &quot;风险|危机|难以预测&quot;</strong></p></li>
</ul>
<p>准备如下图格式的数据 <em><strong>news_df</strong></em></p>
<p><img alt="" src="_images/12-news-df.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">cntext</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ct</span>

<span class="c1">#省略，读取数据得到 news_df</span>

<span class="n">epu_df</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">epu</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">news_df</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">)</span>
<span class="n">epu_df</span>
</pre></div>
</div>
<p><img alt="" src="_images/13-epu-df.png" /></p>
<br>
</section>
<section id="fepu">
<h2>2.7 fepu()<a class="headerlink" href="#fepu" title="Link to this heading">¶</a></h2>
<p><a class="reference external" href="https://textdata.cn/blog/2024-04-25-firm-economic-policy-uncertainty/">使用管理层讨论与分析文本数据测量「企业感知不确定性」(Subjective perception of economic policy uncertainty, FEPU)</a></p>
<p><img alt="" src="_images/16-fepu-plot.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ct</span><span class="o">.</span><span class="n">fepu</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">ep_pattern</span><span class="p">,</span> <span class="n">u_pattern</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><em><strong>text</strong></em>  某时期 <em><strong>t</strong></em> 某企业 <em><strong>i</strong></em> 的管理层讨论与分析 <em><strong>md&amp;a</strong></em> 文本</p></li>
<li><p><em><strong>ep_pattern</strong></em> 字符串，经济政策类词典，用<code class="docutils literal notranslate"><span class="pre">|</span></code>间隔词语，形如 <strong>ep_pattern = &quot;经济|金融|政策|治理|行政&quot;</strong></p></li>
<li><p><em><strong>u_pattern</strong></em> 字符串，不确定性词典，用<code class="docutils literal notranslate"><span class="pre">|</span></code>间隔词语，形如 <strong>u_pattern = &quot;风险|危机|难以预测&quot;</strong></p></li>
</ul>
<p>准备如下图格式的数据 <em><strong>mda_df</strong></em></p>
<p><img alt="" src="_images/14-mdadf.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">cntext</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ct</span>

<span class="c1"># 省略，读取数据得到 mda_df</span>

<span class="n">fepu_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;经营讨论与分析内容&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">fepu</span><span class="p">)</span>
<span class="n">res_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;会计年度&#39;</span><span class="p">,</span> <span class="s1">&#39;股票代码&#39;</span><span class="p">]],</span> <span class="n">fepu_df</span><span class="p">],</span>   <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">res_df</span>
</pre></div>
</div>
<p><img alt="" src="_images/15-fepu.png" /></p>
<br>
<br>
</section>
<section id="semantic-brand-score">
<h2>2.8 semantic_brand_score()<a class="headerlink" href="#semantic-brand-score" title="Link to this heading">¶</a></h2>
<p><a class="reference external" href="https://textdata.cn/blog/2024-04-12-semantic-brand-score/">文献&amp;代码 | 使用Python计算语义品牌评分(Semantic Brand Score, SBS)</a> ， 通过 SBS 来衡量品牌（个体、公司、品牌、关键词等）的重要性。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ct</span><span class="o">.</span><span class="n">semantic_brand_score</span><span class="p">(</span><span class="n">text</span><span class="p">,</span>  <span class="n">brands</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><em><strong>text</strong></em> 待分析文本</p></li>
<li><p><em><strong>brands</strong></em> 词语列表；</p></li>
<li><p><em><strong>lang</strong></em>  语言类型，&quot;chinese&quot;或&quot;english&quot;，默认&quot;chinese&quot;</p></li>
</ul>
<p>以三体小说为例，通过测量品牌语义评分SBS来反映小说角色的重要性。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">cntext</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ct</span>

<span class="n">brands</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;汪淼&#39;</span><span class="p">,</span> <span class="s1">&#39;史强&#39;</span><span class="p">,</span> <span class="s1">&#39;罗辑&#39;</span><span class="p">,</span> <span class="s1">&#39;叶文洁&#39;</span><span class="p">,</span> <span class="s1">&#39;伊文斯&#39;</span><span class="p">]</span>

<span class="c1">#准备santi_test_text</span>
<span class="c1">#小说等分20份， 读取第一份得到santi_test_text</span>

<span class="n">sbs_df</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">semantic_brand_score</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">santi_test_text</span><span class="p">,</span> 
                               <span class="n">brands</span><span class="o">=</span><span class="n">brands</span><span class="p">,</span> 
                               <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
<span class="n">sbs_df</span>
</pre></div>
</div>
<p><img alt="" src="_images/19-1st-sbs.png" /></p>
<p>如果将三体小说分成20份， 每一份都测算出每个角色的SBS，绘制出折线图如下图所示。</p>
<p><img alt="" src="_images/18-sbs-plot.png" /></p>
</section>
<section id="id1">
<h2>2.9 文本相似度<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ct</span><span class="o">.</span><span class="n">cosine_sim</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>   <span class="n">cos余弦相似</span>
<span class="n">ct</span><span class="o">.</span><span class="n">jaccard_sim</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>  <span class="n">jaccard相似</span>
<span class="n">ct</span><span class="o">.</span><span class="n">minedit_sim</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>  <span class="n">最小编辑距离相似度</span>
<span class="n">ct</span><span class="o">.</span><span class="n">simple_sim</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>   <span class="n">更改变动算法</span>
</pre></div>
</div>
<p>算法实现参考自</p>
<blockquote>
<div><p>Cohen, Lauren, Christopher Malloy, and Quoc Nguyen. Lazy prices. No. w25084. National Bureau of Economic Research, 2018.</p>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">cntext</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ct</span> 

<span class="n">text1</span> <span class="o">=</span> <span class="s1">&#39;编程真好玩编程真好玩&#39;</span>
<span class="n">text2</span> <span class="o">=</span> <span class="s1">&#39;游戏真好玩编程真好玩&#39;</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cosine&#39;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">cosine_sim</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;jaccard&#39;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">jaccard_sim</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;minedit&#39;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">minedit_sim</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;simple&#39;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">simple_sim</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>Run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cosine</span>  <span class="mf">0.82</span>
<span class="n">jaccard</span> <span class="mf">0.67</span>
<span class="n">minedit</span> <span class="mf">1.00</span>
<span class="n">simple</span> <span class="mf">0.84</span>
</pre></div>
</div>
<br>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">cntext</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ct</span> 


<span class="n">text1</span> <span class="o">=</span> <span class="s1">&#39;Programming is fun!&#39;</span>
<span class="n">text2</span> <span class="o">=</span> <span class="s1">&#39;Programming is interesting!&#39;</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cosine&#39;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">cosine_sim</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;jaccard&#39;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">jaccard_sim</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;minedit&#39;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">minedit_sim</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;simple&#39;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">simple_sim</span><span class="p">(</span><span class="n">text1</span><span class="p">,</span> <span class="n">text2</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>Run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cosine</span>  <span class="mf">0.67</span>
<span class="n">jaccard</span> <span class="mf">0.50</span>
<span class="n">minedit</span> <span class="mf">1.00</span>
<span class="n">simple</span> <span class="mf">0.78</span>
</pre></div>
</div>
<br>
</section>
<section id="word-hhi">
<h2>2.10 word_hhi<a class="headerlink" href="#word-hhi" title="Link to this heading">¶</a></h2>
<p>文本的赫芬达尔-赫希曼指数。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ct</span><span class="o">.</span><span class="n">word_hhi</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
</pre></div>
</div>
<br>
<p><strong>赫芬达尔-赫希曼指数</strong>(<strong>Herfindahl-Hirschman Index</strong>)作为一种衡量市场集中度的经济指标，通常用于分析产业或市场中企业份额的分布情况。</p>
<p><img alt="" src="_images/word-hhi-algo.png" /></p>
<p>前人类比市场集中程度，用于测量专利质量(知识宽度)。 那放在文本语言中，我们是否可能利用HHI来量化某个语料库中不同词汇的使用频率分布，以此来分析个人、群体或时代的语言风格、词汇丰富度、或是语言标准化与变化的趋势。</p>
<ul class="simple">
<li><p>如果词汇分布非常均匀，表明语言使用中的词汇多样性高，HHI值就会较低；</p></li>
<li><p>反之，如果少数词汇占据了大部分文本空间，表明词汇使用集中，HHI值则较高。</p></li>
</ul>
<p>结合其他语言学指标一起使用，比如TTR（Type-Token Ratio，类型-标记比率）、Shannon entropy（香农熵）等，共同评估语言表达的复杂度和多样性。不过，这类研究的文献相对较少，因为语言学领域有自己一套成熟且专业的分析工具和方法，HHI更多地被视为跨学科应用的一个创新尝试。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">cntext</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ct</span>

<span class="n">personA</span> <span class="o">=</span> <span class="s1">&#39;这场音乐会太嗨了&#39;</span>
<span class="n">personB</span> <span class="o">=</span> <span class="s1">&#39;这场音乐会说出来令你不敢相信，主办方策划有方，群众激情满满，我印象深刻，体验感拉满&#39;</span>


<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;A-hhi&#39;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">word_hhi</span><span class="p">(</span><span class="n">personA</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;B-hhi&#39;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">word_hhi</span><span class="p">(</span><span class="n">personB</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;A词汇多样性&#39;</span><span class="p">,</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">ct</span><span class="o">.</span><span class="n">word_hhi</span><span class="p">(</span><span class="n">personA</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;B词汇多样性&#39;</span><span class="p">,</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">ct</span><span class="o">.</span><span class="n">word_hhi</span><span class="p">(</span><span class="n">personB</span><span class="p">))</span>
</pre></div>
</div>
<p>Run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A</span><span class="o">-</span><span class="n">hhi</span> <span class="mf">0.20000000000000004</span>
<span class="n">B</span><span class="o">-</span><span class="n">hhi</span> <span class="mf">0.07024793388429751</span>

<span class="n">A词汇多样性</span> <span class="mf">0.7999999999999999</span>
<span class="n">B词汇多样性</span> <span class="mf">0.9297520661157025</span>
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">cntext2.x</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="提交" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>导航</h3>
<p class="caption" role="heading"><span class="caption-text">目录</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">QuickStart</a></li>
<li class="toctree-l1"><a class="reference internal" href="io.html">一、IO模块</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">二、Stats模块</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#word-count">2.1 word_count()</a></li>
<li class="toctree-l2"><a class="reference internal" href="#readability">2.2 readability()</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sentiment-text-diction-lang">2.3 sentiment(text, diction, lang)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sentiment-by-valence">2.4 sentiment_by_valence()</a></li>
<li class="toctree-l2"><a class="reference internal" href="#word-in-context">2.5 word_in_context()</a></li>
<li class="toctree-l2"><a class="reference internal" href="#epu">2.6 epu()</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fepu">2.7 fepu()</a></li>
<li class="toctree-l2"><a class="reference internal" href="#semantic-brand-score">2.8 semantic_brand_score()</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">2.9 文本相似度</a></li>
<li class="toctree-l2"><a class="reference internal" href="#word-hhi">2.10 word_hhi</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="model.html">三、Model模块</a></li>
<li class="toctree-l1"><a class="reference internal" href="mind.html">四、Mind模块</a></li>
<li class="toctree-l1"><a class="reference internal" href="llm.html">五、LLM模块</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot.html">六、Plot模块</a></li>
<li class="toctree-l1"><a class="reference internal" href="cite.html">引用说明</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="io.html" title="上一章">一、IO模块</a></li>
      <li>Next: <a href="model.html" title="下一章">三、Model模块</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, 大邓.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/stats.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>