<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>失败案例 |  使用裁判文书数据集逐年训练年份词向量 | 大邓和他的PYTHON</title>
<meta name="keywords" content="Python, word2vec" />
<meta name="description" content="想用裁判文书数据集，逐年训练词向量的同学，可以好好看本文，能节省你几十个小时时间。

一、检查数据 裁判文书数据集，每个月份存储到一个csv， 每个年份有一个对应的文件夹。下图是 2021 年的文件夹截图 csv字段格式是一致的，我们只需要找一个文件，尝试着读取前5行，查看数据中有哪些字段。
import pandas as pd df = pd.read_csv(&#39;2013/2013-01.csv&#39;, nrows=5) df.dropna(subset=[&#39;文书内容&#39;], inplace=True) df.head(1) 
二、构造语料 我们只从csv中选取 &ldquo;文书内容&rdquo; ，并将其存储到语料txt文件中。
考虑到电脑性能， 预料不要太大， 1G左右是比较适中，在电脑内存为8G的情况下，应该能跑通。
2010/2011/2013这三个年度的数据只有几百M， 数据全部保留。 剩下的年份，设置不同的抽样比例，尽可能将生成的语料txt文件控制在1G左右。下面是经过粗略计算设定的比例，实际最终数据控制在800M左右。
裁判文书数据量高达300G， 读取、抽样、存储，全部过程耗时大概6小时。
   年份 解压后文件大小 抽样比例 语料txt大小     2010 761M 100% 684M   2011 452M 100% 396M   2012 757M 100% 665M   2013 5.13G 20% 984M   2014 23.7G 4% 905M   2015 33.">
<meta name="author" content="大邓">
<link rel="canonical" href="/blog/2023-11-18-failure-example-show-word-meaning-shift-using-word2vec/" />
<meta name="baidu-site-verification" content="codeva-TJUe6nOmGr" />
<meta name="sogou-site-verification" content="dZHPIorOhK" />
<meta name="sogou-site-verification" content="dZHPIorOhK" />
<meta name="google-site-verification" content="0cmjnyICPwXY_UmLHzs6RRUBIFxxqieMsgTGT_kVctk" />
<meta name="yandex-verification" content="5e672f12d3e2cacd" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.css" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.js" onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.89.4" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="失败案例 |  使用裁判文书数据集逐年训练年份词向量" />
<meta property="og:description" content="想用裁判文书数据集，逐年训练词向量的同学，可以好好看本文，能节省你几十个小时时间。

一、检查数据 裁判文书数据集，每个月份存储到一个csv， 每个年份有一个对应的文件夹。下图是 2021 年的文件夹截图 csv字段格式是一致的，我们只需要找一个文件，尝试着读取前5行，查看数据中有哪些字段。
import pandas as pd df = pd.read_csv(&#39;2013/2013-01.csv&#39;, nrows=5) df.dropna(subset=[&#39;文书内容&#39;], inplace=True) df.head(1) 
二、构造语料 我们只从csv中选取 &ldquo;文书内容&rdquo; ，并将其存储到语料txt文件中。
考虑到电脑性能， 预料不要太大， 1G左右是比较适中，在电脑内存为8G的情况下，应该能跑通。
2010/2011/2013这三个年度的数据只有几百M， 数据全部保留。 剩下的年份，设置不同的抽样比例，尽可能将生成的语料txt文件控制在1G左右。下面是经过粗略计算设定的比例，实际最终数据控制在800M左右。
裁判文书数据量高达300G， 读取、抽样、存储，全部过程耗时大概6小时。
   年份 解压后文件大小 抽样比例 语料txt大小     2010 761M 100% 684M   2011 452M 100% 396M   2012 757M 100% 665M   2013 5.13G 20% 984M   2014 23.7G 4% 905M   2015 33." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/blog/2023-11-18-failure-example-show-word-meaning-shift-using-word2vec/" />
<meta property="og:image" content="/images/blog/word2vec.png" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2023-11-18T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2023-11-18T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="/images/blog/word2vec.png" />
<meta name="twitter:title" content="失败案例 |  使用裁判文书数据集逐年训练年份词向量"/>
<meta name="twitter:description" content="想用裁判文书数据集，逐年训练词向量的同学，可以好好看本文，能节省你几十个小时时间。

一、检查数据 裁判文书数据集，每个月份存储到一个csv， 每个年份有一个对应的文件夹。下图是 2021 年的文件夹截图 csv字段格式是一致的，我们只需要找一个文件，尝试着读取前5行，查看数据中有哪些字段。
import pandas as pd df = pd.read_csv(&#39;2013/2013-01.csv&#39;, nrows=5) df.dropna(subset=[&#39;文书内容&#39;], inplace=True) df.head(1) 
二、构造语料 我们只从csv中选取 &ldquo;文书内容&rdquo; ，并将其存储到语料txt文件中。
考虑到电脑性能， 预料不要太大， 1G左右是比较适中，在电脑内存为8G的情况下，应该能跑通。
2010/2011/2013这三个年度的数据只有几百M， 数据全部保留。 剩下的年份，设置不同的抽样比例，尽可能将生成的语料txt文件控制在1G左右。下面是经过粗略计算设定的比例，实际最终数据控制在800M左右。
裁判文书数据量高达300G， 读取、抽样、存储，全部过程耗时大概6小时。
   年份 解压后文件大小 抽样比例 语料txt大小     2010 761M 100% 684M   2011 452M 100% 396M   2012 757M 100% 665M   2013 5.13G 20% 984M   2014 23.7G 4% 905M   2015 33."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Blogs",
      "item": "/blog/"
    }
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "失败案例 |  使用裁判文书数据集逐年训练年份词向量",
      "item": "/blog/2023-11-18-failure-example-show-word-meaning-shift-using-word2vec/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "失败案例 |  使用裁判文书数据集逐年训练年份词向量",
  "name": "失败案例 |  使用裁判文书数据集逐年训练年份词向量",
  "description": "想用裁判文书数据集，逐年训练词向量的同学，可以好好看本文，能节省你几十个小时时间。\n\n一、检查数据 裁判文书数据集，每个月份存储到一个csv， 每个年份有一个对应的文件夹。下图是 2021 年的文件夹截图 csv字段格式是一致的，我们只需要找一个文件，尝试着读取前5行，查看数据中有哪些字段。\nimport pandas as pd df = pd.read_csv(\u0026#39;2013/2013-01.csv\u0026#39;, nrows=5) df.dropna(subset=[\u0026#39;文书内容\u0026#39;], inplace=True) df.head(1) \n二、构造语料 我们只从csv中选取 \u0026ldquo;文书内容\u0026rdquo; ，并将其存储到语料txt文件中。\n考虑到电脑性能， 预料不要太大， 1G左右是比较适中，在电脑内存为8G的情况下，应该能跑通。\n2010/2011/2013这三个年度的数据只有几百M， 数据全部保留。 剩下的年份，设置不同的抽样比例，尽可能将生成的语料txt文件控制在1G左右。下面是经过粗略计算设定的比例，实际最终数据控制在800M左右。\n裁判文书数据量高达300G， 读取、抽样、存储，全部过程耗时大概6小时。\n   年份 解压后文件大小 抽样比例 语料txt大小     2010 761M 100% 684M   2011 452M 100% 396M   2012 757M 100% 665M   2013 5.13G 20% 984M   2014 23.7G 4% 905M   2015 33.",
  "keywords": [
    "Python", "word2vec"
  ],
  "articleBody": "想用裁判文书数据集，逐年训练词向量的同学，可以好好看本文，能节省你几十个小时时间。\n\n一、检查数据 裁判文书数据集，每个月份存储到一个csv， 每个年份有一个对应的文件夹。下图是 2021 年的文件夹截图 csv字段格式是一致的，我们只需要找一个文件，尝试着读取前5行，查看数据中有哪些字段。\nimport pandas as pd df = pd.read_csv('2013/2013-01.csv', nrows=5) df.dropna(subset=['文书内容'], inplace=True) df.head(1) \n二、构造语料 我们只从csv中选取 “文书内容” ，并将其存储到语料txt文件中。\n考虑到电脑性能， 预料不要太大， 1G左右是比较适中，在电脑内存为8G的情况下，应该能跑通。\n2010/2011/2013这三个年度的数据只有几百M， 数据全部保留。 剩下的年份，设置不同的抽样比例，尽可能将生成的语料txt文件控制在1G左右。下面是经过粗略计算设定的比例，实际最终数据控制在800M左右。\n裁判文书数据量高达300G， 读取、抽样、存储，全部过程耗时大概6小时。\n   年份 解压后文件大小 抽样比例 语料txt大小     2010 761M 100% 684M   2011 452M 100% 396M   2012 757M 100% 665M   2013 5.13G 20% 984M   2014 23.7G 4% 905M   2015 33.6G 3% 968M   2016 39.9G 2.4% 914M   2017 44.6G 2.2% 882M   2018 24.8G 4% 875M   2019 48.3G 2% 833M   2020 91.2G 1% 779M   2021 32.3G 3% 816M    import os import pandas as pd # 年份、抽样比例 year_fracs = [ ('2010', 1), ('2011', 1), ('2012', 1), ('2013', 0.2), ('2014', 0.04), ('2015', 0.03), ('2016', 0.024), ('2017', 0.022), ('2018', 0.04), ('2019', 0.02), ('2020', 0.01), ('2021', 0.03) ] for year, frac in year_fracs: print(f'正在构造 {year}年的语料txt文件') with open('裁判文书{}.txt'.format(year), 'w', encoding='utf-8') as yf: #  csvfs = [f'{year}/{csvf}' for csvf in os.listdir(year) if '.csv' in csvf] for csvf in csvfs: # 为节省内存开销，  # 只读 csv 中的 “文书内容” 一个字段， # 且设置 chunksize 分批次读取 chunk_dfs = pd.read_csv(csvf, usecols=['文书内容'], chunksize=10000) for chunk_df in chunk_dfs: chunk_df.dropna(subset=['文书内容'], inplace=True) mdf = chunk_df.sample(frac=frac) text = ''.join(mdf['文书内容'].values) yf.write(text) \n三、训练word2vec 使用data内的语料txt，每个txt训练出一个对应的word2vec，结果自动存储到output/Word2Vec\n使用cntext2.0.0， 代码如下\nimport cntext as ct txtfs = [f for f in os.listdir('data') if '.txt' in f] for txtf in txtfs: print(txtf) w2v_model = ct.W2VModel(corpus_file=txtf, lang='chinese') w2v_model.train(vector_size=100, window_size=6) 裁判文书年份、语料txt大小及训练时间长度汇总如下表\n   年份 语料txt大小 训练word2vec耗时     2010 684M 2127s   2011 396M 1225s   2012 665M 2105s   2013 984M 2967s   2014 905M 2810s   2015 968M 3032s   2016 914M 2880s   2017 882M 2882s   2018 875M 2852s   2019 833M 2765s   2020 779M 2539s   2021 816M 2609s    \n三、使用word2vec 训练结果如下图\n3.1 导入模型 output/Word2Vec中有多个年份的模型， 模型文件不大， 如果内存允许，可以同时导入。首先要获取模型文件路径\nimport os w2v_fs = [f'output/Word2Vec/{f}' for f in os.listdir('output/Word2Vec') if '.npy' not in f] w2v_fs Run\n['output/Word2Vec/裁判文书2010.100.6.bin', 'output/Word2Vec/裁判文书2011.100.6.bin', 'output/Word2Vec/裁判文书2012.100.6.bin', 'output/Word2Vec/裁判文书2013.100.6.bin', 'output/Word2Vec/裁判文书2014.100.6.bin', 'output/Word2Vec/裁判文书2015.100.6.bin', 'output/Word2Vec/裁判文书2016.100.6.bin', 'output/Word2Vec/裁判文书2017.100.6.bin', 'output/Word2Vec/裁判文书2018.100.6.bin', 'output/Word2Vec/裁判文书2019.100.6.bin', 'output/Word2Vec/裁判文书2020.100.6.bin', 'output/Word2Vec/裁判文书2021.100.6.bin'] \nimport cntext as ct import re w2v_models = [] years = [re.findall('\\d{4}', f)[0] for f in w2v_fs] for year, w2v_f in zip(years, w2v_fs): print('{year}') w2v_models.append(ct.load_w2v(w2v_f)) print('\\n\\n') Run\n2010 Loading word2vec model... 2011 Loading word2vec model... 2012 Loading word2vec model... ...... 2021 Loading word2vec model... \n3.2 模型词汇量 查看不同年份模型的词汇量\nimport re for year, w2v_model in zip(years, w2v_models): wordnum = len(w2v_model.wv) print(f'{year}词汇量: {wordnum}') Run\n2010词汇量: 374105 2011词汇量: 312039 2012词汇量: 490673 2013词汇量: 675057 2014词汇量: 634497 2015词汇量: 667753 2016词汇量: 638568 2017词汇量: 656776 2018词汇量: 667265 2019词汇量: 629285 2020词汇量: 582988 2021词汇量: 571346 \n3.3 语义检查 先查看2020年的， 以 “犯罪” 为例\n# 最相似的10个词 w2v_models[0].wv.most_similar(['犯罪'], topn=10) Run\n[('认真接受', 0.9499362707138062), ('民事诉讼法', 0.9497376084327698), ('建设工程有限公司', 0.9491338729858398), ('望春监狱', 0.9488678574562073), ('人身损害赔偿', 0.9487593173980713), ('判决发生', 0.9485785365104675), ('本案受理费', 0.9484607577323914), ('裁定准许', 0.9480699896812439), ('现在宁波市', 0.9479051828384399), ('温州银行', 0.9478054046630859)] 同时检查2010-2021， 分别返回前5个最相似的词\nprint('与“犯罪”最相似5个词', end='\\n') print() for year, w2v_model in zip(years, w2v_models): wordtuples = w2v_model.wv.most_similar(['犯罪'], topn=5) words = ' '.join([w for w,v in wordtuples]) print(f'{year}模型: {words}') Run\n2010模型: 认真接受 民事诉讼法 建设工程有限公司 望春监狱 人身损害赔偿 2011模型: 欲证明 辩护意见 被告中铁 应承担 蔡某甲 2012模型: �� 判处有期徒刑 盒 执行 黄某乙 2013模型: 雇员受害 AFT8 箐 牛鲁敬 被告金析航 2014模型: 齐立权 永川支公司 徐正青 万给 鲁子双 2015模型: 蒋明良 19KM 二百一十八条 一定独创性 类型主要 2016模型: 钧益公司 王乌旦 未予缴纳 之后离开 元系金 2017模型: 巫山县振兴 工程承揽 立奥 会展 皖1004 2018模型: 浙湖 公路东向西 雷德佑 福建省长汀县 辽宁成工 2019模型: 6.2475% 郑善 陈能颂 招某 14726.91 2020模型: 促进法 流传 四川省米易县 有奴 共有产权 2021模型: 柳凯 张鲁 几张照片 挪走 耿正会 额， 每个模型不能说跟“犯罪”毫无关系，只能说是一毛钱关系都没有！难道是我选的词有问题，错怪模型，那再试试“婚姻”\nprint('与“婚姻”最相似5个词', end='\\n') print() for year, w2v_model in zip(years, w2v_models): wordtuples = w2v_model.wv.most_similar(['婚姻'], topn=5) words = ' '.join([w for w,v in wordtuples]) print(f'{year}模型: {words}') Run\n与“婚姻”最相似5个词 2010模型: 签收 相关 姜明 20107 依法 2011模型: 下列条件 连带责任保证 债务 举证质证 申请撤诉 2012模型: 竹乐 程志街 7808292.65 乐至刑初 衢江 2013模型: 分歧双方 孙明霞〇 裁明 孙林 多派 2014模型: 山林土地 道成 被告肖小健 董锐 梓民初 2015模型: 秀洲 永乐街道 此笔费用 上特阀业 唐厚洪 2016模型: 其于2007 故予认定 千荣公司 工程验收报告 邢子 2017模型: 拆排栅 53612 初字252 被告彭国强 鸿恒昌公司 2018模型: 淄博分中心 三厅 临街门市 20200 科健 2019模型: 新岗位 2006) 风险稳控 主要树种 重量价格 2020模型: 模板款 生活用房 从轻处理建议 张春林 刘俊平 2021模型: 时二乐 对童 黄青书 一经通知 电话问 哎！ 依然是彼此毫无语义关系， 种种迹象表明，这些训练出的模型就真不咋地！\n\n四、原因分析 如果说数据没有清洗，去停用词，可能会干扰训练效果。但是我经过去停词等数据清洗，训练得到的模型表现与之前没啥变化，依然是捕捉不到语义关系信息。\n至于数据量大小的问题， 大邓之前分享的\n 预训练模型 | 金融会计类word2vec， 可扩展或构建领域内概念情感词典 预训练模型 | 使用1000w专利摘要训练word2vec模型，可用于开发词典  两个推文中使用的语料都是好几个G的语料txt， 基本上语义捕捉的都很完美。但前几天 词向量 | 使用1亿B站用户签名训练word2vec词向量 中语料只有302M， 但语义信息捕捉的很好。\n\n",
  "wordCount" : "616",
  "inLanguage": "en",
  "image":"/images/blog/word2vec.png","datePublished": "2023-11-18T00:00:00Z",
  "dateModified": "2023-11-18T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "大邓"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/blog/2023-11-18-failure-example-show-word-meaning-shift-using-word2vec/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "大邓和他的PYTHON",
    "logo": {
      "@type": "ImageObject",
      "url": "/favicon.ico"
    }
  }
}
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SFGQCREQ9X"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SFGQCREQ9X');
</script>



<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=PT+Serif" rel="stylesheet">
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="/" accesskey="h" title="大邓和他的PYTHON (Alt + H)" target="_blank">大邓和他的PYTHON</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="/about/" title="关于" target="_blank">
                    <span>关于</span>
                </a>
            </li>
            <li>
                <a href="/archives/" title="归档" target="_blank">
                    <span>归档</span>
                </a>
            </li>
            <li>
                <a href="/search/" title="搜索" target="_blank">
                    <span>搜索</span>
                </a>
            </li>
            <li>
                <a href="/tags/" title="标签" target="_blank">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="/blog/management_python_course/" title="课程" target="_blank">
                    <span>课程</span>
                </a>
            </li>
            <li>
                <a href="/blog/the_text_analysis_list_about_ms/" title="文献" target="_blank">
                    <span>文献</span>
                </a>
            </li>
            <li>
                <a href="/blog/datasets_available_for_management_science/" title="数据" target="_blank">
                    <span>数据</span>
                </a>
            </li>
            <li>
                <a href="/blog/2024-04-27-cntext2x-usage-tutorial/" title="cntext2.x" target="_blank">
                    <span>cntext2.x</span>
                </a>
            </li>
            <li>
                <a href="/index.xml" title="RSS" target="_blank">
                    <span>RSS</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"
onload="renderMathInElement(document.body);"></script>




<article class="post-single">
  <header class="post-header">
    
    <div class="breadcrumbs"><a href="/" target="_blank">Home</a>&nbsp;»&nbsp;<a href="/blog/" target="_blank">Blogs</a></div>
    <h1 class="post-title">
      失败案例 |  使用裁判文书数据集逐年训练年份词向量
    </h1>
    <div class="post-meta"><span title='2023-11-18 00:00:00 +0000 UTC'>2023-11-18</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;大邓

</div>
  </header> 
<figure class="entry-cover"><a href="/images/blog/word2vec.png" target="_blank"
            rel="noopener noreferrer"><img loading="lazy" src="/images/blog/word2vec.png" alt=""></a>
        
</figure>
<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share 失败案例 |  使用裁判文书数据集逐年训练年份词向量 on twitter"
        href="https://twitter.com/intent/tweet/?text=%e5%a4%b1%e8%b4%a5%e6%a1%88%e4%be%8b%20%7c%20%20%e4%bd%bf%e7%94%a8%e8%a3%81%e5%88%a4%e6%96%87%e4%b9%a6%e6%95%b0%e6%8d%ae%e9%9b%86%e9%80%90%e5%b9%b4%e8%ae%ad%e7%bb%83%e5%b9%b4%e4%bb%bd%e8%af%8d%e5%90%91%e9%87%8f&amp;url=%2fblog%2f2023-11-18-failure-example-show-word-meaning-shift-using-word2vec%2f&amp;hashtags=Python%2c%e8%af%8d%e5%90%91%e9%87%8f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 失败案例 |  使用裁判文书数据集逐年训练年份词向量 on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fblog%2f2023-11-18-failure-example-show-word-meaning-shift-using-word2vec%2f&amp;title=%e5%a4%b1%e8%b4%a5%e6%a1%88%e4%be%8b%20%7c%20%20%e4%bd%bf%e7%94%a8%e8%a3%81%e5%88%a4%e6%96%87%e4%b9%a6%e6%95%b0%e6%8d%ae%e9%9b%86%e9%80%90%e5%b9%b4%e8%ae%ad%e7%bb%83%e5%b9%b4%e4%bb%bd%e8%af%8d%e5%90%91%e9%87%8f&amp;summary=%e5%a4%b1%e8%b4%a5%e6%a1%88%e4%be%8b%20%7c%20%20%e4%bd%bf%e7%94%a8%e8%a3%81%e5%88%a4%e6%96%87%e4%b9%a6%e6%95%b0%e6%8d%ae%e9%9b%86%e9%80%90%e5%b9%b4%e8%ae%ad%e7%bb%83%e5%b9%b4%e4%bb%bd%e8%af%8d%e5%90%91%e9%87%8f&amp;source=%2fblog%2f2023-11-18-failure-example-show-word-meaning-shift-using-word2vec%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 失败案例 |  使用裁判文书数据集逐年训练年份词向量 on reddit"
        href="https://reddit.com/submit?url=%2fblog%2f2023-11-18-failure-example-show-word-meaning-shift-using-word2vec%2f&title=%e5%a4%b1%e8%b4%a5%e6%a1%88%e4%be%8b%20%7c%20%20%e4%bd%bf%e7%94%a8%e8%a3%81%e5%88%a4%e6%96%87%e4%b9%a6%e6%95%b0%e6%8d%ae%e9%9b%86%e9%80%90%e5%b9%b4%e8%ae%ad%e7%bb%83%e5%b9%b4%e4%bb%bd%e8%af%8d%e5%90%91%e9%87%8f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 失败案例 |  使用裁判文书数据集逐年训练年份词向量 on facebook"
        href="https://facebook.com/sharer/sharer.php?u=%2fblog%2f2023-11-18-failure-example-show-word-meaning-shift-using-word2vec%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 失败案例 |  使用裁判文书数据集逐年训练年份词向量 on whatsapp"
        href="https://api.whatsapp.com/send?text=%e5%a4%b1%e8%b4%a5%e6%a1%88%e4%be%8b%20%7c%20%20%e4%bd%bf%e7%94%a8%e8%a3%81%e5%88%a4%e6%96%87%e4%b9%a6%e6%95%b0%e6%8d%ae%e9%9b%86%e9%80%90%e5%b9%b4%e8%ae%ad%e7%bb%83%e5%b9%b4%e4%bb%bd%e8%af%8d%e5%90%91%e9%87%8f%20-%20%2fblog%2f2023-11-18-failure-example-show-word-meaning-shift-using-word2vec%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 失败案例 |  使用裁判文书数据集逐年训练年份词向量 on telegram"
        href="https://telegram.me/share/url?text=%e5%a4%b1%e8%b4%a5%e6%a1%88%e4%be%8b%20%7c%20%20%e4%bd%bf%e7%94%a8%e8%a3%81%e5%88%a4%e6%96%87%e4%b9%a6%e6%95%b0%e6%8d%ae%e9%9b%86%e9%80%90%e5%b9%b4%e8%ae%ad%e7%bb%83%e5%b9%b4%e4%bb%bd%e8%af%8d%e5%90%91%e9%87%8f&amp;url=%2fblog%2f2023-11-18-failure-example-show-word-meaning-shift-using-word2vec%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
    
</div>
<aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">Table of Contents</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#%e4%b8%80%e6%a3%80%e6%9f%a5%e6%95%b0%e6%8d%ae" aria-label="一、检查数据">一、检查数据</a></li>
                    <li>
                        <a href="#%e4%ba%8c%e6%9e%84%e9%80%a0%e8%af%ad%e6%96%99" aria-label="二、构造语料">二、构造语料</a></li>
                    <li>
                        <a href="#%e4%b8%89%e8%ae%ad%e7%bb%83word2vec" aria-label="三、训练word2vec">三、训练word2vec</a></li>
                    <li>
                        <a href="#%e4%b8%89%e4%bd%bf%e7%94%a8word2vec" aria-label="三、使用word2vec">三、使用word2vec</a><ul>
                            
                    <li>
                        <a href="#31-%e5%af%bc%e5%85%a5%e6%a8%a1%e5%9e%8b" aria-label="3.1 导入模型">3.1 导入模型</a></li>
                    <li>
                        <a href="#32-%e6%a8%a1%e5%9e%8b%e8%af%8d%e6%b1%87%e9%87%8f" aria-label="3.2 模型词汇量">3.2 模型词汇量</a></li>
                    <li>
                        <a href="#33-%e8%af%ad%e4%b9%89%e6%a3%80%e6%9f%a5" aria-label="3.3 语义检查">3.3 语义检查</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e5%9b%9b%e5%8e%9f%e5%9b%a0%e5%88%86%e6%9e%90" aria-label="四、原因分析">四、原因分析</a>
                    </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>



  <div style="margin-top:2em;padding:0 0.5em;font-size:.875rem">
    <hr>
    <div style="padding-bottom:1em;">
        <p>本文作者：大邓
        <p>本文标题：失败案例 |  使用裁判文书数据集逐年训练年份词向量
        <p>本文链接：https://textdata.cn/blog/2023-11-18-failure-example-show-word-meaning-shift-using-word2vec/
        <p>版权声明：<a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">「署名-非商业性使用-相同方式共享 4.0 国际」</a></p>
    </div>
    <hr>
  </div>


  <br>



  
  <div class="post-content"><p>想用裁判文书数据集，逐年训练词向量的同学，可以好好看本文，能节省你几十个小时时间。</p>
<p><br><br></p>
<h2 id="一检查数据">一、检查数据<a hidden class="anchor" aria-hidden="true" href="#一检查数据">#</a></h2>
<p>裁判文书数据集，每个月份存储到一个csv， 每个年份有一个对应的文件夹。下图是 2021 年的文件夹截图
<img loading="lazy" src="img/2021.png" alt=""  />
</p>
<br>
<p>csv字段格式是一致的，我们只需要找一个文件，尝试着读取前5行，查看数据中有哪些字段。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;2013/2013-01.csv&#39;</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;文书内容&#39;</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div><p><img loading="lazy" src="img/df.png" alt=""  />
</p>
<p><br><br></p>
<h2 id="二构造语料">二、构造语料<a hidden class="anchor" aria-hidden="true" href="#二构造语料">#</a></h2>
<p>我们只从csv中选取 &ldquo;<strong>文书内容</strong>&rdquo; ，并将其存储到语料txt文件中。</p>
<p>考虑到电脑性能， 预料不要太大， 1G左右是比较适中，在电脑内存为8G的情况下，应该能跑通。</p>
<p>2010/2011/2013这三个年度的数据只有几百M， 数据全部保留。 剩下的年份，设置不同的抽样比例，尽可能将生成的语料txt文件控制在1G左右。下面是经过粗略计算设定的比例，实际最终数据控制在800M左右。</p>
<p>裁判文书数据量高达300G， 读取、抽样、存储，全部过程耗时大概6小时。</p>
<table>
<thead>
<tr>
<th>年份</th>
<th>解压后文件大小</th>
<th>抽样比例</th>
<th>语料txt大小</th>
</tr>
</thead>
<tbody>
<tr>
<td>2010</td>
<td>761M</td>
<td>100%</td>
<td>684M</td>
</tr>
<tr>
<td>2011</td>
<td>452M</td>
<td>100%</td>
<td>396M</td>
</tr>
<tr>
<td>2012</td>
<td>757M</td>
<td>100%</td>
<td>665M</td>
</tr>
<tr>
<td>2013</td>
<td>5.13G</td>
<td>20%</td>
<td>984M</td>
</tr>
<tr>
<td>2014</td>
<td>23.7G</td>
<td>4%</td>
<td>905M</td>
</tr>
<tr>
<td>2015</td>
<td>33.6G</td>
<td>3%</td>
<td>968M</td>
</tr>
<tr>
<td>2016</td>
<td>39.9G</td>
<td>2.4%</td>
<td>914M</td>
</tr>
<tr>
<td>2017</td>
<td>44.6G</td>
<td>2.2%</td>
<td>882M</td>
</tr>
<tr>
<td>2018</td>
<td>24.8G</td>
<td>4%</td>
<td>875M</td>
</tr>
<tr>
<td>2019</td>
<td>48.3G</td>
<td>2%</td>
<td>833M</td>
</tr>
<tr>
<td>2020</td>
<td>91.2G</td>
<td>1%</td>
<td>779M</td>
</tr>
<tr>
<td>2021</td>
<td>32.3G</td>
<td>3%</td>
<td>816M</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># 年份、抽样比例</span>
<span class="n">year_fracs</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;2010&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;2011&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;2012&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> 
    <span class="p">(</span><span class="s1">&#39;2013&#39;</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;2014&#39;</span><span class="p">,</span> <span class="mf">0.04</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;2015&#39;</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;2016&#39;</span><span class="p">,</span> <span class="mf">0.024</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;2017&#39;</span><span class="p">,</span> <span class="mf">0.022</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;2018&#39;</span><span class="p">,</span> <span class="mf">0.04</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;2019&#39;</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;2020&#39;</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;2021&#39;</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">)</span>
    <span class="p">]</span>


 <span class="k">for</span> <span class="n">year</span><span class="p">,</span> <span class="n">frac</span> <span class="ow">in</span> <span class="n">year_fracs</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;正在构造 </span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s1"> 年的语料txt文件&#39;</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;裁判文书</span><span class="si">{}</span><span class="s1">.txt&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">year</span><span class="p">),</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">yf</span><span class="p">:</span>
        <span class="c1"># </span>
        <span class="n">csvfs</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">csvf</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">csvf</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="k">if</span> <span class="s1">&#39;.csv&#39;</span> <span class="ow">in</span> <span class="n">csvf</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">csvf</span> <span class="ow">in</span> <span class="n">csvfs</span><span class="p">:</span>
            <span class="c1"># 为节省内存开销， </span>
            <span class="c1"># 只读 csv 中的 “文书内容” 一个字段，</span>
            <span class="c1"># 且设置 chunksize 分批次读取</span>
            <span class="n">chunk_dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">csvf</span><span class="p">,</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;文书内容&#39;</span><span class="p">],</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">chunk_df</span> <span class="ow">in</span> <span class="n">chunk_dfs</span><span class="p">:</span>
                <span class="n">chunk_df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;文书内容&#39;</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">mdf</span> <span class="o">=</span> <span class="n">chunk_df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">frac</span><span class="o">=</span><span class="n">frac</span><span class="p">)</span>
                <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mdf</span><span class="p">[</span><span class="s1">&#39;文书内容&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
                <span class="n">yf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><p><br><br></p>
<h2 id="三训练word2vec">三、训练word2vec<a hidden class="anchor" aria-hidden="true" href="#三训练word2vec">#</a></h2>
<p>使用data内的语料txt，每个txt训练出一个对应的word2vec，结果自动存储到output/Word2Vec</p>
<p><img loading="lazy" src="img/01-corpus.png" alt=""  />
</p>
<p>使用cntext2.0.0， 代码如下</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>
<span class="n">txtfs</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="s1">&#39;.txt&#39;</span> <span class="ow">in</span> <span class="n">f</span><span class="p">]</span>
<span class="k">for</span> <span class="n">txtf</span> <span class="ow">in</span> <span class="n">txtfs</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">txtf</span><span class="p">)</span>
    <span class="n">w2v_model</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">W2VModel</span><span class="p">(</span><span class="n">corpus_file</span><span class="o">=</span><span class="n">txtf</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;chinese&#39;</span><span class="p">)</span>
    <span class="n">w2v_model</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">vector_size</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">window_size</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
</code></pre></div><p>裁判文书年份、语料txt大小及训练时间长度汇总如下表</p>
<br>
<table>
<thead>
<tr>
<th>年份</th>
<th>语料txt大小</th>
<th>训练word2vec耗时</th>
</tr>
</thead>
<tbody>
<tr>
<td>2010</td>
<td>684M</td>
<td>2127s</td>
</tr>
<tr>
<td>2011</td>
<td>396M</td>
<td>1225s</td>
</tr>
<tr>
<td>2012</td>
<td>665M</td>
<td>2105s</td>
</tr>
<tr>
<td>2013</td>
<td>984M</td>
<td>2967s</td>
</tr>
<tr>
<td>2014</td>
<td>905M</td>
<td>2810s</td>
</tr>
<tr>
<td>2015</td>
<td>968M</td>
<td>3032s</td>
</tr>
<tr>
<td>2016</td>
<td>914M</td>
<td>2880s</td>
</tr>
<tr>
<td>2017</td>
<td>882M</td>
<td>2882s</td>
</tr>
<tr>
<td>2018</td>
<td>875M</td>
<td>2852s</td>
</tr>
<tr>
<td>2019</td>
<td>833M</td>
<td>2765s</td>
</tr>
<tr>
<td>2020</td>
<td>779M</td>
<td>2539s</td>
</tr>
<tr>
<td>2021</td>
<td>816M</td>
<td>2609s</td>
</tr>
</tbody>
</table>
<p><br><br></p>
<h2 id="三使用word2vec">三、使用word2vec<a hidden class="anchor" aria-hidden="true" href="#三使用word2vec">#</a></h2>
<p>训练结果如下图</p>
<p><img loading="lazy" src="img/02-word2vec-models.png" alt=""  />
</p>
<br>
<h3 id="31-导入模型">3.1 导入模型<a hidden class="anchor" aria-hidden="true" href="#31-导入模型">#</a></h3>
<p>output/Word2Vec中有多个年份的模型， 模型文件不大， 如果内存允许，可以同时导入。首先要获取模型文件路径</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">os</span>

<span class="n">w2v_fs</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;output/Word2Vec/</span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s1">&#39;output/Word2Vec&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="s1">&#39;.npy&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">f</span><span class="p">]</span>
<span class="n">w2v_fs</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[&#39;output/Word2Vec/裁判文书2010.100.6.bin&#39;,
 &#39;output/Word2Vec/裁判文书2011.100.6.bin&#39;,
 &#39;output/Word2Vec/裁判文书2012.100.6.bin&#39;,
 &#39;output/Word2Vec/裁判文书2013.100.6.bin&#39;,
 &#39;output/Word2Vec/裁判文书2014.100.6.bin&#39;,
 &#39;output/Word2Vec/裁判文书2015.100.6.bin&#39;,
 &#39;output/Word2Vec/裁判文书2016.100.6.bin&#39;,
 &#39;output/Word2Vec/裁判文书2017.100.6.bin&#39;,
 &#39;output/Word2Vec/裁判文书2018.100.6.bin&#39;,
 &#39;output/Word2Vec/裁判文书2019.100.6.bin&#39;,
 &#39;output/Word2Vec/裁判文书2020.100.6.bin&#39;,
 &#39;output/Word2Vec/裁判文书2021.100.6.bin&#39;]
</code></pre></div><br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cntext</span> <span class="k">as</span> <span class="nn">ct</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="n">w2v_models</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">years</span> <span class="o">=</span> <span class="p">[</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;\d</span><span class="si">{4}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">f</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">w2v_fs</span><span class="p">]</span>
<span class="k">for</span> <span class="n">year</span><span class="p">,</span> <span class="n">w2v_f</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">years</span><span class="p">,</span> <span class="n">w2v_fs</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{year}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">w2v_models</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">load_w2v</span><span class="p">(</span><span class="n">w2v_f</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>

</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">2010
Loading word2vec model...

2011
Loading word2vec model...

2012
Loading word2vec model...

......


2021
Loading word2vec model...
</code></pre></div><br>
<h3 id="32-模型词汇量">3.2 模型词汇量<a hidden class="anchor" aria-hidden="true" href="#32-模型词汇量">#</a></h3>
<p>查看不同年份模型的词汇量</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">re</span>

<span class="k">for</span> <span class="n">year</span><span class="p">,</span> <span class="n">w2v_model</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">years</span><span class="p">,</span> <span class="n">w2v_models</span><span class="p">):</span>
    <span class="n">wordnum</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">w2v_model</span><span class="o">.</span><span class="n">wv</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s1">词汇量: </span><span class="si">{</span><span class="n">wordnum</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">2010词汇量: 374105
2011词汇量: 312039
2012词汇量: 490673
2013词汇量: 675057
2014词汇量: 634497
2015词汇量: 667753
2016词汇量: 638568
2017词汇量: 656776
2018词汇量: 667265
2019词汇量: 629285
2020词汇量: 582988
2021词汇量: 571346
</code></pre></div><br>
<h3 id="33-语义检查">3.3 语义检查<a hidden class="anchor" aria-hidden="true" href="#33-语义检查">#</a></h3>
<p>先查看2020年的， 以 “<strong>犯罪</strong>” 为例</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># 最相似的10个词</span>
<span class="n">w2v_models</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">wv</span><span class="o">.</span><span class="n">most_similar</span><span class="p">([</span><span class="s1">&#39;犯罪&#39;</span><span class="p">],</span> <span class="n">topn</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[(&#39;认真接受&#39;, 0.9499362707138062),
 (&#39;民事诉讼法&#39;, 0.9497376084327698),
 (&#39;建设工程有限公司&#39;, 0.9491338729858398),
 (&#39;望春监狱&#39;, 0.9488678574562073),
 (&#39;人身损害赔偿&#39;, 0.9487593173980713),
 (&#39;判决发生&#39;, 0.9485785365104675),
 (&#39;本案受理费&#39;, 0.9484607577323914),
 (&#39;裁定准许&#39;, 0.9480699896812439),
 (&#39;现在宁波市&#39;, 0.9479051828384399),
 (&#39;温州银行&#39;, 0.9478054046630859)]
</code></pre></div><p>同时检查2010-2021， 分别返回前5个最相似的词</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;与“犯罪”最相似5个词&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="k">for</span> <span class="n">year</span><span class="p">,</span> <span class="n">w2v_model</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">years</span><span class="p">,</span> <span class="n">w2v_models</span><span class="p">):</span>
    <span class="n">wordtuples</span> <span class="o">=</span> <span class="n">w2v_model</span><span class="o">.</span><span class="n">wv</span><span class="o">.</span><span class="n">most_similar</span><span class="p">([</span><span class="s1">&#39;犯罪&#39;</span><span class="p">],</span> <span class="n">topn</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">words</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">w</span> <span class="k">for</span> <span class="n">w</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">wordtuples</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s1">模型: </span><span class="si">{</span><span class="n">words</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">2010模型: 认真接受 民事诉讼法 建设工程有限公司 望春监狱 人身损害赔偿
2011模型: 欲证明 辩护意见 被告中铁 应承担 蔡某甲
2012模型: �� 判处有期徒刑 盒 执行 黄某乙
2013模型: 雇员受害 AFT8 箐 牛鲁敬 被告金析航
2014模型: 齐立权 永川支公司 徐正青 万给 鲁子双
2015模型: 蒋明良 19KM 二百一十八条 一定独创性 类型主要
2016模型: 钧益公司 王乌旦 未予缴纳 之后离开 元系金
2017模型: 巫山县振兴 工程承揽 立奥 会展 皖1004
2018模型: 浙湖 公路东向西 雷德佑 福建省长汀县 辽宁成工
2019模型: 6.2475% 郑善 陈能颂 招某 14726.91
2020模型: 促进法 流传 四川省米易县 有奴 共有产权
2021模型: 柳凯 张鲁 几张照片 挪走 耿正会
</code></pre></div><p>额， 每个模型不能说跟“犯罪”毫无关系，只能说是一毛钱关系都没有！难道是我选的词有问题，错怪模型，那再试试“婚姻”</p>
<br>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;与“婚姻”最相似5个词&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="k">for</span> <span class="n">year</span><span class="p">,</span> <span class="n">w2v_model</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">years</span><span class="p">,</span> <span class="n">w2v_models</span><span class="p">):</span>
    <span class="n">wordtuples</span> <span class="o">=</span> <span class="n">w2v_model</span><span class="o">.</span><span class="n">wv</span><span class="o">.</span><span class="n">most_similar</span><span class="p">([</span><span class="s1">&#39;婚姻&#39;</span><span class="p">],</span> <span class="n">topn</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">words</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">w</span> <span class="k">for</span> <span class="n">w</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">wordtuples</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s1">模型: </span><span class="si">{</span><span class="n">words</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div><p>Run</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">与“婚姻”最相似5个词

2010模型: 签收 相关 姜明 20107 依法
2011模型: 下列条件 连带责任保证 债务 举证质证 申请撤诉
2012模型: 竹乐 程志街 7808292.65 乐至刑初 衢江
2013模型: 分歧双方 孙明霞〇 裁明 孙林 多派
2014模型: 山林土地 道成 被告肖小健 董锐 梓民初
2015模型: 秀洲 永乐街道 此笔费用 上特阀业 唐厚洪
2016模型: 其于2007 故予认定 千荣公司 工程验收报告 邢子
2017模型: 拆排栅 53612 初字252 被告彭国强 鸿恒昌公司
2018模型: 淄博分中心 三厅 临街门市 20200 科健
2019模型: 新岗位 2006) 风险稳控 主要树种 重量价格
2020模型: 模板款 生活用房 从轻处理建议 张春林 刘俊平
2021模型: 时二乐 对童 黄青书 一经通知 电话问
</code></pre></div><p>哎！ 依然是彼此毫无语义关系， 种种迹象表明，这些训练出的模型就真不咋地！</p>
<p><br><br></p>
<h2 id="四原因分析">四、原因分析<a hidden class="anchor" aria-hidden="true" href="#四原因分析">#</a></h2>
<p>如果说数据没有清洗，去停用词，可能会干扰训练效果。但是我经过去停词等数据清洗，训练得到的模型表现与之前没啥变化，依然是捕捉不到语义关系信息。<br></p>
<p>至于数据量大小的问题， 大邓之前分享的</p>
<ul>
<li><a href="https://textdata.cn/blog/2023-03-24-load-w2v-and-expand-your-concpet-dicitonary/">预训练模型 | 金融会计类word2vec， 可扩展或构建领域内概念情感词典</a></li>
<li><a href="https://textdata.cn/blog/2023-11-10-training-word2vec-model-using-china-3751w-patent-application-dataset/">预训练模型 | 使用1000w专利摘要训练word2vec模型，可用于开发词典</a></li>
</ul>
<p>两个推文中使用的语料都是好几个G的语料txt， 基本上语义捕捉的都很完美。但前几天 <a href="https://textdata.cn/blog/2023-11-12-using-100m-bilibili-user-sign-data-to-training-word2vec/">词向量 | 使用1亿B站用户签名训练word2vec词向量</a> 中语料只有302M， 但语义信息捕捉的很好。</p>
<p><br><br></p>


  </div>


  <br>

  <div style="text-align: center;">
    <figure >
        <a href="https://textdata.cn/blog/management_python_course/">
            <img src="/images/bg/management_data_mining_with_python_course2.png" width="100%" />
        </a>
        <figcaption><small><i>点击了解课程详情</i></small></figcaption>
    </figure>
  </div>

  <br>


  <div style="margin-top:2em;padding:0 0.5em;font-size:.875rem">
    <hr>
    <div style="padding-bottom:1em;">
        <p>本文作者：大邓
        <p>本文标题：失败案例 |  使用裁判文书数据集逐年训练年份词向量
        <p>本文链接：https://textdata.cn/blog/2023-11-18-failure-example-show-word-meaning-shift-using-word2vec/
        <p>版权声明：<a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">「署名-非商业性使用-相同方式共享 4.0 国际」</a></p>
    </div>
    <hr>
  </div>






  <footer class="post-footer">
      <ul class="post-tags">
        <b>Tags:  &nbsp;</b>
        <li><a href="/tags/python/" target='_blank'>python</a></li>
        <li><a href="/tags/%E8%AF%8D%E5%90%91%E9%87%8F/" target='_blank'>词向量</a></li>
      </ul>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share 失败案例 |  使用裁判文书数据集逐年训练年份词向量 on twitter"
        href="https://twitter.com/intent/tweet/?text=%e5%a4%b1%e8%b4%a5%e6%a1%88%e4%be%8b%20%7c%20%20%e4%bd%bf%e7%94%a8%e8%a3%81%e5%88%a4%e6%96%87%e4%b9%a6%e6%95%b0%e6%8d%ae%e9%9b%86%e9%80%90%e5%b9%b4%e8%ae%ad%e7%bb%83%e5%b9%b4%e4%bb%bd%e8%af%8d%e5%90%91%e9%87%8f&amp;url=%2fblog%2f2023-11-18-failure-example-show-word-meaning-shift-using-word2vec%2f&amp;hashtags=Python%2c%e8%af%8d%e5%90%91%e9%87%8f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 失败案例 |  使用裁判文书数据集逐年训练年份词向量 on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fblog%2f2023-11-18-failure-example-show-word-meaning-shift-using-word2vec%2f&amp;title=%e5%a4%b1%e8%b4%a5%e6%a1%88%e4%be%8b%20%7c%20%20%e4%bd%bf%e7%94%a8%e8%a3%81%e5%88%a4%e6%96%87%e4%b9%a6%e6%95%b0%e6%8d%ae%e9%9b%86%e9%80%90%e5%b9%b4%e8%ae%ad%e7%bb%83%e5%b9%b4%e4%bb%bd%e8%af%8d%e5%90%91%e9%87%8f&amp;summary=%e5%a4%b1%e8%b4%a5%e6%a1%88%e4%be%8b%20%7c%20%20%e4%bd%bf%e7%94%a8%e8%a3%81%e5%88%a4%e6%96%87%e4%b9%a6%e6%95%b0%e6%8d%ae%e9%9b%86%e9%80%90%e5%b9%b4%e8%ae%ad%e7%bb%83%e5%b9%b4%e4%bb%bd%e8%af%8d%e5%90%91%e9%87%8f&amp;source=%2fblog%2f2023-11-18-failure-example-show-word-meaning-shift-using-word2vec%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 失败案例 |  使用裁判文书数据集逐年训练年份词向量 on reddit"
        href="https://reddit.com/submit?url=%2fblog%2f2023-11-18-failure-example-show-word-meaning-shift-using-word2vec%2f&title=%e5%a4%b1%e8%b4%a5%e6%a1%88%e4%be%8b%20%7c%20%20%e4%bd%bf%e7%94%a8%e8%a3%81%e5%88%a4%e6%96%87%e4%b9%a6%e6%95%b0%e6%8d%ae%e9%9b%86%e9%80%90%e5%b9%b4%e8%ae%ad%e7%bb%83%e5%b9%b4%e4%bb%bd%e8%af%8d%e5%90%91%e9%87%8f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 失败案例 |  使用裁判文书数据集逐年训练年份词向量 on facebook"
        href="https://facebook.com/sharer/sharer.php?u=%2fblog%2f2023-11-18-failure-example-show-word-meaning-shift-using-word2vec%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 失败案例 |  使用裁判文书数据集逐年训练年份词向量 on whatsapp"
        href="https://api.whatsapp.com/send?text=%e5%a4%b1%e8%b4%a5%e6%a1%88%e4%be%8b%20%7c%20%20%e4%bd%bf%e7%94%a8%e8%a3%81%e5%88%a4%e6%96%87%e4%b9%a6%e6%95%b0%e6%8d%ae%e9%9b%86%e9%80%90%e5%b9%b4%e8%ae%ad%e7%bb%83%e5%b9%b4%e4%bb%bd%e8%af%8d%e5%90%91%e9%87%8f%20-%20%2fblog%2f2023-11-18-failure-example-show-word-meaning-shift-using-word2vec%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 失败案例 |  使用裁判文书数据集逐年训练年份词向量 on telegram"
        href="https://telegram.me/share/url?text=%e5%a4%b1%e8%b4%a5%e6%a1%88%e4%be%8b%20%7c%20%20%e4%bd%bf%e7%94%a8%e8%a3%81%e5%88%a4%e6%96%87%e4%b9%a6%e6%95%b0%e6%8d%ae%e9%9b%86%e9%80%90%e5%b9%b4%e8%ae%ad%e7%bb%83%e5%b9%b4%e4%bb%bd%e8%af%8d%e5%90%91%e9%87%8f&amp;url=%2fblog%2f2023-11-18-failure-example-show-word-meaning-shift-using-word2vec%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
    
</div>




  </footer><script src="https://utteranc.es/client.js"
        repo="hiDaDeng/hidadeng.github.io"
        issue-term="pathname"
        theme="preferred-color-scheme"
        crossorigin="anonymous"
        async>
</script>

  
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2025 <a href="/">大邓和他的PYTHON</a></span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'Copy';

        function copyingDone() {
            copybutton.innerText = 'Copied!';
            setTimeout(() => {
                copybutton.innerText = 'Copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>


    
    
</body>

</html>
