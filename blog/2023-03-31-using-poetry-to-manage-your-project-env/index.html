<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>硬核 | 使用Poetry发布Python库到PyPi的方法 | 大邓和他的PYTHON</title>
<meta name="keywords" content="Python, Poetry, 虚拟环境" />
<meta name="description" content="如何使用poetry打包python库">
<meta name="author" content="大邓">
<link rel="canonical" href="/blog/2023-03-31-using-poetry-to-manage-your-project-env/" />
<meta name="baidu-site-verification" content="codeva-TJUe6nOmGr" />
<meta name="sogou-site-verification" content="dZHPIorOhK" />
<meta name="sogou-site-verification" content="dZHPIorOhK" />
<meta name="yandex-verification" content="5e672f12d3e2cacd" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.css" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.js" onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.89.4" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="硬核 | 使用Poetry发布Python库到PyPi的方法" />
<meta property="og:description" content="如何使用poetry打包python库" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/blog/2023-03-31-using-poetry-to-manage-your-project-env/" />
<meta property="og:image" content="/images/blog/poetry-manager-of-env.png" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2023-03-31T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2023-03-31T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="/images/blog/poetry-manager-of-env.png" />
<meta name="twitter:title" content="硬核 | 使用Poetry发布Python库到PyPi的方法"/>
<meta name="twitter:description" content="如何使用poetry打包python库"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Blogs",
      "item": "/blog/"
    }
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "硬核 | 使用Poetry发布Python库到PyPi的方法",
      "item": "/blog/2023-03-31-using-poetry-to-manage-your-project-env/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "硬核 | 使用Poetry发布Python库到PyPi的方法",
  "name": "硬核 | 使用Poetry发布Python库到PyPi的方法",
  "description": "如何使用poetry打包python库",
  "keywords": [
    "Python", "Poetry", "虚拟环境"
  ],
  "articleBody": "一、介绍 Poetry 是一个用于管理 Python 项目的工具，它的主要用途包括以下几个方面：\n 依赖管理：Poetry 可以帮助您管理项目的依赖项。您可以使用 Poetry 来定义项目的依赖项，包括 Python 版本和其他 Python 包，然后 Poetry 会自动安装和管理这些依赖项。这有助于确保项目在不同环境中具有一致的依赖项。 包管理：Poetry 可以帮助您构建和发布 Python 包。它能够生成标准的分发文件，如 wheel 和 sdist（源分发文件），以便您可以轻松地分享和分发您的包。此外，Poetry 还支持发布包到 PyPI（Python 包索引）等包仓库。 虚拟环境管理：Poetry 可以自动创建和管理虚拟环境，以确保项目的依赖项不会干扰全局 Python 环境或其他项目的环境。这有助于隔离项目之间的依赖关系，使项目更加稳定和可维护。 项目配置：Poetry 使用一个易于编辑的配置文件（pyproject.toml）来定义项目的元信息、依赖关系和其他配置。这使得项目配置变得更加直观和可读。 版本管理：Poetry 支持版本控制，可以帮助您管理项目的版本号。您可以在项目配置中指定版本号，并根据项目的进展逐渐升级版本。 脚本管理：Poetry 允许您定义和运行自定义脚本，以简化项目的常见任务，如测试、构建、文档生成等。 依赖解析：Poetry 使用一种智能的依赖解析算法来确保项目的依赖项解析不会导致冲突或不一致性，同时尽量满足依赖项的约束条件。  总之，Poetry 是一个功能强大的 Python 项目管理工具，可以帮助开发人员更轻松地管理项目的依赖项、构建和发布 Python 包，以及管理项目的配置和版本。它提供了一种现代化的方式来处理 Python 项目的工程化和依赖管理。\n今天主要分享\n 如何使用poetry创建项目环境 如何使用poetry打包自己的python库  \n二、创建项目环境 创建一个项目(或库)的虚拟环境，现在用poetry从0开始配置。首先安装poetry，在cmd执行\npip3 install poetry \n2.1 创建新项目 打开cmd， 切换至桌面(大邓喜欢在桌面做事，也简单好记)\ncd desktop poetry new myproject 这样在桌面新生成了一个cntext项目文件夹， 该项目的文件目录树结构\nmyproject |--- __init__.py poetry.lock pyproject.toml README.md tests |--- __init__.py 2.2 切换至项目目录 在cmd中将当前工作目录切换至myproject项目内\ncd myproject \n2.3 创建虚拟环境 在myproject项目内创建python3虚拟环境，cmd中的执行命令如下\npoetry env use python3 这会创建一个名为 python3 的虚拟环境并激活它。 例如大邓的Python是3.11.5，则pyproject.toml内会有\n[tool.poetry.dependencies] python = \"^3.11\" 表示poetry依赖于大邓电脑中的python3.11环境。\n2.4 定义依赖项 项目myproject是要做一些事的，假设myproject是要做与cntext库类似的事情，需要依赖的包有\njieba、numpy 、mittens、scikit-learn、matplotlib、pyecharts、gensim、nltk、pandas、 chardet、 h5py 。\n这时候我们需要在 myproject.toml 中加入\n[dependencies] python = \"^3.5\" jieba = \"^0.4.1\" numpy = \"^1.21.0\" mittens = \"^0.2\" scikit-learn = \"^1.3.0\" matplotlib = \"^3.6.0\" pyecharts = \"2.0.0\" gensim = \"^4.2.0\" nltk = \"^3.8\" pandas = \"^1.5.0\" chardet = \"^5.0.0\" h5py = \"^3.9.0\" 表示如果其他用户使用myproject这个项目，至少要保证python是3.5及以上版本， 依赖的库有jieba、numpy 、mittens、scikit-learn、matplotlib、pyecharts、gensim、nltk、pandas、 chardet、 h5py ， 以jieba为例， jieba要满足0.4.1及以上版本。\n2.5 安装依赖项 在虚拟环境中，使用以下命令安装项目的依赖性。在cmd中执行命令\npoetry install Poetry 会根据 pyproject.toml 文件中的定义自动下载和安装依赖项。\n需要注意，有时候也可以在虚拟环境中使用\npoetry add '依赖包名' poetry remove '依赖包名' 来增加或移除依赖包\n2.6 使用虚拟环境 现在，您的项目已经创建并配置好了虚拟环境。您可以使用以下命令激活虚拟环境：\npoetry shell 一旦虚拟环境被激活，您可以在其中运行 Python 解释器和项目依赖的命令。\n2.7 退出虚拟环境 要退出虚拟环境，只需在虚拟环境中运行以下命令：\nexit 这会将您带回到全局 Python 环境。\n以上是一个基本的 Poetry 虚拟环境的创建和使用教程。\n\n三、打包Python库 「打包Python库」的步骤与 「创建项目环境」 有很多类似的地方\n3.1 创建新项目 首先，创建一个新的 Python 库项目或使用现有的项目。确保项目的根目录中包含一个 pyproject.toml 文件来配置项目和依赖项。\n3.2 添加项目元信息 在 pyproject.toml 文件中，确保包含了项目的元信息，包括名称、版本、作者、许可证等。以下是一个示例：\n[tool.poetry] name = \"my-library\" version = \"1.0.0\" description = \"My Python library\" authors = [\"Your Name \"] license = \"MIT\" readme = \"README.md\" 请根据您的项目需求修改这些元信息。\n3.2 定义依赖项 使用 [tool.poetry.dependencies] 部分来定义您的库项目的依赖项。确保列出所有依赖项及其版本约束。\n3.3 创建库代码 编写您的库代码并将其组织到适当的目录中。通常，库代码会位于项目根目录下的一个包目录中。\n3.4 测试您的库 编写测试用例来验证您的库的功能。测试文件通常会位于一个独立的测试目录中，并使用测试框架（如 pytest）来运行测试。\n3.5 构建和验证 在项目根目录中运行以下命令来构建您的库：\npoetry build 这将生成一个 dist 目录，并在其中包含库的分发文件，包括 wheel 和 sdist（源分发文件）。\n3.6 发布到 PyPI   注册 PyPI 帐户：如果您还没有 PyPI 帐户，请先注册一个。\n  在poetry中设置PyPi的api-token信息：首先登录PyPi， 点击Accounting settings, 如截图所示创建你的api-token。\n在终端中运行以下命令，使用您的 PyPI 帐户登录：\n  poetry config pypi-token.pypi your-api-token 这将要求您输入 PyPI 用户名和密码。\n发布到 PyPI：运行以下命令来发布您的库到 PyPI：  poetry publish 这会自动构建您的库并将其发布到 PyPI。请注意，不要随便发布， 先检查所有代码是否能正常运行，之后再发布。\n3.7 分享您的库 现在，您的库已经发布到 PyPI，其他人可以使用 pip install 命令来安装它。您可以分享您的库的 PyPI 链接，以便其他人找到和使用它。\n这些步骤简要介绍了使用 Poetry 打包和发布 Python 库的过程。确保在发布之前测试您的库，并在 README.md 中提供必要的文档和示例，以帮助其他人使用您的库。\n\n广而告之  长期征稿 长期招募小伙伴 付费视频课 | Python实证指标构建与文本分析  ",
  "wordCount" : "300",
  "inLanguage": "en",
  "image":"/images/blog/poetry-manager-of-env.png","datePublished": "2023-03-31T00:00:00Z",
  "dateModified": "2023-03-31T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "大邓"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/blog/2023-03-31-using-poetry-to-manage-your-project-env/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "大邓和他的PYTHON",
    "logo": {
      "@type": "ImageObject",
      "url": "/favicon.ico"
    }
  }
}
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SFGQCREQ9X"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SFGQCREQ9X');
</script>



<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=PT+Serif" rel="stylesheet">
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="/" accesskey="h" title="大邓和他的PYTHON (Alt + H)" target="_blank">大邓和他的PYTHON</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="/about/" title="关于" target="_blank">
                    <span>关于</span>
                </a>
            </li>
            <li>
                <a href="/blog" title="博文" target="_blank">
                    <span>博文</span>
                </a>
            </li>
            <li>
                <a href="/search/" title="搜索" target="_blank">
                    <span>搜索</span>
                </a>
            </li>
            <li>
                <a href="/tags/" title="标签" target="_blank">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="/blog/management_python_course/" title="课程" target="_blank">
                    <span>课程</span>
                </a>
            </li>
            <li>
                <a href="/blog/the_text_analysis_list_about_ms/" title="文献" target="_blank">
                    <span>文献</span>
                </a>
            </li>
            <li>
                <a href="/blog/datasets_available_for_management_science/" title="数据" target="_blank">
                    <span>数据</span>
                </a>
            </li>
            <li>
                <a href="/blog/2024-04-27-cntext2x-usage-tutorial/" title="cntext2.x" target="_blank">
                    <span>cntext2.x</span>
                </a>
            </li>
            <li>
                <a href="/index.xml" title="RSS" target="_blank">
                    <span>RSS</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"
onload="renderMathInElement(document.body);"></script>




<article class="post-single">
  <header class="post-header">
    
    <div class="breadcrumbs"><a href="/" target="_blank">Home</a>&nbsp;»&nbsp;<a href="/blog/" target="_blank">Blogs</a></div>
    <h1 class="post-title">
      硬核 | 使用Poetry发布Python库到PyPi的方法
    </h1>
    <div class="post-meta"><span title='2023-03-31 00:00:00 +0000 UTC'>2023-03-31</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;大邓

</div>
  </header> 
<figure class="entry-cover"><a href="/images/blog/poetry-manager-of-env.png" target="_blank"
            rel="noopener noreferrer"><img loading="lazy" src="/images/blog/poetry-manager-of-env.png" alt=""></a>
        
</figure>
<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share 硬核 | 使用Poetry发布Python库到PyPi的方法 on twitter"
        href="https://twitter.com/intent/tweet/?text=%e7%a1%ac%e6%a0%b8%20%7c%20%e4%bd%bf%e7%94%a8Poetry%e5%8f%91%e5%b8%83Python%e5%ba%93%e5%88%b0PyPi%e7%9a%84%e6%96%b9%e6%b3%95&amp;url=%2fblog%2f2023-03-31-using-poetry-to-manage-your-project-env%2f&amp;hashtags=%e7%ac%ac%e4%b8%89%e6%96%b9%e5%ba%93%2cPython%e5%85%a5%e9%97%a8">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 硬核 | 使用Poetry发布Python库到PyPi的方法 on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fblog%2f2023-03-31-using-poetry-to-manage-your-project-env%2f&amp;title=%e7%a1%ac%e6%a0%b8%20%7c%20%e4%bd%bf%e7%94%a8Poetry%e5%8f%91%e5%b8%83Python%e5%ba%93%e5%88%b0PyPi%e7%9a%84%e6%96%b9%e6%b3%95&amp;summary=%e7%a1%ac%e6%a0%b8%20%7c%20%e4%bd%bf%e7%94%a8Poetry%e5%8f%91%e5%b8%83Python%e5%ba%93%e5%88%b0PyPi%e7%9a%84%e6%96%b9%e6%b3%95&amp;source=%2fblog%2f2023-03-31-using-poetry-to-manage-your-project-env%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 硬核 | 使用Poetry发布Python库到PyPi的方法 on reddit"
        href="https://reddit.com/submit?url=%2fblog%2f2023-03-31-using-poetry-to-manage-your-project-env%2f&title=%e7%a1%ac%e6%a0%b8%20%7c%20%e4%bd%bf%e7%94%a8Poetry%e5%8f%91%e5%b8%83Python%e5%ba%93%e5%88%b0PyPi%e7%9a%84%e6%96%b9%e6%b3%95">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 硬核 | 使用Poetry发布Python库到PyPi的方法 on facebook"
        href="https://facebook.com/sharer/sharer.php?u=%2fblog%2f2023-03-31-using-poetry-to-manage-your-project-env%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 硬核 | 使用Poetry发布Python库到PyPi的方法 on whatsapp"
        href="https://api.whatsapp.com/send?text=%e7%a1%ac%e6%a0%b8%20%7c%20%e4%bd%bf%e7%94%a8Poetry%e5%8f%91%e5%b8%83Python%e5%ba%93%e5%88%b0PyPi%e7%9a%84%e6%96%b9%e6%b3%95%20-%20%2fblog%2f2023-03-31-using-poetry-to-manage-your-project-env%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 硬核 | 使用Poetry发布Python库到PyPi的方法 on telegram"
        href="https://telegram.me/share/url?text=%e7%a1%ac%e6%a0%b8%20%7c%20%e4%bd%bf%e7%94%a8Poetry%e5%8f%91%e5%b8%83Python%e5%ba%93%e5%88%b0PyPi%e7%9a%84%e6%96%b9%e6%b3%95&amp;url=%2fblog%2f2023-03-31-using-poetry-to-manage-your-project-env%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
    
</div>
<aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">Table of Contents</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#%e4%b8%80%e4%bb%8b%e7%bb%8d" aria-label="一、介绍">一、介绍</a></li>
                    <li>
                        <a href="#%e4%ba%8c%e5%88%9b%e5%bb%ba%e9%a1%b9%e7%9b%ae%e7%8e%af%e5%a2%83" aria-label="二、创建项目环境">二、创建项目环境</a><ul>
                            
                    <li>
                        <a href="#21-%e5%88%9b%e5%bb%ba%e6%96%b0%e9%a1%b9%e7%9b%ae" aria-label="2.1 创建新项目">2.1 创建新项目</a></li>
                    <li>
                        <a href="#22-%e5%88%87%e6%8d%a2%e8%87%b3%e9%a1%b9%e7%9b%ae%e7%9b%ae%e5%bd%95" aria-label="2.2 切换至项目目录">2.2 切换至项目目录</a></li>
                    <li>
                        <a href="#23-%e5%88%9b%e5%bb%ba%e8%99%9a%e6%8b%9f%e7%8e%af%e5%a2%83" aria-label="2.3 创建虚拟环境">2.3 创建虚拟环境</a></li>
                    <li>
                        <a href="#24-%e5%ae%9a%e4%b9%89%e4%be%9d%e8%b5%96%e9%a1%b9" aria-label="2.4 定义依赖项">2.4 定义依赖项</a></li>
                    <li>
                        <a href="#25-%e5%ae%89%e8%a3%85%e4%be%9d%e8%b5%96%e9%a1%b9" aria-label="2.5 安装依赖项">2.5 安装依赖项</a></li>
                    <li>
                        <a href="#26-%e4%bd%bf%e7%94%a8%e8%99%9a%e6%8b%9f%e7%8e%af%e5%a2%83" aria-label="2.6 使用虚拟环境">2.6 使用虚拟环境</a></li>
                    <li>
                        <a href="#27-%e9%80%80%e5%87%ba%e8%99%9a%e6%8b%9f%e7%8e%af%e5%a2%83" aria-label="2.7 退出虚拟环境">2.7 退出虚拟环境</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e4%b8%89%e6%89%93%e5%8c%85python%e5%ba%93" aria-label="三、打包Python库">三、打包Python库</a><ul>
                            
                    <li>
                        <a href="#31-%e5%88%9b%e5%bb%ba%e6%96%b0%e9%a1%b9%e7%9b%ae" aria-label="3.1 创建新项目">3.1 创建新项目</a></li>
                    <li>
                        <a href="#32-%e6%b7%bb%e5%8a%a0%e9%a1%b9%e7%9b%ae%e5%85%83%e4%bf%a1%e6%81%af" aria-label="3.2 添加项目元信息">3.2 添加项目元信息</a></li>
                    <li>
                        <a href="#32-%e5%ae%9a%e4%b9%89%e4%be%9d%e8%b5%96%e9%a1%b9" aria-label="3.2 定义依赖项">3.2 定义依赖项</a></li>
                    <li>
                        <a href="#33-%e5%88%9b%e5%bb%ba%e5%ba%93%e4%bb%a3%e7%a0%81" aria-label="3.3 创建库代码">3.3 创建库代码</a></li>
                    <li>
                        <a href="#34-%e6%b5%8b%e8%af%95%e6%82%a8%e7%9a%84%e5%ba%93" aria-label="3.4 测试您的库">3.4 测试您的库</a></li>
                    <li>
                        <a href="#35-%e6%9e%84%e5%bb%ba%e5%92%8c%e9%aa%8c%e8%af%81" aria-label="3.5 构建和验证">3.5 构建和验证</a></li>
                    <li>
                        <a href="#36-%e5%8f%91%e5%b8%83%e5%88%b0-pypi" aria-label="3.6 发布到 PyPI">3.6 发布到 PyPI</a></li>
                    <li>
                        <a href="#37-%e5%88%86%e4%ba%ab%e6%82%a8%e7%9a%84%e5%ba%93" aria-label="3.7 分享您的库">3.7 分享您的库</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e5%b9%bf%e8%80%8c%e5%91%8a%e4%b9%8b" aria-label="广而告之">广而告之</a>
                    </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><h2 id="一介绍">一、介绍<a hidden class="anchor" aria-hidden="true" href="#一介绍">#</a></h2>
<p>Poetry 是一个用于管理 Python 项目的工具，它的主要用途包括以下几个方面：</p>
<ul>
<li>依赖管理：Poetry 可以帮助您管理项目的依赖项。您可以使用 Poetry 来定义项目的依赖项，包括 Python 版本和其他 Python 包，然后 Poetry 会自动安装和管理这些依赖项。这有助于确保项目在不同环境中具有一致的依赖项。</li>
<li>包管理：Poetry 可以帮助您构建和发布 Python 包。它能够生成标准的分发文件，如 wheel 和 sdist（源分发文件），以便您可以轻松地分享和分发您的包。此外，Poetry 还支持发布包到 PyPI（Python 包索引）等包仓库。</li>
<li>虚拟环境管理：Poetry 可以自动创建和管理虚拟环境，以确保项目的依赖项不会干扰全局 Python 环境或其他项目的环境。这有助于隔离项目之间的依赖关系，使项目更加稳定和可维护。</li>
<li>项目配置：Poetry 使用一个易于编辑的配置文件（pyproject.toml）来定义项目的元信息、依赖关系和其他配置。这使得项目配置变得更加直观和可读。</li>
<li>版本管理：Poetry 支持版本控制，可以帮助您管理项目的版本号。您可以在项目配置中指定版本号，并根据项目的进展逐渐升级版本。</li>
<li>脚本管理：Poetry 允许您定义和运行自定义脚本，以简化项目的常见任务，如测试、构建、文档生成等。</li>
<li>依赖解析：Poetry 使用一种智能的依赖解析算法来确保项目的依赖项解析不会导致冲突或不一致性，同时尽量满足依赖项的约束条件。</li>
</ul>
<p>总之，Poetry 是一个功能强大的 Python 项目管理工具，可以帮助开发人员更轻松地管理项目的依赖项、构建和发布 Python 包，以及管理项目的配置和版本。它提供了一种现代化的方式来处理 Python 项目的工程化和依赖管理。</p>
<p>今天主要分享</p>
<ul>
<li>如何使用poetry创建项目环境</li>
<li>如何使用poetry打包自己的python库</li>
</ul>
<p><br><br></p>
<h2 id="二创建项目环境">二、创建项目环境<a hidden class="anchor" aria-hidden="true" href="#二创建项目环境">#</a></h2>
<p>创建一个项目(或库)的虚拟环境，现在用poetry从0开始配置。首先安装poetry，在cmd执行</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">pip3 install poetry
</code></pre></div><br>
<h3 id="21-创建新项目">2.1 创建新项目<a hidden class="anchor" aria-hidden="true" href="#21-创建新项目">#</a></h3>
<p>打开cmd， 切换至桌面(大邓喜欢在桌面做事，也简单好记)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">cd desktop
poetry new myproject
</code></pre></div><p>这样在桌面新生成了一个cntext项目文件夹， 该项目的文件目录树结构</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">myproject
   |--- __init__.py
poetry.lock
pyproject.toml
README.md
tests
   |--- __init__.py
</code></pre></div><p><img loading="lazy" src="img/myproject.png" alt=""  />
</p>
<br>
<h3 id="22-切换至项目目录">2.2 切换至项目目录<a hidden class="anchor" aria-hidden="true" href="#22-切换至项目目录">#</a></h3>
<p>在cmd中将当前工作目录切换至myproject项目内</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">cd myproject
</code></pre></div><br>
<h3 id="23-创建虚拟环境">2.3 创建虚拟环境<a hidden class="anchor" aria-hidden="true" href="#23-创建虚拟环境">#</a></h3>
<p>在myproject项目内创建python3虚拟环境，cmd中的执行命令如下</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">poetry env use python3
</code></pre></div><p>这会创建一个名为 <code>python3</code> 的虚拟环境并激活它。 例如大邓的Python是3.11.5，则pyproject.toml内会有</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[tool.poetry.dependencies]
python = &#34;^3.11&#34;
</code></pre></div><p>表示poetry依赖于大邓电脑中的python3.11环境。</p>
<br>
<h3 id="24-定义依赖项">2.4 定义依赖项<a hidden class="anchor" aria-hidden="true" href="#24-定义依赖项">#</a></h3>
<p>项目myproject是要做一些事的，假设myproject是要做与cntext库类似的事情，需要依赖的包有</p>
<p>jieba、numpy 、mittens、scikit-learn、matplotlib、pyecharts、gensim、nltk、pandas、 chardet、 h5py 。</p>
<p>这时候我们需要在 <strong>myproject.toml</strong> 中加入</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[dependencies]
python = &#34;^3.5&#34;
jieba = &#34;^0.4.1&#34;
numpy = &#34;^1.21.0&#34;
mittens = &#34;^0.2&#34;
scikit-learn = &#34;^1.3.0&#34;
matplotlib = &#34;^3.6.0&#34;
pyecharts = &#34;2.0.0&#34;
gensim = &#34;^4.2.0&#34;
nltk = &#34;^3.8&#34;
pandas = &#34;^1.5.0&#34;
chardet = &#34;^5.0.0&#34;
h5py = &#34;^3.9.0&#34;
</code></pre></div><p>表示如果其他用户使用myproject这个项目，至少要保证python是3.5及以上版本， 依赖的库有jieba、numpy 、mittens、scikit-learn、matplotlib、pyecharts、gensim、nltk、pandas、 chardet、 h5py ， 以jieba为例， jieba要满足0.4.1及以上版本。</p>
<br>
<h3 id="25-安装依赖项">2.5 安装依赖项<a hidden class="anchor" aria-hidden="true" href="#25-安装依赖项">#</a></h3>
<p>在虚拟环境中，使用以下命令安装项目的依赖性。在cmd中执行命令</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">poetry install
</code></pre></div><p>Poetry 会根据 <code>pyproject.toml</code> 文件中的定义自动下载和安装依赖项。</p>
<p>需要注意，有时候也可以在虚拟环境中使用</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">poetry add &#39;依赖包名&#39;
poetry remove &#39;依赖包名&#39;
</code></pre></div><p>来增加或移除依赖包</p>
<br>
<h3 id="26-使用虚拟环境">2.6 使用虚拟环境<a hidden class="anchor" aria-hidden="true" href="#26-使用虚拟环境">#</a></h3>
<p>现在，您的项目已经创建并配置好了虚拟环境。您可以使用以下命令激活虚拟环境：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">poetry shell
</code></pre></div><p>一旦虚拟环境被激活，您可以在其中运行 Python 解释器和项目依赖的命令。</p>
<br>
<h3 id="27-退出虚拟环境">2.7 退出虚拟环境<a hidden class="anchor" aria-hidden="true" href="#27-退出虚拟环境">#</a></h3>
<p>要退出虚拟环境，只需在虚拟环境中运行以下命令：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">exit
</code></pre></div><p>这会将您带回到全局 Python 环境。</p>
<p>以上是一个基本的 Poetry 虚拟环境的创建和使用教程。</p>
<p><br><br></p>
<h2 id="三打包python库">三、打包Python库<a hidden class="anchor" aria-hidden="true" href="#三打包python库">#</a></h2>
<p>「打包Python库」的步骤与 「创建项目环境」 有很多类似的地方</p>
<h3 id="31-创建新项目">3.1 创建新项目<a hidden class="anchor" aria-hidden="true" href="#31-创建新项目">#</a></h3>
<p>首先，创建一个新的 Python 库项目或使用现有的项目。确保项目的根目录中包含一个 <code>pyproject.toml</code> 文件来配置项目和依赖项。</p>
<br>
<h3 id="32-添加项目元信息">3.2 添加项目元信息<a hidden class="anchor" aria-hidden="true" href="#32-添加项目元信息">#</a></h3>
<p>在 <code>pyproject.toml</code> 文件中，确保包含了项目的元信息，包括名称、版本、作者、许可证等。以下是一个示例：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">[tool.poetry]
name = &#34;my-library&#34;
version = &#34;1.0.0&#34;
description = &#34;My Python library&#34;
authors = [&#34;Your Name &lt;your@email.com&gt;&#34;]
license = &#34;MIT&#34;
readme = &#34;README.md&#34;
</code></pre></div><p>请根据您的项目需求修改这些元信息。<br></p>
<h3 id="32-定义依赖项">3.2 定义依赖项<a hidden class="anchor" aria-hidden="true" href="#32-定义依赖项">#</a></h3>
<p>使用 <code>[tool.poetry.dependencies]</code> 部分来定义您的库项目的依赖项。确保列出所有依赖项及其版本约束。</p>
<br>
<h3 id="33-创建库代码">3.3 创建库代码<a hidden class="anchor" aria-hidden="true" href="#33-创建库代码">#</a></h3>
<p>编写您的库代码并将其组织到适当的目录中。通常，库代码会位于项目根目录下的一个包目录中。<br></p>
<h3 id="34-测试您的库">3.4 测试您的库<a hidden class="anchor" aria-hidden="true" href="#34-测试您的库">#</a></h3>
<p>编写测试用例来验证您的库的功能。测试文件通常会位于一个独立的测试目录中，并使用测试框架（如 <code>pytest</code>）来运行测试。<br></p>
<h3 id="35-构建和验证">3.5 构建和验证<a hidden class="anchor" aria-hidden="true" href="#35-构建和验证">#</a></h3>
<p>在项目根目录中运行以下命令来构建您的库：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">poetry build
</code></pre></div><p>这将生成一个 dist 目录，并在其中包含库的分发文件，包括 wheel 和 sdist（源分发文件）。<br></p>
<h3 id="36-发布到-pypi">3.6 发布到 PyPI<a hidden class="anchor" aria-hidden="true" href="#36-发布到-pypi">#</a></h3>
<ol>
<li>
<p><strong>注册 PyPI 帐户</strong>：如果您还没有 PyPI 帐户，请先注册一个。</p>
</li>
<li>
<p><strong>在poetry中设置PyPi的api-token信息</strong>：首先登录PyPi， 点击Accounting settings, 如截图所示创建你的api-token。</p>
<p><img loading="lazy" src="img/api-token.png" alt=""  />
</p>
<p>在终端中运行以下命令，使用您的 PyPI 帐户登录：</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">poetry config pypi-token.pypi your-api-token
</code></pre></div><p>这将要求您输入 PyPI 用户名和密码。</p>
<ol start="3">
<li><strong>发布到 PyPI</strong>：运行以下命令来发布您的库到 PyPI：</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">poetry publish
</code></pre></div><p>这会自动构建您的库并将其发布到 PyPI。请注意，不要随便发布， 先检查所有代码是否能正常运行，之后再发布。</p>
<br>
<h3 id="37-分享您的库">3.7 分享您的库<a hidden class="anchor" aria-hidden="true" href="#37-分享您的库">#</a></h3>
<p>现在，您的库已经发布到 PyPI，其他人可以使用 <code>pip install</code> 命令来安装它。您可以分享您的库的 PyPI 链接，以便其他人找到和使用它。</p>
<p>这些步骤简要介绍了使用 Poetry 打包和发布 Python 库的过程。确保在发布之前测试您的库，并在 README.md 中提供必要的文档和示例，以帮助其他人使用您的库。</p>
<p><br><br></p>
<h2 id="广而告之">广而告之<a hidden class="anchor" aria-hidden="true" href="#广而告之">#</a></h2>
<ul>
<li><a href="https://textdata.cn/blog/call_for_paper/">长期征稿</a></li>
<li><a href="https://textdata.cn/blog/we_need_you/">长期招募小伙伴</a></li>
<li><a href="https://textdata.cn/blog/management_python_course/">付费视频课 | Python实证指标构建与文本分析</a></li>
</ul>


  </div>

  <footer class="post-footer">
      <ul class="post-tags">
        <b>Tags:  &nbsp;</b>
        <li><a href="/tags/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/" target='_blank'>第三方库</a></li>
        <li><a href="/tags/python%E5%85%A5%E9%97%A8/" target='_blank'>Python入门</a></li>
      </ul>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share 硬核 | 使用Poetry发布Python库到PyPi的方法 on twitter"
        href="https://twitter.com/intent/tweet/?text=%e7%a1%ac%e6%a0%b8%20%7c%20%e4%bd%bf%e7%94%a8Poetry%e5%8f%91%e5%b8%83Python%e5%ba%93%e5%88%b0PyPi%e7%9a%84%e6%96%b9%e6%b3%95&amp;url=%2fblog%2f2023-03-31-using-poetry-to-manage-your-project-env%2f&amp;hashtags=%e7%ac%ac%e4%b8%89%e6%96%b9%e5%ba%93%2cPython%e5%85%a5%e9%97%a8">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 硬核 | 使用Poetry发布Python库到PyPi的方法 on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fblog%2f2023-03-31-using-poetry-to-manage-your-project-env%2f&amp;title=%e7%a1%ac%e6%a0%b8%20%7c%20%e4%bd%bf%e7%94%a8Poetry%e5%8f%91%e5%b8%83Python%e5%ba%93%e5%88%b0PyPi%e7%9a%84%e6%96%b9%e6%b3%95&amp;summary=%e7%a1%ac%e6%a0%b8%20%7c%20%e4%bd%bf%e7%94%a8Poetry%e5%8f%91%e5%b8%83Python%e5%ba%93%e5%88%b0PyPi%e7%9a%84%e6%96%b9%e6%b3%95&amp;source=%2fblog%2f2023-03-31-using-poetry-to-manage-your-project-env%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 硬核 | 使用Poetry发布Python库到PyPi的方法 on reddit"
        href="https://reddit.com/submit?url=%2fblog%2f2023-03-31-using-poetry-to-manage-your-project-env%2f&title=%e7%a1%ac%e6%a0%b8%20%7c%20%e4%bd%bf%e7%94%a8Poetry%e5%8f%91%e5%b8%83Python%e5%ba%93%e5%88%b0PyPi%e7%9a%84%e6%96%b9%e6%b3%95">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 硬核 | 使用Poetry发布Python库到PyPi的方法 on facebook"
        href="https://facebook.com/sharer/sharer.php?u=%2fblog%2f2023-03-31-using-poetry-to-manage-your-project-env%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 硬核 | 使用Poetry发布Python库到PyPi的方法 on whatsapp"
        href="https://api.whatsapp.com/send?text=%e7%a1%ac%e6%a0%b8%20%7c%20%e4%bd%bf%e7%94%a8Poetry%e5%8f%91%e5%b8%83Python%e5%ba%93%e5%88%b0PyPi%e7%9a%84%e6%96%b9%e6%b3%95%20-%20%2fblog%2f2023-03-31-using-poetry-to-manage-your-project-env%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share 硬核 | 使用Poetry发布Python库到PyPi的方法 on telegram"
        href="https://telegram.me/share/url?text=%e7%a1%ac%e6%a0%b8%20%7c%20%e4%bd%bf%e7%94%a8Poetry%e5%8f%91%e5%b8%83Python%e5%ba%93%e5%88%b0PyPi%e7%9a%84%e6%96%b9%e6%b3%95&amp;url=%2fblog%2f2023-03-31-using-poetry-to-manage-your-project-env%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
    
</div>




  </footer><script src="https://utteranc.es/client.js"
        repo="hiDaDeng/hidadeng.github.io"
        issue-term="pathname"
        theme="preferred-color-scheme"
        crossorigin="anonymous"
        async>
</script>

  
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2025 <a href="/">大邓和他的PYTHON</a></span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'Copy';

        function copyingDone() {
            copybutton.innerText = 'Copied!';
            setTimeout(() => {
                copybutton.innerText = 'Copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>


    
    
</body>

</html>
