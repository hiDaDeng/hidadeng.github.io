---
title: "Rmarkdown | 使用tinytex撰写并渲染中文latex文档"
author: "大邓"
date: "2022-08-23"
output: pdf_document
cover:
  image: images/blog/tinytex_rstudio.png
description: 不再使用动辄十几个G的Tex巨型软件包，从此中文latex文档，渲染不再是难题
keywords:
- Rstudio
- Rmarkdown
draft: no
type: post
tags:
- Rstudio
- Rmarkdown
---

R圈谢一辉大神开发的tinytex包，是一个强悍精干的Tex软件包。如果接触过LaTex的同学应该知道，配置好Latex的环境需要几个G，十分占用空间。其次，TinyTex将LaTex包的配置、安装、渲染简化为几个函数。我最常用的就是三个。

## 配置TinyTex

安装和维护TinyTex环境十分简单，首先我们安装好R语言的tinytex包，之后用该包安装TinyTex软件。考虑到 [Tex资源站CTAN](https://ctan.org/mirrors/mirmon)部署在海外，使用该站点下载资源包会很慢，所以这里配置为国内清华站点。

```{r}
#安装R语言中的tinytex包
install.packages("tinytex")

#使用tinytex包安装TinyTex
tinytex::install_tinytex()

#设置资源镜像，加速资源的下载安装
tinytex::tlmgr_repo('http://mirrors.tuna.tsinghua.edu.cn/CTAN/')
```

<br><br>


## 编译

LaTex文档是一团源代码，我们需要将其编译(渲染)为PDF文件。

```
tinytex::pdflatex('英文tex文件路径')  
tinytex::xelatex('中英文tex文件路径') #推荐
tinytex::latexmk('中英文tex文件路径') #推荐
```

我们经常跟中英文一起打交道，所以编译方法使用xelatex。 pdflatex或xelatex渲染过程可能会缺一些包，需要手动安装。而latexmk会在编译过程中自动安装缺失的包，不过中文最后还是

>TinyTex缺点是初学者编译慢，用的越多越久，越好用，工具使用的收益曲线是向上的。而TexLive、MacTex等使用难度是水平的。


<br><br>

## 维护

TinyTeX 的主要维护工作应该是安装 LaTeX 包以及更新。

- 如果编译 PDF 时出现缺失 LaTeX 包的错误信息，可以用命令行 ``tinytex::tlmgr_search()``
- 根据缺失文件名搜索包名，并用 ``tinytex::tlmgr_install()`` 安装缺失的包；
- 命令 ``tinytex::tlmgr_update()`` 可以更新整个 TeX Live 系统。R 用户可以使用 R 包 tinytex 中的相应函数，如：

```{r eval=F}
tinytex::tlmgr_search('framed.sty')  # 搜索包含 framed.sty 文件的 LaTeX 包
tinytex::tlmgr_install('framed')     # 安装 framed 包
tinytex::tlmgr_update()              # 更新 TeX Live
```


<br><br>

## 最后

即时再简单的工具，如果只看依然会看着容易用着难，还是要多动手的。

<br><br>

## 广而告之

-   [长期征稿](https://hidadeng.github.io/blog/call_for_paper/)
-   [长期招募小伙伴](https://hidadeng.github.io/blog/we_need_you/)
-   [付费视频课 \| Python实证指标构建与文本分析](https://hidadeng.github.io/blog/management_python_course/)
